uint64_t APSDispatchSyncTaskCallback(uint64_t a1)
{
  uint64_t result;

  result = (*(uint64_t (**)(void))(a1 + 16))(*(void *)(a1 + 8));
  **(_DWORD **)a1 = result;
  return result;
}

void APSDispatchAsyncFHelper(NSObject *a1, uint64_t a2, const void *a3, size_t a4)
{
  if (a1)
  {
    if (a2)
    {
      v8 = malloc_type_malloc(a4 + 16, 0x8F3D1E9EuLL);
      if (v8)
      {
        v9 = v8;
        v10 = v8 + 2;
        if (a3 != 0 && a4 != 0) {
          v11 = v10;
        }
        else {
          v11 = 0;
        }
        void *v9 = v11;
        v9[1] = a2;
        if (a3 != 0 && a4 != 0) {
          memcpy(v10, a3, a4);
        }
        dispatch_async_f(a1, v9, (dispatch_function_t)APSDeferredCallback);
      }
    }
  }
}

uint64_t APSDispatchSyncTask(NSObject *a1, uint64_t a2, uint64_t a3)
{
  unsigned int v6 = 0;
  v5[0] = &v6;
  v5[1] = a3;
  v5[2] = a2;
  uint64_t v3 = 4294960591;
  if (a1 && a2)
  {
    dispatch_sync_f(a1, v5, (dispatch_function_t)APSDispatchSyncTaskCallback);
    return v6;
  }
  return v3;
}

uint64_t APSEventRecorderRecordEventWithFlagsAtTime(uint64_t result, int a2, char a3, double a4)
{
  if (result)
  {
    if ((a2 & 0xFFFF000) == *(_DWORD *)(result + 16) && (uint64_t v4 = a2 & 0xFFF, v4 < *(_DWORD *)(result + 104)))
    {
      uint64_t v5 = *(void *)(result + 112);
      if ((a3 & 1) == 0 || *(double *)(v5 + 16 * v4) == 0.0) {
        *(double *)(v5 + 16 * v4) = a4;
      }
      result = *(unsigned int *)(v5 + 16 * v4 + 8);
      if (result)
      {
        kdebug_trace();
        return 0;
      }
    }
    else
    {
      APSLogErrorAt(0);
      return 4294895134;
    }
  }
  return result;
}

uint64_t APSIsAPMSpeaker()
{
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  return APSIsAPMSpeaker_sIsAPMSpeaker;
}

uint64_t APSSettingsGetBooleanIfPresent(const __CFString *a1, BOOL *a2)
{
  uint64_t v4 = 0;
  uint64_t result = APSSettingsGetInt64IfPresent(a1, &v4);
  if (result) {
    *a2 = v4 != 0;
  }
  return result;
}

uint64_t APSSettingsGetInt64IfPresent(const __CFString *a1, uint64_t *a2)
{
  int v9 = 0;
  uint64_t v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    uint64_t v6 = CFGetInt64();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

const void *APSSettingsGetInt64(const __CFString *a1, int *a2)
{
  uint64_t result = APSSettingsCopyValueEx(a1, 0, a2);
  if (result)
  {
    uint64_t v3 = result;
    uint64_t v4 = CFGetInt64();
    CFRelease(v3);
    return (const void *)v4;
  }
  return result;
}

const void *APSSettingsCopyValueEx(const __CFString *a1, uint64_t a2, int *a3)
{
  if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
    CFStringRef v6 = @"com.apple.coremedia";
  }
  else {
    CFStringRef v6 = @"com.apple.airplay";
  }
  CFPropertyListRef v7 = CFPreferencesCopyAppValue(a1, v6);
  v8 = v7;
  if (!v7)
  {
    int v9 = -6727;
    if (!a3) {
      return v8;
    }
    goto LABEL_10;
  }
  if (!a2 || CFGetTypeID(v7) == a2)
  {
    int v9 = 0;
    if (!a3) {
      return v8;
    }
    goto LABEL_10;
  }
  CFRelease(v8);
  v8 = 0;
  int v9 = -6756;
  if (a3) {
LABEL_10:
  }
    *a3 = v9;
  return v8;
}

uint64_t APSIsVirtualMachine()
{
  if (APSIsVirtualMachine_sCheckOnceForVM != -1) {
    dispatch_once(&APSIsVirtualMachine_sCheckOnceForVM, &__block_literal_global_326);
  }
  return APSIsVirtualMachine_sIsVirtualMachine;
}

uint64_t APSIsProximitySenderEnabled()
{
  if (APSIsProximitySenderEnabled_sOnce != -1) {
    dispatch_once(&APSIsProximitySenderEnabled_sOnce, &__block_literal_global_73);
  }
  return APSIsProximitySenderEnabled_sProximitySenderEnabled;
}

uint64_t APSIsDemoModeEnabled()
{
  if (APSIsDemoModeEnabled_once != -1) {
    dispatch_once(&APSIsDemoModeEnabled_once, &__block_literal_global_320);
  }
  return APSIsDemoModeEnabled_enabled;
}

void APSDeferredCallback(void (**a1)(void))
{
  if (a1)
  {
    a1[1](*a1);
    free(a1);
  }
}

double APSEventRecorderGetEventTimeRecursive(CFTypeRef a1, int a2, int *a3)
{
  double v4 = 0.0;
  if (!a1)
  {
    int v7 = 0;
    goto LABEL_8;
  }
  __int16 v5 = a2;
  int v6 = a2 & 0xFFFF000;
  int v7 = -72162;
  if ((a2 & 0xFFFF000) == *((_DWORD *)a1 + 4))
  {
    a1 = CFRetain(a1);
  }
  else
  {
    a1 = eventRecorder_copyChildEventRecorderOfTypeByDeepSearch((uint64_t)a1, a2 & 0xFFFF000);
    if (!a1)
    {
      int v7 = -72163;
      goto LABEL_8;
    }
  }
  if (v6 == *((_DWORD *)a1 + 4) && (v5 & 0xFFFu) < *((_DWORD *)a1 + 26))
  {
    int v7 = 0;
    double v4 = *(double *)(*((void *)a1 + 14) + 16 * (v5 & 0xFFF));
  }
LABEL_8:
  if (a3) {
    *a3 = v7;
  }
  if (a1) {
    CFRelease(a1);
  }
  return v4;
}

uint64_t APSRegisterReceiverAppLauncher()
{
  if (launcher_getReceiverLauncherShared_once != -1) {
    dispatch_once(&launcher_getReceiverLauncherShared_once, &__block_literal_global);
  }
  pthread_mutex_lock((pthread_mutex_t *)qword_1EB9F4B50);
  if (dword_1EB9F4B68 == -1)
  {
    handler[0] = MEMORY[0x1E4F143A8];
    handler[1] = 3221225472;
    handler[2] = __APSRegisterReceiverAppLauncher_block_invoke;
    handler[3] = &__block_descriptor_40_e8_v12__0i8l;
    handler[4] = &launcher_getReceiverLauncherShared_launcher;
    notify_register_dispatch("com.apple.airplay.prefsChanged", &dword_1EB9F4B68, (dispatch_queue_t)qword_1EB9F4B48, handler);
  }
  int v6 = 0;
  Int64 = APSSettingsGetInt64(@"alternateSenderListenerEnable", &v6);
  if (v6) {
    BOOL v1 = 1;
  }
  else {
    BOOL v1 = Int64 == 0;
  }
  char v2 = !v1;
  byte_1EB9F4B6D = v2;
  if (gLogCategory_APSReceiverAppLauncher <= 50
    && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v3 = launcher_start((uint64_t)&launcher_getReceiverLauncherShared_launcher);
  pthread_mutex_unlock((pthread_mutex_t *)qword_1EB9F4B50);
  return v3;
}

uint64_t __APSRegisterReceiverAppLauncher_block_invoke(uint64_t a1)
{
  uint64_t v1 = *(void *)(a1 + 32);
  pthread_mutex_lock(*(pthread_mutex_t **)(v1 + 24));
  APSGetAccessControlConfig((unsigned int *)(v1 + 8), 0);
  int v6 = 0;
  Int64 = APSSettingsGetInt64(@"alternateSenderListenerEnable", &v6);
  if (v6) {
    BOOL v3 = 1;
  }
  else {
    BOOL v3 = Int64 == 0;
  }
  char v4 = !v3;
  *(unsigned char *)(v1 + 53) = v4;
  if (v3)
  {
    if (gLogCategory_APSReceiverAppLauncher <= 50
      && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    launcher_stop((id *)v1);
  }
  else
  {
    if (gLogCategory_APSReceiverAppLauncher <= 50
      && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    launcher_start(v1);
  }
  return pthread_mutex_unlock(*(pthread_mutex_t **)(v1 + 24));
}

uint64_t launcher_start(uint64_t a1)
{
  if (!*(unsigned char *)(a1 + 53) || *(void *)a1) {
    return 0;
  }
  if (gLogCategory_APSReceiverAppLauncher <= 50
    && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  id v2 = objc_alloc_init(MEMORY[0x1E4F1BD48]);
  *(void *)a1 = v2;
  if (v2)
  {
    [v2 setDispatchQueue:*(void *)(a1 + 16)];
    objc_msgSend(*(id *)a1, "setDiscoveryFlags:", objc_msgSend(*(id *)a1, "discoveryFlags") | 0x4000000000);
    v4[0] = MEMORY[0x1E4F143A8];
    v4[1] = 3221225472;
    v4[2] = __launcher_start_block_invoke;
    v4[3] = &__block_descriptor_41_e18_v16__0__CBDevice_8l;
    char v5 = 1;
    v4[4] = a1;
    [*(id *)a1 setDeviceFoundHandler:v4];
    [*(id *)a1 activateWithCompletion:&__block_literal_global_35];
    return 0;
  }
  APSLogErrorAt(0);
  if (gLogCategory_APSReceiverAppLauncher <= 90
    && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  launcher_stop((id *)a1);
  return 4294960568;
}

uint64_t __launcher_start_block_invoke(uint64_t a1, void *a2)
{
  uint64_t result = [a2 airplaySourceFlags];
  if ((result & 0x80) == 0)
  {
    uint64_t result = APSShouldStartAdvertistingForAirPlaySourceBeacon(a2, *(unsigned __int8 *)(a1 + 40), *(_DWORD *)(*(void *)(a1 + 32) + 8) == 2);
    if (result)
    {
      char v5 = *(uint64_t (**)(void))(*(void *)(a1 + 32) + 32);
      return v5();
    }
  }
  return result;
}

void launcher_stop(id *a1)
{
  if (*a1)
  {
    if (gLogCategory_APSReceiverAppLauncher <= 50
      && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    [*a1 invalidate];

    *a1 = 0;
  }
}

void __launcher_start_block_invoke_2(uint64_t a1, uint64_t a2)
{
  if (a2)
  {
    if (gLogCategory_APSReceiverAppLauncher <= 90
      && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
    {
LABEL_9:
      LogPrintF();
    }
  }
  else if (gLogCategory_APSReceiverAppLauncher <= 50 {
         && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
  }
  {
    goto LABEL_9;
  }
}

uint64_t __launcher_getReceiverLauncherShared_block_invoke()
{
  qword_1EB9F4B50 = FigSimpleMutexCreate();
  qword_1EB9F4B48 = (uint64_t)dispatch_queue_create("APSReceiverAppLauncherQueue", 0);
  dword_1EB9F4B68 = -1;
  qword_1EB9F4B58 = (uint64_t)launcher_senderDeviceFound;
  qword_1EB9F4B60 = @"com.apple.airplayreceiver";
  byte_1EB9F4B6C = 1;
  uint64_t result = IsAppleInternalBuild();
  if (result)
  {
    uint64_t result = (uint64_t)APSSettingsCopyValueEx(@"alternateSenderListenerAppID", 0, 0);
    if (result)
    {
      uint64_t v1 = result;
      uint64_t result = CFEqual((CFTypeRef)result, (CFTypeRef)qword_1EB9F4B60);
      if (!result)
      {
        qword_1EB9F4B60 = v1;
        byte_1EB9F4B6C = 0;
      }
    }
  }
  return result;
}

void launcher_senderDeviceFound(uint64_t a1)
{
  if (*(unsigned char *)(a1 + 53))
  {
    uint64_t v1 = a1;
    if (gLogCategory_APSReceiverAppLauncher <= 50)
    {
      if (gLogCategory_APSReceiverAppLauncher != -1 || (a1 = _LogCategory_Initialize(), a1)) {
        a1 = LogPrintF();
      }
    }
    uint64_t v2 = *(void *)(v1 + 40);
    if (v2)
    {
      int v3 = *(unsigned __int8 *)(v1 + 52);
      char v4 = (void *)MEMORY[0x1D25EF3B0](a1);
      if (gLogCategory_APSReceiverAppLauncher <= 50
        && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
      {
        uint64_t v11 = v2;
        LogPrintF();
      }
      char v5 = dispatch_semaphore_create(0);
      int v6 = (void *)[MEMORY[0x1E4F1CA60] dictionary];
      int v7 = v6;
      if (v3)
      {
        [v6 setObject:MEMORY[0x1E4F1CC38] forKey:*MEMORY[0x1E4F625F8]];
        uint64_t v8 = [MEMORY[0x1E4F1CB10] URLWithString:@"airplayreceiver-private://start"];
        [v7 setObject:v8 forKey:*MEMORY[0x1E4F62678]];
      }
      int v9 = objc_msgSend(MEMORY[0x1E4F629E0], "serviceWithDefaultShellEndpoint", v11);
      uint64_t v10 = [MEMORY[0x1E4F629C8] optionsWithDictionary:v7];
      v12[0] = MEMORY[0x1E4F143A8];
      v12[1] = 3221225472;
      v12[2] = __launchReceiverApp_block_invoke;
      v12[3] = &unk_1E68978D0;
      v12[4] = v5;
      v12[5] = v2;
      [v9 openApplication:v2 withOptions:v10 completion:v12];
      dispatch_semaphore_wait(v5, 0xFFFFFFFFFFFFFFFFLL);
      dispatch_release(v5);
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
}

intptr_t __launchReceiverApp_block_invoke(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if (a3)
  {
    if (gLogCategory_APSReceiverAppLauncher <= 90
      && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
    {
LABEL_7:
      LogPrintF();
    }
  }
  else if (gLogCategory_APSReceiverAppLauncher <= 50 {
         && (gLogCategory_APSReceiverAppLauncher != -1 || _LogCategory_Initialize()))
  }
  {
    goto LABEL_7;
  }
  char v4 = *(NSObject **)(a1 + 32);

  return dispatch_semaphore_signal(v4);
}

uint64_t APSUnregisterReceiverAppLauncher()
{
  if (launcher_getReceiverLauncherShared_once != -1) {
    dispatch_once(&launcher_getReceiverLauncherShared_once, &__block_literal_global);
  }
  pthread_mutex_lock((pthread_mutex_t *)qword_1EB9F4B50);
  if (dword_1EB9F4B68 != -1)
  {
    notify_cancel(dword_1EB9F4B68);
    dword_1EB9F4B68 = -1;
  }
  launcher_stop(launcher_getReceiverLauncherShared_launcher);
  v0 = (pthread_mutex_t *)qword_1EB9F4B50;

  return pthread_mutex_unlock(v0);
}

char *APSPacketLossConcealerSaveData(char *__dst, char *a2, size_t a3)
{
  if (__dst && a2 && a3)
  {
    int v3 = __dst;
    __dst = (char *)*((void *)__dst + 2048);
    unint64_t v4 = v3 - __dst + 0x4000;
    size_t v5 = a3 - v4;
    if (a3 <= v4)
    {
      int v6 = 0;
      int v7 = 0;
      size_t v5 = 0;
      *((void *)v3 + 2048) = &__dst[a3];
      *((void *)v3 + 2049) = &__dst[a3];
    }
    else
    {
      int v6 = &a2[v4];
      *((void *)v3 + 2048) = &v3[v5];
      *((void *)v3 + 2049) = &v3[v5];
      int v7 = v3;
      a3 = v3 - __dst + 0x4000;
      if (v3 - __dst == -16384)
      {
        if (!v5)
        {
LABEL_8:
          *((_DWORD *)v3 + 4103) = 0;
          return __dst;
        }
LABEL_7:
        __dst = (char *)memcpy(v7, v6, v5);
        goto LABEL_8;
      }
    }
    __dst = (char *)memcpy(__dst, a2, a3);
    if (!v5) {
      goto LABEL_8;
    }
    goto LABEL_7;
  }
  return __dst;
}

void APSPacketLossConcealerReset(void *a1, int a2, char a3, char a4)
{
  if (a1)
  {
    uint64_t v8 = a1 + 2050;
    bzero(a1, 0x4000uLL);
    a1[2048] = a1;
    a1[2049] = a1;
    *(unsigned char *)uint64_t v8 = a4;
    *((unsigned char *)v8 + 8) = a3;
    *((_DWORD *)v8 + 1) = a2;
  }
}

uint64_t APSPacketLossConcealerConceal(char *__src, size_t __n, int a3, char *__dst)
{
  uint64_t result = 0;
  if (__n)
  {
    if (__src)
    {
      int v6 = __dst;
      if (__dst)
      {
        int64_t v7 = __n;
        uint64_t v8 = __src + 0x3FFF;
        switch(a3)
        {
          case 0:
          case 3:
            uint64_t v9 = *((void *)__src + 2048);
            uint64_t v10 = (unsigned char *)(v9 - __n);
            if (v9 - v7 >= (unint64_t)__src)
            {
              v13 = 0;
              __src = 0;
              size_t v12 = 0;
              uint64_t v11 = (char *)v7;
            }
            else
            {
              uint64_t v11 = (char *)(__src - v10);
              size_t v12 = v9 - (void)__src;
              v13 = &__dst[__src - v10];
              if (__src == v10) {
                goto LABEL_19;
              }
              v10 += 0x4000;
            }
            memcpy(__dst, v10, (size_t)v11);
LABEL_19:
            if (v12) {
              memcpy(v13, __src, v12);
            }
            unint64_t v19 = v8[17];
            if ((v19 - 40) >= 0xFFFFFFE0 && v7 >= 1)
            {
              unint64_t v20 = v19 >> 3;
              unsigned int v21 = *(_DWORD *)(v8 + 21) * v8[25];
              v22 = &v6[v7];
              unsigned int v23 = v21 / 0x3E8;
              int v24 = (v19 >> 3) - 1;
              while (2)
              {
                int v25 = *(_DWORD *)(v8 + 29);
                if (v25 + 1 < v21) {
                  unsigned int v26 = v25 + 1;
                }
                else {
                  unsigned int v26 = v21;
                }
                *(_DWORD *)(v8 + 29) = v26;
                unsigned int v27 = 20 * (255 * v26 / v21);
                if (v27 >= 0xFF) {
                  unsigned int v27 = 255;
                }
                int v28 = v27 ^ 0xFF;
                switch(v24)
                {
                  case 0:
                    if (v26 >= v23)
                    {
                      unsigned int v33 = *v6 * v28 + ((-32639 * (__int16)(*v6 * (_WORD)v28)) >> 16);
                      int v29 = ((__int16)v33 >> 7) + ((unsigned __int16)(v33 & 0x8000) >> 15);
                    }
                    else
                    {
                      LOBYTE(v29) = 0;
                    }
                    *int v6 = v29;
                    goto LABEL_46;
                  case 1:
                    if (v26 >= v23) {
                      int v30 = v28 * *(__int16 *)v6 / 255;
                    }
                    else {
                      LOWORD(v30) = 0;
                    }
                    *(_WORD *)int v6 = v30;
                    goto LABEL_46;
                  case 2:
                    if (v26 >= v23) {
                      unsigned int v31 = (*(_DWORD *)v6 & 0xFFFFFFu) * v28 / 0xFF;
                    }
                    else {
                      unsigned int v31 = 0;
                    }
                    *(_WORD *)int v6 = v31;
                    v6[2] = BYTE2(v31);
                    goto LABEL_46;
                  case 3:
                    if (v26 >= v23) {
                      int v32 = *(_DWORD *)v6 * v28 / 255;
                    }
                    else {
                      int v32 = 0;
                    }
                    *(_DWORD *)int v6 = v32;
LABEL_46:
                    v6 += v20;
                    if (v6 >= v22) {
                      return 3;
                    }
                    continue;
                  default:
                    return 3;
                }
              }
            }
            return 3;
          case 2:
            v14 = (unsigned char *)*((void *)__src + 2049);
            v15 = (char *)(__src - v14 + 0x4000);
            size_t v16 = v7 - (void)v15;
            if (v7 <= (unint64_t)v15)
            {
              v17 = 0;
              size_t v16 = 0;
              *((void *)__src + 2049) = &v14[v7];
              __src = 0;
            }
            else
            {
              v17 = &v15[(void)__dst];
              *((void *)__src + 2049) = &__src[v16];
              int64_t v7 = __src - v14 + 0x4000;
              if (__src - v14 == -16384) {
                goto LABEL_50;
              }
            }
            memcpy(__dst, v14, v7);
LABEL_50:
            if (v16) {
              memcpy(v17, __src, v16);
            }
            uint64_t result = 2;
            break;
          case 4:
            v18 = (char *)*((void *)__src + 2049);
            do
            {
              *v6++ = *v18;
              v18 = (char *)(*((void *)__src + 2049) - 1);
              if (v18 < __src) {
                v18 = __src + 0x3FFF;
              }
              *((void *)__src + 2049) = v18;
              --v7;
            }
            while (v7);
            return 4;
          default:
            bzero(__dst, __n);
            return 1;
        }
      }
    }
  }
  return result;
}

uint64_t APSVideoFormatDescriptionCopyAsBlockBuffer(const opaqueCMFormatDescription *a1, CMBlockBufferRef *a2)
{
  if (useLegacySerialization_onceToken != -1) {
    dispatch_once(&useLegacySerialization_onceToken, &__block_literal_global_14);
  }
  CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (useLegacySerialization_useLegacy)
  {
    uint64_t v5 = *MEMORY[0x1E4F1CF80];
    return MEMORY[0x1F40DE0C0](v5, a1, a2);
  }
  else
  {
    CFStringEncoding SystemEncoding = CFStringGetSystemEncoding();
    return CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(v4, a1, SystemEncoding, 0, a2);
  }
}

uint64_t __useLegacySerialization_block_invoke()
{
  uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"useLegacyFormatDescriptionSerialization", 0, 0);
  useLegacySerialization_useLegacy = result != 0;
  return result;
}

uint64_t APSVideoFormatDescriptionCreateFromBlockBuffer(OpaqueCMBlockBuffer *a1, CMVideoFormatDescriptionRef *a2)
{
  if (useLegacySerialization_onceToken != -1) {
    dispatch_once(&useLegacySerialization_onceToken, &__block_literal_global_14);
  }
  CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (useLegacySerialization_useLegacy)
  {
    uint64_t v5 = *MEMORY[0x1E4F1CF80];
    return MEMORY[0x1F40DE048](v5, a1, 0, a2);
  }
  else
  {
    CFStringEncoding SystemEncoding = CFStringGetSystemEncoding();
    return CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(v4, a1, SystemEncoding, 0, a2);
  }
}

uint64_t APSWirelessCoexManagerGetClassID()
{
  if (APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce != -1) {
    dispatch_once_f(&APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce, &APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassID, (dispatch_function_t)coexManager_RegisterClass);
  }
  return APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassID;
}

uint64_t coexManager_RegisterClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&kAPSWirelessCoexManagerClassDescriptor, ClassID, 1, a1);
}

CFStringRef coexManager_CopyFormattingDescription(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"<APSWirelessCoexManager %p>", a1);
}

uint64_t APSWirelessCoexManagerGetTypeID()
{
  if (APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce != -1) {
    dispatch_once_f(&APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce, &APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassID, (dispatch_function_t)coexManager_RegisterClass);
  }
  uint64_t v0 = APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassID;

  return MEMORY[0x1F40DB8F8](v0);
}

uint64_t APSWirelessCoexManagerCreateWithOptions(uint64_t a1, const __CFDictionary *a2, CFTypeRef *a3)
{
  value = 0;
  CFTypeRef cf = 0;
  strcpy(__source, " ");
  if (!FigGetCFPreferenceNumberWithDefault()) {
    return 0;
  }
  if (APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce != -1) {
    dispatch_once_f(&APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassIDOnce, &APSWirelessCoexManagerGetClassID_sAPSWirelessCoexManagerClassID, (dispatch_function_t)coexManager_RegisterClass);
  }
  uint64_t v5 = CMDerivedObjectCreate();
  if (v5)
  {
    uint64_t v8 = v5;
    APSLogErrorAt(v5);
  }
  else
  {
    uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
    *(unsigned char *)(DerivedStorage + 8) = 0;
    int64_t v7 = (char *)(DerivedStorage + 8);
    if (a2)
    {
      if (CFDictionaryGetValueIfPresent(a2, @"loggingID", (const void **)&value))
      {
        CFStringGetCString((CFStringRef)value, v7, 10, 0x600u);
        strlcat(v7, __source, 0xAuLL);
        if (gLogCategory_APSWirelessCoexManager <= 30
          && (gLogCategory_APSWirelessCoexManager != -1 || _LogCategory_Initialize()))
        {
          if (cf) {
            CMBaseObjectGetDerivedStorage();
          }
          LogPrintF();
        }
      }
    }
    *(_DWORD *)(DerivedStorage + 4) = FigGetCFPreferenceNumberWithDefault();
    if (gLogCategory_APSWirelessCoexManager <= 50
      && (gLogCategory_APSWirelessCoexManager != -1 || _LogCategory_Initialize()))
    {
      if (cf) {
        CMBaseObjectGetDerivedStorage();
      }
      LogPrintF();
    }
    uint64_t v8 = 0;
    *a3 = cf;
  }
  return v8;
}

CFStringRef coexManager_CopyDebugDescription(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"<APSWirelessCoexManager %p>", a1);
}

uint64_t coexManager_Finalize(uint64_t result)
{
  if (gLogCategory_APSWirelessCoexManager <= 50)
  {
    uint64_t v1 = result;
    if (gLogCategory_APSWirelessCoexManager != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      if (v1) {
        CMBaseObjectGetDerivedStorage();
      }
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSWirelessCoexManagerNotifyCriticalBuffering(uint64_t a1, int a2)
{
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage != a2)
  {
    *uint64_t DerivedStorage = a2;
    if (gLogCategory_APSWirelessCoexManager <= 50
      && (gLogCategory_APSWirelessCoexManager != -1 || _LogCategory_Initialize()))
    {
      if (a1) {
        CMBaseObjectGetDerivedStorage();
      }
      LogPrintF();
    }
  }
  return 0;
}

uint64_t APSRealTimeReadableRingBufferGetTypeID()
{
  if (gAPSRealTimeReadableRingBufferInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeReadableRingBufferInitOnce, 0, (dispatch_function_t)_APSRealTimeReadableRingBufferGetTypeID);
  }
  return gAPSRealTimeReadableRingBufferTypeID;
}

uint64_t _APSRealTimeReadableRingBufferGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimeReadableRingBufferTypeID = result;
  return result;
}

void _APSRealTimeReadableRingBufferFinalize(uint64_t a1)
{
  uint64_t v2 = *(void **)(a1 + 80);
  if (v2)
  {
    if (*(void *)(a1 + 16))
    {
      unint64_t v3 = 0;
      do
      {
        _X0 = 0;
        _X1 = 0;
        __asm { CASPA           X0, X1, X0, X1, [X8] }
        ++v3;
      }
      while (v3 < *(void *)(a1 + 16));
      uint64_t v2 = *(void **)(a1 + 80);
    }
    free(v2);
  }
}

uint64_t APSRealTimeReadableRingBufferCreate(size_t a1, size_t a2, size_t a3, CFTypeRef *a4)
{
  uint64_t v4 = 4294960591;
  if (a1 && a4)
  {
    if (gAPSRealTimeReadableRingBufferInitOnce != -1) {
      dispatch_once_f(&gAPSRealTimeReadableRingBufferInitOnce, 0, (dispatch_function_t)_APSRealTimeReadableRingBufferGetTypeID);
    }
    Instance = (_OWORD *)_CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v10 = Instance;
      Instance[1] = 0u;
      uint64_t v11 = (size_t *)(Instance + 1);
      Instance[4] = 0u;
      Instance[5] = 0u;
      Instance[2] = 0u;
      Instance[3] = 0u;
      RandomBytes();
      _X0 = 0;
      size_t *v11 = a1;
      v11[1] = a2;
      v11[2] = a3;
      size_t v13 = v11[4];
      do
      {
        _X5 = v11[5];
        __asm { CASPAL          X4, X5, X0, X1, [X8] }
        _ZF = _X4 == v13;
        size_t v13 = _X4;
      }
      while (!_ZF);
      v10[8] = 0;
      v10[9] = 0;
      unint64_t v20 = malloc_type_calloc(a1, 0x10uLL, 0x1000040451B5BE8uLL);
      v10[10] = v20;
      if (v20)
      {
        if (*v11)
        {
          size_t v21 = 0;
          do
          {
            v22 = (uint64_t *)(v10[10] + 16 * v21);
            uint64_t v23 = *v22;
            do
            {
              _X0 = 0;
              _X5 = v22[1];
              __asm { CASPAL          X4, X5, X0, X1, [X9] }
              _ZF = _X4 == v23;
              uint64_t v23 = _X4;
            }
            while (!_ZF);
            ++v21;
          }
          while (v21 < *v11);
        }
        uint64_t v4 = 0;
        *a4 = CFRetain(v10);
      }
      else
      {
        uint64_t v4 = 4294960568;
      }
      CFRelease(v10);
    }
    else
    {
      return 4294960568;
    }
  }
  return v4;
}

uint64_t APSRealTimeReadableRingBufferRead(void *a1, void (*a2)(uint64_t, void, void), uint64_t a3)
{
  uint64_t result = 4294960591;
  if (a1 && a2)
  {
    _X24 = 0;
    _X25 = 0;
    __asm { CASP            X24, X25, X24, X25, [X9] }
    uint64_t v13 = (_X24 - 1) & 0x3FFFFFFFFFFFFFFFLL;
    if (a1[8] == v13)
    {
      uint64_t v13 = a1[8];
      _X25 = a1[9];
    }
    _X0 = 0;
    _X1 = 0;
    __asm { CASP            X0, X1, X0, X1, [X9] }
    while (v13)
    {
      _X20 = 0;
      _X21 = 0;
      _X25 = (_X25 + 1) % a1[2];
      if (!_X25) {
        uint64_t v13 = (v13 + 1) & 0x3FFFFFFFFFFFFFFFLL;
      }
      __asm { CASP            X20, X21, X20, X21, [X11] }
    }
    a2(a3, 0, 0);
    return 0;
  }
  return result;
}

uint64_t APSRealTimeReadableRingBufferReadWithBlock(void *a1, uint64_t a2)
{
  if (a1 && a2) {
    return APSRealTimeReadableRingBufferRead(a1, (void (*)(uint64_t, void, void))rtRing_invokeBlock, a2);
  }
  else {
    return 4294960591;
  }
}

uint64_t rtRing_invokeBlock(uint64_t a1)
{
  return (*(uint64_t (**)(void))(a1 + 16))();
}

uint64_t APSRealTimeReadableRingBufferWrite(void *a1, uint64_t a2)
{
  uint64_t result = 4294960591;
  if (a1)
  {
    _X20 = a2;
    if (a2)
    {
      _X22 = 0;
      _X23 = 0;
      __asm { CASP            X22, X23, X22, X23, [X8] }
      size_t v12 = (uint64_t (*)(uint64_t))a1[3];
      if (v12) {
        _X20 = v12(a2);
      }
      _X2 = 0;
      _X3 = 0;
      __asm { CASP            X2, X3, X2, X3, [X8] }
      do
      {
        uint64_t v16 = _X2;
        __asm { CASPL           X2, X3, X20, X21, [X8] }
      }
      while (_X2 != v16);
      if (1uLL % a1[2]) {
        _X2 = _X22;
      }
      else {
        _X2 = (_X22 + 1) & 0x3FFFFFFFFFFFFFFFLL;
      }
      uint64_t v18 = a1[6];
      do
      {
        _X7 = a1[7];
        __asm { CASP            X6, X7, X2, X3, [X8] }
        _ZF = _X6 == v18;
        uint64_t v18 = _X6;
      }
      while (!_ZF);
      return 0;
    }
  }
  return result;
}

uint64_t APSRTPPacketProcessorProcessPacket(uint64_t a1, unint64_t a2, uint64_t a3, unsigned int a4, uint64_t a5, uint64_t a6, uint64_t (*a7)(uint64_t, uint64_t, uint64_t, uint64_t, char *), unsigned int (*a8)(uint64_t), uint64_t a9)
{
  if (a2 <= 0xB)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor <= 10
      && (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 4294960553;
  }
  uint64_t v11 = a1;
  unint64_t v12 = a2 - 12;
  uint64_t v13 = *(void *)(a1 + 24);
  *(_WORD *)(v13 + 2) = bswap32(*(unsigned __int16 *)(v13 + 2)) >> 16;
  *(int8x8_t *)(v13 + 4) = vrev32_s8(*(int8x8_t *)(v13 + 4));
  if ((*(unsigned char *)(v13 + 1) & 0x7F) == 0x61)
  {
    unint64_t v59 = 0;
    unint64_t v60 = a2 - 12;
    unint64_t v58 = 0;
    char v57 = 1;
    if (a3) {
      *(_DWORD *)(a1 + 36) |= 1u;
    }
    unint64_t v14 = 0;
    uint64_t v15 = 0;
    while (*(char *)(v13 + v14 + 12) < 0)
    {
      v14 += 4;
      ++v15;
      if (v14 > v12) {
        goto LABEL_8;
      }
    }
    uint64_t v21 = v14 | 1;
    if ((v14 | 1) > v12) {
      goto LABEL_8;
    }
    uint64_t v22 = a7(a1, a3, v15, a9, &v57);
    if (v22)
    {
      uint64_t v16 = v22;
      goto LABEL_58;
    }
    if (!v57) {
      goto LABEL_22;
    }
    uint64_t v23 = a6;
    if (a5)
    {
      unint64_t v58 = bswap64(*(unsigned int *)(v13 + 8) | ((unint64_t)*(unsigned int *)(v13 + 4) << 32));
      uint64_t v24 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v24) {
        uint64_t v25 = v24;
      }
      else {
        uint64_t v25 = 0;
      }
      int v30 = *(uint64_t (**)(uint64_t, unint64_t *, uint64_t, uint64_t, unint64_t, uint64_t, unint64_t, unint64_t *))(v25 + 24);
      if (v30)
      {
        uint64_t v31 = v30(a5, &v58, 8, v13 + v21 + 12, a2 - v14 - 13, v13 + v21 + 12, a2 - v14 - 13, &v60);
        if (!v31)
        {
          uint64_t v26 = v60;
          uint64_t v23 = a6;
          goto LABEL_39;
        }
        uint64_t v16 = v31;
      }
      else
      {
        uint64_t v16 = 4294954514;
      }
      uint64_t v22 = v16;
      goto LABEL_58;
    }
    uint64_t v26 = a2 - v14 - 13;
    unint64_t v60 = v26;
LABEL_39:
    *(void *)uint64_t v11 = v13;
    *(void *)(v11 + 8) = v13 + v21 + 12;
    *(void *)(v11 + 16) = v26;
    *(_DWORD *)(v11 + 32) = *(_DWORD *)(v13 + 4);
    if (v15)
    {
      uint64_t v32 = 0;
      uint64_t v33 = v15;
      uint64_t v34 = v14 | 1;
      uint64_t v53 = v14 | 1;
      while (1)
      {
        v35 = (unsigned char *)(*(void *)v11 + v32);
        int v36 = v35[14];
        size_t v37 = v35[15] | ((v36 & 3) << 8);
        if (v34 + v37 > v60 + v21) {
          break;
        }
        v38 = (uint64_t **)v11;
        char v39 = v35[12];
        int v40 = v35[13];
        uint64_t v22 = APSRTPPassThroughJitterBufferAcquireRelinquishedNode(v23, &v59);
        if (v22)
        {
          uint64_t v16 = v22;
          goto LABEL_58;
        }
        unsigned int v41 = (v40 << 16) | (v36 << 8);
        uint64_t v42 = v59;
        unsigned int v43 = v41 >> 10;
        *(_DWORD *)(v59 + 36) |= 2u;
        *(_DWORD *)(v42 + 40) = (v41 >> 10) / a4;
        if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor <= 30)
        {
          if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor != -1
            || (v44 = _LogCategory_Initialize(), uint64_t v42 = v59, v44))
          {
            LogPrintF();
            uint64_t v42 = v59;
          }
        }
        uint64_t v45 = *(void *)(v42 + 24);
        int v46 = *((_DWORD *)*v38 + 2);
        uint64_t v47 = **v38;
        *(void *)uint64_t v45 = v47;
        *(unsigned char *)(v45 + 1) = BYTE1(v47) & 0x80 | v39 & 0x7F;
        unsigned int v48 = *(_DWORD *)(v45 + 4) - v43;
        *(_DWORD *)(v45 + 4) = v48;
        *(_DWORD *)(v45 + 8) = v46;
        memcpy((void *)(v45 + 12), (char *)*v38 + v34 + 12, v37);
        *(void *)uint64_t v42 = v45;
        uint64_t v49 = v59;
        *(void *)(v59 + 8) = v45 + 12;
        *(void *)(v49 + 16) = v37;
        *(_DWORD *)(v49 + 32) = v48;
        uint64_t v23 = a6;
        if (a8(a6))
        {
          APSRTPPassThroughJitterBufferRelinquishNode(a6, v59);
          uint64_t v11 = (uint64_t)v38;
          uint64_t v21 = v53;
        }
        else
        {
          uint64_t v11 = (uint64_t)v38;
          uint64_t v21 = v53;
          if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor <= 10
            && (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor != -1
             || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
        }
        v32 += 4;
        --v33;
        v34 += v37;
        if (!v33)
        {
          uint64_t v13 = *(void *)v11;
          uint64_t v26 = v60;
          goto LABEL_62;
        }
      }
LABEL_8:
      APSLogErrorAt(0);
      uint64_t v16 = 4294960553;
LABEL_59:
      uint64_t v29 = v16;
      goto LABEL_60;
    }
    uint64_t v34 = v14 | 1;
LABEL_62:
    uint64_t v50 = *(void *)(v11 + 24);
    *(unsigned char *)(v50 + 1) = *(unsigned char *)(v50 + 1) & 0x80 | *(unsigned char *)(v13 + 4 * v15 + 12) & 0x7F;
    size_t v51 = v21 - v34 + v26;
    *(void *)(v11 + 8) = v50 + 12;
    *(void *)(v11 + 16) = v51;
    memmove((void *)(v50 + 12), (const void *)(v50 + 12 + v34), v51);
    uint64_t v22 = ((uint64_t (*)(uint64_t, uint64_t, uint64_t))a8)(v23, v11, a9);
    if (!v22)
    {
      if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor > 10
        || gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor == -1 && !_LogCategory_Initialize())
      {
        return 0;
      }
      goto LABEL_65;
    }
    uint64_t v16 = v22;
LABEL_58:
    APSLogErrorAt(v22);
    goto LABEL_59;
  }
  unint64_t v59 = a2 - 12;
  unint64_t v60 = 0;
  LOBYTE(v58) = 1;
  if (a3) {
    *(_DWORD *)(a1 + 36) |= 1u;
  }
  uint64_t v17 = a7(a1, a3, 0, a9, (char *)&v58);
  if (v17)
  {
    uint64_t v16 = v17;
  }
  else
  {
    if (!(_BYTE)v58)
    {
LABEL_22:
      APSRTPPassThroughJitterBufferRelinquishNode(a6, v11);
      return 0;
    }
    uint64_t v18 = a6;
    if (!a5) {
      goto LABEL_28;
    }
    unint64_t v60 = bswap64(*(unsigned int *)(v13 + 8) | ((unint64_t)*(unsigned int *)(v13 + 4) << 32));
    uint64_t v19 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v19) {
      uint64_t v20 = v19;
    }
    else {
      uint64_t v20 = 0;
    }
    unsigned int v27 = *(uint64_t (**)(uint64_t, unint64_t *, uint64_t, uint64_t, unint64_t, uint64_t, unint64_t, unint64_t *))(v20 + 24);
    if (v27)
    {
      uint64_t v28 = v27(a5, &v60, 8, v13 + 12, a2 - 12, v13 + 12, a2 - 12, &v59);
      if (!v28)
      {
        unint64_t v12 = v59;
        uint64_t v18 = a6;
LABEL_28:
        *(void *)uint64_t v11 = v13;
        *(void *)(v11 + 8) = v13 + 12;
        *(void *)(v11 + 16) = v12;
        *(_DWORD *)(v11 + 32) = *(_DWORD *)(v13 + 4);
        uint64_t v17 = ((uint64_t (*)(uint64_t, uint64_t, uint64_t))a8)(v18, v11, a9);
        if (!v17)
        {
          if (gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor > 10
            || gLogCategory_APSReceiverAudioSessionRealtimePacketProcessor == -1
            && !_LogCategory_Initialize())
          {
            return 0;
          }
LABEL_65:
          LogPrintF();
          return 0;
        }
        uint64_t v16 = v17;
        goto LABEL_34;
      }
      uint64_t v16 = v28;
    }
    else
    {
      uint64_t v16 = 4294954514;
    }
    uint64_t v17 = v16;
  }
LABEL_34:
  APSLogErrorAt(v17);
  uint64_t v29 = v16;
LABEL_60:
  APSLogErrorAt(v29);
  return v16;
}

uint64_t APSAtomicMessageQueueCreate(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  if (a2 && a3)
  {
    if (APSAtomicMessageQueueGetTypeID::sRegisterAPSAtomicMessageQueueOnce != -1) {
      dispatch_once_f(&APSAtomicMessageQueueGetTypeID::sRegisterAPSAtomicMessageQueueOnce, 0, (dispatch_function_t)registerAPSAtomicMessageQueue);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v6 = Instance;
      uint64_t result = 0;
      *(void *)(v6 + 24) = a2;
      *a3 = v6;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

uint64_t registerAPSAtomicMessageQueue(void *a1)
{
  sAPSAtomicMessageQueueClass = 0;
  unk_1EB9F4E40 = "APSAtomicMessageQueue";
  qword_1EB9F4E48 = (uint64_t)APSAtomicMessageQueueInit;
  unk_1EB9F4E50 = 0;
  qword_1EB9F4E58 = (uint64_t)APSAtomicMessageQueueFinalize;
  unk_1EB9F4E60 = 0;
  qword_1EB9F4E68 = 0;
  unk_1EB9F4E70 = 0;
  qword_1EB9F4E78 = (uint64_t)APSAtomicMessageQueueCopyDebugDesc;
  uint64_t result = _CFRuntimeRegisterClass();
  sAPSAtomicMessageQueueID = result;
  return result;
}

__CFString *APSAtomicMessageQueueCopyDebugDesc(const void *a1)
{
  CFAllocatorRef v1 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v1, 0);
  CFStringAppendFormat(Mutable, 0, @"APSAtomicMessageQueue");
  return Mutable;
}

uint64_t APSAtomicMessageQueueFinalize(uint64_t result)
{
  for (i = result; ; uint64_t result = (*(uint64_t (**)(void))(**(void **)(i + 16) + 24))(*(void *)(i + 16)))
  {
    uint64_t v2 = *(unint64_t **)(i + 96);
    if (v2) {
      goto LABEL_7;
    }
    unint64_t v3 = (unint64_t *)atomic_exchange_explicit((atomic_ullong *volatile)(i + 32), 0, memory_order_acquire);
    if (!v3) {
      break;
    }
    uint64_t v2 = 0;
    do
    {
      unint64_t v4 = (unint64_t)v2;
      uint64_t v2 = v3;
      unint64_t v3 = (unint64_t *)atomic_load(v3);
      atomic_store(v4, v2);
    }
    while (v3);
    *(void *)(i + 96) = v2;
LABEL_7:
    unint64_t v5 = atomic_load(v2);
    *(void *)(i + 96) = v5;
  }
  return result;
}

uint64_t APSAtomicMessageQueueInit(void *a1)
{
  a1[12] = 0;
  *((_OWORD *)a1 + 4) = 0u;
  *((_OWORD *)a1 + 5) = 0u;
  *((_OWORD *)a1 + 2) = 0u;
  *((_OWORD *)a1 + 3) = 0u;
  *((_OWORD *)a1 + 1) = 0u;
  uint64_t result = MEMORY[0x1D25EEC20]();
  if (*MEMORY[0x1E4FB7E88])
  {
    a1[2] = *MEMORY[0x1E4FB7E88];
    a1[4] = 0;
    a1[12] = 0;
  }
  else
  {
    __break(1u);
  }
  return result;
}

uint64_t APSAtomicMessageQueueGetTypeID()
{
  if (APSAtomicMessageQueueGetTypeID::sRegisterAPSAtomicMessageQueueOnce != -1) {
    dispatch_once_f(&APSAtomicMessageQueueGetTypeID::sRegisterAPSAtomicMessageQueueOnce, 0, (dispatch_function_t)registerAPSAtomicMessageQueue);
  }
  return sAPSAtomicMessageQueueID;
}

uint64_t APSAtomicMessageQueueSendMessage(uint64_t a1, const void *a2)
{
  unint64_t v4 = (unint64_t *)(*(uint64_t (**)(void, uint64_t, uint64_t))(**(void **)(a1 + 16) + 16))(*(void *)(a1 + 16), *(void *)(a1 + 24) + 16, 8);
  *unint64_t v4 = 0;
  v4[1] = (unint64_t)(v4 + 2);
  memcpy(v4 + 2, a2, *(void *)(a1 + 24));
  unint64_t v5 = *(void *)(a1 + 32);
  atomic_store(v5, v4);
  unint64_t v6 = v5;
  atomic_compare_exchange_strong((atomic_ullong *volatile)(a1 + 32), &v6, (unint64_t)v4);
  if (v6 != v5)
  {
    unint64_t v7 = v6;
    do
    {
      atomic_store(v6, v4);
      atomic_compare_exchange_strong((atomic_ullong *volatile)(a1 + 32), &v7, (unint64_t)v4);
      BOOL v8 = v7 == v6;
      unint64_t v6 = v7;
    }
    while (!v8);
  }
  return 1;
}

uint64_t APSAtomicMessageQueueReadMessage(uint64_t a1, void *__dst)
{
  unint64_t v3 = *(unint64_t **)(a1 + 96);
  if (v3) {
    goto LABEL_6;
  }
  unint64_t v4 = (unint64_t *)atomic_exchange_explicit((atomic_ullong *volatile)(a1 + 32), 0, memory_order_acquire);
  if (v4)
  {
    unint64_t v3 = 0;
    do
    {
      unint64_t v5 = (unint64_t)v3;
      unint64_t v3 = v4;
      unint64_t v4 = (unint64_t *)atomic_load(v4);
      atomic_store(v5, v3);
    }
    while (v4);
    *(void *)(a1 + 96) = v3;
LABEL_6:
    unint64_t v6 = atomic_load(v3);
    *(void *)(a1 + 96) = v6;
    memcpy(__dst, (const void *)v3[1], *(void *)(a1 + 24));
    (*(void (**)(void, unint64_t *, uint64_t, uint64_t))(**(void **)(a1 + 16) + 24))(*(void *)(a1 + 16), v3, *(void *)(a1 + 24) + 16, 8);
    return 1;
  }
  return 0;
}

uint64_t APSRingBufferGetTypeID()
{
  if (gAPSRingBufferInitOnce != -1) {
    dispatch_once_f(&gAPSRingBufferInitOnce, 0, (dispatch_function_t)_APSRingBufferGetTypeID);
  }
  return gAPSRingBufferTypeID;
}

uint64_t _APSRingBufferGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRingBufferTypeID = result;
  return result;
}

uint64_t _APSRingBufferFinalize()
{
  uint64_t result = MirroredRingBufferFree();
  if (gLogCategory_APSRingBuffer <= 50)
  {
    if (gLogCategory_APSRingBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSRingBufferCreate(uint64_t a1, char a2, void *a3)
{
  if (a3)
  {
    if (gAPSRingBufferInitOnce != -1) {
      dispatch_once_f(&gAPSRingBufferInitOnce, 0, (dispatch_function_t)_APSRingBufferGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      unint64_t v6 = (unsigned char *)Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      uint64_t v7 = Instance + 16;
      *(void *)(v7 + 32) = 0;
      *(_OWORD *)(v7 + 16) = 0u;
      uint64_t v8 = MirroredRingBufferInit();
      if (v8)
      {
        uint64_t v9 = v8;
        APSLogErrorAt(v8);
        CFRelease(v6);
      }
      else
      {
        v6[48] = a2;
        if (gLogCategory_APSRingBuffer <= 50
          && (gLogCategory_APSRingBuffer != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v9 = 0;
        *a3 = v6;
      }
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v9;
}

uint64_t APSRingBufferEnqueueBytes(uint64_t a1, size_t __n, void *__src)
{
  if (!a1 || !__src)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  int v3 = __n;
  if (!*(unsigned char *)(a1 + 48))
  {
    unsigned int v6 = *(_DWORD *)(a1 + 44);
    if (*(_DWORD *)(a1 + 32) - v6 + *(_DWORD *)(a1 + 40) >= __n) {
      goto LABEL_8;
    }
LABEL_16:
    APSLogErrorAt(0);
    return 4294960545;
  }
  size_t v5 = *(unsigned int *)(a1 + 32);
  if (v5 < __n) {
    goto LABEL_16;
  }
  int v7 = *(_DWORD *)(a1 + 40);
  unsigned int v6 = *(_DWORD *)(a1 + 44);
  size_t v8 = v7 - v6 + v5;
  if (v8 < __n) {
    *(_DWORD *)(a1 + 40) = v7 + __n - v8;
  }
LABEL_8:
  memcpy((void *)(*(void *)(a1 + 16) + (*(_DWORD *)(a1 + 36) & v6)), __src, __n);
  *(_DWORD *)(a1 + 44) += v3;
  if (gLogCategory_APSRingBuffer > 30) {
    return 0;
  }
  if (gLogCategory_APSRingBuffer != -1 || (uint64_t result = _LogCategory_Initialize(), result))
  {
    LogPrintF();
    return 0;
  }
  return result;
}

uint64_t APSRingBufferDequeueBytes(uint64_t a1, size_t __n, void *__dst)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  int v3 = __n;
  if (!__n) {
    return 0;
  }
  unsigned int v5 = *(_DWORD *)(a1 + 40);
  if (*(_DWORD *)(a1 + 44) - v5 < __n)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSRingBuffer <= 90
      && (gLogCategory_APSRingBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 4294960550;
  }
  else
  {
    if (__dst)
    {
      memcpy(__dst, (const void *)(*(void *)(a1 + 16) + (*(_DWORD *)(a1 + 36) & v5)), __n);
      unsigned int v5 = *(_DWORD *)(a1 + 40);
    }
    *(_DWORD *)(a1 + 40) = v5 + v3;
    if (gLogCategory_APSRingBuffer > 30) {
      return 0;
    }
    if (gLogCategory_APSRingBuffer != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      LogPrintF();
      return 0;
    }
  }
  return result;
}

uint64_t APSRingBufferReset(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  *(_DWORD *)(a1 + 40) = *(_DWORD *)(a1 + 44);
  if (gLogCategory_APSRingBuffer > 30) {
    return 0;
  }
  if (gLogCategory_APSRingBuffer != -1 || (uint64_t result = _LogCategory_Initialize(), result))
  {
    LogPrintF();
    return 0;
  }
  return result;
}

uint64_t APSRingBufferGetBytesFree(_DWORD *a1)
{
  return (a1[8] - a1[11] + a1[10]);
}

uint64_t APSRingBufferGetBytesUsed(uint64_t a1)
{
  return (*(_DWORD *)(a1 + 44) - *(_DWORD *)(a1 + 40));
}

uint64_t APSDispatchSyncBatchAssignment(NSObject *a1, uint64_t a2, unint64_t a3)
{
  v4[0] = 0;
  v4[1] = a2;
  long long v5 = a3;
  if (!a1) {
    return 4294960556;
  }
  if (!a3) {
    return 4294960591;
  }
  dispatch_sync_f(a1, v4, (dispatch_function_t)APSDispatchBatchSyncAssignmentCallback);
  return 0;
}

void *APSDispatchBatchSyncAssignmentCallback(void *result)
{
  if (result[2])
  {
    CFAllocatorRef v1 = result;
    unint64_t v2 = 0;
    int v3 = (unint64_t *)(result[1] + 16);
    do
    {
      unint64_t v4 = (xpc_object_t *)*(v3 - 1);
      unint64_t v5 = *v3;
      if (*v3 == -4)
      {
        if (*v4) {
          xpc_release(*v4);
        }
      }
      else if (v5 == -2)
      {
        dispatch_retain((dispatch_object_t)*v4);
      }
      else if (v5 == -1)
      {
        if (*v4) {
          CFRetain(*v4);
        }
      }
      unsigned int v6 = (dispatch_object_t *)*(v3 - 2);
      int v7 = (void *)*(v3 - 1);
      unint64_t v8 = *v3;
      v3 += 3;
      uint64_t result = APSDispatchAssigment(v6, v7, v8);
      ++v2;
    }
    while (v2 < v1[2]);
  }
  return result;
}

void *APSDispatchAssigment(dispatch_object_t *__dst, void *__src, unint64_t a3)
{
  switch(a3)
  {
    case 0xFFFFFFFFFFFFFFFCLL:
      dispatch_object_t v7 = *__dst;
      if (*__dst) {
        xpc_release(v7);
      }
      break;
    case 0xFFFFFFFFFFFFFFFELL:
      dispatch_release(*__dst);
      break;
    case 0xFFFFFFFFFFFFFFFFLL:
      dispatch_object_t v6 = *__dst;
      if (*__dst) {
        CFRelease(v6);
      }
      break;
  }
  if (a3 == -4 || a3 > 0xFFFFFFFFFFFFFFFDLL) {
    size_t v9 = 8;
  }
  else {
    size_t v9 = a3;
  }

  return memcpy(__dst, __src, v9);
}

uint64_t APSDispatchAsyncBatchAssignment(NSObject *a1, const void *a2, _DWORD *a3, uint64_t a4)
{
  if (!a1) {
    return 4294960556;
  }
  uint64_t result = 4294960591;
  if (a2)
  {
    uint64_t v7 = a4;
    if (a4)
    {
      size_t v9 = a3 + 6;
      uint64_t v10 = a4;
      size_t v11 = 32 * a4 + 32;
      do
      {
        if (!*v9)
        {
          uint64_t v12 = *((void *)v9 - 1);
          if ((unint64_t)(v12 + 4) <= 3 && v12 != -3) {
            uint64_t v12 = 8;
          }
          v11 += v12;
        }
        v9 += 8;
        --v10;
      }
      while (v10);
      unint64_t v14 = (char *)malloc_type_malloc(v11, 0x72701D23uLL);
      if (v14)
      {
        uint64_t v15 = v14;
        uint64_t v16 = v14 + 32;
        memcpy(v14 + 32, a3, 32 * v7);
        void *v15 = a2;
        v15[1] = v16;
        v15[2] = v7;
        *((unsigned char *)v15 + 24) = 1;
        CFRetain(a2);
        uint64_t v17 = (char *)&v15[4 * v7 + 4];
        uint64_t v18 = (char *)(v15 + 5);
        do
        {
          if (!*((_DWORD *)v18 + 4))
          {
            uint64_t v19 = *(xpc_object_t **)v18;
            uint64_t v20 = *((void *)v18 + 1);
            if ((unint64_t)(v20 + 4) > 3 || v20 == -3) {
              size_t v22 = *((void *)v18 + 1);
            }
            else {
              size_t v22 = 8;
            }
            switch(v20)
            {
              case -4:
                if (*v19) {
                  xpc_release(*v19);
                }
                break;
              case -2:
                dispatch_retain((dispatch_object_t)*v19);
                break;
              case -1:
                if (*v19) {
                  CFRetain(*v19);
                }
                break;
            }
            memcpy(v17, *(const void **)v18, v22);
            *(void *)uint64_t v18 = v17;
            v17 += v22;
          }
          v18 += 32;
          --v7;
        }
        while (v7);
        dispatch_async_f(a1, v15, (dispatch_function_t)APSDispatchBatchAsyncAssignmentCallback);
        return 0;
      }
      else
      {
        return 4294960568;
      }
    }
  }
  return result;
}

void APSDispatchBatchAsyncAssignmentCallback(CFTypeRef *a1)
{
  if (a1[2])
  {
    unint64_t v2 = 0;
    uint64_t v3 = (uint64_t)a1[1] + 16;
    do
    {
      if (*(_DWORD *)(v3 + 8) == 1)
      {
        unint64_t v4 = *(xpc_object_t **)(v3 - 8);
        unint64_t v5 = *(void *)v3;
        if (*(void *)v3 == -4)
        {
          if (*v4) {
            xpc_release(*v4);
          }
        }
        else if (v5 == -2)
        {
          dispatch_retain((dispatch_object_t)*v4);
        }
        else if (v5 == -1 && *v4)
        {
          CFRetain(*v4);
        }
      }
      dispatch_object_t v6 = *(dispatch_object_t **)(v3 - 16);
      uint64_t v7 = *(void **)(v3 - 8);
      unint64_t v8 = *(void *)v3;
      v3 += 32;
      APSDispatchAssigment(v6, v7, v8);
      ++v2;
    }
    while (v2 < (unint64_t)a1[2]);
  }
  if (*a1) {
    CFRelease(*a1);
  }

  free(a1);
}

void APSDispatchSyncFlush(NSObject *a1)
{
}

uint64_t APSRealTimeSignalGuts::perform(uint64_t this)
{
  int v1 = 2;
  atomic_compare_exchange_strong_explicit((atomic_uint *volatile)(this + 40), (unsigned int *)&v1, 1u, memory_order_acquire, memory_order_acquire);
  if (v1 == 2) {
    return (*(uint64_t (**)(void))(this + 64))(*(void *)(this + 56));
  }
  return this;
}

void APSRealTimeSignalGuts::~APSRealTimeSignalGuts(APSRealTimeSignalGuts *this)
{
  APSRealTimeSignalGuts::~APSRealTimeSignalGuts(this);

  JUMPOUT(0x1D25EEC90);
}

{
  uint64_t vars8;

  if (*((void *)this + 9))
  {
    caulk::concurrent::messenger::drain((APSRealTimeSignalGuts *)((char *)this + 24));
    dispatch_sync_f(*((dispatch_queue_t *)this + 6), *((void **)this + 7), *((dispatch_function_t *)this + 9));
  }
  dispatch_release(*((dispatch_object_t *)this + 6));
  MEMORY[0x1D25EEC10]((char *)this + 24);

  caulk::concurrent::message::~message(this);
}

void __clang_call_terminate(void *a1)
{
}

uint64_t APSRealTimeSignalGetTypeID()
{
  if (gAPSRealTimeSignalInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeSignalInitOnce, 0, (dispatch_function_t)_APSRealTimeSignalGetTypeID);
  }
  return gAPSRealTimeSignalTypeID;
}

uint64_t _APSRealTimeSignalGetTypeID(void *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimeSignalTypeID = result;
  return result;
}

void _APSRealTimeSignalFinalize(void *a1)
{
  uint64_t v1 = a1[2];
  if (v1)
  {
    if (rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueueOnce != -1) {
      dispatch_once(&rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueueOnce, &__block_literal_global_60);
    }
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = ___ZL26_APSRealTimeSignalFinalizePKv_block_invoke;
    block[3] = &__block_descriptor_tmp_61;
    block[4] = v1;
    dispatch_async((dispatch_queue_t)rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueue, block);
  }
}

APSRealTimeSignalGuts *___ZL26_APSRealTimeSignalFinalizePKv_block_invoke(uint64_t a1)
{
  uint64_t result = *(APSRealTimeSignalGuts **)(a1 + 32);
  if (result)
  {
    APSRealTimeSignalGuts::~APSRealTimeSignalGuts(result);
    JUMPOUT(0x1D25EEC90);
  }
  return result;
}

dispatch_queue_t ___ZL26rtSignal_getFinalizerQueuev_block_invoke()
{
  dispatch_queue_t result = dispatch_queue_create("com.apple.airplay.APSRealTimeSignal.finalizer", 0);
  rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueue = (uint64_t)result;
  return result;
}

uint64_t APSRealTimeSignalCreate(NSObject *a1, void *a2, uint64_t a3, void (__cdecl *a4)(void *), uint64_t a5)
{
  if (a1)
  {
    uint64_t v7 = a1;
    if (a3 && a5)
    {
      if (gAPSRealTimeSignalInitOnce != -1) {
        dispatch_once_f(&gAPSRealTimeSignalInitOnce, 0, (dispatch_function_t)_APSRealTimeSignalGetTypeID);
      }
      uint64_t Instance = _CFRuntimeCreateInstance();
      if (Instance)
      {
        *(void *)(Instance + 16) = 0;
        operator new();
      }
      APSLogErrorAt(0);
      uint64_t v10 = 4294960568;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v10 = 4294960591;
    }
    if (a4) {
LABEL_16:
    }
      dispatch_async_f(v7, a2, a4);
  }
  else
  {
    APSLogErrorAt(0);
    if (a4)
    {
      if (rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueueOnce != -1) {
        dispatch_once(&rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueueOnce, &__block_literal_global_60);
      }
      uint64_t v7 = rtSignal_getFinalizerQueue(void)::sAPSRealTimeSignalFinalizerQueue;
      uint64_t v10 = 4294960591;
      goto LABEL_16;
    }
    return 4294960591;
  }
  return v10;
}

void sub_1D0BAE288(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, dispatch_object_t object)
{
  if (object) {
    dispatch_release(object);
  }
  caulk::concurrent::message::~message(v10);
  MEMORY[0x1D25EEC90]();
  if (a2 == 3)
  {
    __cxa_get_exception_ptr(a1);
    object = (dispatch_object_t)(MEMORY[0x1E4FBA508] + 16);
    __cxa_begin_catch(a1);
    std::bad_alloc::~bad_alloc((std::bad_alloc *)&object);
    __cxa_end_catch();
    uint64_t v13 = 4294960568;
  }
  else
  {
    unint64_t v14 = __cxa_begin_catch(a1);
    if (a2 == 2)
    {
      (*(void (**)(void *))(*(void *)v14 + 16))(v14);
      uint64_t v13 = 4294960534;
      APSSignalErrorAt(4294960534);
      __cxa_end_catch();
    }
    else
    {
      __cxa_end_catch();
      uint64_t v13 = 4294960596;
    }
  }
  APSLogErrorAt(v13);
  JUMPOUT(0x1D0BAE244);
}

uint64_t APSRealTimeSignalRaise(uint64_t result)
{
  uint64_t v1 = *(atomic_uint **)(result + 16);
  int v2 = 1;
  atomic_compare_exchange_strong_explicit(v1 + 10, (unsigned int *)&v2, 2u, memory_order_release, memory_order_relaxed);
  if (v2 == 1) {
    return caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v1 + 6), (caulk::concurrent::message *)v1);
  }
  return result;
}

uint64_t APSRealTimeSignalInvalidate(uint64_t result)
{
  return result;
}

uint64_t APSAudioLatencyForAVMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyMs", 0, 0);
  if (!IntWithOverrideAndDefault) {
    return 2000;
  }
  uint64_t v1 = IntWithOverrideAndDefault;
  if (gLogCategory_APSLatency <= 50 && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return v1;
}

uint64_t APSAudioLatencyForSystemAudioMs()
{
  int v0 = APSGetPersistentGroupModel();
  if (v0 == 2) {
    unsigned int v1 = 116;
  }
  else {
    unsigned int v1 = 110;
  }
  if (v0 == 1) {
    uint64_t v2 = 122;
  }
  else {
    uint64_t v2 = v1;
  }
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencySystemMs", 0, 0);
  if (!IntWithOverrideAndDefault) {
    return v2;
  }
  uint64_t v4 = IntWithOverrideAndDefault;
  if (gLogCategory_APSLatency <= 50 && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return v4;
}

uint64_t APSAudioLatencyForScreenMs(int a1, int a2)
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyScreenMs", 0, 0xFFFFFFFFLL);
  if (IntWithOverrideAndDefault != -1)
  {
    uint64_t v5 = IntWithOverrideAndDefault;
    if (gLogCategory_APSLatency <= 50 && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize())) {
      LogPrintF();
    }
    return v5;
  }
  if (a1) {
    return 200;
  }
  if (a2 == -1)
  {
    uint64_t v5 = 50;
    uint64_t v8 = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyScreenLowMs", 0, 50);
    if (v8 == 50) {
      return v5;
    }
    uint64_t v7 = v8;
    if (gLogCategory_APSLatency > 50 || gLogCategory_APSLatency == -1 && !_LogCategory_Initialize()) {
      return v7;
    }
LABEL_18:
    LogPrintF();
    return v7;
  }
  if (a2 != 1) {
    return 85;
  }
  uint64_t v5 = 170;
  uint64_t v6 = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyScreenHighMs", 0, 170);
  if (v6 != 170)
  {
    uint64_t v7 = v6;
    if (gLogCategory_APSLatency > 50 || gLogCategory_APSLatency == -1 && !_LogCategory_Initialize()) {
      return v7;
    }
    goto LABEL_18;
  }
  return v5;
}

uint64_t APSAudioLatencyAdjustForAVMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyAdjustMs", 0, 0);
  if (!IntWithOverrideAndDefault) {
    return 4294967046;
  }
  uint64_t v1 = IntWithOverrideAndDefault;
  if (gLogCategory_APSLatency <= 50 && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return v1;
}

uint64_t APSAudioLatencyAdjustForSystemAudioMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyAdjustSystemMs", 0, 0);
  if (IntWithOverrideAndDefault
    && gLogCategory_APSLatency <= 50
    && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return IntWithOverrideAndDefault;
}

uint64_t APSAudioLatencyAdjustForScreenMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyAdjustScreenMs", 0, 0);
  if (IntWithOverrideAndDefault
    && gLogCategory_APSLatency <= 50
    && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return IntWithOverrideAndDefault;
}

uint64_t APSAudioLatencyOffsetForAVMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyOffsetMs", 0, 0);
  if (IntWithOverrideAndDefault
    && gLogCategory_APSLatency <= 50
    && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return IntWithOverrideAndDefault;
}

uint64_t APSAudioLatencyOffsetForSystemAudioMs()
{
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyOffsetSystemMs", 0, 0);
  if (IntWithOverrideAndDefault
    && gLogCategory_APSLatency <= 50
    && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return IntWithOverrideAndDefault;
}

uint64_t APSAudioLatencyOffsetForScreenMs(int a1, int a2, uint64_t a3, int a4)
{
  int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyMinScreenMs", 0, 0);
  if (a1) {
    int v8 = APSCarPlayScreenLatencyMs(a2);
  }
  else {
    int v8 = APSScreenLatencyMs(a4);
  }
  return (IntWithOverrideAndDefault - v8);
}

uint64_t APSCarPlayScreenLatencyMs(int a1)
{
  if (a1) {
    return APSSettingsGetIntWithOverrideAndDefault(@"screenLatencyCarPlayUSBMs", 0, 25);
  }
  else {
    return APSSettingsGetIntWithOverrideAndDefault(@"screenLatencyMs", 0, 75);
  }
}

uint64_t APSScreenLatencyMs(int a1)
{
  uint64_t Int32 = APSSettingsGetInt32(@"screenLatencyMs", 0);
  if ((int)Int32 >= 1)
  {
    uint64_t v3 = Int32;
    if (gLogCategory_APSLatency <= 50 && (gLogCategory_APSLatency != -1 || _LogCategory_Initialize())) {
      LogPrintF();
    }
    return v3;
  }
  if (a1 == -1)
  {
    uint64_t v3 = 40;
    uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"screenLatencyForLowLatencyConnectionMs", 0, 40);
    if (IntWithOverrideAndDefault == 40) {
      return v3;
    }
    uint64_t v5 = IntWithOverrideAndDefault;
    if (gLogCategory_APSLatency > 50 || gLogCategory_APSLatency == -1 && !_LogCategory_Initialize()) {
      return v5;
    }
LABEL_14:
    LogPrintF();
    return v5;
  }
  if (a1 != 1) {
    return 75;
  }
  uint64_t v3 = 100;
  uint64_t v4 = APSSettingsGetIntWithOverrideAndDefault(@"screenLatencyForHighLatencyConnectionMs", 0, 100);
  if (v4 != 100)
  {
    uint64_t v5 = v4;
    if (gLogCategory_APSLatency > 50 || gLogCategory_APSLatency == -1 && !_LogCategory_Initialize()) {
      return v5;
    }
    goto LABEL_14;
  }
  return v3;
}

uint64_t APSAudioLatencyMinForScreenMs()
{
  return APSSettingsGetIntWithOverrideAndDefault(@"audioLatencyMinScreenMs", 0, 0);
}

uint64_t APSScreenMediaPresentationLatencyMs()
{
  return APSSettingsGetIntWithOverrideAndDefault(@"mediaPresentationLatencyMs", 0, 300);
}

uint64_t APSScreenMediaPresentationUDPLatencyMs()
{
  return APSSettingsGetIntWithOverrideAndDefault(@"mediaPresentationLatencyUDPMs", 0, 120);
}

uint64_t APSAudioLatencyMinForAVMs()
{
  if ((int)APSAudioLatencyForAVMs() > 249) {
    return 250;
  }

  return APSAudioLatencyForAVMs();
}

uint64_t APSAudioLatencyMinForSystemAudioMs()
{
  return 0;
}

uint64_t APSHDMIAudioLatencyMs()
{
  return 67;
}

uint64_t APSHDMIVideoLatencyMs()
{
  return 67;
}

uint64_t APSRandomLatencyMs(const void *a1)
{
  uint64_t v16 = 0;
  uint64_t v17 = &v16;
  uint64_t v18 = 0x2000000000;
  int v19 = 0;
  uint64_t v12 = 0;
  uint64_t v13 = &v12;
  uint64_t v14 = 0x2000000000;
  int v15 = 0;
  uint64_t v8 = 0;
  size_t v9 = &v8;
  uint64_t v10 = 0x2000000000;
  int v11 = 0;
  v6[0] = 0;
  v6[1] = v6;
  v6[2] = 0x2000000000;
  int v7 = 0;
  if (a1)
  {
    CFTypeID v2 = CFGetTypeID(a1);
    if (v2 == CFDictionaryGetTypeID())
    {
      if (CFDictionaryGetCount((CFDictionaryRef)a1) >= 1)
      {
        CFDictionaryApplyBlock();
        uint64_t v3 = *((unsigned int *)v17 + 6);
        if (v3)
        {
          APSLogErrorAt(v3);
        }
        else if (*((_DWORD *)v9 + 6))
        {
          arc4random();
          CFDictionaryApplyBlock();
        }
      }
    }
    else
    {
      APSLogErrorAt(0);
      *((_DWORD *)v17 + 6) = -6705;
    }
  }
  uint64_t v4 = *((unsigned int *)v13 + 6);
  _Block_object_dispose(v6, 8);
  _Block_object_dispose(&v8, 8);
  _Block_object_dispose(&v12, 8);
  _Block_object_dispose(&v16, 8);
  return v4;
}

uint64_t __APSRandomLatencyMs_block_invoke(uint64_t result)
{
  if (!*(_DWORD *)(*(void *)(*(void *)(result + 32) + 8) + 24))
  {
    uint64_t v1 = result;
    CFGetInt64Ranged();
    dispatch_queue_t result = *(unsigned int *)(*(void *)(*(void *)(v1 + 32) + 8) + 24);
    if (*(_DWORD *)(*(void *)(*(void *)(v1 + 32) + 8) + 24)
      || (*(_DWORD *)(*(void *)(*(void *)(v1 + 40) + 8) + 24) += CFGetInt64Ranged(),
          dispatch_queue_t result = *(unsigned int *)(*(void *)(*(void *)(v1 + 32) + 8) + 24),
          result))
    {
      return APSLogErrorAt(result);
    }
  }
  return result;
}

uint64_t __APSRandomLatencyMs_block_invoke_2(uint64_t result)
{
  if (*(_DWORD *)(*(void *)(*(void *)(result + 32) + 8) + 24) <= *(_DWORD *)(result + 48))
  {
    uint64_t v1 = result;
    dispatch_queue_t result = CFGetInt64Ranged();
    *(_DWORD *)(*(void *)(*(void *)(v1 + 32) + 8) + 24) += result;
    if (*(_DWORD *)(*(void *)(*(void *)(v1 + 32) + 8) + 24) > *(_DWORD *)(v1 + 48))
    {
      dispatch_queue_t result = CFGetInt64Ranged();
      *(_DWORD *)(*(void *)(*(void *)(v1 + 40) + 8) + 24) = result;
    }
  }
  return result;
}

uint64_t APSSharedRingBuffer_CreateWithBufferAndState(void *a1, void *a2, void *a3)
{
  uint64_t v16 = 0;
  region = 0;
  if (gAPSSharedRingBufferInitOnce != -1) {
    dispatch_once_f(&gAPSSharedRingBufferInitOnce, 0, (dispatch_function_t)_APSSharedRingBufferGetTypeID);
  }
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (Instance)
  {
    int v7 = Instance;
    Instance[3] = 0u;
    Instance[4] = 0u;
    Instance[1] = 0u;
    Instance[2] = 0u;
    size_t v8 = xpc_shmem_map(a1, &region);
    size_t v9 = v8;
    if (region && v8)
    {
      size_t v10 = xpc_shmem_map(a2, &v16);
      size_t v11 = v10;
      uint64_t v12 = v16;
      if (v16 && v10 > 0x4F)
      {
        *((_DWORD *)v7 + 16) = v9 >> 1;
        *((_DWORD *)v7 + 17) = (v9 >> 1) - 1;
        uint64_t v13 = (char *)region + (v9 >> 1);
        *((void *)v7 + 4) = region;
        *((void *)v7 + 5) = v13;
        *((void *)v7 + 6) = v12;
        *((void *)v7 + 7) = v12;
        *((void *)v7 + 3) = FigXPCRetain();
        uint64_t v14 = 0;
        *((void *)v7 + 2) = FigXPCRetain();
        *((_DWORD *)v7 + 18) = v9;
        *((_DWORD *)v7 + 19) = v11;
        *a3 = v7;
        return v14;
      }
      APSLogErrorAt(0);
      uint64_t v14 = FigSignalErrorAt();
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v14 = FigSignalErrorAt();
      size_t v11 = 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
    size_t v9 = 0;
    size_t v11 = 0;
    uint64_t v14 = 4294960568;
  }
  if (region) {
    munmap(region, v9);
  }
  if (v16) {
    munmap(v16, v11);
  }
  return v14;
}

uint64_t _APSSharedRingBufferGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSSharedRingBufferTypeID = result;
  return result;
}

double _APSSharedRingBufferFinalize(uint64_t a1)
{
  uint64_t v3 = (_OWORD *)(a1 + 32);
  CFTypeID v2 = *(void **)(a1 + 32);
  if (v2) {
    munmap(v2, *(unsigned int *)(a1 + 72));
  }
  uint64_t v4 = *(void **)(a1 + 48);
  if (v4) {
    munmap(v4, *(unsigned int *)(a1 + 76));
  }
  FigXPCRelease();
  FigXPCRelease();
  *(void *)(a1 + 72) = 0;
  double result = 0.0;
  *uint64_t v3 = 0u;
  v3[1] = 0u;
  return result;
}

uint64_t APSSharedRingBuffer_Create(uint64_t a1, void *a2)
{
  if (gAPSSharedRingBufferInitOnce != -1) {
    dispatch_once_f(&gAPSSharedRingBufferInitOnce, 0, (dispatch_function_t)_APSSharedRingBufferGetTypeID);
  }
  *(void *)cur_protection = 0;
  mach_vm_address_t target_address = 0;
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    mach_vm_size_t v10 = 0;
LABEL_25:
    size_t v15 = 0;
    size_t v11 = 0;
    uint64_t v16 = 0;
    uint64_t v13 = 4294960568;
    goto LABEL_18;
  }
  uint64_t v4 = Instance;
  Instance[3] = 0u;
  Instance[4] = 0u;
  Instance[1] = 0u;
  Instance[2] = 0u;
  vm_map_t v5 = *MEMORY[0x1E4F14960];
  unsigned int v6 = iceil2();
  int v7 = (_DWORD *)MEMORY[0x1E4F14AF0];
  uint64_t v8 = *MEMORY[0x1E4F14AF0] + v6;
  uint64_t v9 = ~*MEMORY[0x1E4F14AF0];
  mach_vm_size_t v10 = v9 & v8;
  if ((v9 & v8) != (((v9 & v8) + *MEMORY[0x1E4F14AF0]) & v9))
  {
    APSLogErrorAt(0);
    goto LABEL_25;
  }
  if (gLogCategory_APSSharedRingBuffer <= 30
    && (gLogCategory_APSSharedRingBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  size_t v11 = (char *)mmap(0, 2 * v10, 3, 4097, -1, 0);
  if (v11 == (char *)-1)
  {
    uint64_t v12 = __error();
    uint64_t v13 = *v12;
    if (v13)
    {
      uint64_t v14 = *v12;
LABEL_28:
      APSLogErrorAt(v14);
      size_t v15 = 0;
      goto LABEL_17;
    }
  }
  mach_vm_address_t target_address = (mach_vm_address_t)&v11[v10];
  uint64_t v14 = mach_vm_remap(v5, &target_address, v10, 0, 0x4000, v5, (mach_vm_address_t)v11, 0, &cur_protection[1], cur_protection, 1u);
  if (v14)
  {
    uint64_t v13 = v14;
    goto LABEL_28;
  }
  size_t v15 = ~*v7 & (unint64_t)(*(void *)v7 + 80);
  uint64_t v16 = (uint64_t)mmap(0, v15, 3, 4097, -1, 0);
  if (v16 == -1 && (v17 = __error(), uint64_t v13 = *v17, v13))
  {
    APSLogErrorAt(*v17);
    uint64_t v16 = -1;
  }
  else
  {
    xpc_object_t v18 = xpc_shmem_create(v11, 2 * v10);
    if (v18)
    {
      xpc_object_t v19 = xpc_shmem_create((void *)v16, v15);
      if (v19)
      {
        xpc_object_t v20 = v19;
        bzero((void *)v16, v15);
        uint64_t v13 = 0;
        *((_DWORD *)v4 + 16) = v10;
        *((_DWORD *)v4 + 17) = v10 - 1;
        *((void *)v4 + 4) = v11;
        *((void *)v4 + 5) = &v11[v10];
        *((void *)v4 + 6) = v16;
        *((void *)v4 + 7) = v16;
        *((void *)v4 + 2) = v20;
        *((void *)v4 + 3) = v18;
        *((_DWORD *)v4 + 18) = 2 * v10;
        *((_DWORD *)v4 + 19) = v15;
        *a2 = v4;
        size_t v11 = 0;
LABEL_17:
        uint64_t v16 = 0;
        goto LABEL_18;
      }
    }
    APSLogErrorAt(0);
    uint64_t v13 = FigSignalErrorAt();
  }
LABEL_18:
  FigXPCRelease();
  FigXPCRelease();
  if (v11) {
    munmap(v11, 2 * v10);
  }
  if (v16) {
    munmap((void *)v16, v15);
  }
  return v13;
}

uint64_t APSSharedRingBuffer_GetSharedMemoryState(uint64_t a1)
{
  return *(void *)(a1 + 16);
}

uint64_t APSSharedRingBuffer_GetSharedMemoryBuffer(uint64_t a1)
{
  return *(void *)(a1 + 24);
}

BOOL APSSharedRingBuffer_IsSpaceAvailable(uint64_t a1, unsigned int a2)
{
  return *(_DWORD *)(a1 + 64) - *(_DWORD *)(*(void *)(a1 + 56) + 28) + *(_DWORD *)(*(void *)(a1 + 56) + 24) >= a2;
}

uint64_t APSSharedRingBuffer_GetWritePointer(uint64_t result)
{
  if (result) {
    return *(void *)(result + 32)
  }
         + (*(_DWORD *)(result + 68) & *(_DWORD *)(*(void *)(result + 56) + 28));
  return result;
}

uint64_t APSSharedRingBuffer_UpdateWriteState(uint64_t a1, unsigned int a2)
{
  if (a1)
  {
    if (*(_DWORD *)(a1 + 64) - *(_DWORD *)(*(void *)(a1 + 56) + 28) + *(_DWORD *)(*(void *)(a1 + 56) + 24) < a2
      && gLogCategory_APSSharedRingBuffer <= 60
      && (gLogCategory_APSSharedRingBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t result = 0;
    *(_DWORD *)(*(void *)(a1 + 56) + 28) += a2;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

uint64_t APSSharedRingBuffer_WriteData(uint64_t a1, const void *a2, size_t __n)
{
  if (__n)
  {
    int v3 = __n;
    unsigned int v5 = *(_DWORD *)(*(void *)(a1 + 56) + 28);
    if (*(_DWORD *)(a1 + 64) - v5 + *(_DWORD *)(*(void *)(a1 + 56) + 24) <= __n)
    {
      APSLogErrorAt(0);
      return 4294960533;
    }
    else
    {
      memcpy((void *)(*(void *)(a1 + 32) + (*(_DWORD *)(a1 + 68) & v5)), a2, __n);
      uint64_t result = 0;
      *(_DWORD *)(*(void *)(a1 + 56) + 28) += v3;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return result;
}

BOOL APSSharedRingBuffer_IsDataAvailable(uint64_t a1, unsigned int a2)
{
  return *(_DWORD *)(*(void *)(a1 + 56) + 28) - *(_DWORD *)(*(void *)(a1 + 56) + 24) >= a2;
}

uint64_t APSSharedRingBuffer_ReadData(uint64_t a1, void *__dst, unsigned int *a3)
{
  uint64_t v3 = *(void *)(a1 + 32);
  if (v3)
  {
    uint64_t v6 = *(void *)(a1 + 56);
    unsigned int v7 = *(_DWORD *)(v6 + 24);
    unsigned int v8 = *(_DWORD *)(v6 + 28) - v7;
    if (v8 >= *a3) {
      size_t v9 = *a3;
    }
    else {
      size_t v9 = v8;
    }
    if (v9)
    {
      memcpy(__dst, (const void *)(v3 + (*(_DWORD *)(a1 + 68) & v7)), v9);
      uint64_t result = 0;
      *(_DWORD *)(*(void *)(a1 + 56) + 24) += v9;
      *a3 = v9;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960569;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return result;
}

uint64_t APSSharedRingBuffer_ReadDataWithEndiannessConversion(uint64_t a1, unsigned int a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v4 = *(void *)(a1 + 32);
  if (v4)
  {
    uint64_t v5 = *(void *)(a1 + 56);
    unsigned int v6 = *(_DWORD *)(v5 + 24);
    unsigned int v7 = *(_DWORD *)(v5 + 28) - v6;
    if (v7 >= *a4) {
      unsigned int v7 = *a4;
    }
    if (v7)
    {
      if (v7 % a2)
      {
        APSLogErrorAt(0);
        return 4294960591;
      }
      else
      {
        if (a2 - 1 < v7)
        {
          unsigned int v8 = 0;
          uint64_t v9 = v4 + (*(_DWORD *)(a1 + 68) & v6);
          int v10 = -1;
          unsigned int v11 = a2;
          do
          {
            unsigned int v12 = v8;
            uint64_t v13 = a2;
            do
              *(unsigned char *)(a3 + v12++) = *(unsigned char *)(v9 + (v10 + v13--));
            while (v13);
            v11 += a2;
            v8 += a2;
            v10 += a2;
          }
          while (v11 - 1 < v7);
          uint64_t v5 = *(void *)(a1 + 56);
          unsigned int v6 = *(_DWORD *)(v5 + 24);
        }
        uint64_t result = 0;
        *(_DWORD *)(v5 + 24) = v6 + v7;
        *a4 = v7;
      }
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960569;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return result;
}

void APSSharedRingBuffer_ClearDataInBuffer(uint64_t a1)
{
  *(_DWORD *)(*(void *)(a1 + 56) + 24) = *(_DWORD *)(*(void *)(a1 + 56) + 28);
}

void APSNetworkClockLogCurrentNetworkTime(uint64_t a1)
{
  CFTypeRef v16 = 0;
  memset(v15, 0, sizeof(v15));
  uint64_t v2 = mach_absolute_time();
  if (!a1)
  {
    APSLogErrorAt(0);
    goto LABEL_21;
  }
  uint64_t v3 = v2;
  if (v2 <= APSNetworkClockLogCurrentNetworkTime_nextTicks) {
    goto LABEL_25;
  }
  APSNetworkClockLogCurrentNetworkTime_nextTicks = v2 + 10 * UpTicksPerSecond();
  uint64_t v4 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v4) {
    uint64_t v5 = v4;
  }
  else {
    uint64_t v5 = 0;
  }
  unsigned int v6 = *(uint64_t (**)(uint64_t, __CFString *, void, CFTypeRef *))(v5 + 48);
  if (v6)
  {
    uint64_t v7 = v6(a1, @"NetworkClock_Type", *MEMORY[0x1E4F1CF80], &v16);
    if (!v7)
    {
      uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v8) {
        uint64_t v9 = v8;
      }
      else {
        uint64_t v9 = 0;
      }
      unsigned int v12 = *(uint64_t (**)(uint64_t, uint64_t, void *))(v9 + 16);
      if (v12)
      {
        uint64_t v13 = v12(a1, v3, v15);
        if (!v13)
        {
          if (gLogCategory_APSNetworkClockLog > 50
            || gLogCategory_APSNetworkClockLog == -1 && !_LogCategory_Initialize())
          {
            goto LABEL_25;
          }
          goto LABEL_23;
        }
        uint64_t v14 = v13;
      }
      else
      {
        uint64_t v14 = 4294954514;
      }
      uint64_t v11 = v14;
      goto LABEL_20;
    }
    uint64_t v10 = v7;
  }
  else
  {
    uint64_t v10 = 4294954514;
  }
  uint64_t v11 = v10;
LABEL_20:
  APSLogErrorAt(v11);
LABEL_21:
  if (gLogCategory_APSNetworkClockCommon > 90
    || gLogCategory_APSNetworkClockCommon == -1 && !_LogCategory_Initialize())
  {
    goto LABEL_25;
  }
LABEL_23:
  LogPrintF();
LABEL_25:
  if (v16) {
    CFRelease(v16);
  }
}

uint64_t APSNetworkClockGetClassID()
{
  if (APSNetworkClockGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSNetworkClockGetClassID_sRegisterOnce, &APSNetworkClockGetClassID_sClassID, (dispatch_function_t)networkClock_registerBaseClass);
  }
  return APSNetworkClockGetClassID_sClassID;
}

uint64_t networkClock_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&networkClock_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

CFStringRef networkClock_copyFormattingDesc(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"[APSNetworkClock %p]", a1);
}

uint64_t APSNetworkClockGetTypeID()
{
  if (APSNetworkClockGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSNetworkClockGetClassID_sRegisterOnce, &APSNetworkClockGetClassID_sClassID, (dispatch_function_t)networkClock_registerBaseClass);
  }
  uint64_t v0 = APSNetworkClockGetClassID_sClassID;

  return MEMORY[0x1F40DB8F8](v0);
}

uint64_t APSNetworkClockPeerDictionaryIDEqual(const __CFDictionary *a1, const __CFDictionary *a2)
{
  if (!((unint64_t)a1 | (unint64_t)a2)) {
    return 1;
  }
  if ((a1 != 0) != (a2 != 0)) {
    return 0;
  }
  Value = CFDictionaryGetValue(a1, @"ID");
  uint64_t v5 = CFDictionaryGetValue(a2, @"ID");

  return CFEqual(Value, v5);
}

CFDictionaryRef APSNetworkClockPeerDictionaryIsHTClusterExclusive(const __CFDictionary *result)
{
  if (result)
  {
    CFArrayRef Value = (const __CFArray *)CFDictionaryGetValue(result, @"Addresses");
    return (const __CFDictionary *)(!Value || !CFArrayGetCount(Value));
  }
  return result;
}

uint64_t APSNetworkClockCreateSerializableRepresentationOfPeerList(const __CFArray *a1, int a2, __CFArray **a3)
{
  if (!a1)
  {
    uint64_t v11 = 4294895325;
LABEL_19:
    APSLogErrorAt(0);
    return v11;
  }
  if (!a3)
  {
    uint64_t v11 = 4294895325;
    goto LABEL_19;
  }
  CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294895326;
  }
  uint64_t v7 = Mutable;
  for (CFIndex i = 0; ; ++i)
  {
    if (i >= CFArrayGetCount(a1))
    {
      uint64_t v11 = 0;
      *a3 = v7;
      return v11;
    }
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(a1, i);
    if (!a2) {
      break;
    }
    value = 0;
    uint64_t v10 = APSNetworkClockCopyPeerAsSerializablePeerDictionary(ValueAtIndex, (__CFDictionary **)&value);
    if (v10)
    {
      uint64_t v11 = v10;
      goto LABEL_16;
    }
    CFArrayAppendValue(v7, value);
LABEL_11:
    CFRelease(value);
  }
  value = 0;
  uint64_t v10 = APSNetworkClockCopyPeerAsSerializableAddresses(ValueAtIndex, &value);
  if (!v10)
  {
    v14.length = CFArrayGetCount((CFArrayRef)value);
    v14.location = 0;
    CFArrayAppendArray(v7, (CFArrayRef)value, v14);
    goto LABEL_11;
  }
  uint64_t v11 = v10;
LABEL_16:
  APSLogErrorAt(v10);
  CFRelease(v7);
  return v11;
}

uint64_t APSNetworkClockCopyPeerAsSerializablePeerDictionary(CFDictionaryRef theDict, __CFDictionary **a2)
{
  value = 0;
  if (!theDict)
  {
    uint64_t v8 = 4294895325;
    APSLogErrorAt(0);
    return v8;
  }
  if (!a2)
  {
    uint64_t v8 = 4294895325;
    APSLogErrorAt(0);
    goto LABEL_11;
  }
  MutableCopy = CFDictionaryCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, theDict);
  if (!MutableCopy)
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294895326;
    goto LABEL_12;
  }
  CFArrayRef v5 = (const __CFArray *)CFDictionaryGetValue(theDict, @"Addresses");
  if (v5)
  {
    uint64_t StringRepresentationsForNetworkAddresses = clock_createStringRepresentationsForNetworkAddresses(v5, (__CFArray **)&value);
    if (StringRepresentationsForNetworkAddresses)
    {
      uint64_t v8 = StringRepresentationsForNetworkAddresses;
      goto LABEL_22;
    }
    CFDictionarySetValue(MutableCopy, @"Addresses", value);
  }
  CFDictionaryRemoveValue(MutableCopy, @"InterfaceName");
  CFDictionaryRemoveValue(MutableCopy, @"PreferredAddress");
  CFDictionaryRemoveValue(MutableCopy, @"IsEnabled");
  CFDictionaryRemoveValue(MutableCopy, @"IsOverridden");
  if (CFDictionaryContainsKey(theDict, @"HTAddress"))
  {
    uint64_t v7 = CFDictionaryGetValue(theDict, @"HTAddress");
    CFTypeRef cf = 0;
    uint64_t StringRepresentationsForNetworkAddresses = APSNetworkAddressCopyStringRepresentationWithFlags((uint64_t)v7, 2, (CFStringRef *)&cf);
    if (!StringRepresentationsForNetworkAddresses)
    {
      CFDictionarySetValue(MutableCopy, @"HTAddress", cf);
      CFRelease(cf);
      goto LABEL_10;
    }
    uint64_t v8 = StringRepresentationsForNetworkAddresses;
LABEL_22:
    APSLogErrorAt(StringRepresentationsForNetworkAddresses);
    goto LABEL_12;
  }
LABEL_10:
  uint64_t v8 = 0;
  *a2 = MutableCopy;
LABEL_11:
  MutableCopy = 0;
LABEL_12:
  if (value) {
    CFRelease(value);
  }
  if (MutableCopy) {
    CFRelease(MutableCopy);
  }
  return v8;
}

uint64_t APSNetworkClockCopyPeerAsSerializableAddresses(const __CFDictionary *a1, void *a2)
{
  CFTypeRef cf = 0;
  if (!a1)
  {
    uint64_t v6 = 4294895325;
LABEL_11:
    APSLogErrorAt(0);
    return v6;
  }
  if (!a2)
  {
    uint64_t v6 = 4294895325;
    goto LABEL_11;
  }
  CFArrayRef Value = (const __CFArray *)CFDictionaryGetValue(a1, @"Addresses");
  if (!Value)
  {
    CFArrayRef v5 = CFArrayCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0, MEMORY[0x1E4F1D510]);
    if (!v5)
    {
      APSLogErrorAt(0);
      return 4294895326;
    }
    goto LABEL_7;
  }
  uint64_t StringRepresentationsForNetworkAddresses = clock_createStringRepresentationsForNetworkAddresses(Value, (__CFArray **)&cf);
  if (!StringRepresentationsForNetworkAddresses)
  {
    CFArrayRef v5 = (void *)cf;
LABEL_7:
    uint64_t v6 = 0;
    *a2 = v5;
    return v6;
  }
  uint64_t v6 = StringRepresentationsForNetworkAddresses;
  APSLogErrorAt(StringRepresentationsForNetworkAddresses);
  if (cf) {
    CFRelease(cf);
  }
  return v6;
}

uint64_t clock_createStringRepresentationsForNetworkAddresses(const __CFArray *a1, __CFArray **a2)
{
  if (CFArrayGetCount(a1) <= 0)
  {
    uint64_t v9 = 4294895325;
LABEL_22:
    APSLogErrorAt(0);
    return v9;
  }
  if (!a2)
  {
    uint64_t v9 = 4294895325;
    goto LABEL_22;
  }
  CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  if (Mutable)
  {
    CFArrayRef v5 = Mutable;
    for (CFIndex i = 0; ; ++i)
    {
      if (i >= CFArrayGetCount(a1))
      {
        uint64_t v9 = 0;
        *a2 = v5;
        return v9;
      }
      CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(a1, i);
      value = 0;
      uint64_t v8 = APSNetworkAddressCopyStringRepresentationWithFlags((uint64_t)ValueAtIndex, 2, (CFStringRef *)&value);
      uint64_t v9 = v8;
      if (v8) {
        APSLogErrorAt(v8);
      }
      else {
        CFArrayAppendValue(v5, value);
      }
      if (value) {
        CFRelease(value);
      }
      if (v9) {
        break;
      }
    }
    APSLogErrorAt(v9);
    if (gLogCategory_APSNetworkClockCommon <= 90
      && (gLogCategory_APSNetworkClockCommon != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFRelease(v5);
  }
  else
  {
    APSLogErrorAt(0);
    return 4294895326;
  }
  return v9;
}

uint64_t APSNetworkClockAddOrUpdatePeerFromSerializablePeerDictionary(uint64_t a1, const __CFString *a2, const __CFString *a3, CFDictionaryRef theDict, uint64_t a5, uint64_t a6)
{
  CFTypeRef cf = 0;
  uint64_t PeerDictFromSerializablePeerDictionary = clock_createPeerDictFromSerializablePeerDictionary(theDict, a2, a3, (__CFDictionary **)&cf);
  if (PeerDictFromSerializablePeerDictionary)
  {
    uint64_t v14 = PeerDictFromSerializablePeerDictionary;
  }
  else
  {
    CFTypeRef v10 = cf;
    uint64_t v11 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v11) {
      uint64_t v12 = v11;
    }
    else {
      uint64_t v12 = 0;
    }
    uint64_t v13 = *(uint64_t (**)(uint64_t, CFTypeRef, uint64_t, uint64_t))(v12 + 32);
    if (v13)
    {
      uint64_t v14 = v13(a1, v10, a5, a6);
      if (!v14) {
        goto LABEL_11;
      }
    }
    else
    {
      uint64_t v14 = 4294954514;
    }
    uint64_t PeerDictFromSerializablePeerDictionary = v14;
  }
  APSLogErrorAt(PeerDictFromSerializablePeerDictionary);
LABEL_11:
  if (cf) {
    CFRelease(cf);
  }
  return v14;
}

uint64_t clock_createPeerDictFromSerializablePeerDictionary(CFDictionaryRef theDict, const __CFString *a2, const __CFString *a3, __CFDictionary **a4)
{
  CFTypeRef cf = 0;
  value = 0;
  CFTypeRef v26 = 0;
  if (!a2 || (uint64_t v4 = a4) == 0)
  {
    APSLogErrorAt(0);
    uint64_t v23 = 4294895325;
    goto LABEL_36;
  }
  CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef MutableCopy = CFDictionaryCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, theDict);
  if (!MutableCopy)
  {
    uint64_t v23 = 4294895326;
    APSLogErrorAt(0);
    goto LABEL_36;
  }
  CFTypeRef v10 = MutableCopy;
  uint64_t v11 = clock_copyUsableInterface(a2, &value);
  if (v11)
  {
    uint64_t v23 = v11;
    APSLogErrorAt(v11);
    CFMutableArrayRef Mutable = 0;
    CFStringRef v12 = (const __CFString *)value;
    goto LABEL_30;
  }
  CFStringRef v12 = (const __CFString *)value;
  CFDictionarySetValue(v10, @"InterfaceName", value);
  CFArrayGetTypeID();
  TypedCFArrayRef Value = CFDictionaryGetTypedValue();
  if (!TypedValue)
  {
    CFMutableArrayRef Mutable = 0;
    if (!a3) {
      goto LABEL_26;
    }
    goto LABEL_21;
  }
  CFArrayRef v14 = (const __CFArray *)TypedValue;
  CFMutableArrayRef Mutable = CFArrayCreateMutable(v8, 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    uint64_t v23 = 4294895326;
    APSLogErrorAt(0);
    uint64_t v19 = 4294895326;
    goto LABEL_47;
  }
  uint64_t v25 = v4;
  for (CFIndex i = 0; i < CFArrayGetCount(v14); ++i)
  {
    CFStringRef ValueAtIndex = (const __CFString *)CFArrayGetValueAtIndex(v14, i);
    uint64_t v29 = 0;
    if (ValueAtIndex && !APSNetworkAddressCreateWithString((uint64_t)v8, ValueAtIndex, &v29))
    {
      xpc_object_t v18 = v29;
      CFArrayAppendValue(Mutable, v29);
      if (v18) {
        CFRelease(v18);
      }
    }
    else if (gLogCategory_APSNetworkClockCommon <= 90 {
           && (gLogCategory_APSNetworkClockCommon != -1 || _LogCategory_Initialize()))
    }
    {
      LogPrintF();
    }
  }
  CFDictionarySetValue(v10, @"Addresses", Mutable);
  uint64_t v4 = v25;
  if (a3)
  {
LABEL_21:
    if (v12 == a2 || v12 && CFEqual(a2, v12))
    {
      uint64_t v19 = APSNetworkAddressCreateWithString((uint64_t)v8, a3, &cf);
      if (v19)
      {
        uint64_t v23 = v19;
        goto LABEL_47;
      }
      CFTypeRef v20 = cf;
      SockAddrSetPort();
      CFDictionarySetValue(v10, @"PreferredAddress", v20);
    }
  }
LABEL_26:
  if (CFDictionaryContainsKey(theDict, @"HTAddress"))
  {
    CFStringRef v21 = (const __CFString *)CFDictionaryGetValue(theDict, @"HTAddress");
    uint64_t v19 = APSNetworkAddressCreateWithString((uint64_t)v8, v21, &v26);
    if (!v19)
    {
      CFTypeRef v22 = v26;
      SockAddrSetPort();
      CFDictionarySetValue(v10, @"HTAddress", v22);
      goto LABEL_29;
    }
    uint64_t v23 = v19;
LABEL_47:
    APSLogErrorAt(v19);
    goto LABEL_30;
  }
LABEL_29:
  uint64_t v23 = 0;
  *uint64_t v4 = v10;
  CFTypeRef v10 = 0;
LABEL_30:
  if (v12) {
    CFRelease(v12);
  }
  if (v10) {
    CFRelease(v10);
  }
  if (Mutable) {
    CFRelease(Mutable);
  }
LABEL_36:
  if (cf) {
    CFRelease(cf);
  }
  if (v26) {
    CFRelease(v26);
  }
  return v23;
}

uint64_t clock_copyUsableInterface(const __CFString *a1, void *a2)
{
  if (a1)
  {
    CFStringHasPrefix(a1, @"en");
    CFTypeRef v4 = CFRetain(a1);
  }
  else
  {
    uint64_t UsableInterfaceList = CreateUsableInterfaceList();
    if (UsableInterfaceList)
    {
      uint64_t v5 = UsableInterfaceList;
      APSLogErrorAt(UsableInterfaceList);
      return v5;
    }
    CFTypeRef v4 = 0;
  }
  if (v4)
  {
    uint64_t v5 = 0;
    *a2 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294895322;
  }
  return v5;
}

uint64_t APSNetworkClockAddOrUpdatePeerWithAddressAndInterfaceNameStrings(uint64_t a1, const void *a2, const __CFString *a3, uint64_t a4, uint64_t a5)
{
  size_t v15 = 0;
  uint64_t v8 = clock_createPeerDictFromStringRepresentation(a2, a3, &v15);
  if (v8)
  {
    uint64_t v13 = v8;
    APSLogErrorAt(v8);
    uint64_t v9 = v15;
    if (!v15) {
      return v13;
    }
    goto LABEL_11;
  }
  uint64_t v9 = v15;
  uint64_t v10 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v10) {
    uint64_t v11 = v10;
  }
  else {
    uint64_t v11 = 0;
  }
  CFStringRef v12 = *(uint64_t (**)(uint64_t, __CFDictionary *, uint64_t, uint64_t))(v11 + 32);
  if (v12)
  {
    uint64_t v13 = v12(a1, v9, a4, a5);
    if (!v13) {
      goto LABEL_10;
    }
  }
  else
  {
    uint64_t v13 = 4294954514;
  }
  APSLogErrorAt(v13);
LABEL_10:
  if (v9) {
LABEL_11:
  }
    CFRelease(v9);
  return v13;
}

uint64_t clock_createPeerDictFromStringRepresentation(const void *a1, const __CFString *a2, __CFDictionary **a3)
{
  value = 0;
  if (!a1)
  {
    uint64_t v13 = 4294895325;
LABEL_13:
    APSLogErrorAt(0);
    return v13;
  }
  if (!a2)
  {
    uint64_t v13 = 4294895325;
    goto LABEL_13;
  }
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294895326;
  }
  uint64_t v8 = Mutable;
  uint64_t v9 = APSNetworkAddressCreateWithString((uint64_t)v6, a2, &value);
  if (v9)
  {
    uint64_t v13 = v9;
    APSLogErrorAt(v9);
  }
  else
  {
    uint64_t v10 = CFArrayCreateMutable(v6, 0, MEMORY[0x1E4F1D510]);
    if (v10)
    {
      uint64_t v11 = v10;
      CFStringRef v12 = value;
      CFArrayAppendValue(v10, value);
      CFDictionarySetValue(v8, @"ID", a2);
      CFDictionarySetValue(v8, @"InterfaceName", a1);
      CFDictionarySetValue(v8, @"Addresses", v11);
      CFDictionarySetValue(v8, @"PreferredAddress", v12);
      uint64_t v13 = 0;
      *a3 = v8;
      if (!v12) {
        goto LABEL_8;
      }
      goto LABEL_7;
    }
    APSLogErrorAt(0);
    uint64_t v13 = 4294895326;
  }
  CFRelease(v8);
  uint64_t v11 = 0;
  CFStringRef v12 = value;
  if (value) {
LABEL_7:
  }
    CFRelease(v12);
LABEL_8:
  if (v11) {
    CFRelease(v11);
  }
  return v13;
}

uint64_t APSNetworkClockSetPeersFromSetPeersMessagePayload(uint64_t a1, const __CFString *a2, const __CFArray *a3, int a4, uint64_t a5, uint64_t a6)
{
  if (!a3)
  {
    uint64_t v17 = 4294895325;
    APSLogErrorAt(0);
    return v17;
  }
  CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294895326;
  }
  uint64_t v13 = Mutable;
  for (CFIndex i = 0; i < CFArrayGetCount(a3); ++i)
  {
    value = 0;
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(a3, i);
    if (a4)
    {
      if (ValueAtIndex)
      {
        uint64_t PeerDictFromSerializablePeerDictionary = clock_createPeerDictFromSerializablePeerDictionary(ValueAtIndex, a2, 0, (__CFDictionary **)&value);
        if (!PeerDictFromSerializablePeerDictionary) {
          goto LABEL_11;
        }
        uint64_t v17 = PeerDictFromSerializablePeerDictionary;
      }
      else
      {
        uint64_t v17 = 4294895325;
        uint64_t PeerDictFromSerializablePeerDictionary = 0;
      }
    }
    else if (ValueAtIndex)
    {
      uint64_t PeerDictFromSerializablePeerDictionary = clock_createPeerDictFromStringRepresentation(a2, (const __CFString *)ValueAtIndex, (__CFDictionary **)&value);
      if (!PeerDictFromSerializablePeerDictionary)
      {
LABEL_11:
        CFArrayAppendValue(v13, value);
        uint64_t v17 = 0;
        goto LABEL_12;
      }
      uint64_t v17 = PeerDictFromSerializablePeerDictionary;
    }
    else
    {
      uint64_t v17 = 4294895325;
      uint64_t PeerDictFromSerializablePeerDictionary = 0;
    }
    APSLogErrorAt(PeerDictFromSerializablePeerDictionary);
LABEL_12:
    if (value)
    {
      CFRelease(value);
      value = 0;
    }
    if (v17)
    {
      APSLogErrorAt(v17);
      goto LABEL_26;
    }
  }
  uint64_t v18 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v18) {
    uint64_t v19 = v18;
  }
  else {
    uint64_t v19 = 0;
  }
  CFTypeRef v20 = *(void (**)(uint64_t, __CFArray *, uint64_t, uint64_t))(v19 + 48);
  if (v20) {
    v20(a1, v13, a5, a6);
  }
  uint64_t v17 = 0;
LABEL_26:
  CFRelease(v13);
  return v17;
}

uint64_t APSNetworkClockRemoveAllPeers(uint64_t a1)
{
  CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  uint64_t v3 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v3) {
    uint64_t v4 = v3;
  }
  else {
    uint64_t v4 = 0;
  }
  uint64_t v5 = *(uint64_t (**)(uint64_t, CFMutableArrayRef, void, void))(v4 + 48);
  if (v5)
  {
    uint64_t v6 = v5(a1, Mutable, 0, 0);
    if (!Mutable) {
      return v6;
    }
    goto LABEL_8;
  }
  uint64_t v6 = 4294954514;
  if (Mutable) {
LABEL_8:
  }
    CFRelease(Mutable);
  return v6;
}

uint64_t APSNetworkClockDetermineAndSetOrUpdateLocalPeerInfo(uint64_t a1, int a2, const __CFString *a3, long long *a4)
{
  CFTypeRef cf = 0;
  value = 0;
  CFTypeRef v34 = 0;
  BOOL v33 = 0;
  CFTypeRef v32 = 0;
  unsigned int v31 = 0;
  CFTypeRef cf1 = 0;
  APSCopyBootUUID((CFStringRef *)&value);
  if (value)
  {
    CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFMutableArrayRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      uint64_t v10 = Mutable;
      CFDictionarySetValue(Mutable, @"ID", value);
      uint64_t v11 = (const void *)*MEMORY[0x1E4F1CFD0];
      CFDictionarySetValue(v10, @"SupportsClockPortMatchingOverride", (const void *)*MEMORY[0x1E4F1CFD0]);
      APSCopyTightSyncInfo(&cf, &v33, 0, 0, 0);
      if (cf)
      {
        CFDictionarySetValue(v10, @"TightSyncUUID", cf);
        if (v33) {
          CFStringRef v12 = v11;
        }
        else {
          CFStringRef v12 = (const void *)*MEMORY[0x1E4F1CFC8];
        }
        CFDictionarySetValue(v10, @"IsTightSyncGroupLeader", v12);
      }
      APSCopyPersistentGroupInfo((const __CFString **)&v32, &v31, 0, 0, 0, 0, 0, 0);
      if (v32 && v31 == 1) {
        CFDictionarySetValue(v10, @"HTGroupUUID", v32);
      }
      if (APSIsAPMSpeaker_sCheckOnce != -1) {
        dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
      }
      if (!APSIsAPMSpeaker_sIsAPMSpeaker) {
        IsAppleTV();
      }
      CFDictionarySetInt64();
      uint64_t v13 = clock_copyUsableInterface(a3, &cf1);
      if (v13)
      {
        uint64_t v22 = v13;
      }
      else
      {
        CFTypeRef v14 = cf1;
        if (cf1 != a3)
        {
          CFTypeRef v15 = 0;
          if (!a3 || !cf1)
          {
LABEL_22:
            if (a2)
            {
LABEL_23:
              if (!v15)
              {
                APSLogErrorAt(0);
                CFTypeRef v16 = 0;
                uint64_t v22 = 4294895325;
                goto LABEL_64;
              }
              CFDictionarySetValue(v10, @"HTAddress", v15);
              CFTypeRef v16 = 0;
              goto LABEL_55;
            }
LABEL_26:
            int v40 = 0;
            unsigned int v41 = 0;
            CFTypeRef v39 = 0;
            uint64_t UsableInterfaceList = CFStringCopyUTF8CString();
            if (UsableInterfaceList)
            {
              uint64_t v22 = UsableInterfaceList;
            }
            else
            {
              uint64_t UsableInterfaceList = CreateUsableInterfaceList();
              if (!UsableInterfaceList)
              {
                uint64_t v18 = CFArrayCreateMutable(v8, 0, MEMORY[0x1E4F1D510]);
                CFTypeRef v16 = v18;
                if (v18)
                {
                  if (v15) {
                    CFArrayAppendValue(v18, v15);
                  }
                  uint64_t v19 = v41;
                  if (v41)
                  {
                    while (1)
                    {
                      memset(v38, 0, 28);
                      SockAddrCopy();
                      v37[0] = v38[0];
                      *(long long *)((char *)v37 + 12) = *(long long *)((char *)v38 + 12);
                      uint64_t v18 = (__CFArray *)APSNetworkAddressCreateWithSocketAddr((uint64_t)v8, v37, &v39);
                      if (v18)
                      {
                        uint64_t v22 = (uint64_t)v18;
                        goto LABEL_79;
                      }
                      CFTypeRef v20 = v39;
                      SockAddrSetPort();
                      CFStringRef v21 = v15;
                      if (v20 != v15)
                      {
                        CFStringRef v21 = v20;
                        if (v15 && v20 && CFEqual(v20, v15))
                        {
LABEL_39:
                          CFRelease(v21);
                          CFTypeRef v39 = 0;
                          goto LABEL_40;
                        }
                        CFArrayAppendValue(v16, v20);
                      }
                      if (v21) {
                        goto LABEL_39;
                      }
LABEL_40:
                      uint64_t v19 = (void *)*v19;
                      if (!v19)
                      {
                        uint64_t v22 = 0;
                        uint64_t v23 = v16;
                        goto LABEL_42;
                      }
                    }
                  }
                  uint64_t v24 = 0;
                  uint64_t v22 = 0;
LABEL_47:
                  if (v40) {
                    free(v40);
                  }
                  if (v39) {
                    CFRelease(v39);
                  }
                  if (v24) {
                    CFRelease(v24);
                  }
                  if (v22)
                  {
                    uint64_t v28 = v22;
                    goto LABEL_63;
                  }
                  CFDictionarySetValue(v10, @"Addresses", v16);
                  CFDictionarySetValue(v10, @"InterfaceName", v14);
LABEL_55:
                  uint64_t v25 = *(void *)(CMBaseObjectGetVTable() + 16);
                  if (v25) {
                    uint64_t v26 = v25;
                  }
                  else {
                    uint64_t v26 = 0;
                  }
                  unsigned int v27 = *(uint64_t (**)(uint64_t, __CFDictionary *))(v26 + 72);
                  if (v27)
                  {
                    uint64_t v22 = v27(a1, v10);
                    if (!v22)
                    {
LABEL_64:
                      CFRelease(v10);
                      goto LABEL_65;
                    }
                  }
                  else
                  {
                    uint64_t v22 = 4294954514;
                  }
                  uint64_t v28 = v22;
LABEL_63:
                  APSLogErrorAt(v28);
                  goto LABEL_64;
                }
                uint64_t v22 = 4294895326;
LABEL_79:
                APSLogErrorAt((uint64_t)v18);
                uint64_t v23 = 0;
LABEL_43:
                if (v41) {
                  ReleaseUsableInterfaceList();
                }
                uint64_t v24 = v16;
                CFTypeRef v16 = v23;
                goto LABEL_47;
              }
              uint64_t v22 = UsableInterfaceList;
            }
            APSLogErrorAt(UsableInterfaceList);
            uint64_t v23 = 0;
LABEL_42:
            CFTypeRef v16 = 0;
            goto LABEL_43;
          }
          if (!CFEqual(cf1, a3))
          {
            CFTypeRef v15 = 0;
            if (a2) {
              goto LABEL_23;
            }
            goto LABEL_26;
          }
        }
        v38[0] = *a4;
        *(long long *)((char *)v38 + 12) = *(long long *)((char *)a4 + 12);
        uint64_t v13 = APSNetworkAddressCreateWithSocketAddr((uint64_t)v8, v38, &v34);
        if (!v13)
        {
          CFTypeRef v15 = v34;
          SockAddrSetPort();
          goto LABEL_22;
        }
        uint64_t v22 = v13;
      }
      APSLogErrorAt(v13);
      CFTypeRef v16 = 0;
      goto LABEL_64;
    }
    uint64_t v22 = 4294895326;
    APSLogErrorAt(0);
    CFTypeRef v16 = 0;
  }
  else
  {
    APSLogErrorAt(0);
    CFTypeRef v16 = 0;
    uint64_t v22 = 4294895322;
  }
LABEL_65:
  if (value) {
    CFRelease(value);
  }
  if (cf) {
    CFRelease(cf);
  }
  if (v32) {
    CFRelease(v32);
  }
  if (v34) {
    CFRelease(v34);
  }
  if (cf1) {
    CFRelease(cf1);
  }
  if (v16) {
    CFRelease(v16);
  }
  return v22;
}

CFMutableDictionaryRef APSNetworkTimeCopyAsDictionary()
{
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (Mutable)
  {
    uint64_t v1 = FigCFDictionarySetInt32();
    if (v1
      || (uint64_t v1 = FigCFDictionarySetInt64(), v1)
      || (uint64_t v1 = FigCFDictionarySetInt64(), v1)
      || (uint64_t v1 = FigCFDictionarySetInt32(), v1))
    {
      APSLogErrorAt(v1);
      CFRelease(Mutable);
      return 0;
    }
  }
  return Mutable;
}

__n128 APSNetworkTimeMakeFromDictionary@<Q0>(const void *a1@<X0>, uint64_t a2@<X8>)
{
  *(void *)(a2 + 16) = 0x100000000;
  *(_OWORD *)a2 = kAPSNetworkTimeInvalid;
  if (!a1
    || (CFTypeID v3 = CFGetTypeID(a1), v3 != CFDictionaryGetTypeID())
    || !FigCFDictionaryGetInt32IfPresent()
    || !FigCFDictionaryGetInt64IfPresent()
    || !FigCFDictionaryGetInt64IfPresent()
    || !FigCFDictionaryGetInt32IfPresent())
  {
    APSLogErrorAt(0);
    *(void *)(a2 + 16) = 0x100000000;
    __n128 result = (__n128)kAPSNetworkTimeInvalid;
    *(_OWORD *)a2 = kAPSNetworkTimeInvalid;
  }
  return result;
}

uint64_t APSNetworkClockReportRTCMetrics(uint64_t a1)
{
  uint64_t v10 = 0;
  uint64_t v11 = &v10;
  uint64_t v12 = 0x2000000000;
  int v13 = 0;
  CFTypeRef cf = 0;
  uint64_t v2 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v2) {
    uint64_t v3 = v2;
  }
  else {
    uint64_t v3 = 0;
  }
  uint64_t v4 = *(uint64_t (**)(uint64_t, __CFString *, void, CFTypeRef *))(v3 + 48);
  if (v4)
  {
    int v5 = v4(a1, @"Metrics", *MEMORY[0x1E4F1CF80], &cf);
    *((_DWORD *)v11 + 6) = v5;
    CFTypeRef v6 = cf;
    if (!v5)
    {
      CFDictionaryApplyBlock();
      CFTypeRef v6 = cf;
    }
    if (v6) {
      CFRelease(v6);
    }
  }
  else
  {
    *((_DWORD *)v11 + 6) = -12782;
  }
  uint64_t v7 = *((unsigned int *)v11 + 6);
  _Block_object_dispose(&v10, 8);
  return v7;
}

void __APSNetworkClockReportRTCMetrics_block_invoke(uint64_t a1)
{
  if (*(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24)) {
    return;
  }
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    *(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = -71970;
    return;
  }
  CFDictionaryRef v3 = Mutable;
  CFArrayRef v4 = (const __CFArray *)CFDictionaryCopyKeys();
  if (!*(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24))
  {
    CFIndex v5 = 0;
    if (!FigCFNumberGetUInt16())
    {
      while (v5 < CFArrayGetCount(v4))
      {
        CFArrayGetValueAtIndex(v4, v5);
        if (!FigCFEqual() && !FigCFEqual() && !FigCFEqual()) {
          FigCFEqual();
        }
        FigCFDictionarySetValueFromKeyInDict();
        ++v5;
      }
      APSRTCReportingAgentSendEvent(*(void *)(a1 + 40), 9, v3);
      if (gLogCategory_APSNetworkClockCommon >= 31
        || gLogCategory_APSNetworkClockCommon == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_32;
      }
      goto LABEL_28;
    }
    while (v5 < CFArrayGetCount(v4))
    {
      CFArrayGetValueAtIndex(v4, v5);
      if (!FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual()
        && !FigCFEqual())
      {
        FigCFEqual();
      }
      FigCFDictionarySetValueFromKeyInDict();
      ++v5;
    }
    APSRTCReportingAgentSendEvent(*(void *)(a1 + 40), 8, v3);
    if (gLogCategory_APSNetworkClockCommon < 31
      && (gLogCategory_APSNetworkClockCommon != -1 || _LogCategory_Initialize()))
    {
LABEL_28:
      LogPrintF();
    }
  }
LABEL_32:
  CFRelease(v3);
  if (v4)
  {
    CFRelease(v4);
  }
}

uint64_t APSEndpointStreamAudioHoseSBARMockCreate(uint64_t a1, const void *a2, const __CFDictionary *a3, void *a4)
{
  uint64_t v17 = *MEMORY[0x1E4F143B8];
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!a4)
  {
    APSLogErrorAt(0);
    return 4294894965;
  }
  if (hoseSBARMock_getClassID_sRegisterOnce != -1) {
    dispatch_once_f(&hoseSBARMock_getClassID_sRegisterOnce, &hoseSBARMock_getClassID_sClassID, (dispatch_function_t)hoseSBARMock_registerBaseClass);
  }
  uint64_t v7 = CMDerivedObjectCreate();
  if (v7)
  {
    uint64_t v14 = v7;
LABEL_29:
    APSLogErrorAt(v7);
    return v14;
  }
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  SNPrintF();
  uint64_t v7 = FigDispatchQueueCreateWithPriority();
  *(void *)(DerivedStorage + 48) = v7;
  if (!v7)
  {
    uint64_t v14 = 4294894966;
    goto LABEL_29;
  }
  SNPrintF();
  uint64_t v7 = (uint64_t)dispatch_queue_create(label, 0);
  *(void *)(DerivedStorage + 8) = v7;
  if (!v7)
  {
    uint64_t v14 = 4294894966;
    goto LABEL_29;
  }
  if (a3)
  {
    int v9 = CFDictionaryContainsKey(a3, @"StreamID");
    CFArrayRef Value = a2;
    if (v9) {
      CFArrayRef Value = CFDictionaryGetValue(a3, @"StreamID");
    }
    *(void *)(DerivedStorage + 24) = CFRetain(Value);
    if (CFDictionaryContainsKey(a3, @"ClusterType"))
    {
      uint64_t v11 = CFDictionaryGetValue(a3, @"ClusterType");
      Suint64_t Int32 = (uint64_t)CFRetain(v11);
    }
    else
    {
      Suint64_t Int32 = FigCFNumberCreateSInt32();
    }
    *(void *)(DerivedStorage + 32) = SInt32;
    if (CFDictionaryContainsKey(a3, @"ReceiverShouldDetermineAnchor")) {
      BOOL v13 = CFDictionaryGetInt64() != 0;
    }
    else {
      BOOL v13 = 0;
    }
    *(unsigned char *)(DerivedStorage + 40) = v13;
  }
  *(void *)(DerivedStorage + 16) = a2;
  if (a2) {
    CFRetain(a2);
  }
  *a4 = 0;
  return 0;
}

uint64_t hoseSBARMock_audioHoseSetMagicCookie(const void *a1, uint64_t a2, const void *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  v14[0] = v11;
  v14[1] = a2;
  if (a3) {
    CFTypeRef v12 = CFRetain(a3);
  }
  else {
    CFTypeRef v12 = 0;
  }
  v14[2] = v12;
  v14[3] = a4;
  v14[4] = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseSetMagicCookieCallbackDispatchInternal, v14, 0x28uLL);
  return 0;
}

void hoseSBARMock_audioHoseSetMagicCookieCallbackDispatchInternal(void *a1)
{
  CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v2 = (void (*)(void, void, void, void))a1[3];
  if (v2) {
    v2(*a1, a1[1], 0, a1[4]);
  }
  if (*a1) {
    CFRelease((CFTypeRef)*a1);
  }
  CFDictionaryRef v3 = (const void *)a1[2];
  if (v3)
  {
    CFRelease(v3);
  }
}

uint64_t hoseSBARMock_audioHoseSetCryptor(const void *a1, uint64_t a2, const void *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  v14[0] = v11;
  v14[1] = a2;
  if (a3) {
    CFTypeRef v12 = CFRetain(a3);
  }
  else {
    CFTypeRef v12 = 0;
  }
  v14[2] = v12;
  v14[3] = a4;
  v14[4] = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseSetCryptorCallbackDispatchInternal, v14, 0x28uLL);
  return 0;
}

void hoseSBARMock_audioHoseSetCryptorCallbackDispatchInternal(void *a1)
{
  CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v2 = (void (*)(void, void, void, void))a1[3];
  if (v2) {
    v2(*a1, a1[1], 0, a1[4]);
  }
  if (*a1) {
    CFRelease((CFTypeRef)*a1);
  }
  CFDictionaryRef v3 = (const void *)a1[2];
  if (v3)
  {
    CFRelease(v3);
  }
}

uint64_t hoseSBARMock_audioHoseGetAnchor(const void *a1, int a2, uint64_t a3, uint64_t a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v12 = 0;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v9 = CFRetain(a1);
  }
  else {
    CFTypeRef v9 = 0;
  }
  CFTypeRef v11 = v9;
  LODWORD(v12) = a2;
  uint64_t v13 = a3;
  uint64_t v14 = a4;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseGetAnchorCallbackDispatchInternal, &v11, 0x38uLL);
  return 0;
}

void hoseSBARMock_audioHoseGetAnchorCallbackDispatchInternal(uint64_t a1)
{
  uint64_t v19 = *MEMORY[0x1E4F143B8];
  int v18 = 0;
  uint64_t v17 = 0;
  int v2 = *(_DWORD *)(a1 + 8);
  CMBaseObjectGetDerivedStorage();
  if (v2 == 1)
  {
    CMTimeMake((CMTime *)v14, 0, 1000);
    int v3 = *(_DWORD *)&v14[12];
    BOOL v4 = (v14[12] & 0x1D) == 1 && *(void *)&v14[16] == 0;
    char v5 = v4;
    if (v4)
    {
      *(void *)&long long v15 = *(void *)v14;
      DWORD2(v15) = *(_DWORD *)&v14[8];
      if ((v14[12] & 0x1D) == 1) {
        char v6 = v5;
      }
      else {
        char v6 = 0;
      }
      if (v6)
      {
        uint64_t v7 = 0;
        uint64_t v17 = v15;
        int v18 = DWORD2(v15);
        long long v8 = xmmword_1D0C1ED50;
        uint64_t v9 = 0;
        int v10 = 2;
        goto LABEL_17;
      }
    }
    else
    {
      DWORD2(v15) = 0;
      *(void *)&long long v15 = 0;
    }
    uint64_t v7 = 4294894965;
  }
  else
  {
    uint64_t v7 = 4294894965;
  }
  APSLogErrorAt(0);
  int v10 = 0;
  int v3 = 0;
  uint64_t v9 = 0x100000000;
  long long v8 = 0uLL;
LABEL_17:
  CFTypeRef v11 = *(void (**)(CFTypeRef, unsigned char *, long long *, uint64_t, uint64_t))(a1 + 16);
  if (v11)
  {
    CFTypeRef v12 = *(CFTypeRef *)a1;
    uint64_t v13 = *(void *)(a1 + 24);
    *(_DWORD *)uint64_t v14 = v10;
    *(void *)&v14[4] = v17;
    *(_DWORD *)&v14[12] = v18;
    *(_DWORD *)&v14[16] = v3;
    *(void *)&v14[20] = 0;
    long long v15 = v8;
    uint64_t v16 = v9;
    v11(v12, v14, &v15, v7, v13);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBARMock_audioHoseSetRate(const void *a1, int a2, _OWORD *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  CFTypeRef v13 = v11;
  int v14 = a2;
  *(_OWORD *)long long v15 = *a3;
  *(_OWORD *)&v15[12] = *(_OWORD *)((char *)a3 + 12);
  uint64_t v16 = a4;
  uint64_t v17 = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseSetRateCallbackDispatchInternal, &v13, 0x38uLL);
  return 0;
}

void hoseSBARMock_audioHoseSetRateCallbackDispatchInternal(uint64_t a1)
{
  int v2 = *(_DWORD *)(a1 + 8);
  CMBaseObjectGetDerivedStorage();
  if (v2 == 1)
  {
    uint64_t v3 = 0;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v3 = 4294894965;
  }
  BOOL v4 = *(void (**)(CFTypeRef, void *, long long *, uint64_t, uint64_t))(a1 + 40);
  if (v4)
  {
    CFTypeRef v5 = *(CFTypeRef *)a1;
    uint64_t v6 = *(void *)(a1 + 48);
    memset(v9, 0, sizeof(v9));
    int v10 = 0;
    long long v7 = kAPSNetworkTimeInvalid;
    uint64_t v8 = 0x100000000;
    v4(v5, v9, &v7, v3, v6);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBARMock_audioHoseApplyVolumeFade(uint64_t a1, unsigned int a2, CMTime *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(void *)&v15[4] = 0;
  if (a2 >= 3)
  {
    uint64_t v9 = 4294894965;
LABEL_13:
    APSLogErrorAt(0);
    return v9;
  }
  uint64_t v7 = DerivedStorage;
  CMTime time1 = *a3;
  CMTime time2 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
  if (CMTimeCompare(&time1, &time2) <= 0)
  {
    uint64_t v9 = 4294894965;
    goto LABEL_13;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    CMTime time1 = *a3;
    CMTimeGetSeconds(&time1);
    LogPrintF();
  }
  uint64_t v12 = a1;
  unsigned int v13 = a2;
  long long v14 = *(_OWORD *)&a3->value;
  *(void *)long long v15 = a3->epoch;
  uint64_t v8 = *(NSObject **)(v7 + 48);
  LODWORD(time2.value) = 0;
  time1.value = (CMTimeValue)&time2;
  *(void *)&time1.timescale = &v12;
  time1.epoch = (CMTimeEpoch)hoseSBARMock_audioHoseApplyVolumeFadeCallbackDispatchInternal;
  if (!v8) {
    return 4294960591;
  }
  dispatch_sync_f(v8, &time1, (dispatch_function_t)APSDispatchSyncTaskCallback);
  return LODWORD(time2.value);
}

uint64_t hoseSBARMock_audioHoseApplyVolumeFadeCallbackDispatchInternal()
{
  return 0;
}

uint64_t hoseSBARMock_audioHoseSetCallbacks(const void *a1, uint64_t a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFRetain(a1);
  }
  if (a3) {
    CFRetain(a3);
  }
  uint64_t v7 = *(NSObject **)(DerivedStorage + 48);
  v9[0] = MEMORY[0x1E4F143A8];
  v9[1] = 0x40000000;
  v9[2] = __hoseSBARMock_audioHoseSetCallbacks_block_invoke;
  void v9[3] = &__block_descriptor_tmp_42;
  v9[4] = DerivedStorage;
  v9[5] = a2;
  v9[6] = a3;
  v9[7] = a1;
  dispatch_async(v7, v9);
  return 0;
}

void __hoseSBARMock_audioHoseSetCallbacks_block_invoke(void *a1)
{
  *(void *)(a1[4] + 56) = a1[5];
  uint64_t v2 = a1[4];
  uint64_t v3 = *(const void **)(v2 + 64);
  BOOL v4 = (const void *)a1[6];
  *(void *)(v2 + 64) = v4;
  if (v4) {
    CFRetain(v4);
  }
  if (v3) {
    CFRelease(v3);
  }
  CFTypeRef v5 = (const void *)a1[7];
  if (v5) {
    CFRelease(v5);
  }
  uint64_t v6 = (const void *)a1[6];
  if (v6)
  {
    CFRelease(v6);
  }
}

uint64_t hoseSBARMock_audioHoseSetRateAndAnchorTime(const void *a1, int a2, _OWORD *a3, uint64_t a4, _OWORD *a5, uint64_t a6, uint64_t a7)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(void *)&v21[24] = 0;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v15 = CFRetain(a1);
  }
  else {
    CFTypeRef v15 = 0;
  }
  CFTypeRef v17 = v15;
  int v18 = a2;
  *(_OWORD *)uint64_t v19 = *a3;
  *(_OWORD *)&v19[3] = *(_OWORD *)((char *)a3 + 12);
  *(_OWORD *)&v19[7] = *(_OWORD *)a4;
  uint64_t v20 = *(void *)(a4 + 16);
  *(_OWORD *)CFStringRef v21 = *a5;
  *(_OWORD *)&v21[12] = *(_OWORD *)((char *)a5 + 12);
  uint64_t v22 = a6;
  uint64_t v23 = a7;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseSetRateAndAnchorTimeCallbackDispatchInternal, &v17, 0x70uLL);
  return 0;
}

void hoseSBARMock_audioHoseSetRateAndAnchorTimeCallbackDispatchInternal(uint64_t a1)
{
  memset(v12, 0, 28);
  int v2 = *(_DWORD *)(a1 + 8);
  v11[0] = *(_OWORD *)(a1 + 12);
  *(_OWORD *)((char *)v11 + 12) = *(_OWORD *)(a1 + 24);
  *(_OWORD *)int v10 = *(_OWORD *)(a1 + 64);
  *(_OWORD *)&v10[12] = *(_OWORD *)(a1 + 76);
  if (*(unsigned char *)CMBaseObjectGetDerivedStorage())
  {
    APSLogErrorAt(0);
    uint64_t v5 = 4294894964;
  }
  else if (v2)
  {
    *(_OWORD *)unsigned int v13 = v11[0];
    *(_OWORD *)&v13[12] = *(_OWORD *)((char *)v11 + 12);
    CMBaseObjectGetDerivedStorage();
    CFTypeRef v3 = APSAudioTransportTimeCopyDebugDesc((uint64_t)v13);
    *(_OWORD *)unsigned int v13 = *(_OWORD *)v10;
    *(_OWORD *)&v13[12] = *(_OWORD *)&v10[12];
    CFTypeRef v4 = APSAudioTransportTimeCopyDebugDesc((uint64_t)v13);
    if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (v3) {
      CFRelease(v3);
    }
    if (v4) {
      CFRelease(v4);
    }
    uint64_t v5 = 0;
  }
  else
  {
    CMBaseObjectGetDerivedStorage();
    if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v5 = 0;
    memset(v12, 0, 28);
  }
  uint64_t v6 = *(void (**)(CFTypeRef, uint64_t, unsigned char *, unsigned char *, _OWORD *, uint64_t, uint64_t))(a1 + 96);
  if (v6)
  {
    CFTypeRef v7 = *(CFTypeRef *)a1;
    uint64_t v8 = *(unsigned int *)(a1 + 8);
    uint64_t v9 = *(void *)(a1 + 104);
    *(_OWORD *)unsigned int v13 = *(_OWORD *)(a1 + 12);
    *(_OWORD *)&v13[12] = *(_OWORD *)(a1 + 24);
    *(_OWORD *)int v10 = *(_OWORD *)(a1 + 40);
    *(void *)&v10[16] = *(void *)(a1 + 56);
    v11[0] = v12[0];
    *(_OWORD *)((char *)v11 + 12) = *(_OWORD *)((char *)v12 + 12);
    v6(v7, v8, v13, v10, v11, v5, v9);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBARMock_audioHoseNotifyAudioAvailable(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFTypeRef v3 = CFRetain(a1);
  }
  else {
    CFTypeRef v3 = 0;
  }
  CFTypeRef v5 = v3;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_notifyAudioDataAvailableEngineCallbackDispatchInternal, &v5, 8uLL);
  return 0;
}

void hoseSBARMock_notifyAudioDataAvailableEngineCallbackDispatchInternal(const void **a1)
{
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!*DerivedStorage) {
    DerivedStorage[72] = 1;
  }
  CFTypeRef v3 = *a1;

  CFRelease(v3);
}

uint64_t hoseSBARMock_audioHoseFlushWithinSampleRange(const void *a1, int a2, _OWORD *a3, int a4, _OWORD *a5, uint64_t a6, uint64_t a7)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef v16 = CFRetain(a1);
  int v17 = a2;
  *(_OWORD *)int v18 = *a3;
  *(_OWORD *)&v18[12] = *(_OWORD *)((char *)a3 + 12);
  int v19 = a4;
  *(_OWORD *)uint64_t v20 = *a5;
  *(_OWORD *)&v20[12] = *(_OWORD *)((char *)a5 + 12);
  uint64_t v21 = a6;
  uint64_t v22 = a7;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseFlushWithinSampleRangeDispatchInternal, &v16, 0x58uLL);
  return 0;
}

void hoseSBARMock_audioHoseFlushWithinSampleRangeDispatchInternal(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  int v4 = *(_DWORD *)(a1 + 40);
  uint64_t v5 = *(void *)(a1 + 72);
  uint64_t v14 = *(void *)(a1 + 80);
  *(_OWORD *)CFTypeRef v16 = *(_OWORD *)(a1 + 12);
  *(_OWORD *)&v16[12] = *(_OWORD *)(a1 + 24);
  *(_OWORD *)CFTypeRef v15 = *(_OWORD *)(a1 + 44);
  *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)(a1 + 56);
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  *(_OWORD *)int v17 = *(_OWORD *)v16;
  *(_OWORD *)&v17[12] = *(_OWORD *)&v16[12];
  CFTypeRef v7 = APSAudioTransportTimeCopyDebugDesc((uint64_t)v17);
  *(_OWORD *)int v17 = *(_OWORD *)v15;
  *(_OWORD *)&v17[12] = *(_OWORD *)&v15[12];
  CFTypeRef v8 = APSAudioTransportTimeCopyDebugDesc((uint64_t)v17);
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*DerivedStorage)
  {
    int v11 = -72332;
    APSLogErrorAt(0);
    int v10 = 0;
  }
  else
  {
    uint64_t v9 = malloc_type_calloc(1uLL, 0x78uLL, 0x10A004079E0F624uLL);
    int v10 = v9;
    if (v9)
    {
      void v9[8] = 0;
      int v11 = 0;
      *(void *)uint64_t v9 = CFRetain(v2);
      *(_OWORD *)(v10 + 13) = *(_OWORD *)v16;
      *((_OWORD *)v10 + 4) = *(_OWORD *)&v16[12];
      *(_OWORD *)(v10 + 21) = *(_OWORD *)v15;
      *((_OWORD *)v10 + 6) = *(_OWORD *)&v15[12];
      long long v12 = *MEMORY[0x1E4F1F9F8];
      *((void *)v10 + 3) = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
      v10[12] = v3;
      v10[20] = v4;
      *(_OWORD *)(v10 + 2) = v12;
      *((void *)v10 + 5) = v5;
      *((void *)v10 + 14) = v14;
    }
    else
    {
      APSLogErrorAt(0);
      int v11 = -72330;
    }
  }
  if (v7) {
    CFRelease(v7);
  }
  if (v8) {
    CFRelease(v8);
  }
  if (v5)
  {
    uint64_t v13 = CMBaseObjectGetDerivedStorage();
    uint64_t v20 = 0;
    if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    *(void *)int v17 = CFRetain(v2);
    *(void *)&v17[8] = v5;
    *(_DWORD *)&v17[16] = v3;
    *(_OWORD *)&v17[20] = *(_OWORD *)v16;
    *(_OWORD *)&v17[32] = *(_OWORD *)&v16[12];
    int v18 = v4;
    *(_OWORD *)int v19 = *(_OWORD *)v15;
    *(_OWORD *)&v19[12] = *(_OWORD *)&v15[12];
    LODWORD(v20) = v11;
    uint64_t v21 = v14;
    APSDispatchAsyncFHelper(*(NSObject **)(v13 + 8), (uint64_t)hoseSBARMock_callAudioEngineFlushWithinSampleRangeCompletionHandlerCaller, v17, 0x60uLL);
  }
  if (v10)
  {
    if (*(void *)v10) {
      CFRelease(*(CFTypeRef *)v10);
    }
    free(v10);
  }
  CFRelease(*(CFTypeRef *)a1);
}

void hoseSBARMock_callAudioEngineFlushWithinSampleRangeCompletionHandlerCaller(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(void (**)(CFTypeRef, uint64_t, _OWORD *, uint64_t, _OWORD *, uint64_t, uint64_t))(a1 + 8);
  uint64_t v4 = *(unsigned int *)(a1 + 16);
  uint64_t v5 = *(unsigned int *)(a1 + 48);
  uint64_t v6 = *(unsigned int *)(a1 + 80);
  uint64_t v7 = *(void *)(a1 + 88);
  v9[0] = *(_OWORD *)(a1 + 20);
  *(_OWORD *)((char *)v9 + 12) = *(_OWORD *)(a1 + 32);
  v8[0] = *(_OWORD *)(a1 + 52);
  *(_OWORD *)((char *)v8 + 12) = *(_OWORD *)(a1 + 64);
  v3(v2, v4, v9, v5, v8, v6, v7);
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBARMock_audioHoseFlush(const void *a1, int a2, _OWORD *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  CFTypeRef v13 = v11;
  int v14 = a2;
  *(_OWORD *)CFTypeRef v15 = *a3;
  *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)((char *)a3 + 12);
  uint64_t v16 = a4;
  uint64_t v17 = a5;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseFlushCallbackDispatchInternal, &v13, 0x38uLL);
  return 0;
}

void hoseSBARMock_audioHoseFlushCallbackDispatchInternal(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  uint64_t v5 = *(void *)(a1 + 40);
  uint64_t v4 = *(void *)(a1 + 48);
  *(_OWORD *)uint64_t v9 = *(_OWORD *)(a1 + 12);
  *(_OWORD *)&v9[12] = *(_OWORD *)(a1 + 24);
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*DerivedStorage)
  {
    APSLogErrorAt(0);
    int v7 = -72332;
    if (!v5) {
      goto LABEL_16;
    }
  }
  else
  {
    int v7 = 0;
    if (!v5) {
      goto LABEL_16;
    }
  }
  uint64_t v8 = CMBaseObjectGetDerivedStorage();
  uint64_t v13 = 0;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  v10[0] = CFRetain(v2);
  v10[1] = v5;
  int v11 = v3;
  *(_OWORD *)long long v12 = *(_OWORD *)v9;
  *(_OWORD *)&v12[12] = *(_OWORD *)&v9[12];
  LODWORD(v13) = v7;
  uint64_t v14 = v4;
  APSDispatchAsyncFHelper(*(NSObject **)(v8 + 8), (uint64_t)hoseSBARMock_callAudioHoseFlushCompletionHandlerCaller, v10, 0x40uLL);
LABEL_16:
  CFRelease(*(CFTypeRef *)a1);
}

void hoseSBARMock_callAudioHoseFlushCompletionHandlerCaller(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(void (**)(CFTypeRef, uint64_t, _OWORD *, uint64_t, uint64_t))(a1 + 8);
  uint64_t v4 = *(unsigned int *)(a1 + 16);
  uint64_t v5 = *(unsigned int *)(a1 + 48);
  uint64_t v6 = *(void *)(a1 + 56);
  v7[0] = *(_OWORD *)(a1 + 20);
  *(_OWORD *)((char *)v7 + 12) = *(_OWORD *)(a1 + 32);
  v3(v2, v4, v7, v5, v6);
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBARMock_audioHoseTimeAnnounce(const void *a1, int a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v11 = 0;
  if (a1) {
    CFTypeRef v7 = CFRetain(a1);
  }
  else {
    CFTypeRef v7 = 0;
  }
  CFTypeRef v10 = v7;
  LODWORD(v11) = a2;
  if (a3) {
    CFTypeRef v8 = CFRetain(a3);
  }
  else {
    CFTypeRef v8 = 0;
  }
  CFTypeRef v12 = v8;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_audioHoseTimeAnnounceDispatchInternal, &v10, 0x18uLL);
  return 0;
}

void hoseSBARMock_audioHoseTimeAnnounceDispatchInternal(uint64_t a1)
{
  CMBaseObjectGetDerivedStorage();
  if (*(void *)a1) {
    CFRelease(*(CFTypeRef *)a1);
  }
  CFTypeRef v2 = *(const void **)(a1 + 16);
  if (v2)
  {
    CFRelease(v2);
  }
}

uint64_t hoseSBARMock_audioHoseSendAudio(const void *a1, int a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a2 == 1734700576)
  {
    if (a1) {
      CFTypeRef v7 = CFRetain(a1);
    }
    else {
      CFTypeRef v7 = 0;
    }
    v10[0] = v7;
    if (a3) {
      CFTypeRef v8 = CFRetain(a3);
    }
    else {
      CFTypeRef v8 = 0;
    }
    v10[1] = v8;
    APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_hoseSendAudioDataDispatchInternal, v10, 0x10uLL);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960561;
  }
}

void hoseSBARMock_hoseSendAudioDataDispatchInternal(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFTypeRef v3 = *(CFTypeRef *)a1;
  CFTypeRef v2 = *(const void **)(a1 + 8);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  v6[0] = v3;
  v6[1] = v2;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!*(unsigned char *)DerivedStorage)
  {
    CFRetain(v3);
    CFRetain(v2);
    APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 48), (uint64_t)hoseSBARMock_sbarEnqueueSingleAudioBBuffDispatchFunction, v6, 0x10uLL);
  }
  CFRelease(*(CFTypeRef *)a1);
  uint64_t v5 = *(const void **)(a1 + 8);
  if (v5) {
    CFRelease(v5);
  }
}

void hoseSBARMock_sbarEnqueueSingleAudioBBuffDispatchFunction(uint64_t a1)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
LABEL_6:
    if (*(void *)a1) {
      CFRelease(*(CFTypeRef *)a1);
    }
    CFTypeRef v2 = *(const void **)(a1 + 8);
    if (v2)
    {
      CFRelease(v2);
    }
    return;
  }
  if (a1) {
    goto LABEL_6;
  }

  APSLogErrorAt(0);
}

__CFString *hoseSBARMock_audioHoseProtocolCopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"APSEndpointStreamAudioHoseSBARMock <APSEndpointStreamAudioHoseProtocol> on <%p>", a1);
  return Mutable;
}

uint64_t hoseSBARMock_SetProperty()
{
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*DerivedStorage)
  {
    APSLogErrorAt(0);
    return 4294894964;
  }
  else
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 30
      && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 4294954512;
  }
}

uint64_t hoseSBARMock_CopyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, CFNumberRef *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(unsigned char *)DerivedStorage)
  {
    APSLogErrorAt(0);
    return 4294894964;
  }
  if (!a2)
  {
    uint64_t v9 = 4294894965;
LABEL_35:
    APSLogErrorAt(0);
    return v9;
  }
  if (!a4)
  {
    uint64_t v9 = 4294894965;
    goto LABEL_35;
  }
  if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_AudioBufferSize"))
  {
    int valuePtr = 51200;
    CFNumberRef v8 = CFNumberCreate(a3, kCFNumberSInt32Type, &valuePtr);
    *a4 = v8;
    if (v8) {
      return 0;
    }
    APSLogErrorAt(0);
    return 4294894966;
  }
  if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_Name"))
  {
    CFTypeRef v10 = *(CFTypeRef *)(DerivedStorage + 16);
    if (!v10) {
      goto LABEL_25;
    }
    goto LABEL_24;
  }
  if (CFEqual(a2, (CFTypeRef)*MEMORY[0x1E4F21368]))
  {
    CFTypeRef v10 = *(CFTypeRef *)(DerivedStorage + 24);
    if (!v10) {
      goto LABEL_25;
    }
    goto LABEL_24;
  }
  if (CFEqual(a2, @"ClusterType"))
  {
    CFTypeRef v10 = *(CFTypeRef *)(DerivedStorage + 32);
    if (!v10) {
      goto LABEL_25;
    }
    goto LABEL_24;
  }
  if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_SupportsReceiverChoosesAnchor"))
  {
    uint64_t v11 = (CFTypeRef *)MEMORY[0x1E4F1CFD0];
    if (!*(unsigned char *)(DerivedStorage + 40)) {
      uint64_t v11 = (CFTypeRef *)MEMORY[0x1E4F1CFC8];
    }
    CFTypeRef v10 = *v11;
LABEL_24:
    CFTypeRef v10 = CFRetain(v10);
LABEL_25:
    uint64_t v9 = 0;
    *a4 = (CFNumberRef)v10;
    return v9;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return 4294954512;
}

__CFString *hoseSBARMock_CopyDebugDescription(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSEndpointStreamAudioHoseSBARMock %p '%@'>", a1, *(void *)(DerivedStorage + 16));
  return Mutable;
}

void hoseSBARMock_Finalize()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  hoseSBARMock_invalidateInternal();
  uint64_t v1 = *(const void **)(DerivedStorage + 16);
  if (v1)
  {
    CFRelease(v1);
  }
}

uint64_t hoseSBARMock_invalidateInternal()
{
  uint64_t result = CMBaseObjectGetDerivedStorage();
  uint64_t v1 = (unsigned char *)result;
  if (gLogCategory_APSEndpointStreamAudioHoseSBARMock <= 50)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBARMock != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
      uint64_t result = LogPrintF();
    }
  }
  *uint64_t v1 = 1;
  return result;
}

uint64_t hoseSBARMock_Invalidate(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(unsigned char *)DerivedStorage)
  {
    CFTypeRef v3 = *(NSObject **)(DerivedStorage + 48);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __hoseSBARMock_Invalidate_block_invoke;
    block[3] = &__block_descriptor_tmp_185;
    block[4] = a1;
    dispatch_sync(v3, block);
  }
  return 0;
}

uint64_t hoseSBARMock_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&hoseSBARMock_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

uint64_t APSEndpointStreamAudioHoseSBARMockInvalidate(uint64_t a1)
{
  if (!a1) {
    return 4294954516;
  }
  uint64_t v2 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v2) {
    uint64_t v3 = v2;
  }
  else {
    uint64_t v3 = 0;
  }
  uint64_t v5 = *(uint64_t (**)(uint64_t))(v3 + 24);
  if (!v5) {
    return 4294954514;
  }

  return v5(a1);
}

uint64_t APSPowerAssertionGetTypeID()
{
  if (APSPowerAssertionGetTypeID_once != -1) {
    dispatch_once(&APSPowerAssertionGetTypeID_once, &__block_literal_global_189);
  }
  return APSPowerAssertionGetTypeID_typeID;
}

uint64_t __APSPowerAssertionGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSPowerAssertionGetTypeID_typeID = result;
  return result;
}

void _PowerAssertionFinalize(uint64_t a1)
{
  IOPMAssertionID v2 = *(_DWORD *)(a1 + 48);
  if (v2) {
    IOPMAssertionRelease(v2);
  }
  IOPMAssertionID v3 = *(_DWORD *)(a1 + 56);
  if (v3) {
    IOPMAssertionRelease(v3);
  }
  uint64_t v4 = *(NSObject **)(a1 + 16);
  if (v4) {
    dispatch_release(v4);
  }
  uint64_t v5 = *(const void **)(a1 + 40);
  if (v5) {
    CFRelease(v5);
  }
  uint64_t v6 = *(const void **)(a1 + 64);
  if (v6)
  {
    CFRelease(v6);
  }
}

uint64_t APSPowerAssertionCreate(const __CFAllocator *a1, const void *a2, double a3)
{
  if (a3 < 1.0)
  {
    APSLogErrorAt(0);
    return 0;
  }
  if (APSPowerAssertionGetTypeID_once != -1) {
    dispatch_once(&APSPowerAssertionGetTypeID_once, &__block_literal_global_189);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  uint64_t v6 = Instance;
  if (!Instance)
  {
    APSLogErrorAt(0);
    return v6;
  }
  *(_OWORD *)(Instance + 16) = 0u;
  CFTypeRef v7 = (uint64_t *)(Instance + 16);
  *(_OWORD *)(Instance + 48) = 0u;
  *(void *)(Instance + 64) = 0;
  *(_OWORD *)(Instance + 32) = 0u;
  Suint64_t Int32 = FigCFNumberCreateSInt32();
  *(void *)(v6 + 24) = SInt32;
  if (!SInt32
    || (uint64_t v9 = FigCFNumberCreateSInt32(), (*(void *)(v6 + 32) = v9) == 0)
    || (uint64_t Float64 = FigCFNumberCreateFloat64(), (*(void *)(v6 + 40) = Float64) == 0)
    || (!a2 ? (CFTypeRef v11 = 0) : (CFTypeRef v11 = CFRetain(a2)),
        *(void *)(v6 + 64) = v11,
        (CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540])) == 0))
  {
    APSLogErrorAt(0);
    CFRelease((CFTypeRef)v6);
    return 0;
  }
  uint64_t v13 = Mutable;
  CFDictionarySetValue(Mutable, @"AssertType", @"PreventUserIdleSystemSleep");
  CFDictionarySetInt64();
  uint64_t v14 = (uint64_t)CFStringCreateWithFormat(a1, 0, @"%@.counted", a2);
  if (!v14) {
    goto LABEL_23;
  }
  CFTypeRef v15 = (const void *)v14;
  CFDictionarySetValue(v13, @"AssertName", (const void *)v14);
  CFRelease(v15);
  uint64_t v14 = IOPMAssertionCreateWithProperties(v13, (IOPMAssertionID *)(v6 + 56));
  if (v14) {
    goto LABEL_23;
  }
  uint64_t v14 = (uint64_t)CFStringCreateWithFormat(a1, 0, @"%@.timed", a2);
  if (!v14) {
    goto LABEL_23;
  }
  uint64_t v16 = (const void *)v14;
  CFDictionarySetValue(v13, @"AssertName", (const void *)v14);
  CFRelease(v16);
  CFDictionarySetValue(v13, @"TimeoutSeconds", *(const void **)(v6 + 40));
  CFDictionarySetValue(v13, @"TimeoutAction", @"TimeoutActionTurnOff");
  uint64_t v14 = IOPMAssertionCreateWithProperties(v13, (IOPMAssertionID *)(v6 + 48));
  if (v14 || (v14 = (uint64_t)dispatch_semaphore_create(1), (*CFTypeRef v7 = v14) == 0))
  {
LABEL_23:
    APSLogErrorAt(v14);
    CFRelease((CFTypeRef)v6);
    uint64_t v6 = 0;
  }
  CFRelease(v13);
  return v6;
}

intptr_t APSPowerAssertionRaiseTemporary(uint64_t a1)
{
  dispatch_semaphore_wait(*(dispatch_semaphore_t *)(a1 + 16), 0xFFFFFFFFFFFFFFFFLL);
  if (gLogCategory_APSPowerAssertion <= 50
    && (gLogCategory_APSPowerAssertion != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  IOPMAssertionSetProperty(*(_DWORD *)(a1 + 48), @"TimeoutSeconds", *(CFTypeRef *)(a1 + 40));
  IOPMAssertionSetProperty(*(_DWORD *)(a1 + 48), @"AssertLevel", *(CFTypeRef *)(a1 + 24));
  IOPMAssertionID v2 = *(NSObject **)(a1 + 16);

  return dispatch_semaphore_signal(v2);
}

intptr_t APSPowerAssertionRaise(uint64_t a1)
{
  dispatch_semaphore_wait(*(dispatch_semaphore_t *)(a1 + 16), 0xFFFFFFFFFFFFFFFFLL);
  int v2 = *(_DWORD *)(a1 + 52);
  *(_DWORD *)(a1 + 52) = v2 + 1;
  if (v2)
  {
    if (gLogCategory_APSPowerAssertion <= 50
      && (gLogCategory_APSPowerAssertion != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  else
  {
    if (gLogCategory_APSPowerAssertion <= 50
      && (gLogCategory_APSPowerAssertion != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    IOPMAssertionSetProperty(*(_DWORD *)(a1 + 56), @"AssertLevel", *(CFTypeRef *)(a1 + 24));
  }
  IOPMAssertionID v3 = *(NSObject **)(a1 + 16);

  return dispatch_semaphore_signal(v3);
}

intptr_t APSPowerAssertionRelease(uint64_t a1)
{
  dispatch_semaphore_wait(*(dispatch_semaphore_t *)(a1 + 16), 0xFFFFFFFFFFFFFFFFLL);
  int v2 = *(_DWORD *)(a1 + 52);
  if (v2 >= 1 && (*(_DWORD *)(a1 + 52) = v2 - 1, v2 == 1))
  {
    if (gLogCategory_APSPowerAssertion <= 50
      && (gLogCategory_APSPowerAssertion != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    IOPMAssertionSetProperty(*(_DWORD *)(a1 + 56), @"AssertLevel", *(CFTypeRef *)(a1 + 32));
  }
  else if (gLogCategory_APSPowerAssertion <= 50 {
         && (gLogCategory_APSPowerAssertion != -1 || _LogCategory_Initialize()))
  }
  {
    LogPrintF();
  }
  IOPMAssertionID v3 = *(NSObject **)(a1 + 16);

  return dispatch_semaphore_signal(v3);
}

uint64_t APCompressionTypeGetBufferSize(int a1, uint64_t a2)
{
  switch(a1)
  {
    case 1:
    case 4:
    case 8:
      return a2;
    case 2:
      a2 = iceil2();
      break;
    default:
      a2 = 0;
      break;
  }
  return a2;
}

uint64_t APCompressionTypeFillStreamDescription(int a1, uint64_t a2, unsigned int a3, int a4, int a5)
{
  switch(a1)
  {
    case 2:
      *(double *)a2 = (double)a3;
      *(_DWORD *)(a2 + 8) = 1634492771;
      if (a4 == 24) {
        int v7 = 3;
      }
      else {
        int v7 = 0;
      }
      if (a4 == 20) {
        int v8 = 2;
      }
      else {
        int v8 = v7;
      }
      if (a4 == 16) {
        int v5 = 1;
      }
      else {
        int v5 = v8;
      }
      int v6 = 352;
      goto LABEL_16;
    case 8:
      int v5 = 0;
      *(double *)a2 = (double)a3;
      *(_DWORD *)(a2 + 8) = 1633772389;
      int v6 = 480;
      goto LABEL_16;
    case 4:
      int v5 = 0;
      *(double *)a2 = (double)a3;
      *(_DWORD *)(a2 + 8) = 1633772320;
      int v6 = 1024;
LABEL_16:
      uint64_t result = 0;
      *(_DWORD *)(a2 + 12) = v5;
      *(_DWORD *)(a2 + 16) = 0;
      *(_DWORD *)(a2 + 20) = v6;
      *(_DWORD *)(a2 + 24) = 0;
      *(void *)(a2 + 32) = 0;
      *(_DWORD *)(a2 + 28) = a5;
      return result;
  }
  return 4294960561;
}

uint64_t APSAPAPExtensionConvertSbufTracerDictToBBuf(uint64_t a1, void *a2)
{
  unsigned int v9 = 0;
  CMBlockBufferRef blockBufferOut = 0;
  if (!a2)
  {
    APSLogErrorAt(0);
    IOPMAssertionID v3 = 0;
    int v7 = -6705;
LABEL_13:
    unsigned int v9 = v7;
    goto LABEL_10;
  }
  IOPMAssertionID v3 = malloc_type_malloc(0x14uLL, 0x1000040A86A77D5uLL);
  if (!v3)
  {
    int v7 = -6728;
    goto LABEL_13;
  }
  *IOPMAssertionID v3 = CFDictionaryGetInt64Ranged();
  if (!v9)
  {
    CFDictionaryGetCString();
    unsigned int v9 = CMBlockBufferCreateWithMemoryBlock((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v3, 0x14uLL, (CFAllocatorRef)*MEMORY[0x1E4F1CF90], 0, 0, 0x14uLL, 0, &blockBufferOut);
    if (blockBufferOut)
    {
      CFTypeRef v4 = CFRetain(blockBufferOut);
      CMBlockBufferRef v5 = blockBufferOut;
      *a2 = v4;
      if (v5) {
        CFRelease(v5);
      }
      IOPMAssertionID v3 = 0;
    }
    else
    {
      IOPMAssertionID v3 = 0;
      *a2 = 0;
    }
  }
LABEL_10:
  free(v3);
  return v9;
}

uint64_t APSAPAPExtensionConvertSbufTracerBBufToSbufTracerDict(OpaqueCMBlockBuffer *a1, CFTypeRef *a2)
{
  dataPointerOut = 0;
  if (a2 && (CMBlockBufferGetDataPointer(a1, 0, 0, 0, &dataPointerOut), CMBlockBufferGetDataLength(a1) == 20))
  {
    CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      int v6 = Mutable;
      Uuint64_t Int32 = FigCFNumberCreateUInt32();
      if (UInt32)
      {
        CFStringRef v8 = (const __CFString *)UInt32;
        CFStringRef v9 = CFStringCreateWithCString(v4, dataPointerOut + 4, 0x8000100u);
        if (v9)
        {
          CFStringRef v10 = v9;
          CFDictionarySetValue(v6, (const void *)*MEMORY[0x1E4F329C0], v8);
          CFDictionarySetValue(v6, (const void *)*MEMORY[0x1E4F329B8], v10);
          *a2 = CFRetain(v6);
          CFRelease(v8);
          CFStringRef v11 = v10;
        }
        else
        {
          APSLogErrorAt(0);
          CFStringRef v11 = v8;
        }
        CFRelease(v11);
      }
      else
      {
        APSLogErrorAt(0);
      }
      CFRelease(v6);
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSRTCReportingGetTypeID()
{
  if (gAPSRTCReportingInitOnce != -1) {
    dispatch_once_f(&gAPSRTCReportingInitOnce, 0, (dispatch_function_t)_APSRTCReportingGetTypeID);
  }
  return gAPSRTCReportingTypeID;
}

uint64_t _APSRTCReportingGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRTCReportingTypeID = result;
  return result;
}

void _APSRTCReportingFinalize(void *a1)
{
  if (gLogCategory_APSRTCReporting <= 50
    && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  int v2 = (const void *)a1[3];
  if (v2)
  {
    CFRelease(v2);
    a1[3] = 0;
  }
  IOPMAssertionID v3 = a1[2];
  if (v3)
  {
    dispatch_release(v3);
    a1[2] = 0;
  }
  CFAllocatorRef v4 = (const void *)a1[5];
  if (v4)
  {
    CFRelease(v4);
    a1[5] = 0;
  }
  uint64_t v5 = a1[4];
  if (v5)
  {
    if (apsrr_getWeakRefTable_once != -1) {
      dispatch_once(&apsrr_getWeakRefTable_once, &__block_literal_global_225);
    }
    uint64_t v6 = apsrr_getWeakRefTable_table;
    MEMORY[0x1F40DCD00](v6, v5);
  }
}

uint64_t __apsrr_getWeakRefTable_block_invoke()
{
  uint64_t result = FigCFWeakReferenceTableCreate();
  if (result)
  {
    if (gLogCategory_APSRTCReporting <= 90)
    {
      if (gLogCategory_APSRTCReporting != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
        uint64_t result = LogPrintF();
      }
    }
    __break(1u);
  }
  return result;
}

uint64_t APSRTCReportingCreateOrCopy(uint64_t a1, uint64_t a2, uint64_t a3, CFTypeRef *a4, _DWORD *a5)
{
  CFTypeRef cf = 0;
  uint32_t v17 = 0;
  if (!a4)
  {
    APSLogErrorAt(0);
    return 72301;
  }
  if (FigCFDictionaryGetCount()
    || CFPreferencesGetAppBooleanValue(@"useDynamicRTCSessionIDs", @"com.apple.airplay", 0))
  {
    uint64_t v10 = APSRTCReportingCreate(a1, a2, a3, &cf, &v17);
    if (!v10)
    {
      if (gLogCategory_APSRTCReporting <= 50
        && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      goto LABEL_16;
    }
    uint64_t v14 = v10;
    APSLogErrorAt(v10);
    CFTypeRef v13 = cf;
    if (!cf) {
      return v14;
    }
LABEL_21:
    CFRelease(v13);
    return v14;
  }
  uint64_t v28 = 0;
  uint64_t v29 = &v28;
  uint64_t v30 = 0x2020000000;
  int v31 = 0;
  uint64_t v24 = 0;
  uint64_t v25 = &v24;
  uint64_t v26 = 0x2020000000;
  int v27 = 0;
  uint64_t v20 = 0;
  uint64_t v21 = &v20;
  uint64_t v22 = 0x2020000000;
  uint64_t v23 = 0;
  CFStringRef v11 = CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"%@.%@", a1, a2);
  if (apsrr_initializeReporterStash_onceToken != -1) {
    dispatch_once(&apsrr_initializeReporterStash_onceToken, &__block_literal_global_71);
  }
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 3221225472;
  block[2] = __apsrr_copyOrCreateSharedReporterForClientAndService_block_invoke;
  block[3] = &unk_1E6897B78;
  block[4] = &v20;
  void block[5] = &v24;
  block[8] = a1;
  block[9] = a2;
  block[6] = &v28;
  block[7] = v11;
  dispatch_sync((dispatch_queue_t)gAPReporting_SharedAgentStashQueue, block);
  uint64_t v12 = *((unsigned int *)v29 + 6);
  if (!v12)
  {
    CFTypeRef v13 = (CFTypeRef)v21[3];
    CFTypeRef cf = v13;
    v21[3] = 0;
    uint32_t v17 = *((_DWORD *)v25 + 6);
    if (!v11) {
      goto LABEL_15;
    }
    goto LABEL_14;
  }
  APSLogErrorAt(v12);
  uint64_t v16 = (const void *)v21[3];
  if (v16) {
    CFRelease(v16);
  }
  CFTypeRef v13 = 0;
  if (v11) {
LABEL_14:
  }
    CFRelease(v11);
LABEL_15:
  uint64_t v14 = *((unsigned int *)v29 + 6);
  _Block_object_dispose(&v20, 8);
  _Block_object_dispose(&v24, 8);
  _Block_object_dispose(&v28, 8);
  if (v14)
  {
    APSLogErrorAt(v14);
    if (!v13) {
      return v14;
    }
    goto LABEL_21;
  }
LABEL_16:
  *a4 = cf;
  uint64_t v14 = 0;
  if (a5) {
    *a5 = v17;
  }
  return v14;
}

void sub_1D0BB58E8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20,uint64_t a21,uint64_t a22,uint64_t a23,uint64_t a24,uint64_t a25,uint64_t a26,char a27)
{
  _Block_object_dispose(&a27, 8);
  _Block_object_dispose((const void *)(v27 - 128), 8);
  _Block_object_dispose((const void *)(v27 - 96), 8);
  _Unwind_Resume(a1);
}

uint64_t APSRTCReportingCreate(uint64_t a1, uint64_t a2, uint64_t a3, CFTypeRef *a4, uint32_t *a5)
{
  uint64_t v28 = *MEMORY[0x1E4F143B8];
  if (CFPreferencesGetAppBooleanValue(@"useDynamicRTCSessionIDs", @"com.apple.airplay", 0)) {
    uint32_t v7 = arc4random();
  }
  else {
    uint32_t v7 = 1234;
  }
  uint64_t v26 = 0;
  pthread_once(&gAPReportingInitOnce, (void (*)(void))apsrr_RTCReportingInitOnce);
  if (!sRTCreportingFrameworkIsValid)
  {
    APSLogErrorAt(0);
    return 72302;
  }
  if (!a4)
  {
    APSLogErrorAt(0);
    return 72301;
  }
  if (!objc_msgSend((id)objc_msgSend(MEMORY[0x1E4F28B50], "mainBundle"), "bundleIdentifier")) {
    objc_msgSend((id)objc_msgSend(MEMORY[0x1E4F28F80], "processInfo"), "processName");
  }
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!Mutable)
  {
    uint64_t v21 = 72300;
    APSLogErrorAt(0);
    APSLogErrorAt(72300);
    return v21;
  }
  CFMutableDictionaryRef v9 = Mutable;
  FigCFDictionarySetValue();
  FigCFDictionarySetInt32();
  FigCFDictionarySetInt32();
  FigCFDictionarySetInt32();
  FigCFDictionarySetInt32();
  FigCFDictionarySetInt32();
  CFTypeRef v10 = CFRetain(v9);
  CFRelease(v9);
  uint64_t MutableCopy = FigCFDictionaryCreateMutableCopy();
  if (!MutableCopy)
  {
    uint64_t v21 = 72300;
    APSLogErrorAt(0);
    APSLogErrorAt(72300);
    CFTypeRef v13 = 0;
    goto LABEL_26;
  }
  uint64_t v12 = (const void *)MutableCopy;
  FigCFDictionarySetValue();
  FigCFDictionarySetValue();
  CFTypeRef v13 = CFRetain(v12);
  CFRelease(v12);
  if (!v13)
  {
    uint64_t v21 = 72300;
    APSLogErrorAt(0);
    goto LABEL_26;
  }
  if (gAPSRTCReportingInitOnce != -1) {
    dispatch_once_f(&gAPSRTCReportingInitOnce, 0, (dispatch_function_t)_APSRTCReportingGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    uint64_t v21 = 4294960568;
    goto LABEL_26;
  }
  CFTypeRef v15 = (void *)Instance;
  *(void *)(Instance + 48) = 0;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  SNPrintF();
  uint64_t Key = (uint64_t)dispatch_queue_create(label, 0);
  v15[2] = Key;
  if (Key)
  {
    uint64_t Key = (uint64_t)CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
    v15[5] = Key;
    if (Key)
    {
      if (apsrr_getWeakRefTable_once != -1) {
        dispatch_once(&apsrr_getWeakRefTable_once, &__block_literal_global_225);
      }
      uint64_t Key = FigCFWeakReferenceTableAddValueAndGetKey();
      if (!Key)
      {
        v15[4] = v26;
        uint64_t v17 = sRTCReportingAPI_InitWithSessionInfoDict(v10, v13, gFrameworkList, &__block_literal_global_14_238);
        void v15[3] = v17;
        if (v17)
        {
          v25[0] = MEMORY[0x1E4F143A8];
          v25[1] = 3221225472;
          v25[2] = __APSRTCReportingCreate_block_invoke_2;
          v25[3] = &__block_descriptor_48_e21_v16__0____CFString__8l;
          v25[4] = v15;
          v25[5] = 0;
          sRTCReportingAPI_SetMessageBlock(v17, v25);
          uint64_t v18 = v15[3];
          v24[0] = MEMORY[0x1E4F143A8];
          v24[1] = 3221225472;
          v24[2] = __APSRTCReportingCreate_block_invoke_3;
          v24[3] = &__block_descriptor_48_e20_v16__0____CFArray__8l;
          v24[4] = v26;
          v24[5] = v15;
          sRTCReportingAPI_StartConfiguration(v18, v24);
          CFRetain(v15);
          dispatch_time_t v19 = dispatch_time(0, 5000000000);
          uint64_t v20 = v15[2];
          block[0] = MEMORY[0x1E4F143A8];
          block[1] = 3221225472;
          block[2] = __APSRTCReportingCreate_block_invoke_4;
          block[3] = &__block_descriptor_40_e5_v8__0l;
          block[4] = v15;
          dispatch_after(v19, v20, block);
          if (gLogCategory_APSRTCReporting <= 40
            && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          uint64_t v21 = 0;
          *a4 = CFRetain(v15);
          *a5 = v7;
        }
        else
        {
          APSLogErrorAt(0);
          uint64_t v21 = 0;
        }
        goto LABEL_25;
      }
      uint64_t v21 = Key;
    }
    else
    {
      uint64_t v21 = 72300;
    }
  }
  else
  {
    uint64_t v21 = 72300;
  }
  APSLogErrorAt(Key);
LABEL_25:
  CFRelease(v15);
LABEL_26:
  if (v10) {
    CFRelease(v10);
  }
  if (v13) {
    CFRelease(v13);
  }
  return v21;
}

void __apsrr_copyOrCreateSharedReporterForClientAndService_block_invoke(void *a1)
{
  int v2 = (const void *)a1[7];
  uint64_t v3 = *(void *)(a1[4] + 8);
  uint64_t v18 = 0;
  dispatch_time_t v19 = &v18;
  uint64_t v20 = 0x2020000000;
  char v21 = 0;
  if (!CFDictionaryGetValue((CFDictionaryRef)gAPReporting_SharedAgentWeakReferences, v2)) {
    goto LABEL_12;
  }
  uint64_t v4 = FigCFWeakReferenceHolderCopyReferencedObject();
  uint64_t v5 = (const void *)v4;
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v6 = *(NSObject **)(v4 + 16);
  block[0] = (CFTypeRef)MEMORY[0x1E4F143A8];
  block[1] = (CFTypeRef)3221225472;
  block[2] = __apsrr_copySharedReportingForClientAndServiceInternal_block_invoke;
  block[3] = &unk_1E6897BA0;
  block[4] = &v18;
  void block[5] = v5;
  dispatch_sync(v6, block);
  if (*((unsigned char *)v19 + 24))
  {
    CFDictionaryRemoveValue((CFMutableDictionaryRef)gAPReporting_SharedAgentWeakReferences, v2);
    if (gLogCategory_APSRTCReporting <= 90
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFRelease(v5);
LABEL_12:
    _Block_object_dispose(&v18, 8);
    CFStringRef v8 = (const void *)a1[7];
    uint64_t v7 = a1[8];
    uint64_t v9 = a1[9];
    uint64_t v10 = *(void *)(a1[4] + 8);
    uint64_t v11 = *(void *)(a1[5] + 8);
    block[0] = 0;
    LODWORD(v18) = 0;
    uint64_t v12 = APSRTCReportingCreate(v7, v9, 0, block, (uint32_t *)&v18);
    if (v12)
    {
      int v16 = v12;
      APSLogErrorAt(v12);
    }
    else
    {
      CFTypeRef v13 = (const void *)FigCFWeakReferenceHolderCreateWithReferencedObject();
      if (v13)
      {
        uint64_t v14 = v13;
        CFDictionarySetValue((CFMutableDictionaryRef)gAPReporting_SharedAgentWeakReferences, v8, v13);
        int v15 = v18;
        FigCFDictionarySetInt32();
        *(CFTypeRef *)(v10 + 24) = block[0];
        block[0] = 0;
        *(_DWORD *)(v11 + 24) = v15;
        CFRelease(v14);
        int v16 = 0;
      }
      else
      {
        int v16 = 72300;
        APSLogErrorAt(0);
        APSSignalErrorAt(72300);
      }
    }
    if (block[0]) {
      CFRelease(block[0]);
    }
    *(_DWORD *)(*(void *)(a1[6] + 8) + 24) = v16;
    if (gLogCategory_APSRTCReporting <= 50
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_19;
    }
    return;
  }
  *(void *)(v3 + 24) = v5;
  FigCFDictionaryGetInt32IfPresent();
  _Block_object_dispose(&v18, 8);
  if (gLogCategory_APSRTCReporting <= 30
    && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
  {
LABEL_19:
    LogPrintF();
  }
}

void sub_1D0BB62F0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, ...)
{
  va_start(va, a13);
  _Block_object_dispose(va, 8);
  _Unwind_Resume(a1);
}

uint64_t __apsrr_copySharedReportingForClientAndServiceInternal_block_invoke(uint64_t result)
{
  *(unsigned char *)(*(void *)(*(void *)(result + 32) + 8) + 24) = *(unsigned char *)(*(void *)(result + 40) + 49);
  return result;
}

CFMutableDictionaryRef __apsrr_initializeReporterStash_block_invoke()
{
  gAPReporting_SharedAgentStashQueue = (uint64_t)dispatch_queue_create("APSRTCReportingStashQueue", 0);
  CFAllocatorRef v0 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t v1 = (const CFDictionaryKeyCallBacks *)MEMORY[0x1E4F1D530];
  int v2 = (const CFDictionaryValueCallBacks *)MEMORY[0x1E4F1D540];
  gAPReporting_SharedAgentWeakReferences = (uint64_t)CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  CFMutableDictionaryRef result = CFDictionaryCreateMutable(v0, 0, v1, v2);
  gAPReporting_SharedAgentSessionIDs = (uint64_t)result;
  return result;
}

uint64_t __APSRTCReportingCreate_block_invoke_2()
{
  if (gLogCategory_APSRTCReporting <= 40)
  {
    if (gLogCategory_APSRTCReporting != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

void __APSRTCReportingCreate_block_invoke_3()
{
  if (apsrr_getWeakRefTable_once != -1) {
    dispatch_once(&apsrr_getWeakRefTable_once, &__block_literal_global_225);
  }
  uint64_t v0 = FigCFWeakReferenceTableCopyValue();
  if (v0)
  {
    uint64_t v1 = (void *)v0;
    if (gLogCategory_APSRTCReporting <= 50
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    int v2 = v1[2];
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 3221225472;
    block[2] = __apsrr_setIsSetupToSendMsg_block_invoke;
    block[3] = &__block_descriptor_40_e5_v8__0l;
    block[4] = v1;
    dispatch_sync(v2, block);
    CFRelease(v1);
  }
  else if (gLogCategory_APSRTCReporting <= 50 {
         && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
  }
  {
    LogPrintF();
  }
}

void __APSRTCReportingCreate_block_invoke_4(uint64_t a1)
{
  apsrr_setReportingToDead(*(void *)(a1 + 32));
  int v2 = *(const void **)(a1 + 32);

  CFRelease(v2);
}

void apsrr_setReportingToDead(uint64_t a1)
{
  if (!*(unsigned char *)(a1 + 49) && !*(unsigned char *)(a1 + 48))
  {
    *(unsigned char *)(a1 + 49) = 1;
    if (gLogCategory_APSRTCReporting <= 90
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      CFArrayGetCount(*(CFArrayRef *)(a1 + 40));
      LogPrintF();
    }
    int v2 = *(__CFArray **)(a1 + 40);
    CFArrayRemoveAllValues(v2);
  }
}

void __apsrr_setIsSetupToSendMsg_block_invoke(uint64_t a1)
{
  uint64_t v1 = *(void *)(a1 + 32);
  if (*(unsigned char *)(v1 + 49))
  {
    if (gLogCategory_APSRTCReporting <= 60
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  else
  {
    *(unsigned char *)(v1 + 48) = 1;
    CFArrayGetCount(*(CFArrayRef *)(v1 + 40));
    CFArrayApplyBlock();
    CFArrayRemoveAllValues(*(CFMutableArrayRef *)(v1 + 40));
  }
}

void __apsrr_sendCachedMsgs_block_invoke(uint64_t a1, const __CFDictionary *a2)
{
  __int16 Int64 = CFDictionaryGetInt64();
  __int16 v5 = CFDictionaryGetInt64();
  CFArrayRef Value = CFDictionaryGetValue(a2, @"MsgPayload");
  uint64_t v7 = *(void **)(a1 + 32);

  apsrr_sendOneMsg(v7, Int64, v5, Value);
}

void apsrr_sendOneMsg(void *a1, __int16 a2, __int16 a3, CFTypeRef cf)
{
  if (a1 && sRTCreportingFrameworkIsValid && cf)
  {
    CFRetain(cf);
    CFRetain(a1);
    CFStringRef v8 = a1[2];
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 3221225472;
    block[2] = __apsrr_sendOneMsg_block_invoke;
    block[3] = &__block_descriptor_52_e5_v8__0l;
    __int16 v10 = a2;
    __int16 v11 = a3;
    block[4] = a1;
    void block[5] = cf;
    dispatch_async(v8, block);
  }
  else
  {
    APSLogErrorAt(0);
  }
}

void __apsrr_sendOneMsg_block_invoke(uint64_t a1)
{
  uint64_t v7 = 0;
  uint64_t v2 = *(void *)(*(void *)(a1 + 32) + 24);
  if (v2)
  {
    char v3 = sRTCReportingAPI_SendMessageWithError(v2, *(unsigned __int16 *)(a1 + 48), *(unsigned __int16 *)(a1 + 50), *(void *)(a1 + 40), &v7);
    if (gLogCategory_APSRTCReporting <= 40
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v4 = v7;
    if (v7) {
      char v5 = v3;
    }
    else {
      char v5 = 1;
    }
    if ((v5 & 1) == 0)
    {
      if (gLogCategory_APSRTCReporting > 90)
      {
LABEL_15:
        CFRelease(v4);
        goto LABEL_16;
      }
      if (gLogCategory_APSRTCReporting != -1 || (int v6 = _LogCategory_Initialize(), v4 = v7, v6))
      {
        LogPrintF();
        uint64_t v4 = v7;
      }
    }
    if (v4) {
      goto LABEL_15;
    }
  }
LABEL_16:
  CFRelease(*(CFTypeRef *)(a1 + 40));
  CFRelease(*(CFTypeRef *)(a1 + 32));
}

void *apsrr_RTCReportingInitOnce()
{
  uint64_t result = dlopen("/System/Library/PrivateFrameworks/RTCReporting.framework/RTCReporting", 1);
  if (result)
  {
    uint64_t v1 = result;
    gFrameworkList = (uint64_t)CFArrayCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const void **)&apsrr_RTCReportingInitOnce_frameworkList, 1, 0);
    sRTCReportingAPI_InitWithSessionInfo = (uint64_t)dlsym(v1, "RTCReportingInitWithSessionInfo");
    sRTCReportingAPI_InitWithSessionInfoDict = dlsym(v1, "RTCReportingInitWithSessionInfoDict");
    sRTCReportingAPI_StartConfiguration = dlsym(v1, "RTCReportingStartConfiguration");
    sRTCReportingAPI_FetchStatesWithUserInfo = (uint64_t)dlsym(v1, "RTCReportingFetchStatesWithUserInfo");
    sRTCReportingAPI_SetMessageBlock = dlsym(v1, "RTCReportingSetMessageBlock");
    sRTCReportingAPI_SendMessageWithError = (uint64_t (*)(void, void, void, void, void))dlsym(v1, "RTCReportingSendMessageWithError");
    sRTCReportingAPI_SendMessageWithDictionary = (uint64_t)dlsym(v1, "RTCReportingSendMessageWithDictionary");
    sRTCReportingAPI_UploadLogWithArray = (uint64_t)dlsym(v1, "RTCReportingUploadLogWithArray");
    uint64_t v2 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoClientBundleID");
    if (v2) {
      uint64_t v3 = *v2;
    }
    else {
      uint64_t v3 = 0;
    }
    sRTCReportingConfigParams_0 = v3;
    uint64_t v4 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoClientType");
    if (v4) {
      uint64_t v5 = *v4;
    }
    else {
      uint64_t v5 = 0;
    }
    sRTCReportingConfigParams_1 = v5;
    int v6 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoClientVersion");
    if (v6) {
      uint64_t v7 = *v6;
    }
    else {
      uint64_t v7 = 0;
    }
    sRTCReportingConfigParams_2 = v7;
    CFStringRef v8 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoSessionID");
    if (v8) {
      uint64_t v9 = *v8;
    }
    else {
      uint64_t v9 = 0;
    }
    sRTCReportingConfigParams_3 = v9;
    __int16 v10 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoBatchEvent");
    if (v10) {
      uint64_t v11 = *v10;
    }
    else {
      uint64_t v11 = 0;
    }
    sRTCReportingConfigParams_4 = v11;
    uint64_t v12 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoRequireUserInfo");
    if (v12) {
      uint64_t v13 = *v12;
    }
    else {
      uint64_t v13 = 0;
    }
    sRTCReportingConfigParams_5 = v13;
    uint64_t v14 = (uint64_t *)dlsym(v1, "kRTCReportingSessionInfoHierarchyToken");
    if (v14) {
      uint64_t v15 = *v14;
    }
    else {
      uint64_t v15 = 0;
    }
    sRTCReportingConfigParams_6 = v15;
    int v16 = (uint64_t *)dlsym(v1, "kRTCReportingUserInfoClientName");
    if (v16) {
      uint64_t v17 = *v16;
    }
    else {
      uint64_t v17 = 0;
    }
    sRTCReportingConfigParams_7 = v17;
    uint64_t v18 = (uint64_t *)dlsym(v1, "kRTCReportingUserInfoServiceName");
    if (v18) {
      uint64_t v19 = *v18;
    }
    else {
      uint64_t v19 = 0;
    }
    sRTCReportingConfigParams_8 = v19;
    uint64_t v20 = (uint64_t *)dlsym(v1, "kRTCReportingMessageParametersCategory");
    if (v20) {
      uint64_t v21 = *v20;
    }
    else {
      uint64_t v21 = 0;
    }
    sRTCReportingConfigParams_9 = v21;
    uint64_t v22 = (uint64_t *)dlsym(v1, "kRTCReportingMessageParametersFlag");
    if (v22) {
      uint64_t v23 = *v22;
    }
    else {
      uint64_t v23 = 0;
    }
    sRTCReportingConfigParams_10 = v23;
    uint64_t v24 = (uint64_t *)dlsym(v1, "kRTCReportingMessageParametersPayload");
    if (v24) {
      uint64_t v25 = *v24;
    }
    else {
      uint64_t v25 = 0;
    }
    sRTCReportingConfigParams_12 = v25;
    uint64_t result = dlsym(v1, "kRTCReportingMessageParametersType");
    if (result) {
      uint64_t v26 = *result;
    }
    else {
      uint64_t v26 = 0;
    }
    sRTCReportingConfigParams_11 = v26;
    if (sRTCReportingAPI_InitWithSessionInfo) {
      BOOL v27 = sRTCReportingAPI_InitWithSessionInfoDict == 0;
    }
    else {
      BOOL v27 = 1;
    }
    char v47 = !v27
       && sRTCReportingAPI_StartConfiguration != 0
       && sRTCReportingAPI_FetchStatesWithUserInfo != 0
       && sRTCReportingAPI_SetMessageBlock != 0
       && sRTCReportingAPI_SendMessageWithError != 0
       && sRTCReportingAPI_SendMessageWithDictionary != 0
       && sRTCReportingAPI_UploadLogWithArray != 0
       && sRTCReportingConfigParams_0 != 0
       && sRTCReportingConfigParams_1 != 0
       && sRTCReportingConfigParams_2 != 0
       && sRTCReportingConfigParams_3 != 0
       && sRTCReportingConfigParams_4 != 0
       && sRTCReportingConfigParams_5 != 0
       && sRTCReportingConfigParams_6 != 0
       && sRTCReportingConfigParams_8 != 0
       && sRTCReportingConfigParams_7 != 0
       && sRTCReportingConfigParams_9 != 0
       && sRTCReportingConfigParams_10 != 0
       && sRTCReportingConfigParams_12 != 0
       && v26 != 0;
    sRTCreportingFrameworkIsValid = v47;
    if (gLogCategory_APSRTCReporting <= 40)
    {
      if (gLogCategory_APSRTCReporting != -1) {
        return (void *)LogPrintF();
      }
      uint64_t result = (void *)_LogCategory_Initialize();
      if (result) {
        return (void *)LogPrintF();
      }
    }
  }
  else if (gLogCategory_APSRTCReporting <= 90)
  {
    if (gLogCategory_APSRTCReporting != -1 || (uint64_t result = (void *)_LogCategory_Initialize(), result))
    {
      return (void *)LogPrintF();
    }
  }
  return result;
}

uint64_t APSRTCReportingSendMsg(uint64_t a1, __int16 a2, __int16 a3, uint64_t a4)
{
  if (a1)
  {
    if (sRTCreportingFrameworkIsValid)
    {
      if (a4)
      {
        uint64_t v4 = *(NSObject **)(a1 + 16);
        block[0] = MEMORY[0x1E4F143A8];
        block[1] = 3221225472;
        block[2] = __APSRTCReportingSendMsg_block_invoke;
        block[3] = &__block_descriptor_52_e5_v8__0l;
        __int16 v8 = a2;
        __int16 v9 = a3;
        block[4] = a1;
        void block[5] = a4;
        dispatch_sync(v4, block);
        return 0;
      }
      else
      {
        APSLogErrorAt(0);
        return 72303;
      }
    }
    else
    {
      APSLogErrorAt(0);
      return 72302;
    }
  }
  else
  {
    uint64_t v5 = 72301;
    APSLogErrorAt(0);
  }
  return v5;
}

void __APSRTCReportingSendMsg_block_invoke(uint64_t a1)
{
  uint64_t v1 = *(void *)(a1 + 32);
  if (*(unsigned char *)(v1 + 49))
  {
    if (gLogCategory_APSRTCReporting <= 60
      && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  else
  {
    __int16 v2 = *(_WORD *)(a1 + 48);
    __int16 v3 = *(_WORD *)(a1 + 50);
    uint64_t v4 = *(const void **)(a1 + 40);
    if (*(unsigned char *)(v1 + 48))
    {
      uint64_t v5 = *(void **)(a1 + 32);
      apsrr_sendOneMsg(v5, v2, v3, v4);
      return;
    }
    if (!sRTCreportingFrameworkIsValid || !v4) {
      goto LABEL_27;
    }
    if (CFArrayGetCount(*(CFArrayRef *)(v1 + 40)) >= 30)
    {
      if (gLogCategory_APSRTCReporting <= 50
        && (gLogCategory_APSRTCReporting != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      apsrr_setReportingToDead(v1);
      return;
    }
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      CFMutableDictionaryRef v7 = Mutable;
      FigCFDictionarySetInt32();
      FigCFDictionarySetInt32();
      FigCFDictionarySetValue();
      CFArrayAppendValue(*(CFMutableArrayRef *)(v1 + 40), v7);
      CFRelease(v7);
    }
    else
    {
LABEL_27:
      APSLogErrorAt(0);
    }
  }
}

uint64_t APSCryptorGetNull()
{
  if (APSCryptorGetNull_sAPSCryptorNullOnce != -1) {
    dispatch_once_f(&APSCryptorGetNull_sAPSCryptorNullOnce, &APSCryptorGetNull_sAPSCryptorNull, (dispatch_function_t)nullCryptor_create);
  }
  return APSCryptorGetNull_sAPSCryptorNull;
}

void nullCryptor_create(CFTypeRef *a1)
{
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  uint64_t v2 = CMDerivedObjectCreate();
  if (v2) {
    APSLogErrorAt(v2);
  }
  else {
    *a1 = CFRetain(0);
  }
}

uint64_t nullCryptor_DecryptMessage(int a1, int a2, int a3, void *__src, size_t __len, void *__dst, size_t a7, void *a8)
{
  if (a7 < __len)
  {
    APSLogErrorAt(0);
    return 4294895585;
  }
  else
  {
    if (__dst != __src) {
      memmove(__dst, __src, __len);
    }
    uint64_t result = 0;
    if (a8) {
      *a8 = __len;
    }
  }
  return result;
}

uint64_t nullCryptor_EncryptMessage(int a1, int a2, int a3, void *__src, size_t __len, void *__dst, size_t a7)
{
  if (a7 < __len)
  {
    APSLogErrorAt(0);
    return 4294895585;
  }
  else
  {
    if (__dst != __src) {
      memmove(__dst, __src, __len);
    }
    return 0;
  }
}

uint64_t nullCryptor_GetEncryptionOverheadLength()
{
  return 0;
}

__CFString *nullCryptor_CopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSCryptorNull %p>", a1);
  return Mutable;
}

uint64_t APSIOReporterGetTypeID()
{
  if (gAPSIOReporterInitOnce != -1) {
    dispatch_once_f(&gAPSIOReporterInitOnce, 0, (dispatch_function_t)_APSIOReporterGetTypeID);
  }
  return gAPSIOReporterTypeID;
}

uint64_t _APSIOReporterGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSIOReporterTypeID = result;
  return result;
}

void _APSIOReporterFinalize(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 16);
  if (v2) {
    CFRelease(v2);
  }
  __int16 v3 = *(const void **)(a1 + 24);
  if (v3) {
    CFRelease(v3);
  }
  if (gLogCategory_APSIOReporter <= 50 && (gLogCategory_APSIOReporter != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
}

uint64_t APSIOReporterCreate(void *a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (gAPSIOReporterInitOnce != -1) {
    dispatch_once_f(&gAPSIOReporterInitOnce, 0, (dispatch_function_t)_APSIOReporterGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  __int16 v3 = (void *)Instance;
  if (Instance)
  {
    *(void *)(Instance + 16) = 0;
    *(void *)(Instance + 24) = 0;
    CFMutableDictionaryRef v4 = IOServiceNameMatching("CCLogPipe");
    if (!v4)
    {
      APSLogErrorAt(0);
      if (gLogCategory_APSIOReporter <= 90
        && (gLogCategory_APSIOReporter != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      CFMutableDictionaryRef v5 = 0;
      int v6 = 0;
      goto LABEL_33;
    }
    CFMutableDictionaryRef v5 = v4;
    int v6 = (const void *)IOReportCopyChannelsForDrivers();
    if (v6)
    {
      uint64_t Subscription = IOReportCreateSubscription();
      v3[2] = Subscription;
      if (Subscription)
      {
        if (gLogCategory_APSIOReporter <= 50
          && (gLogCategory_APSIOReporter != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v8 = 0;
        *a1 = v3;
        __int16 v3 = 0;
        goto LABEL_13;
      }
      APSLogErrorAt(0);
      if (gLogCategory_APSIOReporter > 90
        || gLogCategory_APSIOReporter == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_33;
      }
    }
    else
    {
      APSLogErrorAt(0);
      if (gLogCategory_APSIOReporter > 90
        || gLogCategory_APSIOReporter == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_33;
      }
    }
    LogPrintF();
LABEL_33:
    uint64_t v8 = 4294960534;
    goto LABEL_13;
  }
  APSLogErrorAt(0);
  CFMutableDictionaryRef v5 = 0;
  int v6 = 0;
  uint64_t v8 = 4294960568;
LABEL_13:
  if (v3) {
    CFRelease(v3);
  }
  if (v5) {
    CFRelease(v5);
  }
  if (v6) {
    CFRelease(v6);
  }
  return v8;
}

uint64_t APSIOReporterGetCoreCaptureCount(uint64_t a1, void *a2)
{
  CFTypeRef v11 = 0;
  uint64_t v7 = 0;
  uint64_t v8 = &v7;
  uint64_t v9 = 0x2000000000;
  uint64_t v10 = 0;
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    Samples = 0;
    uint64_t v5 = 4294960591;
    goto LABEL_11;
  }
  Samples = (const void *)IOReportCreateSamples();
  if (Samples) {
    BOOL v4 = v11 == 0;
  }
  else {
    BOOL v4 = 0;
  }
  if (v4)
  {
    if ((IOReportSelectChannelsInGroup() & 1) == 0 && !v11)
    {
      IOReportIterate();
      uint64_t v5 = 0;
      *a2 = v8[3];
      goto LABEL_11;
    }
    APSLogErrorAt(0);
    if (gLogCategory_APSIOReporter > 90 || gLogCategory_APSIOReporter == -1 && !_LogCategory_Initialize()) {
      goto LABEL_26;
    }
  }
  else
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSIOReporter > 90 || gLogCategory_APSIOReporter == -1 && !_LogCategory_Initialize()) {
      goto LABEL_26;
    }
  }
  LogPrintF();
LABEL_26:
  uint64_t v5 = 4294960534;
LABEL_11:
  if (v11) {
    CFRelease(v11);
  }
  if (Samples) {
    CFRelease(Samples);
  }
  _Block_object_dispose(&v7, 8);
  return v5;
}

uint64_t __APSIOReporterGetCoreCaptureCount_block_invoke(uint64_t a1)
{
  IntegerCFArrayRef Value = IOReportSimpleGetIntegerValue();
  CFStringRef SubGroup = (const __CFString *)IOReportChannelGetSubGroup();
  uint64_t ChannelName = IOReportChannelGetChannelName();
  if (SubGroup)
  {
    CFStringRef v5 = (const __CFString *)ChannelName;
    if (CFEqual(SubGroup, @"Pipe DriverLogs")
      && v5
      && CFStringHasSuffix(v5, @"Capture Requests"))
    {
      *(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = IntegerValue;
    }
  }
  return 0;
}

double APSDataSetStatisticsInit(uint64_t a1, int a2)
{
  double result = 0.0;
  *(_OWORD *)(a1 + 48) = 0u;
  *(_OWORD *)(a1 + 36) = 0u;
  *(_OWORD *)(a1 + 20) = 0u;
  *(_OWORD *)(a1 + 4) = 0u;
  *(_DWORD *)a1 = a2;
  return result;
}

double APSDataSetStatisticsAddValue(uint64_t a1, unsigned int *a2, double result)
{
  switch(*(_DWORD *)a1)
  {
    case 0:
      unsigned int v3 = *a2;
      *(_DWORD *)(a1 + 8) = *a2;
      if (v3 > *(_DWORD *)(a1 + 16)) {
        *(_DWORD *)(a1 + 16) = v3;
      }
      if (v3 < *(_DWORD *)(a1 + 24)) {
        *(_DWORD *)(a1 + 24) = v3;
      }
      double v4 = (double)v3;
      goto LABEL_22;
    case 1:
      int v5 = *a2;
      *(_DWORD *)(a1 + 8) = *a2;
      if (v5 > *(_DWORD *)(a1 + 16)) {
        *(_DWORD *)(a1 + 16) = v5;
      }
      if (v5 < *(_DWORD *)(a1 + 24)) {
        *(_DWORD *)(a1 + 24) = v5;
      }
      double v4 = (double)v5;
      goto LABEL_22;
    case 2:
      unint64_t v6 = *(void *)a2;
      *(void *)(a1 + 8) = *(void *)a2;
      if (v6 > *(void *)(a1 + 16)) {
        *(void *)(a1 + 16) = v6;
      }
      if (v6 < *(void *)(a1 + 24)) {
        *(void *)(a1 + 24) = v6;
      }
      double v4 = (double)v6;
      goto LABEL_22;
    case 3:
      uint64_t v7 = *(void *)a2;
      *(void *)(a1 + 8) = *(void *)a2;
      if (v7 > *(void *)(a1 + 16)) {
        *(void *)(a1 + 16) = v7;
      }
      if (v7 < *(void *)(a1 + 24)) {
        *(void *)(a1 + 24) = v7;
      }
      double v4 = (double)v7;
LABEL_22:
      int v8 = *(_DWORD *)(a1 + 56) + 1;
      double v9 = *(double *)(a1 + 40);
      double v10 = (double)v8;
      double v11 = *(double *)(a1 + 32) + (v4 - *(double *)(a1 + 32)) / (double)v8;
      *(_DWORD *)(a1 + 56) = v8;
      goto LABEL_28;
    case 4:
      double v4 = *(double *)a2;
      *(void *)(a1 + 8) = *(void *)a2;
      if (v4 > *(double *)(a1 + 16)) {
        *(double *)(a1 + 16) = v4;
      }
      if (v4 < *(double *)(a1 + 24)) {
        *(double *)(a1 + 24) = v4;
      }
      int v12 = *(_DWORD *)(a1 + 56) + 1;
      *(_DWORD *)(a1 + 56) = v12;
      double v9 = *(double *)(a1 + 40);
      double v10 = (double)v12;
      double v11 = *(double *)(a1 + 32) + (v4 - *(double *)(a1 + 32)) / (double)v12;
LABEL_28:
      double v13 = v9 + (v4 - v11) * (v4 - v11);
      *(double *)(a1 + 32) = v11;
      *(double *)(a1 + 40) = v13;
      double result = sqrt(v13 / v10);
      *(double *)(a1 + 48) = result;
      break;
    default:
      return result;
  }
  return result;
}

uint64_t APSBadgingFormatInfoCopyBadgeType(const opaqueCMFormatDescription *a1, const opaqueCMFormatDescription *a2, void *a3)
{
  uint64_t v22 = 0;
  StreamBasicDescription = 0;
  uint64_t v20 = 0;
  uint64_t v21 = 0;
  size_t v18 = 0;
  size_t sizeOut = 0;
  if (!a3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t v4 = 0;
  if (a1 && a2)
  {
    if (CMAudioFormatDescriptionGetRichestDecodableFormatAndChannelLayout())
    {
      StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(a1);
      ChannelLayout = CMAudioFormatDescriptionGetChannelLayout(a1, &sizeOut);
      uint64_t v21 = ChannelLayout;
    }
    else
    {
      ChannelLayout = v21;
    }
    uint64_t v4 = 0;
    if (ChannelLayout && StreamBasicDescription)
    {
      if (CMAudioFormatDescriptionGetRichestDecodableFormatAndChannelLayout())
      {
        uint64_t v22 = CMAudioFormatDescriptionGetStreamBasicDescription(a2);
        int v8 = CMAudioFormatDescriptionGetChannelLayout(a2, &v18);
        uint64_t v20 = v8;
      }
      else
      {
        int v8 = v20;
      }
      uint64_t v4 = 0;
      if (v8)
      {
        if (v22)
        {
          int mFormatID = StreamBasicDescription->mFormatID;
          if (mFormatID > 1885547314)
          {
            if (mFormatID > 1902469938)
            {
              if (mFormatID <= 2053319474)
              {
                int v12 = 1902469939;
                goto LABEL_28;
              }
              if (mFormatID == 2053464883) {
                goto LABEL_37;
              }
              int v11 = 2053319475;
            }
            else
            {
              if (mFormatID <= 1902207794)
              {
                if (mFormatID != 1885547315)
                {
                  int v10 = 1885692723;
                  goto LABEL_36;
                }
                goto LABEL_42;
              }
              if (mFormatID == 1902207795) {
                goto LABEL_37;
              }
              int v11 = 1902324531;
            }
          }
          else if (mFormatID > 1667575090)
          {
            if (mFormatID > 1700998450)
            {
              if (mFormatID == 1700998451) {
                goto LABEL_37;
              }
              int v10 = 1885430579;
              goto LABEL_36;
            }
            if (mFormatID == 1667575091) {
              goto LABEL_37;
            }
            int v11 = 1700997939;
          }
          else
          {
            if (mFormatID <= 1667326770)
            {
              if (mFormatID != 1633889587)
              {
                int v10 = 1667312947;
                goto LABEL_36;
              }
LABEL_37:
              if (v22->mChannelsPerFrame > 2)
              {
                double v13 = @"DolbyAudio";
LABEL_51:
                CFTypeRef v16 = CFRetain(v13);
                uint64_t v4 = 0;
                *a3 = v16;
                return v4;
              }
LABEL_47:
              if (StreamBasicDescription->mChannelsPerFrame < 3 || v22->mChannelsPerFrame <= 2) {
                double v13 = @"Stereo";
              }
              else {
                double v13 = @"Surround";
              }
              goto LABEL_51;
            }
            if (mFormatID == 1667326771) {
              goto LABEL_37;
            }
            int v11 = 1667574579;
          }
          if (mFormatID != v11) {
            goto LABEL_47;
          }
LABEL_42:
          if (v22->mChannelsPerFrame >= 3)
          {
            int mChannelLayoutTag = v8->mChannelLayoutTag;
            double v13 = @"DolbyAtmos";
            if (mChannelLayoutTag <= 12713991)
            {
              if (mChannelLayoutTag == 12582924) {
                goto LABEL_51;
              }
              int v15 = 12648464;
            }
            else
            {
              if (mChannelLayoutTag == 12713992 || mChannelLayoutTag == 12779530) {
                goto LABEL_51;
              }
              int v15 = 12845066;
            }
            if (mChannelLayoutTag == v15) {
              goto LABEL_51;
            }
          }
          if (mFormatID <= 1885692722)
          {
            if (mFormatID > 1700998450)
            {
              int v10 = 1885547315;
            }
            else
            {
              if (mFormatID == 1667574579) {
                goto LABEL_37;
              }
              int v10 = 1700997939;
            }
LABEL_36:
            if (mFormatID != v10) {
              goto LABEL_47;
            }
            goto LABEL_37;
          }
          if (mFormatID <= 1902469938)
          {
            int v10 = 1902324531;
            goto LABEL_36;
          }
          int v12 = 2053319475;
LABEL_28:
          if (mFormatID == v12) {
            goto LABEL_37;
          }
          int v10 = 2053202739;
          goto LABEL_36;
        }
      }
    }
  }
  return v4;
}

uint64_t APSBadgingConvertAPSourceFormatToMATSourceFormat(uint64_t result, uint64_t *a2)
{
  if (result)
  {
    if (a2)
    {
      Suint64_t Int32 = FigCFNumberCreateSInt32();
      double result = 0;
      *a2 = SInt32;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960591;
    }
  }
  return result;
}

uint64_t APSBadgingFormatInfoTypeGetString(int a1, __CFString **a2)
{
  if (a2)
  {
    *a2 = 0;
    uint64_t v2 = 4294960561;
    switch(a1)
    {
      case 1:
        uint64_t v2 = 0;
        unsigned int v3 = @"Stereo";
        goto LABEL_8;
      case 2:
        uint64_t v2 = 0;
        unsigned int v3 = @"Surround";
        goto LABEL_8;
      case 3:
        uint64_t v2 = 0;
        unsigned int v3 = @"AppleSpatialAudio";
        goto LABEL_8;
      case 5:
        uint64_t v2 = 0;
        unsigned int v3 = @"DolbyAudio";
        goto LABEL_8;
      case 6:
        uint64_t v2 = 0;
        unsigned int v3 = @"DolbyAtmos";
LABEL_8:
        *a2 = v3;
        break;
      default:
        return v2;
    }
  }
  else
  {
    uint64_t v2 = 4294960591;
    APSLogErrorAt(4294960591);
  }
  return v2;
}

uint64_t APSBadgingFormatInfoTypeGetEnum(const void *a1, int *a2)
{
  if (!a1)
  {
    uint64_t v4 = 4294960591;
LABEL_18:
    APSLogErrorAt(4294960591);
    return v4;
  }
  if (!a2)
  {
    uint64_t v4 = 4294960591;
    goto LABEL_18;
  }
  *a2 = 0;
  if (CFEqual(a1, @"DolbyAtmos"))
  {
    uint64_t v4 = 0;
    int v5 = 6;
  }
  else if (CFEqual(a1, @"DolbyAudio"))
  {
    uint64_t v4 = 0;
    int v5 = 5;
  }
  else if (CFEqual(a1, @"AppleSpatialAudio"))
  {
    uint64_t v4 = 0;
    int v5 = 3;
  }
  else if (CFEqual(a1, @"Surround"))
  {
    uint64_t v4 = 0;
    int v5 = 2;
  }
  else
  {
    if (!CFEqual(a1, @"Stereo")) {
      return 4294960561;
    }
    uint64_t v4 = 0;
    int v5 = 1;
  }
  *a2 = v5;
  return v4;
}

uint64_t APSBadgingFormatInfoTypeResolve(uint64_t result, int a2)
{
  if ((result - 5) < 2 && a2 == 0) {
    return 3;
  }
  else {
    return result;
  }
}

uint64_t APSAPAPEncodeUIntV(unint64_t a1, uint64_t (*a2)(uint64_t *))
{
  uint64_t v10 = *MEMORY[0x1E4F143B8];
  __int16 v9 = 0;
  uint64_t v8 = 0;
  if (!a2) {
    return 4294960591;
  }
  unsigned int v4 = ilog2_64();
  uint64_t v6 = (v4 * (unsigned __int128)0x2492492492492493uLL) >> 64;
  do
  {
    *((unsigned char *)&v8 + v6) = a1 | 0x80;
    a1 >>= 7;
    --v6;
  }
  while (v6 != -1);
  uint64_t v5 = ((((v4 - ((unsigned __int16)(37 * v4) >> 8)) >> 1) + ((37 * v4) >> 8)) >> 2) + 1;
  *((unsigned char *)&v8 + v5 - 1) &= ~0x80u;
  return a2(&v8);
}

uint64_t APSAPAPGetEncodeSizeUIntV(uint64_t a1, void *a2)
{
  if (!a2) {
    return 4294960591;
  }
  int v3 = ilog2_64();
  uint64_t result = 0;
  *a2 = ((((v3 - ((unsigned __int16)(37 * v3) >> 8)) >> 1) + ((37 * v3) >> 8)) >> 2) + 1;
  return result;
}

uint64_t APSAPAPDecodeUIntV(uint64_t (*a1)(char *, uint64_t, uint64_t), uint64_t a2, unint64_t *a3)
{
  char v9 = 0;
  if (!a1) {
    return 4294960591;
  }
  unint64_t v6 = 0;
  while (1)
  {
    uint64_t result = a1(&v9, 1, a2);
    if (result) {
      break;
    }
    unint64_t v8 = v9 & 0x7F | (v6 << 7);
    if (v8 < v6) {
      return 4294960586;
    }
    unint64_t v6 = v9 & 0x7F | (v6 << 7);
    if ((v9 & 0x80000000) == 0)
    {
      uint64_t result = 0;
      if (a3) {
        *a3 = v8;
      }
      return result;
    }
  }
  return result;
}

uint64_t APSAPAPEncodeHeader(uint64_t a1, unsigned int a2, uint64_t (*a3)(unint64_t *, uint64_t, uint64_t), uint64_t a4)
{
  uint64_t result = 4294960591;
  if (a3 && !HIBYTE(a2) && (*(_DWORD *)(a1 + 12) & 0x1D) == 1)
  {
    unint64_t v7 = bswap64(*(void *)a1);
    int v6 = *(_DWORD *)(a1 + 8);
    char v8 = HIBYTE(v6);
    char v9 = BYTE2(v6);
    char v10 = BYTE1(v6);
    char v11 = v6;
    char v12 = BYTE2(a2);
    char v13 = BYTE1(a2);
    char v14 = a2;
    return a3(&v7, 15, a4);
  }
  return result;
}

uint64_t APSAPAPDecodeHeader(uint64_t (*a1)(unint64_t *, uint64_t, uint64_t), uint64_t a2, uint64_t a3, int *a4)
{
  uint64_t v13 = *MEMORY[0x1E4F143B8];
  memset(v10, 0, 15);
  if (!a1) {
    return 4294960591;
  }
  uint64_t result = a1(v10, 15, a2);
  if (!result)
  {
    CMTimeMake(&v9, bswap64(v10[0]), bswap32(v10[1]));
    CMTimeValue value = v9.value;
    CMTimeFlags flags = v9.flags;
    CMTimeScale timescale = v9.timescale;
    if (v9.flags)
    {
      if (a3)
      {
        CMTimeEpoch epoch = v9.epoch;
        *(void *)a3 = value;
        *(_DWORD *)(a3 + 8) = timescale;
        *(_DWORD *)(a3 + 12) = flags;
        *(void *)(a3 + 16) = epoch;
      }
      uint64_t result = 0;
      if (a4) {
        *a4 = (BYTE4(v10[1]) << 16) | (BYTE5(v10[1]) << 8) | BYTE6(v10[1]);
      }
    }
    else
    {
      return 4294960559;
    }
  }
  return result;
}

uint64_t APSAPAPEncodeExtension(uint64_t (*a1)(uint64_t (*)(unint64_t a1, unint64_t a2, uint64_t a3, uint64_t a4), void *, uint64_t), uint64_t a2, uint64_t (*a3)(uint64_t *), uint64_t a4)
{
  v8[0] = 0;
  v8[1] = a3;
  _OWORD v8[2] = a4;
  v7[0] = _APSAPAPProtectedWriteCallback;
  v7[1] = v8;
  uint64_t result = 4294960591;
  if (a1)
  {
    if (a3)
    {
      uint64_t result = a1(_APSAPAPEncodeExtensionItemCallback, v7, a2);
      if (!result)
      {
        uint64_t result = LODWORD(v8[0]);
        if (!LODWORD(v8[0])) {
          return APSAPAPEncodeUIntV(0, a3);
        }
      }
    }
  }
  return result;
}

uint64_t _APSAPAPEncodeExtensionItemCallback(unint64_t a1, unint64_t a2, uint64_t a3, uint64_t a4)
{
  if (!a1) {
    return 4294960591;
  }
  uint64_t result = APSAPAPEncodeUIntV(a1, *(uint64_t (**)(uint64_t *))a4);
  if (!result)
  {
    uint64_t result = APSAPAPEncodeUIntV(a2, *(uint64_t (**)(uint64_t *))a4);
    if (!result)
    {
      CMTime v9 = *(uint64_t (**)(uint64_t *))a4;
      uint64_t v8 = *(void *)(a4 + 8);
      return ((uint64_t (*)(uint64_t, unint64_t, uint64_t))v9)(a3, a2, v8);
    }
  }
  return result;
}

uint64_t _APSAPAPProtectedWriteCallback(uint64_t a1, uint64_t a2, uint64_t (**a3)(uint64_t))
{
  uint64_t result = *(unsigned int *)a3;
  if (a2)
  {
    if (!result)
    {
      uint64_t result = a3[1](a1);
      *(_DWORD *)a3 = result;
    }
  }
  return result;
}

uint64_t APSAPAPDecodeExtension(uint64_t (*a1)(char *, uint64_t, uint64_t), uint64_t a2, uint64_t (*a3)(unint64_t))
{
  uint64_t result = 4294960591;
  if (a1 && a3)
  {
LABEL_3:
    unint64_t v7 = 0;
    char v14 = 0;
    while (1)
    {
      uint64_t result = a1(&v14, 1, a2);
      if (result) {
        break;
      }
      unint64_t v8 = v14 & 0x7F | (v7 << 7);
      if (v8 < v7) {
        return 4294960586;
      }
      unint64_t v7 = v14 & 0x7F | (v7 << 7);
      if ((v14 & 0x80000000) == 0)
      {
        if (!v8) {
          return 0;
        }
        unint64_t v9 = 0;
        char v14 = 0;
        while (1)
        {
          uint64_t result = a1(&v14, 1, a2);
          if (result) {
            return result;
          }
          unint64_t v10 = v14 & 0x7F | (v9 << 7);
          if (v10 < v9) {
            return 4294960586;
          }
          unint64_t v9 = v14 & 0x7F | (v9 << 7);
          if ((v14 & 0x80000000) == 0)
          {
            uint64_t v13 = v10;
            uint64_t result = a3(v8);
            if (result) {
              return result;
            }
            if (v13)
            {
              uint64_t result = a1(0, v13, a2);
              if (result) {
                return result;
              }
            }
            goto LABEL_3;
          }
        }
      }
    }
  }
  return result;
}

uint64_t _APSAPAPProtectedReadCallback(uint64_t a1, unint64_t a2, unsigned int *a3)
{
  uint64_t result = *a3;
  if (a2 && !result)
  {
    if (*((void *)a3 + 3) < a2)
    {
      uint64_t result = 4294960546;
      *a3 = -6750;
    }
    else
    {
      uint64_t result = (*((uint64_t (**)(uint64_t, unint64_t, void))a3 + 1))(a1, a2, *((void *)a3 + 2));
      *a3 = result;
      if (!result) {
        *((void *)a3 + 3) -= a2;
      }
    }
  }
  return result;
}

uint64_t APSAPAPGetEncodeSizeExtension(uint64_t (*a1)(void, uint64_t *, uint64_t), uint64_t a2, void *a3)
{
  uint64_t v6 = 0;
  uint64_t v7 = 0;
  uint64_t result = 4294960591;
  if (a1)
  {
    if (a3)
    {
      uint64_t result = a1(_APSAPAPGetEncodeSizeExtensionItemCallback, &v6, a2);
      if (!result)
      {
        uint64_t result = v6;
        if (!v6) {
          *a3 = v7 + 1;
        }
      }
    }
  }
  return result;
}

uint64_t _APSAPAPGetEncodeSizeExtensionItemCallback(uint64_t a1, uint64_t a2, unsigned int *a3)
{
  uint64_t v3 = *a3;
  if (!v3)
  {
    int v6 = ilog2_64();
    unsigned int v7 = (((v6 - ((unsigned __int16)(37 * v6) >> 8)) >> 1) + ((37 * v6) >> 8)) >> 2;
    *a3 = 0;
    int v8 = ilog2_64();
    *a3 = 0;
    *((void *)a3 + 1) += a2
                         + v7
                         + ((((v8 - ((unsigned __int16)(37 * v8) >> 8)) >> 1)
                           + ((37 * v8) >> 8)) >> 2)
                         + 2;
  }
  return v3;
}

uint64_t APSAPAPEncode(long long *a1, unsigned int a2, uint64_t (*a3)(uint64_t (*)(unint64_t a1, unint64_t a2, uint64_t a3, uint64_t a4), void *, uint64_t), uint64_t a4, uint64_t (*a5)(void, void *, uint64_t), uint64_t a6, uint64_t (*a7)(unint64_t *, uint64_t, uint64_t), uint64_t a8)
{
  v18[0] = 0;
  v18[1] = a7;
  v18[2] = a8;
  uint64_t result = 4294960591;
  if (a7)
  {
    if (a5)
    {
      if (a3)
      {
        if (!HIBYTE(a2) && (*((_DWORD *)a1 + 3) & 0x1D) == 1)
        {
          long long v16 = *a1;
          uint64_t v17 = *((void *)a1 + 2);
          uint64_t result = APSAPAPEncodeHeader((uint64_t)&v16, a2, a7, a8);
          if (!result)
          {
            uint64_t result = APSAPAPEncodeExtension(a3, a4, (uint64_t (*)(uint64_t *))a7, a8);
            if (!result)
            {
              LODWORD(result) = a5(_APSAPAPProtectedWriteCallback, v18, a6);
              if (result) {
                return result;
              }
              else {
                return LODWORD(v18[0]);
              }
            }
          }
        }
      }
    }
  }
  return result;
}

uint64_t APSAPAPDecode(unint64_t a1, uint64_t (*a2)(void, unint64_t, uint64_t), uint64_t a3, uint64_t a4, int *a5, uint64_t (*a6)(unint64_t), uint64_t a7, uint64_t (*a8)(unint64_t, uint64_t (*)(uint64_t a1, unint64_t a2, unsigned int *a3), uint64_t *, uint64_t), uint64_t a9)
{
  uint64_t v13 = 0;
  char v14 = a2;
  uint64_t v15 = a3;
  unint64_t v16 = a1;
  if (a1 < 0x10) {
    return 4294960553;
  }
  uint64_t result = 4294960591;
  if (a2)
  {
    if (a6)
    {
      if (a8)
      {
        uint64_t result = APSAPAPDecodeHeader((uint64_t (*)(unint64_t *, uint64_t, uint64_t))_APSAPAPProtectedReadCallback, (uint64_t)&v13, a4, a5);
        if (!result)
        {
          uint64_t result = APSAPAPDecodeExtension((uint64_t (*)(char *, uint64_t, uint64_t))_APSAPAPProtectedReadCallback, (uint64_t)&v13, a6);
          if (!result)
          {
            uint64_t result = a8(v16, _APSAPAPProtectedReadCallback, &v13, a9);
            if (!result)
            {
              uint64_t result = v13;
              if (!v13)
              {
                unint64_t v12 = v16;
                if (v16)
                {
                  uint64_t result = v14(0, v16, v15);
                  if (result) {
                    return result;
                  }
                  if (v16 != v12) {
                    return 4294960587;
                  }
                }
                return 0;
              }
            }
          }
        }
      }
    }
  }
  return result;
}

uint64_t APSAPAPGetEncodeSize(uint64_t (*a1)(void, uint64_t *, uint64_t), uint64_t a2, uint64_t a3, void *a4)
{
  uint64_t v7 = 0;
  uint64_t v8 = 0;
  if (!a1) {
    return 4294960591;
  }
  uint64_t result = a1(_APSAPAPGetEncodeSizeExtensionItemCallback, &v7, a2);
  if (!result)
  {
    uint64_t result = v7;
    if (!v7) {
      *a4 = a3 + v8 + 16;
    }
  }
  return result;
}

uint64_t APSCFRealTimeReadableGetTypeID()
{
  if (gAPSCFRealTimeReadableInitOnce != -1) {
    dispatch_once_f(&gAPSCFRealTimeReadableInitOnce, 0, (dispatch_function_t)_APSCFRealTimeReadableGetTypeID);
  }
  return gAPSCFRealTimeReadableTypeID;
}

uint64_t _APSCFRealTimeReadableGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSCFRealTimeReadableTypeID = result;
  return result;
}

void _APSCFRealTimeReadableFinalize()
{
  _X0 = 0;
  _X1 = 0;
  __asm { CASPA           X0, X1, X0, X1, [X8]; cf }
  if (_X0) {
    CFRelease(_X0);
  }
}

uint64_t APSCFRealTimeReadableCreate(const void *a1, CFTypeRef *a2)
{
  if (a2)
  {
    if (gAPSCFRealTimeReadableInitOnce != -1) {
      dispatch_once_f(&gAPSCFRealTimeReadableInitOnce, 0, (dispatch_function_t)_APSCFRealTimeReadableGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v5 = (void *)Instance;
      *(void *)(Instance + 16) = 0;
      *(void *)(Instance + 24) = 0;
      if (a1) {
        CFTypeRef v6 = CFRetain(a1);
      }
      else {
        CFTypeRef v6 = 0;
      }
      v5[2] = v6;
      void v5[3] = 0;
      *a2 = CFRetain(v5);
      CFRelease(v5);
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSCFRealTimeReadableCopyValue(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    _X2 = 0;
    _X3 = 0;
    __asm { CASP            X2, X3, X2, X3, [X8] }
    do
    {
      _X22 = _X2;
      _X0 = _X2;
      _X3 = 0;
      __asm { CASPA           X2, X3, X0, X1, [X8] }
    }
    while (_X2 != _X0);
    if (_X22) {
      CFTypeRef v14 = CFRetain(_X22);
    }
    else {
      CFTypeRef v14 = 0;
    }
    uint64_t v15 = *(void *)(a1 + 16);
    do
    {
      _X5 = *(void *)(a1 + 24);
      __asm { CASP            X4, X5, X22, X23, [X8] }
      _ZF = _X4 == v15;
      uint64_t v15 = _X4;
    }
    while (!_ZF);
    uint64_t v18 = 0;
    *a2 = v14;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v18;
}

uint64_t APSCFRealTimeReadableSetValue(uint64_t a1, CFTypeRef cf)
{
  if (a1)
  {
    _X20 = 0;
    _X21 = 0;
    __asm { CASP            X20, X21, X20, X21, [X24] }
    if (cf) {
      _X22 = CFRetain(cf);
    }
    else {
      _X22 = 0;
    }
    _X2 = _X22;
    _X1 = 0;
    __asm { CASPL           X0, X1, X2, X3, [X24] }
    while (_X0 != _X20)
    {
      _X20 = _X0;
      pthread_yield_np();
      _X1 = 0;
      __asm { CASPL           X0, X1, X22, X23, [X8] }
    }
    if (_X20) {
      CFRelease(_X20);
    }
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSSignalErrorAt(uint64_t a1)
{
  if (gLogCategory_APSLogUtils <= 90 && (gLogCategory_APSLogUtils != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return a1;
}

uint64_t APSLogErrorAt(uint64_t result)
{
  if (result)
  {
    if (gLogCategory_APSLogUtils <= 90)
    {
      if (gLogCategory_APSLogUtils != -1) {
        return LogPrintF();
      }
      uint64_t result = _LogCategory_Initialize();
      if (result) {
        return LogPrintF();
      }
    }
  }
  else if (gLogCategory_APSLogUtils <= 90)
  {
    if (gLogCategory_APSLogUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

char *APSSGetGasGaugeStringForPercent(int a1)
{
  LODWORD(v1) = (int)(((double)a1 / -100.0 + 1.0) * 50.0) & ~((int)(((double)a1 / -100.0 + 1.0) * 50.0) >> 31);
  if (v1 >= 0x32) {
    uint64_t v1 = 50;
  }
  else {
    uint64_t v1 = v1;
  }
  return &asc_1D0C24773[v1];
}

void *APSLogUtilsGetAsyncCnxLogCategory()
{
  return &APSLogUtilsGetAsyncCnxLogCategory_gLogCategory_AsyncCnx;
}

void *APSLogUtilsGetHTTPClientCoreLogCategory()
{
  return &APSLogUtilsGetHTTPClientCoreLogCategory_gLogCategory_HTTPClientCore;
}

uint64_t APSDispatchDataCreateWithBlockBuffer(OpaqueCMBlockBuffer *a1, const __CFAllocator *a2, NSObject **a3)
{
  dataPointerOut = 0;
  size_t lengthAtOffsetOut = 0;
  uint64_t v3 = 4294960591;
  if (a1 && a3)
  {
    size_t DataLength = CMBlockBufferGetDataLength(a1);
    if (DataLength)
    {
      size_t v8 = DataLength;
      if (CMBlockBufferIsRangeContiguous(a1, 0, DataLength) || (const __CFAllocator *)*MEMORY[0x1E4F1CFA0] == a2)
      {
        size_t v12 = 0;
        uint64_t v13 = 0;
        destructor[0] = MEMORY[0x1E4F143A8];
        destructor[1] = 0x40000000;
        destructor[2] = __APSDispatchDataCreateWithBlockBuffer_block_invoke_2;
        destructor[3] = &__block_descriptor_tmp_1;
        destructor[4] = a1;
        while (1)
        {
          uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, v12, &lengthAtOffsetOut, 0, &dataPointerOut);
          if (DataPointer) {
            break;
          }
          dispatch_data_t v15 = dispatch_data_create(dataPointerOut, lengthAtOffsetOut, 0, destructor);
          if (!v15)
          {
            uint64_t v3 = 4294960568;
            if (!v13) {
              return v3;
            }
LABEL_18:
            dispatch_release(v13);
            return v3;
          }
          char v11 = v15;
          CFRetain(a1);
          if (v13)
          {
            dispatch_data_t concat = dispatch_data_create_concat(v13, v11);
            dispatch_release(v13);
            dispatch_release(v11);
            char v11 = concat;
            if (!concat) {
              return 4294960568;
            }
          }
          v12 += lengthAtOffsetOut;
          uint64_t v13 = v11;
          if (v12 >= v8) {
            goto LABEL_22;
          }
        }
        uint64_t v3 = DataPointer;
        if (!v13) {
          return v3;
        }
        goto LABEL_18;
      }
      unint64_t v9 = CFAllocatorAllocate(a2, v8, 0);
      if (!v9) {
        return 4294960568;
      }
      unint64_t v10 = v9;
      uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 0, v8, v9);
      if (v3) {
        goto LABEL_8;
      }
      v20[0] = MEMORY[0x1E4F143A8];
      v20[1] = 0x40000000;
      v20[2] = __APSDispatchDataCreateWithBlockBuffer_block_invoke;
      v20[3] = &__block_descriptor_tmp_344;
      v20[4] = a2;
      v20[5] = v10;
      dispatch_data_t v17 = dispatch_data_create(v10, v8, 0, v20);
      if (!v17)
      {
        uint64_t v3 = 4294960568;
LABEL_8:
        CFAllocatorDeallocate(a2, v10);
        return v3;
      }
      char v11 = v17;
      if (a2) {
        CFRetain(a2);
      }
    }
    else
    {
      char v11 = MEMORY[0x1E4F14410];
      dispatch_retain(MEMORY[0x1E4F14410]);
    }
LABEL_22:
    dispatch_retain(v11);
    *a3 = v11;
    dispatch_release(v11);
    return 0;
  }
  return v3;
}

void __APSDispatchDataCreateWithBlockBuffer_block_invoke(uint64_t a1)
{
  CFAllocatorDeallocate(*(CFAllocatorRef *)(a1 + 32), *(void **)(a1 + 40));
  uint64_t v2 = *(const void **)(a1 + 32);
  if (v2)
  {
    CFRelease(v2);
  }
}

void __APSDispatchDataCreateWithBlockBuffer_block_invoke_2(uint64_t a1)
{
}

uint64_t APSDispatchDataCopyBytes(NSObject *a1, size_t a2, size_t a3, uint64_t a4)
{
  v12[0] = 0;
  v12[1] = v12;
  _OWORD v12[2] = 0x2000000000;
  v12[3] = 0;
  uint64_t v4 = 4294960591;
  if (a1)
  {
    if (a4)
    {
      size_t size = dispatch_data_get_size(a1);
      if (size >= a3 && size - a3 >= a2)
      {
        if (a3)
        {
          v11[0] = MEMORY[0x1E4F143A8];
          v11[1] = 0x40000000;
          _OWORD v11[2] = __APSDispatchDataCopyBytes_block_invoke;
          v11[3] = &unk_1E6897C58;
          v11[4] = v12;
          v11[5] = a2;
          v11[6] = a3;
          v11[7] = a4;
          dispatch_data_apply(a1, v11);
        }
        uint64_t v4 = 0;
      }
    }
  }
  _Block_object_dispose(v12, 8);
  return v4;
}

BOOL __APSDispatchDataCopyBytes_block_invoke(void *a1, uint64_t a2, unint64_t a3, uint64_t a4, unint64_t a5)
{
  unint64_t v6 = a1[5];
  BOOL v7 = v6 >= a3;
  unint64_t v8 = v6 - a3;
  if (!v7) {
    unint64_t v8 = 0;
  }
  if (a5 > v8)
  {
    uint64_t v9 = *(void *)(*(void *)(a1[4] + 8) + 24);
    if (a5 - v8 >= a1[6] - v9) {
      size_t v10 = a1[6] - v9;
    }
    else {
      size_t v10 = a5 - v8;
    }
    memcpy((void *)(a1[7] + v9), (const void *)(a4 + v8), v10);
    *(void *)(*(void *)(a1[4] + 8) + 24) += v10;
  }
  return *(void *)(*(void *)(a1[4] + 8) + 24) < a1[6];
}

uint64_t APSEndpointStreamAudioHoseRegistrarProtocolGetProtocolID()
{
  return sAPSEndpointStreamAudioHoseRegistrarProtocolID;
}

uint64_t registerAPSEndpointStreamAudioHoseRegistrarProtocolType()
{
  return MEMORY[0x1F40DC660](&sAPSEndpointStreamAudioHoseRegistrarProtocolDesc, 0, &sAPSEndpointStreamAudioHoseRegistrarProtocolID);
}

uint64_t APSEndpointStreamAudioHoseProtocolGetProtocolID()
{
  return sAPSEndpointStreamAudioHoseProtocolID;
}

uint64_t registerAPSEndpointStreamAudioHoseProtocolType()
{
  return MEMORY[0x1F40DC660](&sAPSEndpointStreamAudioHoseProtocolDesc, 0, &sAPSEndpointStreamAudioHoseProtocolID);
}

uint64_t APSEndpointStreamAudioHoseSendAudioBatchSlow(uint64_t a1, uint64_t a2, CFArrayRef theArray)
{
  uint64_t v3 = 4294894965;
  if (a1 && theArray)
  {
    CFIndex Count = CFArrayGetCount(theArray);
    if (Count < 1)
    {
      return 0;
    }
    else
    {
      CFIndex v8 = Count;
      CFIndex v9 = 0;
      while (1)
      {
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v9);
        if (!ValueAtIndex) {
          break;
        }
        char v11 = ValueAtIndex;
        CFTypeID v12 = CFGetTypeID(ValueAtIndex);
        if (v12 != CMBlockBufferGetTypeID()) {
          break;
        }
        pthread_once(&APSEndpointStreamAudioHoseProtocolGetProtocolID_sRegisterAPSEndpointStreamAudioHoseProtocolTypeOnce, (void (*)(void))registerAPSEndpointStreamAudioHoseProtocolType);
        uint64_t ProtocolVTable = CMBaseObjectGetProtocolVTable();
        if (!ProtocolVTable) {
          return 4294954508;
        }
        uint64_t v14 = *(void *)(ProtocolVTable + 16);
        if (!v14) {
          return 4294954508;
        }
        dispatch_data_t v15 = *(uint64_t (**)(uint64_t, uint64_t, const void *))(v14 + 8);
        if (!v15) {
          return 4294954514;
        }
        uint64_t v16 = v15(a1, a2, v11);
        if (v16) {
          return v16;
        }
        if (v8 == ++v9) {
          return 0;
        }
      }
    }
  }
  return v3;
}

uint64_t APSThreadSafeSetGetTypeID()
{
  if (gAPSThreadSafeSetInitOnce != -1) {
    dispatch_once_f(&gAPSThreadSafeSetInitOnce, 0, (dispatch_function_t)_APSThreadSafeSetGetTypeID);
  }
  return gAPSThreadSafeSetTypeID;
}

uint64_t _APSThreadSafeSetGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSThreadSafeSetTypeID = result;
  return result;
}

uint64_t _APSThreadSafeSetFinalize(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 24);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 24) = 0;
  }

  return FigSimpleMutexDestroy();
}

uint64_t APSThreadSafeSetCreate(CFTypeRef *a1)
{
  if (!a1) {
    return 4294960591;
  }
  if (gAPSThreadSafeSetInitOnce != -1) {
    dispatch_once_f(&gAPSThreadSafeSetInitOnce, 0, (dispatch_function_t)_APSThreadSafeSetGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance) {
    return 4294960568;
  }
  uint64_t v3 = (void *)Instance;
  *(void *)(Instance + 16) = 0;
  *(void *)(Instance + 24) = 0;
  uint64_t v4 = FigSimpleMutexCreate();
  v3[2] = v4;
  if (v4)
  {
    CFMutableSetRef Mutable = CFSetCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D548]);
    v3[3] = Mutable;
    if (Mutable)
    {
      uint64_t v6 = 0;
      *a1 = CFRetain(v3);
    }
    else
    {
      uint64_t v6 = 4294954510;
    }
  }
  else
  {
    uint64_t v6 = 4294960568;
  }
  CFRelease(v3);
  return v6;
}

uint64_t APSThreadSafeSetSetValue(uint64_t a1, const void *a2)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  CFSetSetValue(*(CFMutableSetRef *)(a1 + 24), a2);
  uint64_t v4 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v4);
}

uint64_t APSThreadSafeSetRemoveValue(uint64_t a1, const void *a2)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  CFSetRemoveValue(*(CFMutableSetRef *)(a1 + 24), a2);
  uint64_t v4 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v4);
}

CFIndex APSThreadSafeSetGetCount(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  CFIndex Count = CFSetGetCount(*(CFSetRef *)(a1 + 24));
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return Count;
}

uint64_t APSRingBufferFlushControllerInit(unint64_t *a1)
{
  if (!a1) {
    return 4294960591;
  }
  uint64_t result = 0;
  atomic_store(0, a1);
  return result;
}

uint64_t APSRingBufferFlushControllerPrepareForFlush(uint64_t *a1, uint64_t a2)
{
  if (!a1) {
    return 4294960591;
  }
  uint64_t result = 0;
  *a1 = *(unsigned int *)(a2 + 28) | 0x100000000;
  return result;
}

uint64_t APSRingBufferFlushControllerFlush@<X0>(unsigned int *a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X8>)
{
  if (!a1) {
    return 4294960591;
  }
  __swp(a3, a1);
  if ((a3 & 0xFF00000000) == 0) {
    LODWORD(a3) = *(_DWORD *)(a2 + 28);
  }
  uint64_t result = 0;
  *(_DWORD *)(a2 + 24) = a3;
  return result;
}

uint64_t APSNetworkClockNTPServerCreate(uint64_t a1, uint64_t a2, void *a3)
{
  CFTypeRef cf = 0;
  uint64_t v4 = ntpClock_createCommon(a1, a2, &cf);
  uint64_t v5 = v4;
  if (v4)
  {
    APSLogErrorAt(v4);
    if (cf) {
      CFRelease(cf);
    }
  }
  else
  {
    CFTypeRef v6 = cf;
    *(unsigned char *)(CMBaseObjectGetDerivedStorage() + 24) = 1;
    NTPClockSetListenPort();
    *a3 = v6;
  }
  return v5;
}

uint64_t ntpClock_createCommon(uint64_t a1, uint64_t a2, void *a3)
{
  if (APSNetworkClockGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSNetworkClockGetClassID_sRegisterOnce, &APSNetworkClockGetClassID_sClassID, (dispatch_function_t)networkClock_registerBaseClass);
  }
  uint64_t Mutable = CMDerivedObjectCreate();
  if (Mutable)
  {
    uint64_t v6 = Mutable;
LABEL_18:
    APSLogErrorAt(Mutable);
    return v6;
  }
  uint64_t DerivedStorage = (void *)CMBaseObjectGetDerivedStorage();
  uint64_t Mutable = FigSimpleMutexCreate();
  *uint64_t DerivedStorage = Mutable;
  if (!Mutable)
  {
    uint64_t v6 = 4294895326;
    goto LABEL_18;
  }
  uint64_t Mutable = (uint64_t)CFSetCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0);
  DerivedStorage[2] = Mutable;
  if (!Mutable)
  {
    uint64_t v6 = 4294895326;
    goto LABEL_18;
  }
  uint64_t Mutable = NTPClockCreate();
  if (Mutable)
  {
    uint64_t v6 = Mutable;
    goto LABEL_18;
  }
  if ((int)SNPrintF() <= 0)
  {
    APSLogErrorAt(0);
    return 4294895322;
  }
  else
  {
    NTPClockSetEpoch();
    NTPClockSetP2P();
    NTPClockSetThreadName();
    NTPClockSetThreadPriority();
    if (gLogCategory_APSNetworkClockNTP <= 50
      && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v6 = 0;
    *a3 = 0;
  }
  return v6;
}

uint64_t ntpClock_ClearLocalPeerInfo()
{
  return 0;
}

uint64_t ntpClock_StopForClient(uint64_t a1, const void *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  if (ntpClock_isStarted())
  {
    if (!a2)
    {
      APSLogErrorAt(0);
      uint64_t v5 = 4294895325;
      goto LABEL_14;
    }
    if (CFSetContainsValue(*(CFSetRef *)(DerivedStorage + 16), a2))
    {
      CFIndex Count = CFSetGetCount(*(CFSetRef *)(DerivedStorage + 16));
      CFSetRemoveValue(*(CFMutableSetRef *)(DerivedStorage + 16), a2);
      if (gLogCategory_APSNetworkClockNTP <= 50
        && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
      {
        CFSetGetCount(*(CFSetRef *)(DerivedStorage + 16));
        LogPrintF();
      }
      if (Count == 1)
      {
        NTPClockStop();
        if (gLogCategory_APSNetworkClockNTP <= 50
          && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
    }
  }
  uint64_t v5 = 0;
LABEL_14:
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v5;
}

BOOL ntpClock_isStarted()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexCheckIsLockedOnThisThread();
  return CFSetGetCount(*(CFSetRef *)(DerivedStorage + 16)) != 0;
}

uint64_t ntpClock_StartForClient(uint64_t a1, const void *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  if (!a2)
  {
    APSLogErrorAt(0);
    uint64_t v4 = 4294895325;
    goto LABEL_22;
  }
  if (CFSetContainsValue(*(CFSetRef *)(DerivedStorage + 16), a2)) {
    goto LABEL_12;
  }
  if (!CFSetGetCount(*(CFSetRef *)(DerivedStorage + 16)))
  {
    uint64_t v4 = *(unsigned int *)(DerivedStorage + 28);
    if (v4)
    {
      if (gLogCategory_APSNetworkClockNTP <= 60
        && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
    else
    {
      if (*(unsigned char *)(DerivedStorage + 24)) {
        uint64_t started = NTPClockStartServer();
      }
      else {
        uint64_t started = NTPClockStartClient();
      }
      uint64_t v4 = started;
      if (!started)
      {
        if (gLogCategory_APSNetworkClockNTP <= 50
          && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        goto LABEL_4;
      }
    }
    APSLogErrorAt(v4);
    goto LABEL_22;
  }
LABEL_4:
  CFSetAddValue(*(CFMutableSetRef *)(DerivedStorage + 16), a2);
  if (gLogCategory_APSNetworkClockNTP <= 50
    && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
  {
    CFSetGetCount(*(CFSetRef *)(DerivedStorage + 16));
    LogPrintF();
  }
LABEL_12:
  uint64_t v4 = 0;
LABEL_22:
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v4;
}

uint64_t ntpClock_SetOrUpdateLocalPeerInfo()
{
  return 0;
}

uint64_t ntpClock_CopyInitialSerializablePeerList()
{
  return 0;
}

uint64_t ntpClock_CopySerializablePeerListForPeer()
{
  return 0;
}

uint64_t ntpClock_SetPeers()
{
  return 0;
}

uint64_t ntpClock_RemovePeer()
{
  return 0;
}

uint64_t ntpClock_AddOrUpdatePeer()
{
  return 0;
}

uint64_t ntpClock_ConvertNetworkTimeToUpTicks(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  BOOL isStarted = ntpClock_isStarted();
  if (isStarted)
  {
    if (*(unsigned char *)(DerivedStorage + 24)) {
      uint64_t UpTicksNearSynchronizedNTPTime = NTPtoUpTicks();
    }
    else {
      uint64_t UpTicksNearSynchronizedNTPTime = NTPClockGetUpTicksNearSynchronizedNTPTime();
    }
    uint64_t v7 = 0;
    *a3 = UpTicksNearSynchronizedNTPTime;
  }
  else
  {
    APSLogErrorAt(isStarted);
    uint64_t v7 = 4294895323;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v7;
}

uint64_t ntpClock_ConvertUpTicksToNetworkTime(uint64_t a1, uint64_t a2, void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  BOOL isStarted = ntpClock_isStarted();
  if (isStarted)
  {
    if (*(unsigned char *)(DerivedStorage + 24)) {
      uint64_t SynchronizedNTPTimeNearUpTicks = UpTicksToNTP();
    }
    else {
      uint64_t SynchronizedNTPTimeNearUpTicks = NTPClockGetSynchronizedNTPTimeNearUpTicks();
    }
    uint64_t v7 = 0;
    *a3 = 0;
    a3[1] = SynchronizedNTPTimeNearUpTicks << 32;
    a3[2] = HIDWORD(SynchronizedNTPTimeNearUpTicks);
  }
  else
  {
    APSLogErrorAt(isStarted);
    uint64_t v7 = 4294895323;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v7;
}

uint64_t ntpClock_GetSynchronizedNetworkTime(uint64_t a1, void *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  BOOL isStarted = ntpClock_isStarted();
  if (isStarted)
  {
    if (*(unsigned char *)(DerivedStorage + 24))
    {
      mach_absolute_time();
      uint64_t SynchronizedNTPTime = UpTicksToNTP();
    }
    else
    {
      uint64_t SynchronizedNTPTime = NTPClockGetSynchronizedNTPTime();
    }
    uint64_t v6 = 0;
    *a2 = 0;
    a2[1] = SynchronizedNTPTime << 32;
    a2[2] = HIDWORD(SynchronizedNTPTime);
  }
  else
  {
    APSLogErrorAt(isStarted);
    uint64_t v6 = 4294895323;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v6;
}

uint64_t ntpClock_SetProperty(uint64_t a1, __CFString *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2 == @"APSNetworkClock::SimulatedStartError"
    || a2 && CFEqual(a2, @"APSNetworkClock::SimulatedStartError"))
  {
    pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
    *(_DWORD *)(DerivedStorage + 28) = CFGetInt64();
    pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
    return 0;
  }
  else
  {
    uint64_t v4 = 4294954509;
    APSLogErrorAt(4294954509);
  }
  return v4;
}

uint64_t ntpClock_CopyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, void *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!CFEqual(a2, @"NetworkClock_Type"))
  {
    if (CFEqual(a2, @"PortLocal"))
    {
      pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
      if (!*(unsigned char *)(DerivedStorage + 24)
        && gLogCategory_APSNetworkClockNTP <= 50
        && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      int valuePtr = NTPClockGetListenPort();
      *a4 = CFNumberCreate(a3, kCFNumberSInt32Type, &valuePtr);
      pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
      if (!*a4)
      {
        APSLogErrorAt(0);
        return 4294895326;
      }
    }
    else
    {
      if (CFEqual(a2, @"SourceClock"))
      {
        CMClockRef HostTimeClock = CMClockGetHostTimeClock();
        goto LABEL_3;
      }
      if (!CFEqual(a2, @"IsStarted"))
      {
        if (!CFEqual(a2, @"IsLocked"))
        {
          uint64_t v9 = 4294954509;
          APSLogErrorAt(4294954509);
          return v9;
        }
        CMClockRef HostTimeClock = (CMClockRef)*MEMORY[0x1E4F1CFD0];
        goto LABEL_3;
      }
      pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
      BOOL isStarted = ntpClock_isStarted();
      char v11 = (CFTypeRef *)MEMORY[0x1E4F1CFD0];
      if (!isStarted) {
        char v11 = (CFTypeRef *)MEMORY[0x1E4F1CFC8];
      }
      *a4 = CFRetain(*v11);
      pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
    }
    return 0;
  }
  CMClockRef HostTimeClock = (CMClockRef)@"NetworkClockType_NTP";
LABEL_3:
  uint64_t v9 = 0;
  *a4 = CFRetain(HostTimeClock);
  return v9;
}

__CFString *ntpClock_CopyDebugDescription(uint64_t a1)
{
  uint64_t Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSNTPClock %p>", a1);
  return Mutable;
}

uint64_t ntpClock_Finalize()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSNetworkClockNTP <= 50
    && (gLogCategory_APSNetworkClockNTP != -1 || _LogCategory_Initialize()))
  {
    CFSetRef v1 = *(const __CFSet **)(DerivedStorage + 16);
    if (v1) {
      CFSetGetCount(v1);
    }
    LogPrintF();
  }
  uint64_t v2 = *(const void **)(DerivedStorage + 16);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(DerivedStorage + 16) = 0;
  }
  if (*(void *)(DerivedStorage + 8))
  {
    NTPClockStop();
    CFRelease(*(CFTypeRef *)(DerivedStorage + 8));
    *(void *)(DerivedStorage + 8) = 0;
  }
  uint64_t result = FigSimpleMutexDestroy();
  *(void *)uint64_t DerivedStorage = 0;
  return result;
}

uint64_t APSNetworkClockNTPClientCreate(uint64_t a1, int a2, uint64_t a3, uint64_t a4, uint64_t a5, void *a6)
{
  CFTypeRef cf = 0;
  uint64_t v8 = ntpClock_createCommon(a1, a3, &cf);
  uint64_t v9 = v8;
  if (v8)
  {
    APSLogErrorAt(v8);
    if (cf) {
      CFRelease(cf);
    }
  }
  else
  {
    CFTypeRef v10 = cf;
    *(unsigned char *)(CMBaseObjectGetDerivedStorage() + 24) = 0;
    if (a2) {
      NTPClockSetQoSDisabled();
    }
    NTPClockSetRTCP();
    NTPClockSetPeer();
    *a6 = v10;
  }
  return v9;
}

uint64_t APSNetworkClockNTPConvertUpTicksToNTP(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  BOOL isStarted = ntpClock_isStarted();
  if (isStarted)
  {
    if (*(unsigned char *)(DerivedStorage + 24)) {
      uint64_t SynchronizedNTPTimeNearUpTicks = UpTicksToNTP();
    }
    else {
      uint64_t SynchronizedNTPTimeNearUpTicks = NTPClockGetSynchronizedNTPTimeNearUpTicks();
    }
    uint64_t v7 = 0;
    *a3 = SynchronizedNTPTimeNearUpTicks;
  }
  else
  {
    APSLogErrorAt(isStarted);
    uint64_t v7 = 4294895323;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v7;
}

uint64_t APSNetworkClockNTPConvertNTPToUpTicks(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)DerivedStorage);
  BOOL isStarted = ntpClock_isStarted();
  if (isStarted)
  {
    if (*(unsigned char *)(DerivedStorage + 24)) {
      uint64_t UpTicksNearSynchronizedNTPTime = NTPtoUpTicks();
    }
    else {
      uint64_t UpTicksNearSynchronizedNTPTime = NTPClockGetUpTicksNearSynchronizedNTPTime();
    }
    uint64_t v7 = 0;
    *a3 = UpTicksNearSynchronizedNTPTime;
  }
  else
  {
    APSLogErrorAt(isStarted);
    uint64_t v7 = 4294895323;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)DerivedStorage);
  return v7;
}

uint64_t APSOasisCPUFloorRaiserGetTypeID()
{
  if (gAPSOasisCPUFloorRaiserInitOnce != -1) {
    dispatch_once_f(&gAPSOasisCPUFloorRaiserInitOnce, 0, (dispatch_function_t)_APSOasisCPUFloorRaiserGetTypeID);
  }
  return gAPSOasisCPUFloorRaiserTypeID;
}

uint64_t _APSOasisCPUFloorRaiserGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSOasisCPUFloorRaiserTypeID = result;
  return result;
}

uint64_t _APSOasisCPUFloorRaiserFinalize(uint64_t a1)
{
  if (*(unsigned char *)(a1 + 32))
  {
    if (gLogCategory_APSOasisCPUFloorRaiser <= 50
      && (gLogCategory_APSOasisCPUFloorRaiser != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    APSOasisCPUFloorRaiserReleaseAssertion(a1);
  }

  return FigSimpleMutexDestroy();
}

uint64_t APSOasisCPUFloorRaiserReleaseAssertion(uint64_t a1)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  if (!*(unsigned char *)(a1 + 32))
  {
    APSLogErrorAt(0);
    uint64_t v4 = 4294960587;
    goto LABEL_19;
  }
  if (gLogCategory_APSOasisCPUFloorRaiser <= 50
    && (gLogCategory_APSOasisCPUFloorRaiser != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (apsSingletonFloorRaiserIsAllowed_onceToken != -1) {
    dispatch_once(&apsSingletonFloorRaiserIsAllowed_onceToken, &__block_literal_global_424);
  }
  if (apsSingletonFloorRaiserIsAllowed_isAllowed)
  {
    uint64_t v2 = apsSingletonFloorRaiserInit();
    if (v2)
    {
      uint64_t v4 = v2;
      APSLogErrorAt(v2);
    }
    else
    {
      pthread_mutex_lock((pthread_mutex_t *)gSingletonFloorRaiser);
      int v3 = dword_1EA642A98 - 1;
      if (dword_1EA642A98 >= 1)
      {
        --dword_1EA642A98;
        if (!v3)
        {
          if (gLogCategory_APSOasisCPUFloorRaiser <= 50
            && (gLogCategory_APSOasisCPUFloorRaiser != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          notify_set_state(dword_1EA642A9C, 0);
          notify_post("com.apple.airplay.oasis");
        }
        pthread_mutex_unlock((pthread_mutex_t *)gSingletonFloorRaiser);
        goto LABEL_18;
      }
      APSLogErrorAt(0);
      pthread_mutex_unlock((pthread_mutex_t *)gSingletonFloorRaiser);
      uint64_t v4 = 4294960587;
    }
    APSLogErrorAt(v4);
    goto LABEL_19;
  }
LABEL_18:
  uint64_t v4 = 0;
  *(unsigned char *)(a1 + 32) = 0;
LABEL_19:
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v4;
}

uint64_t apsSingletonFloorRaiserInit()
{
  uint64_t v4 = 0;
  uint64_t v5 = &v4;
  uint64_t v6 = 0x2000000000;
  int v7 = 0;
  if (apsSingletonFloorRaiserIsAllowed_onceToken != -1) {
    dispatch_once(&apsSingletonFloorRaiserIsAllowed_onceToken, &__block_literal_global_424);
  }
  if (apsSingletonFloorRaiserIsAllowed_isAllowed)
  {
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __apsSingletonFloorRaiserInit_block_invoke;
    block[3] = &unk_1E6897D30;
    block[4] = &v4;
    if (apsSingletonFloorRaiserInit_onceToken != -1) {
      dispatch_once(&apsSingletonFloorRaiserInit_onceToken, block);
    }
    uint64_t v0 = *((unsigned int *)v5 + 6);
    if (v0)
    {
      APSLogErrorAt(v0);
    }
    else if (!gSingletonFloorRaiser || !dword_1EA642A9C)
    {
      APSLogErrorAt(0);
      *((_DWORD *)v5 + 6) = -6728;
    }
  }
  uint64_t v1 = *((unsigned int *)v5 + 6);
  _Block_object_dispose(&v4, 8);
  return v1;
}

uint64_t __apsSingletonFloorRaiserInit_block_invoke(uint64_t a1)
{
  gSingletonFloorRaiser = FigSimpleMutexCreate();
  dword_1EA642A98 = 0;
  uint64_t result = notify_register_check("com.apple.airplay.oasis", &dword_1EA642A9C);
  *(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = result;
  return result;
}

uint64_t __apsSingletonFloorRaiserIsAllowed_block_invoke()
{
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  apsSingletonFloorRaiserIsAllowed_isAllowed = result == 0;
  if (gLogCategory_APSOasisCPUFloorRaiser <= 50)
  {
    if (gLogCategory_APSOasisCPUFloorRaiser != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSOasisCPUFloorRaiserCreate(uint64_t a1, uint64_t a2, void *a3)
{
  if (a3)
  {
    if (gAPSOasisCPUFloorRaiserInitOnce != -1) {
      dispatch_once_f(&gAPSOasisCPUFloorRaiserInitOnce, 0, (dispatch_function_t)_APSOasisCPUFloorRaiserGetTypeID);
    }
    uint64_t Instance = (void *)_CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v6 = Instance;
      Instance[2] = 0;
      Instance[3] = 0;
      Instance[4] = 0;
      uint64_t v7 = FigSimpleMutexCreate();
      void v6[2] = v7;
      if (v7)
      {
        uint64_t result = 0;
        void v6[3] = a2;
        *a3 = v6;
        return result;
      }
      APSLogErrorAt(0);
      CFRelease(v6);
    }
    else
    {
      APSLogErrorAt(0);
    }
    return 4294960568;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSOasisCPUFloorRaiserRetainAssertion(uint64_t a1)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  if (*(unsigned char *)(a1 + 32))
  {
    APSLogErrorAt(0);
    uint64_t v4 = 4294960587;
  }
  else
  {
    if (gLogCategory_APSOasisCPUFloorRaiser <= 50
      && (gLogCategory_APSOasisCPUFloorRaiser != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (apsSingletonFloorRaiserIsAllowed_onceToken != -1) {
      dispatch_once(&apsSingletonFloorRaiserIsAllowed_onceToken, &__block_literal_global_424);
    }
    if (apsSingletonFloorRaiserIsAllowed_isAllowed)
    {
      uint64_t v2 = apsSingletonFloorRaiserInit();
      if (v2)
      {
        uint64_t v4 = v2;
        APSLogErrorAt(v2);
        APSLogErrorAt(v4);
        goto LABEL_18;
      }
      pthread_mutex_lock((pthread_mutex_t *)gSingletonFloorRaiser);
      int v3 = dword_1EA642A98;
      if (!dword_1EA642A98)
      {
        if (gLogCategory_APSOasisCPUFloorRaiser <= 50
          && (gLogCategory_APSOasisCPUFloorRaiser != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        notify_set_state(dword_1EA642A9C, 1uLL);
        notify_post("com.apple.airplay.oasis");
        int v3 = dword_1EA642A98;
      }
      dword_1EA642A98 = v3 + 1;
      pthread_mutex_unlock((pthread_mutex_t *)gSingletonFloorRaiser);
    }
    uint64_t v4 = 0;
    *(unsigned char *)(a1 + 32) = 1;
  }
LABEL_18:
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v4;
}

uint64_t APSCryptorCTRCreate(uint64_t a1, const __CFData *a2, const __CFData *a3, void *a4)
{
  if (!a2)
  {
    uint64_t v8 = 4294895585;
    APSLogErrorAt(0);
    return v8;
  }
  if (!a3)
  {
    uint64_t v8 = 4294895585;
    uint64_t v7 = 0;
LABEL_17:
    APSLogErrorAt(v7);
    return v8;
  }
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  uint64_t v7 = CMDerivedObjectCreate();
  if (v7)
  {
    uint64_t v8 = v7;
    goto LABEL_17;
  }
  CMBaseObjectGetDerivedStorage();
  CFDataGetBytePtr(a2);
  CFDataGetBytePtr(a3);
  uint64_t v7 = AES_CTR_Init();
  if (v7)
  {
    uint64_t v8 = v7;
    goto LABEL_17;
  }
  if (gLogCategory_APSCryptorCTR <= 30 && (gLogCategory_APSCryptorCTR != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  uint64_t v8 = 0;
  *a4 = 0;
  return v8;
}

uint64_t ctrCryptor_EncryptMessage(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, unint64_t a5, uint64_t a6, unint64_t a7)
{
  CMBaseObjectGetDerivedStorage();
  if (a7 < a5)
  {
    APSLogErrorAt(0);
    return 4294895585;
  }
  else
  {
    uint64_t v9 = AES_CTR_Update();
    uint64_t v10 = v9;
    if (v9) {
      APSLogErrorAt(v9);
    }
  }
  return v10;
}

uint64_t ctrCryptor_GetEncryptionOverheadLength()
{
  return 0;
}

__CFString *ctrCryptor_CopyDebugDescription(uint64_t a1)
{
  uint64_t Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSCryptorCTR %p>", a1);
  return Mutable;
}

uint64_t ctrCryptor_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSCryptorCTR <= 30 && (gLogCategory_APSCryptorCTR != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }

  return AES_CTR_Final();
}

uint64_t APSNetworkClockPTPCreate(const __CFAllocator *a1, void *a2)
{
  uint64_t v25 = *MEMORY[0x1E4F143B8];
  long long v23 = 0u;
  long long v24 = 0u;
  long long v21 = 0u;
  long long v22 = 0u;
  long long v19 = 0u;
  long long v20 = 0u;
  long long v17 = 0u;
  long long v18 = 0u;
  long long v15 = 0u;
  long long v16 = 0u;
  long long v13 = 0u;
  long long v14 = 0u;
  long long v11 = 0u;
  long long v12 = 0u;
  *(_OWORD *)label = 0u;
  long long v10 = 0u;
  if (APSNetworkClockGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSNetworkClockGetClassID_sRegisterOnce, &APSNetworkClockGetClassID_sClassID, (dispatch_function_t)networkClock_registerBaseClass);
  }
  uint64_t Mutable = CMDerivedObjectCreate();
  if (Mutable)
  {
    uint64_t v7 = Mutable;
LABEL_27:
    APSLogErrorAt(Mutable);
    return v7;
  }
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t Mutable = FigSimpleMutexCreate();
  *(void *)(DerivedStorage + 16) = Mutable;
  if (!Mutable)
  {
    uint64_t v7 = 4294895326;
    goto LABEL_27;
  }
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t Mutable = (uint64_t)CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(DerivedStorage + 24) = Mutable;
  if (!Mutable)
  {
    uint64_t v7 = 4294895326;
    goto LABEL_27;
  }
  uint64_t Mutable = (uint64_t)CFArrayCreateMutable(v6, 0, MEMORY[0x1E4F1D510]);
  *(void *)(DerivedStorage + 32) = Mutable;
  if (!Mutable)
  {
    uint64_t v7 = 4294895326;
    goto LABEL_27;
  }
  uint64_t Mutable = (uint64_t)CFSetCreateMutable(a1, 0, MEMORY[0x1E4F1D548]);
  *(void *)(DerivedStorage + 56) = Mutable;
  if (!Mutable)
  {
    uint64_t v7 = 4294895326;
    goto LABEL_27;
  }
  if ((int)SNPrintF() <= 0)
  {
    APSLogErrorAt(0);
    return 4294895322;
  }
  uint64_t Mutable = (uint64_t)dispatch_queue_create(label, 0);
  *(void *)uint64_t DerivedStorage = Mutable;
  if (!Mutable)
  {
    uint64_t v7 = 4294895326;
    goto LABEL_27;
  }
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  *(unsigned char *)(DerivedStorage + 8) = APSSettingsGetInt64(@"ptpForceFullMesh", 0) != 0;
  *(unsigned char *)(DerivedStorage + 9) = APSSettingsGetInt64(@"ptpDisablePeerConfiguration", 0) != 0;
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v7 = 0;
  *a2 = 0;
  return v7;
}

uint64_t ptpClock_ClearLocalPeerInfo()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFDictionaryGetCount(*(CFDictionaryRef *)(DerivedStorage + 24));
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  uint64_t v1 = *(const void **)(DerivedStorage + 40);
  if (v1)
  {
    if (gLogCategory_APSNetworkClockPTP >= 51)
    {
      *(void *)(DerivedStorage + 48) = 0;
LABEL_8:
      CFRelease(v1);
      *(void *)(DerivedStorage + 40) = 0;
      goto LABEL_9;
    }
    if (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    uint64_t v1 = *(const void **)(DerivedStorage + 40);
    *(void *)(DerivedStorage + 48) = 0;
    if (v1) {
      goto LABEL_8;
    }
  }
LABEL_9:
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return 0;
}

uint64_t ptpClock_StopForClient(uint64_t a1, uint64_t a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  __int16 Int64 = (const void *)CFNumberCreateInt64();
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (a2)
  {
    CFIndex Count = CFSetGetCount(*(CFSetRef *)(DerivedStorage + 56));
    CFSetRemoveValue(*(CFMutableSetRef *)(DerivedStorage + 56), Int64);
    CFIndex v6 = CFSetGetCount(*(CFSetRef *)(DerivedStorage + 56));
    if (Count < 1 || v6 > 0)
    {
LABEL_21:
      uint64_t v11 = 0;
      goto LABEL_22;
    }
    uint64_t v8 = CMBaseObjectGetDerivedStorage();
    if (!*(unsigned char *)(v8 + 80)
      && gLogCategory_APSNetworkClockPTP <= 60
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (*(void *)(v8 + 64))
    {
      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterRemoveWeakListener();
      uint64_t v9 = *(const void **)(v8 + 64);
      if (v9)
      {
        CFRelease(v9);
        *(void *)(v8 + 64) = 0;
      }
      long long v10 = *(const void **)(v8 + 72);
      if (v10)
      {
        CFRelease(v10);
        *(void *)(v8 + 72) = 0;
      }
      uint64_t v11 = 0;
      *(unsigned char *)(v8 + 80) = 0;
      if (gLogCategory_APSNetworkClockPTP <= 50)
      {
        if (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()) {
          LogPrintF();
        }
        goto LABEL_21;
      }
    }
    else
    {
      uint64_t v11 = 4294895323;
      APSLogErrorAt(0);
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v11 = 4294895325;
  }
LABEL_22:
  if (Int64) {
    CFRelease(Int64);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v11;
}

uint64_t ptpClock_LockStateChanged(int a1, int a2, CFTypeRef cf1)
{
  uint64_t result = CFEqual(cf1, (CFTypeRef)*MEMORY[0x1E4F1EBD0]);
  if (result)
  {
    CMNotificationCenterGetDefaultLocalCenter();
    return CMNotificationCenterPostNotification();
  }
  return result;
}

uint64_t ptpClock_StartForClient(uint64_t a1, uint64_t a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  __int16 Int64 = (const void *)CFNumberCreateInt64();
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (a2)
  {
    if (CFSetGetCount(*(CFSetRef *)(DerivedStorage + 56)))
    {
LABEL_32:
      CFSetAddValue(*(CFMutableSetRef *)(DerivedStorage + 56), Int64);
      uint64_t v10 = 0;
      goto LABEL_33;
    }
    uint64_t v5 = CMBaseObjectGetDerivedStorage();
    int64_t v6 = (int64_t)APSSettingsGetInt64(@"ptpUpdateRateMs", 0);
    if (IsAppleTV())
    {
      BOOL v7 = 1;
    }
    else
    {
      if (APSIsAPMSpeaker_sCheckOnce != -1) {
        dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
      }
      BOOL v7 = APSIsAPMSpeaker_sIsAPMSpeaker != 0;
    }
    if (*(unsigned char *)(v5 + 80)
      && gLogCategory_APSNetworkClockPTP <= 60
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (!*(void *)(v5 + 64) && (uint64_t v8 = CM8021ASClockCreate(), v8))
    {
      uint64_t v10 = v8;
    }
    else
    {
      if (v6) {
        BOOL v9 = 0;
      }
      else {
        BOOL v9 = v7;
      }
      if (!v9)
      {
        if (!v6) {
          int64_t v6 = 2000;
        }
        memset(&v12, 0, sizeof(v12));
        CMTimeMake(&v12, v6, 1000);
        atomic_store(1u, gAPSNetworkClockPTPIsAllPortSyncIntervalSet);
        CM8021ASClockSetAllPortRemoteSyncMessageIntervals();
        if (gLogCategory_APSNetworkClockPTP <= 50
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
      CMNotificationCenterGetDefaultLocalCenter();
      uint64_t v8 = FigNotificationCenterAddWeakListener();
      if (v8)
      {
        uint64_t v10 = v8;
      }
      else
      {
        if (*(void *)(v5 + 72) || (uint64_t v8 = CMTimeSyncClockCreateForSystemDomainClockIdentifier(), !v8))
        {
          *(unsigned char *)(v5 + 80) = 1;
          if (gLogCategory_APSNetworkClockPTP <= 50
            && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          goto LABEL_32;
        }
        uint64_t v10 = v8;
      }
    }
    APSLogErrorAt(v8);
    APSLogErrorAt(v10);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v10 = 4294895325;
  }
LABEL_33:
  if (Int64) {
    CFRelease(Int64);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v10;
}

uint64_t ptpClock_SetOrUpdateLocalPeerInfo(uint64_t a1, const __CFDictionary *a2)
{
  unsigned int v12 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (!a2) {
    goto LABEL_20;
  }
  if (*(void *)(DerivedStorage + 40))
  {
    if (CFDictionaryContainsKey(a2, @"HTAddress"))
    {
      CFArrayRef Value = CFDictionaryGetValue(a2, @"HTAddress");
      if (Value)
      {
        uint64_t v5 = Value;
        CFStringGetTypeID();
        TypedCFArrayRef Value = (const void *)CFDictionaryGetTypedValue();
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(DerivedStorage + 40), @"HTAddress", v5);
        BOOL v7 = *(__CFDictionary **)(DerivedStorage + 40);
        uint64_t v8 = @"HTGroupUUID";
LABEL_12:
        CFDictionarySetValue(v7, v8, TypedValue);
        if (gLogCategory_APSNetworkClockPTP <= 50
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        goto LABEL_19;
      }
    }
    else
    {
      BOOL v9 = CFDictionaryGetValue(a2, @"Addresses");
      uint64_t v10 = CFDictionaryGetValue(a2, @"InterfaceName");
      if (v9)
      {
        TypedCFArrayRef Value = v10;
        if (v10)
        {
          CFDictionarySetValue(*(CFMutableDictionaryRef *)(DerivedStorage + 40), @"Addresses", v9);
          BOOL v7 = *(__CFDictionary **)(DerivedStorage + 40);
          uint64_t v8 = @"InterfaceName";
          goto LABEL_12;
        }
      }
    }
LABEL_20:
    APSLogErrorAt(0);
    unsigned int v12 = -71971;
    goto LABEL_19;
  }
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  *(void *)(DerivedStorage + 40) = CFDictionaryCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, a2);
LABEL_19:
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v12;
}

uint64_t ptpClock_CopyInitialSerializablePeerList(uint64_t a1, int a2, CFTypeRef *a3, CFTypeRef *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef v17 = 0;
  CFTypeRef cf = 0;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  uint64_t v9 = CMBaseObjectGetDerivedStorage();
  CFTypeRef v19 = 0;
  if (!*(void *)(v9 + 40))
  {
    APSLogErrorAt(0);
    uint64_t v12 = 4294895323;
LABEL_26:
    if (v19) {
      CFRelease(v19);
    }
    APSLogErrorAt(v12);
    pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
    CFDictionaryRef Copy = 0;
    goto LABEL_13;
  }
  uint64_t v10 = v9;
  if (a2)
  {
    uint64_t v11 = ptpClock_copyPeerListForHTBuddyPeer(a1, (__CFArray **)&v19);
    if (v11)
    {
      uint64_t v12 = v11;
LABEL_25:
      APSLogErrorAt(v11);
      goto LABEL_26;
    }
  }
  else
  {
    uint64_t v11 = ptpClock_copyPeerListForRegularPeer(a1, 0, (__CFArray **)&v19);
    if (v11)
    {
      uint64_t v12 = v11;
      goto LABEL_25;
    }
  }
  CFDictionaryRef Copy = CFDictionaryCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], *(CFDictionaryRef *)(v10 + 40));
  CFTypeRef v14 = v19;
  uint64_t SerializableRepresentationOfPeerList = APSNetworkClockCreateSerializableRepresentationOfPeerList((const __CFArray *)v19, 1, (__CFArray **)&cf);
  if (SerializableRepresentationOfPeerList)
  {
    uint64_t v12 = SerializableRepresentationOfPeerList;
  }
  else
  {
    if (!a4)
    {
LABEL_10:
      uint64_t v12 = 0;
      *a3 = cf;
      CFTypeRef cf = 0;
      goto LABEL_11;
    }
    uint64_t SerializableRepresentationOfPeerList = APSNetworkClockCopyPeerAsSerializablePeerDictionary(Copy, (__CFDictionary **)&v17);
    if (!SerializableRepresentationOfPeerList)
    {
      *a4 = v17;
      CFTypeRef v17 = 0;
      goto LABEL_10;
    }
    uint64_t v12 = SerializableRepresentationOfPeerList;
  }
  APSLogErrorAt(SerializableRepresentationOfPeerList);
LABEL_11:
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (v14) {
    CFRelease(v14);
  }
LABEL_13:
  if (cf) {
    CFRelease(cf);
  }
  if (Copy) {
    CFRelease(Copy);
  }
  if (v17) {
    CFRelease(v17);
  }
  return v12;
}

uint64_t ptpClock_copyPeerListForHTBuddyPeer(uint64_t a1, __CFArray **a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(void *)(DerivedStorage + 40))
  {
    uint64_t v4 = DerivedStorage;
    uint64_t Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      int64_t v6 = Mutable;
      CFArrayAppendValue(Mutable, *(const void **)(v4 + 40));
      uint64_t v7 = 0;
      *a2 = v6;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294895326;
    }
  }
  else
  {
    uint64_t v7 = 4294895323;
    APSLogErrorAt(0);
  }
  return v7;
}

uint64_t ptpClock_copyPeerListForRegularPeer(uint64_t a1, const __CFDictionary *a2, __CFArray **a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(void *)(DerivedStorage + 40))
  {
    uint64_t v11 = 4294895323;
    APSLogErrorAt(0);
    return v11;
  }
  uint64_t v6 = DerivedStorage;
  CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294895326;
  }
  uint64_t v8 = Mutable;
  if (a2 && !CFDictionaryGetInt64() || *(unsigned char *)(v6 + 8))
  {
    if (gLogCategory_APSNetworkClockPTP <= 50
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  else
  {
    uint64_t Count = CFArrayGetCount(*(CFArrayRef *)(v6 + 32));
    if (Count <= 0) {
      int v10 = 30;
    }
    else {
      int v10 = 50;
    }
    if (v10 >= gLogCategory_APSNetworkClockPTP
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    v15.location = 0;
    v15.length = Count;
    CFArrayAppendArray(v8, *(CFArrayRef *)(v6 + 32), v15);
    if (!a2) {
      goto LABEL_17;
    }
    CFArrayRef Value = CFDictionaryGetValue(a2, @"TightSyncUUID");
    CFTypeRef v14 = CFDictionaryGetValue(a2, @"HTGroupUUID");
    if (!Value || v14) {
      goto LABEL_17;
    }
  }
  CFDictionaryApplyBlock();
LABEL_17:
  CFArrayAppendValue(v8, *(const void **)(v6 + 40));
  uint64_t v11 = 0;
  *a3 = v8;
  return v11;
}

void __ptpClock_copyPeerListForRegularPeer_block_invoke(uint64_t a1, uint64_t a2, const void *a3)
{
  if (!APSNetworkClockPeerDictionaryIsHTClusterExclusive((const __CFDictionary *)a3)
    && !APSNetworkClockPeerDictionaryIDEqual(*(const __CFDictionary **)(a1 + 32), (const __CFDictionary *)a3))
  {
    uint64_t v5 = *(__CFArray **)(a1 + 40);
    CFArrayAppendValue(v5, a3);
  }
}

void __ptpClock_copyPeerListForRegularPeer_block_invoke_2(uint64_t a1, uint64_t a2, const void *a3)
{
  CFStringGetTypeID();
  CFDictionaryGetTypedValue();
  if (FigCFEqual()
    && !APSNetworkClockPeerDictionaryIDEqual(*(const __CFDictionary **)(a1 + 40), (const __CFDictionary *)a3))
  {
    uint64_t v5 = *(__CFArray **)(a1 + 48);
    CFArrayAppendValue(v5, a3);
  }
}

uint64_t ptpClock_CopySerializablePeerListForPeer(uint64_t a1, const void *a2, int a3, CFTypeRef *a4)
{
  uint64_t v8 = 4294895005;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef cf = 0;
  CFArrayRef v16 = 0;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (!a2)
  {
    uint64_t v8 = 4294895325;
    goto LABEL_12;
  }
  CFDictionaryRef Value = (const __CFDictionary *)CFDictionaryGetValue(*(CFDictionaryRef *)(DerivedStorage + 24), a2);
  if (!Value)
  {
LABEL_12:
    APSLogErrorAt(0);
    pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
    goto LABEL_8;
  }
  uint64_t v11 = ptpClock_copyPeerListForPeerInternal(a1, Value, (CFTypeRef *)&v16);
  if (v11)
  {
    uint64_t v8 = v11;
    APSLogErrorAt(v11);
    CFArrayRef v12 = v16;
  }
  else
  {
    CFArrayRef v12 = v16;
    uint64_t SerializableRepresentationOfPeerList = APSNetworkClockCreateSerializableRepresentationOfPeerList(v16, a3, (__CFArray **)&cf);
    uint64_t v8 = SerializableRepresentationOfPeerList;
    if (SerializableRepresentationOfPeerList)
    {
      APSLogErrorAt(SerializableRepresentationOfPeerList);
    }
    else
    {
      *a4 = cf;
      CFTypeRef cf = 0;
    }
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (v12) {
    CFRelease(v12);
  }
LABEL_8:
  if (cf) {
    CFRelease(cf);
  }
  return v8;
}

uint64_t ptpClock_copyPeerListForPeerInternal(uint64_t a1, const __CFDictionary *a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  CFDictionaryRef v6 = *(const __CFDictionary **)(CMBaseObjectGetDerivedStorage() + 40);
  if (v6)
  {
    if (APSNetworkClockPeerDictionaryIDEqual(a2, v6))
    {
      CFTypeRef cf = (CFTypeRef)FigCFDictionaryCopyArrayOfValues();
LABEL_8:
      uint64_t v8 = 0;
      *a3 = cf;
      return v8;
    }
    if (ptpClock_isPeerHTBuddy(a1, a2))
    {
      uint64_t v7 = ptpClock_copyPeerListForHTBuddyPeer(a1, (__CFArray **)&cf);
      if (!v7) {
        goto LABEL_8;
      }
      uint64_t v8 = v7;
    }
    else
    {
      uint64_t v7 = ptpClock_copyPeerListForRegularPeer(a1, a2, (__CFArray **)&cf);
      if (!v7) {
        goto LABEL_8;
      }
      uint64_t v8 = v7;
    }
    APSLogErrorAt(v7);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294895323;
  }
  if (cf) {
    CFRelease(cf);
  }
  return v8;
}

CFDictionaryRef ptpClock_isPeerHTBuddy(uint64_t a1, const __CFDictionary *a2)
{
  CFDictionaryRef result = *(const __CFDictionary **)(CMBaseObjectGetDerivedStorage() + 40);
  if (result)
  {
    CFDictionaryRef result = (const __CFDictionary *)CFDictionaryGetValue(result, @"HTGroupUUID");
    if (result)
    {
      uint64_t v4 = result;
      if (result == CFDictionaryGetValue(a2, @"HTGroupUUID"))
      {
        return (const __CFDictionary *)1;
      }
      else
      {
        CFDictionaryRef result = (const __CFDictionary *)CFDictionaryGetValue(a2, @"HTGroupUUID");
        if (result)
        {
          CFDictionaryRef Value = CFDictionaryGetValue(a2, @"HTGroupUUID");
          return (const __CFDictionary *)(CFEqual(v4, Value) != 0);
        }
      }
    }
  }
  return result;
}

uint64_t ptpClock_SetPeers(uint64_t a1, const __CFArray *a2, CFTypeRef *a3, char *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  unsigned int v22 = 0;
  CFTypeRef cf = 0;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (a2)
  {
    if (*(unsigned char *)(DerivedStorage + 9))
    {
      CFArrayRef v10 = 0;
      char v12 = 0;
    }
    else
    {
      if (gLogCategory_APSNetworkClockPTP <= 50
        && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
      {
        CFArrayGetCount(a2);
        if (gLogCategory_APSNetworkClockPTP == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
      CFTypeRef v19 = a3;
      uint64_t v9 = a4;
      CFArrayRef v10 = (const __CFArray *)FigCFDictionaryCopyArrayOfValues();
      CFIndex v11 = 0;
      char v12 = 0;
      while (v11 < CFArrayGetCount(v10))
      {
        CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(v10, v11);
        CFStringGetTypeID();
        TypedCFDictionaryRef Value = (const void *)CFDictionaryGetTypedValue();
        if (ptpClock_findPeerInArray(ValueAtIndex, a2) == -1)
        {
          uint64_t updated = ptpClock_removePeerInternal(a1, TypedValue);
          unsigned int v22 = updated;
          if (updated) {
            goto LABEL_40;
          }
          char v12 = 1;
        }
        ++v11;
      }
      for (CFIndex i = 0; i < CFArrayGetCount(a2); ++i)
      {
        CFDictionaryRef v17 = (const __CFDictionary *)CFArrayGetValueAtIndex(a2, i);
        char v20 = 0;
        uint64_t updated = ptpClock_addOrUpdatePeerInternal(a1, v17, 0, &v20);
        unsigned int v22 = updated;
        if (updated) {
          goto LABEL_40;
        }
        if (v20) {
          char v12 = 1;
        }
      }
      uint64_t updated = APSNetworkClockCopyPeerAsSerializablePeerDictionary(*(CFDictionaryRef *)(DerivedStorage + 40), (__CFDictionary **)&cf);
      unsigned int v22 = updated;
      if (updated)
      {
LABEL_40:
        APSLogErrorAt(updated);
        a4 = v9;
        goto LABEL_30;
      }
      a4 = v9;
      if (v12
        && gLogCategory_APSNetworkClockPTP <= 50
        && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      ptpClock_enablePortsBasedOnTopology();
      ptpClock_firePeersChangedNotification();
LABEL_30:
      a3 = v19;
    }
  }
  else
  {
    APSLogErrorAt(0);
    CFArrayRef v10 = 0;
    char v12 = 0;
    unsigned int v22 = -71971;
  }
  if (a3)
  {
    *a3 = cf;
    CFTypeRef cf = 0;
  }
  if (a4) {
    *a4 = v12;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (v10) {
    CFRelease(v10);
  }
  if (cf) {
    CFRelease(cf);
  }
  return v22;
}

CFIndex ptpClock_findPeerInArray(const __CFDictionary *a1, CFArrayRef theArray)
{
  for (CFIndex i = 0; i < CFArrayGetCount(theArray); ++i)
  {
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(theArray, i);
    if (APSNetworkClockPeerDictionaryIDEqual(a1, ValueAtIndex)) {
      return i;
    }
  }
  return -1;
}

uint64_t ptpClock_removePeerInternal(uint64_t a1, const void *a2)
{
  uint64_t v4 = 4294895005;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    uint64_t v4 = 4294895325;
    goto LABEL_7;
  }
  uint64_t v6 = DerivedStorage;
  CFDictionaryRef Value = CFDictionaryGetValue(*(CFDictionaryRef *)(DerivedStorage + 24), a2);
  if (!Value || (CFDictionaryRef v8 = (const __CFDictionary *)CFRetain(Value)) == 0)
  {
LABEL_7:
    APSLogErrorAt(0);
    if (gLogCategory_APSNetworkClockPTP <= 90
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return v4;
  }
  CFDictionaryRef v9 = v8;
  CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(v6 + 24), a2);
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (ptpClock_isPeerHTBuddy(a1, v9)) {
    --*(void *)(v6 + 48);
  }
  ptpClock_closeClockPortsForPeer(a1, v9);
  CFIndex PeerInArray = ptpClock_findPeerInArray(v9, *(CFArrayRef *)(v6 + 32));
  if (PeerInArray != -1)
  {
    CFIndex v11 = PeerInArray;
    if (gLogCategory_APSNetworkClockPTP <= 30
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFArrayRemoveValueAtIndex(*(CFMutableArrayRef *)(v6 + 32), v11);
  }
  CFDictionaryRef cf = v9;
  uint64_t v12 = CMBaseObjectGetDerivedStorage();
  CFArrayRef v13 = (const __CFArray *)FigCFDictionaryCopyArrayOfKeys();
  CFIndex v14 = 0;
  CFAllocatorRef v15 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  while (v14 < CFArrayGetCount(v13))
  {
    CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(v13, v14);
    CFDictionaryGetTypeID();
    TypedCFDictionaryRef Value = (const __CFDictionary *)CFDictionaryGetTypedValue();
    if (CFDictionaryGetInt64())
    {
      CFDictionaryGetTypeID();
      CFDictionaryRef v18 = (const __CFDictionary *)CFDictionaryGetTypedValue();
      if (v18)
      {
        CFMutableDictionaryRef MutableCopy = CFDictionaryCreateMutableCopy(v15, 0, v18);
        if (!MutableCopy)
        {
          APSLogErrorAt(0);
          goto LABEL_39;
        }
        CFMutableDictionaryRef v20 = MutableCopy;
        CFMutableDictionaryRef v21 = CFDictionaryCreateMutableCopy(v15, 0, TypedValue);
        if (!v21)
        {
          APSLogErrorAt(0);
          CFRelease(v20);
LABEL_39:
          APSLogErrorAt(4294895326);
LABEL_40:
          uint64_t v25 = 0;
          goto LABEL_41;
        }
        unsigned int v22 = v21;
        CFDictionaryRemoveValue(v20, a2);
        CFDictionarySetValue(v22, @"ClockPorts", v20);
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(v12 + 24), ValueAtIndex, v22);
        CFRelease(v20);
        CFRelease(v22);
      }
      else
      {
        APSLogErrorAt(0);
        if (gLogCategory_APSNetworkClockPTP <= 90
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
    }
    ++v14;
  }
  CFDictionaryGetTypeID();
  CFDictionaryRef v23 = (const __CFDictionary *)CFDictionaryGetTypedValue();
  if (!v23) {
    goto LABEL_40;
  }
  long long v24 = CFDictionaryCreateMutableCopy(v15, 0, v23);
  uint64_t v25 = v24;
  if (v24)
  {
    CFDictionaryRemoveValue(v24, a2);
    CFDictionarySetValue(*(CFMutableDictionaryRef *)(v12 + 40), @"ClockPorts", v25);
  }
  else
  {
    APSLogErrorAt(0);
  }
LABEL_41:
  if (v13) {
    CFRelease(v13);
  }
  if (v25) {
    CFRelease(v25);
  }
  CFRelease(cf);
  return 0;
}

uint64_t ptpClock_addOrUpdatePeerInternal(uint64_t a1, const __CFDictionary *a2, __CFDictionary **a3, char *a4)
{
  uint64_t v66 = *MEMORY[0x1E4F143B8];
  unsigned int v58 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2) {
    goto LABEL_106;
  }
  uint64_t v9 = DerivedStorage;
  CFDictionaryRef v10 = *(const __CFDictionary **)(DerivedStorage + 40);
  if (!v10)
  {
    APSLogErrorAt(0);
    return -71973;
  }
  if (APSNetworkClockPeerDictionaryIDEqual(a2, v10)) {
    return v58;
  }
  CFDictionaryRef Value = CFDictionaryGetValue(a2, @"ID");
  if (!Value)
  {
LABEL_106:
    APSLogErrorAt(0);
    return -71971;
  }
  uint64_t v12 = Value;
  int v54 = -71973;
  if (CFDictionaryContainsKey(*(CFDictionaryRef *)(v9 + 24), Value))
  {
    CFArrayRef v13 = CFDictionaryGetValue(a2, @"ClockPorts");
    CFIndex v14 = CFDictionaryGetValue(a2, @"ClockID");
    CFAllocatorRef v15 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFDictionaryRef v16 = (const __CFDictionary *)CFDictionaryGetValue(*(CFDictionaryRef *)(v9 + 24), v12);
    CFMutableDictionaryRef MutableCopy = CFDictionaryCreateMutableCopy(v15, 0, v16);
    if (MutableCopy)
    {
      CFDictionaryRef v18 = MutableCopy;
      int v19 = gLogCategory_APSNetworkClockPTP;
      if (gLogCategory_APSNetworkClockPTP <= 50)
      {
        if (gLogCategory_APSNetworkClockPTP != -1)
        {
LABEL_9:
          if (v19 == -1) {
            _LogCategory_Initialize();
          }
          LogPrintF();
          goto LABEL_50;
        }
        if (_LogCategory_Initialize())
        {
          int v19 = gLogCategory_APSNetworkClockPTP;
          goto LABEL_9;
        }
      }
LABEL_50:
      if (v13) {
        CFDictionarySetValue(v18, @"ClockPorts", v13);
      }
      if (v14) {
        CFDictionarySetValue(v18, @"ClockID", v14);
      }
      CFAllocatorRef allocator = v15;
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(v9 + 24), v12, v18);
      CFMutableDictionaryRef v31 = 0;
      char v57 = 0;
      goto LABEL_74;
    }
    APSLogErrorAt(0);
    return -71970;
  }
  v56 = a3;
  v52 = a4;
  uint64_t v20 = CMBaseObjectGetDerivedStorage();
  CFArrayRef v63 = 0;
  __int16 v62 = 0;
  uint64_t v61 = 0;
  CMTimeValue v64 = *MEMORY[0x1E4F1F9F8];
  CMTimeFlags v21 = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 12);
  CMTimeScale v65 = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 8);
  CMTimeEpoch v22 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  if (APSSettingsIsFeatureEnabled(@"AirPlayPerf_PTPNonTightSyncRate"))
  {
    unsigned __int8 v23 = atomic_load(gAPSNetworkClockPTPIsAllPortSyncIntervalSet);
    if ((v23 & 1) == 0 && !CFDictionaryContainsKey(a2, @"TightSyncUUID"))
    {
      if (ptpClock_getPerPortRateForPeer_sNonTightSyncRateOnce != -1) {
        dispatch_once(&ptpClock_getPerPortRateForPeer_sNonTightSyncRateOnce, &__block_literal_global_491);
      }
      CMTimeValue v64 = ptpClock_getPerPortRateForPeer_sNonTightSyncRate;
      CMTimeFlags v21 = HIDWORD(ptpClock_getPerPortRateForPeer_sNonTightSyncRate);
      CMTimeScale v65 = DWORD2(ptpClock_getPerPortRateForPeer_sNonTightSyncRate);
      CMTimeEpoch v22 = qword_1EA642AC8;
    }
  }
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(void *)(v20 + 64))
  {
    if (CFDictionaryGetValue(a2, @"InterfaceName"))
    {
      uint64_t v24 = ptpClock_copyRelevantPortAddressesFromPeer(a1, a2, &v63);
      if (v24)
      {
        uint64_t v29 = v24;
        APSLogErrorAt(v24);
      }
      else
      {
        uint64_t v25 = a1;
        for (CFIndex i = 0; i < CFArrayGetCount(v63); ++i)
        {
          int v27 = *((unsigned __int8 *)CFArrayGetValueAtIndex(v63, i) + 17);
          if (v27 == 30)
          {
            uint64_t Identity = CM8021ASClockAddIPv6PortAndGetIdentity();
          }
          else
          {
            if (v27 != 2)
            {
              uint64_t v29 = 4294895325;
LABEL_43:
              uint64_t v30 = v29;
              goto LABEL_44;
            }
            uint64_t Identity = CM8021ASClockAddIPv4PortAndGetIdentity();
          }
          uint64_t v29 = Identity;
          if (Identity) {
            goto LABEL_43;
          }
          if (v21)
          {
            if (gLogCategory_APSNetworkClockPTP <= 50
              && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
            {
              time.CMTimeValue value = v64;
              time.CMTimeScale timescale = v65;
              time.CMTimeFlags flags = v21;
              time.CMTimeEpoch epoch = v22;
              CMTimeConvertScale(&valuePtr, &time, 1000, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
              LogPrintF();
            }
            time.CMTimeValue value = v64;
            time.CMTimeScale timescale = v65;
            time.CMTimeFlags flags = v21;
            time.CMTimeEpoch epoch = v22;
            CM8021ASClockSetPortRemoteSyncMessageIntervals();
          }
        }
        uint64_t v30 = CFDictionarySetInt64();
        uint64_t v29 = v30;
        if (!v30)
        {
          a1 = v25;
          a3 = v56;
          goto LABEL_57;
        }
LABEL_44:
        APSLogErrorAt(v30);
        a1 = v25;
      }
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v29 = 4294895325;
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v29 = 4294895323;
  }
  a3 = v56;
  if (gLogCategory_APSNetworkClockPTP <= 90
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  ptpClock_closeClockPortsForPeer(a1, a2);
LABEL_57:
  if (v63) {
    CFRelease(v63);
  }
  unsigned int v58 = v29;
  if (v29)
  {
    APSLogErrorAt(v29);
    return v58;
  }
  CFStringGetTypeID();
  CFDictionaryGetTypedValue();
  CFDictionaryGetTypeID();
  TypedCFDictionaryRef Value = (const __CFDictionary *)CFDictionaryGetTypedValue();
  CFAllocatorRef v33 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (TypedValue) {
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, TypedValue);
  }
  else {
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  }
  CFMutableDictionaryRef v31 = Mutable;
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return -12747;
  }
  CFDictionarySetValue(*(CFMutableDictionaryRef *)(v9 + 24), v12, a2);
  if (!CFDictionaryGetInt64())
  {
    if (gLogCategory_APSNetworkClockPTP <= 30
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFArrayAppendValue(*(CFMutableArrayRef *)(v9 + 32), a2);
  }
  if (ptpClock_isPeerHTBuddy(a1, a2)) {
    ++*(void *)(v9 + 48);
  }
  uint64_t v35 = CFDictionarySetInt64();
  unsigned int v58 = v35;
  if (v35)
  {
    APSLogErrorAt(v35);
    goto LABEL_102;
  }
  CFAllocatorRef allocator = v33;
  CFDictionarySetValue(*(CFMutableDictionaryRef *)(v9 + 40), @"ClockPorts", v31);
  CFDictionaryRef v18 = 0;
  char v57 = 1;
  a4 = v52;
LABEL_74:
  CFDictionaryGetTypeID();
  CFDictionaryRef v36 = (const __CFDictionary *)CFDictionaryGetTypedValue();
  uint64_t v37 = CMBaseObjectGetDerivedStorage();
  valuePtr.CMTimeValue value = 0;
  if (!v36)
  {
    int v54 = -71971;
    goto LABEL_118;
  }
  uint64_t v38 = v37;
  if (!*(void *)(v37 + 64))
  {
LABEL_118:
    APSLogErrorAt(0);
    if (gLogCategory_APSNetworkClockPTP <= 90
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    unsigned int v58 = v54;
    uint64_t v49 = 0;
    goto LABEL_123;
  }
  CFTypeRef v39 = CFDictionaryGetValue(v36, @"ID");
  if (!v39)
  {
    int v54 = -71971;
    goto LABEL_118;
  }
  if (CFDictionaryGetInt64())
  {
    if (gLogCategory_APSNetworkClockPTP <= 30
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
LABEL_89:
      LogPrintF();
    }
  }
  else
  {
    int v40 = CFDictionaryGetValue(*(CFDictionaryRef *)(v38 + 40), @"ID");
    if (!v40) {
      goto LABEL_118;
    }
    unsigned int v41 = v40;
    CFDictionaryRef v42 = (const __CFDictionary *)CFDictionaryGetValue(v36, @"ClockPorts");
    if (v42 && CFDictionaryGetValue(v42, v41))
    {
      uint64_t v53 = v31;
      CFDictionaryRef v43 = (const __CFDictionary *)CFDictionaryGetValue(*(CFDictionaryRef *)(v38 + 40), @"ClockPorts");
      if (v43
        && (CFDictionaryRef v44 = v43,
            CFNumberRef v45 = (const __CFNumber *)CFDictionaryGetValue(v36, @"ClockID"),
            int v46 = CFDictionaryGetValue(v44, v39),
            v45)
        && v46)
      {
        CFNumberGetValue(v45, kCFNumberSInt64Type, &valuePtr);
        CFGetInt64Ranged();
        CFGetInt64Ranged();
        if (gLogCategory_APSNetworkClockPTP <= 50
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        CM8021ASClockOverridePortReceiveMatching();
        char v47 = CFDictionaryCreateMutableCopy(allocator, 0, v36);
        if (v47)
        {
          unsigned int v48 = v47;
          CFDictionarySetValue(v47, @"IsOverridden", (const void *)*MEMORY[0x1E4F1CFD0]);
          CFDictionarySetValue(*(CFMutableDictionaryRef *)(v38 + 24), v39, v48);
          CFRelease(v48);
          CFMutableDictionaryRef v31 = v53;
          goto LABEL_95;
        }
        CFMutableDictionaryRef v31 = v53;
        int v54 = -71970;
      }
      else
      {
        CFMutableDictionaryRef v31 = v53;
      }
      goto LABEL_118;
    }
    if (gLogCategory_APSNetworkClockPTP <= 60
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_89;
    }
  }
LABEL_95:
  unsigned int v58 = 0;
  if (!a3
    || (uint64_t v49 = APSNetworkClockCopyPeerAsSerializablePeerDictionary(*(CFDictionaryRef *)(v9 + 40), a3), (v58 = v49) == 0))
  {
    if (a4) {
      *a4 = v57;
    }
    if (v18) {
      goto LABEL_100;
    }
    goto LABEL_101;
  }
LABEL_123:
  APSLogErrorAt(v49);
  if (v18) {
LABEL_100:
  }
    CFRelease(v18);
LABEL_101:
  if (v31) {
LABEL_102:
  }
    CFRelease(v31);
  return v58;
}

uint64_t ptpClock_enablePortsBasedOnTopology()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t result = *(void *)(DerivedStorage + 40);
  if (result)
  {
    uint64_t result = CFDictionaryContainsKey((CFDictionaryRef)result, @"ClockPorts");
    if (result)
    {
      uint64_t result = CFDictionaryContainsKey(*(CFDictionaryRef *)(DerivedStorage + 40), @"HTAddress");
      if (!result)
      {
        CFStringGetTypeID();
        TypedCFDictionaryRef Value = CFDictionaryGetTypedValue();
        uint64_t v3 = CMBaseObjectGetDerivedStorage();
        CFIndex Count = CFDictionaryGetCount(*(CFDictionaryRef *)(v3 + 24));
        if (!TypedValue) {
          goto LABEL_13;
        }
        uint64_t v5 = Count;
        CFArrayRef v6 = (const __CFArray *)FigCFDictionaryCopyArrayOfValues();
        if (v5 < 1)
        {
LABEL_9:
          if (!v6) {
            goto LABEL_13;
          }
        }
        else
        {
          CFIndex v7 = 0;
          while (1)
          {
            CFArrayGetValueAtIndex(v6, v7);
            CFStringGetTypeID();
            CFDictionaryGetTypedValue();
            if (FigCFEqual()) {
              break;
            }
            if (v5 == ++v7) {
              goto LABEL_9;
            }
          }
          if (!v6) {
            goto LABEL_13;
          }
        }
        CFRelease(v6);
LABEL_13:
        CFDictionaryGetInt64();
        return CFDictionaryApplyBlock();
      }
    }
  }
  return result;
}

uint64_t ptpClock_firePeersChangedNotification()
{
  CMBaseObjectGetDerivedStorage();
  CMNotificationCenterGetDefaultLocalCenter();

  return FigDispatchAsyncPostNotification();
}

void __ptpClock_enablePortsBasedOnTopology_block_invoke(uint64_t a1, const void *a2, const __CFDictionary *a3)
{
  uint64_t v5 = *(void *)(a1 + 40);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(void *)(DerivedStorage + 64))
  {
    goto LABEL_25;
  }
  uint64_t v7 = DerivedStorage;
  CFDictionaryGetTypeID();
  TypedCFDictionaryRef Value = (const __CFDictionary *)CFDictionaryGetTypedValue();
  if (!CFDictionaryContainsKey(TypedValue, a2)) {
    return;
  }
  CFDictionaryGetInt64Ranged();
  CFStringGetTypeID();
  CFDictionaryGetTypedValue();
  if (v5) {
    BOOL v9 = FigCFEqual() != 0;
  }
  else {
    BOOL v9 = 1;
  }
  if (v9 == (CFDictionaryGetInt64() == 0))
  {
    if (v9)
    {
      if (gLogCategory_APSNetworkClockPTP <= 50
        && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      CM8021ASClockEnablePort();
    }
    else
    {
      if (gLogCategory_APSNetworkClockPTP <= 50
        && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      CM8021ASClockDisablePort();
    }
    CFMutableDictionaryRef MutableCopy = CFDictionaryCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, a3);
    if (MutableCopy)
    {
      CFIndex v11 = MutableCopy;
      uint64_t v12 = (const void **)MEMORY[0x1E4F1CFD0];
      if (!v9) {
        uint64_t v12 = (const void **)MEMORY[0x1E4F1CFC8];
      }
      CFDictionarySetValue(MutableCopy, @"IsEnabled", *v12);
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(v7 + 24), a2, v11);
      CFRelease(v11);
      return;
    }
LABEL_25:
    APSLogErrorAt(0);
    return;
  }
  if (gLogCategory_APSNetworkClockPTP <= 30
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
}

uint64_t ptpClock_copyRelevantPortAddressesFromPeer(uint64_t a1, CFDictionaryRef theDict, void *a3)
{
  CFArrayRef Value = (const __CFArray *)CFDictionaryGetValue(theDict, @"Addresses");
  if (CFDictionaryGetInt64())
  {
    CFDictionaryRef ValueAtIndex = CFDictionaryGetValue(theDict, @"PreferredAddress");
    if (ValueAtIndex) {
      goto LABEL_15;
    }
    if (ptpClock_isPeerHTBuddy(a1, theDict))
    {
      CFDictionaryRef ValueAtIndex = CFDictionaryGetValue(theDict, @"HTAddress");
      if (ValueAtIndex) {
        goto LABEL_14;
      }
    }
    else
    {
      CFDictionaryRef ValueAtIndex = 0;
    }
    if (Value)
    {
      if (CFArrayGetCount(Value) < 1) {
        goto LABEL_19;
      }
      CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(Value, 0);
    }
LABEL_14:
    if (ValueAtIndex)
    {
LABEL_15:
      CFMutableDictionaryRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 1, MEMORY[0x1E4F1D510]);
      if (!Mutable)
      {
        APSLogErrorAt(0);
        return 4294895326;
      }
      CFTypeRef v8 = Mutable;
      CFArrayAppendValue(Mutable, ValueAtIndex);
      if (a3) {
        goto LABEL_17;
      }
      goto LABEL_7;
    }
LABEL_19:
    uint64_t v9 = 4294895325;
    APSLogErrorAt(0);
    return v9;
  }
  CFTypeRef v8 = CFRetain(Value);
  if (a3)
  {
LABEL_17:
    uint64_t v9 = 0;
    *a3 = v8;
    return v9;
  }
LABEL_7:
  if (v8) {
    CFRelease(v8);
  }
  return 0;
}

void ptpClock_closeClockPortsForPeer(uint64_t a1, const __CFDictionary *a2)
{
  CFArrayRef theArray = 0;
  if (!*(void *)(CMBaseObjectGetDerivedStorage() + 64))
  {
    uint64_t v4 = 0;
LABEL_12:
    APSLogErrorAt(v4);
    goto LABEL_13;
  }
  if (!CFDictionaryGetValue(a2, @"InterfaceName")) {
    goto LABEL_13;
  }
  uint64_t v4 = ptpClock_copyRelevantPortAddressesFromPeer(a1, a2, &theArray);
  if (v4) {
    goto LABEL_12;
  }
  for (CFIndex i = 0; i < CFArrayGetCount(theArray); ++i)
  {
    int v6 = *((unsigned __int8 *)CFArrayGetValueAtIndex(theArray, i) + 17);
    if (v6 == 30)
    {
      CM8021ASClockRemoveIPv6Port();
    }
    else if (v6 == 2)
    {
      CM8021ASClockRemoveIPv4Port();
    }
  }
LABEL_13:
  if (theArray) {
    CFRelease(theArray);
  }
}

double __ptpClock_getPerPortRateForPeer_block_invoke()
{
  int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"ptpNonTightSyncRateMs", 0, 2000);
  CMTimeMake(&v2, IntWithOverrideAndDefault, 1000);
  double result = *(double *)&v2.value;
  *(CMTime *)ptpClock_getPerPortRateForPeer_sNonTightSyncRate = v2;
  return result;
}

uint64_t ptpClock_RemovePeer(uint64_t a1, const void *a2, __CFDictionary **a3, unsigned char *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (*(unsigned char *)(DerivedStorage + 9))
  {
LABEL_9:
    uint64_t v10 = 0;
    goto LABEL_10;
  }
  uint64_t v9 = ptpClock_removePeerInternal(a1, a2);
  uint64_t v10 = v9;
  if (v9 != -72291)
  {
    if (!v9)
    {
      if (!a3
        || (uint64_t v9 = APSNetworkClockCopyPeerAsSerializablePeerDictionary(*(CFDictionaryRef *)(DerivedStorage + 40), a3),
            !v9))
      {
        if (a4) {
          *a4 = 1;
        }
        ptpClock_enablePortsBasedOnTopology();
        ptpClock_firePeersChangedNotification();
        goto LABEL_9;
      }
      uint64_t v10 = v9;
    }
    APSLogErrorAt(v9);
  }
LABEL_10:
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v10;
}

uint64_t ptpClock_AddOrUpdatePeer(uint64_t a1, const __CFDictionary *a2, __CFDictionary **a3, unsigned __int8 *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  __int16 v14 = 0;
  unsigned __int8 v13 = 0;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (!*(unsigned char *)(DerivedStorage + 9))
  {
    if (!*(void *)(DerivedStorage + 40))
    {
      APSLogErrorAt(0);
      uint64_t v11 = 4294895323;
      goto LABEL_12;
    }
    uint64_t isClockPortMatrixComplete = ptpClock_isClockPortMatrixComplete(a1, (char *)&v14 + 1);
    if (isClockPortMatrixComplete)
    {
      uint64_t v11 = isClockPortMatrixComplete;
    }
    else
    {
      uint64_t isClockPortMatrixComplete = ptpClock_addOrUpdatePeerInternal(a1, a2, a3, (char *)&v13);
      if (isClockPortMatrixComplete)
      {
        uint64_t v11 = isClockPortMatrixComplete;
      }
      else
      {
        if (HIBYTE(v14)
          || (uint64_t isClockPortMatrixComplete = ptpClock_isClockPortMatrixComplete(a1, (char *)&v14),
              !isClockPortMatrixComplete))
        {
          int v10 = v13;
          if (a4) {
            *a4 = v13;
          }
          if (v10 | v14)
          {
            ptpClock_enablePortsBasedOnTopology();
            ptpClock_firePeersChangedNotification();
          }
          goto LABEL_11;
        }
        uint64_t v11 = isClockPortMatrixComplete;
      }
    }
    APSLogErrorAt(isClockPortMatrixComplete);
    goto LABEL_12;
  }
LABEL_11:
  uint64_t v11 = 0;
LABEL_12:
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v11;
}

uint64_t ptpClock_isClockPortMatrixComplete(uint64_t a1, char *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    APSLogErrorAt(0);
    return 4294895325;
  }
  if (!*(void *)(DerivedStorage + 40))
  {
    APSLogErrorAt(0);
    return 4294895323;
  }
  uint64_t v5 = CMBaseObjectGetDerivedStorage();
  CFArrayRef v6 = (const __CFArray *)FigCFDictionaryCopyArrayOfValues();
  if (!v6)
  {
    APSLogErrorAt(0);
LABEL_32:
    uint64_t v17 = 4294895326;
    APSLogErrorAt(4294895326);
    return v17;
  }
  CFArrayRef v7 = v6;
  CFMutableDictionaryRef MutableCopy = CFArrayCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, v6);
  if (!MutableCopy)
  {
    APSLogErrorAt(0);
    CFRelease(v7);
    goto LABEL_32;
  }
  CFArrayRef v9 = MutableCopy;
  int v10 = *(const void **)(v5 + 40);
  if (v10) {
    CFArrayAppendValue(MutableCopy, v10);
  }
  CFRelease(v7);
  for (CFIndex i = 0; i < CFArrayGetCount(v9); ++i)
  {
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(v9, i);
    if (CFDictionaryGetInt64())
    {
      CMBaseObjectGetDerivedStorage();
      CFArrayRef theArray = 0;
      ptpClock_copyPeerListForPeerInternal(a1, ValueAtIndex, (CFTypeRef *)&theArray);
      CFArrayRef v13 = theArray;
      if (theArray)
      {
        CFIndex Count = CFArrayGetCount(theArray);
        CFRelease(v13);
      }
      else
      {
        CFIndex Count = 0;
      }
      CFDictionaryGetTypeID();
      TypedCFArrayRef Value = (const __CFDictionary *)CFDictionaryGetTypedValue();
      if (!TypedValue || CFDictionaryGetCount(TypedValue) < Count)
      {
        if (gLogCategory_APSNetworkClockPTP <= 30
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        char v16 = 0;
        goto LABEL_26;
      }
    }
  }
  if (gLogCategory_APSNetworkClockPTP <= 30
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  char v16 = 1;
LABEL_26:
  *a2 = v16;
  CFRelease(v9);
  return 0;
}

uint64_t ptpClock_ConvertNetworkTimeToUpTicks(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  uint64_t v16 = *MEMORY[0x1E4F143B8];
  uint64_t v12 = 0;
  CMTimeMake(&v9, 1000000000 * *(int *)(a2 + 16) + ((1000000000 * (unint64_t)*(unsigned int *)(a2 + 12)) >> 32), 1000000000);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  long long v10 = *MEMORY[0x1E4F1F9F8];
  CMTimeEpoch v11 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  if (*(void *)(DerivedStorage + 64))
  {
    CMTime hostTime = v9;
    CM8021ASClockGetHostTimeForClockTime();
    uint64_t v6 = v12;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v6 = 0;
  }
  CMTimeValue v14 = v10;
  CMTimeScale v15 = DWORD2(v10);
  uint64_t v7 = 4294895322;
  if (v6 && (BYTE12(v10) & 1) != 0 && (BYTE12(v10) & 0x1D) == 1)
  {
    if (v6 == *(void *)a2)
    {
      hostTime.CMTimeValue value = v14;
      hostTime.CMTimeScale timescale = v15;
      hostTime.CMTimeFlags flags = HIDWORD(v10);
      hostTime.CMTimeEpoch epoch = v11;
      uint64_t v7 = 0;
      *a3 = CMClockConvertHostTimeToSystemUnits(&hostTime);
      return v7;
    }
    uint64_t v7 = 4294895320;
  }
  APSLogErrorAt(0);
  if (gLogCategory_APSNetworkClockPTP <= 90
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v7;
}

uint64_t ptpClock_ConvertUpTicksToNetworkTime(uint64_t a1, uint64_t a2, uint64_t a3)
{
  uint64_t v13 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v11 = 0;
  memset(&v10, 0, sizeof(v10));
  CMClockMakeHostTimeFromSystemUnits(&v10, a2);
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  CMTime v12 = v10;
  ptpClock_getClockTimeForHostTime((uint64_t)&time);
  v12.CMTimeValue value = time.value;
  v12.CMTimeScale timescale = time.timescale;
  if ((time.flags & 0x1D) == 1)
  {
    time.CMTimeValue value = v12.value;
    time.CMTimeScale timescale = v12.timescale;
    double Seconds = CMTimeGetSeconds(&time);
    uint64_t v7 = 0;
    *(void *)a3 = v11;
    *(void *)(a3 + 8) = vcvtd_n_u64_f64(Seconds - floor(Seconds), 0x40uLL);
    *(_DWORD *)(a3 + 16) = vcvtmd_s64_f64(Seconds);
    *(_DWORD *)(a3 + 20) = 0;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v7 = 4294895322;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v7;
}

uint64_t ptpClock_getClockTimeForHostTime(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = (_OWORD *)MEMORY[0x1E4F1F9F8];
  *(void *)(a1 + 16) = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  *(_OWORD *)a1 = *v3;
  if (*(void *)(DerivedStorage + 64)) {
    return CM8021ASClockGetClockTimeForHostTime();
  }

  return APSLogErrorAt(0);
}

uint64_t ptpClock_GetSynchronizedNetworkTime(uint64_t a1, uint64_t a2)
{
  uint64_t v12 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v10, 0, sizeof(v10));
  CMClockRef HostTimeClock = CMClockGetHostTimeClock();
  CMClockGetTime(&v10, HostTimeClock);
  uint64_t v9 = 0;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  CMTime v11 = v10;
  ptpClock_getClockTimeForHostTime((uint64_t)&time);
  v11.CMTimeValue value = time.value;
  v11.CMTimeScale timescale = time.timescale;
  if ((time.flags & 0x1D) == 1)
  {
    time.CMTimeValue value = v11.value;
    time.CMTimeScale timescale = v11.timescale;
    double Seconds = CMTimeGetSeconds(&time);
    uint64_t v6 = 0;
    *(void *)a2 = v9;
    *(void *)(a2 + 8) = vcvtd_n_u64_f64(Seconds - floor(Seconds), 0x40uLL);
    *(_DWORD *)(a2 + 16) = vcvtmd_s64_f64(Seconds);
    *(_DWORD *)(a2 + 20) = 0;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v6 = 4294895322;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v6;
}

uint64_t ptpClock_SetProperty(uint64_t a1, uint64_t a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
  if (a2)
  {
    if (gLogCategory_APSNetworkClockPTP <= 90
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v4 = 4294954509;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v4 = 4294895325;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
  return v4;
}

uint64_t ptpClock_CopyProperty(int a1, CFTypeRef cf1, uint64_t a3, CFTypeRef *a4)
{
  if (!CFEqual(cf1, @"NetworkClock_Type"))
  {
    if (CFEqual(cf1, @"PortLocal"))
    {
      uint64_t v6 = (__CFString *)*MEMORY[0x1E4F1D398];
      goto LABEL_5;
    }
    uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
    pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 16));
    if (CFEqual(cf1, @"SourceClock"))
    {
      CMTime v10 = *(const void **)(DerivedStorage + 72);
      if (!v10)
      {
        uint64_t v7 = 4294895323;
LABEL_27:
        APSLogErrorAt((uint64_t)v10);
        pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
        return v7;
      }
      goto LABEL_14;
    }
    if (CFEqual(cf1, @"IsStarted"))
    {
      CMTime v11 = (const void **)MEMORY[0x1E4F1CFD0];
      if (!*(unsigned char *)(DerivedStorage + 80)) {
        CMTime v11 = (const void **)MEMORY[0x1E4F1CFC8];
      }
LABEL_13:
      CMTime v10 = *v11;
LABEL_14:
      *a4 = CFRetain(v10);
      goto LABEL_15;
    }
    if (CFEqual(cf1, @"IsLocked"))
    {
      if (*(void *)(DerivedStorage + 64))
      {
        int IsLocked = CM8021ASClockIsLocked();
        CMTime v11 = (const void **)MEMORY[0x1E4F1CFC8];
        if (IsLocked) {
          CMTime v11 = (const void **)MEMORY[0x1E4F1CFD0];
        }
        goto LABEL_13;
      }
      goto LABEL_25;
    }
    if (CFEqual(cf1, @"DiagnosticString"))
    {
      if (!*(void *)(DerivedStorage + 64))
      {
LABEL_25:
        uint64_t v7 = 4294895323;
LABEL_26:
        CMTime v10 = (const void *)v7;
        goto LABEL_27;
      }
      CMTime v10 = (const void *)CM8021ASClockCopyProperty();
      if (v10)
      {
        uint64_t v7 = (uint64_t)v10;
        goto LABEL_27;
      }
    }
    else
    {
      if (!CFEqual(cf1, @"Metrics"))
      {
        if (gLogCategory_APSNetworkClockPTP <= 90
          && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v7 = 4294954509;
        goto LABEL_26;
      }
      CMTime v10 = (const void *)ptpClock_copyClockMetrics();
      if (v10)
      {
        uint64_t v7 = (uint64_t)v10;
        goto LABEL_27;
      }
    }
LABEL_15:
    pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 16));
    return 0;
  }
  uint64_t v6 = @"NetworkClockType_PTP";
LABEL_5:
  uint64_t v7 = 0;
  *a4 = CFRetain(v6);
  return v7;
}

uint64_t ptpClock_copyClockMetrics()
{
  uint64_t v5 = 0;
  uint64_t v6 = &v5;
  uint64_t v7 = 0x2000000000;
  int v8 = 0;
  if (!*(void *)(CMBaseObjectGetDerivedStorage() + 64))
  {
    uint64_t v3 = v6;
    int v4 = -6709;
    goto LABEL_7;
  }
  uint64_t v0 = CM8021ASClockCopyProperty();
  *((_DWORD *)v6 + 6) = v0;
  if (!v0)
  {
    APSLogErrorAt(0);
    uint64_t v3 = v6;
    int v4 = -71974;
LABEL_7:
    *((_DWORD *)v3 + 6) = v4;
    goto LABEL_4;
  }
  APSLogErrorAt(v0);
LABEL_4:
  uint64_t v1 = *((unsigned int *)v6 + 6);
  _Block_object_dispose(&v5, 8);
  return v1;
}

void __ptpClock_copyClockMetrics_block_invoke(uint64_t a1, const void *a2)
{
  if (!*(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24))
  {
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (*(void *)(a1 + 40))
    {
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      FigCFDictionarySetValueFromKeyInDict();
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 40), a2, Mutable);
      if (!Mutable) {
        return;
      }
    }
    else
    {
      APSLogErrorAt(0);
      *(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = -71970;
      if (!Mutable) {
        return;
      }
    }
    CFRelease(Mutable);
  }
}

__CFString *ptpClock_CopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APNetworkPTPClock %p>", a1);
  return Mutable;
}

void ptpClock_Finalize()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSNetworkClockPTP <= 50
    && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(void *)DerivedStorage)
  {
    dispatch_release(*(dispatch_object_t *)DerivedStorage);
    *(void *)uint64_t DerivedStorage = 0;
  }
  FigSimpleMutexDestroy();
  if (*(void *)(DerivedStorage + 64) || *(void *)(DerivedStorage + 72))
  {
    if (gLogCategory_APSNetworkClockPTP <= 90
      && (gLogCategory_APSNetworkClockPTP != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v1 = *(const void **)(DerivedStorage + 64);
    if (v1)
    {
      CFRelease(v1);
      *(void *)(DerivedStorage + 64) = 0;
    }
    CMTime v2 = *(const void **)(DerivedStorage + 72);
    if (v2)
    {
      CFRelease(v2);
      *(void *)(DerivedStorage + 72) = 0;
    }
  }
  uint64_t v3 = *(const void **)(DerivedStorage + 24);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(DerivedStorage + 24) = 0;
  }
  int v4 = *(const void **)(DerivedStorage + 32);
  if (v4)
  {
    CFRelease(v4);
    *(void *)(DerivedStorage + 32) = 0;
  }
  uint64_t v5 = *(const void **)(DerivedStorage + 40);
  if (v5)
  {
    CFRelease(v5);
    *(void *)(DerivedStorage + 40) = 0;
  }
  uint64_t v6 = *(const void **)(DerivedStorage + 56);
  if (v6)
  {
    CFRelease(v6);
    *(void *)(DerivedStorage + 56) = 0;
  }
}

CFDataRef CreateBinaryTXTRecordFromTXTRecordBytes(void *txtRecord, uint16_t txtLen, int *a3)
{
  uint64_t v54 = *MEMORY[0x1E4F143B8];
  unsigned int Count = TXTRecordGetCount(txtLen, txtRecord);
  long long v49 = 0u;
  long long v50 = 0u;
  long long v47 = 0u;
  long long v48 = 0u;
  long long v45 = 0u;
  long long v46 = 0u;
  long long v43 = 0u;
  long long v44 = 0u;
  long long v41 = 0u;
  long long v42 = 0u;
  long long v39 = 0u;
  long long v40 = 0u;
  long long v37 = 0u;
  long long v38 = 0u;
  *(_OWORD *)key = 0u;
  long long v36 = 0u;
  CMTimeValue value = 0;
  uint8_t valueLen = 0;
  UInt8 bytes = 1;
  CFIndex v29 = 0;
  CFMutableDictionaryRef Mutable = CFDataCreateMutable(0, 0);
  CFDataRef v8 = Mutable;
  if (!Mutable)
  {
    APSLogErrorAt(0);
    int v25 = -6728;
    goto LABEL_44;
  }
  CFDataAppendBytes(Mutable, &bytes, 1);
  CFMutableDictionaryRef v9 = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!v9)
  {
    APSLogErrorAt(0);
    int v25 = -6728;
    goto LABEL_61;
  }
  CFMutableDictionaryRef v10 = v9;
  int v27 = a3;
  _LogNewBytes(v8, 0, &v29);
  if (!Count)
  {
LABEL_43:
    CFRelease(v10);
    int v25 = 0;
    a3 = v27;
    goto LABEL_44;
  }
  uint16_t v11 = 0;
  unsigned int v28 = Count;
  while (1)
  {
    if (TXTRecordGetItemAtIndex(txtLen, txtRecord, v11, 0x100u, key, &valueLen, (const void **)&value))
    {
      APSLogErrorAt(0);
      goto LABEL_58;
    }
    uint64_t v12 = value;
    if (*(_DWORD *)key == 6580583) {
      break;
    }
    uint64_t appended = _AppendKeyInfoByName(v8, (int)v10, key, (UInt8 *)value, valueLen);
    if (appended)
    {
      int v25 = appended;
      APSLogErrorAt(appended);
      goto LABEL_59;
    }
LABEL_8:
    _LogNewBytes(v8, (uint64_t)key, &v29);
    if (Count <= ++v11) {
      goto LABEL_43;
    }
  }
  size_t v51 = 0;
  v52 = 0;
  uint64_t v53 = 0;
  unsigned __int8 v34 = 0;
  __int16 v33 = 0;
  if (valueLen)
  {
    CFDataRef v14 = v8;
    CMTimeScale v15 = v10;
    unint64_t v16 = 0;
    uint64_t v17 = (char *)value + valueLen;
    do
    {
      CFDictionaryRef v18 = (char *)memchr(v12, 43, ((_BYTE)v17 - (_BYTE)v12));
      if (v18 && v16 == 2)
      {
        if (gLogCategory_APSBinaryTXTRecord <= 60
          && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        CFDictionaryRef v18 = 0;
      }
      (&v51)[v16] = (UInt8 *)v12;
      if (v18) {
        char v19 = (char)v18;
      }
      else {
        char v19 = (char)v17;
      }
      if (v18) {
        uint64_t v20 = v18 + 1;
      }
      else {
        uint64_t v20 = v17;
      }
      *((unsigned char *)&v33 + v16) = v19 - (_BYTE)v12;
      if (v16 > 1) {
        break;
      }
      ++v16;
      uint64_t v12 = v20;
    }
    while (v20 < v17);
    CFMutableDictionaryRef v10 = v15;
    CFDataRef v8 = v14;
    unsigned int Count = v28;
    if (v51)
    {
      if ((_BYTE)v33)
      {
        uint64_t v21 = _AppendKeyInfoByName(v8, (int)v10, "gid", v51, v33);
        if (v21)
        {
          int v25 = v21;
        }
        else
        {
          CMTimeEpoch v22 = v52;
          if (!v52) {
            goto LABEL_8;
          }
          unsigned int v23 = HIBYTE(v33);
          if (HIBYTE(v33) > 3u)
          {
            CFIndex v24 = HIBYTE(v33);
            goto LABEL_37;
          }
          uint64_t v21 = _AppendKeyInfoByName(v8, (int)v10, "bin_grp_cmid", v52, HIBYTE(v33));
          if (v21)
          {
            int v25 = v21;
          }
          else
          {
            CMTimeEpoch v22 = v53;
            if (!v53) {
              goto LABEL_8;
            }
            CFIndex v24 = v34;
            if (!v34) {
              goto LABEL_40;
            }
LABEL_37:
            uint64_t v21 = _AppendKeyInfoByName(v8, (int)v10, "bin_grp_rcid", v22, v24);
            if (!v21)
            {
              if (v23 < 4 || !v53) {
                goto LABEL_8;
              }
LABEL_40:
              if (gLogCategory_APSBinaryTXTRecord <= 90)
              {
                a3 = v27;
                if (gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize()) {
                  goto LABEL_51;
                }
LABEL_49:
                LogPrintF();
                goto LABEL_51;
              }
LABEL_58:
              int v25 = -6705;
LABEL_59:
              a3 = v27;
              goto LABEL_60;
            }
            int v25 = v21;
          }
        }
        APSLogErrorAt(v21);
        a3 = v27;
        goto LABEL_52;
      }
    }
  }
  if (gLogCategory_APSBinaryTXTRecord > 90) {
    goto LABEL_58;
  }
  a3 = v27;
  if (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()) {
    goto LABEL_49;
  }
LABEL_51:
  int v25 = -6705;
LABEL_52:
  if (gLogCategory_APSBinaryTXTRecord <= 90
    && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
LABEL_60:
  CFRelease(v10);
LABEL_61:
  CFRelease(v8);
  CFDataRef v8 = 0;
LABEL_44:
  if (a3) {
    *a3 = v25;
  }
  return v8;
}

CFIndex _LogNewBytes(const __CFData *a1, uint64_t a2, CFIndex *a3)
{
  CFIndex result = CFDataGetLength(a1);
  if (result == *a3)
  {
    if (a2)
    {
      if (gLogCategory_APSBinaryTXTRecord <= 30)
      {
        if (gLogCategory_APSBinaryTXTRecord != -1) {
          return LogPrintF();
        }
        CFIndex result = _LogCategory_Initialize();
        if (result) {
          return LogPrintF();
        }
      }
    }
  }
  else
  {
    CFIndex v7 = result;
    if (gLogCategory_APSBinaryTXTRecord <= 30)
    {
      if (gLogCategory_APSBinaryTXTRecord != -1 || (CFIndex result = _LogCategory_Initialize(), result))
      {
        CFDataGetBytePtr(a1);
        CFIndex result = LogPrintF();
      }
    }
    *a3 = v7;
  }
  return result;
}

uint64_t _AppendKeyInfoByName(__CFData *a1, int a2, char *__s2, UInt8 *a4, CFIndex a5)
{
  unsigned int length_4 = 0;
  uint64_t KeyInfo = _GetKeyInfo(0, __s2, (int *)&length_4);
  if (length_4)
  {
    if (gLogCategory_APSBinaryTXTRecord > 90
      || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
    {
      return length_4;
    }
LABEL_86:
    LogPrintF();
    return length_4;
  }
  CFMutableDictionaryRef v9 = (const UInt8 *)KeyInfo;
  if (!KeyInfo)
  {
    unsigned int length_4 = -6762;
    if (gLogCategory_APSBinaryTXTRecord > 90
      || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
    {
      return length_4;
    }
    goto LABEL_86;
  }
  UInt8 buffer = 0;
  int v10 = *(_DWORD *)(KeyInfo + 16);
  if (v10 == 1) {
    return 0;
  }
  unsigned int v54 = 0;
  char v53 = 0;
  switch(v10)
  {
    case 2:
      TextData = _CreateTextData(a4, a5, (int *)&v54);
      uint64_t v32 = v54;
      if (!v54) {
        goto LABEL_41;
      }
      unsigned int length = a5;
      goto LABEL_65;
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
      __endptr = 0;
      uint16_t v11 = strndup((const char *)a4, a5);
      if (v11)
      {
        uint64_t v12 = v11;
        if (!a5)
        {
          TextData = 0;
LABEL_40:
          free(v12);
          goto LABEL_41;
        }
        unsigned int length = a5;
        TextData = 0;
        CFDataRef v14 = v11;
        while (1)
        {
          unint64_t v15 = strtoul(v14, &__endptr, 0);
          if (v15 == -1) {
            break;
          }
          if (__endptr == v14) {
            break;
          }
          unint64_t v16 = v15;
          if (HIDWORD(v15)) {
            break;
          }
          int v17 = *__endptr;
          if (*__endptr)
          {
            if (v17 != 44) {
              break;
            }
            CFDataRef v14 = __endptr + 1;
          }
          else if (!v15)
          {
            goto LABEL_40;
          }
          unsigned int v18 = 0;
          do
          {
            UInt8 bytes = v16;
            if (!TextData)
            {
              TextData = CFDataCreateMutable(0, 0);
              if (!TextData)
              {
                APSLogErrorAt(0);
                free(v12);
                uint64_t v45 = 4294960568;
                goto LABEL_107;
              }
            }
            CFDataAppendBytes(TextData, &bytes, 1);
            v16 >>= 8;
            BOOL v20 = v18++ < 3;
            if (!v17) {
              BOOL v20 = v16;
            }
          }
          while (v20);
          if (!v17) {
            goto LABEL_40;
          }
        }
        APSLogErrorAt(0);
        free(v12);
        if (TextData) {
          CFRelease(TextData);
        }
        uint64_t v45 = 4294960591;
      }
      else
      {
        unsigned int length = a5;
        APSLogErrorAt(0);
        uint64_t v45 = 4294960568;
      }
LABEL_107:
      char v53 = 1;
      unsigned int v54 = v45;
LABEL_108:
      APSLogErrorAt(v45);
      TextData = 0;
LABEL_34:
      uint64_t v21 = v54;
      if (!v54) {
        goto LABEL_41;
      }
LABEL_35:
      if (!v53) {
        goto LABEL_82;
      }
      LODWORD(__endptr) = 0;
      CFDataRef v23 = _CreateTextData(a4, length, (int *)&__endptr);
      TextData = v23;
      if (!__endptr)
      {
        char v24 = 0;
        if (v23) {
          goto LABEL_42;
        }
        return 0;
      }
      uint64_t v21 = v54;
      if (!v54) {
        goto LABEL_41;
      }
LABEL_82:
      APSLogErrorAt(v21);
      if (!TextData) {
        goto LABEL_84;
      }
      goto LABEL_83;
    case 8:
      TextData = _CreateMACAddressData((uint64_t)a4, a5, &v53, (int *)&v54);
      uint64_t v32 = v54;
      if (!v54) {
        goto LABEL_41;
      }
      unsigned int length = a5;
LABEL_65:
      APSLogErrorAt(v32);
      goto LABEL_34;
    case 9:
    case 10:
      TextData = _CreateUUIDData((uint64_t)a4, a5, &v53, (int *)&v54);
      uint64_t v21 = v54;
      if (!v54) {
        goto LABEL_41;
      }
      unsigned int length = a5;
      if (gLogCategory_APSBinaryTXTRecord > 50) {
        goto LABEL_35;
      }
      if (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()) {
LABEL_123:
      }
        LogPrintF();
      goto LABEL_34;
    case 11:
    case 12:
      unsigned int length = a5;
      TextData = _CreateUUIDData((uint64_t)a4, a5, &v53, (int *)&v54);
      unsigned int v22 = v54;
      if (v54 && v53)
      {
        char v53 = 0;
        TextData = _CreateMACAddressData((uint64_t)a4, a5, &v53, (int *)&v54);
        unsigned int v22 = v54;
      }
      if (v22
        && gLogCategory_APSBinaryTXTRecord <= 50
        && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_123;
      }
      goto LABEL_34;
    case 13:
      LODWORD(__endptr) = 0;
      unsigned int length = a5;
      CFStringRef v33 = CFStringCreateWithBytesNoCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a4, a5, 0x8000100u, 0, (CFAllocatorRef)*MEMORY[0x1E4F1CFA0]);
      if (!v33)
      {
        APSLogErrorAt(0);
LABEL_127:
        char v53 = 1;
        uint64_t v45 = 4294960568;
        unsigned int v54 = -6728;
        goto LABEL_108;
      }
      CFStringRef v34 = v33;
      CFMutableDataRef Mutable = CFDataCreateMutable(0, 0);
      if (!Mutable)
      {
        APSLogErrorAt(0);
        CFRelease(v34);
        goto LABEL_127;
      }
      TextData = Mutable;
      CFDataRef v36 = (const __CFData *)APSFeaturesCreateFromStringRepresentation(v34, (int *)&__endptr);
      CFStringRef cf = v34;
      if (__endptr)
      {
        CFDataRef v37 = v36;
        APSLogErrorAt(__endptr);
      }
      else
      {
        CFDataRef v37 = v36;
        CFMutableDataRef MutableCopy = CFDataCreateMutableCopy(0, 0, v36);
        if (MutableCopy)
        {
          CFDataRef v39 = MutableCopy;
          uint64_t v40 = 0;
          while (!APSFeaturesIsEmpty(v39))
          {
            uint64_t v41 = 0;
            UInt8 bytes = 0;
            do
            {
              if (APSFeaturesHasFeature(v39, v40 + v41))
              {
                bytes |= 1 << v41;
                APSFeaturesClearFeature(v39, v40 + v41);
              }
              ++v41;
            }
            while (v41 != 8);
            CFDataAppendBytes(TextData, &bytes, 1);
            v40 += 8;
          }
          CFRelease(v39);
        }
        else
        {
          APSLogErrorAt(0);
          LODWORD(__endptr) = -6728;
        }
      }
      if (v37) {
        CFRelease(v37);
      }
      CFRelease(cf);
      if (__endptr)
      {
        CFRelease(TextData);
        uint64_t v45 = __endptr;
        char v53 = 1;
        unsigned int v54 = __endptr;
        if (__endptr) {
          goto LABEL_108;
        }
        TextData = 0;
      }
LABEL_41:
      char v24 = 1;
      if (!TextData) {
        return 0;
      }
LABEL_42:
      CFDataAppendBytes(a1, v9, 1);
      if ((*(char *)v9 & 0x80000000) == 0 && ((int v25 = *((_DWORD *)v9 + 4), (v25 - 8) < 5) || v25 == 2))
      {
        LOBYTE(__endptr) = 0;
        char Int64Ranged = CFDictionaryGetInt64Ranged();
        if (Int64Ranged)
        {
          LOBYTE(__endptr) = Int64Ranged | 0x80;
          p_endptr = (const UInt8 *)&__endptr;
LABEL_57:
          CFDataAppendBytes(a1, p_endptr, 1);
LABEL_98:
          CFRelease(TextData);
          return 0;
        }
        int v28 = 1;
      }
      else
      {
        int v28 = 0;
      }
      CFIndex v29 = CFDataGetLength(TextData);
      if (v29 < 121)
      {
        UInt8 v30 = v29;
        if (v24)
        {
          if (v29 == 1) {
            char v31 = v28;
          }
          else {
            char v31 = 1;
          }
          if ((v31 & 1) == 0)
          {
            v57.location = 0;
            v57.unsigned int length = 1;
            CFDataGetBytes(TextData, v57, &buffer);
            if (((char)buffer & 0x80000000) == 0)
            {
              buffer |= 0x80u;
              p_endptr = &buffer;
              goto LABEL_57;
            }
          }
        }
        else
        {
          LOBYTE(__endptr) = 127;
          CFDataAppendBytes(a1, (const UInt8 *)&__endptr, 1);
          if (gLogCategory_APSBinaryTXTRecord <= 50
            && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
        }
        UInt8 buffer = v30;
        CFDataAppendBytes(a1, &buffer, 1);
        BytePtr = CFDataGetBytePtr(TextData);
        CFIndex v47 = CFDataGetLength(TextData);
        CFDataAppendBytes(a1, BytePtr, v47);
        if (v28) {
          CFDictionarySetInt64();
        }
        goto LABEL_98;
      }
      APSLogErrorAt(0);
      LODWORD(v21) = -6705;
LABEL_83:
      CFRelease(TextData);
LABEL_84:
      unsigned int length_4 = v21;
      if (gLogCategory_APSBinaryTXTRecord <= 90
        && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_86;
      }
      return length_4;
    case 14:
      unsigned int length = a5;
      int v42 = APSNANServiceTypeMakeWithString((uint64_t)a4);
      uint64_t v43 = 4294960591;
      if (!v42) {
        goto LABEL_131;
      }
      if (v42 == 1) {
        goto LABEL_132;
      }
      LOBYTE(__endptr) = v42;
      CFDataRef v44 = CFDataCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const UInt8 *)&__endptr, 1);
      if (v44)
      {
        TextData = v44;
        goto LABEL_41;
      }
      uint64_t v43 = 4294960568;
LABEL_131:
      APSLogErrorAt(0);
LABEL_132:
      unsigned int v54 = v43;
      uint64_t v45 = v43;
      goto LABEL_108;
    default:
      uint64_t v21 = 4294960591;
      APSLogErrorAt(4294960591);
      TextData = 0;
      goto LABEL_82;
  }
}

uint64_t _GetKeyInfo(int a1, char *__s2, int *a3)
{
  if (a1 || __s2)
  {
    for (uint64_t i = 0; i != 38; ++i)
    {
      while (1)
      {
        if (a1 && *((unsigned __int8 *)&allKeys + 24 * i) == a1)
        {
LABEL_14:
          int v7 = 0;
          uint64_t result = (uint64_t)&allKeys + 24 * i;
          if (a3) {
            goto LABEL_21;
          }
          return result;
        }
        if (__s2) {
          break;
        }
        if (++i == 38)
        {
          if (gLogCategory_APSBinaryTXTRecord <= 40
            && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          goto LABEL_24;
        }
      }
      if (!strcmp(*((const char **)&allKeys + 3 * i + 1), __s2)) {
        goto LABEL_14;
      }
    }
    if (gLogCategory_APSBinaryTXTRecord <= 90
      && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t result = 0;
    int v7 = -6705;
    if (!a3) {
      return result;
    }
    goto LABEL_21;
  }
  APSLogErrorAt(0);
LABEL_24:
  int v7 = 0;
  uint64_t result = 0;
  if (a3) {
LABEL_21:
  }
    *a3 = v7;
  return result;
}

CFDataRef _CreateTextData(UInt8 *bytes, CFIndex length, int *a3)
{
  CFDataRef v4 = CFDataCreate(0, bytes, length);
  if (!v4)
  {
    APSLogErrorAt(0);
    int v5 = -6728;
    if (!a3) {
      return v4;
    }
    goto LABEL_3;
  }
  int v5 = 0;
  if (a3) {
LABEL_3:
  }
    *a3 = v5;
  return v4;
}

CFDataRef _CreateMACAddressData(uint64_t a1, uint64_t a2, unsigned char *a3, int *a4)
{
  __int16 v10 = 0;
  *(_DWORD *)UInt8 bytes = 0;
  uint64_t v6 = TextToHardwareAddress();
  if (v6)
  {
    int v8 = v6;
    APSLogErrorAt(v6);
  }
  else
  {
    CFDataRef result = CFDataCreate(0, bytes, 6);
    if (result)
    {
      int v8 = 0;
      goto LABEL_4;
    }
    APSLogErrorAt(0);
    int v8 = -6728;
  }
  CFDataRef result = 0;
  if (a3) {
    *a3 = 1;
  }
LABEL_4:
  if (a4) {
    *a4 = v8;
  }
  return result;
}

CFDataRef _CreateUUIDData(uint64_t a1, uint64_t a2, unsigned char *a3, int *a4)
{
  uint64_t v11 = *MEMORY[0x1E4F143B8];
  int v6 = StringToUUID();
  if (!v6)
  {
    CFDataRef v7 = CFDataCreate(0, bytes, 16);
    if (v7)
    {
      CFDataRef v8 = v7;
      int v6 = 0;
      goto LABEL_4;
    }
    APSLogErrorAt(0);
    int v6 = -6728;
  }
  CFDataRef v8 = 0;
  if (a3) {
    *a3 = 1;
  }
LABEL_4:
  if (a4) {
    *a4 = v6;
  }
  return v8;
}

unsigned char *CreateTXTRecordFromBinaryTXTRecord(const __CFData *a1, _DWORD *a2)
{
  uint64_t v59 = *MEMORY[0x1E4F143B8];
  TXTRecordRef txtRecord = 0uLL;
  bzero(v42, 0x800uLL);
  if (!a1)
  {
    APSLogErrorAt(0);
LABEL_141:
    BytePtr = 0;
    goto LABEL_142;
  }
  CFIndex Length = CFDataGetLength(a1);
  if (!Length)
  {
    if (gLogCategory_APSBinaryTXTRecord <= 90
      && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    goto LABEL_141;
  }
  CFIndex v5 = Length;
  BytePtr = CFDataGetBytePtr(a1);
  if (!BytePtr)
  {
    APSLogErrorAt(0);
LABEL_142:
    LODWORD(v25) = -6705;
    goto LABEL_125;
  }
  if (gLogCategory_APSBinaryTXTRecord <= 30)
  {
    if (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    if (gLogCategory_APSBinaryTXTRecord <= 30
      && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  if (*BytePtr != 1)
  {
    LODWORD(v25) = -72420;
    if (gLogCategory_APSBinaryTXTRecord <= 40
      && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    BytePtr = 0;
    goto LABEL_125;
  }
  long long v38 = a2;
  TXTRecordCreate(&txtRecord, 0x200u, buffer);
  int v7 = 0;
  uint64_t v8 = 1;
  while (v8 < v5 && !v7)
  {
    *(_DWORD *)uint8_t valueLen = 0;
    long long value = 0uLL;
    *(void *)&long long v45 = 0;
    uint64_t v9 = v8 + 1;
    uint64_t v10 = BytePtr[v8];
    if (BytePtr[v8])
    {
      uint64_t KeyInfo = (char *)_GetKeyInfo(BytePtr[v8], 0, (int *)valueLen);
      uint64_t v12 = *(unsigned int *)valueLen;
      if (*(_DWORD *)valueLen) {
        goto LABEL_99;
      }
      if (KeyInfo)
      {
        if (v9 >= v5)
        {
          *(_DWORD *)uint8_t valueLen = -6705;
          if (gLogCategory_APSBinaryTXTRecord > 90) {
            goto LABEL_128;
          }
          if (gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize()) {
            goto LABEL_52;
          }
        }
        else
        {
          int v13 = (char)BytePtr[v9];
          uint64_t v9 = v8 + 2;
          if (v13 < 0)
          {
            uint64_t v17 = v13 & 0x7F;
            v40[1] = v13 & 0x7F;
            if (*KeyInfo < 0
              || ((v18 = *((_DWORD *)KeyInfo + 4), (v18 - 8) >= 5) ? (BOOL v19 = v18 == 2) : (BOOL v19 = 1), !v19))
            {
              if (gLogCategory_APSBinaryTXTRecord <= 30
                && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
              {
                LogPrintF();
              }
              uint64_t v12 = _ProcessKeyData(&txtRecord, (uint64_t)KeyInfo, &v40[1], 1u);
              *(_DWORD *)uint8_t valueLen = v12;
              if (v12) {
                goto LABEL_99;
              }
              goto LABEL_52;
            }
            if (gLogCategory_APSBinaryTXTRecord <= 30
              && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            unsigned int v22 = (TXTRecordRef *)&v42[2 * v17];
            if (v22->PrivateData[8])
            {
              uint64_t v12 = _ProcessKeyData(&txtRecord, (uint64_t)KeyInfo, &BytePtr[v42[2 * v17]], v22->PrivateData[8]);
              *(_DWORD *)uint8_t valueLen = v12;
              if (v12) {
                goto LABEL_99;
              }
              goto LABEL_52;
            }
            *(_DWORD *)uint8_t valueLen = -6705;
            if (gLogCategory_APSBinaryTXTRecord > 90
              || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
            {
              goto LABEL_52;
            }
          }
          else
          {
            int v14 = v13;
            if (v13 < 0x79u)
            {
              int v20 = 1;
              LODWORD(v15) = v13;
              goto LABEL_57;
            }
            if (v9 >= v5)
            {
              *(_DWORD *)uint8_t valueLen = -6705;
              if (gLogCategory_APSBinaryTXTRecord > 90)
              {
LABEL_128:
                uint64_t v25 = 4294960591;
LABEL_129:
                APSLogErrorAt(v25);
                BytePtr = 0;
                goto LABEL_125;
              }
              if (gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize()) {
                goto LABEL_52;
              }
            }
            else
            {
              CFIndex v15 = BytePtr[v9];
              uint64_t v9 = v8 + 3;
              int v16 = gLogCategory_APSBinaryTXTRecord;
              if (v14 == 127)
              {
                if (gLogCategory_APSBinaryTXTRecord <= 30
                  && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
                {
                  LogPrintF();
                }
                *(void *)&long long v45 = *((void *)KeyInfo + 2);
                long long value = *(_OWORD *)KeyInfo;
                LODWORD(v45) = 2;
                int v20 = 1;
                uint64_t KeyInfo = (char *)&value;
                goto LABEL_57;
              }
              if (gLogCategory_APSBinaryTXTRecord > 30)
              {
                if (v5 - v9 >= v15)
                {
                  CFIndex v21 = v15;
LABEL_72:
                  int v7 = 0;
                  v9 += v21;
                  goto LABEL_73;
                }
              }
              else
              {
                if (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()) {
                  LogPrintF();
                }
                int v20 = 0;
LABEL_57:
                if (gLogCategory_APSBinaryTXTRecord <= 30
                  && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
                {
                  LogPrintF();
                }
                if (v5 - v9 >= v15)
                {
                  CFIndex v21 = v15;
                  if (!v20) {
                    goto LABEL_72;
                  }
                  uint64_t v12 = _ProcessKeyData(&txtRecord, (uint64_t)KeyInfo, &BytePtr[v9], v15);
                  *(_DWORD *)uint8_t valueLen = v12;
                  if (!v12)
                  {
                    if ((*KeyInfo & 0x80000000) == 0)
                    {
                      int v23 = *((_DWORD *)KeyInfo + 4);
                      if ((v23 - 8) < 5 || v23 == 2)
                      {
                        char v24 = (TXTRecordRef *)&v42[2 * v10];
                        v24->ForceNaturalAlignment = (char *)v9;
                        v24->PrivateData[8] = v15;
                        if (gLogCategory_APSBinaryTXTRecord <= 30
                          && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
                        {
                          LogPrintF();
                        }
                      }
                    }
                    goto LABEL_72;
                  }
LABEL_99:
                  APSLogErrorAt(v12);
LABEL_52:
                  int v7 = 0;
                  goto LABEL_73;
                }
                int v16 = gLogCategory_APSBinaryTXTRecord;
              }
              *(_DWORD *)uint8_t valueLen = -6705;
              if (v16 > 90) {
                goto LABEL_128;
              }
              if (v16 == -1 && !_LogCategory_Initialize()) {
                goto LABEL_52;
              }
            }
          }
        }
      }
      else if (gLogCategory_APSBinaryTXTRecord > 30 {
             || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
      }
      {
        goto LABEL_52;
      }
      LogPrintF();
      goto LABEL_52;
    }
    int v7 = 1;
LABEL_73:
    uint64_t v25 = *(unsigned int *)valueLen;
    uint64_t v8 = v9;
    if (*(_DWORD *)valueLen) {
      goto LABEL_129;
    }
  }
  BytesPtr = TXTRecordGetBytesPtr(&txtRecord);
  unsigned int v27 = TXTRecordGetLength(&txtRecord);
  long long v57 = 0u;
  memset(v58, 0, sizeof(v58));
  long long v55 = 0u;
  long long v56 = 0u;
  long long v53 = 0u;
  long long v54 = 0u;
  long long v51 = 0u;
  long long v52 = 0u;
  long long v49 = 0u;
  long long v50 = 0u;
  long long v47 = 0u;
  long long v48 = 0u;
  long long v45 = 0u;
  long long v46 = 0u;
  long long value = 0u;
  valueLen[0] = 0;
  *(_WORD *)uint64_t v40 = 0;
  if (TXTRecordContainsKey(v27, BytesPtr, "bin_grp_cmid") == 1
    || TXTRecordContainsKey(v27, BytesPtr, "bin_grp_rcid") == 1)
  {
    ValuePtr = TXTRecordGetValuePtr(v27, BytesPtr, "gid", valueLen);
    CFIndex v29 = TXTRecordGetValuePtr(v27, BytesPtr, "bin_grp_cmid", &v40[1]);
    UInt8 v30 = TXTRecordGetValuePtr(v27, BytesPtr, "bin_grp_rcid", v40);
    uint64_t v31 = valueLen[0];
    size_t v32 = v40[1];
    size_t v33 = v40[0];
    if (valueLen[0] + (unint64_t)v40[1] + v40[0] + 2 < 0x100)
    {
      if (ValuePtr)
      {
        CFStringRef v34 = v30;
        __memcpy_chk();
        uint64_t v35 = (char *)&value + v31;
        if (v29)
        {
          char *v35 = 43;
          CFDataRef v36 = v35 + 1;
          memcpy(v36, v29, v32);
          uint64_t v35 = &v36[v32];
        }
        a2 = v38;
        if (v34)
        {
          *v35++ = 43;
          memcpy(v35, v34, v33);
          LOBYTE(v35) = (_BYTE)v35 + v33;
        }
        TXTRecordSetValue(&txtRecord, "gid", (_BYTE)v35 - &value, &value);
      }
      else
      {
        a2 = v38;
        if (gLogCategory_APSBinaryTXTRecord <= 90
          && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
        {
LABEL_118:
          LogPrintF();
        }
      }
    }
    else
    {
      a2 = v38;
      if (gLogCategory_APSBinaryTXTRecord <= 90
        && (gLogCategory_APSBinaryTXTRecord != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_118;
      }
    }
    TXTRecordRemoveValue(&txtRecord, "bin_grp_cmid");
    TXTRecordRemoveValue(&txtRecord, "bin_grp_rcid");
    BytesPtr = TXTRecordGetBytesPtr(&txtRecord);
    unsigned int v27 = TXTRecordGetLength(&txtRecord);
  }
  BytePtr = CFDataCreate(0, (const UInt8 *)BytesPtr, v27);
  if (BytePtr)
  {
    LODWORD(v25) = 0;
  }
  else
  {
    APSLogErrorAt(0);
    LODWORD(v25) = -6728;
  }
LABEL_125:
  if (a2) {
    *a2 = v25;
  }
  TXTRecordDeallocate(&txtRecord);
  return BytePtr;
}

uint64_t _ProcessKeyData(TXTRecordRef *txtRecord, uint64_t a2, unsigned __int8 *value, unsigned int valueSize)
{
  uint64_t v47 = *MEMORY[0x1E4F143B8];
  int v4 = *(_DWORD *)(a2 + 16);
  switch(v4)
  {
    case 2:
      unsigned int v22 = *(const char **)(a2 + 8);
      return TXTRecordSetValue(txtRecord, v22, valueSize, value);
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
      uint64_t v43 = *(const char **)(a2 + 8);
      __s[0] = 0;
      if (!valueSize) {
        goto LABEL_16;
      }
      unsigned __int8 v9 = 0;
      unsigned int v10 = v4 - 5;
      while (2)
      {
        if ((v9 + 4) >= valueSize) {
          uint64_t v11 = valueSize;
        }
        else {
          uint64_t v11 = (v9 + 4);
        }
        if (v11 > v9)
        {
          int v12 = 0;
          int v13 = 0;
          uint64_t v14 = v11 - v9;
          CFIndex v15 = &value[v9];
          do
          {
            int v16 = *v15++;
            v13 |= v16 << v12;
            v12 += 8;
            --v14;
          }
          while (v14);
          unsigned __int8 v9 = v11;
        }
        if (v10 >= 0xFFFFFFFE)
        {
          strlen(__s);
          goto LABEL_15;
        }
        if (valueSize == v9)
        {
LABEL_15:
          SNPrintF();
          if (valueSize <= v9)
          {
LABEL_16:
            uint8_t v17 = strlen(__s);
            return TXTRecordSetValue(txtRecord, v43, v17, __s);
          }
          continue;
        }
        break;
      }
      APSLogErrorAt(0);
      return 4294960591;
    case 8:
      goto LABEL_21;
    case 9:
    case 10:
      BOOL v19 = *(const char **)(a2 + 8);
      return _ProcessUUIDData(txtRecord, v19, (uint64_t)value, valueSize, v4 == 10);
    case 11:
    case 12:
      if (!_ProcessUUIDData(txtRecord, *(const char **)(a2 + 8), (uint64_t)value, valueSize, v4 == 12)) {
        return 0;
      }
LABEL_21:
      CFIndex v21 = *(const char **)(a2 + 8);
      return _ProcessMACAddressData(txtRecord, v21, (uint64_t)value, valueSize);
    case 13:
      int v23 = *(const char **)(a2 + 8);
      CFStringRef theString = 0;
      CFMutableDataRef Mutable = APSFeaturesCreateMutable(0);
      if (Mutable)
      {
        uint64_t v25 = Mutable;
        if (valueSize)
        {
          uint64_t v26 = 0;
          uint64_t v27 = 0;
          do
          {
            uint64_t v28 = 0;
            unsigned int v29 = value[v27];
            do
            {
              if (v29) {
                APSFeaturesSetFeature(v25, v26 + v28);
              }
              v29 >>= 1;
              ++v28;
            }
            while (v28 != 8);
            ++v27;
            v26 += 8;
          }
          while (v27 != valueSize);
        }
        uint64_t v30 = APSFeaturesCopyStringRepresentation((const UInt8 *)v25, &theString);
        if (v30)
        {
          uint64_t v18 = v30;
          APSLogErrorAt(v30);
          CFStringRef v31 = theString;
        }
        else
        {
          __s[0] = 0;
          CFStringRef v31 = theString;
          uint64_t CString = CFStringGetCString(theString, __s, 256, 0x8000100u);
          if (CString)
          {
            uint8_t v33 = strlen(__s);
            uint64_t v34 = TXTRecordSetValue(txtRecord, v23, v33, __s);
            uint64_t v18 = v34;
            if (v34) {
              APSLogErrorAt(v34);
            }
          }
          else
          {
            APSLogErrorAt(CString);
            uint64_t v18 = 4294960591;
          }
        }
        if (v31) {
          CFRelease(v31);
        }
        CFRelease(v25);
      }
      else
      {
        APSLogErrorAt(0);
        return 4294960568;
      }
      return v18;
    case 14:
      uint64_t v35 = *(const char **)(a2 + 8);
      *(void *)__s = 0;
      if (valueSize != 1)
      {
        if (gLogCategory_APSBinaryTXTRecord > 60
          || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
        {
          goto LABEL_69;
        }
LABEL_63:
        LogPrintF();
LABEL_69:
        uint64_t v18 = 0;
        goto LABEL_53;
      }
      int v36 = *value;
      CFDataRef v37 = @"ll";
      if (v36 != 2) {
        CFDataRef v37 = 0;
      }
      if (v36 == 1) {
        long long v38 = @"ap";
      }
      else {
        long long v38 = v37;
      }
      if (!v38)
      {
        if (gLogCategory_APSBinaryTXTRecord > 60
          || gLogCategory_APSBinaryTXTRecord == -1 && !_LogCategory_Initialize())
        {
          goto LABEL_69;
        }
        goto LABEL_63;
      }
      CStringPtrAndBufferToFree = (const char *)FigCFStringGetCStringPtrAndBufferToFree();
      if (CStringPtrAndBufferToFree)
      {
        uint64_t v40 = CStringPtrAndBufferToFree;
        uint8_t v41 = strlen(CStringPtrAndBufferToFree);
        uint64_t v42 = TXTRecordSetValue(txtRecord, v35, v41, v40);
        uint64_t v18 = v42;
        if (v42) {
          APSLogErrorAt(v42);
        }
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v18 = 4294960534;
      }
LABEL_53:
      free(*(void **)__s);
      return v18;
    default:
      return 0;
  }
}

uint64_t _ProcessMACAddressData(TXTRecordRef *a1, const char *a2, uint64_t a3, int a4)
{
  uint64_t v9 = *MEMORY[0x1E4F143B8];
  if (a4 == 6)
  {
    HardwareAddressToCString();
    uint8_t v6 = strlen(__s);
    return TXTRecordSetValue(a1, a2, v6, __s);
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t _ProcessUUIDData(TXTRecordRef *a1, const char *a2, uint64_t a3, int a4, int a5)
{
  uint64_t v14 = *MEMORY[0x1E4F143B8];
  if (a4 == 16)
  {
    UUIDtoCStringFlags();
    if (!a5)
    {
      char v8 = __s[0];
      if (__s[0])
      {
        unint64_t v9 = 0;
        do
        {
          unsigned int v10 = &__s[v9];
          __s[v9] = __toupper(v8);
          if (v9 > 0x24) {
            break;
          }
          ++v9;
          char v8 = v10[1];
        }
        while (v8);
      }
    }
    uint8_t v11 = strlen(__s);
    return TXTRecordSetValue(a1, a2, v11, __s);
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSSettingsSetUseXPCHelper(int a1)
{
  if (!a1) {
    return 0;
  }
  uint64_t v1 = 4294960561;
  APSLogErrorAt(4294960561);
  return v1;
}

__CFArray *APSSettingsCopyKeys(int *a1)
{
  CFMutableDataRef Mutable = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    int v9 = -6728;
    if (!a1) {
      return Mutable;
    }
    goto LABEL_7;
  }
  CFStringRef v3 = (const __CFString *)*MEMORY[0x1E4F1D3F0];
  CFStringRef v4 = (const __CFString *)*MEMORY[0x1E4F1D3C8];
  CFArrayRef v5 = CFPreferencesCopyKeyList(@"com.apple.airplay", (CFStringRef)*MEMORY[0x1E4F1D3F0], (CFStringRef)*MEMORY[0x1E4F1D3C8]);
  if (v5)
  {
    CFArrayRef v6 = v5;
    v11.unsigned int length = CFArrayGetCount(v5);
    v11.location = 0;
    CFArrayAppendArray(Mutable, v6, v11);
    CFRelease(v6);
  }
  CFArrayRef v7 = CFPreferencesCopyKeyList(@"com.apple.coremedia", v3, v4);
  if (v7)
  {
    CFArrayRef v8 = v7;
    v12.unsigned int length = CFArrayGetCount(v7);
    v12.location = 0;
    CFArrayAppendArray(Mutable, v8, v12);
    CFRelease(v8);
  }
  int v9 = 0;
  if (a1) {
LABEL_7:
  }
    *a1 = v9;
  return Mutable;
}

const void *APSSettingsCopyValue(const __CFString *a1, int *a2)
{
  return APSSettingsCopyValueEx(a1, 0, a2);
}

uint64_t APSSettingsIsFeatureEnabled(const __CFString *a1)
{
  if (APSSettingsIsFeatureEnabled_sFeatureCacheOnce != -1) {
    dispatch_once(&APSSettingsIsFeatureEnabled_sFeatureCacheOnce, &__block_literal_global_607);
  }
  pthread_mutex_lock((pthread_mutex_t *)APSSettingsIsFeatureEnabled_sFeatureCacheMutex);
  CFBooleanRef Value = (const __CFBoolean *)CFDictionaryGetValue((CFDictionaryRef)APSSettingsIsFeatureEnabled_sFeatureCache, a1);
  if (Value)
  {
    uint64_t IsFeatureEnabledInDomain = CFBooleanGetValue(Value);
  }
  else
  {
    uint64_t v6 = 0;
    if (APSSettingsGetInt64IfPresent(a1, &v6)) {
      uint64_t IsFeatureEnabledInDomain = v6 != 0;
    }
    else {
      uint64_t IsFeatureEnabledInDomain = APSSettingsIsFeatureEnabledInDomain();
    }
    CFStringRef v4 = (const void **)MEMORY[0x1E4F1CFD0];
    if (!IsFeatureEnabledInDomain) {
      CFStringRef v4 = (const void **)MEMORY[0x1E4F1CFC8];
    }
    CFDictionarySetValue((CFMutableDictionaryRef)APSSettingsIsFeatureEnabled_sFeatureCache, a1, *v4);
  }
  pthread_mutex_unlock((pthread_mutex_t *)APSSettingsIsFeatureEnabled_sFeatureCacheMutex);
  return IsFeatureEnabledInDomain;
}

uint64_t APSSettingsIsFeatureEnabledInDomain()
{
  uint64_t v0 = CFStringGetOrCopyCStringUTF8();
  if (!v0)
  {
    uint64_t v0 = CFStringGetOrCopyCStringUTF8();
    if (!v0) {
      return _os_feature_enabled_impl();
    }
  }
  APSLogErrorAt(v0);
  return 0;
}

uint64_t __APSSettingsIsFeatureEnabled_block_invoke()
{
  APSSettingsIsFeatureEnabled_sFeatureCache = (uint64_t)CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  uint64_t result = FigSimpleMutexCreate();
  APSSettingsIsFeatureEnabled_sFeatureCacheMutex = result;
  return result;
}

const void *APSSettingsGetCString(const __CFString *a1, uint64_t a2, uint64_t a3, int *a4)
{
  uint64_t result = APSSettingsCopyValueEx(a1, 0, a4);
  if (result)
  {
    CFArrayRef v5 = result;
    uint64_t v6 = CFGetCString();
    CFRelease(v5);
    return (const void *)v6;
  }
  return result;
}

void APSSettingsGetDouble(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (v2)
  {
    CFStringRef v3 = v2;
    CFGetDouble();
    CFRelease(v3);
  }
}

uint64_t APSSettingsGetInt8(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (v2)
  {
    CFStringRef v3 = v2;
    char v4 = CFGetInt64Ranged();
    CFRelease(v3);
  }
  else
  {
    return 0;
  }
  return v4;
}

uint64_t APSSettingsGetUInt8(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (v2)
  {
    CFStringRef v3 = v2;
    unsigned __int8 v4 = CFGetInt64Ranged();
    CFRelease(v3);
  }
  else
  {
    return 0;
  }
  return v4;
}

uint64_t APSSettingsGetInt16(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (v2)
  {
    CFStringRef v3 = v2;
    __int16 v4 = CFGetInt64Ranged();
    CFRelease(v3);
  }
  else
  {
    return 0;
  }
  return v4;
}

uint64_t APSSettingsGetUInt16(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (v2)
  {
    CFStringRef v3 = v2;
    unsigned __int16 v4 = CFGetInt64Ranged();
    CFRelease(v3);
  }
  else
  {
    return 0;
  }
  return v4;
}

uint64_t APSSettingsGetInt32(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (!v2) {
    return 0;
  }
  CFStringRef v3 = v2;
  uint64_t v4 = CFGetInt64Ranged();
  CFRelease(v3);
  return v4;
}

uint64_t APSSettingsGetUInt32(const __CFString *a1, int *a2)
{
  CMTime v2 = APSSettingsCopyValueEx(a1, 0, a2);
  if (!v2) {
    return 0;
  }
  CFStringRef v3 = v2;
  uint64_t v4 = CFGetInt64Ranged();
  CFRelease(v3);
  return v4;
}

const void *APSSettingsGetUInt64(const __CFString *a1, int *a2)
{
  uint64_t result = APSSettingsCopyValueEx(a1, 0, a2);
  if (result)
  {
    CFStringRef v3 = result;
    uint64_t v4 = CFGetInt64();
    CFRelease(v3);
    return (const void *)v4;
  }
  return result;
}

uint64_t APSSettingsGetIntWithDefault(const __CFString *a1, uint64_t a2)
{
  return APSSettingsGetIntWithOverrideAndDefault(a1, 0, a2);
}

uint64_t APSSettingsGetIntWithOverrideAndDefault(const __CFString *key, CFDictionaryRef theDict, uint64_t a3)
{
  int v11 = 0;
  if (theDict && (CFBooleanRef Value = CFDictionaryGetValue(theDict, key)) != 0)
  {
    uint64_t v6 = Value;
    CFRetain(Value);
  }
  else
  {
    CFArrayRef v7 = APSSettingsCopyValueEx(key, 0, &v11);
    uint64_t v6 = v7;
    if (v11) {
      BOOL v8 = 1;
    }
    else {
      BOOL v8 = v7 == 0;
    }
    if (v8)
    {
      if (!v7) {
        return a3;
      }
      goto LABEL_11;
    }
  }
  unsigned int v9 = CFGetInt64();
  if (v11) {
    a3 = a3;
  }
  else {
    a3 = v9;
  }
LABEL_11:
  CFRelease(v6);
  return a3;
}

uint64_t APSSettingsGetInt8IfPresent(const __CFString *a1, unsigned char *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    char v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetUInt8IfPresent(const __CFString *a1, unsigned char *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    char v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetInt16IfPresent(const __CFString *a1, _WORD *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    __int16 v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetUInt16IfPresent(const __CFString *a1, _WORD *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    __int16 v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetInt32IfPresent(const __CFString *a1, _DWORD *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    int v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetUInt32IfPresent(const __CFString *a1, _DWORD *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    int v6 = CFGetInt64Ranged();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsGetUInt64IfPresent(const __CFString *a1, uint64_t *a2)
{
  int v9 = 0;
  CFStringRef v3 = APSSettingsCopyValueEx(a1, 0, &v9);
  uint64_t v4 = v3;
  if (v9) {
    BOOL v5 = 1;
  }
  else {
    BOOL v5 = v3 == 0;
  }
  if (v5)
  {
    uint64_t v7 = 0;
    if (!v3) {
      return v7;
    }
  }
  else
  {
    uint64_t v6 = CFGetInt64();
    if (v9)
    {
      uint64_t v7 = 0;
    }
    else
    {
      *a2 = v6;
      uint64_t v7 = 1;
    }
  }
  CFRelease(v4);
  return v7;
}

uint64_t APSSettingsSetCString(const __CFString *a1, const char *a2, CFIndex a3)
{
  if (a3 == -1) {
    CFStringRef v4 = CFStringCreateWithCString(0, a2, 0x8000100u);
  }
  else {
    CFStringRef v4 = CFStringCreateWithBytes(0, (const UInt8 *)a2, a3, 0x8000100u, 0);
  }
  CFStringRef v5 = v4;
  if (v4)
  {
    if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v6 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v6 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(a1, v5, v6);
    CFRelease(v5);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960579;
  }
}

uint64_t APSSettingsSetValue(const __CFString *a1, const void *a2)
{
  if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
    CFStringRef v4 = @"com.apple.coremedia";
  }
  else {
    CFStringRef v4 = @"com.apple.airplay";
  }
  CFPreferencesSetAppValue(a1, a2, v4);
  return 0;
}

uint64_t APSSettingsSetDouble(const __CFString *a1, double a2)
{
  double v3 = a2;
  return APSSettingsSetNumber(a1, kCFNumberDoubleType, &v3);
}

uint64_t APSSettingsSetNumber(const __CFString *a1, CFNumberType a2, const void *a3)
{
  CFNumberRef v4 = CFNumberCreate(0, a2, a3);
  if (v4)
  {
    CFNumberRef v5 = v4;
    if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v6 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v6 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(a1, v5, v6);
    CFRelease(v5);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960596;
  }
}

uint64_t APSSettingsSetInt64(const __CFString *a1)
{
  uint64_t Int64 = CFNumberCreateInt64();
  if (Int64)
  {
    double v3 = (const void *)Int64;
    if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v4 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v4 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(a1, v3, v4);
    CFRelease(v3);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960596;
  }
}

uint64_t APSSettingsRemoveValue(const __CFString *a1)
{
  if (CFEqual(a1, @"wirelessdisplay_enable_timestamps_diagnostic")) {
    CFStringRef v2 = @"com.apple.coremedia";
  }
  else {
    CFStringRef v2 = @"com.apple.airplay";
  }
  CFPreferencesSetAppValue(a1, 0, v2);
  return 0;
}

uint64_t APSSettingsSynchronize()
{
  CFPreferencesAppSynchronize(@"com.apple.airplay");

  return CFPreferencesAppSynchronize(@"com.apple.coremedia");
}

uint64_t APSAudioFormatDescriptionListCreateWithASBDArray(const __CFAllocator *a1, CFDataRef theData, CFTypeRef *a3)
{
  uint64_t v13 = 0;
  CFTypeRef cf = 0;
  if (a3 && (unint64_t Length = CFDataGetLength(theData), Length > 0x27))
  {
    unint64_t v7 = Length;
    BytePtr = CFDataGetBytePtr(theData);
    uint64_t appended = APSAudioFormatDescriptionListCreate(a1, &cf);
    if (appended)
    {
      uint64_t v11 = appended;
    }
    else
    {
      if (v7 / 0x28 <= 1) {
        unint64_t v10 = 1;
      }
      else {
        unint64_t v10 = v7 / 0x28;
      }
      while (1)
      {
        uint64_t appended = ASBDToAPAudioFormatIndex((uint64_t)BytePtr, -65536, &v13);
        if (appended)
        {
          uint64_t v11 = appended;
          goto LABEL_14;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(v13, (uint64_t)cf, 0);
        if (appended) {
          break;
        }
        BytePtr += 40;
        if (!--v10)
        {
          uint64_t v11 = 0;
          *a3 = cf;
          return v11;
        }
      }
      uint64_t v11 = appended;
    }
LABEL_14:
    APSLogErrorAt(appended);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v11 = 4294954516;
  }
  if (cf) {
    CFRelease(cf);
  }
  return v11;
}

uint64_t APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(uint64_t a1, uint64_t a2, int a3)
{
  CFTypeRef cf = 0;
  uint64_t v5 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], a1, 0, &cf);
  if (v5)
  {
    uint64_t v6 = v5;
  }
  else
  {
    uint64_t v5 = APSAudioFormatDescriptionListAddFormat(a2, (uint64_t)cf);
    if (v5)
    {
      uint64_t v6 = v5;
    }
    else
    {
      if (!a3)
      {
        uint64_t v6 = 0;
        goto LABEL_7;
      }
      uint64_t v5 = APSAudioFormatDescriptionListSetDefaultFormat(a2, cf);
      uint64_t v6 = v5;
      if (!v5) {
        goto LABEL_7;
      }
    }
  }
  APSLogErrorAt(v5);
LABEL_7:
  if (cf) {
    CFRelease(cf);
  }
  return v6;
}

uint64_t APSAudioFormatDescriptionListCreateASBDArray(const __CFAllocator *a1, uint64_t a2, const __CFData **a3)
{
  CFArrayRef theArray = 0;
  if (!a3)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t v5 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a2, (uint64_t *)&theArray);
  if (v5)
  {
    uint64_t v15 = v5;
    APSLogErrorAt(v5);
    goto LABEL_9;
  }
  CFIndex Count = CFArrayGetCount(theArray);
  CFMutableDataRef Mutable = CFDataCreateMutable(a1, 40 * Count);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    uint64_t v15 = 4294954510;
LABEL_9:
    if (theArray) {
      CFRelease(theArray);
    }
    return v15;
  }
  CFDataRef v8 = Mutable;
  CFDataSetLength(Mutable, 40 * Count);
  BytePtr = CFDataGetBytePtr(v8);
  if (Count < 1)
  {
LABEL_8:
    uint64_t v15 = 0;
    *a3 = v8;
    goto LABEL_9;
  }
  unint64_t v10 = (UInt8 *)BytePtr;
  CFIndex v11 = 0;
  while (1)
  {
    CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v11);
    if (!ValueAtIndex) {
      break;
    }
    long long v13 = ValueAtIndex[1];
    long long v14 = ValueAtIndex[2];
    *((void *)v10 + 4) = *((void *)ValueAtIndex + 6);
    *(_OWORD *)unint64_t v10 = v13;
    *((_OWORD *)v10 + 1) = v14;
    v10 += 40;
    if (Count == ++v11) {
      goto LABEL_8;
    }
  }
  uint64_t result = APSLogErrorAt(0);
  __break(1u);
  return result;
}

uint64_t APSAudioFormatDescriptionListCreateASRDArrayPCM(const __CFAllocator *a1, uint64_t a2, const __CFData **a3)
{
  CFArrayRef theArray = 0;
  if (!a3)
  {
    APSLogErrorAt(0);
    uint64_t v6 = 0;
    uint64_t v23 = 4294954516;
LABEL_18:
    free(v6);
    return v23;
  }
  uint64_t v6 = malloc_type_calloc(0x28uLL, 1uLL, 0x3727BC7BuLL);
  if (!v6) {
    goto LABEL_22;
  }
  uint64_t v7 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a2, (uint64_t *)&theArray);
  if (v7)
  {
    uint64_t v23 = v7;
    APSLogErrorAt(v7);
    goto LABEL_16;
  }
  CFIndex Count = CFArrayGetCount(theArray);
  CFMutableDataRef Mutable = CFDataCreateMutable(a1, 56 * Count);
  if (!Mutable)
  {
LABEL_22:
    APSLogErrorAt(0);
    uint64_t v23 = 4294954510;
LABEL_16:
    if (theArray) {
      CFRelease(theArray);
    }
    goto LABEL_18;
  }
  CFDataRef v10 = Mutable;
  CFDataSetLength(Mutable, 56 * Count);
  BytePtr = CFDataGetBytePtr(v10);
  if (Count < 1)
  {
LABEL_15:
    uint64_t v23 = 0;
    *a3 = v10;
    goto LABEL_16;
  }
  CFRange v12 = (UInt8 *)BytePtr;
  CFIndex v13 = 0;
  while (1)
  {
    CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v13);
    if (!ValueAtIndex) {
      break;
    }
    uint64_t v15 = ValueAtIndex;
    if (*((_DWORD *)ValueAtIndex + 6) == 1819304813)
    {
      int v16 = (char *)(ValueAtIndex + 2);
    }
    else
    {
      int BitsPerChannel = APAudioFormatIndexGetBitsPerChannel(ValueAtIndex[12]);
      *(void *)uint64_t v6 = v15[2];
      if (BitsPerChannel == ((BitsPerChannel + 7) & 0x38)) {
        int v18 = 12;
      }
      else {
        int v18 = 20;
      }
      void v6[2] = 1819304813;
      void v6[3] = v18;
      int v19 = *((_DWORD *)v15 + 11);
      unsigned int v20 = v19 * ((BitsPerChannel + 7) >> 3);
      v6[4] = v20;
      v6[5] = 1;
      v6[6] = v20;
      v6[7] = v19;
      v6[8] = BitsPerChannel;
      v6[9] = 0;
      int v16 = (char *)v6;
    }
    long long v22 = *(_OWORD *)v16;
    long long v21 = *((_OWORD *)v16 + 1);
    *((void *)v12 + 4) = *((void *)v16 + 4);
    *(_OWORD *)CFRange v12 = v22;
    *((_OWORD *)v12 + 1) = v21;
    *(void *)&long long v21 = *(void *)v12;
    *((void *)v12 + 5) = *(void *)v12;
    *((void *)v12 + 6) = v21;
    ++v13;
    v12 += 56;
    if (Count == v13) {
      goto LABEL_15;
    }
  }
  uint64_t result = APSLogErrorAt(0);
  __break(1u);
  return result;
}

uint64_t APSAudioFormatDescriptionListCreateAdvertisementArray(const __CFAllocator *a1, uint64_t a2, CFMutableArrayRef *a3)
{
  CFArrayRef theArray = 0;
  if (a3)
  {
    CFMutableArrayRef Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      CFMutableArrayRef v6 = Mutable;
      uint64_t v7 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a2, (uint64_t *)&theArray);
      if (v7)
      {
        uint64_t v10 = v7;
        APSLogErrorAt(v7);
        CFRelease(v6);
      }
      else
      {
        for (CFIndex i = 0; ; ++i)
        {
          CFIndex Count = (CFIndex)theArray;
          if (theArray) {
            CFIndex Count = CFArrayGetCount(theArray);
          }
          if (i >= Count) {
            break;
          }
          CFArrayGetValueAtIndex(theArray, i);
          FigCFArrayAppendInt64();
        }
        uint64_t v10 = 0;
        *a3 = v6;
      }
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v10 = 4294954510;
    }
    if (theArray) {
      CFRelease(theArray);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v10;
}

uint64_t APSAudioFormatDescriptionCreateAndAppendAudioFormatToArray(uint64_t a1, __CFArray *a2)
{
  long long value = 0;
  if (a2)
  {
    uint64_t v3 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], a1, 0, &value);
    uint64_t v4 = v3;
    if (v3) {
      APSLogErrorAt(v3);
    }
    else {
      CFArrayAppendValue(a2, value);
    }
    if (value) {
      CFRelease(value);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v4;
}

uint64_t APSAudioFormatDescriptionListCreateWithAdvertisementArray(const __CFAllocator *a1, const __CFArray *a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  if (a3)
  {
    CFMutableArrayRef Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      uint64_t v7 = Mutable;
      CFIndex v8 = 0;
      if (!a2) {
        goto LABEL_5;
      }
LABEL_4:
      for (CFIndex i = CFArrayGetCount(a2); v8 < i; CFIndex i = 0)
      {
        CFArrayGetValueAtIndex(a2, v8);
        Uuint64_t Int64 = FigCFNumberGetUInt64();
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToArray(UInt64, v7);
        if (appended == -6735)
        {
          if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
            && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
        }
        else
        {
          uint64_t v12 = appended;
          if (appended)
          {
            APSLogErrorAt(appended);
            goto LABEL_18;
          }
        }
        ++v8;
        if (a2) {
          goto LABEL_4;
        }
LABEL_5:
        ;
      }
      uint64_t v13 = APSAudioFormatDescriptionListCreateWithAudioFormatDescriptionArray(a1, v7, &cf);
      uint64_t v12 = v13;
      if (v13)
      {
        APSLogErrorAt(v13);
        if (cf) {
          CFRelease(cf);
        }
      }
      else
      {
        *a3 = cf;
        CFTypeRef cf = 0;
      }
LABEL_18:
      CFRelease(v7);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294954510;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v12;
}

uint64_t APSAudioFormatDescriptionListCreateWithLegacyAudioFormatMask(const __CFAllocator *a1, unint64_t a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  if (a3)
  {
    CFMutableArrayRef Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      uint64_t v7 = Mutable;
      for (uint64_t i = 0; i != 64; ++i)
      {
        if ((a2 >> i))
        {
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToArray(i, v7);
          if (appended == -6735)
          {
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
          }
          else
          {
            uint64_t v10 = appended;
            if (appended)
            {
              APSLogErrorAt(appended);
              goto LABEL_16;
            }
          }
        }
      }
      uint64_t v11 = APSAudioFormatDescriptionListCreateWithAudioFormatDescriptionArray(a1, v7, &cf);
      uint64_t v10 = v11;
      if (v11)
      {
        APSLogErrorAt(v11);
        if (cf) {
          CFRelease(cf);
        }
      }
      else
      {
        *a3 = cf;
        CFTypeRef cf = 0;
      }
LABEL_16:
      CFRelease(v7);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294954510;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v10;
}

uint64_t APSAudioFormatDescriptionListCopyRichestFormatAsFigEndpointStreamAudioFormatDescription(uint64_t a1, uint64_t a2, CFTypeRef *a3)
{
  CFTypeRef v8 = 0;
  CFTypeRef cf = 0;
  uint64_t v5 = APSAudioFormatDescriptionListCopyRichestFormat(a2, &cf);
  if (v5)
  {
    uint64_t v6 = v5;
  }
  else
  {
    uint64_t v5 = APSAudioFormatDescriptionCopyFigEndpointStreamAudioFormatDescription(a1, (uint64_t)cf, (uint64_t)&v8);
    uint64_t v6 = v5;
    if (!v5)
    {
      *a3 = v8;
      CFTypeRef v8 = 0;
      goto LABEL_4;
    }
  }
  APSLogErrorAt(v5);
LABEL_4:
  if (cf) {
    CFRelease(cf);
  }
  if (v8) {
    CFRelease(v8);
  }
  return v6;
}

uint64_t APSAudioFormatDescriptionListCreateFigEndpointStreamAudioFormatDescriptionArray(const __CFAllocator *a1, uint64_t a2, __CFArray **a3)
{
  long long value = 0;
  CFArrayRef theArray = 0;
  if (a3)
  {
    CFMutableArrayRef Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      uint64_t v7 = Mutable;
      uint64_t v8 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a2, (uint64_t *)&theArray);
      if (v8)
      {
        uint64_t v13 = v8;
      }
      else
      {
        if (!theArray || (CFIndex Count = CFArrayGetCount(theArray), Count < 1))
        {
LABEL_11:
          uint64_t v13 = 0;
          *a3 = v7;
          goto LABEL_12;
        }
        CFIndex v10 = Count;
        CFIndex v11 = 0;
        while (1)
        {
          CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v11);
          uint64_t v8 = APSAudioFormatDescriptionCopyFigEndpointStreamAudioFormatDescription((uint64_t)a1, (uint64_t)ValueAtIndex, (uint64_t)&value);
          if (v8) {
            break;
          }
          CFArrayAppendValue(v7, value);
          if (value)
          {
            CFRelease(value);
            long long value = 0;
          }
          if (v10 == ++v11) {
            goto LABEL_11;
          }
        }
        uint64_t v13 = v8;
      }
      APSLogErrorAt(v8);
      CFRelease(v7);
      if (value) {
        CFRelease(value);
      }
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v13 = 4294954510;
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v13 = 4294954516;
  }
LABEL_12:
  if (theArray) {
    CFRelease(theArray);
  }
  return v13;
}

uint64_t APSAudioFormatDescriptionListCreateWithFigEndpointStreamAudioFormatDescriptionArray(const __CFAllocator *a1, const __CFArray *a2, CFTypeRef *a3)
{
  CFTypeRef v13 = 0;
  CFTypeRef cf = 0;
  if (a3)
  {
    uint64_t v6 = APSAudioFormatDescriptionListCreate(a1, &v13);
    if (v6)
    {
      uint64_t v11 = v6;
    }
    else
    {
      if (!a2 || (CFIndex Count = CFArrayGetCount(a2), Count < 1))
      {
LABEL_11:
        uint64_t v11 = 0;
        *a3 = v13;
        CFTypeRef v13 = 0;
        goto LABEL_12;
      }
      CFIndex v8 = Count;
      CFIndex v9 = 0;
      while (1)
      {
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(a2, v9);
        uint64_t v6 = APSAudioFormatDescriptionCreateWithFigEndpointStreamAudioFormatDescription(a1, (uint64_t)ValueAtIndex, &cf);
        if (v6)
        {
          uint64_t v11 = v6;
          goto LABEL_19;
        }
        uint64_t v6 = APSAudioFormatDescriptionListAddFormat((uint64_t)v13, (uint64_t)cf);
        if (v6) {
          break;
        }
        if (cf)
        {
          CFRelease(cf);
          CFTypeRef cf = 0;
        }
        if (v8 == ++v9) {
          goto LABEL_11;
        }
      }
      uint64_t v11 = v6;
    }
LABEL_19:
    APSLogErrorAt(v6);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v11 = 4294954516;
  }
LABEL_12:
  if (cf) {
    CFRelease(cf);
  }
  if (v13) {
    CFRelease(v13);
  }
  return v11;
}

void APSAudioFormatDescriptionListCopyFilterFormatsForCurrentBufferedSenderWithEndpointStreamsInfo(const __CFAllocator *a1, const void *a2, int a3, int a4, int a5, CFTypeRef *a6)
{
  CFTypeRef v19 = 0;
  CFTypeRef cf = 0;
  int IsFeatureEnabled = APSSettingsIsFeatureEnabled(@"BufferedAPAC");
  if (a6)
  {
    int v13 = IsFeatureEnabled;
    uint64_t v14 = MGGetProductType();
    if (!IsAppleTV() || v14 == 1110205732)
    {
      if (APSIsAPMSpeaker_sCheckOnce != -1) {
        dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
      }
      if (APSIsAPMSpeaker_sIsAPMSpeaker)
      {
        if (!a5)
        {
          uint64_t appended = APSAudioFormatDescriptionListCreate(a1, &cf);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionListCreateIntersectionList((uint64_t)a2, (uint64_t)cf, &v19);
          if (appended) {
            goto LABEL_62;
          }
          goto LABEL_55;
        }
        if (!FigGetCFPreferenceNumberWithDefault())
        {
          uint64_t appended = APSAudioFormatDescriptionListCreate(a1, &cf);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(23, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(39, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(40, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, (uint64_t)cf, 0);
          if (appended) {
            goto LABEL_62;
          }
          if (v13)
          {
            uint64_t appended = APSAudioFormatDescriptionListAddSupportedFormatsForAPACToList((uint64_t)cf);
            if (appended) {
              goto LABEL_62;
            }
          }
          CFTypeRef v16 = cf;
          if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
            dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
          }
          uint64_t appended = APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough((uint64_t)v16, 0, APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed);
          if (appended) {
            goto LABEL_62;
          }
          uint64_t appended = APSAudioFormatDescriptionListCreateIntersectionList((uint64_t)a2, (uint64_t)cf, &v19);
          if (appended) {
            goto LABEL_62;
          }
          goto LABEL_55;
        }
      }
      else
      {
        if (APSIsIPhone_onceToken != -1) {
          dispatch_once(&APSIsIPhone_onceToken, &__block_literal_global_23);
        }
        if ((APSIsIPhone_sIsiPhone & 1) == 0 && APSIsIPad_onceToken != -1) {
          dispatch_once(&APSIsIPad_onceToken, &__block_literal_global_25);
        }
      }
    }
    else if (a3 != 2)
    {
      if (APSSettingsGetIntWithOverrideAndDefault(@"DisableATVWHASurround", 0, 0))
      {
        uint64_t appended = APSAudioFormatDescriptionListCreate(a1, &cf);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, (uint64_t)cf, 0);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionListCreateIntersectionList((uint64_t)a2, (uint64_t)cf, &v19);
        if (appended) {
          goto LABEL_62;
        }
LABEL_55:
        *a6 = v19;
        CFTypeRef v19 = 0;
        goto LABEL_56;
      }
      if (a4)
      {
        uint64_t appended = APSAudioFormatDescriptionListCreate(a1, &cf);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, (uint64_t)cf, 0);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, (uint64_t)cf, 0);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, (uint64_t)cf, 0);
        if (appended) {
          goto LABEL_62;
        }
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, (uint64_t)cf, 0);
        if (appended) {
          goto LABEL_62;
        }
        if (v13)
        {
          uint64_t appended = APSAudioFormatDescriptionListAddSupportedFormatsForAPACToList((uint64_t)cf);
          if (appended) {
            goto LABEL_62;
          }
        }
        CFTypeRef v17 = cf;
        if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
          dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
        }
        uint64_t appended = APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough((uint64_t)v17, 0, APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed);
        if (appended) {
          goto LABEL_62;
        }
        APSAudioFormatDescriptionListCreateIntersectionList((uint64_t)a2, (uint64_t)cf, &v19);
        goto LABEL_55;
      }
    }
    if (a2) {
      CFTypeRef v18 = CFRetain(a2);
    }
    else {
      CFTypeRef v18 = 0;
    }
    CFTypeRef v19 = v18;
    goto LABEL_55;
  }
  uint64_t appended = 0;
LABEL_62:
  APSLogErrorAt(appended);
LABEL_56:
  if (cf) {
    CFRelease(cf);
  }
  if (v19) {
    CFRelease(v19);
  }
}

uint64_t APSAudioFormatDescriptionListAddSupportedFormatsForAPACToList(uint64_t a1)
{
  if (APSSettingsGetIntWithOverrideAndDefault(@"bufferedAPACStereo", 0, 0))
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(64, a1, 0);
    if (appended)
    {
      uint64_t v3 = appended;
      goto LABEL_17;
    }
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(65, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
LABEL_17:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(66, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_17;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(67, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_17;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(76, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_17;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(77, a1, 0);
  uint64_t v3 = appended;
  if (appended) {
    goto LABEL_17;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(68, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough(uint64_t a1, int a2, int a3)
{
  if (APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_initOnce, &__block_literal_global_629);
  }
  if (IsAppleTV())
  {
    if (!(APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughEnabled | a2)) {
      return 0;
    }
  }
  else
  {
    if (APSIsAPMSpeaker_sCheckOnce != -1) {
      dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
    }
    if (APSIsAPMSpeaker_sIsAPMSpeaker) {
      BOOL v6 = APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughEnabled == 0;
    }
    else {
      BOOL v6 = 1;
    }
    char v7 = !v6;
    if (!a2 && (v7 & 1) == 0) {
      return 0;
    }
  }
  uint64_t v8 = APSAudioFormatDescriptionListAddSupportedFormatsForAACToList(a1);
  if (v8)
  {
    uint64_t v9 = v8;
LABEL_37:
    APSLogErrorAt(v8);
    return v9;
  }
  uint64_t v8 = APSAudioFormatDescriptionListAddSupportedFormatsForALACToList(a1);
  if (v8)
  {
    uint64_t v9 = v8;
    goto LABEL_37;
  }
  if (a3)
  {
    if (APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughDDPAtmosEnabled)
    {
      uint64_t v8 = APSAudioFormatDescriptionListAddSupportedDDPFormatsForPassthrough(a1);
      if (v8)
      {
        uint64_t v9 = v8;
        goto LABEL_37;
      }
    }
  }
  if (!APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughEncryptedEnabled) {
    goto LABEL_27;
  }
  uint64_t v8 = APSAudioFormatDescriptionListAddSupportedEncryptedAACFormatsForPassthrough(a1);
  if (v8)
  {
    uint64_t v9 = v8;
    goto LABEL_37;
  }
  uint64_t v8 = APSAudioFormatDescriptionListAddSupportedEncryptedALACFormatsForPassthrough(a1);
  if (v8)
  {
    uint64_t v9 = v8;
    goto LABEL_37;
  }
  if (a3)
  {
    if (APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughDDPAtmosEnabled)
    {
      uint64_t v8 = APSAudioFormatDescriptionListAddSupportedEncryptedDDPFormatsForPassthrough(a1);
      if (v8)
      {
        uint64_t v9 = v8;
        goto LABEL_37;
      }
    }
  }
LABEL_27:
  uint64_t v8 = APSAudioFormatDescriptionListAddSupportedMP3FormatsForPassthrough(a1);
  uint64_t v9 = v8;
  if (v8) {
    goto LABEL_37;
  }
  return v9;
}

uint64_t APSAudioFormatDescriptionListAddSupportedFormatsForAACToList(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_11;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(23, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_11;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(39, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_11:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(40, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedFormatsForALACToList(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce, &__block_literal_global_54);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_lossless16bitSupported == 1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, a1, 0);
    uint64_t v3 = appended;
    if (!appended)
    {
      uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, a1, 0);
      if (v4)
      {
        uint64_t v5 = v4;
LABEL_20:
        APSLogErrorAt(v4);
        return v5;
      }
      return v3;
    }
LABEL_18:
    APSLogErrorAt(appended);
    return v3;
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce, &__block_literal_global_60_630);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_lossless20bitSupported != 1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(19, a1, 0);
    uint64_t v3 = appended;
    if (!appended)
    {
      uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, a1, 0);
      if (v4)
      {
        uint64_t v5 = v4;
        goto LABEL_20;
      }
      return v3;
    }
    goto LABEL_18;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(85, a1, 0);
  uint64_t v3 = appended;
  if (appended) {
    goto LABEL_18;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, a1, 0);
  if (v4)
  {
    uint64_t v5 = v4;
    goto LABEL_20;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedDDPFormatsForPassthrough(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(49, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(50, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(51, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(52, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_13:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(53, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedEncryptedAACFormatsForPassthrough(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(70, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(54, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(55, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(56, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(71, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(72, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(57, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_21;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(58, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_21:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(60, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedEncryptedALACFormatsForPassthrough(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce, &__block_literal_global_54);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_lossless16bitSupported) {
    return 0;
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce, &__block_literal_global_60_630);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_lossless20bitSupported) {
    return 0;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(73, a1, 0);
  if (appended)
  {
    uint64_t v4 = appended;
LABEL_15:
    APSLogErrorAt(appended);
    return v4;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(61, a1, 0);
  uint64_t result = 0;
  if (v4)
  {
    uint64_t appended = v4;
    goto LABEL_15;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionListAddSupportedEncryptedDDPFormatsForPassthrough(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(62, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(63, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(33, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_13;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(34, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_13:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(35, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAddSupportedMP3FormatsForPassthrough(uint64_t a1)
{
  if (a1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(74, a1, 0);
    uint64_t v3 = appended;
    if (appended)
    {
      APSLogErrorAt(appended);
    }
    else
    {
      uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(75, a1, 0);
      if (v4)
      {
        uint64_t v6 = v4;
        APSLogErrorAt(v4);
        return v6;
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v3;
}

uint64_t __APSAudioFormatDescriptionIsBufferedLossless20bitSupported_block_invoke()
{
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  if ((_BYTE)result) {
    APSAudioFormatDescriptionIsBufferedLossless20bitSupported_lossless20bitSupported = 1;
  }
  return result;
}

uint64_t __APSAudioFormatDescriptionIsBufferedLossless16bitSupported_block_invoke()
{
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  if ((_BYTE)result) {
    APSAudioFormatDescriptionIsBufferedLossless16bitSupported_lossless16bitSupported = 1;
  }
  return result;
}

uint64_t __APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_block_invoke()
{
  APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughEnabled = APSSettingsIsFeatureEnabled(@"BufferedPassthrough");
  APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughDDPAtmosEnabled = APSSettingsIsFeatureEnabled(@"BufferedPassthroughDDP");
  uint64_t result = APSSettingsIsFeatureEnabled(@"BufferedPassthroughEncrypted");
  APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough_sPassthroughEncryptedEnabled = result;
  return result;
}

uint64_t APSAudioFormatDescriptionListCopyTransportFormatDescriptionForSourceFormatDescription(uint64_t a1, uint64_t a2, CFTypeRef *a3)
{
  CFTypeRef v19 = 0;
  if (!a3)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  CFTypeRef cf = 0;
  int IsFeatureEnabled = APSSettingsIsFeatureEnabled(@"BufferedAPAC");
  if (APSSettingsGetIntWithOverrideAndDefault(@"bufferedAPACStereo", 0, 0)) {
    BOOL v7 = IsFeatureEnabled == 0;
  }
  else {
    BOOL v7 = 1;
  }
  int v8 = !v7;
  if (a1)
  {
    int ChannelLayoutTag = FigEndpointStreamAudioFormatDescriptionGetChannelLayoutTag();
    uint64_t ASBD = FigEndpointStreamAudioFormatDescriptionGetASBD();
    if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
      && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    switch(*(_DWORD *)(ASBD + 28))
    {
      case 1:
      case 2:
        goto LABEL_14;
      case 6:
        uint64_t v13 = *MEMORY[0x1E4F1CF80];
        goto LABEL_31;
      case 8:
        goto LABEL_109;
      case 0xA:
        if (IsFeatureEnabled) {
          goto LABEL_40;
        }
        goto LABEL_109;
      case 0xC:
      case 0x10:
        if (!IsFeatureEnabled) {
          goto LABEL_109;
        }
        uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 68, 0, &cf);
        if (v12) {
          goto LABEL_199;
        }
        if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
          goto LABEL_177;
        }
        if (cf)
        {
          CFRelease(cf);
          CFTypeRef cf = 0;
        }
        if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
          && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
LABEL_40:
        if (ChannelLayoutTag == 13238284 || ChannelLayoutTag == 12582924)
        {
          uint64_t v14 = *MEMORY[0x1E4F1CF80];
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 77, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
          if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
            goto LABEL_177;
          }
          if (cf)
          {
            CFRelease(cf);
            CFTypeRef cf = 0;
          }
          if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
            && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v14, 76, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
        }
        else
        {
          uint64_t v13 = *MEMORY[0x1E4F1CF80];
          if (ChannelLayoutTag == 12845066)
          {
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 77, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils > 50
              || gLogCategory_APSAudioFormatDescriptionUtils == -1 && !_LogCategory_Initialize())
            {
              goto LABEL_113;
            }
            goto LABEL_107;
          }
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 76, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
        }
        if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
          goto LABEL_177;
        }
        if (cf)
        {
          CFRelease(cf);
          CFTypeRef cf = 0;
        }
        if (gLogCategory_APSAudioFormatDescriptionUtils > 50
          || gLogCategory_APSAudioFormatDescriptionUtils == -1 && !_LogCategory_Initialize())
        {
LABEL_109:
          if (ChannelLayoutTag == 12582924 || ChannelLayoutTag == 13238284 || ChannelLayoutTag == 12845066)
          {
            uint64_t v13 = *MEMORY[0x1E4F1CF80];
            if (!IsFeatureEnabled)
            {
LABEL_146:
              uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 40, 0, &cf);
              if (v12) {
                goto LABEL_199;
              }
              if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
                goto LABEL_177;
              }
              if (cf)
              {
                CFRelease(cf);
                CFTypeRef cf = 0;
              }
              uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 42, 0, &cf);
              if (v12) {
                goto LABEL_199;
              }
              goto LABEL_151;
            }
LABEL_113:
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 67, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 66, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            goto LABEL_146;
          }
          if (APAudioFormatIsAudioChannelLayoutTag7_1(ChannelLayoutTag) && IsFeatureEnabled)
          {
            uint64_t v13 = *MEMORY[0x1E4F1CF80];
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 67, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            goto LABEL_32;
          }
          uint64_t v13 = *MEMORY[0x1E4F1CF80];
          if (IsFeatureEnabled)
          {
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 66, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
          }
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 40, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
          if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
            goto LABEL_177;
          }
          if (cf)
          {
            CFRelease(cf);
            CFTypeRef cf = 0;
          }
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 42, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
LABEL_151:
          if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
            goto LABEL_177;
          }
          if (cf)
          {
            CFRelease(cf);
            CFTypeRef cf = 0;
          }
          if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
            && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
LABEL_31:
          if (!IsFeatureEnabled) {
            goto LABEL_89;
          }
LABEL_32:
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 65, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
          if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
            goto LABEL_177;
          }
          if (cf)
          {
            CFRelease(cf);
            CFTypeRef cf = 0;
          }
          if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
            && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
LABEL_89:
          uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 39, 0, &cf);
          if (v12) {
            goto LABEL_199;
          }
          if (!APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf))
          {
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v13, 41, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
              goto LABEL_177;
            }
            if (cf)
            {
              CFRelease(cf);
              CFTypeRef cf = 0;
            }
            if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
              && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
LABEL_14:
            uint64_t v11 = *MEMORY[0x1E4F1CF80];
            if (v8)
            {
              uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(*MEMORY[0x1E4F1CF80], 64, 0, &cf);
              if (v12) {
                goto LABEL_199;
              }
              if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
                goto LABEL_177;
              }
              if (cf)
              {
                CFRelease(cf);
                CFTypeRef cf = 0;
              }
              if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
                && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
              {
                LogPrintF();
              }
            }
            uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v11, 20, 0, &cf);
            if (v12) {
              goto LABEL_199;
            }
            if (!APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)
              || !audioFormatDescriptionUtils_contentFormatDescriptionWarrantsLosslessTransport())
            {
              if (cf)
              {
                CFRelease(cf);
                CFTypeRef cf = 0;
              }
              uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v11, 86, 0, &cf);
              if (!v12)
              {
                if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)
                  && audioFormatDescriptionUtils_contentFormatDescriptionWarrantsLosslessTransport())
                {
                  goto LABEL_177;
                }
                if (cf)
                {
                  CFRelease(cf);
                  CFTypeRef cf = 0;
                }
                uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v11, 21, 0, &cf);
                if (!v12)
                {
                  if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)
                    && audioFormatDescriptionUtils_contentFormatDescriptionWarrantsLosslessTransport())
                  {
                    goto LABEL_177;
                  }
                  if (cf)
                  {
                    CFRelease(cf);
                    CFTypeRef cf = 0;
                  }
                  uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v11, 23, 0, &cf);
                  if (!v12)
                  {
                    if (APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf)) {
                      goto LABEL_177;
                    }
                    if (cf)
                    {
                      CFRelease(cf);
                      CFTypeRef cf = 0;
                    }
                    uint64_t v12 = APSAudioFormatDescriptionCreateWithAudioFormatIndex(v11, 22, 0, &cf);
                    if (!v12)
                    {
                      if (!APSAudioFormatDescriptionListContainsFormat(a2, (uint64_t)cf))
                      {
                        if (cf)
                        {
                          CFRelease(cf);
                          CFTypeRef cf = 0;
                        }
                        if (gLogCategory_APSAudioFormatDescriptionUtils <= 50)
                        {
                          if (gLogCategory_APSAudioFormatDescriptionUtils != -1
                            || _LogCategory_Initialize())
                          {
                            LogPrintF();
                          }
LABEL_173:
                          if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
                            && (gLogCategory_APSAudioFormatDescriptionUtils != -1
                             || _LogCategory_Initialize()))
                          {
                            LogPrintF();
                          }
                        }
                      }
                      goto LABEL_177;
                    }
                  }
                }
              }
              goto LABEL_199;
            }
          }
          goto LABEL_177;
        }
LABEL_107:
        LogPrintF();
        goto LABEL_109;
      default:
        goto LABEL_173;
    }
  }
  uint64_t v12 = 0;
LABEL_199:
  APSLogErrorAt(v12);
LABEL_177:
  CFTypeRef v15 = cf;
  if (cf)
  {
    uint64_t v16 = APSAudioFormatDescriptionCopyFigEndpointStreamAudioFormatDescription(*MEMORY[0x1E4F1CF80], (uint64_t)cf, (uint64_t)&v19);
    uint64_t v17 = v16;
    if (v16)
    {
      APSLogErrorAt(v16);
    }
    else
    {
      CFTypeRef cf = 0;
      APSAudioFormatDescriptionCopyDebugString((uint64_t)v15, (CFStringRef *)&cf);
      if (gLogCategory_APSAudioFormatDescriptionUtils <= 50
        && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (cf) {
        CFRelease(cf);
      }
      *a3 = v19;
      CFTypeRef v19 = 0;
    }
    CFRelease(v15);
  }
  else
  {
    CFTypeRef cf = 0;
    APSAudioFormatDescriptionListCopyDebugString(a2, &cf);
    if (gLogCategory_APSAudioFormatDescriptionUtils <= 90
      && (gLogCategory_APSAudioFormatDescriptionUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (cf) {
      CFRelease(cf);
    }
    uint64_t v17 = 4294960561;
  }
  if (v19) {
    CFRelease(v19);
  }
  return v17;
}

uint64_t audioFormatDescriptionUtils_contentFormatDescriptionWarrantsLosslessTransport()
{
  uint64_t ASBD = FigEndpointStreamAudioFormatDescriptionGetASBD();
  int v1 = *(_DWORD *)(ASBD + 8);
  uint64_t result = 1;
  if (v1 > 1902928226)
  {
    BOOL v3 = v1 == 1902928227;
    int v4 = 2053923171;
  }
  else
  {
    BOOL v3 = v1 == 1634492771;
    int v4 = 1668047203;
  }
  BOOL v5 = v3 || v1 == v4;
  if (!v5 && *(double *)ASBD <= 48000.0) {
    return 0;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionListGetForBufferedSender()
{
  if (APSAudioFormatDescriptionListGetForBufferedSender_sOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionListGetForBufferedSender_sOnce, &APSAudioFormatDescriptionListGetForBufferedSender_sList, (dispatch_function_t)audioFormatDescriptionUtils_CreateAudioFormatDescriptionListForBufferedSender);
  }
  return APSAudioFormatDescriptionListGetForBufferedSender_sList;
}

uint64_t audioFormatDescriptionUtils_CreateAudioFormatDescriptionListForBufferedSender(void *a1)
{
  uint64_t v5 = 0;
  int IsFeatureEnabled = APSSettingsIsFeatureEnabled(@"BufferedAPAC");
  uint64_t result = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v5);
  if (result) {
    goto LABEL_28;
  }
  uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v5, 1);
  if (result) {
    goto LABEL_28;
  }
  uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(23, v5, 0);
  if (result) {
    goto LABEL_28;
  }
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
  }
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed == 1)
  {
    uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(39, v5, 0);
    if (result) {
      goto LABEL_28;
    }
    uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(40, v5, 0);
    if (result) {
      goto LABEL_28;
    }
  }
  if (APSAudioFormatDescriptionIsBufferedLosslessAllowed_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLosslessAllowed_initOnce, &__block_literal_global_48);
  }
  if (APSAudioFormatDescriptionIsBufferedLosslessAllowed_losslessAllowed == 1)
  {
    uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, v5, 1);
    if (result) {
      goto LABEL_28;
    }
    if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce != -1) {
      dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce, &__block_literal_global_54);
    }
    if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_lossless16bitSupported == 1)
    {
      uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, v5, 1);
      if (result) {
        goto LABEL_28;
      }
    }
    if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce != -1) {
      dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce, &__block_literal_global_60_630);
    }
    if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_lossless20bitSupported == 1)
    {
      uint64_t result = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, v5, 1);
      if (result) {
        goto LABEL_28;
      }
    }
  }
  if (IsFeatureEnabled)
  {
    if (APAudioFormatAPACIsAllowedForCurrentDeviceAsSender())
    {
      uint64_t result = APSAudioFormatDescriptionListAddSupportedFormatsForAPACToList(v5);
      if (result) {
        goto LABEL_28;
      }
    }
  }
  uint64_t v4 = v5;
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
  }
  uint64_t result = APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough(v4, 0, APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed);
  if (result) {
LABEL_28:
  }
    uint64_t result = APSLogErrorAt(result);
  *a1 = v5;
  return result;
}

void __APSAudioFormatDescriptionIsBufferedLosslessAllowed_block_invoke()
{
  if (FigGetCFPreferenceNumberWithDefault()) {
    APSAudioFormatDescriptionIsBufferedLosslessAllowed_losslessAllowed = 1;
  }
  if (IsAppleTV()) {
    goto LABEL_7;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker) {
LABEL_7:
  }
    APSAudioFormatDescriptionIsBufferedLosslessAllowed_losslessAllowed = 1;
}

uint64_t APSAudioFormatDescriptionListCreateForBufferedReceiverWithAudioCapabilities(const __CFArray *a1, uint64_t a2, char *a3)
{
  uint64_t v13 = 0;
  int IsFeatureEnabled = APSSettingsIsFeatureEnabled(@"BufferedAPAC");
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v13);
  if (appended) {
    goto LABEL_48;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v13, 0);
  if (appended) {
    goto LABEL_48;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(23, v13, 1);
  if (appended) {
    goto LABEL_48;
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless16bitSupported_initOnce, &__block_literal_global_54);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless16bitSupported_lossless16bitSupported == 1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, v13, 0);
    if (appended) {
      goto LABEL_48;
    }
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce != -1) {
    dispatch_once(&APSAudioFormatDescriptionIsBufferedLossless20bitSupported_initOnce, &__block_literal_global_60_630);
  }
  if (APSAudioFormatDescriptionIsBufferedLossless20bitSupported_lossless20bitSupported == 1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, v13, 0);
    if (appended) {
      goto LABEL_48;
    }
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, v13, 0);
  if (appended) {
    goto LABEL_48;
  }
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
  }
  uint64_t v7 = v13;
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed == 1)
  {
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(39, v13, 0);
    if (appended) {
      goto LABEL_48;
    }
    uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(40, v13, 0);
    if (appended) {
      goto LABEL_48;
    }
    uint64_t v7 = v13;
    if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
      dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
    }
  }
  uint64_t appended = APSAudioFormatDescriptionListAddSupportedFormatsForPassthrough(v7, 0, APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed);
  if (appended)
  {
LABEL_48:
    APSLogErrorAt(appended);
    return v13;
  }
  if (IsFeatureEnabled)
  {
    if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
      dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
    }
    if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed == 1)
    {
      uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(65, v13, 0);
      if (!appended)
      {
        uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(66, v13, 0);
        if (!appended)
        {
          CFIndex v8 = 0;
          char v9 = 0;
          if (!a1) {
            goto LABEL_29;
          }
LABEL_28:
          for (CFIndex i = CFArrayGetCount(a1); v8 < i; CFIndex i = 0)
          {
            CFArrayGetValueAtIndex(a1, v8);
            Uuint64_t Int32 = FigCFNumberGetUInt32();
            if (UInt32 == 1819304813)
            {
              if (FigCFNumberGetUInt32() >= 8)
              {
                uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(67, v13, 0);
                if (appended) {
                  goto LABEL_48;
                }
              }
              if (FigCFNumberGetUInt32() >= 6)
              {
                uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(65, v13, 0);
                if (appended) {
                  goto LABEL_48;
                }
              }
            }
            else if (UInt32 == 1836343851)
            {
              uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(76, v13, 0);
              if (appended) {
                goto LABEL_48;
              }
              uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(67, v13, 0);
              if (appended) {
                goto LABEL_48;
              }
              uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(77, v13, 0);
              if (appended) {
                goto LABEL_48;
              }
              uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(68, v13, 0);
              if (appended) {
                goto LABEL_48;
              }
              char v9 = 1;
            }
            ++v8;
            if (a1) {
              goto LABEL_28;
            }
LABEL_29:
            ;
          }
          goto LABEL_45;
        }
      }
      goto LABEL_48;
    }
  }
  char v9 = 0;
LABEL_45:
  if (a3) {
    *a3 = v9;
  }
  return v13;
}

CFTypeRef APSAudioFormatDescriptionListCreateForBufferedLocalReceiverEchoCancellationReference()
{
  CFTypeRef cf = 0;
  CFTypeRef v5 = 0;
  uint64_t v0 = APSAudioFormatDescriptionListCreateForBufferedReceiverWithAudioCapabilities(0, 0, 0);
  if (v0)
  {
    int v1 = (const void *)v0;
    uint64_t v2 = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &cf);
    if (v2
      || (uint64_t v2 = APSAudioFormatDescriptionListAddStereoFormatsToList((uint64_t)cf), v2)
      || (uint64_t v2 = APSAudioFormatDescriptionListAdd6ChannelsFormatsToList((uint64_t)cf), v2)
      || (uint64_t v2 = APSAudioFormatDescriptionListAdd8ChannelsFormatsToList((uint64_t)cf), v2))
    {
      APSLogErrorAt(v2);
    }
    else
    {
      APSAudioFormatDescriptionListCreateIntersectionList((uint64_t)v1, (uint64_t)cf, &v5);
    }
    if (cf) {
      CFRelease(cf);
    }
    CFRelease(v1);
    return v5;
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSAudioFormatDescriptionListAddStereoFormatsToList(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(3, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(5, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(7, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(9, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(11, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(13, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(15, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(17, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(46, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(19, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(20, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(86, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(21, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(23, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(24, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(25, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(49, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(70, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(54, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(71, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(72, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(57, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(73, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(61, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(62, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_61;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(74, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_61:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(75, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAdd6ChannelsFormatsToList(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(44, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(47, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(41, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(39, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(50, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(55, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(58, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_19:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(63, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListAdd8ChannelsFormatsToList(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(38, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(48, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(40, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(42, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(51, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(56, a1, 0);
  if (appended)
  {
    uint64_t v3 = appended;
    goto LABEL_19;
  }
  uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(60, a1, 0);
  uint64_t v3 = appended;
  if (appended)
  {
LABEL_19:
    APSLogErrorAt(appended);
    return v3;
  }
  uint64_t v4 = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(33, a1, 0);
  if (v4)
  {
    uint64_t v6 = v4;
    APSLogErrorAt(v4);
    return v6;
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListCreateForRealTimeSender(int a1)
{
  uint64_t v4 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v4);
  if (appended
    || a1
    && ((uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v4, 0), appended)
     || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(24, v4, 0), appended))
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, v4, 1), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(11, v4, 0), appended))
  {
    APSLogErrorAt(appended);
  }
  return v4;
}

uint64_t APSAudioFormatDescriptionListCreateForRealTimeReceiver()
{
  uint64_t v2 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v2);
  if (appended
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(24, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, v2, 1), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(11, v2, 0), appended))
  {
    APSLogErrorAt(appended);
  }
  return v2;
}

uint64_t APSAudioFormatDescriptionListCreateForRealTimeLocalReceiver()
{
  uint64_t v2 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v2);
  if (appended
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(24, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, v2, 1), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(11, v2, 0), appended))
  {
    APSLogErrorAt(appended);
  }
  return v2;
}

uint64_t APSAudioFormatDescriptionListCreateForLowLatencySender()
{
  uint64_t v3 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v3);
  if (appended
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(25, v3, 1), appended)
    || (BOOL v1 = (APSGetPersistentGroupModel() & 0xFFFFFFFD) == 0,
        APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundSender", 0, v1))
    && (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(42, v3, 0), appended))
  {
    APSLogErrorAt(appended);
  }
  return v3;
}

uint64_t APSAudioFormatDescriptionListCreateForLowLatencyReceiver()
{
  uint64_t v4 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v4);
  if (appended
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(25, v4, 1), appended)
    || ((uint64_t v1 = MGGetProductType(), v1 != 1540760353) && v1 != 4240173202 && v1 != 2702125347
      ? (uint64_t v2 = 0)
      : (uint64_t v2 = 1),
        APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundReceiver", 0, v2)
     && (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(42, v4, 0), appended)))
  {
    APSLogErrorAt(appended);
  }
  return v4;
}

uint64_t APSAudioFormatDescriptionListCreateForScreenReceiver()
{
  uint64_t v2 = 0;
  uint64_t appended = APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &v2);
  if (appended
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(22, v2, 1), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(24, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(18, v2, 0), appended)
    || (uint64_t appended = APSAudioFormatDescriptionCreateAndAppendAudioFormatToList(11, v2, 0), appended))
  {
    APSLogErrorAt(appended);
  }
  return v2;
}

uint64_t APSAudioFormatDescriptionListAddSupportedTranscodeFormats(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t v2 = APSAudioFormatDescriptionListAddSupportedFormatsForAACToList(a1);
  if (v2)
  {
    uint64_t v3 = v2;
    goto LABEL_9;
  }
  uint64_t v2 = APSAudioFormatDescriptionListAddSupportedFormatsForALACToList(a1);
  if (v2)
  {
    uint64_t v3 = v2;
    goto LABEL_9;
  }
  uint64_t v2 = APSAudioFormatDescriptionListAddSupportedFormatsForAPACToList(a1);
  uint64_t v3 = v2;
  if (v2) {
LABEL_9:
  }
    APSLogErrorAt(v2);
  return v3;
}

uint64_t APSAudioFormatDescriptionListCreateFilteredListWithTranscodeFormats(uint64_t a1, CFTypeRef *a2)
{
  CFTypeRef cf = 0;
  CFTypeRef v9 = 0;
  if (!a2)
  {
    APSLogErrorAt(0);
    uint64_t v6 = 4294954516;
    goto LABEL_11;
  }
  CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (!a1)
  {
    uint64_t v5 = APSAudioFormatDescriptionListCreate(v4, &v9);
    if (v5)
    {
      uint64_t v6 = v5;
      goto LABEL_18;
    }
    goto LABEL_8;
  }
  uint64_t v5 = APSAudioFormatDescriptionListCreate(v4, &cf);
  if (v5)
  {
    uint64_t v6 = v5;
    goto LABEL_18;
  }
  uint64_t v5 = APSAudioFormatDescriptionListAddSupportedTranscodeFormats((uint64_t)cf);
  if (v5)
  {
    uint64_t v6 = v5;
    goto LABEL_18;
  }
  uint64_t v5 = APSAudioFormatDescriptionListCreateIntersectionList(a1, (uint64_t)cf, &v9);
  if (!v5)
  {
LABEL_8:
    uint64_t v6 = 0;
    *a2 = v9;
    CFTypeRef v9 = 0;
    goto LABEL_9;
  }
  uint64_t v6 = v5;
LABEL_18:
  APSLogErrorAt(v5);
LABEL_9:
  if (cf) {
    CFRelease(cf);
  }
LABEL_11:
  if (v9) {
    CFRelease(v9);
  }
  return v6;
}

uint64_t APSEndpointStreamAudioHoseSBARCreate(uint64_t a1, __CFString *a2, const void *a3, const void *a4, const void *a5, int a6, const void *a7, int a8, const __CFDictionary *a9, void *a10)
{
  uint64_t v133 = *MEMORY[0x1E4F143B8];
  if (!a4)
  {
    uint64_t v44 = 4294894965;
    APSLogErrorAt(0);
    return v44;
  }
  if (!a5)
  {
    uint64_t v44 = 4294894965;
    uint64_t v17 = 0;
    goto LABEL_175;
  }
  if (!a3)
  {
    uint64_t v44 = 4294894965;
    uint64_t v17 = 0;
    goto LABEL_175;
  }
  if (a8 <= 0)
  {
    uint64_t v44 = 4294894965;
    uint64_t v17 = 0;
    goto LABEL_175;
  }
  if (!a10)
  {
    uint64_t v44 = 4294894965;
    uint64_t v17 = 0;
    goto LABEL_175;
  }
  if (hoseSBAR_getClassID_sRegisterOnce != -1) {
    dispatch_once_f(&hoseSBAR_getClassID_sRegisterOnce, &hoseSBAR_getClassID_sClassID, (dispatch_function_t)hoseSBAR_registerBaseClass);
  }
  uint64_t v17 = CMDerivedObjectCreate();
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  SNPrintF();
  dispatch_queue_t v19 = dispatch_queue_create(label, 0);
  *(void *)(DerivedStorage + 8) = v19;
  if (!v19) {
    goto LABEL_215;
  }
  SNPrintF();
  uint64_t v20 = FigDispatchQueueCreateWithPriority();
  *(void *)(DerivedStorage + 280) = v20;
  if (!v20) {
    goto LABEL_215;
  }
  SNPrintF();
  uint64_t v21 = FigDispatchQueueCreateWithPriority();
  *(void *)(DerivedStorage + 288) = v21;
  if (!v21) {
    goto LABEL_215;
  }
  *(void *)(DerivedStorage + 248) = FigSimpleMutexCreate();
  *(_DWORD *)(DerivedStorage + 268) = 36;
  *(void *)(DerivedStorage + 16) = a2;
  if (a2) {
    CFRetain(a2);
  }
  *(void *)(DerivedStorage + 32) = a3;
  CFRetain(a3);
  *(void *)(DerivedStorage + 64) = a4;
  CFRetain(a4);
  *(void *)(DerivedStorage + 72) = a7;
  if (a7) {
    CFRetain(a7);
  }
  *(unsigned char *)(DerivedStorage + 240) = FigGetCFPreferenceNumberWithDefault();
  *(unsigned char *)(DerivedStorage + 242) = FigGetCFPreferenceNumberWithDefault();
  *(unsigned char *)(DerivedStorage + 243) = FigGetCFPreferenceNumberWithDefault();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(unsigned char *)(DerivedStorage + 242)) {
    uint64_t v22 = 1;
  }
  else {
    uint64_t v22 = in_audio_mx_server_process() ^ 1;
  }
  *(unsigned char *)(DerivedStorage + 128) = APSSettingsGetIntWithOverrideAndDefault(@"isHoseSBARSynchronizerTimeMediaTime", 0, v22) != 0;
  *(void *)(DerivedStorage + 80) = CFRetain(a5);
  *(void *)(DerivedStorage + 592) = CFRetain(a5);
  CMTimeMake(&time, a8, 1);
  *(CMTime *)(DerivedStorage + 192) = time;
  uint64_t v23 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
  if (a9)
  {
    int v24 = CFDictionaryContainsKey(a9, @"StreamID");
    CFBooleanRef Value = a2;
    if (v24) {
      CFBooleanRef Value = CFDictionaryGetValue(a9, @"StreamID");
    }
    *(void *)(DerivedStorage + 24) = CFRetain(Value);
    if (CFDictionaryContainsKey(a9, @"ClusterInfo"))
    {
      uint64_t v26 = CFDictionaryGetValue(a9, @"ClusterInfo");
      *(void *)(DerivedStorage + 40) = CFRetain(v26);
    }
    if (CFDictionaryContainsKey(a9, @"ClientPID"))
    {
      uint64_t v27 = CFDictionaryGetValue(a9, @"ClientPID");
      CFTypeRef v28 = CFRetain(v27);
    }
    else
    {
      CFTypeRef v28 = 0;
    }
    *(void *)(DerivedStorage + 48) = v28;
    unsigned int v29 = CFDictionaryGetValue(a9, @"FigAudioSession");
    if (v29) {
      unsigned int v29 = CFRetain(v29);
    }
    *(void *)(DerivedStorage + 232) = v29;
    *(unsigned char *)(DerivedStorage + 241) = CFDictionaryGetInt64() != 0;
    if (CFDictionaryContainsKey(a9, @"AudioSessionID"))
    {
      uint64_t v30 = CFDictionaryGetValue(a9, @"AudioSessionID");
      CFTypeRef v31 = CFRetain(v30);
    }
    else
    {
      CFTypeRef v31 = 0;
    }
    *(void *)(DerivedStorage + 256) = v31;
    if (CFDictionaryGetInt64()) {
      *(_DWORD *)(DerivedStorage + 132) = APSSettingsGetIntWithOverrideAndDefault(@"hoseSBARAudioIOAssertionDurationSecs", 0, 120);
    }
    if (CFDictionaryContainsKey(a9, @"VBRBitRates")) {
      CFDictionaryRef v32 = (const __CFDictionary *)CFDictionaryGetValue(a9, @"VBRBitRates");
    }
    else {
      CFDictionaryRef v32 = 0;
    }
    if (CFDictionaryContainsKey(a9, @"SupportedAudioFormats"))
    {
      uint8_t v33 = CFDictionaryGetValue(a9, @"SupportedAudioFormats");
      time.long long value = 0;
      APSAudioFormatDescriptionListCopyDebugString((uint64_t)v33, &time);
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (time.value) {
        CFRelease((CFTypeRef)time.value);
      }
    }
    else
    {
      uint8_t v33 = 0;
    }
    uint64_t v34 = (CMTime *)CMBaseObjectGetDerivedStorage();
    theData.long long value = 0;
    if (!v33) {
      goto LABEL_221;
    }
    uint64_t ASBDArray = APSAudioFormatDescriptionListCreateASBDArray(*v23, (uint64_t)v33, (const __CFData **)&theData);
    if (ASBDArray)
    {
      uint64_t v44 = ASBDArray;
      APSLogErrorAt(ASBDArray);
      int v42 = 0;
      goto LABEL_57;
    }
    unint64_t Length = CFDataGetLength((CFDataRef)theData.value);
    if (Length > 0x27)
    {
      unint64_t v37 = Length / 0x28;
      BytePtr = (long long *)CFDataGetBytePtr((CFDataRef)theData.value);
      int v42 = 0;
      do
      {
        int AudioBytesPerSec = hoseSBAR_getAudioBytesPerSec(BytePtr, v32, v39, v40, v41);
        if (AudioBytesPerSec > v42) {
          int v42 = AudioBytesPerSec;
        }
        BytePtr = (long long *)((char *)BytePtr + 40);
        --v37;
      }
      while (v37);
      uint64_t v44 = 0;
      uint64_t v23 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
    }
    else
    {
LABEL_221:
      APSLogErrorAt(0);
      int v42 = hoseSBAR_getAudioBytesPerSec(0, v32, v117, v118, v119);
      uint64_t v44 = 0;
    }
LABEL_57:
    CMTime time = v34[8];
    v34[2].CMTimeScale timescale = (int)(CMTimeGetSeconds(&time) * (double)v42);
    if (theData.value) {
      CFRelease((CFTypeRef)theData.value);
    }
    if (v44)
    {
      uint64_t v17 = v44;
      goto LABEL_175;
    }
  }
  *(void *)(DerivedStorage + 600) = 0;
  *(void *)(DerivedStorage + 608) = DerivedStorage + 600;
  uint64_t v45 = CMBaseObjectGetDerivedStorage();
  if (FigCFEqual())
  {
    if (a6 != 1095778640)
    {
      if (a6 == 1381257248)
      {
        long long v46 = (void *)(v45 + 96);
        uint64_t v47 = &hoseSBAR_initializeTransportContext_sTransportContext;
        goto LABEL_69;
      }
LABEL_101:
      uint64_t v44 = 4294894965;
      APSSignalErrorAt(4294894965);
      uint64_t v17 = 4294894965;
LABEL_175:
      APSLogErrorAt(v17);
      return v44;
    }
    long long v46 = (void *)(v45 + 96);
    uint64_t v47 = &hoseSBAR_initializeTransportContext_sTransportContext_371;
  }
  else
  {
    if (!FigCFEqual() || a6 != 1381257248) {
      goto LABEL_101;
    }
    long long v46 = (void *)(v45 + 96);
    uint64_t v47 = &hoseSBAR_initializeTransportContext_sTransportContext_373;
  }
LABEL_69:
  *long long v46 = v47;
  if (**(_DWORD **)(DerivedStorage + 96) == 2)
  {
    *(_DWORD *)(DerivedStorage + 88) = 0;
  }
  else
  {
    uint64_t v48 = *(void *)(DerivedStorage + 80);
    if (v48)
    {
      double v49 = *(double *)(v48 + 16);
    }
    else
    {
      APSLogErrorAt(0);
      double v49 = 0.0;
    }
    *(_DWORD *)(DerivedStorage + 88) = v49;
    if (!v49)
    {
      uint64_t v44 = 4294894965;
      uint64_t v17 = 0;
      goto LABEL_175;
    }
  }
  uint64_t v50 = CMBaseObjectGetDerivedStorage();
  if (FigCFEqual())
  {
    uint64_t v51 = MEMORY[0x1E4F1FA48];
    long long v52 = *MEMORY[0x1E4F1FA48];
    *(_OWORD *)(v50 + 144) = *MEMORY[0x1E4F1FA48];
    CMTimeEpoch epoch = *(void *)(v51 + 16);
    *(void *)(v50 + 160) = epoch;
    *(_OWORD *)(v50 + 168) = v52;
LABEL_78:
    *(void *)(v50 + 184) = epoch;
    goto LABEL_79;
  }
  if (FigCFEqual())
  {
    int CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
    CMTimeMake(&theData, CFPreferenceNumberWithDefault, 1000);
    CMTimeConvertScale(&time, &theData, *(_DWORD *)(v50 + 88), kCMTimeRoundingMethod_RoundHalfAwayFromZero);
    *(CMTime *)(v50 + 144) = time;
    int v55 = FigGetCFPreferenceNumberWithDefault();
    CMTimeMake(&v123, v55, 1000);
    CMTimeConvertScale(&time, &v123, *(_DWORD *)(v50 + 88), kCMTimeRoundingMethod_RoundHalfAwayFromZero);
    *(_OWORD *)(v50 + 168) = *(_OWORD *)&time.value;
    CMTimeEpoch epoch = time.epoch;
    goto LABEL_78;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
LABEL_79:
  BOOL v56 = CFDictionaryGetInt64() != 0;
  CFTypeRef cf1 = (CFTypeRef)FigCFDictionaryGetValue();
  uint64_t v57 = CMBaseObjectGetDerivedStorage();
  unsigned int v58 = *(NSObject **)(v57 + 280);
  v121 = (CMTimeValue *)(v57 + 104);
  uint64_t v59 = CMBaseObjectGetDerivedStorage();
  theData.long long value = 0;
  v123.long long value = 0;
  CFTypeRef v131 = 0;
  CFTypeRef cf = 0;
  CFAllocatorRef v60 = *v23;
  CFMutableArrayRef Mutable = CFDictionaryCreateMutable(*v23, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    uint64_t v44 = 4294894966;
LABEL_239:
    CMTimeValue v64 = (uint64_t *)(v57 + 112);
    goto LABEL_115;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if ((APSIsAPMSpeaker_sIsAPMSpeaker || IsAppleTV())
    && APSSettingsIsFeatureEnabled(@"BufferedPassthroughDDP"))
  {
    CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F34560], (const void *)*MEMORY[0x1E4F1CFD0]);
  }
  if (*(unsigned char *)(v59 + 243)) {
    CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F34568], (const void *)*MEMORY[0x1E4F1CFD0]);
  }
  if (FigServer_IsAirplayd()
    || !FigIsAirplaydEnabled() && in_audio_mx_server_process())
  {
    CFDictionarySetInt64();
    CFDictionarySetInt64();
    uint64_t RemoteWithOptions = FigSampleBufferAudioRendererCreateWithOptions();
    if (RemoteWithOptions)
    {
      uint64_t v44 = RemoteWithOptions;
    }
    else
    {
      uint64_t RemoteWithOptions = FigSampleBufferAudioRendererCentralCreateWithOptions();
      if (RemoteWithOptions)
      {
        uint64_t v44 = RemoteWithOptions;
      }
      else
      {
        CFRetain(0);
        CFRetain((CFTypeRef)theData.value);
        time.long long value = MEMORY[0x1E4F143A8];
        *(void *)&time.CMTimeScale timescale = 0x40000000;
        time.CMTimeEpoch epoch = (CMTimeEpoch)__hoseSBAR_createSynchronizerAndRenderer_embedded_block_invoke;
        v126 = &__block_descriptor_tmp_389;
        uint64_t v127 = 0;
        CMTimeValue v128 = theData.value;
        BOOL v129 = v56;
        dispatch_async(v58, &time);
        CMTimeValue *v121 = theData.value;
        theData.long long value = 0;
        uint64_t RemoteWithOptions = FigSampleBufferRenderSynchronizerCreateWithOptions();
        if (!RemoteWithOptions)
        {
          uint64_t v63 = FigSampleBufferRenderSynchronizerCentralCreate();
          CMTimeValue v64 = (uint64_t *)(v57 + 112);
          if (!v63)
          {
            *(void *)(v57 + 112) = cf;
            CFTypeRef cf = 0;
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50
              || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
            {
              goto LABEL_114;
            }
            goto LABEL_113;
          }
          uint64_t v44 = v63;
          goto LABEL_241;
        }
        uint64_t v44 = RemoteWithOptions;
      }
    }
    goto LABEL_238;
  }
  uint64_t RemoteWithOptions = FigSampleBufferAudioRendererCreateRemoteWithOptions();
  if (RemoteWithOptions)
  {
    uint64_t v44 = RemoteWithOptions;
LABEL_238:
    APSLogErrorAt(RemoteWithOptions);
    goto LABEL_239;
  }
  CMTimeValue v65 = *v121;
  uint64_t v66 = *(void *)(CMBaseObjectGetVTable() + 8);
  CMTimeValue v64 = (uint64_t *)(v57 + 112);
  if (v66) {
    uint64_t v67 = v66;
  }
  else {
    uint64_t v67 = 0;
  }
  v68 = *(void (**)(CMTimeValue, void, void))(v67 + 56);
  if (v68) {
    v68(v65, *MEMORY[0x1E4F345F8], *MEMORY[0x1E4F1CFC8]);
  }
  uint64_t v63 = FigSampleBufferRenderSynchronizerCreateRemoteWithOptions();
  if (!v63)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_114;
    }
LABEL_113:
    LogPrintF();
LABEL_114:
    uint64_t v44 = 0;
    goto LABEL_115;
  }
  uint64_t v44 = v63;
LABEL_241:
  APSLogErrorAt(v63);
LABEL_115:
  if (v123.value) {
    CFRelease((CFTypeRef)v123.value);
  }
  if (theData.value) {
    CFRelease((CFTypeRef)theData.value);
  }
  if (v131) {
    CFRelease(v131);
  }
  if (cf) {
    CFRelease(cf);
  }
  if (Mutable) {
    CFRelease(Mutable);
  }
  if (v44)
  {
    uint64_t v88 = v44;
    goto LABEL_173;
  }
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  uint64_t v69 = *(void *)(v57 + 104);
  uint64_t v70 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v70) {
    uint64_t v71 = v70;
  }
  else {
    uint64_t v71 = 0;
  }
  v72 = *(void (**)(uint64_t, void, void))(v71 + 56);
  if (v72) {
    v72(v69, *MEMORY[0x1E4F34600], *MEMORY[0x1E4F1CFD0]);
  }
  if (!*(unsigned char *)(v57 + 243))
  {
    if (cf1)
    {
      if (CFEqual(cf1, @"LowQualityZeroLatency"))
      {
        v76 = (uint64_t *)MEMORY[0x1E4F34660];
        goto LABEL_164;
      }
      if (CFEqual(cf1, @"TimeDomain"))
      {
        v76 = (uint64_t *)MEMORY[0x1E4F34670];
        goto LABEL_164;
      }
      if (CFEqual(cf1, @"Spectral"))
      {
        v76 = (uint64_t *)MEMORY[0x1E4F34668];
LABEL_164:
        uint64_t v93 = *v76;
        if (!*v76) {
          goto LABEL_132;
        }
        CMTimeValue v94 = *v121;
        uint64_t v95 = *(void *)(CMBaseObjectGetVTable() + 8);
        if (v95) {
          uint64_t v96 = v95;
        }
        else {
          uint64_t v96 = 0;
        }
        v97 = *(uint64_t (**)(CMTimeValue, void, uint64_t))(v96 + 56);
        if (v97)
        {
          uint64_t v98 = v97(v94, *MEMORY[0x1E4F345F0], v93);
          if (!v98) {
            goto LABEL_132;
          }
          uint64_t v44 = v98;
        }
        else
        {
          uint64_t v44 = 4294954514;
        }
        uint64_t v88 = v44;
        goto LABEL_173;
      }
      if (!CFEqual(cf1, @"Varispeed"))
      {
        uint64_t v44 = 4294894965;
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        goto LABEL_174;
      }
    }
    else if (!APSSettingsGetIntWithOverrideAndDefault(@"hoseSBARPrefersVarispeedTimePitchAlgorithm", 0, 1))
    {
      goto LABEL_132;
    }
    v76 = (uint64_t *)MEMORY[0x1E4F34678];
    goto LABEL_164;
  }
LABEL_132:
  uint64_t v73 = *(void *)(v57 + 112);
  uint64_t v74 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v74) {
    uint64_t v75 = v74;
  }
  else {
    uint64_t v75 = 0;
  }
  v77 = *(uint64_t (**)(uint64_t, uint64_t))(v75 + 32);
  if (!v77)
  {
    uint64_t v44 = 4294954514;
LABEL_146:
    uint64_t v88 = v44;
LABEL_173:
    APSLogErrorAt(v88);
LABEL_174:
    uint64_t v17 = v44;
    goto LABEL_175;
  }
  uint64_t v78 = v77(v73, v57 + 120);
  if (v78)
  {
    uint64_t v44 = v78;
    goto LABEL_146;
  }
  uint64_t v79 = CMBaseObjectGetDerivedStorage();
  if (!*(void *)(v79 + 120))
  {
    uint64_t v44 = 4294894965;
    APSLogErrorAt(0);
LABEL_236:
    uint64_t v88 = v44;
    goto LABEL_173;
  }
  uint64_t v80 = v79;
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterAddWeakListener();
  v81 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, *(dispatch_queue_t *)(v80 + 280));
  v82 = (void *)FigCFWeakReferenceHolderCreateWithReferencedObject();
  if (!v82)
  {
    APSLogErrorAt(0);
    uint64_t v44 = 4294894966;
    goto LABEL_234;
  }
  dispatch_set_context(v81, v82);
  dispatch_source_set_event_handler_f(v81, (dispatch_function_t)hoseSBAR_purgeTimerFired);
  dispatch_source_set_cancel_handler_f(v81, (dispatch_function_t)hoseSBAR_purgeTimerCancelled);
  dispatch_resume(v81);
  uint64_t v83 = CMTimebaseAddTimerDispatchSource(*(CMTimebaseRef *)(v80 + 120), v81);
  if (v83)
  {
    uint64_t v44 = v83;
    APSLogErrorAt(v83);
LABEL_234:
    if (v81)
    {
      dispatch_source_cancel(v81);
      dispatch_release(v81);
    }
    goto LABEL_236;
  }
  *(void *)(v80 + 544) = v81;
  CMBaseObjectGetDerivedStorage();
  uint64_t v84 = *v64;
  CMTimeValue v85 = *v121;
  uint64_t v86 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v86) {
    uint64_t v87 = v86;
  }
  else {
    uint64_t v87 = 0;
  }
  v89 = *(uint64_t (**)(uint64_t, CMTimeValue))(v87 + 8);
  if (!v89)
  {
    uint64_t v44 = 4294954514;
LABEL_157:
    uint64_t v88 = v44;
    goto LABEL_173;
  }
  uint64_t v90 = v89(v84, v85);
  if (v90)
  {
    uint64_t v44 = v90;
    goto LABEL_157;
  }
  if (!*(_DWORD *)(DerivedStorage + 132)) {
    goto LABEL_177;
  }
  SNPrintF();
  v91 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  dispatch_queue_t v92 = dispatch_queue_create(label, v91);
  *(void *)(DerivedStorage + 296) = v92;
  if (!v92)
  {
LABEL_215:
    APSLogErrorAt(0);
    return 4294894966;
  }
  uint64_t v17 = APSAudioIOAssertionTimingControllerCreate(a2, (CFTypeRef *)(DerivedStorage + 136));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  dispatch_async_f(*(dispatch_queue_t *)(DerivedStorage + 296), 0, (dispatch_function_t)hoseSBAR_renewAudioIOAssertionDispatch);
LABEL_177:
  uint64_t v100 = MEMORY[0x1E4F1F9F8];
  long long v101 = *MEMORY[0x1E4F1F9F8];
  *(_OWORD *)(DerivedStorage + 304) = *MEMORY[0x1E4F1F9F8];
  uint64_t v102 = *(void *)(v100 + 16);
  *(void *)(DerivedStorage + 320) = v102;
  *(_OWORD *)(DerivedStorage + 328) = v101;
  *(void *)(DerivedStorage + 344) = v102;
  *(void *)(DerivedStorage + 440) = 0x100000000;
  *(_OWORD *)(DerivedStorage + 424) = kAPSNetworkTimeInvalid;
  *(void *)(DerivedStorage + 464) = v102;
  *(_OWORD *)(DerivedStorage + 448) = v101;
  *(void *)(DerivedStorage + 488) = v102;
  *(_OWORD *)(DerivedStorage + 472) = v101;
  *(void *)(DerivedStorage + 512) = v102;
  *(_OWORD *)(DerivedStorage + 496) = v101;
  *(void *)(DerivedStorage + 416) = v102;
  long long v122 = v101;
  *(_OWORD *)(DerivedStorage + 400) = v101;
  long long v103 = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 32);
  long long v104 = *MEMORY[0x1E4F1FA20];
  *(_OWORD *)(DerivedStorage + 708) = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 16);
  *(_OWORD *)(DerivedStorage + 724) = v103;
  *(_OWORD *)(DerivedStorage + 692) = v104;
  *(_DWORD *)(DerivedStorage + 640) = FigGetCFPreferenceNumberWithDefault();
  CallbacksForUnsortedSampleBuffers = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
  uint64_t v17 = CMBufferQueueCreate(v60, 0, CallbacksForUnsortedSampleBuffers, (CMBufferQueueRef *)(DerivedStorage + 552));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  v106 = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
  uint64_t v17 = CMBufferQueueCreate(v60, 0, v106, (CMBufferQueueRef *)(DerivedStorage + 560));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  char v107 = FigGetCFPreferenceNumberWithDefault();
  uint64_t v17 = APSCMSampleBufferMergerCreate(v107, (CFTypeRef *)(DerivedStorage + 576));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  v108 = (_OWORD *)(DerivedStorage + 744);
  *(_OWORD *)(DerivedStorage + 744) = v122;
  *(void *)(DerivedStorage + 760) = v102;
  char v109 = FigGetCFPreferenceNumberWithDefault();
  *(unsigned char *)(DerivedStorage + 740) = v109;
  if (v109)
  {
    unsigned int v110 = FigGetCFPreferenceNumberWithDefault();
    CMTimeMake(&time, v110, 1000);
    _OWORD *v108 = *(_OWORD *)&time.value;
    CMTimeEpoch v111 = time.epoch;
    *(void *)(DerivedStorage + 760) = time.epoch;
    *(_OWORD *)&time.long long value = *v108;
    time.CMTimeEpoch epoch = v111;
    if (hoseSBAR_setVolumeFadeInCurve(0, MEMORY[0x1E4F1FA48], &time))
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
  }
  *(unsigned char *)(DerivedStorage + 816) = 0;
  *(void *)(DerivedStorage + 784) = 0;
  CFMutableBagRef v112 = CFBagCreateMutable(v60, 0, MEMORY[0x1E4F1D520]);
  *(void *)(DerivedStorage + 768) = v112;
  if (!v112) {
    goto LABEL_215;
  }
  CFMutableDictionaryRef v113 = CFDictionaryCreateMutable(v60, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(DerivedStorage + 776) = v113;
  if (!v113) {
    goto LABEL_215;
  }
  CFMutableDictionaryRef v114 = CFDictionaryCreateMutable(v60, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(DerivedStorage + 792) = v114;
  if (!v114) {
    goto LABEL_215;
  }
  CFMutableDictionaryRef v115 = CFDictionaryCreateMutable(v60, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(DerivedStorage + 800) = v115;
  if (!v115) {
    goto LABEL_215;
  }
  CFMutableDictionaryRef v116 = CFDictionaryCreateMutable(v60, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(DerivedStorage + 808) = v116;
  if (!v116) {
    goto LABEL_215;
  }
  uint64_t v17 = APSTimedInfoManagerCreate((CFTypeRef *)(DerivedStorage + 840));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  CMNotificationCenterGetDefaultLocalCenter();
  uint64_t v17 = FigNotificationCenterAddWeakListener();
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  uint64_t v17 = APSTimedInfoManagerResume(*(void *)(DerivedStorage + 840), *(const void **)(DerivedStorage + 120));
  if (v17)
  {
    uint64_t v44 = v17;
    goto LABEL_175;
  }
  *(_DWORD *)(DerivedStorage + 216) = -1;
  if (notify_register_check("com.apple.mediaexperience.fadeinappliedforplaybackhandoff", (int *)(DerivedStorage + 216))
    || (*(_DWORD *)(DerivedStorage + 220) = -1,
        notify_register_check("com.apple.mediaexperience.fadeoutappliedforplaybackhandoff", (int *)(DerivedStorage + 220))))
  {
    APSLogErrorAt(0);
    return 4294960560;
  }
  else
  {
    time.long long value = 0;
    APSAudioFormatDescriptionCopyDebugString(*(void *)(DerivedStorage + 80), (CFStringRef *)&time);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (time.value) {
      CFRelease((CFTypeRef)time.value);
    }
    uint64_t v44 = 0;
    *a10 = 0;
  }
  return v44;
}

uint64_t hoseSBAR_getAudioBytesPerSec(long long *a1, const __CFDictionary *a2, double a3, double a4, double a5)
{
  uint64_t v6 = a1;
  uint64_t v22 = 0;
  long long v20 = 0u;
  long long v21 = 0u;
  uint64_t v19 = 0;
  int v18 = 0;
  uint64_t valuePtr = 0;
  if (!a1)
  {
    HIDWORD(v21) = 2;
    uint64_t v6 = &v20;
  }
  int v7 = *((_DWORD *)v6 + 2);
  if (v7 == 1819304813)
  {
    LODWORD(a4) = *((_DWORD *)v6 + 7);
    LODWORD(a5) = *((_DWORD *)v6 + 8);
    double v10 = *(double *)v6 * (double)*(unint64_t *)&a4 * (double)*(unint64_t *)&a5;
    return (int)(v10 * 0.125);
  }
  if (v7 == 1634492771)
  {
    int v8 = *((_DWORD *)v6 + 3);
    if ((v8 - 1) >= 3)
    {
      double v9 = 0.0;
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
    else
    {
      double v9 = dbl_1D0C1F178[v8 - 1];
    }
    LODWORD(a4) = *((_DWORD *)v6 + 7);
    double v10 = v9 * (*(double *)v6 * (double)*(unint64_t *)&a4);
    return (int)(v10 * 0.125);
  }
  if (!a2)
  {
    CFNumberRef v12 = 0;
    goto LABEL_17;
  }
  ASBDToAPAudioFormat((uint64_t)v6, (unint64_t *)&v19);
  if ((unint64_t)v19 < 2)
  {
    uint64_t v11 = 0;
    goto LABEL_11;
  }
  if (v19 > 0x3FFFFFFF)
  {
    if (v19 <= 0x7FFFFFFFFFFFLL)
    {
      if (v19 > 0xFFFFFFFFFFLL)
      {
        if (v19 <= 0x7FFFFFFFFFFLL)
        {
          switch(v19)
          {
            case 0x10000000000:
              uint64_t v11 = 40;
              goto LABEL_11;
            case 0x20000000000:
              uint64_t v11 = 41;
              goto LABEL_11;
            case 0x40000000000:
              uint64_t v11 = 42;
              goto LABEL_11;
          }
        }
        else if (v19 > 0x1FFFFFFFFFFFLL)
        {
          if (v19 == 0x200000000000)
          {
            uint64_t v11 = 45;
            goto LABEL_11;
          }
          if (v19 == 0x400000000000)
          {
            uint64_t v11 = 46;
            goto LABEL_11;
          }
        }
        else
        {
          if (v19 == 0x80000000000)
          {
            uint64_t v11 = 43;
            goto LABEL_11;
          }
          if (v19 == 0x100000000000)
          {
            uint64_t v11 = 44;
            goto LABEL_11;
          }
        }
      }
      else if (v19 <= 0x1FFFFFFFFLL)
      {
        switch(v19)
        {
          case 0x40000000:
            uint64_t v11 = 30;
            goto LABEL_11;
          case 0x80000000:
            uint64_t v11 = 31;
            goto LABEL_11;
          case 0x100000000:
            uint64_t v11 = 32;
            goto LABEL_11;
        }
      }
      else if (v19 > 0x3FFFFFFFFFLL)
      {
        if (v19 == 0x4000000000)
        {
          uint64_t v11 = 38;
          goto LABEL_11;
        }
        if (v19 == 0x8000000000)
        {
          uint64_t v11 = 39;
          goto LABEL_11;
        }
      }
      else
      {
        if (v19 == 0x200000000)
        {
          uint64_t v11 = 33;
          goto LABEL_11;
        }
        if (v19 == 0x400000000)
        {
          uint64_t v11 = 34;
          goto LABEL_11;
        }
      }
    }
    else if (v19 <= 0x3FFFFFFFFFFFFFLL)
    {
      if (v19 <= 0x3FFFFFFFFFFFFLL)
      {
        switch(v19)
        {
          case 0x800000000000:
            uint64_t v11 = 47;
            goto LABEL_11;
          case 0x1000000000000:
            uint64_t v11 = 48;
            goto LABEL_11;
          case 0x2000000000000:
            uint64_t v11 = 49;
            goto LABEL_11;
        }
      }
      else if (v19 > 0xFFFFFFFFFFFFFLL)
      {
        if (v19 == 0x10000000000000)
        {
          uint64_t v11 = 52;
          goto LABEL_11;
        }
        if (v19 == 0x20000000000000)
        {
          uint64_t v11 = 53;
          goto LABEL_11;
        }
      }
      else
      {
        if (v19 == 0x4000000000000)
        {
          uint64_t v11 = 50;
          goto LABEL_11;
        }
        if (v19 == 0x8000000000000)
        {
          uint64_t v11 = 51;
          goto LABEL_11;
        }
      }
    }
    else if (v19 > 0x3FFFFFFFFFFFFFFLL)
    {
      if (v19 > 0x1FFFFFFFFFFFFFFFLL)
      {
        if (v19 == 0x2000000000000000)
        {
          uint64_t v11 = 61;
          goto LABEL_11;
        }
        if (v19 == 0x4000000000000000)
        {
          uint64_t v11 = 62;
          goto LABEL_11;
        }
      }
      else
      {
        if (v19 == 0x400000000000000)
        {
          uint64_t v11 = 58;
          goto LABEL_11;
        }
        if (v19 == 0x1000000000000000)
        {
          uint64_t v11 = 60;
          goto LABEL_11;
        }
      }
    }
    else if (v19 > 0xFFFFFFFFFFFFFFLL)
    {
      if (v19 == 0x100000000000000)
      {
        uint64_t v11 = 56;
        goto LABEL_11;
      }
      if (v19 == 0x200000000000000)
      {
        uint64_t v11 = 57;
        goto LABEL_11;
      }
    }
    else
    {
      if (v19 == 0x40000000000000)
      {
        uint64_t v11 = 54;
        goto LABEL_11;
      }
      if (v19 == 0x80000000000000)
      {
        uint64_t v11 = 55;
        goto LABEL_11;
      }
    }
  }
  else if (v19 < 0x8000)
  {
    if (v19 > 255)
    {
      if (v19 <= 2047)
      {
        switch(v19)
        {
          case 256:
            uint64_t v11 = 8;
            goto LABEL_11;
          case 512:
            uint64_t v11 = 9;
            goto LABEL_11;
          case 1024:
            uint64_t v11 = 10;
            goto LABEL_11;
        }
      }
      else if (v19 >= 0x2000)
      {
        if (v19 == 0x2000)
        {
          uint64_t v11 = 13;
          goto LABEL_11;
        }
        if (v19 == 0x4000)
        {
          uint64_t v11 = 14;
          goto LABEL_11;
        }
      }
      else
      {
        if (v19 == 2048)
        {
          uint64_t v11 = 11;
          goto LABEL_11;
        }
        if (v19 == 4096)
        {
          uint64_t v11 = 12;
          goto LABEL_11;
        }
      }
    }
    else if (v19 <= 7)
    {
      switch(v19)
      {
        case 0x8000000000000000:
          uint64_t v11 = 63;
          goto LABEL_11;
        case 2:
          uint64_t v11 = 1;
          goto LABEL_11;
        case 4:
          uint64_t v11 = 2;
          goto LABEL_11;
      }
    }
    else if (v19 > 31)
    {
      if (v19 == 32)
      {
        uint64_t v11 = 5;
        goto LABEL_11;
      }
      if (v19 == 128)
      {
        uint64_t v11 = 7;
        goto LABEL_11;
      }
    }
    else
    {
      if (v19 == 8)
      {
        uint64_t v11 = 3;
        goto LABEL_11;
      }
      if (v19 == 16)
      {
        uint64_t v11 = 4;
        goto LABEL_11;
      }
    }
  }
  else if (v19 < 0x400000)
  {
    if (v19 < 0x40000)
    {
      switch(v19)
      {
        case 0x8000:
          uint64_t v11 = 15;
          goto LABEL_11;
        case 0x10000:
          uint64_t v11 = 16;
          goto LABEL_11;
        case 0x20000:
          uint64_t v11 = 17;
          goto LABEL_11;
      }
    }
    else if (v19 >= 0x100000)
    {
      if (v19 == 0x100000)
      {
        uint64_t v11 = 20;
        goto LABEL_11;
      }
      if (v19 == 0x200000)
      {
        uint64_t v11 = 21;
        goto LABEL_11;
      }
    }
    else
    {
      if (v19 == 0x40000)
      {
        uint64_t v11 = 18;
        goto LABEL_11;
      }
      if (v19 == 0x80000)
      {
        uint64_t v11 = 19;
        goto LABEL_11;
      }
    }
  }
  else if (v19 > 0x3FFFFFF)
  {
    if (v19 > 0xFFFFFFF)
    {
      if (v19 == 0x10000000)
      {
        uint64_t v11 = 28;
        goto LABEL_11;
      }
      if (v19 == 0x20000000)
      {
        uint64_t v11 = 29;
        goto LABEL_11;
      }
    }
    else
    {
      if (v19 == 0x4000000)
      {
        uint64_t v11 = 26;
        goto LABEL_11;
      }
      if (v19 == 0x8000000)
      {
        uint64_t v11 = 27;
        goto LABEL_11;
      }
    }
  }
  else if (v19 > 0xFFFFFF)
  {
    if (v19 == 0x1000000)
    {
      uint64_t v11 = 24;
      goto LABEL_11;
    }
    if (v19 == 0x2000000)
    {
      uint64_t v11 = 25;
      goto LABEL_11;
    }
  }
  else
  {
    if (v19 == 0x400000)
    {
      uint64_t v11 = 22;
      goto LABEL_11;
    }
    if (v19 == 0x800000)
    {
      uint64_t v11 = 23;
      goto LABEL_11;
    }
  }
  uint64_t v11 = 35;
  if (v19 != 0x800000000) {
    uint64_t v11 = 0;
  }
LABEL_11:
  uint64_t valuePtr = v11;
  CFNumberRef v12 = CFNumberCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], kCFNumberSInt64Type, &valuePtr);
  CFNumberRef Value = (const __CFNumber *)CFDictionaryGetValue(a2, v12);
  if (Value)
  {
    CFNumberGetValue(Value, kCFNumberSInt32Type, &v18);
    int v14 = v18 / 8;
    goto LABEL_18;
  }
LABEL_17:
  int v18 = 409600;
  int v14 = 51200;
LABEL_18:
  uint64_t v15 = ((*((_DWORD *)v6 + 7) + 1) >> 1) * v14;
  if (v12) {
    CFRelease(v12);
  }
  return v15;
}

void __hoseSBAR_createSynchronizerAndRenderer_embedded_block_invoke(uint64_t a1)
{
  uint64_t v2 = *(void *)(a1 + 40);
  int v3 = *(unsigned __int8 *)(a1 + 48);
  int v33 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v5 = (void *)DerivedStorage;
  int valuePtr = 0;
  if (!v3 && !*(unsigned char *)(DerivedStorage + 240))
  {
    uint64_t v9 = *(void *)(DerivedStorage + 232);
    FigCFEqual();
    int v8 = (const void *)CFStringCreateF();
    int v10 = 0;
    if (!v9) {
      goto LABEL_31;
    }
LABEL_5:
    uint64_t v11 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v11)
    {
      CFNumberRef v12 = *(uint64_t (**)(uint64_t, void, const void *))(v11 + 56);
      if (v12)
      {
        uint64_t v13 = v12(v9, *MEMORY[0x1E4F75FA8], v8);
        int v33 = v13;
        if (v13) {
          goto LABEL_33;
        }
        uint64_t v14 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v14)
        {
          uint64_t v15 = *(uint64_t (**)(uint64_t, void, void))(v14 + 56);
          if (v15)
          {
            uint64_t v13 = v15(v9, *MEMORY[0x1E4F76288], *MEMORY[0x1E4F1CFC8]);
            int v33 = v13;
            if (v13) {
              goto LABEL_33;
            }
            uint64_t v16 = *(void *)(CMBaseObjectGetVTable() + 16);
            if (v16)
            {
              uint64_t v17 = *(uint64_t (**)(uint64_t, void, void))(v16 + 56);
              if (v17)
              {
                uint64_t v13 = v17(v9, *MEMORY[0x1E4F75EC8], *MEMORY[0x1E4F758D0]);
                int v33 = v13;
                if (!v13)
                {
                  int valuePtr = 16;
                  uint64_t v18 = (uint64_t)CFNumberCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], kCFNumberSInt32Type, &valuePtr);
                  uint64_t v19 = (const void *)v18;
                  if (!v18) {
                    goto LABEL_57;
                  }
                  uint64_t v20 = *(void *)(CMBaseObjectGetVTable() + 16);
                  if (v20)
                  {
                    long long v21 = *(uint64_t (**)(uint64_t, void, const void *))(v20 + 56);
                    if (v21)
                    {
                      uint64_t v18 = v21(v9, *MEMORY[0x1E4F76248], v19);
                      int v33 = v18;
                      if (v18) {
                        goto LABEL_57;
                      }
                      if (!v10) {
                        goto LABEL_27;
                      }
                      uint64_t v22 = v5[6];
                      if (v22)
                      {
                        uint64_t v23 = *(void *)(CMBaseObjectGetVTable() + 16);
                        if (v23)
                        {
                          int v24 = *(uint64_t (**)(uint64_t, void, uint64_t))(v23 + 56);
                          if (v24)
                          {
                            uint64_t v18 = v24(v9, *MEMORY[0x1E4F75FB0], v22);
                            int v33 = v18;
                            if (v18) {
                              goto LABEL_57;
                            }
                            goto LABEL_23;
                          }
                          uint64_t v18 = 4294948071;
                        }
                        else
                        {
                          uint64_t v18 = 4294948075;
                        }
                        int v33 = v18;
                        goto LABEL_57;
                      }
LABEL_23:
                      uint64_t v25 = v5[32];
                      if (!v25) {
                        goto LABEL_27;
                      }
                      uint64_t v26 = *(void *)(CMBaseObjectGetVTable() + 16);
                      if (v26)
                      {
                        uint64_t v27 = *(uint64_t (**)(uint64_t, void, uint64_t))(v26 + 56);
                        if (v27)
                        {
                          uint64_t v18 = v27(v9, *MEMORY[0x1E4F76610], v25);
                          int v33 = v18;
                          if (!v18)
                          {
LABEL_27:
                            uint64_t v28 = *(void *)(CMBaseObjectGetVTable() + 8);
                            if (v28) {
                              uint64_t v29 = v28;
                            }
                            else {
                              uint64_t v29 = 0;
                            }
                            CFTypeRef v31 = *(uint64_t (**)(uint64_t, void, uint64_t))(v29 + 56);
                            if (v31)
                            {
                              uint64_t v18 = v31(v2, *MEMORY[0x1E4F34610], v9);
                              int v33 = v18;
                              if (!v18)
                              {
                                if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50) {
                                  goto LABEL_41;
                                }
                                if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1
                                  || _LogCategory_Initialize())
                                {
                                  LogPrintF();
                                }
                                goto LABEL_34;
                              }
                            }
                            else
                            {
                              uint64_t v18 = 4294954514;
                              int v33 = -12782;
                            }
                          }
LABEL_57:
                          APSLogErrorAt(v18);
LABEL_34:
                          if (!v33) {
                            goto LABEL_41;
                          }
                          goto LABEL_35;
                        }
                        uint64_t v18 = 4294948071;
                      }
                      else
                      {
                        uint64_t v18 = 4294948075;
                      }
                      int v33 = v18;
                      goto LABEL_57;
                    }
                    uint64_t v18 = 4294948071;
                  }
                  else
                  {
                    uint64_t v18 = 4294948075;
                  }
                  int v33 = v18;
                  goto LABEL_57;
                }
LABEL_33:
                APSLogErrorAt(v13);
                uint64_t v19 = 0;
                goto LABEL_34;
              }
              uint64_t v13 = 4294948071;
            }
            else
            {
              uint64_t v13 = 4294948075;
            }
            int v33 = v13;
            goto LABEL_33;
          }
          uint64_t v13 = 4294948071;
        }
        else
        {
          uint64_t v13 = 4294948075;
        }
        int v33 = v13;
        goto LABEL_33;
      }
      uint64_t v13 = 4294948071;
LABEL_32:
      int v33 = v13;
      goto LABEL_33;
    }
LABEL_31:
    uint64_t v13 = 4294948075;
    goto LABEL_32;
  }
  uint64_t v6 = (uint64_t *)(DerivedStorage + 224);
  uint64_t UsingAuxiliaryAVAudioSession = FigAudioSessionCreateUsingAuxiliaryAVAudioSession();
  int v33 = UsingAuxiliaryAVAudioSession;
  if (!UsingAuxiliaryAVAudioSession)
  {
    FigCFEqual();
    int v8 = (const void *)CFStringCreateF();
    uint64_t v9 = *v6;
    int v10 = 1;
    if (!*v6) {
      goto LABEL_31;
    }
    goto LABEL_5;
  }
  APSLogErrorAt(UsingAuxiliaryAVAudioSession);
  uint64_t v19 = 0;
  int v8 = 0;
LABEL_35:
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v30 = (const void *)v5[28];
  if (v30)
  {
    CFRelease(v30);
    v5[28] = 0;
  }
LABEL_41:
  if (v8) {
    CFRelease(v8);
  }
  if (v19) {
    CFRelease(v19);
  }
  CFRelease(*(CFTypeRef *)(a1 + 40));
  CFRelease(*(CFTypeRef *)(a1 + 32));
}

uint64_t hoseSBAR_setVolumeFadeInCurve(uint64_t a1, CMTime *a2, CMTime *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v21, 0, sizeof(v21));
  CMTime lhs = *a2;
  CMTime rhs = *a3;
  CMTimeAdd(&v21, &lhs, &rhs);
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!Mutable)
  {
    uint64_t v17 = 4294894966;
    APSLogErrorAt(0);
    return v17;
  }
  int v8 = Mutable;
  CFMutableArrayRef v9 = CFArrayCreateMutable(v6, 0, MEMORY[0x1E4F1D510]);
  if (!v9)
  {
    uint64_t v17 = 4294894966;
    APSLogErrorAt(0);
    goto LABEL_21;
  }
  int v10 = v9;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTime lhs = *a3;
    CMTimeGetSeconds(&lhs);
    CMTime lhs = *a2;
    CMTimeGetSeconds(&lhs);
    LogPrintF();
  }
  CMTime lhs = *a2;
  uint64_t appended = FigCFArrayAppendCMTime();
  if (appended)
  {
    uint64_t v17 = appended;
    goto LABEL_19;
  }
  uint64_t appended = FigCFArrayAppendDouble();
  if (appended)
  {
    uint64_t v17 = appended;
    goto LABEL_19;
  }
  CFNumberRef v12 = (const void *)*MEMORY[0x1E4F34550];
  CFArrayAppendValue(v10, (const void *)*MEMORY[0x1E4F34550]);
  CMTime lhs = v21;
  uint64_t appended = FigCFArrayAppendCMTime();
  if (appended)
  {
    uint64_t v17 = appended;
    goto LABEL_19;
  }
  uint64_t appended = FigCFArrayAppendDouble();
  if (appended)
  {
    uint64_t v17 = appended;
    goto LABEL_19;
  }
  CFArrayAppendValue(v10, v12);
  CFDictionarySetValue(v8, (const void *)*MEMORY[0x1E4F34558], v10);
  uint64_t v13 = *(void *)(DerivedStorage + 104);
  uint64_t v14 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v14) {
    uint64_t v15 = v14;
  }
  else {
    uint64_t v15 = 0;
  }
  uint64_t v16 = *(uint64_t (**)(uint64_t, void, __CFDictionary *))(v15 + 56);
  if (!v16)
  {
    uint64_t v17 = 4294954514;
LABEL_18:
    uint64_t appended = v17;
LABEL_19:
    APSLogErrorAt(appended);
    goto LABEL_20;
  }
  uint64_t v17 = v16(v13, *MEMORY[0x1E4F34650], v8);
  if (v17) {
    goto LABEL_18;
  }
LABEL_20:
  CFRelease(v10);
LABEL_21:
  CFRelease(v8);
  return v17;
}

void hoseSBAR_timedManagerTimerTriggerNotification(uint64_t a1, const void *a2, uint64_t a3, uint64_t a4, const void *a5)
{
  CMBaseObjectGetDerivedStorage();
  CFDictionaryRef v18 = 0;
  uint64_t v19 = 0;
  CMTime v17 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  if (a5)
  {
    CFTypeID v7 = CFGetTypeID(a5);
    if (v7 == CFDictionaryGetTypeID())
    {
      ValueIfPresent = (__CFDictionary *)FigCFDictionaryGetValueIfPresent();
      if (!ValueIfPresent) {
        goto LABEL_20;
      }
      ValueIfPresent = (__CFDictionary *)FigCFDictionaryGetValueIfPresent();
      if (!ValueIfPresent) {
        goto LABEL_20;
      }
      CMTimeMakeFromDictionary(&v17, v18);
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        *(CMTime *)CMTime time = v17;
        CMTimeGetSeconds((CMTime *)time);
        LogPrintF();
      }
      ValueIfPresent = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 1, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!ValueIfPresent)
      {
LABEL_20:
        APSLogErrorAt((uint64_t)ValueIfPresent);
        return;
      }
      CFMutableArrayRef v9 = ValueIfPresent;
      CFDictionarySetValue(ValueIfPresent, @"AudioFormat", v19);
      CMNotificationCenterGetDefaultLocalCenter();
      FigDispatchAsyncPostNotification();
      CFBooleanGetTypeID();
      BOOL v10 = CFDictionaryGetTypedValue() == *MEMORY[0x1E4F1CFD0];
      uint64_t v11 = v19;
      if (v19 || (APSLogErrorAt(0), (uint64_t v11 = v19) != 0))
      {
        double v12 = *((double *)v11 + 2);
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v11 = v19;
        if (!v19)
        {
          APSLogErrorAt(0);
          int v13 = 0;
          double v12 = 0.0;
          goto LABEL_13;
        }
        double v12 = 0.0;
      }
      int v13 = *((_DWORD *)v11 + 11);
LABEL_13:
      hoseSBAR_setPreferencesOnAudioSessionSetValues((uint64_t)a2, v10, v13, v12);
      CMTime v16 = v17;
      uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
      if (a2) {
        CFTypeRef v15 = CFRetain(a2);
      }
      else {
        CFTypeRef v15 = 0;
      }
      *(void *)CMTime time = v15;
      *(CMTime *)&time[8] = v16;
      APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_restartSBAROnFormatChangeInternal, time, 0x20uLL);
      CFRelease(v9);
      return;
    }
  }

  APSLogErrorAt(0);
}

uint64_t hoseSBAR_setPreferencesOnAudioSessionSetValues(uint64_t a1, int a2, int a3, double a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  int v9 = APSIsAPMSpeaker_sIsAPMSpeaker;
  uint64_t result = FigCFEqual();
  if (result)
  {
    uint64_t v11 = 0;
    if (v9) {
      return result;
    }
  }
  else
  {
    uint64_t v11 = *(void *)(DerivedStorage + 224);
    if (v9) {
      return result;
    }
  }
  uint64_t v12 = *(void *)(DerivedStorage + 232);
  double v33 = a4;
  CFAllocatorRef v13 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFNumberRef v14 = CFNumberCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], kCFNumberFloat64Type, &v33);
  if (v14)
  {
    CFNumberRef v15 = v14;
    CMTime v16 = (uint64_t *)MEMORY[0x1E4F76498];
    if (v12
      && (uint64_t v17 = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v12, 0, *MEMORY[0x1E4F76498], (uint64_t)v14, a2), v17))
    {
      uint64_t v29 = v17;
    }
    else
    {
      if (!v11
        || (uint64_t v17 = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v11, 1, *v16, (uint64_t)v15, a2),
            !v17))
      {
        CFRelease(v15);
        goto LABEL_13;
      }
      uint64_t v29 = v17;
    }
    APSLogErrorAt(v17);
    CFRelease(v15);
    uint64_t v30 = v29;
    return APSLogErrorAt(v30);
  }
  APSLogErrorAt(0);
LABEL_13:
  uint64_t v18 = *(void *)(DerivedStorage + 232);
  int valuePtr = a3;
  CFNumberRef v19 = CFNumberCreate(v13, kCFNumberSInt32Type, &valuePtr);
  if (v19)
  {
    CFNumberRef v20 = v19;
    CMTime v21 = (uint64_t *)MEMORY[0x1E4F76490];
    if (v18
      && (uint64_t v22 = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v18, 0, *MEMORY[0x1E4F76490], (uint64_t)v19, a2), v22))
    {
      uint64_t v31 = v22;
    }
    else
    {
      if (!v11
        || (uint64_t v22 = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v11, 1, *v21, (uint64_t)v20, a2),
            !v22))
      {
        CFRelease(v20);
        goto LABEL_19;
      }
      uint64_t v31 = v22;
    }
    APSLogErrorAt(v22);
    CFRelease(v20);
    uint64_t v30 = v31;
    return APSLogErrorAt(v30);
  }
  APSLogErrorAt(0);
LABEL_19:
  uint64_t v23 = *(void *)(DerivedStorage + 232);
  uint64_t v24 = CMBaseObjectGetDerivedStorage();
  uint64_t v25 = *(void *)(v24 + 592);
  if (v25)
  {
    uint64_t result = *(unsigned int *)(v25 + 56);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t result = 4294901760;
  }
  if (*(unsigned char *)(v24 + 241) && (uint64_t result = APSAudioFormatDoesAudioChannelLayoutTagHaveHeights(result), result)) {
    uint64_t v26 = (uint64_t *)MEMORY[0x1E4F75A30];
  }
  else {
    uint64_t v26 = (uint64_t *)MEMORY[0x1E4F75A28];
  }
  uint64_t v27 = *v26;
  uint64_t v28 = (uint64_t *)MEMORY[0x1E4F76418];
  if (v23)
  {
    uint64_t result = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v23, 0, *MEMORY[0x1E4F76418], *v26, a2);
    if (result)
    {
      uint64_t v32 = result;
LABEL_41:
      APSLogErrorAt(result);
      uint64_t v30 = v32;
      return APSLogErrorAt(v30);
    }
  }
  if (v11)
  {
    uint64_t result = hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(a1, v11, 1, *v28, v27, a2);
    if (result)
    {
      uint64_t v32 = result;
      goto LABEL_41;
    }
  }
  return result;
}

uint64_t hoseSBAR_restartSBAROnFormatChangeInternal(uint64_t a1)
{
  uint64_t v2 = *(void **)a1;
  uint64_t result = CMBaseObjectGetDerivedStorage();
  CMTime v13 = *(CMTime *)(a1 + 8);
  if (!*(unsigned char *)result)
  {
    uint64_t v4 = result;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      CMTime time = v13;
      CMTimeGetSeconds(&time);
      LogPrintF();
    }
    uint64_t v5 = *(const void **)(v4 + 824);
    if (v5)
    {
      CFRelease(v5);
      *(void *)(v4 + 824) = 0;
    }
    CFAllocatorRef v6 = *(const void **)(v4 + 832);
    if (v6)
    {
      CFRelease(v6);
      *(void *)(v4 + 832) = 0;
    }
    uint64_t v7 = *(void *)(v4 + 104);
    uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v8) {
      uint64_t v9 = v8;
    }
    else {
      uint64_t v9 = 0;
    }
    BOOL v10 = *(uint64_t (**)(uint64_t))(v9 + 24);
    if (!v10)
    {
      uint64_t result = 4294954514;
      return APSLogErrorAt(result);
    }
    uint64_t result = v10(v7);
    if (result) {
      return APSLogErrorAt(result);
    }
    *(unsigned char *)(v4 + 568) = 0;
    uint64_t v11 = *(opaqueCMBufferQueue **)(v4 + 552);
    CMTime time = v13;
    hoseSBAR_pruneBufferQueueToTimestamp((uint64_t)v2, (uint64_t)&time, v11);
    uint64_t result = hoseSBAR_transferStashedSBufsIntoBuffersForSBAR(v2);
    if (result) {
      return APSLogErrorAt(result);
    }
  }
  return result;
}

void hoseSBAR_pruneBufferQueueToTimestamp(uint64_t a1, uint64_t a2, opaqueCMBufferQueue *a3)
{
  uint64_t v16 = *MEMORY[0x1E4F143B8];
  CMBaseObjectGetDerivedStorage();
  if ((*(unsigned char *)(a2 + 12) & 1) == 0 || !a3)
  {
    APSLogErrorAt(0);
    return;
  }
  uint64_t v5 = (opaqueCMSampleBuffer *)CMBufferQueueCopyHead(a3);
  if (!v5) {
    return;
  }
  CFAllocatorRef v6 = v5;
  while (1)
  {
    CMSampleBufferGetOutputPresentationTimeStamp(&time, v6);
    CMTimeValue value = time.value;
    CMTimeFlags flags = time.flags;
    CMTimeScale timescale = time.timescale;
    if (time.flags)
    {
      CMTimeEpoch epoch = time.epoch;
      goto LABEL_13;
    }
    CMBufferQueueGetMinPresentationTimeStamp(&time, a3);
    CMTimeValue v12 = time.value;
    CMTimeFlags flags = time.flags;
    CMTimeScale v13 = time.timescale;
    if ((time.flags & 1) == 0) {
      break;
    }
    CMTimeEpoch epoch = time.epoch;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      time.CMTimeValue value = v12;
      time.CMTimeScale timescale = v13;
      time.CMTimeFlags flags = flags;
      time.CMTimeEpoch epoch = epoch;
      CMTimeGetSeconds(&time);
      LogPrintF();
    }
    CMTimeValue value = v12;
    CMTimeScale timescale = v13;
LABEL_13:
    CMTime time = *(CMTime *)a2;
    time2.CMTimeValue value = value;
    time2.CMTimeScale timescale = timescale;
    time2.CMTimeFlags flags = flags;
    time2.CMTimeEpoch epoch = epoch;
    if (CMTimeCompare(&time, &time2) < 0) {
      goto LABEL_26;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      time.CMTimeValue value = value;
      time.CMTimeScale timescale = timescale;
      time.CMTimeFlags flags = flags;
      time.CMTimeEpoch epoch = epoch;
      CMTimeGetSeconds(&time);
      CMTime time = *(CMTime *)a2;
      CMTimeGetSeconds(&time);
      LogPrintF();
    }
    CMBufferRef v9 = CMBufferQueueDequeueAndRetain(a3);
    if (v9) {
      CFRelease(v9);
    }
    CFRelease(v6);
    CFAllocatorRef v6 = (opaqueCMSampleBuffer *)CMBufferQueueCopyHead(a3);
    if (!v6) {
      return;
    }
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
LABEL_26:
  CFRelease(v6);
}

uint64_t hoseSBAR_transferStashedSBufsIntoBuffersForSBAR(void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = CMBufferQueueReset(*(CMBufferQueueRef *)(DerivedStorage + 560));
  if (v3)
  {
    uint64_t v4 = v3;
    goto LABEL_7;
  }
  uint64_t v3 = CMBufferQueueCallForEachBuffer(*(CMBufferQueueRef *)(DerivedStorage + 552), (OSStatus (__cdecl *)(CMBufferRef, void *))hoseSBAR_transferStashedSBufsIntoBuffersForSBARCallback, a1);
  if (v3)
  {
    uint64_t v4 = v3;
    goto LABEL_7;
  }
  uint64_t v3 = hoseSBAR_fillSBARToHighWater((uint64_t)a1);
  uint64_t v4 = v3;
  if (v3) {
LABEL_7:
  }
    APSLogErrorAt(v3);
  return v4;
}

uint64_t hoseSBAR_fillSBARToHighWater(uint64_t a1)
{
  uint64_t v104 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = DerivedStorage;
  CFTypeRef cf = 0;
  if (!*(unsigned char *)(DerivedStorage + 242)
    && ((*(unsigned char *)(DerivedStorage + 508) & 1) == 0
     || (*(unsigned char *)(DerivedStorage + 460) & 1) == 0
     || (*(unsigned char *)(DerivedStorage + 484) & 1) == 0)
    || CMBufferQueueIsEmpty(*(CMBufferQueueRef *)(DerivedStorage + 560)))
  {
    uint64_t v39 = 0;
    goto LABEL_189;
  }
  int v79 = 0;
  uint64_t v76 = v3;
  CFAllocatorRef allocator = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFStringRef key = (const __CFString *)*MEMORY[0x1E4F1F308];
  CFStringRef v75 = (const __CFString *)*MEMORY[0x1E4F21A20];
  uint64_t v73 = *MEMORY[0x1E4F34608];
  uint64_t v80 = a1;
LABEL_7:
  uint64_t v4 = *(void *)(v3 + 104);
  uint64_t v5 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v5) {
    uint64_t v6 = v5;
  }
  else {
    uint64_t v6 = 0;
  }
  uint64_t v7 = *(unsigned int (**)(uint64_t))(v6 + 8);
  if (!v7 || v7(v4))
  {
    uint64_t v39 = 0;
    goto LABEL_189;
  }
  if (cf)
  {
    CFRelease(cf);
    CFTypeRef cf = 0;
  }
  uint64_t v8 = CMBaseObjectGetDerivedStorage();
  memset(&v98, 0, sizeof(v98));
  CMTimeMake(&v98, 500, 1000);
  long long v78 = *MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&time2.CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  CMTimeEpoch v9 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  time2.CMTimeEpoch epoch = v9;
  CMTime time = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
  uint64_t v10 = *(void *)(v8 + 576);
  if (!v10 || !CFArrayGetCount(*(CFArrayRef *)(v10 + 32)))
  {
    CMTimeEpoch v77 = v9;
    uint64_t v11 = 0;
    CMTimeValue v12 = 0;
    uint64_t v81 = v8;
    while (1)
    {
      CMBufferRef Head = CMBufferQueueGetHead(*(CMBufferQueueRef *)(v8 + 560));
      if (!Head)
      {
LABEL_99:
        if (!v11)
        {
          uint64_t v39 = 0;
          CFTypeRef cf = 0;
          goto LABEL_103;
        }
LABEL_100:
        uint64_t v38 = APSCMSampleBufferMergerCopyMergedSBuf(*(void *)(v8 + 576), &cf);
        uint64_t v39 = v38;
        if (v38) {
          APSLogErrorAt(v38);
        }
LABEL_103:
        if (v12) {
          CFRelease(v12);
        }
        APSCMSampleBufferMergerFlush(*(void *)(v8 + 576));
        if (v39) {
          goto LABEL_198;
        }
        double v40 = (opaqueCMSampleBuffer *)cf;
        if (!cf)
        {
          uint64_t v39 = 0;
          goto LABEL_192;
        }
        uint64_t v41 = CMBaseObjectGetDerivedStorage();
        *(_OWORD *)&v101.CMTimeValue value = v78;
        v101.CMTimeEpoch epoch = v77;
        uint64_t v102 = *(void *)(MEMORY[0x1E4F1F9F8] + 12);
        int epoch_high = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 20);
        CMSampleBufferRef v100 = 0;
        long long v42 = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 16);
        *(_OWORD *)&sampleTimingArray.duration.CMTimeValue value = *MEMORY[0x1E4F1FA20];
        *(_OWORD *)&sampleTimingArray.duration.CMTimeEpoch epoch = v42;
        *(_OWORD *)&sampleTimingArray.presentationTimeStamp.CMTimeScale timescale = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 32);
        *(_OWORD *)&asbd.start.CMTimeValue value = *(_OWORD *)&sampleTimingArray.duration.value;
        *(_OWORD *)&asbd.start.CMTimeEpoch epoch = v42;
        *(_OWORD *)&asbd.duration.CMTimeScale timescale = *(_OWORD *)&sampleTimingArray.presentationTimeStamp.timescale;
        *(_OWORD *)&v98.CMTimeValue value = v78;
        v98.CMTimeEpoch epoch = v77;
        CMSampleBufferGetOutputPresentationTimeStamp(&v101, v40);
        uint64_t v43 = (_OWORD *)(v41 + 520);
        if (*(unsigned char *)(v41 + 532))
        {
          layout.start = v101;
          *(_OWORD *)&time2.CMTimeValue value = *v43;
          time2.CMTimeEpoch epoch = *(void *)(v41 + 536);
          if (CMTimeCompare(&layout.start, &time2) < 0)
          {
            uint64_t v39 = 0;
            CFDictionaryRef v48 = 0;
            goto LABEL_175;
          }
        }
        CMTime time2 = v101;
        hoseSBAR_getSynchronizerTimeForMediaTime(&layout.start, a1, (__n128 *)&time2);
        CMTimeValue value = layout.start.value;
        CMTimeScale timescale = layout.start.timescale;
        uint64_t v102 = *(void *)&layout.start.flags;
        int epoch_high = HIDWORD(layout.start.epoch);
        uint64_t v46 = CMSampleBufferCreateCopy(allocator, v40, &v100);
        if (v46)
        {
          uint64_t v39 = v46;
LABEL_183:
          APSLogErrorAt(v46);
          CFDictionaryRef v48 = 0;
          goto LABEL_174;
        }
        layout.start.CMTimeValue value = value;
        layout.start.CMTimeScale timescale = timescale;
        *(void *)&layout.start.CMTimeFlags flags = v102;
        HIDWORD(layout.start.epoch) = epoch_high;
        uint64_t v46 = CMSampleBufferSetOutputPresentationTimeStamp(v100, &layout.start);
        if (v46)
        {
          uint64_t v39 = v46;
          goto LABEL_183;
        }
        CMSampleBufferGetOutputDuration(&time2, v40);
        layout.start = v101;
        CMTimeRangeMake((CMTimeRange *)&sampleTimingArray, &layout.start, &time2);
        if ((*(unsigned char *)(v41 + 532) & 1) != 0
          && (*(_OWORD *)&layout.start.CMTimeValue value = *(_OWORD *)&sampleTimingArray.duration.value,
              *(_OWORD *)&layout.start.CMTimeEpoch epoch = *(_OWORD *)&sampleTimingArray.duration.epoch,
              *(_OWORD *)&layout.duration.CMTimeScale timescale = *(_OWORD *)&sampleTimingArray.presentationTimeStamp.timescale,
              *(_OWORD *)&time.CMTimeValue value = *v43,
              time.CMTimeEpoch epoch = *(void *)(v41 + 536),
              CMTimeRangeContainsTime(&layout, &time)))
        {
          memset(&layout, 0, 24);
          *(_OWORD *)&time.CMTimeValue value = *v43;
          time.CMTimeEpoch epoch = *(void *)(v41 + 536);
          CMTime time1 = v101;
          CMTimeSubtract(&layout.start, &time, &time1);
          CFDictionaryRef v47 = (const __CFDictionary *)CMGetAttachment(v100, key, 0);
          if (v47)
          {
            CMTimeMakeFromDictionary(&v98, v47);
            CMTime time1 = v98;
            CMTime sbuf = layout.start;
            CMTimeAdd(&time, &time1, &sbuf);
            CMSampleBufferGetOutputDuration(&time1, v100);
            if ((CMTimeCompare(&time, &time1) & 0x80000000) == 0)
            {
              CMSampleBufferGetOutputDuration(&sampleSizeArray, v100);
              CMTime formatDescriptionOut = layout.start;
              CMTimeAdd(&sbuf, &sampleSizeArray, &formatDescriptionOut);
              layout.start = sbuf;
            }
          }
          CMTime sbuf = layout.start;
          CFDictionaryRef v48 = CMTimeCopyAsDictionary(&sbuf, allocator);
          CMSetAttachment(v100, key, v48, 1u);
        }
        else
        {
          CFDictionaryRef v48 = 0;
        }
        CFTypeRef v49 = CMGetAttachment(v100, v75, 0);
        if (FigCFEqual())
        {
          CMRemoveAttachment(v100, v75);
        }
        else
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          uint64_t v50 = *(const void **)(v41 + 824);
          *(void *)(v41 + 824) = v49;
          if (v49) {
            CFRetain(v49);
          }
          if (v50) {
            CFRelease(v50);
          }
        }
        CFTypeRef v51 = CMGetAttachment(v100, @"HoseSBARSourceAudioFormatIndex", 0);
        if (v51)
        {
          long long v52 = v51;
          if (!FigCFEqual())
          {
            uint64_t v53 = CMBaseObjectGetDerivedStorage();
            layout.start.CMTimeValue value = 0;
            sbuf.CMTimeValue value = 0;
            Uuint64_t Int64 = FigCFNumberGetUInt64();
            if (UInt64)
            {
              uint64_t v55 = APSAudioFormatDescriptionCreateWithAudioFormatIndex((uint64_t)allocator, UInt64, 0, &layout);
              if (v55) {
                goto LABEL_147;
              }
              uint64_t v55 = layout.start.value;
              if (!layout.start.value) {
                goto LABEL_147;
              }
              if (*(_DWORD *)(layout.start.value + 44) >= 3u)
              {
                uint64_t v55 = APSBadgingConvertAPSourceFormatToMATSourceFormat(layout.start.value, &sbuf.value);
                if (v55) {
                  goto LABEL_147;
                }
                if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
                  && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
                {
                  LogPrintF();
                }
                uint64_t v56 = *(void *)(v53 + 104);
                CMTimeValue v57 = sbuf.value;
                uint64_t v58 = *(void *)(CMBaseObjectGetVTable() + 8);
                if (v58) {
                  uint64_t v59 = v58;
                }
                else {
                  uint64_t v59 = 0;
                }
                CFAllocatorRef v60 = *(uint64_t (**)(uint64_t, uint64_t, CMTimeValue))(v59 + 56);
                if (!v60)
                {
                  uint64_t v55 = 4294954514;
                  goto LABEL_147;
                }
                uint64_t v55 = v60(v56, v73, v57);
                if (v55) {
LABEL_147:
                }
                  APSLogErrorAt(v55);
              }
              if (layout.start.value) {
                CFRelease((CFTypeRef)layout.start.value);
              }
              if (sbuf.value) {
                CFRelease((CFTypeRef)sbuf.value);
              }
            }
            uint64_t v61 = *(const void **)(v41 + 832);
            *(void *)(v41 + 832) = v52;
            CFRetain(v52);
            if (v61) {
              CFRelease(v61);
            }
          }
        }
        CMRemoveAttachment(v100, @"HoseSBARSourceAudioFormatIndex");
        CMSampleBufferGetOutputDuration(&sbuf, v100);
        layout.start.CMTimeValue value = value;
        layout.start.CMTimeScale timescale = timescale;
        *(void *)&layout.start.CMTimeFlags flags = v102;
        HIDWORD(layout.start.epoch) = epoch_high;
        CMTimeRangeMake(&asbd, &layout.start, &sbuf);
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          CMTimebaseGetTime(&formatDescriptionOut, *(CMTimebaseRef *)(v41 + 120));
          CMTimeGetSeconds(&formatDescriptionOut);
          layout.start.CMTimeValue value = value;
          layout.start.CMTimeScale timescale = timescale;
          *(void *)&layout.start.CMTimeFlags flags = v102;
          HIDWORD(layout.start.epoch) = epoch_high;
          CMTimeGetSeconds(&layout.start);
          CMTimeRange layout = asbd;
          CMTimeRangeGetEnd(&layoutSize, &layout);
          CMTimeGetSeconds(&layoutSize);
          CMTimeRange layout = asbd;
          CMTimeRangeGetEnd(&v89, &layout);
          CMTimeRange layout = asbd;
          CMTimeRangeGetEnd(&v88, &layout);
          LogPrintF();
        }
        uint64_t v62 = *(void *)(v41 + 104);
        CMSampleBufferRef v63 = v100;
        uint64_t v64 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v64) {
          uint64_t v65 = v64;
        }
        else {
          uint64_t v65 = 0;
        }
        uint64_t v66 = *(uint64_t (**)(uint64_t, CMSampleBufferRef))(v65 + 16);
        if (!v66)
        {
          uint64_t v39 = 4294954514;
LABEL_170:
          APSLogErrorAt(v39);
          goto LABEL_174;
        }
        uint64_t v67 = v66(v62, v63);
        if (v67)
        {
          uint64_t v39 = v67;
          goto LABEL_170;
        }
        if ((*(unsigned char *)(v41 + 316) & 1) == 0)
        {
          *(void *)(v41 + 304) = value;
          *(_DWORD *)(v41 + 312) = timescale;
          *(void *)(v41 + 316) = v102;
          *(_DWORD *)(v41 + 324) = epoch_high;
        }
        CMTimeRange layout = asbd;
        CMTimeRangeGetEnd(&v87, &layout);
        *(CMTime *)(v41 + 328) = v87;
        uint64_t v68 = mach_absolute_time();
        if (v68 > *(void *)(v41 + 632))
        {
          uint64_t v69 = v68;
          memset(&v87, 0, sizeof(v87));
          CMTimebaseGetTime(&v87, *(CMTimebaseRef *)(v41 + 120));
          memset(&v86, 0, sizeof(v86));
          layout.start.CMTimeValue value = value;
          layout.start.CMTimeScale timescale = timescale;
          *(void *)&layout.start.CMTimeFlags flags = v102;
          HIDWORD(layout.start.epoch) = epoch_high;
          CMTime rhs = v87;
          CMTimeSubtract(&v86, &layout.start, &rhs);
          layout.start = v86;
          CMTimeGetSeconds(&layout.start);
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            layout.start = v87;
            CMTimeGetSeconds(&layout.start);
            layout.start.CMTimeValue value = value;
            layout.start.CMTimeScale timescale = timescale;
            *(void *)&layout.start.CMTimeFlags flags = v102;
            HIDWORD(layout.start.epoch) = epoch_high;
            CMTimeGetSeconds(&layout.start);
            CMTimeRange layout = asbd;
            CMTimeRangeGetEnd(&rhs, &layout);
            CMTimeGetSeconds(&rhs);
            LogPrintF();
          }
          uint64_t v70 = *(unsigned int *)(v41 + 640);
          *(void *)(v41 + 632) = v69 + UpTicksPerSecond() / 0x3E8uLL * v70;
        }
        uint64_t v39 = 0;
        ++*(_DWORD *)(v41 + 628);
LABEL_174:
        a1 = v80;
LABEL_175:
        uint64_t v3 = v76;
        if (v100) {
          CFRelease(v100);
        }
        if (v48) {
          CFRelease(v48);
        }
        if (v39)
        {
          uint64_t v72 = v39;
          goto LABEL_200;
        }
        ++v79;
        goto LABEL_7;
      }
      CFNumberRef v14 = (void *)Head;
      uint64_t v15 = CMBaseObjectGetDerivedStorage();
      if (CMGetAttachment(v14, @"HoseSBARCryptorID", 0)) {
        break;
      }
LABEL_44:
      if (v12) {
        CFRelease(v12);
      }
      CMBaseObjectGetDerivedStorage();
      sbuf.CMTimeValue value = 0;
      sampleSizeArray.CMTimeValue value = 0;
      LODWORD(layoutSize.value) = 0;
      formatDescriptionOut.CMTimeValue value = 0;
      if (!CMGetAttachment(v14, @"HoseSBARMagicCookieID", 0))
      {
        CMTimeValue v12 = 0;
        goto LABEL_68;
      }
      memset(&sampleTimingArray, 0, sizeof(sampleTimingArray));
      memset(&asbd, 0, 40);
      memset(&layout, 0, 32);
      FigCFNumberGetUInt64();
      uint64_t v23 = FigCFDictionaryGetValue();
      if (!v23)
      {
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
LABEL_84:
          LogPrintF();
        }
LABEL_88:
        CMTimeValue v12 = 0;
        int v35 = 0;
        goto LABEL_65;
      }
      CFDataRef v24 = (const __CFData *)v23;
      if (!CMGetAttachment(v14, @"HoseSBARAudioFormatIndex", 0))
      {
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          goto LABEL_84;
        }
        goto LABEL_88;
      }
      uint64_t v25 = (const void *)FigCFDictionaryGetValue();
      if (v25)
      {
        formatDescriptionOut.CMTimeValue value = (CMTimeValue)CFRetain(v25);
        if (formatDescriptionOut.value) {
          goto LABEL_56;
        }
      }
      else
      {
        formatDescriptionOut.CMTimeValue value = 0;
      }
      uint64_t v26 = FigCFNumberGetUInt64();
      uint64_t v27 = APAudioFormatIndexToASBD(v26, (uint64_t)&asbd);
      if (v27
        || (uint64_t v27 = APAudioFormatIndexToAudioChannelLayout(v26, (long long *)&layout.start.value, &layoutSize), v27)
        || (BytePtr = CFDataGetBytePtr(v24),
            unsigned int Length = CFDataGetLength(v24),
            uint64_t v27 = CMAudioFormatDescriptionCreate(allocator, (const AudioStreamBasicDescription *)&asbd, LODWORD(layoutSize.value), (const AudioChannelLayout *)&layout, Length, BytePtr, 0, (CMAudioFormatDescriptionRef *)&formatDescriptionOut), v27))
      {
        APSLogErrorAt(v27);
        goto LABEL_88;
      }
LABEL_56:
      DataBuffer = CMSampleBufferGetDataBuffer((CMSampleBufferRef)v14);
      sampleSizeArray.CMTimeValue value = CMBlockBufferGetDataLength(DataBuffer);
      CMSampleBufferGetPresentationTimeStamp(&sampleTimingArray.presentationTimeStamp, (CMSampleBufferRef)v14);
      CMSampleBufferGetDuration(&v101, (CMSampleBufferRef)v14);
      sampleTimingArray.duration = v101;
      CMSampleBufferGetDecodeTimeStamp(&v101, (CMSampleBufferRef)v14);
      sampleTimingArray.decodeTimeStamp = v101;
      uint64_t v31 = CMSampleBufferCreateReady(allocator, DataBuffer, (CMFormatDescriptionRef)formatDescriptionOut.value, 1, 1, &sampleTimingArray, 1, (const size_t *)&sampleSizeArray, (CMSampleBufferRef *)&sbuf);
      if (v31)
      {
        APSLogErrorAt(v31);
        if (sbuf.value) {
          CFRelease((CFTypeRef)sbuf.value);
        }
        goto LABEL_88;
      }
      CFArrayRef SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray((CMSampleBufferRef)v14, 0);
      CFArrayRef v33 = CMSampleBufferGetSampleAttachmentsArray((CMSampleBufferRef)sbuf.value, 1u);
      if (SampleAttachmentsArray)
      {
        CFArrayRef v34 = v33;
        if (CFArrayGetCount(SampleAttachmentsArray) >= 1)
        {
          CFArrayGetValueAtIndex(SampleAttachmentsArray, 0);
          CFArrayGetValueAtIndex(v34, 0);
          FigCFDictionaryAddEntriesToDictionaryWithRecursion();
        }
      }
      CMPropagateAttachments(v14, (CMAttachmentBearerRef)sbuf.value);
      CMRemoveAttachment((CMAttachmentBearerRef)sbuf.value, @"HoseSBARMagicCookieID");
      CMRemoveAttachment((CMAttachmentBearerRef)sbuf.value, @"HoseSBARAudioFormatIndex");
      FigSampleBufferGetDecryptor();
      FigSampleBufferSetDecryptor();
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      CMTimeValue v12 = (void *)sbuf.value;
      sbuf.CMTimeValue value = 0;
      int v35 = 1;
LABEL_65:
      if (formatDescriptionOut.value) {
        CFRelease((CFTypeRef)formatDescriptionOut.value);
      }
      if (!v35) {
        goto LABEL_99;
      }
LABEL_68:
      if (v12) {
        int v36 = (opaqueCMSampleBuffer *)v12;
      }
      else {
        int v36 = (opaqueCMSampleBuffer *)v14;
      }
      CMSampleBufferGetOutputDuration(&time2, v36);
      if (v11)
      {
        sampleTimingArray.duration = time;
        asbd.start = time2;
        CMTimeAdd(&time1, &sampleTimingArray.duration, &asbd.start);
        sampleTimingArray.duration = v98;
        if (CMTimeCompare(&time1, &sampleTimingArray.duration) > 0) {
          goto LABEL_100;
        }
      }
      if (!APSCMSampleBufferMergerTryMerge(*(void *)(v8 + 576), v36)) {
        goto LABEL_99;
      }
      CMBufferRef v37 = CMBufferQueueDequeueAndRetain(*(CMBufferQueueRef *)(v8 + 560));
      if (v37) {
        CFRelease(v37);
      }
      sampleTimingArray.duration = time;
      asbd.start = time2;
      CMTimeAdd(&time, &sampleTimingArray.duration, &asbd.start);
      if (++v11 == 32) {
        goto LABEL_100;
      }
    }
    uint64_t v16 = FigCFNumberGetUInt64();
    if (!FigCFDictionaryGetValue())
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      goto LABEL_99;
    }
    uint64_t v17 = *(void *)(v15 + 784);
    if (v17 == v16)
    {
      CFMutableDictionaryRef Mutable = 0;
      CFNumberRef v19 = 0;
    }
    else
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50)
      {
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()) {
          LogPrintF();
        }
        uint64_t v17 = *(void *)(v15 + 784);
      }
      if (v17)
      {
        uint64_t Int64 = (const void *)CFNumberCreateInt64();
        if (!Int64)
        {
          APSLogErrorAt(0);
          uint64_t v8 = v81;
          goto LABEL_99;
        }
        CFNumberRef v19 = Int64;
        CFBagRemoveValue(*(CFMutableBagRef *)(v15 + 768), Int64);
        if (CFBagContainsValue(*(CFBagRef *)(v15 + 768), v19))
        {
          CFMutableDictionaryRef Mutable = 0;
        }
        else
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(v15 + 776), v19);
          CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(allocator, 1, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
          if (!Mutable)
          {
            APSLogErrorAt(0);
            int v21 = -72330;
LABEL_40:
            CFRelease(v19);
            int v22 = v21;
LABEL_41:
            if (Mutable) {
              CFRelease(Mutable);
            }
            uint64_t v8 = v81;
            if (v22) {
              goto LABEL_99;
            }
            goto LABEL_44;
          }
          CFDictionarySetInt64();
          CMNotificationCenterGetDefaultLocalCenter();
          a1 = v80;
          FigDispatchAsyncPostNotification();
        }
      }
      else
      {
        CFMutableDictionaryRef Mutable = 0;
        CFNumberRef v19 = 0;
      }
      *(void *)(v15 + 784) = v16;
    }
    FigSampleBufferSetDecryptor();
    CMRemoveAttachment(v14, @"HoseSBARCryptorID");
    int v21 = 0;
    int v22 = 0;
    if (!v19) {
      goto LABEL_41;
    }
    goto LABEL_40;
  }
  APSLogErrorAt(0);
  APSCMSampleBufferMergerFlush(*(void *)(v8 + 576));
  uint64_t v39 = 4294960587;
LABEL_198:
  uint64_t v72 = v39;
LABEL_200:
  APSLogErrorAt(v72);
LABEL_189:
  if (cf)
  {
    CFRelease(cf);
    CFTypeRef cf = 0;
  }
LABEL_192:
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v39;
}

__n128 hoseSBAR_getSynchronizerTimeForMediaTime(CMTime *a1, uint64_t a2, __n128 *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v6 = (__n128 *)MEMORY[0x1E4F1F9F8];
  a1->CMTimeEpoch epoch = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  __n128 result = *v6;
  *(__n128 *)&a1->CMTimeValue value = *v6;
  if (*(unsigned char *)(DerivedStorage + 128))
  {
    __n128 result = *a3;
    *(__n128 *)&a1->CMTimeValue value = *a3;
    a1->CMTimeEpoch epoch = a3[1].n128_i64[0];
  }
  else if (*(unsigned char *)(DerivedStorage + 508))
  {
    CMTime lhs = *(CMTime *)(DerivedStorage + 496);
    CMTime v8 = *(CMTime *)a3->n128_u8;
    CMTimeAdd(a1, &lhs, &v8);
  }
  return result;
}

uint64_t hoseSBAR_transferStashedSBufsIntoBuffersForSBARCallback(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = CMBufferQueueEnqueue(*(CMBufferQueueRef *)(DerivedStorage + 560), a1);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  return v4;
}

uint64_t hoseSBAR_setMXSessionPropertyOnAudioSessionIfNecessary(uint64_t a1, uint64_t a2, int a3, uint64_t a4, uint64_t a5, int a6)
{
  CFTypeRef cf = 0;
  CFAllocatorRef v10 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t v11 = "Shadow Session";
  if (!a3) {
    uint64_t v11 = "Parent Session";
  }
  CFStringRef v12 = CFStringCreateWithFormat(v10, 0, @"%s", v11);
  if (!v12)
  {
    APSLogErrorAt(0);
    uint64_t v16 = 4294894966;
    goto LABEL_27;
  }
  if (a6)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v17 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v17)
    {
      uint64_t v18 = *(uint64_t (**)(uint64_t, uint64_t, uint64_t))(v17 + 56);
      if (v18)
      {
        uint64_t v16 = v18(a2, a4, a5);
        if (!v16) {
          goto LABEL_27;
        }
      }
      else
      {
        uint64_t v16 = 4294948071;
      }
    }
    else
    {
      uint64_t v16 = 4294948075;
    }
    uint64_t v19 = v16;
    goto LABEL_26;
  }
  uint64_t v13 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (!v13)
  {
    uint64_t v16 = 4294948075;
LABEL_25:
    uint64_t v19 = v16;
    goto LABEL_26;
  }
  CFNumberRef v14 = *(uint64_t (**)(uint64_t, uint64_t, const __CFAllocator *, CFTypeRef *))(v13 + 48);
  if (!v14)
  {
    uint64_t v16 = 4294948071;
    goto LABEL_25;
  }
  uint64_t v15 = v14(a2, a4, v10, &cf);
  if (v15)
  {
    uint64_t v16 = v15;
    goto LABEL_25;
  }
  if (!FigCFEqual())
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v21 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v21)
    {
      int v22 = *(uint64_t (**)(uint64_t, uint64_t, uint64_t))(v21 + 56);
      if (v22)
      {
        uint64_t v16 = v22(a2, a4, a5);
        if (!v16) {
          goto LABEL_27;
        }
      }
      else
      {
        uint64_t v16 = 4294948071;
      }
    }
    else
    {
      uint64_t v16 = 4294948075;
    }
    uint64_t v19 = v16;
LABEL_26:
    APSLogErrorAt(v19);
    goto LABEL_27;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v16 = 0;
LABEL_27:
  if (cf) {
    CFRelease(cf);
  }
  if (v12) {
    CFRelease(v12);
  }
  return v16;
}

void hoseSBAR_renewAudioIOAssertionDispatch(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  unsigned int v3 = *(_DWORD *)(DerivedStorage + 132);
  if (v3
    && (uint64_t v4 = *(void *)(DerivedStorage + 136),
        dispatch_time_t v5 = dispatch_time(0, 1000000000 * v3),
        uint64_t v6 = APSAudioIOAssertionTimingControllerAssertUntilTime(v4, v5),
        v6))
  {
    APSLogErrorAt(v6);
    if (!a1) {
      return;
    }
  }
  else if (!a1)
  {
    return;
  }

  CFRelease(a1);
}

void hoseSBAR_purgeTimerCancelled(CFTypeRef cf)
{
  if (cf) {
    CFRelease(cf);
  }
}

void hoseSBAR_purgeTimerFired()
{
  uint64_t v51 = *MEMORY[0x1E4F143B8];
  memset(v38, 0, sizeof(v38));
  memset(&v37, 0, sizeof(v37));
  long long v33 = *MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&v36.CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  CMTimeEpoch v0 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  v36.CMTimeEpoch epoch = v0;
  CMTimeValue v49 = *MEMORY[0x1E4F1F9F8];
  CMTimeScale v50 = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 8);
  uint64_t v1 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v1)
  {
    uint64_t v2 = (void *)v1;
    uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
    uint64_t v4 = CMBaseObjectGetDerivedStorage();
    *(_OWORD *)&time2.CMTimeValue value = v33;
    time2.CMTimeEpoch epoch = v0;
    *(_OWORD *)&v46.CMTimeValue value = v33;
    v46.CMTimeEpoch epoch = v0;
    *(_OWORD *)&v45.CMTimeValue value = v33;
    v45.CMTimeEpoch epoch = v0;
    *(_OWORD *)&v44.CMTimeValue value = v33;
    v44.CMTimeEpoch epoch = v0;
    *(_OWORD *)&v43.CMTimeValue value = v33;
    v43.CMTimeEpoch epoch = v0;
    CMTimeEpoch v41 = 0;
    uint64_t hostTime = 0;
    long long v40 = 0uLL;
    uint64_t v5 = *(void *)(v4 + 64);
    uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v6) {
      uint64_t v7 = v6;
    }
    else {
      uint64_t v7 = 0;
    }
    CMTime v8 = *(uint64_t (**)(uint64_t, long long *))(v7 + 8);
    if (v8)
    {
      uint64_t v9 = v8(v5, &v40);
      if (!v9)
      {
        *((void *)&v40 + 1) = 0;
        uint64_t v10 = *(void *)(v4 + 64);
        *(_OWORD *)&lhs.CMTimeValue value = (unint64_t)v40;
        lhs.CMTimeEpoch epoch = v41;
        uint64_t v11 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v11) {
          uint64_t v12 = v11;
        }
        else {
          uint64_t v12 = 0;
        }
        uint64_t v13 = *(uint64_t (**)(uint64_t, CMTime *, uint64_t *))(v12 + 24);
        if (v13)
        {
          CMTime time = lhs;
          uint64_t v9 = v13(v10, &time, &hostTime);
          if (!v9)
          {
            CMClockMakeHostTimeFromSystemUnits(&v46, hostTime);
            CMClockRef HostTimeClock = CMClockGetHostTimeClock();
            uint64_t v15 = *(const void **)(v4 + 120);
            CMTime time = v46;
            CMSyncConvertTime(&v45, &time, HostTimeClock, v15);
            CMClockRef v16 = CMClockGetHostTimeClock();
            TimeOfDayClock = (const void *)FigGetTimeOfDayClock();
            CMTime time = v46;
            CMSyncConvertTime(&v43, &time, v16, TimeOfDayClock);
            CMTime time = v45;
            hoseSBAR_getMediaTimeForSynchronizerTime(&v44, (uint64_t)v2, &time);
            CMTimeMakeWithSeconds(&time, (double)(int)v41 + (double)*((unint64_t *)&v40 + 1) * 5.42101086e-20, 1000);
            CMTime lhs = v43;
            CMTimeSubtract(&time2, &lhs, &time);
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              CMTime lhs = v45;
              CMTimeGetSeconds(&lhs);
              CMTime lhs = v44;
              CMTimeGetSeconds(&lhs);
              CMTime lhs = v43;
              CMTimeGetSeconds(&lhs);
              CMTime lhs = time2;
              CMTimeGetSeconds(&lhs);
              LogPrintF();
            }
LABEL_19:
            CMTimebaseGetTimeWithLogging();
            CMBufferQueueGetDuration(&v35, *(CMBufferQueueRef *)(DerivedStorage + 552));
            CMTimeGetSeconds(&v35);
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120));
              CMTime time = v38[1];
              CMTimeGetSeconds(&time);
              LogPrintF();
            }
            hoseSBAR_maybeTriggerPullAudioBBuffs(v2);
            if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) == 0.0)
            {
              APSLogErrorAt(0);
              uint64_t v26 = 0;
            }
            else
            {
              v38[0] = v38[1];
              CMTime time2 = v38[1];
              hoseSBAR_getMediaTimeForSynchronizerTime(&time, (uint64_t)v2, &time2);
              CMTimeValue value = time.value;
              CMTimeScale timescale = time.timescale;
              CMTimeFlags flags = time.flags;
              CMTimeEpoch epoch = time.epoch;
              CMTimeMake(&rhs, 1, 1);
              CMTime time = v38[0];
              CMTimeAdd(&v37, &time, &rhs);
              if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
                && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
              {
                CMTime time = v38[1];
                CMTimeGetSeconds(&time);
                CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120));
                CMTime time = v38[0];
                CMTimeGetSeconds(&time);
                CMTime time = v37;
                CMTimeGetSeconds(&time);
                LogPrintF();
              }
              if ((flags & 1) == 0) {
                goto LABEL_31;
              }
              int v22 = *(opaqueCMBufferQueue **)(DerivedStorage + 552);
              time.CMTimeValue value = value;
              time.CMTimeScale timescale = timescale;
              time.CMTimeFlags flags = flags;
              time.CMTimeEpoch epoch = epoch;
              hoseSBAR_pruneBufferQueueToTimestamp((uint64_t)v2, (uint64_t)&time, v22);
              uint64_t v23 = *(opaqueCMBufferQueue **)(DerivedStorage + 560);
              time.CMTimeValue value = value;
              time.CMTimeScale timescale = timescale;
              time.CMTimeFlags flags = flags;
              time.CMTimeEpoch epoch = epoch;
              hoseSBAR_pruneBufferQueueToTimestamp((uint64_t)v2, (uint64_t)&time, v23);
              CMBufferQueueGetEndPresentationTimeStamp(&time, *(CMBufferQueueRef *)(DerivedStorage + 560));
              CMTimeValue v49 = time.value;
              CMTimeFlags v24 = time.flags;
              CMTimeScale v50 = time.timescale;
              if ((time.flags & 1) == 0) {
                goto LABEL_31;
              }
              CMTimeEpoch v25 = time.epoch;
              time.CMTimeValue value = value;
              time.CMTimeScale timescale = timescale;
              time.CMTimeFlags flags = flags;
              time.CMTimeEpoch epoch = epoch;
              time2.CMTimeValue value = v49;
              time2.CMTimeScale timescale = v50;
              time2.CMTimeFlags flags = v24;
              time2.CMTimeEpoch epoch = v25;
              if ((CMTimeCompare(&time, &time2) & 0x80000000) == 0
                || (int64_t Count = CFDictionaryGetCount(*(CFDictionaryRef *)(DerivedStorage + 792)), Count < 1))
              {
LABEL_31:
                uint64_t v26 = 0;
                uint64_t v27 = 0;
LABEL_32:
                hoseSBAR_updateBufferingPriority(v2);
                uint64_t v28 = *(OpaqueCMTimebase **)(DerivedStorage + 120);
                uint64_t v29 = *(NSObject **)(DerivedStorage + 544);
                CMTime time = v37;
                CMTimebaseSetTimerDispatchSourceNextFireTime(v28, v29, &time, 0);
LABEL_33:
                free(v26);
                free(v27);
                CFRelease(v2);
                return;
              }
              size_t v31 = Count;
              uint64_t v26 = malloc_type_calloc(Count, 8uLL, 0x6004044C4A2DFuLL);
              if (v26)
              {
                uint64_t v27 = malloc_type_calloc(v31, 8uLL, 0x6004044C4A2DFuLL);
                if (!v27)
                {
                  APSLogErrorAt(0);
                  goto LABEL_33;
                }
                CFDictionaryGetKeysAndValues(*(CFDictionaryRef *)(DerivedStorage + 792), (const void **)v26, (const void **)v27);
                for (uint64_t i = 0; i != v31; ++i)
                {
                  CMTimeMakeFromDictionary(&v36, *((CFDictionaryRef *)v27 + i));
                  time.CMTimeValue value = value;
                  time.CMTimeScale timescale = timescale;
                  time.CMTimeFlags flags = flags;
                  time.CMTimeEpoch epoch = epoch;
                  CMTime time2 = v36;
                  if ((CMTimeCompare(&time, &time2) & 0x80000000) == 0)
                  {
                    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
                      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
                    {
                      LogPrintF();
                    }
                    CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(DerivedStorage + 800), *((const void **)v26 + i));
                    CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(DerivedStorage + 792), *((const void **)v26 + i));
                  }
                }
                goto LABEL_32;
              }
              APSLogErrorAt(0);
            }
            uint64_t v27 = 0;
            goto LABEL_33;
          }
        }
        else
        {
          uint64_t v9 = 4294954514;
        }
      }
    }
    else
    {
      uint64_t v9 = 4294954514;
    }
    APSLogErrorAt(v9);
    goto LABEL_19;
  }
}

__n128 hoseSBAR_getMediaTimeForSynchronizerTime(CMTime *a1, uint64_t a2, CMTime *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v6 = (__n128 *)MEMORY[0x1E4F1F9F8];
  a1->CMTimeEpoch epoch = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  __n128 result = *v6;
  *(__n128 *)&a1->CMTimeValue value = *v6;
  if (*(unsigned char *)(DerivedStorage + 128))
  {
    __n128 result = *(__n128 *)&a3->value;
    *(_OWORD *)&a1->CMTimeValue value = *(_OWORD *)&a3->value;
    a1->CMTimeEpoch epoch = a3->epoch;
  }
  else if (*(unsigned char *)(DerivedStorage + 508))
  {
    CMTime lhs = *a3;
    CMTime v8 = *(CMTime *)(DerivedStorage + 496);
    CMTimeSubtract(a1, &lhs, &v8);
  }
  return result;
}

void hoseSBAR_maybeTriggerPullAudioBBuffs(void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(unsigned char *)DerivedStorage) {
    return;
  }
  uint64_t v3 = DerivedStorage;
  if (!*(unsigned char *)(DerivedStorage + 353))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 30
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      return;
    }
LABEL_12:
    LogPrintF();
    return;
  }
  if (*(_DWORD *)(DerivedStorage + 356))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 30
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      return;
    }
    goto LABEL_12;
  }
  CFRetain(a1);
  uint64_t v4 = *(NSObject **)(v3 + 280);

  dispatch_async_f(v4, a1, (dispatch_function_t)hoseSBAR_pullAudioBBuffsDispatchFunction);
}

uint64_t hoseSBAR_updateBufferingPriority(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v10, 0, sizeof(v10));
  CMTimebaseGetTime(&v10, *(CMTimebaseRef *)(DerivedStorage + 120));
  CMTime v9 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA08];
  if (*(unsigned char *)(DerivedStorage + 340))
  {
    CMTime lhs = *(CMTime *)(DerivedStorage + 328);
    CMTime rhs = v10;
    CMTimeSubtract(&v9, &lhs, &rhs);
  }
  if (hoseSBAR_getBufferingPriorityThreshold_sHoseSBARBufferingPriorityThresholdOnce != -1) {
    dispatch_once(&hoseSBAR_getBufferingPriorityThreshold_sHoseSBARBufferingPriorityThresholdOnce, &__block_literal_global_354);
  }
  CMTime v6 = *(CMTime *)hoseSBAR_getBufferingPriorityThreshold_sHoseSBARBufferingPriorityThreshold;
  CMTime lhs = v9;
  if (CMTimeCompare(&lhs, &v6) < 0) {
    int v3 = 36;
  }
  else {
    int v3 = 37;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
  if (*(_DWORD *)(DerivedStorage + 268) != v3)
  {
    *(_DWORD *)(DerivedStorage + 268) = v3;
    DefaultLocalCenter = (const void *)CMNotificationCenterGetDefaultLocalCenter();
    APSCMNotificationCenterPostNotificationAsync(DefaultLocalCenter, @"BufferingPriorityChanged", a1, 0, 0, *(NSObject **)(DerivedStorage + 8), QOS_CLASS_USER_INITIATED);
  }
  return pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
}

double __hoseSBAR_getBufferingPriorityThreshold_block_invoke()
{
  int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"hoseSBARBufferingPriorityThresholdMs", 0, 10000);
  CMTimeMake(&v2, IntWithOverrideAndDefault, 1000);
  double result = *(double *)&v2.value;
  *(CMTime *)hoseSBAR_getBufferingPriorityThreshold_sHoseSBARBufferingPriorityThreshold = v2;
  return result;
}

void hoseSBAR_pullAudioBBuffsDispatchFunction(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(unsigned char *)DerivedStorage) {
    goto LABEL_54;
  }
  uint64_t v3 = DerivedStorage;
  if (!*(unsigned char *)(DerivedStorage + 353))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 30
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_54;
    }
LABEL_63:
    LogPrintF();
    goto LABEL_54;
  }
  if (*(_DWORD *)(DerivedStorage + 356))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 30
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_54;
    }
    goto LABEL_63;
  }
  if (hoseSBAR_hoseIsAboveHighWater())
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 30
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_54;
    }
    goto LABEL_63;
  }
  if (!*(void *)(CMBaseObjectGetDerivedStorage() + 384))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    goto LABEL_51;
  }
  CFTypeRef v4 = 0;
  CFAllocatorRef v5 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
LABEL_7:
  while (!hoseSBAR_hoseIsAboveHighWater())
  {
    if (v4) {
      CFRelease(v4);
    }
    uint64_t v6 = CMBaseObjectGetDerivedStorage();
    CFArrayRef theArray = 0;
    if (!*(void *)(v6 + 384))
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50
        || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_24;
      }
LABEL_22:
      LogPrintF();
      goto LABEL_24;
    }
    uint64_t v7 = v6;
    CFArrayRef v8 = *(const __CFArray **)(v6 + 360);
    if (v8)
    {
      CFIndex Count = CFArrayGetCount(v8);
      CFMutableArrayRef MutableCopy = *(CFMutableArrayRef *)(v7 + 360);
      if (Count) {
        goto LABEL_18;
      }
      if (MutableCopy)
      {
        CFRelease(MutableCopy);
        *(void *)(v7 + 360) = 0;
      }
    }
    (*(void (**)(void, const void *, CFArrayRef *, void))(*(void *)(v7 + 384) + 8))(*(void *)(v7 + 392), a1, &theArray, 0);
    if (!theArray || !CFArrayGetCount(theArray))
    {
      *(unsigned char *)(v7 + 353) = 0;
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 10
        || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_24;
      }
      goto LABEL_22;
    }
    CFMutableArrayRef MutableCopy = CFArrayCreateMutableCopy(v5, 0, theArray);
    *(void *)(v7 + 360) = MutableCopy;
    if (MutableCopy)
    {
LABEL_18:
      CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(MutableCopy, 0);
      CFTypeRef v4 = CFRetain(ValueAtIndex);
      if (v4) {
        CFArrayRemoveValueAtIndex(*(CFMutableArrayRef *)(v7 + 360), 0);
      }
      goto LABEL_25;
    }
    APSLogErrorAt(0);
LABEL_24:
    CFTypeRef v4 = 0;
LABEL_25:
    if (theArray) {
      CFRelease(theArray);
    }
    if (!v4) {
      goto LABEL_51;
    }
    uint64_t v12 = CMBaseObjectGetDerivedStorage();
    int v21 = 0;
    CMBaseObjectGetDerivedStorage();
    if (FigCFEqual())
    {
      if (*(void *)(v12 + 96)) {
        uint64_t v13 = *(void *)(v12 + 96);
      }
      else {
        uint64_t v13 = 0;
      }
      (*(void (**)(const void *, CFTypeRef, void, int *))(v13 + 8))(a1, v4, 0, &v21);
      while (1)
      {
        uint64_t v14 = *(void *)(CMBaseObjectGetDerivedStorage() + 600);
        if (!v14) {
          break;
        }
        if (*(unsigned char *)(v14 + 16) == 1)
        {
          int v15 = *(_DWORD *)(v14 + 20);
          if (((v15 - v21) & 0x800000) == 0 && ((v15 ^ v21) & 0xFFFFFF) != 0) {
            break;
          }
        }
        int v16 = *(_DWORD *)(v14 + 52);
        if (((v16 - v21) & 0x800000) == 0 && ((v16 ^ v21) & 0xFFFFFF) != 0) {
          goto LABEL_7;
        }
        hoseSBAR_discardHeadFlushOperation();
      }
    }
    uint64_t v17 = hoseSBAR_enqueueAudioBBuffToInternalBuffersInternal((uint64_t)a1, (uint64_t)v4);
    if (v17)
    {
      uint64_t v19 = v17;
      APSLogErrorAt(v17);
      goto LABEL_49;
    }
  }
  uint64_t v19 = 0;
  if (!v4) {
    goto LABEL_50;
  }
LABEL_49:
  CFRelease(v4);
LABEL_50:
  if (v19)
  {
    uint64_t started = v19;
LABEL_69:
    APSLogErrorAt(started);
    goto LABEL_54;
  }
LABEL_51:
  if (!*(unsigned char *)(v3 + 242))
  {
    uint64_t started = hoseSBAR_startTheSynchronizerIfNecessary(a1, 1);
    if (started) {
      goto LABEL_69;
    }
  }
  uint64_t started = hoseSBAR_fillSBARToHighWater((uint64_t)a1);
  if (started) {
    goto LABEL_69;
  }
LABEL_54:
  CFRelease(a1);
}

BOOL hoseSBAR_hoseIsAboveHighWater()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CMTime v12 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  CMBufferQueueGetDuration(&time1, *(CMBufferQueueRef *)(DerivedStorage + 552));
  CMTime time2 = *(CMTime *)(DerivedStorage + 192);
  if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0) {
    return 1;
  }
  if ((*(unsigned char *)(DerivedStorage + 316) & 1) == 0) {
    return 0;
  }
  CMTime v2 = (_OWORD *)(DerivedStorage + 328);
  if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) == 0.0)
  {
    *(_OWORD *)&time2.CMTimeValue value = *v2;
    time2.CMTimeEpoch epoch = *(void *)(DerivedStorage + 344);
    CMTime v9 = *(CMTime *)(DerivedStorage + 304);
    p_CMTime rhs = &v9;
  }
  else
  {
    CMTimebaseGetTime(&rhs, *(CMTimebaseRef *)(DerivedStorage + 120));
    *(_OWORD *)&time2.CMTimeValue value = *v2;
    time2.CMTimeEpoch epoch = *(void *)(DerivedStorage + 344);
    p_CMTime rhs = &rhs;
  }
  CMTimeSubtract(&v12, &time2, p_rhs);
  CMTime time2 = v12;
  CMTime v9 = *(CMTime *)(DerivedStorage + 192);
  if (CMTimeCompare(&time2, &v9) < 0) {
    return 0;
  }
  uint64_t v4 = *(void *)(DerivedStorage + 104);
  uint64_t v5 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v5) {
    uint64_t v6 = v5;
  }
  else {
    uint64_t v6 = 0;
  }
  uint64_t v7 = *(unsigned int (**)(uint64_t))(v6 + 8);
  if (!v7) {
    return 1;
  }
  return v7(v4) != 0;
}

void hoseSBAR_discardHeadFlushOperation()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v1 = *(uint64_t **)(DerivedStorage + 600);
  if (v1)
  {
    uint64_t v2 = *v1;
    uint64_t v3 = (void *)v1[1];
    if (*v1)
    {
      *(void *)(v2 + 8) = v3;
      uint64_t v3 = (void *)v1[1];
    }
    else
    {
      *(void *)(DerivedStorage + 608) = v3;
    }
    *uint64_t v3 = v2;
    free(v1);
  }
}

uint64_t hoseSBAR_enqueueAudioBBuffToInternalBuffersInternal(uint64_t a1, uint64_t a2)
{
  uint64_t v60 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CMTimeValue v57 = 0;
  memset(v56, 0, 28);
  int v55 = 0;
  uint64_t v58 = *(void *)(MEMORY[0x1E4F1F9F8] + 12);
  int epoch_high = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 20);
  CFTypeRef v54 = 0;
  CFTypeRef v53 = 0;
  *(_OWORD *)CMTimeValue value = 0u;
  *(_OWORD *)uuid = 0u;
  memset(v51, 0, sizeof(v51));
  long long v48 = 0u;
  long long v49 = 0u;
  long long v46 = 0u;
  *(_OWORD *)CFDictionaryRef v47 = 0u;
  memset(v45, 0, sizeof(v45));
  CMAttachmentBearerRef target = 0;
  uint64_t v5 = (uint64_t *)(DerivedStorage + 96);
  if (*(void *)(DerivedStorage + 96)) {
    uint64_t v6 = *(void *)(DerivedStorage + 96);
  }
  else {
    uint64_t v6 = 0;
  }
  uint64_t v7 = (*(uint64_t (**)(uint64_t, uint64_t, _OWORD *, int *))(v6 + 8))(a1, a2, v56, &v55);
  if (v7)
  {
    uint64_t v10 = v7;
    goto LABEL_111;
  }
  if (*v5) {
    uint64_t v8 = *v5;
  }
  else {
    uint64_t v8 = 0;
  }
  uint64_t v7 = (*(uint64_t (**)(uint64_t, uint64_t, OpaqueCMBlockBuffer **, _OWORD *))(v8 + 16))(a1, a2, &v57, v45);
  if (v7)
  {
    uint64_t v10 = v7;
    goto LABEL_111;
  }
  if (LOBYTE(v51[0]))
  {
    if (!CMBlockBufferGetDataLength(v57))
    {
      CFAllocatorRef v9 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
      uint64_t v7 = CMSampleBufferCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 1u, 0, 0, 0, 0, 0, 0, 0, 0, (CMSampleBufferRef *)&target);
      uint64_t v10 = v7;
      if (!v7)
      {
        uint64_t Int64 = CFNumberCreate(v9, kCFNumberSInt64Type, &uuid[1]);
        CMSetAttachment(target, (CFStringRef)*MEMORY[0x1E4F1F2F8], Int64, 1u);
        CMBufferQueueEnqueue(*(CMBufferQueueRef *)(DerivedStorage + 552), target);
        CMBufferQueueEnqueue(*(CMBufferQueueRef *)(DerivedStorage + 560), target);
LABEL_13:
        CMTime v12 = 0;
LABEL_14:
        CFStringRef v13 = 0;
        CFDictionaryRef v14 = 0;
        CFDictionaryRef v15 = 0;
        goto LABEL_81;
      }
LABEL_111:
      APSLogErrorAt(v7);
      CMTime v12 = 0;
      uint64_t Int64 = 0;
      goto LABEL_14;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_130;
    }
LABEL_114:
    LogPrintF();
LABEL_130:
    CMTime v12 = 0;
    uint64_t Int64 = 0;
    CFStringRef v13 = 0;
    CFDictionaryRef v14 = 0;
    CFDictionaryRef v15 = 0;
    uint64_t v10 = 0;
    goto LABEL_81;
  }
  unint64_t v16 = *(void *)&v45[0];
  uint64_t v17 = *(void *)&v45[1];
  if (!CMBlockBufferGetDataLength(v57))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_130;
    }
    goto LABEL_114;
  }
  *(_OWORD *)CMTime time = v56[0];
  *(_OWORD *)&time[12] = *(_OWORD *)((char *)v56 + 12);
  hoseSBAR_updateRTPRolloverStateAssumingIncreasingTransportTimes(a1, time);
  *(_OWORD *)CMTime time = v56[0];
  *(_OWORD *)&time[12] = *(_OWORD *)((char *)v56 + 12);
  hoseSBAR_getMediaTimeForTransportTime(&lhs, a1, (uint64_t)time);
  int epoch_high = HIDWORD(lhs.epoch);
  uint64_t v58 = *(void *)&lhs.flags;
  CMTime rhs = *(CMTime *)(DerivedStorage + 168);
  CMTimeSubtract((CMTime *)time, &lhs, &rhs);
  uint64_t v18 = *(void *)time;
  int v19 = *(_DWORD *)&time[8];
  uint64_t v58 = *(void *)&time[12];
  int epoch_high = *(_DWORD *)&time[20];
  if (value[0])
  {
    uint64_t Int64 = (const void *)CFNumberCreateInt64();
    if (!Int64)
    {
      uint64_t v10 = 4294894966;
      APSLogErrorAt(0);
      goto LABEL_13;
    }
    CFAllocatorRef v20 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    *(void *)CMTime time = v18;
    *(_DWORD *)&time[8] = v19;
    *(void *)&time[12] = v58;
    *(_DWORD *)&time[20] = epoch_high;
    CFDictionaryRef v21 = CMTimeCopyAsDictionary((CMTime *)time, v20);
    if (!v21) {
      goto LABEL_132;
    }
    CFDictionarySetValue(*(CFMutableDictionaryRef *)(DerivedStorage + 792), Int64, v21);
    if (value[1]) {
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(DerivedStorage + 800), Int64, value[1]);
    }
    int v22 = CFDictionaryContainsKey(*(CFDictionaryRef *)(DerivedStorage + 800), Int64);
    if (v22 && !CFDictionaryContainsKey(*(CFDictionaryRef *)(DerivedStorage + 808), Int64))
    {
      int v22 = 1;
    }
    else
    {
      CFRelease(Int64);
      uint64_t Int64 = 0;
    }
  }
  else
  {
    int v22 = 0;
    uint64_t Int64 = 0;
    CFDictionaryRef v21 = 0;
  }
  *(void *)CMTime time = v18;
  *(_DWORD *)&time[8] = v19;
  *(void *)&time[12] = v58;
  *(_DWORD *)&time[20] = epoch_high;
  CMTime lhs = *(CMTime *)((char *)v51 + 4);
  uint64_t v23 = hoseSBAR_createSbufWithAudioDataAndOPTS(a1, v57, (CMTime *)time, v16, v48, (uint64_t)Int64, (uint64_t)&lhs, &v54);
  if (v23)
  {
    uint64_t v10 = v23;
    APSLogErrorAt(v23);
    CMTime v12 = 0;
    CFStringRef v13 = 0;
    CFDictionaryRef v14 = 0;
    CFDictionaryRef v15 = 0;
    if (!Int64) {
      goto LABEL_78;
    }
    goto LABEL_77;
  }
  CMTimeFlags v24 = 0;
  if (v22 || !value[0])
  {
LABEL_36:
    CFDictionaryRef v40 = v21;
    if (*((void *)&v45[0] + 1))
    {
      CFTypeRef cf = (CFTypeRef)CFNumberCreateInt64();
      if (!cf)
      {
        uint64_t v32 = v24;
        uint64_t v10 = 4294894966;
        APSLogErrorAt(0);
        CMTime v37 = 0;
        uint64_t v28 = 0;
        CFDictionaryRef v15 = 0;
        CFDictionaryRef v14 = 0;
        CFStringRef v13 = 0;
        CMTime v12 = 0;
        if (!v32)
        {
LABEL_72:
          if (v37) {
            CFRelease(v37);
          }
          if (v28) {
            CFRelease(v28);
          }
          CFDictionaryRef v21 = v40;
          if (!Int64) {
            goto LABEL_78;
          }
          goto LABEL_77;
        }
LABEL_71:
        CFRelease(v32);
        goto LABEL_72;
      }
      CMSetAttachment(v54, @"HoseSBARSourceAudioFormatIndex", v24, 0);
      if (v17) {
        goto LABEL_39;
      }
    }
    else
    {
      CFTypeRef cf = 0;
      if (v17)
      {
LABEL_39:
        uint64_t v28 = (const void *)CFNumberCreateInt64();
        if (!v28)
        {
          uint64_t v32 = v24;
          uint64_t v10 = 4294894966;
          APSLogErrorAt(0);
          CFDictionaryRef v15 = 0;
          goto LABEL_124;
        }
        CMSetAttachment(v54, @"HoseSBARCryptorID", v28, 0);
LABEL_43:
        if ((BYTE4(v45[2]) & 1) == 0)
        {
          CFDictionaryRef v15 = 0;
LABEL_51:
          if ((BYTE12(v46) & 1) == 0)
          {
            CFDictionaryRef v14 = 0;
LABEL_59:
            uint64_t v32 = v24;
            if (v53)
            {
              FigCFEqual();
              CMTime v12 = (const void *)CFStringCreateF();
              long long v33 = (void *)v54;
              CMSetAttachment(v54, (CFStringRef)*MEMORY[0x1E4F329B0], v53, 1u);
              FigEndpointStreamAudioEngineSbufTracerDebugPrint();
            }
            else
            {
              CMTime v12 = 0;
              long long v33 = (void *)v54;
            }
            if (v47[1]) {
              CMSetAttachment(v33, (CFStringRef)*MEMORY[0x1E4F21A20], v47[1], 1u);
            }
            if (!uuid[0])
            {
              CFStringRef v13 = 0;
LABEL_69:
              CMBufferQueueEnqueue(*(CMBufferQueueRef *)(DerivedStorage + 552), v33);
              CMBufferQueueEnqueue(*(CMBufferQueueRef *)(DerivedStorage + 560), v33);
              uint64_t v10 = 0;
              goto LABEL_70;
            }
            CFArrayRef SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray((CMSampleBufferRef)v33, 1u);
            CFStringRef v35 = CFUUIDCreateString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], uuid[0]);
            if (v35)
            {
              CFStringRef v13 = v35;
              CFDictionaryRef ValueAtIndex = (__CFDictionary *)CFArrayGetValueAtIndex(SampleAttachmentsArray, 0);
              if (ValueAtIndex) {
                CFDictionarySetValue(ValueAtIndex, (const void *)*MEMORY[0x1E4F21A08], v13);
              }
              goto LABEL_69;
            }
            APSLogErrorAt(0);
            uint64_t v10 = 4294894965;
            APSSignalErrorAt(4294894965);
            CFStringRef v13 = 0;
LABEL_70:
            CMTime v37 = cf;
            if (!v32) {
              goto LABEL_72;
            }
            goto LABEL_71;
          }
          uint64_t v30 = v18;
          CFAllocatorRef v31 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
          *(_OWORD *)CMTime time = v46;
          *(CFTypeRef *)&time[16] = v47[0];
          CFDictionaryRef v14 = CMTimeCopyAsDictionary((CMTime *)time, v31);
          if (v14)
          {
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              *(_OWORD *)CMTime time = v46;
              *(CFTypeRef *)&time[16] = v47[0];
              CMTimeGetSeconds((CMTime *)time);
              *(void *)CMTime time = v30;
              *(_DWORD *)&time[8] = v19;
              *(void *)&time[12] = v58;
              *(_DWORD *)&time[20] = epoch_high;
              CMTimeGetSeconds((CMTime *)time);
              LogPrintF();
            }
            CMSetAttachment(v54, (CFStringRef)*MEMORY[0x1E4F1F300], v14, 1u);
            goto LABEL_59;
          }
          uint64_t v32 = v24;
          uint64_t v10 = 4294894966;
          APSLogErrorAt(0);
LABEL_126:
          CFStringRef v13 = 0;
          CMTime v12 = 0;
          goto LABEL_70;
        }
        CFAllocatorRef v29 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
        *(_OWORD *)CMTime time = *(_OWORD *)((char *)&v45[1] + 8);
        *(void *)&time[16] = *((void *)&v45[2] + 1);
        CFDictionaryRef v15 = CMTimeCopyAsDictionary((CMTime *)time, v29);
        if (v15)
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            *(_OWORD *)CMTime time = *(_OWORD *)((char *)&v45[1] + 8);
            *(void *)&time[16] = *((void *)&v45[2] + 1);
            CMTimeGetSeconds((CMTime *)time);
            *(void *)CMTime time = v18;
            *(_DWORD *)&time[8] = v19;
            *(void *)&time[12] = v58;
            *(_DWORD *)&time[20] = epoch_high;
            CMTimeGetSeconds((CMTime *)time);
            LogPrintF();
          }
          CMSetAttachment(v54, (CFStringRef)*MEMORY[0x1E4F1F308], v15, 1u);
          goto LABEL_51;
        }
        uint64_t v32 = v24;
        uint64_t v10 = 4294894966;
        APSLogErrorAt(0);
LABEL_124:
        CFDictionaryRef v14 = 0;
        goto LABEL_126;
      }
    }
    uint64_t v28 = 0;
    goto LABEL_43;
  }
  if (*(unsigned char *)(DerivedStorage + 816))
  {
    CMTimeFlags v24 = 0;
    goto LABEL_36;
  }
  if (Int64) {
    CFRelease(Int64);
  }
  uint64_t v25 = CFNumberCreateInt64();
  if (!v25)
  {
    uint64_t v10 = 4294894966;
    APSLogErrorAt(0);
    CFDictionaryRef v15 = 0;
    CFDictionaryRef v14 = 0;
    CFStringRef v13 = 0;
    CMTime v12 = 0;
    goto LABEL_78;
  }
  uint64_t Int64 = (const void *)v25;
  uint64_t v26 = CFNumberCreateInt64();
  if (v26)
  {
    CMTimeFlags v24 = (const void *)v26;
    CFTypeRef v27 = v54;
    CMSetAttachment(v54, @"HoseSBARMagicCookieID", Int64, 0);
    CMSetAttachment(v27, @"HoseSBARAudioFormatIndex", v24, 0);
    goto LABEL_36;
  }
LABEL_132:
  uint64_t v10 = 4294894966;
  APSLogErrorAt(0);
  CFDictionaryRef v15 = 0;
  CFDictionaryRef v14 = 0;
  CFStringRef v13 = 0;
  CMTime v12 = 0;
LABEL_77:
  CFRelease(Int64);
LABEL_78:
  if (v21) {
    CFRelease(v21);
  }
  uint64_t Int64 = 0;
LABEL_81:
  if (v57) {
    CFRelease(v57);
  }
  if (v15) {
    CFRelease(v15);
  }
  if (v14) {
    CFRelease(v14);
  }
  if (target) {
    CFRelease(target);
  }
  if (v54) {
    CFRelease(v54);
  }
  if (v13) {
    CFRelease(v13);
  }
  if (Int64) {
    CFRelease(Int64);
  }
  if (v12) {
    CFRelease(v12);
  }
  if (v47[1]) {
    CFRelease(v47[1]);
  }
  if (uuid[0]) {
    CFRelease(uuid[0]);
  }
  if (value[1]) {
    CFRelease(value[1]);
  }
  if (v53) {
    CFRelease(v53);
  }
  return v10;
}

uint64_t hoseSBAR_startTheSynchronizerIfNecessary(const void *a1, int a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  long long v24 = *MEMORY[0x1E4F1FA48];
  uint64_t v25 = *(void *)(MEMORY[0x1E4F1FA48] + 16);
  memset(&v23, 0, sizeof(v23));
  CMClockRef HostTimeClock = CMClockGetHostTimeClock();
  CMClockGetTime(&v23, HostTimeClock);
  if (!*(unsigned char *)(DerivedStorage + 242))
  {
    uint64_t v6 = hoseSBAR_enqueueIntoSBARPrimingSBufIfNecessary((uint64_t)a1);
    if (v6)
    {
      uint64_t v15 = v6;
      goto LABEL_29;
    }
  }
  if (*(void *)(DerivedStorage + 136))
  {
    uint64_t v7 = *(NSObject **)(DerivedStorage + 296);
    if (a1) {
      uint64_t v8 = (void *)CFRetain(a1);
    }
    else {
      uint64_t v8 = 0;
    }
    dispatch_async_f(v7, v8, (dispatch_function_t)hoseSBAR_renewAudioIOAssertionDispatch);
  }
  if (*(unsigned char *)(DerivedStorage + 128))
  {
    if ((*(unsigned char *)(DerivedStorage + 484) & 1) == 0) {
      return 0;
    }
    uint64_t v25 = *(void *)(DerivedStorage + 488);
    long long v24 = *(_OWORD *)(DerivedStorage + 472);
    CMTime v23 = *(CMTime *)(DerivedStorage + 448);
  }
  int v9 = *(_DWORD *)(DerivedStorage + 376);
  if (v9 == 1 || a2 && (*(unsigned char *)(DerivedStorage + 316) & 1) != 0) {
    return 0;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50) {
    goto LABEL_18;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1) {
    goto LABEL_16;
  }
  if (_LogCategory_Initialize())
  {
    int v9 = *(_DWORD *)(DerivedStorage + 376);
LABEL_16:
    hoseSBAR_synchronizerStateToName(v9);
    LogPrintF();
  }
LABEL_18:
  uint64_t v10 = *(void *)(DerivedStorage + 112);
  CMTime v22 = v23;
  uint64_t v11 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v11) {
    uint64_t v12 = v11;
  }
  else {
    uint64_t v12 = 0;
  }
  CFStringRef v13 = *(uint64_t (**)(uint64_t, long long *, CMTime *, float))(v12 + 56);
  if (!v13)
  {
    uint64_t v15 = 4294954514;
LABEL_28:
    uint64_t v6 = v15;
LABEL_29:
    APSLogErrorAt(v6);
    return v15;
  }
  long long v27 = v24;
  uint64_t v28 = v25;
  CMTime v26 = v22;
  uint64_t v14 = v13(v10, &v27, &v26, 1.0);
  if (v14)
  {
    uint64_t v15 = v14;
    goto LABEL_28;
  }
  uint64_t v15 = hoseSBAR_waitForTimebaseRate(1.0);
  if (v15)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v18 = *(void *)(DerivedStorage + 112);
    uint64_t v19 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v19) {
      uint64_t v20 = v19;
    }
    else {
      uint64_t v20 = 0;
    }
    CFDictionaryRef v21 = *(void (**)(uint64_t, long long *, double))(v20 + 24);
    if (v21)
    {
      long long v27 = *MEMORY[0x1E4F1F9F8];
      uint64_t v28 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
      v21(v18, &v27, 0.0);
    }
  }
  else
  {
    CMTimebaseSetTimerDispatchSourceToFireImmediately(*(CMTimebaseRef *)(DerivedStorage + 120), *(dispatch_source_t *)(DerivedStorage + 544));
    uint64_t v17 = MEMORY[0x1E4F1F9F8];
    *(_OWORD *)(DerivedStorage + 496) = *MEMORY[0x1E4F1F9F8];
    *(void *)(DerivedStorage + 512) = *(void *)(v17 + 16);
    hoseSBAR_updateSynchronizerState((uint64_t)a1, 1);
  }
  return v15;
}

uint64_t hoseSBAR_enqueueIntoSBARPrimingSBufIfNecessary(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v17, 0, sizeof(v17));
  CMTimeMake(&v17, -1, 1);
  CFTypeRef cf = 0;
  CMBlockBufferRef blockBufferOut = 0;
  if (*(unsigned char *)(DerivedStorage + 568)) {
    goto LABEL_27;
  }
  if (*(unsigned char *)(DerivedStorage + 128))
  {
    CMBufferRef Head = (opaqueCMSampleBuffer *)CMBufferQueueGetHead(*(CMBufferQueueRef *)(DerivedStorage + 560));
    if (Head)
    {
      CMSampleBufferGetOutputPresentationTimeStamp(&time, Head);
      *(void *)&v17.CMTimeScale timescale = *(void *)&time.timescale;
      v17.CMTimeEpoch epoch = time.epoch;
      v17.CMTimeValue value = time.value - time.timescale;
      goto LABEL_5;
    }
LABEL_27:
    uint64_t v12 = 0;
    goto LABEL_22;
  }
LABEL_5:
  uint64_t v4 = CMBlockBufferCreateWithMemoryBlock((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0x40uLL, (CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0, 0x40uLL, 1u, &blockBufferOut);
  if (v4)
  {
    uint64_t v12 = v4;
  }
  else
  {
    uint64_t v5 = *(void *)(DerivedStorage + 592);
    if (v5) {
      unint64_t v6 = *(void *)(v5 + 96);
    }
    else {
      unint64_t v6 = 0;
    }
    CMTime time = v17;
    uint64_t v4 = hoseSBAR_createSbufWithAudioDataAndOPTS(a1, blockBufferOut, &time, v6, 0, 0, MEMORY[0x1E4F1F9F8], &cf);
    if (v4)
    {
      uint64_t v12 = v4;
    }
    else
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        CMTime time = v17;
        CMTimeGetSeconds(&time);
        LogPrintF();
      }
      uint64_t v7 = *(void *)(DerivedStorage + 104);
      CFTypeRef v8 = cf;
      uint64_t v9 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v9) {
        uint64_t v10 = v9;
      }
      else {
        uint64_t v10 = 0;
      }
      uint64_t v11 = *(uint64_t (**)(uint64_t, CFTypeRef))(v10 + 16);
      if (v11)
      {
        uint64_t v12 = v11(v7, v8);
        if (!v12)
        {
          *(unsigned char *)(DerivedStorage + 568) = 1;
          goto LABEL_22;
        }
      }
      else
      {
        uint64_t v12 = 4294954514;
      }
      uint64_t v4 = v12;
    }
  }
  APSLogErrorAt(v4);
LABEL_22:
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  if (cf) {
    CFRelease(cf);
  }
  return v12;
}

const char *hoseSBAR_synchronizerStateToName(int a1)
{
  if (!a1) {
    return "Stopped";
  }
  if (a1 == 1) {
    return "Started";
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return "Unknown?";
}

uint64_t hoseSBAR_waitForTimebaseRate(double a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120));
    LogPrintF();
  }
  if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) == a1)
  {
    uint64_t v10 = 0;
    goto LABEL_28;
  }
  uint64_t v3 = *(const void **)(DerivedStorage + 120);
  if (!v3)
  {
    uint64_t v5 = 4294894965;
    goto LABEL_36;
  }
  double v4 = fabs(a1);
  if (v4 >= INFINITY && v4 <= INFINITY)
  {
    uint64_t v5 = 4294894965;
LABEL_36:
    APSLogErrorAt(0);
LABEL_41:
    APSLogErrorAt(v5);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return v5;
  }
  if (gAPSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerInitOnce != -1) {
    dispatch_once_f(&gAPSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerInitOnce, 0, (dispatch_function_t)_APSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerGetTypeID);
  }
  uint64_t Instance = (double *)_CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    uint64_t v5 = 4294960568;
    goto LABEL_41;
  }
  uint64_t v7 = Instance;
  Instance[2] = 0.0;
  Instance[3] = 0.0;
  Instance[4] = 0.0;
  *((void *)Instance + 3) = CFRetain(v3);
  void v7[2] = a1;
  dispatch_semaphore_t v8 = dispatch_semaphore_create(0);
  *((void *)v7 + 4) = v8;
  if (!v8)
  {
    APSLogErrorAt(0);
    uint64_t v5 = 4294894966;
LABEL_40:
    CFRelease(v7);
    goto LABEL_41;
  }
  CMNotificationCenterGetDefaultLocalCenter();
  uint64_t v9 = FigNotificationCenterAddWeakListener();
  if (v9)
  {
    uint64_t v5 = v9;
    APSLogErrorAt(v9);
    goto LABEL_40;
  }
  uint64_t v10 = CFRetain(v7);
  CFRelease(v7);
  if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) != a1)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v11 = v10[4];
    dispatch_time_t v12 = dispatch_time(0, 2500000000);
    if (dispatch_semaphore_wait(v11, v12))
    {
      if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) != a1)
      {
        APSLogErrorAt(0);
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120));
          LogPrintF();
        }
        uint64_t v5 = 4294960574;
        goto LABEL_33;
      }
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50)
      {
        uint64_t v5 = 0;
LABEL_33:
        CFRelease(v10);
        return v5;
      }
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()) {
        LogPrintF();
      }
    }
  }
LABEL_28:
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120));
    LogPrintF();
  }
  uint64_t v5 = 0;
  if (v10) {
    goto LABEL_33;
  }
  return v5;
}

uint64_t hoseSBAR_updateSynchronizerState(uint64_t a1, int a2)
{
  uint64_t result = CMBaseObjectGetDerivedStorage();
  uint64_t v4 = result;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      hoseSBAR_synchronizerStateToName(*(_DWORD *)(v4 + 376));
      hoseSBAR_synchronizerStateToName(a2);
      CMTimebaseGetRate(*(CMTimebaseRef *)(v4 + 120));
      uint64_t result = LogPrintF();
    }
  }
  *(_DWORD *)(v4 + 376) = a2;
  return result;
}

uint64_t hoseSBARTimebaseRateChangeListener_timebaseRateChangedNotification(uint64_t a1, uint64_t a2)
{
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTimebaseGetRate(*(CMTimebaseRef *)(a2 + 24));
    LogPrintF();
  }
  if (CMTimebaseGetRate(*(CMTimebaseRef *)(a2 + 24)) == *(double *)(a2 + 16))
  {
    dispatch_semaphore_signal(*(dispatch_semaphore_t *)(a2 + 32));
    CMNotificationCenterGetDefaultLocalCenter();
    return FigNotificationCenterRemoveWeakListener();
  }
  else
  {
    return APSLogErrorAt(0);
  }
}

uint64_t _APSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerTypeID = result;
  return result;
}

void _APSEndpointStreamAudioHoseSBARTimebaseRateChangeListenerFinalize(uint64_t a1)
{
  if (*(void *)(a1 + 24))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    uint64_t v2 = *(const void **)(a1 + 24);
    if (v2) {
      CFRelease(v2);
    }
  }
  uint64_t v3 = *(NSObject **)(a1 + 32);
  if (v3)
  {
    dispatch_release(v3);
  }
}

uint64_t hoseSBAR_createSbufWithAudioDataAndOPTS(uint64_t a1, OpaqueCMBlockBuffer *a2, CMTime *a3, unint64_t a4, UInt32 a5, uint64_t a6, uint64_t a7, void *a8)
{
  uint64_t v86 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef v76 = 0;
  CMSampleBufferRef sampleBufferOut = 0;
  packetDescriptions.mStartOffset = 0;
  *(void *)&packetDescriptions.mVariableFramesInPacket = 0;
  long long v14 = *(_OWORD *)(MEMORY[0x1E4F1FA70] + 48);
  *(_OWORD *)&sampleTimingArray.presentationTimeStamp.CMTimeScale timescale = *(_OWORD *)(MEMORY[0x1E4F1FA70] + 32);
  *(_OWORD *)&sampleTimingArray.decodeTimeStamp.CMTimeValue value = v14;
  sampleTimingArray.decodeTimeStamp.CMTimeEpoch epoch = *(void *)(MEMORY[0x1E4F1FA70] + 64);
  long long v15 = *(_OWORD *)(MEMORY[0x1E4F1FA70] + 16);
  *(_OWORD *)&sampleTimingArray.duration.CMTimeValue value = *MEMORY[0x1E4F1FA70];
  *(_OWORD *)&sampleTimingArray.duration.CMTimeEpoch epoch = v15;
  uint64_t v16 = CMBaseObjectGetDerivedStorage();
  memset(&asbd, 0, sizeof(asbd));
  memset(&layout, 0, sizeof(layout));
  CMAudioFormatDescriptionRef desc = 0;
  size_t layoutSize = 0;
  memset(&time, 0, sizeof(time));
  values[0] = 0;
  v83.CMTimeValue value = 0;
  formatDescriptionOut.CMTimeValue value = 0;
  uint64_t v17 = APAudioFormatIndexToASBD(a4, (uint64_t)&asbd);
  uint64_t v18 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
  uint64_t v19 = &unk_1EA641000;
  if (v17)
  {
    uint64_t v26 = v17;
    APSLogErrorAt(v17);
    uint64_t v25 = 0;
    int v27 = 0;
    goto LABEL_157;
  }
  UInt32 mFramesPerPacket = asbd.mFramesPerPacket;
  if (a5) {
    UInt32 mFramesPerPacket = a5;
  }
  asbd.UInt32 mFramesPerPacket = mFramesPerPacket;
  CMBlockBufferRef theBuffer = a2;
  uint64_t v72 = a3;
  if (!*(void *)(v16 + 584)) {
    goto LABEL_15;
  }
  uint64_t v21 = *(void *)(v16 + 592);
  if (!v21)
  {
    if (!a4)
    {
      APSLogErrorAt(0);
      int v22 = 0;
      UInt32 mFramesPerPacket = asbd.mFramesPerPacket;
      goto LABEL_8;
    }
LABEL_15:
    BOOL v23 = 0;
    BOOL v24 = a6 == 0;
    goto LABEL_16;
  }
  if (*(void *)(v21 + 96) != a4) {
    goto LABEL_15;
  }
  int v22 = *(_DWORD *)(v21 + 36);
LABEL_8:
  BOOL v23 = v22 == mFramesPerPacket;
  BOOL v24 = a6 == 0;
  if (!a6 && v22 == mFramesPerPacket)
  {
    uint64_t v25 = (const opaqueCMFormatDescription *)CFRetain(*(CFTypeRef *)(v16 + 584));
    uint64_t v26 = 0;
LABEL_11:
    int v27 = 0;
    a2 = theBuffer;
    a3 = v72;
    goto LABEL_157;
  }
LABEL_16:
  AudioFormatID mFormatID = asbd.mFormatID;
  UInt32 mChannelsPerFrame = asbd.mChannelsPerFrame;
  BOOL v67 = v24;
  if (a4 > 0x3F || ((1 << a4) & 0xC03E000E00000000) == 0)
  {
    BOOL v30 = *(unsigned char *)(v16 + 241) != 0;
    goto LABEL_28;
  }
  if (*(unsigned char *)(v16 + 241))
  {
    BOOL v30 = 1;
LABEL_28:
    *(unsigned char *)(v16 + 816) = 0;
    uint64_t v31 = a4;
    if (a4 <= 0x3F)
    {
      uint64_t v31 = a4;
      if (((1 << a4) & 0xC03E000E00000000) != 0)
      {
        uint64_t v31 = a4;
        if (v30) {
          goto LABEL_116;
        }
      }
    }
    goto LABEL_115;
  }
  if (hoseSBAR_allowAtmosPlayback_initOnce != -1) {
    dispatch_once(&hoseSBAR_allowAtmosPlayback_initOnce, &__block_literal_global_758);
  }
  if (hoseSBAR_allowAtmosPlayback_isAtmosAllowed)
  {
    BOOL v30 = 0;
    goto LABEL_28;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  AudioFormatID v32 = 1902207795;
  if ((int)asbd.mFormatID <= 1902207794)
  {
    if ((int)asbd.mFormatID <= 1685220712)
    {
      if ((int)asbd.mFormatID <= 1667524656)
      {
        if ((int)asbd.mFormatID <= 1667326823)
        {
          if (asbd.mFormatID == 1633771875 || asbd.mFormatID == 1667312947) {
            goto LABEL_114;
          }
          unsigned __int16 v34 = 24931;
        }
        else if ((int)asbd.mFormatID > 1667330146)
        {
          if (asbd.mFormatID == 1667330147) {
            goto LABEL_114;
          }
          unsigned __int16 v34 = 30307;
        }
        else
        {
          if (asbd.mFormatID == 1667326824) {
            goto LABEL_114;
          }
          unsigned __int16 v34 = 25456;
        }
        int v36 = v34 | 0x63610000;
        goto LABEL_113;
      }
      if ((int)asbd.mFormatID <= 1667656802)
      {
        if (asbd.mFormatID == 1667524657 || asbd.mFormatID == 1667574579) {
          goto LABEL_114;
        }
        int v36 = 1667575091;
      }
      else
      {
        if ((int)asbd.mFormatID <= 1668047202)
        {
          if (asbd.mFormatID != 1667656803)
          {
            int v36 = 1667790435;
            goto LABEL_113;
          }
          goto LABEL_114;
        }
        if (asbd.mFormatID == 1668047203) {
          goto LABEL_114;
        }
        int v36 = 1668641633;
      }
      goto LABEL_113;
    }
    if ((int)asbd.mFormatID <= 1885430578)
    {
      if ((int)asbd.mFormatID <= 1701733237)
      {
        if (asbd.mFormatID == 1685220713 || asbd.mFormatID == 1700886115) {
          goto LABEL_114;
        }
        int v36 = 1701733217;
        goto LABEL_113;
      }
      if ((int)asbd.mFormatID > 1882599479)
      {
        if (asbd.mFormatID != 1882599480)
        {
          int v36 = 1885430115;
          goto LABEL_113;
        }
      }
      else if (asbd.mFormatID != 1701733238)
      {
        int v36 = 1869117027;
        goto LABEL_113;
      }
      goto LABEL_114;
    }
    if ((int)asbd.mFormatID <= 1885547314)
    {
      if (asbd.mFormatID - 1885430579 <= 0x3D && ((1 << (LOBYTE(asbd.mFormatID) - 51)) & 0x2020000000000001) != 0) {
        goto LABEL_114;
      }
      goto LABEL_172;
    }
    if ((int)asbd.mFormatID <= 1886745440)
    {
      if (asbd.mFormatID != 1885547315)
      {
        int v36 = 1885692723;
        goto LABEL_113;
      }
      goto LABEL_114;
    }
    if (asbd.mFormatID == 1886745441) {
      goto LABEL_114;
    }
    unsigned __int16 v35 = 24931;
LABEL_110:
    int v36 = v35 | 0x71610000;
    goto LABEL_113;
  }
  if ((int)asbd.mFormatID <= 1902667125)
  {
    if ((int)asbd.mFormatID > 1902324530)
    {
      if ((int)asbd.mFormatID <= 1902405732)
      {
        if (asbd.mFormatID == 1902324531 || asbd.mFormatID == 1902403958) {
          goto LABEL_114;
        }
        unsigned __int16 v37 = 26673;
      }
      else
      {
        if ((int)asbd.mFormatID > 1902469938)
        {
          if (asbd.mFormatID == 1902469939) {
            goto LABEL_114;
          }
          int v36 = 1902537827;
          goto LABEL_113;
        }
        if (asbd.mFormatID == 1902405733) {
          goto LABEL_114;
        }
        unsigned __int16 v37 = 28024;
      }
      int v36 = v37 | 0x71640000;
      goto LABEL_113;
    }
    if (asbd.mFormatID - 1902207795 <= 0x3D && ((1 << (LOBYTE(asbd.mFormatID) - 51)) & 0x2020000000000001) != 0
      || asbd.mFormatID - 1902212657 <= 0x34 && ((1 << (LOBYTE(asbd.mFormatID) - 49)) & 0x14000000000001) != 0)
    {
      goto LABEL_114;
    }
    unsigned __int16 v35 = 28771;
    goto LABEL_110;
  }
  if ((int)asbd.mFormatID > 2053202738)
  {
    if ((int)asbd.mFormatID <= 2053319474)
    {
      if (asbd.mFormatID - 2053202739 <= 0x3D && ((1 << (LOBYTE(asbd.mFormatID) - 51)) & 0x2020000000000001) != 0) {
        goto LABEL_114;
      }
      unsigned __int16 v33 = 30307;
      goto LABEL_103;
    }
    if ((int)asbd.mFormatID <= 2053923170)
    {
      if (asbd.mFormatID != 2053319475)
      {
        int v36 = 2053464883;
        goto LABEL_113;
      }
      goto LABEL_114;
    }
    if (asbd.mFormatID == 2053923171) {
      goto LABEL_114;
    }
    int v36 = 2054517601;
LABEL_113:
    if (asbd.mFormatID == v36) {
      goto LABEL_114;
    }
LABEL_172:
    AudioFormatID v32 = 1700998451;
    goto LABEL_114;
  }
  if ((int)asbd.mFormatID <= 1902998903)
  {
    if (asbd.mFormatID == 1902667126 || asbd.mFormatID == 1902671459) {
      goto LABEL_114;
    }
    int v36 = 1902928227;
    goto LABEL_113;
  }
  if ((int)asbd.mFormatID > 1903587384)
  {
    if (asbd.mFormatID != 1903587385)
    {
      unsigned __int16 v33 = 24931;
LABEL_103:
      int v36 = v33 | 0x7A610000;
      goto LABEL_113;
    }
  }
  else if (asbd.mFormatID != 1902998904)
  {
    int v36 = 1903522657;
    goto LABEL_113;
  }
LABEL_114:
  asbd.AudioFormatID mFormatID = v32;
  asbd.UInt32 mChannelsPerFrame = 6;
  *(unsigned char *)(v16 + 816) = 1;
  uint64_t v31 = 50;
LABEL_115:
  uint64_t v38 = APAudioFormatIndexToAudioChannelLayout(v31, (long long *)&layout, (_DWORD *)&layoutSize + 1);
  if (v38)
  {
    uint64_t v26 = v38;
    APSLogErrorAt(v38);
    uint64_t v25 = 0;
    goto LABEL_11;
  }
LABEL_116:
  uint64_t v68 = a1;
  if (FigCFDictionaryGetValueIfPresent() && !*(unsigned char *)(v16 + 816))
  {
    BOOL v39 = v23;
    AudioFormatID v40 = mFormatID;
    v83.CMTimeValue value = (CMTimeValue)CFDataGetBytePtr((CFDataRef)values[0]);
    LODWORD(layoutSize) = CFDataGetLength((CFDataRef)values[0]);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      FigCFNumberGetUInt64();
      LogPrintF();
    }
  }
  else
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    BOOL v39 = v23;
    AudioFormatID v40 = mFormatID;
    if ((asbd.mFormatID & 0xEFFFFFFF) == 0x616C6163)
    {
      LODWORD(time.value) = bswap32(asbd.mFramesPerPacket);
      BYTE4(time.value) = 0;
      BYTE5(time.value) = APAudioFormatIndexGetBitsPerChannel(a4);
      HIWORD(time.value) = 2600;
      LOBYTE(time.timescale) = 14;
      BYTE1(time.timescale) = asbd.mChannelsPerFrame;
      HIWORD(time.timescale) = -256;
      *(void *)&time.CMTimeFlags flags = 0;
      HIDWORD(time.epoch) = bswap32(asbd.mSampleRate);
      v83.CMTimeValue value = (CMTimeValue)&time;
      LODWORD(layoutSize) = 24;
      goto LABEL_136;
    }
    if ((int)asbd.mFormatID > 1667330146)
    {
      if (asbd.mFormatID == 1667330147)
      {
LABEL_133:
        APAudioFormatGetMagicCookieForAPAC(a4, &v83, (int *)&layoutSize, asbd.mSampleRate);
        goto LABEL_136;
      }
      int v41 = 1902211171;
LABEL_132:
      if (asbd.mFormatID != v41) {
        goto LABEL_136;
      }
      goto LABEL_133;
    }
    if (asbd.mFormatID != 1633772320)
    {
      int v41 = 1634754915;
      goto LABEL_132;
    }
    APAudioFormatGetMagicCookieForAACLC(asbd.mChannelsPerFrame, &v83, (int *)&layoutSize, asbd.mSampleRate);
  }
LABEL_136:
  CFAllocatorRef v42 = *v18;
  size_t v43 = layoutSize;
  CMTimeValue value = (const void *)v83.value;
  uint64_t v45 = CMAudioFormatDescriptionCreate(v42, &asbd, HIDWORD(layoutSize), &layout, layoutSize, (const void *)v83.value, 0, (CMAudioFormatDescriptionRef *)&formatDescriptionOut);
  if (v45)
  {
    uint64_t v26 = v45;
    APSLogErrorAt(v45);
    uint64_t v25 = 0;
    int v27 = 0;
    a2 = theBuffer;
    a3 = v72;
LABEL_199:
    uint64_t v19 = (_DWORD *)&unk_1EA641000;
    a1 = v68;
    uint64_t v18 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
    goto LABEL_157;
  }
  long long v46 = *(const void **)(v16 + 584);
  CFDictionaryRef v47 = (const void *)formatDescriptionOut.value;
  *(void *)(v16 + 584) = formatDescriptionOut.value;
  if (v47) {
    CFRetain(v47);
  }
  if (v46) {
    CFRelease(v46);
  }
  if (!v67) {
    FigCFDictionarySetValue();
  }
  long long v48 = *(const void **)(v16 + 592);
  if (v48) {
    CFRelease(v48);
  }
  asbd.AudioFormatID mFormatID = v40;
  asbd.UInt32 mChannelsPerFrame = mChannelsPerFrame;
  uint64_t v49 = APAudioFormatIndexToAudioChannelLayout(a4, (long long *)&layout, (_DWORD *)&layoutSize + 1);
  a3 = v72;
  if (v49)
  {
    uint64_t v26 = v49;
LABEL_198:
    APSLogErrorAt(v49);
    uint64_t v25 = 0;
    int v27 = 0;
    a2 = theBuffer;
    goto LABEL_199;
  }
  uint64_t v49 = CMAudioFormatDescriptionCreate(v42, &asbd, HIDWORD(layoutSize), &layout, v43, value, 0, &desc);
  if (v49)
  {
    uint64_t v26 = v49;
    goto LABEL_198;
  }
  uint64_t v50 = APSAudioFormatDescriptionCreateWithCMFormatDescription(v42, desc, (void *)(v16 + 592));
  uint64_t v18 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
  if (v50)
  {
    uint64_t v26 = v50;
    APSLogErrorAt(v50);
    uint64_t v25 = 0;
    int v27 = 0;
    a2 = theBuffer;
    uint64_t v19 = (_DWORD *)&unk_1EA641000;
    a1 = v68;
  }
  else
  {
    uint64_t v25 = (const opaqueCMFormatDescription *)formatDescriptionOut.value;
    formatDescriptionOut.CMTimeValue value = 0;
    if (v39)
    {
      int v27 = 0;
      uint64_t v26 = 0;
      a2 = theBuffer;
      uint64_t v19 = (_DWORD *)&unk_1EA641000;
      a1 = v68;
      goto LABEL_159;
    }
    CFTypeRef cf = 0;
    APSAudioFormatDescriptionCopyDebugString(*(void *)(v16 + 592), (CFStringRef *)&cf);
    uint64_t v19 = &unk_1EA641000;
    a1 = v68;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    a2 = theBuffer;
    if (cf) {
      CFRelease(cf);
    }
    uint64_t v26 = 0;
    int v27 = 1;
  }
LABEL_157:
  if (formatDescriptionOut.value) {
    CFRelease((CFTypeRef)formatDescriptionOut.value);
  }
LABEL_159:
  if (desc) {
    CFRelease(desc);
  }
  if (v26)
  {
    uint64_t v64 = v26;
    goto LABEL_202;
  }
  if (!v27)
  {
    CFAllocatorRef v53 = *v18;
    goto LABEL_179;
  }
  if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) == 0.0)
  {
    uint64_t v56 = CMBaseObjectGetDerivedStorage();
    CFAllocatorRef v53 = *v18;
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(v53, 1, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      uint64_t v58 = Mutable;
      CFDictionarySetValue(Mutable, @"AudioFormat", *(const void **)(v56 + 592));
      CMNotificationCenterGetDefaultLocalCenter();
      FigDispatchAsyncPostNotification();
      hoseSBAR_setPreferencesOnAudioSession(a1, 0);
      CFDictionaryRef v59 = v58;
LABEL_178:
      CFRelease(v59);
      goto LABEL_179;
    }
    APSLogErrorAt(0);
  }
  else
  {
    CMTime formatDescriptionOut = *a3;
    uint64_t v51 = CMBaseObjectGetDerivedStorage();
    long long v52 = *(void **)(v51 + 592);
    CFAllocatorRef v53 = *v18;
    *(_OWORD *)&asbd.mSampleRate = *(_OWORD *)&formatDescriptionOut.value;
    *(void *)&asbd.mBytesPerPacket = formatDescriptionOut.epoch;
    CFDictionaryRef v54 = CMTimeCopyAsDictionary((CMTime *)&asbd, v53);
    CMTimeMake((CMTime *)&asbd, 1, 1);
    *(_OWORD *)&layout.int mChannelLayoutTag = *(_OWORD *)&formatDescriptionOut.value;
    *(void *)&layout.mChannelDescriptions[0].mChannelFlags = formatDescriptionOut.epoch;
    CMTimeSubtract(&formatDescriptionOut, (CMTime *)&layout, (CMTime *)&asbd);
    int v55 = v19[608];
    if (v55 <= 50 && (v55 != -1 || _LogCategory_Initialize()))
    {
      CMTimebaseGetTime((CMTime *)&layout, *(CMTimebaseRef *)(v51 + 120));
      CMTimeGetSeconds((CMTime *)&layout);
      CMTime time = formatDescriptionOut;
      CMTimeGetSeconds(&time);
      LogPrintF();
    }
    *(_OWORD *)&time.CMTimeValue value = xmmword_1E6898188;
    time.CMTimeEpoch epoch = (CMTimeEpoch)@"PTS";
    values[0] = *(void **)MEMORY[0x1E4F1CFC8];
    values[1] = v52;
    values[2] = v54;
    CFDictionaryRef v60 = CFDictionaryCreate(v53, (const void **)&time, (const void **)values, 3, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (v60)
    {
      CFDictionaryRef v61 = v60;
      uint64_t v62 = *(void *)(v51 + 840);
      CMTime v83 = formatDescriptionOut;
      uint64_t v63 = APSTimedInfoManagerAddTimedInfo(v62, (long long *)&v83.value, v61);
      if (v63) {
        APSLogErrorAt(v63);
      }
      CFRelease(v61);
      if (v54) {
        goto LABEL_177;
      }
    }
    else
    {
      APSLogErrorAt(0);
      if (v54)
      {
LABEL_177:
        CFDictionaryRef v59 = v54;
        goto LABEL_178;
      }
    }
  }
LABEL_179:
  packetDescriptions.mStartOffset = 0;
  packetDescriptions.mVariableFramesInPacket = 352;
  packetDescriptions.mDataByteSize = CMBlockBufferGetDataLength(a2);
  *(_OWORD *)&asbd.mSampleRate = *(_OWORD *)&a3->value;
  *(void *)&asbd.mBytesPerPacket = a3->epoch;
  uint64_t v64 = CMAudioSampleBufferCreateReadyWithPacketDescriptions(v53, a2, v25, 1, (CMTime *)&asbd, &packetDescriptions, &sampleBufferOut);
  if (v64)
  {
    uint64_t v26 = v64;
  }
  else
  {
    uint64_t v64 = APSAPACApplyIndependentDecodableDependancy(sampleBufferOut);
    if (v64)
    {
      uint64_t v26 = v64;
    }
    else
    {
      if ((*(unsigned char *)(a7 + 12) & 1) == 0)
      {
        uint64_t v26 = 0;
        *a8 = sampleBufferOut;
        CMSampleBufferRef sampleBufferOut = 0;
        if (!v25) {
          goto LABEL_184;
        }
        goto LABEL_183;
      }
      CMSampleBufferGetPresentationTimeStamp(&sampleTimingArray.presentationTimeStamp, sampleBufferOut);
      *(_OWORD *)&sampleTimingArray.duration.CMTimeValue value = *(_OWORD *)a7;
      sampleTimingArray.duration.CMTimeEpoch epoch = *(void *)(a7 + 16);
      uint64_t v64 = CMSampleBufferCreateCopyWithNewTiming(v53, sampleBufferOut, 1, &sampleTimingArray, (CMSampleBufferRef *)&v76);
      uint64_t v26 = v64;
      if (!v64)
      {
        *a8 = v76;
        CFTypeRef v76 = 0;
        if (!v25) {
          goto LABEL_184;
        }
LABEL_183:
        CFRelease(v25);
        goto LABEL_184;
      }
    }
  }
LABEL_202:
  APSLogErrorAt(v64);
  if (v25) {
    goto LABEL_183;
  }
LABEL_184:
  if (sampleBufferOut) {
    CFRelease(sampleBufferOut);
  }
  if (v76) {
    CFRelease(v76);
  }
  return v26;
}

uint64_t hoseSBAR_setPreferencesOnAudioSession(uint64_t a1, int a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v5 = *(void *)(DerivedStorage + 592);
  if (v5 || (v9 = DerivedStorage, APSLogErrorAt(0), (uint64_t v5 = *(void *)(v9 + 592)) != 0))
  {
    double v6 = *(double *)(v5 + 16);
LABEL_3:
    int v7 = *(_DWORD *)(v5 + 44);
    goto LABEL_4;
  }
  APSLogErrorAt(0);
  uint64_t v5 = *(void *)(v9 + 592);
  if (v5)
  {
    double v6 = 0.0;
    goto LABEL_3;
  }
  APSLogErrorAt(0);
  int v7 = 0;
  double v6 = 0.0;
LABEL_4:

  return hoseSBAR_setPreferencesOnAudioSessionSetValues(a1, a2, v7, v6);
}

uint64_t __hoseSBAR_allowAtmosPlayback_block_invoke()
{
  uint64_t result = MGGetProductType();
  if (result == 1540760353 || result == 4240173202 || result == 2702125347) {
    hoseSBAR_allowAtmosPlayback_isAtmosAllowed = 1;
  }
  return result;
}

uint64_t hoseSBAR_updateRTPRolloverStateAssumingIncreasingTransportTimes(uint64_t a1, _OWORD *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  double v6 = *(_DWORD **)(DerivedStorage + 96);
  uint64_t result = DerivedStorage + 96;
  char v9 = 0;
  if (*v6 == 1)
  {
    *(_OWORD *)dispatch_semaphore_t v8 = *a2;
    *(_OWORD *)&v8[12] = *(_OWORD *)((char *)a2 + 12);
    unsigned int RTPTimeForTransportTime = hoseSBAR_getRTPTimeForTransportTime(a1, (uint64_t)v8, &v9);
    if (v9) {
      return hoseSBAR_updateRTPRolloverStateAssumingIncreasingRTPTimes(a1, RTPTimeForTransportTime);
    }
    else {
      return APSLogErrorAt(0);
    }
  }
  return result;
}

CMTime *hoseSBAR_getMediaTimeForTransportTime(CMTime *result, uint64_t a2, uint64_t a3)
{
  uint64_t v3 = MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&result->CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  result->CMTimeEpoch epoch = *(void *)(v3 + 16);
  uint64_t v4 = (unsigned int *)(a3 + 4);
  if (*(_DWORD *)a3 == 1) {
    return hoseSBAR_getMediaTimeForRTPTime(result, a2, *v4);
  }
  if (*(_DWORD *)a3 == 2 && (*(_DWORD *)(a3 + 16) & 0x1D) == 1 && *(void *)(a3 + 20) == 0)
  {
    *(_OWORD *)&result->CMTimeValue value = *(_OWORD *)v4;
    result->CMTimeEpoch epoch = *(void *)(a3 + 20);
  }
  return result;
}

CMTime *hoseSBAR_getMediaTimeForRTPTime(CMTime *a1, uint64_t a2, unsigned int a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  int32_t v6 = *(_DWORD *)(DerivedStorage + 88);
  int v7 = (_OWORD *)MEMORY[0x1E4F1F9F8];
  a1->CMTimeEpoch epoch = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  *(_OWORD *)&a1->CMTimeValue value = *v7;
  if (**(_DWORD **)(DerivedStorage + 96) != 1)
  {
    uint64_t result = (CMTime *)APSLogErrorAt(0);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90) {
      return result;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR == -1)
    {
      uint64_t result = (CMTime *)_LogCategory_Initialize();
      if (!result) {
        return result;
      }
    }
    return (CMTime *)LogPrintF();
  }
  if (!*(unsigned char *)(DerivedStorage + 624))
  {
    uint64_t result = (CMTime *)APSLogErrorAt(0);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90) {
      return result;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR == -1)
    {
      uint64_t result = (CMTime *)_LogCategory_Initialize();
      if (!result) {
        return result;
      }
    }
    return (CMTime *)LogPrintF();
  }
  unsigned int v8 = *(_DWORD *)(DerivedStorage + 620);
  BOOL v9 = a3 >= v8;
  int v10 = a3 - v8;
  int v11 = !v9;
  int v12 = v10 != 0 && v9;
  BOOL v13 = v10 < 1;
  if (v10 < 1) {
    int v14 = -1;
  }
  else {
    int v14 = 1;
  }
  if (v13) {
    int v11 = v12;
  }
  if (!v11) {
    int v14 = 0;
  }
  int64_t v15 = a3 | ((unint64_t)(*(_DWORD *)(DerivedStorage + 616) + v14) << 32);

  return CMTimeMake(a1, v15, v6);
}

uint64_t hoseSBAR_getRTPTimeForTransportTime(uint64_t a1, uint64_t a2, char *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  int32_t v6 = (unsigned int *)(a2 + 4);
  if (*(_DWORD *)a2 == 1)
  {
    uint64_t result = *v6;
    char v9 = 1;
    if (!a3) {
      return result;
    }
    goto LABEL_11;
  }
  if (*(_DWORD *)a2 != 2) {
    goto LABEL_7;
  }
  if ((*(_DWORD *)(a2 + 16) & 0x1D) != 1 || *(void *)(a2 + 20) != 0) {
    goto LABEL_7;
  }
  int32_t v10 = *(_DWORD *)(DerivedStorage + 88);
  if (!v10)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90)
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR == -1)
      {
        uint64_t result = _LogCategory_Initialize();
        if (!result)
        {
LABEL_8:
          char v9 = 0;
          if (!a3) {
            return result;
          }
          goto LABEL_11;
        }
      }
      LogPrintF();
    }
LABEL_7:
    uint64_t result = 0;
    goto LABEL_8;
  }
  *(_OWORD *)&time.CMTimeValue value = *(_OWORD *)v6;
  time.CMTimeEpoch epoch = *(void *)(a2 + 20);
  char v9 = 1;
  CMTimeConvertScale(&v12, &time, v10, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
  uint64_t result = LODWORD(v12.value);
  if (a3) {
LABEL_11:
  }
    *a3 = v9;
  return result;
}

uint64_t hoseSBAR_updateRTPRolloverStateAssumingIncreasingRTPTimes(uint64_t a1, unsigned int a2)
{
  uint64_t result = CMBaseObjectGetDerivedStorage();
  uint64_t v4 = result;
  if (!*(unsigned char *)(result + 624))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50) {
      goto LABEL_18;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR == -1)
    {
      uint64_t result = _LogCategory_Initialize();
      if (!result) {
        goto LABEL_18;
      }
    }
LABEL_12:
    uint64_t result = LogPrintF();
LABEL_18:
    *(_DWORD *)(v4 + 620) = a2;
    *(unsigned char *)(v4 + 624) = 1;
    return result;
  }
  unsigned int v5 = *(_DWORD *)(result + 620);
  if ((int)(v5 - a2) < 1)
  {
    if (v5 <= a2) {
      goto LABEL_18;
    }
    ++*(_DWORD *)(result + 616);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50) {
      goto LABEL_18;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR == -1)
    {
      uint64_t result = _LogCategory_Initialize();
      if (!result) {
        goto LABEL_18;
      }
    }
    goto LABEL_12;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

void hoseSBAR_handleSynchronizerTimebaseRateChangedNotification()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(unsigned char *)DerivedStorage)
  {
    uint64_t v1 = DerivedStorage;
    if (CMTimebaseGetRate(*(CMTimebaseRef *)(DerivedStorage + 120)) != 0.0)
    {
      uint64_t v2 = *(OpaqueCMTimebase **)(v1 + 120);
      uint64_t v3 = *(NSObject **)(v1 + 544);
      CMTimebaseSetTimerDispatchSourceToFireImmediately(v2, v3);
    }
  }
}

void hoseSBAR_handleSBARUnderrunNotification(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, const void *a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(void *)(DerivedStorage + 104) != a4) {
    goto LABEL_15;
  }
  if (!a5) {
    goto LABEL_15;
  }
  uint64_t v9 = DerivedStorage;
  CFTypeID v10 = CFGetTypeID(a5);
  if (v10 != CFDictionaryGetTypeID()) {
    goto LABEL_15;
  }
  if (FigCFEqual())
  {
    if ((*(unsigned char *)(v9 + 656) & 1) == 0)
    {
      FigCFDictionaryGetCMTimeIfPresent();
      hoseSBAR_beginUnderrunIfNeeded(a2);
      return;
    }
    goto LABEL_15;
  }
  if (!FigCFEqual()) {
    return;
  }
  if ((*(unsigned char *)(v9 + 656) & 1) == 0)
  {
LABEL_15:
    APSLogErrorAt(0);
    return;
  }
  uint64_t v11 = MEMORY[0x1E4F1F9F8];
  *(_OWORD *)(v9 + 644) = *MEMORY[0x1E4F1F9F8];
  *(void *)(v9 + 660) = *(void *)(v11 + 16);
  FigCFDictionaryGetCMTimeRangeIfPresent();

  hoseSBAR_endUnderrun();
}

uint64_t hoseSBAR_beginUnderrunIfNeeded(uint64_t a1)
{
  uint64_t result = CMBaseObjectGetDerivedStorage();
  if ((*(unsigned char *)(result + 680) & 1) == 0)
  {
    uint64_t v3 = result;
    if (*(unsigned char *)(result + 656))
    {
      uint64_t v4 = (_OWORD *)(result + 644);
      if ((*(unsigned char *)(result + 340) & 1) == 0
        || (CMTime time1 = *(CMTime *)(result + 328),
            *(_OWORD *)&time2.CMTimeValue value = *v4,
            time2.CMTimeEpoch epoch = *(void *)(result + 660),
            uint64_t result = CMTimeCompare(&time1, &time2),
            (int)result <= 0))
      {
        if (*(unsigned char *)(v3 + 508))
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          *(_OWORD *)&time2.CMTimeValue value = *v4;
          time2.CMTimeEpoch epoch = *(void *)(v3 + 660);
          hoseSBAR_getMediaTimeForSynchronizerTime(&time1, a1, &time2);
          *(CMTime *)(v3 + 668) = time1;
          CMNotificationCenterGetDefaultLocalCenter();
          return FigDispatchAsyncPostNotification();
        }
      }
    }
  }
  return result;
}

void hoseSBAR_endUnderrun()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(unsigned char *)(DerivedStorage + 680))
  {
    uint64_t v1 = DerivedStorage;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v2 = v1 + 668;
    CMNotificationCenterGetDefaultLocalCenter();
    FigDispatchAsyncPostNotification();
    CMClockRef HostTimeClock = CMClockGetHostTimeClock();
    CMClockGetTime(&lhs, HostTimeClock);
    CMTime rhs = *(CMTime *)(v1 + 400);
    CMTimeSubtract(&time, &lhs, &rhs);
    double Seconds = CMTimeGetSeconds(&time);
    unsigned int v5 = (_OWORD *)(v1 + 692);
    if (*(unsigned char *)(v1 + 704) & 1) != 0 && (*(unsigned char *)(v1 + 728))
    {
      uint64_t v6 = v1 + 716;
      if (!*(void *)(v6 + 16) && (*(void *)v6 & 0x8000000000000000) == 0)
      {
        double v10 = Seconds;
        long long v11 = *(_OWORD *)v6;
        rhs.CMTimeEpoch epoch = *(void *)(v6 + 16);
        *(_OWORD *)&rhs.CMTimeValue value = v11;
        if (CMTimeGetSeconds(&rhs) < 5.0 && v10 >= 20.0)
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            long long v12 = *(_OWORD *)v6;
            rhs.CMTimeEpoch epoch = *(void *)(v6 + 16);
            *(_OWORD *)&rhs.CMTimeValue value = v12;
            CMTimeGetSeconds(&rhs);
            LogPrintF();
          }
          DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
          CFNotificationCenterPostNotification(DarwinNotifyCenter, @"com.apple.airplay.bufferedaudiounderrun", 0, 0, 1u);
        }
      }
    }
    uint64_t v7 = MEMORY[0x1E4F1F9F8];
    *(_OWORD *)uint64_t v2 = *MEMORY[0x1E4F1F9F8];
    *(void *)(v2 + 16) = *(void *)(v7 + 16);
    uint64_t v8 = MEMORY[0x1E4F1FA20];
    long long v9 = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 16);
    *unsigned int v5 = *MEMORY[0x1E4F1FA20];
    v5[1] = v9;
    v5[2] = *(_OWORD *)(v8 + 32);
  }
}

uint64_t hoseSBAR_handleSBARWasFlushedAutomaticallyAndRebuildCouldBenefitFidelityNotification(uint64_t a1, void *a2)
{
  uint64_t result = CMBaseObjectGetDerivedStorage();
  if (!*(unsigned char *)result)
  {
    uint64_t v4 = result;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    unsigned int v5 = *(const void **)(v4 + 824);
    if (v5)
    {
      CFRelease(v5);
      *(void *)(v4 + 824) = 0;
    }
    uint64_t v6 = *(const void **)(v4 + 832);
    if (v6)
    {
      CFRelease(v6);
      *(void *)(v4 + 832) = 0;
    }
    uint64_t v7 = *(void *)(v4 + 104);
    uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v8) {
      uint64_t v9 = v8;
    }
    else {
      uint64_t v9 = 0;
    }
    double v10 = *(uint64_t (**)(uint64_t))(v9 + 24);
    if (v10)
    {
      uint64_t result = v10(v7);
      if (!result)
      {
        *(unsigned char *)(v4 + 568) = 0;
        uint64_t result = hoseSBAR_transferStashedSBufsIntoBuffersForSBAR(a2);
        if (!result) {
          return result;
        }
      }
    }
    else
    {
      uint64_t result = 4294954514;
    }
    return APSLogErrorAt(result);
  }
  return result;
}

unsigned char *hoseSBAR_handleSBARLowWaterNotification(uint64_t a1, uint64_t a2)
{
  uint64_t result = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (!*result)
  {
    return (unsigned char *)hoseSBAR_fillSBARToHighWater(a2);
  }
  return result;
}

uint64_t hoseSBAR_decodeRTPData(uint64_t a1, OpaqueCMBlockBuffer *a2, void *a3, uint64_t a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  size_t totalLengthOut = 0;
  CMBlockBufferRef theBuffer = 0;
  AudioFormatID v32 = 0;
  dataPointerOut = 0;
  BOOL v30 = 0;
  uint64_t v31 = 0;
  size_t v28 = 0;
  dataunsigned int Length = 0;
  CMBlockBufferRef blockBufferOut = 0;
  CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once, &__block_literal_global_4);
  }
  ContiguousCFDictionaryRef Copy = APSCMBlockBufferCreateContiguousCopy(v8, (const __CFAllocator *)APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_allocator, a2, (CFTypeRef *)&theBuffer);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_28;
  }
  ContiguousCFDictionaryRef Copy = CMBlockBufferGetDataPointer(theBuffer, 0, 0, &totalLengthOut, &dataPointerOut);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_28;
  }
  ContiguousCFDictionaryRef Copy = APSTransportMessageGetAudioDataPointer(theBuffer, &v30, &dataLength);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_28;
  }
  if (*(void *)(DerivedStorage + 72))
  {
    ContiguousCFDictionaryRef Copy = APSTransportMessageGetAudioAADPointer(theBuffer, &v32, &v31);
    if (ContiguousCopy)
    {
      uint64_t v18 = ContiguousCopy;
      goto LABEL_28;
    }
    uint64_t v10 = *(void *)(DerivedStorage + 72);
    uint64_t v12 = v31;
    long long v11 = v32;
    size_t v14 = dataLength;
    BOOL v13 = v30;
    uint64_t v15 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v15) {
      uint64_t v16 = v15;
    }
    else {
      uint64_t v16 = 0;
    }
    uint64_t v19 = *(uint64_t (**)(uint64_t, char *, uint64_t, char *, size_t, char *, size_t, size_t *))(v16 + 24);
    if (v19)
    {
      uint64_t v20 = v19(v10, v11, v12, v13, v14, v13, v14, &v28);
      if (!v20)
      {
        size_t v17 = v28;
        if (!v28) {
          goto LABEL_17;
        }
        goto LABEL_11;
      }
      uint64_t v18 = v20;
    }
    else
    {
      uint64_t v18 = 4294954514;
    }
    ContiguousCFDictionaryRef Copy = v18;
    goto LABEL_28;
  }
  size_t v17 = dataLength;
  size_t v28 = dataLength;
  if (!dataLength)
  {
LABEL_17:
    ContiguousCFDictionaryRef Copy = CMBlockBufferCreateEmpty(v8, 0, 1u, &blockBufferOut);
    if (!ContiguousCopy) {
      goto LABEL_18;
    }
    uint64_t v18 = ContiguousCopy;
LABEL_28:
    APSLogErrorAt(ContiguousCopy);
    goto LABEL_30;
  }
LABEL_11:
  ContiguousCFDictionaryRef Copy = CMBlockBufferCreateWithBufferReference(v8, theBuffer, v30 - dataPointerOut, v17, 1u, &blockBufferOut);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_28;
  }
LABEL_18:
  if (a3)
  {
    uint64_t v21 = blockBufferOut;
    if (blockBufferOut) {
      uint64_t v21 = (void *)CFRetain(blockBufferOut);
    }
    *a3 = v21;
  }
  if (a4)
  {
    uint64_t v22 = *(void *)(DerivedStorage + 80);
    if (v22) {
      uint64_t v22 = *(void *)(v22 + 96);
    }
    uint64_t v18 = 0;
    *(void *)a4 = v22;
    *(void *)(a4 + 16) = 0;
    *(void *)(a4 + 160) = 0;
    uint64_t v23 = MEMORY[0x1E4F1F9F8];
    long long v24 = *MEMORY[0x1E4F1F9F8];
    *(_OWORD *)(a4 + 24) = *MEMORY[0x1E4F1F9F8];
    uint64_t v25 = *(void *)(v23 + 16);
    *(void *)(a4 + 40) = v25;
    *(_OWORD *)(a4 + 48) = v24;
    *(void *)(a4 + 64) = v25;
  }
  else
  {
    uint64_t v18 = 0;
  }
LABEL_30:
  if (theBuffer) {
    CFRelease(theBuffer);
  }
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  return v18;
}

uint64_t hoseSBAR_decodeRTPHeader(int a1, OpaqueCMBlockBuffer *a2, uint64_t a3, _DWORD *a4)
{
  int v12 = 0;
  unsigned __int16 destination = 0;
  uint64_t AudioDataTimestamp = APSTransportMessageGetAudioDataTimestamp(a2, &v12);
  if (AudioDataTimestamp)
  {
    uint64_t v9 = AudioDataTimestamp;
LABEL_10:
    APSLogErrorAt(AudioDataTimestamp);
    return v9;
  }
  uint64_t AudioDataTimestamp = APSTransportMessageGetAudioDataSequenceNumber(a2, &destination);
  if (AudioDataTimestamp)
  {
    uint64_t v9 = AudioDataTimestamp;
    goto LABEL_10;
  }
  if (a3)
  {
    int v8 = v12;
    *(_DWORD *)a3 = 1;
    *(_DWORD *)(a3 + 4) = v8;
    *(void *)(a3 + 8) = 0;
    *(void *)(a3 + 16) = 0;
    *(_DWORD *)(a3 + 24) = 0;
  }
  uint64_t v9 = 0;
  if (a4) {
    *a4 = destination;
  }
  return v9;
}

uint64_t hoseSBAR_decodeAPAPData(uint64_t a1, OpaqueCMBlockBuffer *a2, void *a3, uint64_t a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  size_t DataLength = CMBlockBufferGetDataLength(a2);
  CFTypeRef v32 = 0;
  CMBlockBufferRef blockBufferOut = 0;
  uint64_t v21 = a1;
  long long v22 = 0uLL;
  uint64_t v23 = 0;
  long long v24 = *MEMORY[0x1E4F1F9F8];
  uint64_t v25 = *(const void **)(MEMORY[0x1E4F1F9F8] + 16);
  long long v26 = v24;
  int v27 = v25;
  memset(cf, 0, sizeof(cf));
  *(CFTypeRef *)((char *)&cf[9] + 4) = v25;
  *(_OWORD *)((char *)&cf[7] + 4) = v24;
  uint64_t v29 = 0;
  CFTypeRef v30 = 0;
  CFTypeRef v31 = 0;
  CFAllocatorRef v10 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once, &__block_literal_global_4);
  }
  uint64_t v11 = CMBlockBufferCreateWithMemoryBlock(v10, 0, DataLength, (CFAllocatorRef)APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_allocator, 0, 0, DataLength, 1u, &blockBufferOut);
  if (v11)
  {
    uint64_t v19 = v11;
LABEL_35:
    APSLogErrorAt(v11);
    goto LABEL_20;
  }
  uint64_t v11 = APSAPAPBBufDecode((uint64_t)v10, a2, blockBufferOut, *(void *)(DerivedStorage + 72), 0, 0, (uint64_t)hoseSBAR_decodeAPAPExtensionItem, (uint64_t)&v21, &v32);
  if (v11)
  {
    uint64_t v19 = v11;
    goto LABEL_35;
  }
  if (a3)
  {
    CFTypeRef v12 = v32;
    if (v32) {
      CFTypeRef v12 = CFRetain(v32);
    }
    *a3 = v12;
  }
  if (a4)
  {
    CFTypeRef v13 = cf[0];
    *(void *)(a4 + 16) = v23;
    *(_OWORD *)a4 = v22;
    *(_OWORD *)(a4 + 24) = v24;
    *(void *)(a4 + 40) = v25;
    *(_OWORD *)(a4 + 48) = v26;
    *(void *)(a4 + 64) = v27;
    if (v13) {
      CFTypeRef v13 = CFRetain(v13);
    }
    *(void *)(a4 + 72) = v13;
    long long v14 = *(_OWORD *)&cf[3];
    *(_OWORD *)(a4 + 80) = *(_OWORD *)&cf[1];
    *(_OWORD *)(a4 + 96) = v14;
    CFTypeRef v15 = cf[5];
    if (cf[5]) {
      CFTypeRef v15 = CFRetain(cf[5]);
    }
    CFTypeRef v16 = cf[6];
    *(void *)(a4 + 112) = v15;
    *(void *)(a4 + 120) = v16;
    *(unsigned char *)(a4 + 128) = cf[7];
    *(_OWORD *)(a4 + 132) = *(_OWORD *)((char *)&cf[7] + 4);
    *(CFTypeRef *)(a4 + 148) = *(CFTypeRef *)((char *)&cf[9] + 4);
    CFTypeRef v17 = v30;
    *(void *)(a4 + 160) = v29;
    if (v17) {
      CFTypeRef v17 = CFRetain(v17);
    }
    *(void *)(a4 + 168) = v17;
    CFTypeRef v18 = v31;
    if (v31) {
      CFTypeRef v18 = CFRetain(v31);
    }
    uint64_t v19 = 0;
    *(void *)(a4 + 176) = v18;
  }
  else
  {
    uint64_t v19 = 0;
  }
LABEL_20:
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  if (v32) {
    CFRelease(v32);
  }
  if (cf[0]) {
    CFRelease(cf[0]);
  }
  if (cf[5]) {
    CFRelease(cf[5]);
  }
  if (v30) {
    CFRelease(v30);
  }
  if (v31) {
    CFRelease(v31);
  }
  return v19;
}

uint64_t hoseSBAR_decodeAPAPExtensionItem(uint64_t a1, OpaqueCMBlockBuffer *a2, uint64_t a3)
{
  uint64_t v29 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v7 = 0;
  switch(a1)
  {
    case 2:
      uint64_t v8 = DerivedStorage;
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      CMTimeValue value = v24.value;
      if (!v24.value)
      {
        CMTimeValue value = *(void *)(v8 + 592);
        if (value) {
          CMTimeValue value = *(void *)(value + 96);
        }
      }
      *(void *)(a3 + 8) = value;
      return v7;
    case 3:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 24) = v24.value;
      return v7;
    case 4:
      unsigned int v26 = 0;
      unint64_t destination = 0;
      BigUIntAsUuint64_t Int64 = CMBlockBufferCopyDataBytes(a2, 0, 0xCuLL, &destination);
      if (BigUIntAsUInt64)
      {
        uint64_t v7 = BigUIntAsUInt64;
        goto LABEL_70;
      }
      CMTimeMake(&v24, bswap64(destination), bswap32(v26));
      CMTimeValue v27 = v24.value;
      CMTimeFlags flags = v24.flags;
      CMTimeScale timescale = v24.timescale;
      if ((v24.flags & 1) == 0) {
        goto LABEL_63;
      }
      uint64_t v7 = 0;
      CMTimeEpoch epoch = v24.epoch;
      *(void *)(a3 + 32) = v27;
      *(_DWORD *)(a3 + 40) = timescale;
      *(_DWORD *)(a3 + 44) = flags;
      *(void *)(a3 + 48) = epoch;
      return v7;
    case 5:
      unsigned int v26 = 0;
      unint64_t destination = 0;
      BigUIntAsUuint64_t Int64 = CMBlockBufferCopyDataBytes(a2, 0, 0xCuLL, &destination);
      if (BigUIntAsUInt64)
      {
        uint64_t v7 = BigUIntAsUInt64;
        goto LABEL_70;
      }
      CMTimeMake(&v24, bswap64(destination), bswap32(v26));
      CMTimeValue v27 = v24.value;
      CMTimeFlags v13 = v24.flags;
      CMTimeScale timescale = v24.timescale;
      if ((v24.flags & 1) == 0) {
        goto LABEL_63;
      }
      uint64_t v7 = 0;
      CMTimeEpoch v14 = v24.epoch;
      *(void *)(a3 + 56) = v27;
      *(_DWORD *)(a3 + 64) = timescale;
      *(_DWORD *)(a3 + 68) = v13;
      *(void *)(a3 + 72) = v14;
      return v7;
    case 7:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSAPAPExtensionConvertSoundCheckInfoBBufAndMergeIntoLoudnessInfoDict(a2, *(void *)(a3 + 80), (CFTypeRef *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (!BigUIntAsUInt64) {
        goto LABEL_28;
      }
      goto LABEL_70;
    case 8:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 88) = v24.value;
      return v7;
    case 9:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferCopyAsUUID(a2, (CFTypeRef *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      CFTypeRef v15 = *(const void **)(a3 + 120);
      if (v15) {
        CFRelease(v15);
      }
      *(void *)(a3 + 120) = v24.value;
      return v7;
    case 10:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 128) = v24.value;
      *(unsigned char *)(a3 + 136) = 1;
      return v7;
    case 11:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSAPAPExtensionConvertLoudnessParametersBBufAndMergeIntoLoudnessInfoDict(a2, *(void *)(a3 + 80), (CFTypeRef *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      goto LABEL_28;
    case 12:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSAPAPExtensionConvertMediaKindBBufAndMergeIntoLoudnessInfoDict(a2, *(void *)(a3 + 80), (CFTypeRef *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
LABEL_28:
      CFTypeRef v16 = *(const void **)(a3 + 80);
      if (v16) {
        CFRelease(v16);
      }
      *(void *)(a3 + 80) = v24.value;
      return v7;
    case 13:
      unsigned int v26 = 0;
      unint64_t destination = 0;
      BigUIntAsUuint64_t Int64 = CMBlockBufferCopyDataBytes(a2, 0, 0xCuLL, &destination);
      if (BigUIntAsUInt64)
      {
        uint64_t v7 = BigUIntAsUInt64;
        goto LABEL_70;
      }
      CMTimeMake(&v24, bswap64(destination), bswap32(v26));
      CMTimeValue v27 = v24.value;
      CMTimeFlags v17 = v24.flags;
      CMTimeScale timescale = v24.timescale;
      if (v24.flags)
      {
        uint64_t v7 = 0;
        CMTimeEpoch v18 = v24.epoch;
        *(void *)(a3 + 140) = v27;
        *(_DWORD *)(a3 + 148) = timescale;
        *(_DWORD *)(a3 + 152) = v17;
        *(void *)(a3 + 156) = v18;
      }
      else
      {
LABEL_63:
        APSLogErrorAt(0);
        uint64_t v7 = 4294960559;
      }
      break;
    case 14:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 96) = v24.value;
      return v7;
    case 15:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 104) = v24.value;
      return v7;
    case 16:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 112) = v24.value;
      return v7;
    case 17:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 168) = v24.value;
      return v7;
    case 18:
      size_t DataLength = CMBlockBufferGetDataLength(a2);
      uint64_t v20 = malloc_type_calloc(1uLL, DataLength, 0xC4DA62DFuLL);
      BigUIntAsUuint64_t Int64 = CMBlockBufferCopyDataBytes(a2, 0, DataLength, v20);
      if (BigUIntAsUInt64)
      {
        uint64_t v7 = BigUIntAsUInt64;
LABEL_70:
        APSLogErrorAt(BigUIntAsUInt64);
      }
      else
      {
        CFDataRef v21 = CFDataCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const UInt8 *)v20, DataLength);
        if (v21)
        {
          *(void *)(a3 + 176) = v21;
          free(v20);
          uint64_t v7 = 0;
        }
        else
        {
          APSLogErrorAt(0);
          uint64_t v7 = 4294960587;
        }
      }
      break;
    case 19:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSAPAPExtensionConvertSbufTracerBBufToSbufTracerDict(a2, (CFTypeRef *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      long long v22 = *(const void **)(a3 + 184);
      if (v22) {
        CFRelease(v22);
      }
      *(void *)(a3 + 184) = v24.value;
      return v7;
    case 20:
      v24.CMTimeValue value = 0;
      BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a2, (unint64_t *)&v24);
      uint64_t v7 = BigUIntAsUInt64;
      if (BigUIntAsUInt64) {
        goto LABEL_70;
      }
      *(void *)(a3 + 16) = v24.value;
      return v7;
    default:
      return v7;
  }
  return v7;
}

uint64_t hoseSBAR_decodeAPAPHeader(uint64_t a1, uint64_t a2, uint64_t a3, _DWORD *a4)
{
  uint64_t v17 = *MEMORY[0x1E4F143B8];
  long long v13 = *MEMORY[0x1E4F1F9F8];
  uint64_t v14 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  int v12 = 0;
  uint64_t v6 = APSAPAPBBufDecodeHeader(a2, (uint64_t)&v13, &v12);
  uint64_t v7 = v6;
  if (v6)
  {
    APSLogErrorAt(v6);
  }
  else
  {
    if (a3)
    {
      int v8 = HIDWORD(v13);
      if ((BYTE12(v13) & 0x1D) == 1 && v14 == 0)
      {
        uint64_t v15 = v13;
        int v16 = DWORD2(v13);
        int v10 = 2;
      }
      else
      {
        int v8 = 0;
        int v10 = 0;
        int v16 = 0;
        uint64_t v15 = 0;
      }
      *(_DWORD *)a3 = v10;
      *(void *)(a3 + 4) = v15;
      *(_DWORD *)(a3 + 12) = v16;
      *(_DWORD *)(a3 + 16) = v8;
      *(void *)(a3 + 20) = 0;
    }
    if (a4) {
      *a4 = v12;
    }
  }
  return v7;
}

uint64_t hoseSBAR_decodeBufferedRTPData(uint64_t a1, OpaqueCMBlockBuffer *a2, void *a3, void *a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  size_t totalLengthOut = 0;
  CMBlockBufferRef theBuffer = 0;
  CFTypeRef v30 = 0;
  dataPointerOut = 0;
  size_t v28 = 0;
  uint64_t v29 = 0;
  size_t v26 = 0;
  dataunsigned int Length = 0;
  CMBlockBufferRef blockBufferOut = 0;
  unsigned __int8 destination = 0;
  CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once, &__block_literal_global_4);
  }
  ContiguousCFDictionaryRef Copy = APSCMBlockBufferCreateContiguousCopy(v8, (const __CFAllocator *)APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_allocator, a2, (CFTypeRef *)&theBuffer);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
  ContiguousCFDictionaryRef Copy = CMBlockBufferGetDataPointer(theBuffer, 0, 0, &totalLengthOut, &dataPointerOut);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
  ContiguousCFDictionaryRef Copy = APSTransportMessageGetBufferedAudioDataPointer(theBuffer, &v28, &dataLength);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
  if (!*(void *)(DerivedStorage + 72))
  {
    size_t v17 = dataLength;
    size_t v26 = dataLength;
    if (!dataLength) {
      goto LABEL_17;
    }
    goto LABEL_11;
  }
  ContiguousCFDictionaryRef Copy = APSTransportMessageGetBufferedAudioAADPointer(theBuffer, &v30, &v29);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
  uint64_t v10 = *(void *)(DerivedStorage + 72);
  uint64_t v12 = v29;
  uint64_t v11 = v30;
  size_t v14 = dataLength;
  long long v13 = v28;
  uint64_t v15 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v15) {
    uint64_t v16 = v15;
  }
  else {
    uint64_t v16 = 0;
  }
  uint64_t v19 = *(uint64_t (**)(uint64_t, char *, uint64_t, char *, size_t, char *, size_t, size_t *))(v16 + 24);
  if (!v19)
  {
    uint64_t v18 = 4294954514;
LABEL_29:
    ContiguousCFDictionaryRef Copy = v18;
    goto LABEL_30;
  }
  uint64_t v20 = v19(v10, v11, v12, v13, v14, v13, v14, &v26);
  if (v20)
  {
    uint64_t v18 = v20;
    goto LABEL_29;
  }
  size_t v17 = v26;
  if (v26)
  {
LABEL_11:
    ContiguousCFDictionaryRef Copy = CMBlockBufferCreateWithBufferReference(v8, theBuffer, v28 - dataPointerOut, v17, 1u, &blockBufferOut);
    if (!ContiguousCopy) {
      goto LABEL_18;
    }
    uint64_t v18 = ContiguousCopy;
LABEL_30:
    APSLogErrorAt(ContiguousCopy);
    goto LABEL_32;
  }
LABEL_17:
  ContiguousCFDictionaryRef Copy = CMBlockBufferCreateEmpty(v8, 0, 1u, &blockBufferOut);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
LABEL_18:
  ContiguousCFDictionaryRef Copy = APSTransportMessageGetBufferedAudioDataFormatIndex(a2, &destination);
  if (ContiguousCopy)
  {
    uint64_t v18 = ContiguousCopy;
    goto LABEL_30;
  }
  if (a3)
  {
    CFDataRef v21 = blockBufferOut;
    if (blockBufferOut) {
      CFDataRef v21 = (void *)CFRetain(blockBufferOut);
    }
    *a3 = v21;
  }
  if (a4)
  {
    uint64_t v22 = destination;
    if (!destination)
    {
      uint64_t v22 = *(void *)(DerivedStorage + 80);
      if (v22) {
        uint64_t v22 = *(void *)(v22 + 96);
      }
    }
    uint64_t v18 = 0;
    *a4 = v22;
    a4[2] = 0;
    a4[20] = 0;
  }
  else
  {
    uint64_t v18 = 0;
  }
LABEL_32:
  if (theBuffer) {
    CFRelease(theBuffer);
  }
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  return v18;
}

uint64_t hoseSBAR_decodeBufferedRTPHeader(int a1, OpaqueCMBlockBuffer *a2, uint64_t a3, _DWORD *a4)
{
  uint64_t destination = 0;
  Buffereduint64_t AudioDataTimestamp = APSTransportMessageGetBufferedAudioDataTimestamp(a2, (_DWORD *)&destination + 1);
  if (BufferedAudioDataTimestamp)
  {
    uint64_t v9 = BufferedAudioDataTimestamp;
LABEL_10:
    APSLogErrorAt(BufferedAudioDataTimestamp);
    return v9;
  }
  Buffereduint64_t AudioDataTimestamp = APSTransportMessageGetBufferedAudioDataExtendedSequenceNumber(a2, (unsigned int *)&destination);
  if (BufferedAudioDataTimestamp)
  {
    uint64_t v9 = BufferedAudioDataTimestamp;
    goto LABEL_10;
  }
  if (a3)
  {
    int v8 = HIDWORD(destination);
    *(_DWORD *)a3 = 1;
    *(_DWORD *)(a3 + 4) = v8;
    *(void *)(a3 + 8) = 0;
    *(void *)(a3 + 16) = 0;
    *(_DWORD *)(a3 + 24) = 0;
  }
  uint64_t v9 = 0;
  if (a4) {
    *a4 = destination;
  }
  return v9;
}

uint64_t hoseSBAR_audioHoseSetMagicCookie(const void *a1, uint64_t a2, const void *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  v14[0] = v11;
  v14[1] = a2;
  if (a3) {
    CFTypeRef v12 = CFRetain(a3);
  }
  else {
    CFTypeRef v12 = 0;
  }
  v14[2] = v12;
  v14[3] = a4;
  v14[4] = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseSetMagicCookieCallbackDispatchInternal, v14, 0x28uLL);
  return 0;
}

void hoseSBAR_audioHoseSetMagicCookieCallbackDispatchInternal(void *a1)
{
  uint64_t v2 = (const void *)a1[2];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (v2)
  {
    uint64_t v4 = DerivedStorage;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t Int64 = (const void *)CFNumberCreateInt64();
    if (Int64)
    {
      uint64_t v6 = Int64;
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(v4 + 800), Int64, v2);
      CFRelease(v6);
      uint64_t v7 = 0;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v7 = 4294894966;
    }
  }
  else
  {
    uint64_t v7 = 4294894965;
    APSLogErrorAt(0);
  }
  int v8 = (void (*)(void, void, uint64_t, void))a1[3];
  if (v8) {
    v8(*a1, a1[1], v7, a1[4]);
  }
  if (*a1) {
    CFRelease((CFTypeRef)*a1);
  }
  uint64_t v9 = (const void *)a1[2];
  if (v9)
  {
    CFRelease(v9);
  }
}

uint64_t hoseSBAR_audioHoseSetCryptor(const void *a1, uint64_t a2, const void *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  v14[0] = v11;
  v14[1] = a2;
  if (a3) {
    CFTypeRef v12 = CFRetain(a3);
  }
  else {
    CFTypeRef v12 = 0;
  }
  v14[2] = v12;
  v14[3] = a4;
  v14[4] = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseSetCryptorCallbackDispatchInternal, v14, 0x28uLL);
  return 0;
}

void hoseSBAR_audioHoseSetCryptorCallbackDispatchInternal(void *a1)
{
  uint64_t v2 = (const void *)a1[2];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (v2)
  {
    uint64_t v4 = DerivedStorage;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t Int64 = (const void *)CFNumberCreateInt64();
    if (Int64)
    {
      uint64_t v6 = Int64;
      CFBagAddValue(*(CFMutableBagRef *)(v4 + 768), Int64);
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(v4 + 776), v6, v2);
      CFRelease(v6);
      uint64_t v7 = 0;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v7 = 4294894966;
    }
  }
  else
  {
    uint64_t v7 = 4294894965;
    APSLogErrorAt(0);
  }
  int v8 = (void (*)(void, void, uint64_t, void))a1[3];
  if (v8) {
    v8(*a1, a1[1], v7, a1[4]);
  }
  if (*a1) {
    CFRelease((CFTypeRef)*a1);
  }
  uint64_t v9 = (const void *)a1[2];
  if (v9)
  {
    CFRelease(v9);
  }
}

uint64_t hoseSBAR_audioHoseGetAnchor(const void *a1, int a2, uint64_t a3, uint64_t a4)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v12 = 0;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v9 = CFRetain(a1);
  }
  else {
    CFTypeRef v9 = 0;
  }
  CFTypeRef v11 = v9;
  LODWORD(v12) = a2;
  uint64_t v13 = a3;
  uint64_t v14 = a4;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseGetAnchorCallbackDispatchInternal, &v11, 0x38uLL);
  return 0;
}

void hoseSBAR_audioHoseGetAnchorCallbackDispatchInternal(uint64_t a1)
{
  memset(v13, 0, 28);
  long long v11 = kAPSNetworkTimeInvalid;
  uint64_t v12 = 0x100000000;
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  memset(v16, 0, sizeof(v16));
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (v3 == 1)
  {
    uint64_t v5 = DerivedStorage;
    int v6 = **(_DWORD **)(DerivedStorage + 96);
    long long v14 = *(_OWORD *)(DerivedStorage + 472);
    uint64_t v15 = *(void *)(DerivedStorage + 488);
    hoseSBAR_getTransportTimeForMediaTime((CMTime *)v16, (uint64_t)v2, (uint64_t)&v14, v6);
    if (*(_DWORD *)v16 == 1 || *(_DWORD *)v16 == 2 && (v16[16] & 0x1D) == 1 && !*(void *)&v16[20])
    {
      uint64_t v7 = 0;
      v13[0] = *(_OWORD *)v16;
      *(_OWORD *)((char *)v13 + 12) = *(_OWORD *)&v16[12];
      uint64_t v12 = *(void *)(v5 + 440);
      long long v11 = *(_OWORD *)(v5 + 424);
      goto LABEL_9;
    }
    uint64_t v7 = 4294894965;
  }
  else
  {
    uint64_t v7 = 4294894965;
  }
  APSLogErrorAt(0);
LABEL_9:
  int v8 = *(void (**)(CFTypeRef, unsigned char *, long long *, uint64_t, uint64_t))(a1 + 16);
  if (v8)
  {
    CFTypeRef v9 = *(CFTypeRef *)a1;
    uint64_t v10 = *(void *)(a1 + 24);
    *(_OWORD *)uint64_t v16 = v13[0];
    *(_OWORD *)&v16[12] = *(_OWORD *)((char *)v13 + 12);
    long long v14 = v11;
    uint64_t v15 = v12;
    v8(v9, v16, &v14, v7, v10);
  }
  CFRelease(*(CFTypeRef *)a1);
}

CMTime *hoseSBAR_getTransportTimeForMediaTime(CMTime *result, uint64_t a2, uint64_t a3, int a4)
{
  result->int value = 0;
  *(void *)&result->CMTimeScale timescale = 0;
  LODWORD(result[1].value) = 0;
  result->CMTimeEpoch epoch = 0;
  int v4 = *(_DWORD *)(a3 + 12);
  if (v4)
  {
    uint64_t v5 = result;
    if (a4 == 2)
    {
      if ((*(_DWORD *)(a3 + 12) & 0x1D) == 1 && !*(void *)(a3 + 16))
      {
        LODWORD(result->value) = 2;
        *(CMTimeValue *)((char *)&result->value + 4) = *(void *)a3;
        result->CMTimeFlags flags = *(_DWORD *)(a3 + 8);
        LODWORD(result->epoch) = v4;
        *(CMTimeEpoch *)((char *)&result->epoch + 4) = 0;
      }
      else
      {
        result->int value = 0;
        *(void *)&result->CMTimeScale timescale = 0;
        LODWORD(result[1].value) = 0;
        result->CMTimeEpoch epoch = 0;
      }
    }
    else if (a4 == 1)
    {
      *(_OWORD *)&v9.int value = *(_OWORD *)a3;
      v9.CMTimeEpoch epoch = *(void *)(a3 + 16);
      uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
      if (**(_DWORD **)(DerivedStorage + 96) == 1)
      {
        int32_t v7 = *(_DWORD *)(DerivedStorage + 88);
        CMTime time = v9;
        uint64_t result = CMTimeConvertScale(&v11, &time, v7, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
        if (v11.flags)
        {
          int value = v11.value;
          *(void *)&v5->CMTimeScale timescale = 0;
          v5->CMTimeEpoch epoch = 0;
          LODWORD(v5[1].value) = 0;
          LODWORD(v5->value) = 1;
          HIDWORD(v5->value) = value;
          return result;
        }
      }
      else
      {
        APSLogErrorAt(0);
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
      return (CMTime *)APSLogErrorAt(0);
    }
  }
  return result;
}

uint64_t hoseSBAR_audioHoseSetRate(const void *a1, int a2, _OWORD *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  CFTypeRef v13 = v11;
  int v14 = a2;
  *(_OWORD *)uint64_t v15 = *a3;
  *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)((char *)a3 + 12);
  uint64_t v16 = a4;
  uint64_t v17 = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseSetRateCallbackDispatchInternal, &v13, 0x38uLL);
  return 0;
}

void hoseSBAR_audioHoseSetRateCallbackDispatchInternal(uint64_t a1)
{
  CFTypeRef v2 = *(void **)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  v14[0] = *(_OWORD *)(a1 + 12);
  *(_OWORD *)((char *)v14 + 12) = *(_OWORD *)(a1 + 24);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v5 = DerivedStorage;
  if (v3 == 1)
  {
    if (*(unsigned char *)(DerivedStorage + 484))
    {
      uint64_t v7 = 4294894965;
      uint64_t v6 = 0;
    }
    else
    {
      *(_OWORD *)uint64_t v15 = v14[0];
      *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)((char *)v14 + 12);
      uint64_t v6 = hoseSBAR_audioHosePrepareRTPTimestampsAndTransferBufferForSBAR(v2, v15, &kAPSNetworkTimeInvalid, MEMORY[0x1E4F1F9F8], &kAPSAudioTransportTime_Invalid);
      uint64_t v7 = v6;
      if (!v6)
      {
        CMClockRef HostTimeClock = CMClockGetHostTimeClock();
        CMClockGetTime((CMTime *)v15, HostTimeClock);
        *(_OWORD *)(v5 + 400) = *(_OWORD *)v15;
        *(void *)(v5 + 416) = *(void *)&v15[16];
        goto LABEL_5;
      }
    }
  }
  else
  {
    uint64_t v7 = 4294894965;
    uint64_t v6 = 0;
  }
  APSLogErrorAt(v6);
LABEL_5:
  *(_OWORD *)uint64_t v15 = v14[0];
  *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)((char *)v14 + 12);
  CMTime v9 = *(void (**)(void *, _OWORD *, long long *, uint64_t, uint64_t))(a1 + 40);
  if (v9)
  {
    uint64_t v10 = *(void **)a1;
    uint64_t v11 = *(void *)(a1 + 48);
    v14[0] = *(_OWORD *)v15;
    *(_OWORD *)((char *)v14 + 12) = *(_OWORD *)&v15[12];
    long long v12 = *(_OWORD *)(v5 + 424);
    uint64_t v13 = *(void *)(v5 + 440);
    v9(v10, v14, &v12, v7, v11);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBAR_audioHosePrepareRTPTimestampsAndTransferBufferForSBAR(void *a1, _OWORD *a2, long long *a3, CMTime *a4, _OWORD *a5)
{
  uint64_t v60 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CMTime v53 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  CMTime v52 = v53;
  long long v50 = kAPSNetworkTimeInvalid;
  uint64_t v51 = 0x100000000;
  CMTime v49 = v53;
  *(_OWORD *)uint64_t hostTime = *a2;
  *(_OWORD *)&hostTime[12] = *(_OWORD *)((char *)a2 + 12);
  hoseSBAR_updateRTPRolloverStateAssumingIncreasingTransportTimes((uint64_t)a1, hostTime);
  *(_OWORD *)uint64_t hostTime = *a2;
  *(_OWORD *)&hostTime[12] = *(_OWORD *)((char *)a2 + 12);
  hoseSBAR_getMediaTimeForTransportTime(&lhs, (uint64_t)a1, (uint64_t)hostTime);
  CMTimeValue value = lhs.value;
  CMTimeFlags flags = lhs.flags;
  CMTimeScale timescale = lhs.timescale;
  CMTimeEpoch epoch = lhs.epoch;
  *(_OWORD *)uint64_t hostTime = *a5;
  *(_OWORD *)&hostTime[12] = *(_OWORD *)((char *)a5 + 12);
  hoseSBAR_getMediaTimeForTransportTime(&lhs, (uint64_t)a1, (uint64_t)hostTime);
  CMTimeValue v56 = lhs.value;
  CMTimeScale v57 = lhs.timescale;
  if ((flags & 1) == 0)
  {
    APSLogErrorAt(0);
    *(_OWORD *)uint64_t hostTime = *a2;
    *(_OWORD *)&hostTime[12] = *(_OWORD *)((char *)a2 + 12);
    CFTypeRef v46 = APSAudioTransportTimeCopyDebugDesc((uint64_t)hostTime);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v36 = 4294894965;
    if (v46) {
      CFRelease(v46);
    }
    return v36;
  }
  CMTimeFlags v13 = lhs.flags;
  CMTimeEpoch v14 = lhs.epoch;
  *(void *)(DerivedStorage + 520) = v56;
  *(_DWORD *)(DerivedStorage + 528) = v57;
  *(_DWORD *)(DerivedStorage + 532) = v13;
  *(void *)(DerivedStorage + 536) = v14;
  *(_OWORD *)uint64_t hostTime = *a5;
  *(_OWORD *)&hostTime[12] = *(_OWORD *)((char *)a5 + 12);
  hoseSBAR_updateRTPRolloverStateOnFlushFromTransportTime((uint64_t)a1, hostTime);
  uint64_t v15 = CMBaseObjectGetDerivedStorage();
  memset(hostTime, 0, 24);
  CMTimeMake((CMTime *)hostTime, 30, 1000);
  if (*(unsigned char *)(v15 + 740))
  {
    *(void *)&hostTime[16] = *(void *)(v15 + 760);
    *(_OWORD *)uint64_t hostTime = *(_OWORD *)(v15 + 744);
  }
  lhs.CMTimeValue value = value;
  lhs.CMTimeScale timescale = timescale;
  lhs.CMTimeFlags flags = flags;
  lhs.CMTimeEpoch epoch = epoch;
  CMTime rhs = *(CMTime *)hostTime;
  if (hoseSBAR_setVolumeFadeInCurve((uint64_t)a1, &lhs, &rhs))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_14;
    }
LABEL_7:
    LogPrintF();
    goto LABEL_14;
  }
  if (*(unsigned char *)(v15 + 740))
  {
    int v16 = *(_DWORD *)(v15 + 216);
    CMTime lhs = *(CMTime *)(v15 + 744);
    if (hoseSBAR_postNotifyStyleAudioFadeAppliedForAirPlayPlayback((uint64_t)a1, "com.apple.mediaexperience.fadeinappliedforplaybackhandoff", v16, &lhs))
    {
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_7;
      }
    }
  }
LABEL_14:
  long long v17 = *a3;
  *(void *)(DerivedStorage + 440) = *((void *)a3 + 2);
  *(_OWORD *)(DerivedStorage + 424) = v17;
  CMTimeEpoch v18 = a4->epoch;
  *(_OWORD *)(DerivedStorage + 448) = *(_OWORD *)&a4->value;
  CMTimeValue v19 = value;
  *(void *)(DerivedStorage + 464) = v18;
  *(void *)(DerivedStorage + 472) = v19;
  *(_DWORD *)(DerivedStorage + 480) = timescale;
  *(_DWORD *)(DerivedStorage + 484) = flags;
  *(void *)(DerivedStorage + 488) = epoch;
  uint64_t started = hoseSBAR_startTheSynchronizerIfNecessary(a1, 0);
  if (started)
  {
    uint64_t v36 = started;
    goto LABEL_64;
  }
  CFDataRef v21 = (_OWORD *)(DerivedStorage + 448);
  uint64_t v22 = (_OWORD *)(DerivedStorage + 472);
  uint64_t v23 = *(void *)(DerivedStorage + 112);
  if (*(unsigned char *)(DerivedStorage + 460))
  {
    CMTime lhs = *a4;
    uint64_t v26 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v26) {
      uint64_t v27 = v26;
    }
    else {
      uint64_t v27 = 0;
    }
    unsigned __int16 v37 = *(uint64_t (**)(uint64_t, uint64_t, unsigned char *, CMTime *))(v27 + 64);
    if (v37)
    {
      *(CMTime *)uint64_t hostTime = lhs;
      uint64_t v38 = v37(v23, 1747795565, hostTime, &v53);
      if (!v38)
      {
        CMTime lhs = v53;
        *(_OWORD *)&rhs.CMTimeValue value = *v22;
        rhs.CMTimeEpoch epoch = *(void *)(DerivedStorage + 488);
        CMTimeSubtract((CMTime *)hostTime, &lhs, &rhs);
        *(_OWORD *)(DerivedStorage + 496) = *(_OWORD *)hostTime;
        uint64_t v39 = *(void *)&hostTime[16];
LABEL_41:
        *(void *)(DerivedStorage + 512) = v39;
        CMClockRef HostTimeClock = CMClockGetHostTimeClock();
        TimeOfDayClock = (const void *)FigGetTimeOfDayClock();
        *(_OWORD *)uint64_t hostTime = *(_OWORD *)&a4->value;
        *(void *)&hostTime[16] = a4->epoch;
        CMSyncConvertTime(&v49, (CMTime *)hostTime, HostTimeClock, TimeOfDayClock);
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          *(_OWORD *)uint64_t hostTime = *v21;
          *(void *)&hostTime[16] = *(void *)(DerivedStorage + 464);
          CMTimeGetSeconds((CMTime *)hostTime);
          *(_OWORD *)uint64_t hostTime = *v22;
          *(void *)&hostTime[16] = *(void *)(DerivedStorage + 488);
          CMTimeGetSeconds((CMTime *)hostTime);
          *(CMTime *)uint64_t hostTime = v49;
          CMTimeGetSeconds((CMTime *)hostTime);
          *(_OWORD *)uint64_t hostTime = *(_OWORD *)(DerivedStorage + 496);
          *(void *)&hostTime[16] = *(void *)(DerivedStorage + 512);
          CMTimeGetSeconds((CMTime *)hostTime);
          CMBufferQueueGetDuration(&time, *(CMBufferQueueRef *)(DerivedStorage + 552));
          CMTimeGetSeconds(&time);
          LogPrintF();
        }
        uint64_t started = hoseSBAR_transferStashedSBufsIntoBuffersForSBAR(a1);
        uint64_t v36 = started;
        if (!started)
        {
          hoseSBAR_beginUnderrunIfNeeded((uint64_t)a1);
          return v36;
        }
LABEL_64:
        APSLogErrorAt(started);
        return v36;
      }
      uint64_t v36 = v38;
    }
    else
    {
      uint64_t v36 = 4294954514;
    }
    APSLogErrorAt(v36);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_47;
    }
    return v36;
  }
  uint64_t v24 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v24) {
    uint64_t v25 = v24;
  }
  else {
    uint64_t v25 = 0;
  }
  size_t v28 = *(uint64_t (**)(uint64_t, uint64_t, unsigned char *, CMTime *))(v25 + 64);
  if (v28)
  {
    *(void *)uint64_t hostTime = value;
    *(_DWORD *)&hostTime[8] = timescale;
    *(_DWORD *)&hostTime[12] = flags;
    *(void *)&hostTime[16] = epoch;
    uint64_t v29 = v28(v23, 1831681640, hostTime, &v52);
    if (!v29)
    {
      long long v30 = *(_OWORD *)&v52.value;
      *CFDataRef v21 = *(_OWORD *)&v52.value;
      CMTimeEpoch v31 = v52.epoch;
      *(void *)(DerivedStorage + 464) = v52.epoch;
      uint64_t v32 = *(void *)(DerivedStorage + 64);
      *(_OWORD *)uint64_t hostTime = v30;
      *(void *)&hostTime[16] = v31;
      uint64_t v33 = CMClockConvertHostTimeToSystemUnits((CMTime *)hostTime);
      uint64_t v34 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v34) {
        uint64_t v35 = v34;
      }
      else {
        uint64_t v35 = 0;
      }
      AudioFormatID v40 = *(uint64_t (**)(uint64_t, uint64_t, long long *))(v35 + 16);
      if (v40)
      {
        uint64_t v41 = v40(v32, v33, &v50);
        if (!v41)
        {
          *(_OWORD *)(DerivedStorage + 424) = v50;
          *(void *)(DerivedStorage + 440) = v51;
          uint64_t v42 = MEMORY[0x1E4F1FA48];
          *(_OWORD *)(DerivedStorage + 496) = *MEMORY[0x1E4F1FA48];
          uint64_t v39 = *(void *)(v42 + 16);
          goto LABEL_41;
        }
        uint64_t v36 = v41;
      }
      else
      {
        uint64_t v36 = 4294954514;
      }
      APSLogErrorAt(v36);
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_47;
      }
      return v36;
    }
    uint64_t v36 = v29;
  }
  else
  {
    uint64_t v36 = 4294954514;
  }
  APSLogErrorAt(v36);
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
LABEL_47:
    LogPrintF();
  }
  return v36;
}

uint64_t hoseSBAR_updateRTPRolloverStateOnFlushFromTransportTime(uint64_t a1, _OWORD *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v6 = *(_DWORD **)(DerivedStorage + 96);
  uint64_t result = DerivedStorage + 96;
  char v12 = 0;
  if (*v6 == 1)
  {
    *(_OWORD *)uint64_t v11 = *a2;
    *(_OWORD *)&v11[12] = *(_OWORD *)((char *)a2 + 12);
    unsigned int RTPTimeForTransportTime = hoseSBAR_getRTPTimeForTransportTime(a1, (uint64_t)v11, &v12);
    if (v12 && (v8 = RTPTimeForTransportTime, uint64_t result = CMBaseObjectGetDerivedStorage(), *(unsigned char *)(result + 624)))
    {
      uint64_t v9 = result;
      unsigned int v10 = *(_DWORD *)(result + 620);
      if ((int)(v8 - v10) < 0)
      {
        if (v8 > v10)
        {
          --*(_DWORD *)(result + 616);
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50)
          {
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1
              || (uint64_t result = _LogCategory_Initialize(), result))
            {
              uint64_t result = LogPrintF();
            }
          }
        }
        *(_DWORD *)(v9 + 620) = v8;
      }
    }
    else
    {
      return APSLogErrorAt(0);
    }
  }
  return result;
}

uint64_t hoseSBAR_postNotifyStyleAudioFadeAppliedForAirPlayPlayback(uint64_t a1, const char *a2, int a3, CMTime *a4)
{
  if (a3 == -1)
  {
    APSLogErrorAt(0);
    return 4294960578;
  }
  CMTime time = *a4;
  double Seconds = CMTimeGetSeconds(&time);
  if (notify_set_state(a3, (unint64_t)(Seconds * 1000.0)))
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 4294960582;
  }
  if (notify_post(a2))
  {
    APSLogErrorAt(0);
    return 4294960582;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 50) {
    return 0;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || (uint64_t result = _LogCategory_Initialize(), result))
  {
    LogPrintF();
    return 0;
  }
  return result;
}

uint64_t hoseSBAR_audioHoseApplyVolumeFade(uint64_t a1, unsigned int a2, CMTime *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(void *)&v15[4] = 0;
  if (a2 >= 3)
  {
    uint64_t v9 = 4294894965;
LABEL_13:
    APSLogErrorAt(0);
    return v9;
  }
  uint64_t v7 = DerivedStorage;
  CMTime time1 = *a3;
  CMTime time2 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
  if (CMTimeCompare(&time1, &time2) <= 0)
  {
    uint64_t v9 = 4294894965;
    goto LABEL_13;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTime time1 = *a3;
    CMTimeGetSeconds(&time1);
    LogPrintF();
  }
  uint64_t v12 = a1;
  unsigned int v13 = a2;
  long long v14 = *(_OWORD *)&a3->value;
  *(void *)uint64_t v15 = a3->epoch;
  unsigned int v8 = *(NSObject **)(v7 + 280);
  LODWORD(time2.value) = 0;
  time1.CMTimeValue value = (CMTimeValue)&time2;
  *(void *)&time1.CMTimeScale timescale = &v12;
  time1.CMTimeEpoch epoch = (CMTimeEpoch)hoseSBAR_audioHoseApplyVolumeFadeCallbackDispatchInternal;
  if (!v8) {
    return 4294960591;
  }
  dispatch_sync_f(v8, &time1, (dispatch_function_t)APSDispatchSyncTaskCallback);
  return LODWORD(time2.value);
}

uint64_t hoseSBAR_audioHoseApplyVolumeFadeCallbackDispatchInternal(uint64_t a1)
{
  uint64_t v2 = *(void *)a1;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(unsigned char *)DerivedStorage) {
    return 0;
  }
  uint64_t v4 = DerivedStorage;
  int v5 = *(_DWORD *)(a1 + 8);
  if (v5 == 2)
  {
    if (!*(_DWORD *)(DerivedStorage + 264))
    {
      APSLogErrorAt(0);
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90
        || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
      {
        return 4294960591;
      }
LABEL_14:
      LogPrintF();
      return 4294960591;
    }
    *(_OWORD *)&v23.CMTimeValue value = *(_OWORD *)(a1 + 12);
    v23.CMTimeEpoch epoch = *(void *)(a1 + 28);
    uint64_t v8 = CMBaseObjectGetDerivedStorage();
    CFAllocatorRef v9 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (!Mutable)
    {
      uint64_t v6 = 4294894966;
      APSLogErrorAt(0);
      goto LABEL_47;
    }
    CFMutableDictionaryRef v11 = Mutable;
    CFMutableArrayRef v12 = CFArrayCreateMutable(v9, 0, MEMORY[0x1E4F1D510]);
    if (!v12)
    {
      uint64_t v6 = 4294894966;
      APSLogErrorAt(0);
      CFRelease(v11);
      goto LABEL_47;
    }
    unsigned int v13 = v12;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      CMTime time = v23;
      CMTimeGetSeconds(&time);
      LogPrintF();
    }
    CMTime time = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
    uint64_t appended = FigCFArrayAppendCMTime();
    if (appended)
    {
      uint64_t v6 = appended;
    }
    else
    {
      uint64_t appended = FigCFArrayAppendDouble();
      if (appended)
      {
        uint64_t v6 = appended;
      }
      else
      {
        uint64_t v15 = (const void *)*MEMORY[0x1E4F34550];
        CFArrayAppendValue(v13, (const void *)*MEMORY[0x1E4F34550]);
        CMTime time = v23;
        uint64_t appended = FigCFArrayAppendCMTime();
        if (appended)
        {
          uint64_t v6 = appended;
        }
        else
        {
          uint64_t appended = FigCFArrayAppendDouble();
          if (appended)
          {
            uint64_t v6 = appended;
          }
          else
          {
            CFArrayAppendValue(v13, v15);
            CFDictionarySetValue(v11, (const void *)*MEMORY[0x1E4F34558], v13);
            uint64_t v16 = *(void *)(v8 + 104);
            uint64_t v17 = *(void *)(CMBaseObjectGetVTable() + 8);
            if (v17) {
              uint64_t v18 = v17;
            }
            else {
              uint64_t v18 = 0;
            }
            CMTimeValue v19 = *(uint64_t (**)(uint64_t, void, CFMutableDictionaryRef))(v18 + 56);
            if (v19)
            {
              uint64_t v6 = v19(v16, *MEMORY[0x1E4F34650], v11);
              if (!v6) {
                goto LABEL_31;
              }
            }
            else
            {
              uint64_t v6 = 4294954514;
            }
            uint64_t appended = v6;
          }
        }
      }
    }
    APSLogErrorAt(appended);
LABEL_31:
    CFRelease(v13);
    CFRelease(v11);
    if (!v6)
    {
      *(unsigned char *)(v4 + 740) = 1;
      long long v20 = *(_OWORD *)(a1 + 12);
      *(void *)(v4 + 760) = *(void *)(a1 + 28);
      *(_OWORD *)(v4 + 744) = v20;
      int v21 = *(_DWORD *)(v4 + 220);
      CMTime time = *(CMTime *)(a1 + 12);
      if (hoseSBAR_postNotifyStyleAudioFadeAppliedForAirPlayPlayback(v2, "com.apple.mediaexperience.fadeoutappliedforplaybackhandoff", v21, &time)&& gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90&& (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      return 0;
    }
LABEL_47:
    APSLogErrorAt(v6);
    return v6;
  }
  if (v5 != 1)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      return 4294960591;
    }
    goto LABEL_14;
  }
  if (*(_DWORD *)(DerivedStorage + 264))
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR > 90
      || gLogCategory_APSEndpointStreamAudioHoseSBAR == -1 && !_LogCategory_Initialize())
    {
      return 4294960591;
    }
    goto LABEL_14;
  }
  uint64_t v6 = 0;
  *(unsigned char *)(DerivedStorage + 740) = 1;
  long long v7 = *(_OWORD *)(a1 + 12);
  *(void *)(DerivedStorage + 760) = *(void *)(a1 + 28);
  *(_OWORD *)(DerivedStorage + 744) = v7;
  return v6;
}

uint64_t hoseSBAR_audioHoseSetCallbacks(const void *a1, uint64_t a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFRetain(a1);
  }
  if (a3) {
    CFRetain(a3);
  }
  long long v7 = *(NSObject **)(DerivedStorage + 280);
  v9[0] = MEMORY[0x1E4F143A8];
  v9[1] = 0x40000000;
  _OWORD v9[2] = __hoseSBAR_audioHoseSetCallbacks_block_invoke;
  void v9[3] = &__block_descriptor_tmp_358;
  v9[4] = DerivedStorage;
  v9[5] = a2;
  v9[6] = a3;
  v9[7] = a1;
  dispatch_async(v7, v9);
  return 0;
}

void __hoseSBAR_audioHoseSetCallbacks_block_invoke(void *a1)
{
  *(void *)(a1[4] + 384) = a1[5];
  uint64_t v2 = a1[4];
  int v3 = *(const void **)(v2 + 392);
  uint64_t v4 = (const void *)a1[6];
  *(void *)(v2 + 392) = v4;
  if (v4) {
    CFRetain(v4);
  }
  if (v3) {
    CFRelease(v3);
  }
  int v5 = (const void *)a1[7];
  if (v5) {
    CFRelease(v5);
  }
  uint64_t v6 = (const void *)a1[6];
  if (v6)
  {
    CFRelease(v6);
  }
}

uint64_t hoseSBAR_audioHoseSetRateAndAnchorTime(const void *a1, int a2, _OWORD *a3, uint64_t a4, _OWORD *a5, uint64_t a6, uint64_t a7)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(void *)&v21[24] = 0;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1) {
    CFTypeRef v15 = CFRetain(a1);
  }
  else {
    CFTypeRef v15 = 0;
  }
  CFTypeRef v17 = v15;
  int v18 = a2;
  *(_OWORD *)CMTimeValue v19 = *a3;
  *(_OWORD *)&v19[3] = *(_OWORD *)((char *)a3 + 12);
  *(_OWORD *)&v19[7] = *(_OWORD *)a4;
  uint64_t v20 = *(void *)(a4 + 16);
  *(_OWORD *)int v21 = *a5;
  *(_OWORD *)&v21[12] = *(_OWORD *)((char *)a5 + 12);
  uint64_t v22 = a6;
  uint64_t v23 = a7;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseSetRateAndAnchorTimeCallbackDispatchInternal, &v17, 0x70uLL);
  return 0;
}

void hoseSBAR_audioHoseSetRateAndAnchorTimeCallbackDispatchInternal(uint64_t a1)
{
  uint64_t v66 = *MEMORY[0x1E4F143B8];
  memset(&v56[32], 0, 28);
  uint64_t v2 = *(void **)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  *(_OWORD *)CMTimeValue v56 = *(_OWORD *)(a1 + 12);
  *(_OWORD *)&v56[12] = *(_OWORD *)(a1 + 24);
  *(_OWORD *)&v55.CMTimeValue value = *(_OWORD *)(a1 + 40);
  v55.CMTimeEpoch epoch = *(void *)(a1 + 56);
  *(_OWORD *)CFDictionaryRef v54 = *(_OWORD *)(a1 + 64);
  *(_OWORD *)&v54[12] = *(_OWORD *)(a1 + 76);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(unsigned char *)DerivedStorage)
  {
    if (v3)
    {
      uint64_t v5 = CMBaseObjectGetDerivedStorage();
      CMTime v63 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
      hostTime.CMTimeValue value = 0;
      *(_OWORD *)CMTime time = *(_OWORD *)v56;
      *(_OWORD *)&time[12] = *(_OWORD *)&v56[12];
      CFTypeRef v6 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
      *(_OWORD *)CMTime time = *(_OWORD *)v54;
      *(_OWORD *)&time[12] = *(_OWORD *)&v54[12];
      CFTypeRef v7 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
      if ((*(unsigned char *)(v5 + 484) & 1) != 0
        && gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      uint64_t v25 = *(void *)(v5 + 64);
      uint64_t v26 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v26) {
        uint64_t v27 = v26;
      }
      else {
        uint64_t v27 = 0;
      }
      size_t v28 = *(uint64_t (**)(uint64_t, unsigned char *, CMTime *))(v27 + 24);
      if (v28)
      {
        *(_OWORD *)CMTime time = *(_OWORD *)&v55.value;
        *(void *)&time[16] = v55.epoch;
        uint64_t v29 = v28(v25, time, &hostTime);
        if (!v29)
        {
          CMClockMakeHostTimeFromSystemUnits(&v63, hostTime.value);
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            *(CMTime *)CMTime time = v63;
            CMTimeGetSeconds((CMTime *)time);
            CMClockRef HostTimeClock = CMClockGetHostTimeClock();
            CMSyncGetTime(&v61, HostTimeClock);
            CMTimeGetSeconds(&v61);
            LogPrintF();
          }
          *(_OWORD *)CMTime time = *(_OWORD *)v56;
          *(_OWORD *)&time[12] = *(_OWORD *)&v56[12];
          CMTime v60 = v55;
          CMTime rhs = v63;
          *(_OWORD *)CMTime lhs = *(_OWORD *)v54;
          *(_OWORD *)&lhs[12] = *(_OWORD *)&v54[12];
          uint64_t v35 = hoseSBAR_audioHosePrepareRTPTimestampsAndTransferBufferForSBAR(v2, time, (long long *)&v60.value, &rhs, lhs);
          uint64_t v23 = v35;
          if (v35)
          {
            APSLogErrorAt(v35);
            if (!v6) {
              goto LABEL_54;
            }
            goto LABEL_53;
          }
LABEL_52:
          if (!v6)
          {
LABEL_54:
            if (v7) {
              CFRelease(v7);
            }
            if (!v23)
            {
              uint64_t v36 = CMClockGetHostTimeClock();
              CMClockGetTime((CMTime *)time, v36);
              *(_OWORD *)(DerivedStorage + 400) = *(_OWORD *)time;
              *(void *)(DerivedStorage + 416) = *(void *)&time[16];
LABEL_58:
              hoseSBAR_updateBufferingPriority(v2);
              uint64_t v23 = 0;
              goto LABEL_59;
            }
            uint64_t v34 = v23;
LABEL_49:
            APSLogErrorAt(v34);
            goto LABEL_59;
          }
LABEL_53:
          CFRelease(v6);
          goto LABEL_54;
        }
        uint64_t v23 = v29;
      }
      else
      {
        uint64_t v23 = 4294954514;
      }
      APSLogErrorAt(v23);
      if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
        && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
        if (!v6) {
          goto LABEL_54;
        }
        goto LABEL_53;
      }
      goto LABEL_52;
    }
    uint64_t v8 = CMBaseObjectGetDerivedStorage();
    memset(time, 0, sizeof(time));
    *(_OWORD *)&v63.CMTimeValue value = *MEMORY[0x1E4F1F9F8];
    CMTimeEpoch v9 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
    long long v53 = *(_OWORD *)&v63.value;
    *(_OWORD *)&v61.CMTimeValue value = *(_OWORD *)&v63.value;
    v61.CMTimeEpoch epoch = v9;
    uint64_t v10 = *(void *)(v8 + 472);
    v63.CMTimeEpoch epoch = v9;
    uint64_t v64 = v10;
    int v65 = *(_DWORD *)(v8 + 480);
    int v11 = *(_DWORD *)(v8 + 484);
    uint64_t v12 = *(void *)(v8 + 488);
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v13 = *(void *)(v8 + 112);
    uint64_t v14 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v14) {
      uint64_t v15 = v14;
    }
    else {
      uint64_t v15 = 0;
    }
    uint64_t v16 = *(uint64_t (**)(uint64_t, unsigned char *, double))(v15 + 24);
    if (v16)
    {
      uint64_t v51 = v12;
      int v52 = v11;
      *(_OWORD *)CMTime lhs = *(_OWORD *)&v63.value;
      *(void *)&lhs[16] = v9;
      uint64_t v17 = v16(v13, lhs, 0.0);
      if (!v17)
      {
        hoseSBAR_waitForTimebaseRate(0.0);
        hoseSBAR_updateSynchronizerState((uint64_t)v2, 0);
        CMBufferQueueGetFirstPresentationTimeStamp(&v60, *(CMBufferQueueRef *)(v8 + 552));
        hoseSBAR_getTransportTimeForMediaTime((CMTime *)time, (uint64_t)v2, (uint64_t)&v60, **(_DWORD **)(v8 + 96));
        *(_OWORD *)(v8 + 496) = v53;
        *(void *)(v8 + 512) = v9;
        *(void *)(v8 + 440) = 0x100000000;
        *(_OWORD *)(v8 + 424) = kAPSNetworkTimeInvalid;
        *(_OWORD *)(v8 + 448) = v53;
        *(void *)(v8 + 464) = v9;
        *(_OWORD *)(v8 + 472) = v53;
        *(void *)(v8 + 488) = v9;
        int v18 = *(const void **)(v8 + 824);
        if (v18)
        {
          CFRelease(v18);
          *(void *)(v8 + 824) = 0;
        }
        CMTimeValue v19 = *(const void **)(v8 + 832);
        if (v19)
        {
          CFRelease(v19);
          *(void *)(v8 + 832) = 0;
        }
        uint64_t v20 = *(void *)(v8 + 104);
        uint64_t v21 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v21) {
          uint64_t v22 = v21;
        }
        else {
          uint64_t v22 = 0;
        }
        CMTimeEpoch v31 = *(uint64_t (**)(uint64_t))(v22 + 24);
        if (v31)
        {
          uint64_t v32 = v31(v20);
          if (!v32)
          {
            *(unsigned char *)(v8 + 568) = 0;
            uint64_t v33 = CMBaseObjectGetDerivedStorage();
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
            if (!Mutable)
            {
              APSLogErrorAt(0);
              goto LABEL_83;
            }
            CFMutableDictionaryRef v43 = Mutable;
            CFMutableArrayRef v44 = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
            if (!v44)
            {
              APSLogErrorAt(0);
              CFRelease(v43);
              goto LABEL_83;
            }
            CFMutableArrayRef v45 = v44;
            CFDictionarySetValue(v43, (const void *)*MEMORY[0x1E4F34558], v44);
            uint64_t v46 = *(void *)(v33 + 104);
            uint64_t v47 = *(void *)(CMBaseObjectGetVTable() + 8);
            if (v47) {
              uint64_t v48 = v47;
            }
            else {
              uint64_t v48 = 0;
            }
            CMTime v49 = *(uint64_t (**)(uint64_t, void, CFMutableDictionaryRef))(v48 + 56);
            if (v49)
            {
              uint64_t v50 = v49(v46, *MEMORY[0x1E4F34650], v43);
              if (!v50) {
                goto LABEL_82;
              }
            }
            else
            {
              uint64_t v50 = 4294954514;
            }
            APSLogErrorAt(v50);
LABEL_82:
            CFRelease(v45);
            CFRelease(v43);
            if (!v50)
            {
              if (v52)
              {
                CMTimebaseGetTime(&v63, *(CMTimebaseRef *)(v8 + 120));
                CMTimeMake(&rhs, 1000, 1000);
                *(void *)CMTime lhs = v64;
                *(_DWORD *)&lhs[8] = v65;
                *(_DWORD *)&lhs[12] = v52;
                *(void *)&lhs[16] = v51;
                CMTimeAdd(&v61, (CMTime *)lhs, &rhs);
                if (*(unsigned char *)(v8 + 740))
                {
                  *(CMTime *)CMTime lhs = v63;
                  CMTime hostTime = v61;
                  if ((CMTimeCompare((CMTime *)lhs, &hostTime) & 0x80000000) == 0)
                  {
                    *(unsigned char *)(v8 + 740) = 0;
                    *(_OWORD *)(v8 + 744) = v53;
                    *(void *)(v8 + 760) = v9;
                  }
                }
              }
LABEL_91:
              uint64_t v24 = hoseSBAR_transferStashedSBufsIntoBuffersForSBAR(v2);
              if (v24)
              {
                uint64_t v23 = v24;
              }
              else
              {
                uint64_t v24 = hoseSBAR_enqueueIntoSBARPrimingSBufIfNecessary((uint64_t)v2);
                if (!v24)
                {
                  hoseSBAR_endUnderrun();
                  *(_OWORD *)&v56[32] = *(_OWORD *)time;
                  *(_OWORD *)&v56[44] = *(_OWORD *)&time[12];
                  *(_OWORD *)(DerivedStorage + 400) = v53;
                  *(void *)(DerivedStorage + 416) = v9;
                  goto LABEL_58;
                }
                uint64_t v23 = v24;
              }
              goto LABEL_48;
            }
LABEL_83:
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            goto LABEL_91;
          }
          uint64_t v23 = v32;
        }
        else
        {
          uint64_t v23 = 4294954514;
        }
        uint64_t v24 = v23;
LABEL_48:
        APSLogErrorAt(v24);
        *(_OWORD *)&v56[32] = *(_OWORD *)time;
        *(_OWORD *)&v56[44] = *(_OWORD *)&time[12];
        uint64_t v34 = v23;
        goto LABEL_49;
      }
      uint64_t v23 = v17;
    }
    else
    {
      uint64_t v23 = 4294954514;
    }
    uint64_t v24 = v23;
    goto LABEL_48;
  }
  APSLogErrorAt(0);
  uint64_t v23 = 4294894964;
LABEL_59:
  if (!*(unsigned char *)DerivedStorage)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (!v23 && *(_DWORD *)(DerivedStorage + 264) != v3)
    {
      CFMutableDictionaryRef v37 = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 1, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      *(_DWORD *)(DerivedStorage + 264) = v3;
      CFDictionarySetInt64();
      CMNotificationCenterGetDefaultLocalCenter();
      FigDispatchAsyncPostNotification();
      CFRelease(v37);
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
  }
  uint64_t v38 = *(void (**)(void *, uint64_t, unsigned char *, unsigned char *, unsigned char *, uint64_t, uint64_t))(a1 + 96);
  if (v38)
  {
    uint64_t v39 = *(void **)a1;
    uint64_t v40 = *(unsigned int *)(a1 + 8);
    uint64_t v41 = *(void *)(a1 + 104);
    *(_OWORD *)CMTime time = *(_OWORD *)(a1 + 12);
    *(_OWORD *)&time[12] = *(_OWORD *)(a1 + 24);
    *(_OWORD *)CMTimeValue v56 = *(_OWORD *)(a1 + 40);
    *(void *)&v56[16] = *(void *)(a1 + 56);
    *(_OWORD *)CMTime lhs = *(_OWORD *)&v56[32];
    *(_OWORD *)&lhs[12] = *(_OWORD *)&v56[44];
    v38(v39, v40, time, v56, lhs, v23, v41);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBAR_audioHoseNotifyAudioAvailable(const void *a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFTypeRef v3 = CFRetain(a1);
  }
  else {
    CFTypeRef v3 = 0;
  }
  CFTypeRef v5 = v3;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_notifyAudioDataAvailableEngineCallbackDispatchInternal, &v5, 8uLL);
  return 0;
}

void hoseSBAR_notifyAudioDataAvailableEngineCallbackDispatchInternal(void **a1)
{
  uint64_t v2 = *a1;
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!*DerivedStorage)
  {
    DerivedStorage[353] = 1;
    hoseSBAR_maybeTriggerPullAudioBBuffs(v2);
  }
  uint64_t v4 = *a1;

  CFRelease(v4);
}

uint64_t hoseSBAR_audioHoseFlushWithinSampleRange(const void *a1, int a2, _OWORD *a3, int a4, _OWORD *a5, uint64_t a6, uint64_t a7)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef v16 = CFRetain(a1);
  int v17 = a2;
  *(_OWORD *)int v18 = *a3;
  *(_OWORD *)&v18[12] = *(_OWORD *)((char *)a3 + 12);
  int v19 = a4;
  *(_OWORD *)uint64_t v20 = *a5;
  *(_OWORD *)&v20[12] = *(_OWORD *)((char *)a5 + 12);
  uint64_t v21 = a6;
  uint64_t v22 = a7;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseFlushWithinSampleRangeDispatchInternal, &v16, 0x58uLL);
  return 0;
}

void hoseSBAR_audioHoseFlushWithinSampleRangeDispatchInternal(uint64_t a1)
{
  uint64_t v60 = *MEMORY[0x1E4F143B8];
  CFTypeRef v2 = *(CFTypeRef *)a1;
  CMTimeFlags v48 = *(_DWORD *)(a1 + 40);
  int v49 = *(_DWORD *)(a1 + 8);
  uint64_t v3 = *(void *)(a1 + 72);
  uint64_t v47 = *(void *)(a1 + 80);
  *(_OWORD *)uint64_t v51 = *(_OWORD *)(a1 + 12);
  *(_OWORD *)&v51[12] = *(_OWORD *)(a1 + 24);
  *(_OWORD *)uint64_t v50 = *(_OWORD *)(a1 + 44);
  *(_OWORD *)&v50[12] = *(_OWORD *)(a1 + 56);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFTypeRef v5 = (CMTime *)MEMORY[0x1E4F1F9F8];
  CMTimeValue v58 = *MEMORY[0x1E4F1F9F8];
  CMTimeScale timescale = *(_DWORD *)(MEMORY[0x1E4F1F9F8] + 8);
  *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v51;
  *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v51[12];
  CFTypeRef v6 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
  *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v50;
  *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v50[12];
  CFTypeRef v7 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
  long long v8 = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 16);
  *(_OWORD *)&v56.start.CMTimeValue value = *MEMORY[0x1E4F1FA20];
  *(_OWORD *)&v56.start.CMTimeEpoch epoch = v8;
  *(_OWORD *)&v56.duration.CMTimeScale timescale = *(_OWORD *)(MEMORY[0x1E4F1FA20] + 32);
  CMTime v55 = *v5;
  CMTime v54 = v55;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    time[0] = *(CMTime *)(DerivedStorage + 328);
    CMTimeGetSeconds(time);
    LogPrintF();
  }
  if (*(unsigned char *)DerivedStorage)
  {
    LODWORD(v25) = -72332;
    uint64_t v46 = 0;
LABEL_61:
    APSLogErrorAt(v46);
    goto LABEL_74;
  }
  uint64_t v9 = CMBaseObjectGetDerivedStorage();
  CFArrayRef v10 = *(const __CFArray **)(v9 + 360);
  if (v10)
  {
    CFIndex Count = CFArrayGetCount(v10);
    if (Count >= 1)
    {
      CFIndex v12 = Count;
      for (CFIndex i = 0; i != v12; ++i)
      {
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(*(CFArrayRef *)(v9 + 360), i);
        hoseSBAR_enqueueAudioBBuffToInternalBuffersInternal((uint64_t)v2, (uint64_t)ValueAtIndex);
      }
    }
    uint64_t v15 = *(const void **)(v9 + 360);
    if (v15)
    {
      CFRelease(v15);
      *(void *)(v9 + 360) = 0;
    }
  }
  *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v51;
  *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v51[12];
  hoseSBAR_getMediaTimeForTransportTime(&v55, (uint64_t)v2, (uint64_t)time);
  *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v50;
  *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v50[12];
  hoseSBAR_getMediaTimeForTransportTime(&v54, (uint64_t)v2, (uint64_t)time);
  *(CMTime *)CMTime rhs = v55;
  uint64_t v16 = CMBaseObjectGetDerivedStorage();
  queueOut.CMTimeValue value = 0;
  *(_OWORD *)&time[0].CMTimeScale timescale = *(_OWORD *)rhs;
  time[0].CMTimeValue value = 0;
  time[1].CMTimeValue value = *(void *)&rhs[16];
  CFAllocatorRef v17 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CallbacksForUnsortedSampleBuffers = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
  uint64_t v19 = CMBufferQueueCreate(v17, 0, CallbacksForUnsortedSampleBuffers, (CMBufferQueueRef *)&queueOut);
  if (v19)
  {
    uint64_t v25 = v19;
LABEL_69:
    APSLogErrorAt(v19);
    goto LABEL_27;
  }
  time[0].CMTimeValue value = queueOut.value;
  uint64_t v19 = CMBufferQueueCallForEachBuffer(*(CMBufferQueueRef *)(v16 + 552), (OSStatus (__cdecl *)(CMBufferRef, void *))hoseSBAR_bufferQueuePopBackAfterTimeCallback, time);
  if (v19)
  {
    uint64_t v25 = v19;
    goto LABEL_69;
  }
  uint64_t v20 = *(const void **)(v16 + 552);
  CMTimeValue value = (const void *)queueOut.value;
  *(void *)(v16 + 552) = queueOut.value;
  if (value) {
    CFRetain(value);
  }
  if (v20) {
    CFRelease(v20);
  }
  if (queueOut.value)
  {
    CFRelease((CFTypeRef)queueOut.value);
    queueOut.CMTimeValue value = 0;
  }
  uint64_t v22 = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
  uint64_t v19 = CMBufferQueueCreate(v17, 0, v22, (CMBufferQueueRef *)&queueOut);
  if (v19)
  {
    uint64_t v25 = v19;
    goto LABEL_69;
  }
  time[0].CMTimeValue value = queueOut.value;
  uint64_t v19 = CMBufferQueueCallForEachBuffer(*(CMBufferQueueRef *)(v16 + 560), (OSStatus (__cdecl *)(CMBufferRef, void *))hoseSBAR_bufferQueuePopBackAfterTimeCallback, time);
  if (v19)
  {
    uint64_t v25 = v19;
    goto LABEL_69;
  }
  uint64_t v23 = *(const void **)(v16 + 560);
  uint64_t v24 = (const void *)queueOut.value;
  *(void *)(v16 + 560) = queueOut.value;
  if (v24) {
    CFRetain(v24);
  }
  if (v23) {
    CFRelease(v23);
  }
  uint64_t v25 = 0;
LABEL_27:
  if (queueOut.value) {
    CFRelease((CFTypeRef)queueOut.value);
  }
  if (v25)
  {
    uint64_t v46 = v25;
    goto LABEL_61;
  }
  *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v51;
  *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v51[12];
  hoseSBAR_getMediaTimeForTransportTime((CMTime *)rhs, (uint64_t)v2, (uint64_t)time);
  hoseSBAR_getSynchronizerTimeForMediaTime(time, (uint64_t)v2, (__n128 *)rhs);
  CMTimeValue v58 = time[0].value;
  CMTimeFlags flags = time[0].flags;
  CMTimeScale timescale = time[0].timescale;
  if (time[0].flags)
  {
    CFTypeRef v27 = v7;
    CFTypeRef v28 = v6;
    CMTimeEpoch epoch = time[0].epoch;
    long long v30 = (char *)malloc_type_calloc(1uLL, 0x78uLL, 0x10A004079E0F624uLL);
    if (v30)
    {
      CMTimeEpoch v31 = v30;
      *((_DWORD *)v30 + 8) = 0;
      CFTypeRef v32 = CFRetain(v2);
      *((_DWORD *)v31 + 12) = v49;
      *((_OWORD *)v31 + 4) = *(_OWORD *)&v51[12];
      *(_OWORD *)(v31 + 52) = *(_OWORD *)v51;
      *((_DWORD *)v31 + 20) = v48;
      *(_OWORD *)(v31 + 84) = *(_OWORD *)v50;
      *((_OWORD *)v31 + 6) = *(_OWORD *)&v50[12];
      CMTimeValue v33 = v58;
      *(void *)CMTimeEpoch v31 = v32;
      *((void *)v31 + 1) = v33;
      *((_DWORD *)v31 + 4) = timescale;
      *((_DWORD *)v31 + 5) = flags;
      *((void *)v31 + 3) = epoch;
      *((void *)v31 + 5) = v3;
      *((void *)v31 + 14) = v47;
      ++*(_DWORD *)(DerivedStorage + 356);
      uint64_t v34 = *(const void **)(DerivedStorage + 824);
      if (v34)
      {
        CFRelease(v34);
        *(void *)(DerivedStorage + 824) = 0;
      }
      uint64_t v35 = *(const void **)(DerivedStorage + 832);
      if (v35)
      {
        CFRelease(v35);
        *(void *)(DerivedStorage + 832) = 0;
      }
      uint64_t v36 = *(void *)(DerivedStorage + 104);
      uint64_t v37 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v37) {
        uint64_t v38 = v37;
      }
      else {
        uint64_t v38 = 0;
      }
      uint64_t v39 = *(uint64_t (**)(uint64_t, CMTime *, void (*)(int, _DWORD *), char *))(v38 + 56);
      if (v39)
      {
        time[0].CMTimeValue value = v58;
        time[0].CMTimeScale timescale = timescale;
        time[0].CMTimeFlags flags = flags;
        time[0].CMTimeEpoch epoch = epoch;
        uint64_t v40 = v39(v36, time, hoseSBAR_audioEngineFlushFromTimeSBARCallback, v31);
        if (!v40)
        {
          CMBaseObjectGetDerivedStorage();
          CFTypeRef v6 = v28;
          if (FigCFEqual())
          {
            LODWORD(time[0].value) = 1;
            HIDWORD(time[0].value) = v49;
            *(_OWORD *)&time[0].CMTimeScale timescale = *(_OWORD *)v51;
            *(_OWORD *)((char *)&time[0].epoch + 4) = *(_OWORD *)&v51[12];
            time[1].CMTimeFlags flags = v48;
            *(_OWORD *)&time[1].CMTimeEpoch epoch = *(_OWORD *)v50;
            *(_OWORD *)((char *)&time[2].value + 4) = *(_OWORD *)&v50[12];
            hoseSBAR_addPendingFlushOperation((uint64_t)v2, (uint64_t)time);
          }
          time[0] = v54;
          *(CMTime *)CMTime rhs = v55;
          CMTimeSubtract(&queueOut, time, (CMTime *)rhs);
          time[0] = v55;
          CMTimeRangeMake(&v56, time, &queueOut);
          uint64_t v41 = *(void *)(DerivedStorage + 840);
          *(CMTimeRange *)&time[0].CMTimeValue value = v56;
          APSTimedInfoManagerFlushWithinTimeRange(v41, time);
          uint64_t v42 = APSTimedInfoManagerSuspend(*(void *)(DerivedStorage + 840), 0);
          CFTypeRef v7 = v27;
          if (v42)
          {
            LODWORD(v25) = v42;
          }
          else
          {
            uint64_t v42 = APSTimedInfoManagerResume(*(void *)(DerivedStorage + 840), *(const void **)(DerivedStorage + 120));
            LODWORD(v25) = v42;
            if (!v42) {
              goto LABEL_45;
            }
          }
          APSLogErrorAt(v42);
LABEL_45:
          char v43 = 0;
          if (!v6) {
            goto LABEL_51;
          }
LABEL_50:
          CFRelease(v6);
          goto LABEL_51;
        }
        uint64_t v25 = v40;
      }
      else
      {
        uint64_t v44 = CMBaseObjectGetDerivedStorage();
        uint64_t v25 = 4294954514;
        *((_DWORD *)v31 + 8) = -12782;
        dispatch_async_f(*(dispatch_queue_t *)(v44 + 280), v31, (dispatch_function_t)hoseSBAR_audioEngineFlushFromTimeSBARCallbackInternal);
      }
      APSLogErrorAt(v25);
      char v43 = 0;
    }
    else
    {
      APSLogErrorAt(0);
      LODWORD(v25) = -72330;
      char v43 = 1;
    }
    CFTypeRef v6 = v28;
    CFTypeRef v7 = v27;
    if (!v6) {
      goto LABEL_51;
    }
    goto LABEL_50;
  }
  APSLogErrorAt(0);
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  LODWORD(v25) = 0;
LABEL_74:
  char v43 = 1;
  if (v6) {
    goto LABEL_50;
  }
LABEL_51:
  if (v7) {
    CFRelease(v7);
  }
  char v45 = v43 ^ 1;
  if (!v3) {
    char v45 = 1;
  }
  if ((v45 & 1) == 0)
  {
    *(_OWORD *)&time[0].CMTimeValue value = *(_OWORD *)v51;
    *(_OWORD *)&time[0].CMTimeFlags flags = *(_OWORD *)&v51[12];
    *(_OWORD *)CMTime rhs = *(_OWORD *)v50;
    *(_OWORD *)&rhs[12] = *(_OWORD *)&v50[12];
    hoseSBAR_callAudioHoseFlushWithinSampleRangeCompletionHandlerInternal(v2, v3, v49, time, v48, rhs, v25, v47);
  }
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBAR_addPendingFlushOperation(uint64_t a1, uint64_t a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t result = (uint64_t)malloc_type_calloc(1uLL, 0x58uLL, 0x10A00403B7FD5E2uLL);
  if (result)
  {
    *(_OWORD *)(result + 16) = *(_OWORD *)a2;
    long long v5 = *(_OWORD *)(a2 + 16);
    long long v6 = *(_OWORD *)(a2 + 32);
    long long v7 = *(_OWORD *)(a2 + 48);
    *(_DWORD *)(result + 80) = *(_DWORD *)(a2 + 64);
    *(_OWORD *)(result + 48) = v6;
    *(_OWORD *)(result + 64) = v7;
    *(_OWORD *)(result + 32) = v5;
    long long v8 = *(uint64_t **)(DerivedStorage + 608);
    *(void *)uint64_t result = 0;
    *(void *)(result + 8) = v8;
    uint64_t *v8 = result;
    *(void *)(DerivedStorage + 608) = result;
  }
  else if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90)
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      return LogPrintF();
    }
  }
  return result;
}

void hoseSBAR_callAudioHoseFlushWithinSampleRangeCompletionHandlerInternal(const void *a1, uint64_t a2, int a3, _OWORD *a4, int a5, _OWORD *a6, int a7, uint64_t a8)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v23 = 0;
  if (a2)
  {
    uint64_t v17 = DerivedStorage;
    v18[0] = CFRetain(a1);
    v18[1] = a2;
    int v19 = a3;
    *(_OWORD *)uint64_t v20 = *a4;
    *(_OWORD *)&v20[12] = *(_OWORD *)((char *)a4 + 12);
    int v21 = a5;
    *(_OWORD *)uint64_t v22 = *a6;
    *(_OWORD *)&v22[12] = *(_OWORD *)((char *)a6 + 12);
    LODWORD(v23) = a7;
    uint64_t v24 = a8;
    APSDispatchAsyncFHelper(*(NSObject **)(v17 + 8), (uint64_t)hoseSBAR_callAudioEngineFlushWithinSampleRangeCompletionHandlerCaller, v18, 0x60uLL);
  }
}

void hoseSBAR_callAudioEngineFlushWithinSampleRangeCompletionHandlerCaller(uint64_t a1)
{
  CFTypeRef v2 = *(CFTypeRef *)a1;
  uint64_t v3 = *(void (**)(CFTypeRef, uint64_t, _OWORD *, uint64_t, _OWORD *, uint64_t, uint64_t))(a1 + 8);
  uint64_t v5 = *(unsigned int *)(a1 + 16);
  uint64_t v6 = *(unsigned int *)(a1 + 48);
  uint64_t v7 = *(unsigned int *)(a1 + 80);
  uint64_t v8 = *(void *)(a1 + 88);
  v10[0] = *(_OWORD *)(a1 + 20);
  *(_OWORD *)((char *)v10 + 12) = *(_OWORD *)(a1 + 32);
  v9[0] = *(_OWORD *)(a1 + 52);
  *(_OWORD *)((char *)v9 + 12) = *(_OWORD *)(a1 + 64);
  v3(v2, v5, v10, v6, v9, v7, v8);
  CFRelease(*(CFTypeRef *)a1);
}

void hoseSBAR_audioEngineFlushFromTimeSBARCallbackInternal(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(_OWORD *)CMTime time = *(_OWORD *)(a1 + 52);
  *(_OWORD *)&time[12] = *(_OWORD *)(a1 + 64);
  CFTypeRef v3 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
  *(_OWORD *)CMTime time = *(_OWORD *)(a1 + 84);
  *(_OWORD *)&time[12] = *(_OWORD *)(a1 + 96);
  CFTypeRef v4 = APSAudioTransportTimeCopyDebugDesc((uint64_t)time);
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    *(_OWORD *)CMTime time = *(_OWORD *)(a1 + 8);
    *(void *)&time[16] = *(void *)(a1 + 24);
    CMTimeGetSeconds((CMTime *)time);
    *(_OWORD *)CMTime time = *(_OWORD *)(DerivedStorage + 328);
    *(void *)&time[16] = *(void *)(DerivedStorage + 344);
    CMTimeGetSeconds((CMTime *)time);
    LogPrintF();
  }
  uint64_t v5 = (_OWORD *)(a1 + 52);
  --*(_DWORD *)(DerivedStorage + 356);
  int v6 = *(_DWORD *)(a1 + 32);
  if (!v6)
  {
    *(_OWORD *)CMTime time1 = *(_OWORD *)(a1 + 8);
    *(void *)&time1[16] = *(void *)(a1 + 24);
    CMTime time2 = *(CMTime *)(DerivedStorage + 328);
    CMTimeMinimum((CMTime *)time, (CMTime *)time1, &time2);
    *(_OWORD *)(DerivedStorage + 328) = *(_OWORD *)time;
    *(void *)(DerivedStorage + 344) = *(void *)&time[16];
    uint64_t v7 = *(void **)a1;
    *(_OWORD *)CMTime time = *v5;
    *(_OWORD *)&time[12] = *(_OWORD *)(a1 + 64);
    hoseSBAR_updateRTPRolloverStateOnFlushFromTransportTime((uint64_t)v7, time);
    int v6 = *(_DWORD *)(a1 + 32);
  }
  uint64_t v8 = *(const void **)a1;
  uint64_t v9 = *(void *)(a1 + 40);
  int v10 = *(_DWORD *)(a1 + 48);
  int v11 = *(_DWORD *)(a1 + 80);
  uint64_t v12 = *(void *)(a1 + 112);
  *(_OWORD *)CMTime time = *v5;
  *(_OWORD *)&time[12] = *(_OWORD *)(a1 + 64);
  *(_OWORD *)CMTime time1 = *(_OWORD *)(a1 + 84);
  *(_OWORD *)&time1[12] = *(_OWORD *)(a1 + 96);
  hoseSBAR_callAudioHoseFlushWithinSampleRangeCompletionHandlerInternal(v8, v9, v10, time, v11, time1, v6, v12);
  hoseSBAR_maybeTriggerPullAudioBBuffs(*(void **)a1);
  if (v3) {
    CFRelease(v3);
  }
  if (v4) {
    CFRelease(v4);
  }
  CFRelease(*(CFTypeRef *)a1);
  free((void *)a1);
}

void hoseSBAR_audioEngineFlushFromTimeSBARCallback(int a1, _DWORD *a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  a2[8] = a1;
  uint64_t v5 = *(NSObject **)(DerivedStorage + 280);

  dispatch_async_f(v5, a2, (dispatch_function_t)hoseSBAR_audioEngineFlushFromTimeSBARCallbackInternal);
}

uint64_t hoseSBAR_bufferQueuePopBackAfterTimeCallback(opaqueCMSampleBuffer *a1, uint64_t a2)
{
  CMSampleBufferRef sampleBufferOut = 0;
  memset(&v17, 0, sizeof(v17));
  memset(&v16, 0, sizeof(v16));
  memset(&v15, 0, sizeof(v15));
  CMTime v14 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  CMSampleBufferGetOutputPresentationTimeStamp(&v18, a1);
  CMTime time1 = v18;
  CMTime time2 = *(CMTime *)(a2 + 8);
  if (CMTimeCompare(&time1, &time2) > 0) {
    goto LABEL_4;
  }
  CMSampleBufferGetOutputDuration(&v17, a1);
  CMTime time1 = v18;
  CMTime time2 = v17;
  CMTimeAdd(&v16, &time1, &time2);
  CMTime time1 = *(CMTime *)(a2 + 8);
  CMTime time2 = v16;
  if (CMTimeCompare(&time1, &time2) > 0)
  {
    CMBufferQueueEnqueue(*(CMBufferQueueRef *)a2, a1);
LABEL_4:
    CFDictionaryRef v4 = 0;
    goto LABEL_11;
  }
  CFAllocatorRef v5 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t v6 = CMSampleBufferCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a1, &sampleBufferOut);
  if (v6)
  {
    APSLogErrorAt(v6);
    goto LABEL_4;
  }
  CMTime time1 = v16;
  CMTime time2 = *(CMTime *)(a2 + 8);
  CMTimeSubtract(&v15, &time1, &time2);
  CFStringRef v7 = (const __CFString *)*MEMORY[0x1E4F1F300];
  CFDictionaryRef v8 = (const __CFDictionary *)CMGetAttachment(sampleBufferOut, (CFStringRef)*MEMORY[0x1E4F1F300], 0);
  if (v8)
  {
    CMTimeMakeFromDictionary(&v14, v8);
    CMTime time1 = v15;
    CMTime time2 = v14;
    CMTimeAdd(&v11, &time1, &time2);
    CMTime time1 = v17;
    if ((CMTimeCompare(&v11, &time1) & 0x80000000) == 0)
    {
      CMTime time2 = v15;
      CMTime v10 = v17;
      CMTimeAdd(&time1, &time2, &v10);
      CMTime v15 = time1;
    }
  }
  CMTime time1 = v15;
  CFDictionaryRef v4 = CMTimeCopyAsDictionary(&time1, v5);
  if (v4)
  {
    CMSetAttachment(sampleBufferOut, v7, v4, 1u);
    CMBufferQueueEnqueue(*(CMBufferQueueRef *)a2, sampleBufferOut);
  }
  else
  {
    APSLogErrorAt(0);
  }
LABEL_11:
  if (sampleBufferOut) {
    CFRelease(sampleBufferOut);
  }
  if (v4) {
    CFRelease(v4);
  }
  return 0;
}

uint64_t hoseSBAR_audioHoseFlush(const void *a1, int a2, _OWORD *a3, uint64_t a4, uint64_t a5)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a1) {
    CFTypeRef v11 = CFRetain(a1);
  }
  else {
    CFTypeRef v11 = 0;
  }
  CFTypeRef v13 = v11;
  int v14 = a2;
  *(_OWORD *)CMTime v15 = *a3;
  *(_OWORD *)&unsigned char v15[12] = *(_OWORD *)((char *)a3 + 12);
  uint64_t v16 = a4;
  uint64_t v17 = a5;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseFlushCallbackDispatchInternal, &v13, 0x38uLL);
  return 0;
}

void hoseSBAR_audioHoseFlushCallbackDispatchInternal(uint64_t a1)
{
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  uint64_t v5 = *(void *)(a1 + 40);
  uint64_t v4 = *(void *)(a1 + 48);
  *(_OWORD *)CFTypeRef v28 = *(_OWORD *)(a1 + 12);
  *(_OWORD *)&v28[12] = *(_OWORD *)(a1 + 24);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  int v7 = *(_DWORD *)(DerivedStorage + 376);
  *(_OWORD *)uint64_t v29 = *(_OWORD *)v28;
  *(_OWORD *)&v29[12] = *(_OWORD *)&v28[12];
  CFTypeRef v8 = APSAudioTransportTimeCopyDebugDesc((uint64_t)v29);
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(unsigned char *)DerivedStorage)
  {
    APSLogErrorAt(0);
    LODWORD(v17) = -72332;
    if (!v8) {
      goto LABEL_38;
    }
LABEL_37:
    CFRelease(v8);
    goto LABEL_38;
  }
  if (v7 == 1)
  {
    uint64_t v9 = *(void *)(DerivedStorage + 112);
    uint64_t v10 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v10) {
      uint64_t v11 = v10;
    }
    else {
      uint64_t v11 = 0;
    }
    uint64_t v12 = *(uint64_t (**)(uint64_t, unsigned char *, double))(v11 + 24);
    if (v12)
    {
      *(_OWORD *)uint64_t v29 = *MEMORY[0x1E4F1F9F8];
      *(void *)&v29[16] = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
      uint64_t v13 = v12(v9, v29, 0.0);
      if (!v13)
      {
        hoseSBAR_waitForTimebaseRate(0.0);
        hoseSBAR_updateSynchronizerState((uint64_t)v2, 0);
        goto LABEL_13;
      }
      uint64_t v17 = v13;
    }
    else
    {
      uint64_t v17 = 4294954514;
    }
    uint64_t v18 = v17;
    goto LABEL_17;
  }
LABEL_13:
  *(unsigned char *)(DerivedStorage + 353) = 0;
  uint64_t v14 = *(void *)(DerivedStorage + 104);
  uint64_t v15 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v15) {
    uint64_t v16 = v15;
  }
  else {
    uint64_t v16 = 0;
  }
  int v19 = *(void (**)(uint64_t))(v16 + 24);
  if (v19) {
    v19(v14);
  }
  *(unsigned char *)(DerivedStorage + 568) = 0;
  uint64_t v18 = CMBufferQueueReset(*(CMBufferQueueRef *)(DerivedStorage + 560));
  if (v18)
  {
    LODWORD(v17) = v18;
    goto LABEL_17;
  }
  if (v7 == 1) {
    hoseSBAR_enqueueIntoSBARPrimingSBufIfNecessary((uint64_t)v2);
  }
  CMBaseObjectGetDerivedStorage();
  if (FigCFEqual())
  {
    memset(v29, 0, 36);
    *(_DWORD *)&v29[36] = v3;
    *(_OWORD *)&v29[40] = *(_OWORD *)v28;
    *(_OWORD *)&v29[52] = *(_OWORD *)&v28[12];
    hoseSBAR_addPendingFlushOperation((uint64_t)v2, (uint64_t)v29);
  }
  uint64_t v18 = APSTimedInfoManagerFlush(*(void *)(DerivedStorage + 840));
  if (v18)
  {
    LODWORD(v17) = v18;
    goto LABEL_17;
  }
  uint64_t v18 = APSTimedInfoManagerSuspend(*(void *)(DerivedStorage + 840), 0);
  if (v18)
  {
    LODWORD(v17) = v18;
    goto LABEL_17;
  }
  uint64_t v18 = APSTimedInfoManagerResume(*(void *)(DerivedStorage + 840), *(const void **)(DerivedStorage + 120));
  if (v18)
  {
    LODWORD(v17) = v18;
LABEL_17:
    APSLogErrorAt(v18);
    if (!v8) {
      goto LABEL_38;
    }
    goto LABEL_37;
  }
  uint64_t v20 = *(const void **)(DerivedStorage + 360);
  if (v20)
  {
    CFRelease(v20);
    *(void *)(DerivedStorage + 360) = 0;
  }
  CMBufferQueueReset(*(CMBufferQueueRef *)(DerivedStorage + 552));
  *(void *)(DerivedStorage + 440) = 0x100000000;
  int v21 = (long long *)MEMORY[0x1E4F1F9F8];
  *(_OWORD *)(DerivedStorage + 424) = kAPSNetworkTimeInvalid;
  long long v22 = *v21;
  *(_OWORD *)(DerivedStorage + 448) = *v21;
  uint64_t v23 = *((void *)v21 + 2);
  *(void *)(DerivedStorage + 464) = v23;
  *(_OWORD *)(DerivedStorage + 472) = v22;
  *(void *)(DerivedStorage + 488) = v23;
  *(_OWORD *)(DerivedStorage + 496) = v22;
  *(void *)(DerivedStorage + 512) = v23;
  *(void *)(DerivedStorage + 536) = v23;
  *(_OWORD *)(DerivedStorage + 520) = v22;
  *(void *)(DerivedStorage + 320) = v23;
  *(_OWORD *)(DerivedStorage + 304) = v22;
  *(void *)(DerivedStorage + 344) = v23;
  *(_OWORD *)(DerivedStorage + 328) = v22;
  *(_DWORD *)(DerivedStorage + 628) = 0;
  *(void *)(DerivedStorage + 632) = 0;
  uint64_t v24 = *(const void **)(DerivedStorage + 824);
  if (v24)
  {
    CFRelease(v24);
    *(void *)(DerivedStorage + 824) = 0;
  }
  uint64_t v25 = *(const void **)(DerivedStorage + 832);
  if (v25)
  {
    CFRelease(v25);
    *(void *)(DerivedStorage + 832) = 0;
  }
  CFBagRemoveAllValues(*(CFMutableBagRef *)(DerivedStorage + 768));
  CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(DerivedStorage + 776));
  *(void *)(DerivedStorage + 784) = 0;
  uint64_t v26 = CMBaseObjectGetDerivedStorage();
  LODWORD(v17) = 0;
  *(void *)(v26 + 616) = 0;
  *(unsigned char *)(v26 + 624) = 0;
  *(unsigned char *)(DerivedStorage + 352) = 0;
  if (v8) {
    goto LABEL_37;
  }
LABEL_38:
  if (v5)
  {
    uint64_t v27 = CMBaseObjectGetDerivedStorage();
    *(void *)&v29[48] = 0;
    *(void *)uint64_t v29 = CFRetain(v2);
    *(void *)&v29[8] = v5;
    *(_DWORD *)&v29[16] = v3;
    *(_OWORD *)&v29[20] = *(_OWORD *)v28;
    *(_OWORD *)&v29[32] = *(_OWORD *)&v28[12];
    *(_DWORD *)&v29[48] = v17;
    *(void *)&v29[56] = v4;
    APSDispatchAsyncFHelper(*(NSObject **)(v27 + 8), (uint64_t)hoseSBAR_callAudioHoseFlushCompletionHandlerCaller, v29, 0x40uLL);
  }
  CFRelease(*(CFTypeRef *)a1);
}

void hoseSBAR_callAudioHoseFlushCompletionHandlerCaller(uint64_t a1)
{
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(void (**)(CFTypeRef, uint64_t, _OWORD *, uint64_t, uint64_t))(a1 + 8);
  uint64_t v5 = *(unsigned int *)(a1 + 16);
  uint64_t v6 = *(unsigned int *)(a1 + 48);
  uint64_t v7 = *(void *)(a1 + 56);
  v8[0] = *(_OWORD *)(a1 + 20);
  *(_OWORD *)((char *)v8 + 12) = *(_OWORD *)(a1 + 32);
  v3(v2, v5, v8, v6, v7);
  CFRelease(*(CFTypeRef *)a1);
}

uint64_t hoseSBAR_audioHoseTimeAnnounce(const void *a1, int a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v11 = 0;
  if (a1) {
    CFTypeRef v7 = CFRetain(a1);
  }
  else {
    CFTypeRef v7 = 0;
  }
  CFTypeRef v10 = v7;
  LODWORD(v11) = a2;
  if (a3) {
    CFTypeRef v8 = CFRetain(a3);
  }
  else {
    CFTypeRef v8 = 0;
  }
  CFTypeRef v12 = v8;
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_audioHoseTimeAnnounceDispatchInternal, &v10, 0x18uLL);
  return 0;
}

void hoseSBAR_audioHoseTimeAnnounceDispatchInternal(uint64_t a1)
{
  CFTypeRef v2 = *(CFTypeRef *)a1;
  int v3 = *(_DWORD *)(a1 + 8);
  uint64_t v4 = *(OpaqueCMBlockBuffer **)(a1 + 16);
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  CMTime v43 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  CMTime v42 = v43;
  if (*DerivedStorage) {
    goto LABEL_55;
  }
  uint64_t v6 = DerivedStorage;
  if (DerivedStorage[352]) {
    goto LABEL_55;
  }
  if (v3 > 1952542317)
  {
    if (v3 != 1952542318)
    {
      int v7 = 1953526896;
LABEL_8:
      if (v3 != v7)
      {
        if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
          && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
        {
          goto LABEL_40;
        }
        goto LABEL_55;
      }
      dataPointerOut.CMTimeValue value = 0;
      v41.CMTimeValue value = 0;
      uint64_t DataPointer = CMBlockBufferGetDataPointer(v4, 0, 0, 0, (char **)&dataPointerOut);
      if (!DataPointer)
      {
        unint64_t v9 = *(void *)(dataPointerOut.value + 4);
        unint64_t v10 = *(void *)(dataPointerOut.value + 16);
        uint64_t v11 = *((void *)v6 + 8);
        uint64_t v12 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v12) {
          uint64_t v13 = v12;
        }
        else {
          uint64_t v13 = 0;
        }
        uint64_t v20 = *(unsigned int (**)(uint64_t, CMTime *, CMTime *))(v13 + 24);
        if (!v20
          || (double v21 = (double)bswap64(v9) / 1000000000.0,
              time.CMTimeValue value = bswap64(v10),
              *(void *)&time.CMTimeScale timescale = vcvtd_n_u64_f64(v21 - floor(v21), 0x40uLL),
              time.CMTimeEpoch epoch = vcvtmd_s64_f64(v21),
              v20(v11, &time, &v41)))
        {
          if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
            && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
        }
        int64_t v24 = UpTicksToNanoseconds();
        CMTimeMake(&v42, v24, 1000000000);
        unsigned int v25 = bswap32(*(_DWORD *)dataPointerOut.value);
        goto LABEL_37;
      }
LABEL_54:
      APSLogErrorAt(DataPointer);
      goto LABEL_55;
    }
  }
  else if (v3 != 1950436942)
  {
    int v7 = 1951421520;
    goto LABEL_8;
  }
  dataPointerOut.CMTimeValue value = 0;
  v41.CMTimeValue value = 0;
  uint64_t DataPointer = CMBlockBufferGetDataPointer(v4, 0, 0, 0, (char **)&dataPointerOut);
  if (DataPointer) {
    goto LABEL_54;
  }
  unsigned int v14 = *(_DWORD *)dataPointerOut.value;
  unsigned int v15 = *(_DWORD *)(dataPointerOut.value + 4);
  unsigned int v16 = *(_DWORD *)(dataPointerOut.value + 8);
  uint64_t v17 = *((void *)v6 + 8);
  uint64_t v18 = *(void *)(CMBaseObjectGetVTable() + 16);
  if (v18) {
    uint64_t v19 = v18;
  }
  else {
    uint64_t v19 = 0;
  }
  long long v22 = *(unsigned int (**)(uint64_t, CMTime *, CMTime *))(v19 + 24);
  if (!v22
    || (double v23 = (double)bswap32(v15) + (double)bswap32(v16) * 2.32830644e-10 + -2208988800.0,
        time.CMTimeValue value = 0,
        *(void *)&time.CMTimeScale timescale = vcvtd_n_u64_f64(v23 - floor(v23), 0x40uLL),
        time.CMTimeEpoch epoch = vcvtmd_s64_f64(v23),
        v22(v17, &time, &v41)))
  {
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  unsigned int v25 = bswap32(v14);
  int64_t v26 = UpTicksToNanoseconds();
  CMTimeMake(&v42, v26, 1000000000);
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    CMTime time = v42;
    CMTimeGetSeconds(&time);
    LogPrintF();
  }
LABEL_37:
  hoseSBAR_updateRTPRolloverStateAssumingIncreasingRTPTimes((uint64_t)v2, v25);
  hoseSBAR_getMediaTimeForRTPTime(&v43, (uint64_t)v2, v25);
  *(CMTime *)(v6 + 448) = v42;
  long long v27 = *(_OWORD *)&v43.value;
  *(_OWORD *)(v6 + 472) = *(_OWORD *)&v43.value;
  CMTimeEpoch epoch = v43.epoch;
  *((void *)v6 + 61) = v43.epoch;
  uint64_t v29 = MEMORY[0x1E4F1FA48];
  *((_OWORD *)v6 + 31) = *MEMORY[0x1E4F1FA48];
  *((void *)v6 + 64) = *(void *)(v29 + 16);
  *(_OWORD *)&dataPointerOut.CMTimeValue value = v27;
  dataPointerOut.CMTimeEpoch epoch = epoch;
  hoseSBAR_getSynchronizerTimeForMediaTime(&time, (uint64_t)v2, (__n128 *)&dataPointerOut);
  CMTimeFlags flags = time.flags;
  if (time.flags)
  {
    CMTimeValue value = time.value;
    CMTimeScale timescale = time.timescale;
    CMTimeEpoch v33 = time.epoch;
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      time.CMTimeValue value = value;
      time.CMTimeScale timescale = timescale;
      time.CMTimeFlags flags = flags;
      time.CMTimeEpoch epoch = v33;
      CMTimeGetSeconds(&time);
      CMTime time = v42;
      CMTimeGetSeconds(&time);
      CMClockRef HostTimeClock = CMClockGetHostTimeClock();
      CMClockGetTime(&v41, HostTimeClock);
      CMTimeGetSeconds(&v41);
      LogPrintF();
    }
    uint64_t v35 = *((void *)v6 + 14);
    CMTime v40 = v42;
    uint64_t v36 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v36) {
      uint64_t v37 = v36;
    }
    else {
      uint64_t v37 = 0;
    }
    uint64_t v38 = *(uint64_t (**)(uint64_t, CMTime *, CMTime *, float))(v37 + 56);
    if (v38)
    {
      time.CMTimeValue value = value;
      time.CMTimeScale timescale = timescale;
      time.CMTimeFlags flags = flags;
      time.CMTimeEpoch epoch = v33;
      CMTime dataPointerOut = v40;
      uint64_t DataPointer = v38(v35, &time, &dataPointerOut, 1.0);
      if (!DataPointer)
      {
        hoseSBAR_waitForTimebaseRate(1.0);
        CMTimebaseSetTimerDispatchSourceToFireImmediately(*((CMTimebaseRef *)v6 + 15), *((dispatch_source_t *)v6 + 68));
        hoseSBAR_updateSynchronizerState((uint64_t)v2, 1);
        v6[352] = 1;
        goto LABEL_55;
      }
    }
    else
    {
      uint64_t DataPointer = 4294954514;
    }
    goto LABEL_54;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
LABEL_40:
    LogPrintF();
  }
LABEL_55:
  if (*(void *)a1) {
    CFRelease(*(CFTypeRef *)a1);
  }
  uint64_t v39 = *(const void **)(a1 + 16);
  if (v39) {
    CFRelease(v39);
  }
}

uint64_t hoseSBAR_audioHoseSendAudio(const void *a1, int a2, const void *a3)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2 == 1734700576)
  {
    uint64_t v7 = DerivedStorage;
    if (a1) {
      CFTypeRef v8 = CFRetain(a1);
    }
    else {
      CFTypeRef v8 = 0;
    }
    v11[0] = v8;
    if (a3) {
      CFTypeRef v9 = CFRetain(a3);
    }
    else {
      CFTypeRef v9 = 0;
    }
    v11[1] = v9;
    APSDispatchAsyncFHelper(*(NSObject **)(v7 + 280), (uint64_t)hoseSBAR_hoseSendAudioDataDispatchInternal, v11, 0x10uLL);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960561;
  }
}

void hoseSBAR_hoseSendAudioDataDispatchInternal(uint64_t a1)
{
  CFTypeRef v3 = *(CFTypeRef *)a1;
  CFTypeRef v2 = *(const void **)(a1 + 8);
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  v6[0] = v3;
  v6[1] = v2;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!*(unsigned char *)DerivedStorage)
  {
    CFRetain(v3);
    CFRetain(v2);
    APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_sbarEnqueueSingleAudioBBuffDispatchFunction, v6, 0x10uLL);
  }
  CFRelease(*(CFTypeRef *)a1);
  uint64_t v5 = *(const void **)(a1 + 8);
  if (v5) {
    CFRelease(v5);
  }
}

void hoseSBAR_sbarEnqueueSingleAudioBBuffDispatchFunction(uint64_t a1)
{
  if (!*(unsigned char *)(CMBaseObjectGetDerivedStorage() + 242)
    && (uint64_t started = hoseSBAR_startTheSynchronizerIfNecessary(*(const void **)a1, 1), started)
    || (uint64_t started = hoseSBAR_enqueueAudioBBuffToInternalBuffersInternal(*(void *)a1, *(void *)(a1 + 8)),
        started)
    || (uint64_t started = hoseSBAR_fillSBARToHighWater(*(void *)a1), started))
  {
    APSLogErrorAt(started);
  }
  if (*(void *)a1) {
    CFRelease(*(CFTypeRef *)a1);
  }
  CFTypeRef v3 = *(const void **)(a1 + 8);
  if (v3)
  {
    CFRelease(v3);
  }
}

__CFString *hoseSBAR_audioHoseProtocolCopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"APSEndpointStreamAudioHoseSBAR <APSEndpointStreamAudioHoseProtocol> on <%p>", a1);
  return Mutable;
}

uint64_t hoseSBAR_SetProperty(const void *a1, const void *a2, const void *a3)
{
  uint64_t v25 = 0;
  int64_t v26 = &v25;
  uint64_t v27 = 0x2000000000;
  int v28 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(unsigned char *)DerivedStorage)
  {
    APSLogErrorAt(0);
    double v21 = v26;
    int v22 = -72332;
    goto LABEL_50;
  }
  if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_IsTimelineEstablished")) {
    goto LABEL_7;
  }
  if (CFEqual(a2, @"VolumeLinear"))
  {
    if (a3)
    {
      CFTypeID v9 = CFGetTypeID(a3);
      if (v9 == CFNumberGetTypeID())
      {
        uint64_t v10 = *(void *)(DerivedStorage + 104);
        uint64_t v11 = *(void *)(CMBaseObjectGetVTable() + 8);
        if (v11) {
          uint64_t v12 = v11;
        }
        else {
          uint64_t v12 = 0;
        }
        unsigned int v15 = *(uint64_t (**)(uint64_t, void, const void *))(v12 + 56);
        if (v15)
        {
          uint64_t v16 = v15(v10, *MEMORY[0x1E4F34648], a3);
          *((_DWORD *)v26 + 6) = v16;
          if (!v16) {
            goto LABEL_7;
          }
        }
        else
        {
          uint64_t v16 = 4294954514;
          *((_DWORD *)v26 + 6) = -12782;
        }
LABEL_27:
        APSLogErrorAt(v16);
        goto LABEL_7;
      }
    }
    goto LABEL_52;
  }
  if (CFEqual(a2, @"BufferedClientAudioSessionID"))
  {
    if (!a3 || (CFTypeID v13 = CFGetTypeID(a3), v13 == CFNumberGetTypeID()))
    {
      if (!FigCFEqual())
      {
        if (a1) {
          CFRetain(a1);
        }
        if (a3) {
          CFRetain(a3);
        }
        unsigned int v14 = *(NSObject **)(DerivedStorage + 280);
        block[0] = MEMORY[0x1E4F143A8];
        block[1] = 0x40000000;
        block[2] = __hoseSBAR_SetProperty_block_invoke;
        block[3] = &unk_1E6898148;
        block[4] = &v25;
        void block[5] = DerivedStorage;
        void block[6] = a3;
        block[7] = a1;
        dispatch_async(v14, block);
      }
      goto LABEL_7;
    }
LABEL_52:
    APSLogErrorAt(0);
    double v21 = v26;
    int v22 = -72331;
    goto LABEL_50;
  }
  if (!CFEqual(a2, @"AudioProcessingTapID"))
  {
    if (CFEqual(a2, @"MuteStream"))
    {
      uint64_t v16 = FigSampleBufferAudioRendererSetProperty(*(void *)(DerivedStorage + 104), *MEMORY[0x1E4F34628], (uint64_t)a3);
      *((_DWORD *)v26 + 6) = v16;
      if (!v16) {
        goto LABEL_7;
      }
      goto LABEL_27;
    }
    if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
      && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    double v21 = v26;
    int v22 = -12784;
LABEL_50:
    *((_DWORD *)v21 + 6) = v22;
    goto LABEL_7;
  }
  if (a3)
  {
    CFTypeID v17 = CFGetTypeID(a3);
    if (v17 != CFNumberGetTypeID()) {
      goto LABEL_52;
    }
  }
  if (a1) {
    CFTypeRef v18 = CFRetain(a1);
  }
  else {
    CFTypeRef v18 = 0;
  }
  v23[0] = v18;
  if (a3) {
    CFTypeRef v19 = CFRetain(a3);
  }
  else {
    CFTypeRef v19 = 0;
  }
  v23[1] = v19;
  pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
  APSDispatchAsyncFHelper(*(NSObject **)(DerivedStorage + 280), (uint64_t)hoseSBAR_setAudioProcessingTapIDInternal, v23, 0x10uLL);
  uint64_t v20 = *(const void **)(DerivedStorage + 272);
  *(void *)(DerivedStorage + 272) = a3;
  if (a3) {
    CFRetain(a3);
  }
  if (v20) {
    CFRelease(v20);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
LABEL_7:
  uint64_t v7 = *((unsigned int *)v26 + 6);
  _Block_object_dispose(&v25, 8);
  return v7;
}

uint64_t FigSampleBufferAudioRendererSetProperty(uint64_t a1, uint64_t a2, uint64_t a3)
{
  uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v6) {
    uint64_t v7 = v6;
  }
  else {
    uint64_t v7 = 0;
  }
  CFTypeRef v8 = *(uint64_t (**)(uint64_t, uint64_t, uint64_t))(v7 + 56);
  if (!v8) {
    return 4294954514;
  }

  return v8(a1, a2, a3);
}

void hoseSBAR_setAudioProcessingTapIDInternal(uint64_t a1)
{
  uint64_t v2 = *(void *)(CMBaseObjectGetDerivedStorage() + 104);
  uint64_t v3 = *(void *)(a1 + 8);
  uint64_t v4 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v4) {
    uint64_t v5 = v4;
  }
  else {
    uint64_t v5 = 0;
  }
  uint64_t v6 = *(uint64_t (**)(uint64_t, void, uint64_t))(v5 + 56);
  if (v6)
  {
    uint64_t v7 = v6(v2, *MEMORY[0x1E4F345E0], v3);
    if (!v7) {
      goto LABEL_13;
    }
  }
  else
  {
    uint64_t v7 = 4294954514;
  }
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 90
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  APSLogErrorAt(v7);
LABEL_13:
  if (*(void *)a1) {
    CFRelease(*(CFTypeRef *)a1);
  }
  CFTypeRef v8 = *(const void **)(a1 + 8);
  if (v8)
  {
    CFRelease(v8);
  }
}

uint64_t hoseSBAR_CopyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, void *a4)
{
  uint64_t v29 = *MEMORY[0x1E4F143B8];
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  long long v27 = 0u;
  long long v28 = 0u;
  long long v25 = 0u;
  long long v26 = 0u;
  long long v23 = 0u;
  long long v24 = 0u;
  *(_OWORD *)cStr = 0u;
  long long v22 = 0u;
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(unsigned char *)DerivedStorage)
  {
    APSLogErrorAt(0);
    return 4294894964;
  }
  if (!a2 || !a4)
  {
    APSLogErrorAt(0);
    return 4294894965;
  }
  if (!CFEqual(a2, @"VolumeLinear"))
  {
    if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_AudioBufferSize"))
    {
      CFNumberRef v11 = CFNumberCreate(a3, kCFNumberSInt32Type, (const void *)(DerivedStorage + 56));
      *a4 = v11;
      if (!v11)
      {
        uint64_t v12 = 4294894966;
        goto LABEL_20;
      }
      return 0;
    }
    if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_Name"))
    {
      StringCFNumberRef Value = *(const void **)(DerivedStorage + 16);
      if (!StringValue)
      {
LABEL_25:
        uint64_t v12 = 0;
        *a4 = StringValue;
        return v12;
      }
LABEL_24:
      StringCFNumberRef Value = CFRetain(StringValue);
      goto LABEL_25;
    }
    if (CFEqual(a2, @"Model"))
    {
      cStr[0] = 0;
      GetDeviceModelString();
LABEL_30:
      CFStringRef v16 = CFStringCreateWithCString(a3, cStr, 0x8000100u);
      uint64_t v12 = (uint64_t)v16;
      if (!v16)
      {
        *a4 = 0;
        return v12;
      }
      *a4 = CFRetain(v16);
      CFRelease((CFTypeRef)v12);
      return 0;
    }
    if (CFEqual(a2, @"OSBuildVersion"))
    {
      cStr[0] = 0;
      GetSystemBuildVersionString();
      goto LABEL_30;
    }
    if (CFEqual(a2, @"BufferingPriority"))
    {
      pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
      *a4 = CFNumberCreateInt64();
      pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
      if (!*a4)
      {
        uint64_t v12 = 4294894966;
        CFNumberRef v11 = 0;
        goto LABEL_20;
      }
      return 0;
    }
    if (CFEqual(a2, @"Rate"))
    {
      pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
      *a4 = CFNumberCreateInt64();
      pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
      if (!*a4)
      {
        uint64_t v12 = 4294894966;
        CFNumberRef v11 = 0;
        goto LABEL_20;
      }
      return 0;
    }
    if (CFEqual(a2, (CFTypeRef)*MEMORY[0x1E4F21368]))
    {
      StringCFNumberRef Value = *(const void **)(DerivedStorage + 24);
      if (!StringValue) {
        goto LABEL_25;
      }
      goto LABEL_24;
    }
    if (CFEqual(a2, @"ClusterUUID"))
    {
      StringCFNumberRef Value = (const void *)FigCFDictionaryGetStringValue();
      if (!StringValue) {
        goto LABEL_25;
      }
      goto LABEL_24;
    }
    if (CFEqual(a2, @"IsClusterLeader"))
    {
      StringCFNumberRef Value = (const void *)FigCFDictionaryGetBooleanValue();
      if (!StringValue) {
        goto LABEL_25;
      }
      goto LABEL_24;
    }
    if (CFEqual(a2, @"ClusterType"))
    {
      NumberCFNumberRef Value = (const void *)FigCFDictionaryGetNumberValue();
      if (!NumberValue)
      {
        *a4 = 0;
LABEL_59:
        StringCFNumberRef Value = (const void *)FigCFNumberCreateSInt32();
        goto LABEL_25;
      }
      CFTypeRef v18 = CFRetain(NumberValue);
      *a4 = v18;
      if (!v18) {
        goto LABEL_59;
      }
    }
    else
    {
      if (CFEqual(a2, @"ClusterSize"))
      {
        StringCFNumberRef Value = (const void *)FigCFDictionaryGetNumberValue();
        if (!StringValue) {
          goto LABEL_25;
        }
        goto LABEL_24;
      }
      if (!CFEqual(a2, (CFTypeRef)*MEMORY[0x1E4F345E0]))
      {
        if (CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_SupportsReceiverChoosesAnchor"))
        {
          uint64_t v20 = (const void **)MEMORY[0x1E4F1CFD0];
          if (!*(unsigned char *)(DerivedStorage + 242)) {
            uint64_t v20 = (const void **)MEMORY[0x1E4F1CFC8];
          }
        }
        else
        {
          if (!CFEqual(a2, @"APSEndpointStreamAudioHoseProtocolProperty_IsDolbyCertified"))
          {
            if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 30
              && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            return 4294954512;
          }
          uint64_t v20 = (const void **)MEMORY[0x1E4F1CFD0];
        }
        StringCFNumberRef Value = *v20;
        goto LABEL_24;
      }
      pthread_mutex_lock(*(pthread_mutex_t **)(DerivedStorage + 248));
      CFTypeRef v19 = *(CFTypeRef *)(DerivedStorage + 272);
      if (v19) {
        CFTypeRef v19 = CFRetain(v19);
      }
      *a4 = v19;
      pthread_mutex_unlock(*(pthread_mutex_t **)(DerivedStorage + 248));
    }
    return 0;
  }
  uint64_t v8 = *(void *)(DerivedStorage + 104);
  uint64_t v9 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v9) {
    uint64_t v10 = v9;
  }
  else {
    uint64_t v10 = 0;
  }
  CFTypeID v13 = *(uint64_t (**)(uint64_t, void, const __CFAllocator *, void *))(v10 + 48);
  if (!v13)
  {
    uint64_t v12 = 4294954514;
LABEL_19:
    CFNumberRef v11 = (CFNumberRef)v12;
LABEL_20:
    APSLogErrorAt((uint64_t)v11);
    return v12;
  }
  uint64_t v12 = v13(v8, *MEMORY[0x1E4F34648], a3, a4);
  if (v12) {
    goto LABEL_19;
  }
  return v12;
}

__CFString *hoseSBAR_CopyDebugDescription(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSEndpointStreamAudioHoseSBAR %p '%@'>", a1, *(void *)(DerivedStorage + 16));
  return Mutable;
}

void hoseSBAR_Finalize(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSEndpointStreamAudioHoseSBAR <= 50
    && (gLogCategory_APSEndpointStreamAudioHoseSBAR != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v3 = *(NSObject **)(DerivedStorage + 8);
  if (v3)
  {
    dispatch_release(v3);
    *(void *)(DerivedStorage + 8) = 0;
  }
  hoseSBAR_invalidateInternal(a1);
  uint64_t v4 = *(const void **)(DerivedStorage + 16);
  if (v4) {
    CFRelease(v4);
  }
  uint64_t v5 = *(const void **)(DerivedStorage + 32);
  if (v5) {
    CFRelease(v5);
  }
  uint64_t v6 = *(const void **)(DerivedStorage + 24);
  if (v6) {
    CFRelease(v6);
  }
  uint64_t v7 = *(const void **)(DerivedStorage + 40);
  if (v7) {
    CFRelease(v7);
  }
  uint64_t v8 = *(const void **)(DerivedStorage + 48);
  if (v8) {
    CFRelease(v8);
  }
  int v9 = *(_DWORD *)(DerivedStorage + 216);
  if (v9 != -1)
  {
    notify_cancel(v9);
    *(_DWORD *)(DerivedStorage + 216) = -1;
  }
  int v10 = *(_DWORD *)(DerivedStorage + 220);
  if (v10 != -1)
  {
    notify_cancel(v10);
    *(_DWORD *)(DerivedStorage + 220) = -1;
  }
  uint64_t v11 = *(void *)(DerivedStorage + 112);
  if (v11)
  {
    uint64_t v12 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v12) {
      uint64_t v13 = v12;
    }
    else {
      uint64_t v13 = 0;
    }
    unsigned int v14 = *(void (**)(uint64_t, long long *, double))(v13 + 24);
    uint64_t v15 = MEMORY[0x1E4F1F9F8];
    if (v14)
    {
      long long v50 = *MEMORY[0x1E4F1F9F8];
      uint64_t v51 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
      v14(v11, &v50, 0.0);
    }
    *(_OWORD *)(DerivedStorage + 496) = *(_OWORD *)v15;
    *(void *)(DerivedStorage + 512) = *(void *)(v15 + 16);
    hoseSBAR_updateSynchronizerState(a1, 0);
    uint64_t v16 = *(void *)(DerivedStorage + 104);
    if (v16)
    {
      uint64_t v17 = *(void *)(DerivedStorage + 112);
      uint64_t v18 = *(void *)(CMBaseObjectGetVTable() + 16);
      uint64_t v19 = v18 ? v18 : 0;
      uint64_t v20 = *(void (**)(uint64_t, uint64_t))(v19 + 16);
      if (v20) {
        v20(v17, v16);
      }
    }
    CFRelease(*(CFTypeRef *)(DerivedStorage + 112));
  }
  uint64_t v21 = CMBaseObjectGetDerivedStorage();
  if (*(void *)(v21 + 120))
  {
    uint64_t v22 = v21;
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    long long v23 = *(NSObject **)(v22 + 544);
    if (v23)
    {
      CMTimebaseRemoveTimerDispatchSource(*(CMTimebaseRef *)(v22 + 120), v23);
      dispatch_source_cancel(*(dispatch_source_t *)(v22 + 544));
      dispatch_release(*(dispatch_object_t *)(v22 + 544));
      *(void *)(v22 + 544) = 0;
    }
  }
  long long v24 = *(const void **)(DerivedStorage + 120);
  if (v24) {
    CFRelease(v24);
  }
  if (*(void *)(DerivedStorage + 104))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    CFRelease(*(CFTypeRef *)(DerivedStorage + 104));
  }
  long long v25 = *(NSObject **)(DerivedStorage + 296);
  if (v25)
  {
    dispatch_release(v25);
    *(void *)(DerivedStorage + 296) = 0;
  }
  long long v26 = *(const void **)(DerivedStorage + 136);
  if (v26) {
    CFRelease(v26);
  }
  long long v27 = *(const void **)(DerivedStorage + 360);
  if (v27) {
    CFRelease(v27);
  }
  long long v28 = *(const void **)(DerivedStorage + 552);
  if (v28) {
    CFRelease(v28);
  }
  uint64_t v29 = *(const void **)(DerivedStorage + 560);
  if (v29) {
    CFRelease(v29);
  }
  long long v30 = *(const void **)(DerivedStorage + 576);
  if (v30) {
    CFRelease(v30);
  }
  CMTimeEpoch v31 = *(const void **)(DerivedStorage + 824);
  if (v31) {
    CFRelease(v31);
  }
  CFTypeRef v32 = *(const void **)(DerivedStorage + 832);
  if (v32) {
    CFRelease(v32);
  }
  CMTimeEpoch v33 = *(const void **)(DerivedStorage + 72);
  if (v33) {
    CFRelease(v33);
  }
  uint64_t v34 = *(const void **)(DerivedStorage + 584);
  if (v34) {
    CFRelease(v34);
  }
  uint64_t v35 = *(const void **)(DerivedStorage + 64);
  if (v35) {
    CFRelease(v35);
  }
  uint64_t v36 = *(const void **)(DerivedStorage + 80);
  if (v36) {
    CFRelease(v36);
  }
  uint64_t v37 = *(const void **)(DerivedStorage + 592);
  if (v37) {
    CFRelease(v37);
  }
  uint64_t v38 = *(const void **)(DerivedStorage + 768);
  if (v38) {
    CFRelease(v38);
  }
  uint64_t v39 = *(const void **)(DerivedStorage + 776);
  if (v39) {
    CFRelease(v39);
  }
  CMTime v40 = *(const void **)(DerivedStorage + 792);
  if (v40) {
    CFRelease(v40);
  }
  CMTime v41 = *(const void **)(DerivedStorage + 800);
  if (v41) {
    CFRelease(v41);
  }
  CMTime v42 = *(const void **)(DerivedStorage + 808);
  if (v42) {
    CFRelease(v42);
  }
  CMTime v43 = *(const void **)(DerivedStorage + 256);
  if (v43) {
    CFRelease(v43);
  }
  uint64_t v44 = *(const void **)(DerivedStorage + 272);
  if (v44) {
    CFRelease(v44);
  }
  char v45 = *(const void **)(DerivedStorage + 840);
  if (v45)
  {
    CFRelease(v45);
    *(void *)(DerivedStorage + 840) = 0;
  }
  FigSimpleMutexDestroy();
  uint64_t v46 = *(const void **)(DerivedStorage + 224);
  if (v46)
  {
    CFRelease(v46);
    *(void *)(DerivedStorage + 224) = 0;
  }
  uint64_t v47 = *(const void **)(DerivedStorage + 232);
  if (v47)
  {
    CFRelease(v47);
    *(void *)(DerivedStorage + 232) = 0;
  }
  CMTimeFlags v48 = *(NSObject **)(DerivedStorage + 280);
  if (v48)
  {
    dispatch_release(v48);
    *(void *)(DerivedStorage + 280) = 0;
  }
  int v49 = *(NSObject **)(DerivedStorage + 288);
  if (v49)
  {
    dispatch_release(v49);
    *(void *)(DerivedStorage + 288) = 0;
  }
}

void hoseSBAR_invalidateInternal(uint64_t a1)
{
  uint64_t DerivedStorage = (unsigned char *)CMBaseObjectGetDerivedStorage();
  if (!*DerivedStorage)
  {
    uint64_t v3 = DerivedStorage;
    CMBaseObjectGetDerivedStorage();
    uint64_t v4 = *((void *)v3 + 14);
    uint64_t v5 = (long long *)MEMORY[0x1E4F1F9F8];
    if (v4)
    {
      uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v6) {
        uint64_t v7 = v6;
      }
      else {
        uint64_t v7 = 0;
      }
      uint64_t v8 = *(void (**)(uint64_t, long long *, double))(v7 + 24);
      if (v8)
      {
        long long v30 = *v5;
        uint64_t v31 = *((void *)v5 + 2);
        v8(v4, &v30, 0.0);
      }
      hoseSBAR_updateSynchronizerState(a1, 0);
    }
    uint64_t v9 = *((void *)v3 + 13);
    if (v9)
    {
      uint64_t v10 = *(void *)(CMBaseObjectGetVTable() + 16);
      if (v10) {
        uint64_t v11 = v10;
      }
      else {
        uint64_t v11 = 0;
      }
      uint64_t v12 = *(void (**)(uint64_t))(v11 + 24);
      if (v12) {
        v12(v9);
      }
      v3[568] = 0;
    }
    uint64_t v13 = (opaqueCMBufferQueue *)*((void *)v3 + 69);
    if (v13) {
      CMBufferQueueReset(v13);
    }
    unsigned int v14 = (opaqueCMBufferQueue *)*((void *)v3 + 70);
    if (v14) {
      CMBufferQueueReset(v14);
    }
    v3[353] = 0;
    uint64_t v15 = (const void *)*((void *)v3 + 45);
    if (v15)
    {
      CFRelease(v15);
      *((void *)v3 + 45) = 0;
    }
    *((void *)v3 + 55) = 0x100000000;
    *(_OWORD *)(v3 + 424) = kAPSNetworkTimeInvalid;
    long long v16 = *v5;
    *((_OWORD *)v3 + 28) = *v5;
    uint64_t v17 = *((void *)v5 + 2);
    *((void *)v3 + 58) = v17;
    *(_OWORD *)(v3 + 472) = v16;
    *((void *)v3 + 61) = v17;
    *((_OWORD *)v3 + 31) = v16;
    *((void *)v3 + 64) = v17;
    *((void *)v3 + 67) = v17;
    *(_OWORD *)(v3 + 520) = v16;
    *((void *)v3 + 40) = v17;
    *((_OWORD *)v3 + 19) = v16;
    *((void *)v3 + 43) = v17;
    *(_OWORD *)(v3 + 328) = v16;
    *((_DWORD *)v3 + 157) = 0;
    *((void *)v3 + 79) = 0;
    uint64_t v18 = (__CFBag *)*((void *)v3 + 96);
    if (v18) {
      CFBagRemoveAllValues(v18);
    }
    uint64_t v19 = (__CFDictionary *)*((void *)v3 + 97);
    if (v19) {
      CFDictionaryRemoveAllValues(v19);
    }
    *((void *)v3 + 98) = 0;
    uint64_t v20 = (__CFDictionary *)*((void *)v3 + 99);
    if (v20) {
      CFDictionaryRemoveAllValues(v20);
    }
    uint64_t v21 = (__CFDictionary *)*((void *)v3 + 100);
    if (v21) {
      CFDictionaryRemoveAllValues(v21);
    }
    uint64_t v22 = (__CFDictionary *)*((void *)v3 + 101);
    if (v22) {
      CFDictionaryRemoveAllValues(v22);
    }
    uint64_t v23 = CMBaseObjectGetDerivedStorage();
    *(void *)(v23 + 616) = 0;
    *(unsigned char *)(v23 + 624) = 0;
    v3[352] = 0;
    while (*(void *)(CMBaseObjectGetDerivedStorage() + 600))
      hoseSBAR_discardHeadFlushOperation();
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    long long v24 = (const void *)*((void *)v3 + 9);
    if (v24)
    {
      CFRelease(v24);
      *((void *)v3 + 9) = 0;
    }
    uint64_t v25 = *((void *)v3 + 14);
    if (v25)
    {
      uint64_t v26 = *((void *)v3 + 13);
      if (v26)
      {
        uint64_t v27 = *(void *)(CMBaseObjectGetVTable() + 16);
        if (v27) {
          uint64_t v28 = v27;
        }
        else {
          uint64_t v28 = 0;
        }
        uint64_t v29 = *(void (**)(uint64_t, uint64_t))(v28 + 16);
        if (v29) {
          v29(v25, v26);
        }
      }
    }
    *uint64_t v3 = 1;
  }
}

uint64_t hoseSBAR_Invalidate(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(unsigned char *)DerivedStorage)
  {
    uint64_t v3 = *(NSObject **)(DerivedStorage + 280);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __hoseSBAR_Invalidate_block_invoke;
    block[3] = &__block_descriptor_tmp_771;
    block[4] = a1;
    dispatch_sync(v3, block);
  }
  return 0;
}

uint64_t hoseSBAR_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&hoseSBAR_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

uint64_t APSEndpointStreamAudioHoseSBARInvalidate(uint64_t a1)
{
  if (!a1) {
    return 4294954516;
  }
  uint64_t v2 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v2) {
    uint64_t v3 = v2;
  }
  else {
    uint64_t v3 = 0;
  }
  uint64_t v5 = *(uint64_t (**)(uint64_t))(v3 + 24);
  if (!v5) {
    return 4294954514;
  }

  return v5(a1);
}

uint64_t APSAsyncLoggerGetTypeID()
{
  if (APSAsyncLoggerGetTypeID_once != -1) {
    dispatch_once(&APSAsyncLoggerGetTypeID_once, &__block_literal_global_772);
  }
  return APSAsyncLoggerGetTypeID_typeID;
}

uint64_t __APSAsyncLoggerGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSAsyncLoggerGetTypeID_typeID = result;
  return result;
}

uint64_t APSAsyncLoggerLogMessage(uint64_t a1, uint64_t a2, long long *a3)
{
  if (a2)
  {
    uint64_t v8 = a2;
    if (a3)
    {
      long long v4 = a3[1];
      long long v9 = *a3;
      long long v10 = v4;
    }
    else
    {
      long long v9 = 0u;
      long long v10 = 0u;
    }
    uint64_t v11 = mach_absolute_time();
    APSAtomicMessageQueueSendMessage(*(void *)(a1 + 16), &v8);
    uint64_t v5 = *(atomic_uint **)(*(void *)(a1 + 24) + 16);
    int v6 = 1;
    atomic_compare_exchange_strong_explicit(v5 + 10, (unsigned int *)&v6, 2u, memory_order_release, memory_order_relaxed);
    if (v6 == 1) {
      caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v5 + 6), (caulk::concurrent::message *)v5);
    }
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSAsyncLoggerGetSharedLogger()
{
  if (APSAsyncLoggerGetSharedLogger_onceToken != -1) {
    dispatch_once_f(&APSAsyncLoggerGetSharedLogger_onceToken, &APSAsyncLoggerGetSharedLogger_gLogger, (dispatch_function_t)asyncLogger_initOnce);
  }
  return APSAsyncLoggerGetSharedLogger_gLogger;
}

void asyncLogger_initOnce(CFTypeRef **a1)
{
  if (!a1) {
    goto LABEL_10;
  }
  uint64_t v2 = *MEMORY[0x1E4F1CF80];
  if (APSAsyncLoggerGetTypeID_once != -1) {
    dispatch_once(&APSAsyncLoggerGetTypeID_once, &__block_literal_global_772);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (Instance)
  {
    long long v4 = (CFTypeRef *)Instance;
    *(void *)(Instance + 16) = 0;
    *(void *)(Instance + 24) = 0;
    uint64_t v5 = APSAtomicMessageQueueCreate(v2, 48, (uint64_t *)(Instance + 16));
    if (v5 || (SNPrintF(), (uint64_t v5 = FigDispatchQueueCreateWithPriority()) == 0))
    {
      APSLogErrorAt(v5);
      CFRelease(v4);
    }
    else
    {
      int v6 = v5;
      uint64_t v7 = (void *)CFRetain(v4[2]);
      uint64_t v8 = APSRealTimeSignalCreate(v6, v7, (uint64_t)asyncLogger_debugSignalHandler, MEMORY[0x1E4F1C278], (uint64_t)(v4 + 3));
      if (v8)
      {
        APSLogErrorAt(v8);
        CFRelease(v4);
      }
      else
      {
        *a1 = v4;
      }
      dispatch_release(v6);
    }
  }
  else
  {
LABEL_10:
    APSLogErrorAt(0);
  }
}

uint64_t asyncLogger_debugSignalHandler(uint64_t a1)
{
  long long v6 = 0u;
  memset(v5, 0, sizeof(v5));
  while (1)
  {
    uint64_t result = APSAtomicMessageQueueReadMessage(a1, v5);
    if (!result) {
      break;
    }
    double v3 = (double)(mach_absolute_time() - *((void *)&v6 + 1)) * 1000.0;
    uint64_t v4 = UpTicksPerSecond();
    (*(void (**)(char *, double))&v5[0])((char *)v5 + 8, v3 / (double)(unint64_t)v4);
  }
  return result;
}

uint64_t APSCryptorGetClassID()
{
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  return APSCryptorGetClassID_sClassID;
}

uint64_t cryptor_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&cryptor_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

CFStringRef cryptor_copyFormattingDesc(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"[APSCryptor %p]", a1);
}

uint64_t APSCryptorGetTypeID()
{
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  uint64_t v0 = APSCryptorGetClassID_sClassID;

  return MEMORY[0x1F40DB8F8](v0);
}

void APSTimeProfilerTaskBegin(CFTypeRef cf)
{
  if (profiler_getShared_sAPSTimeProfilerOnce != -1) {
    dispatch_once_f(&profiler_getShared_sAPSTimeProfilerOnce, &profiler_getShared_sAPSTimeProfiler, (dispatch_function_t)profiler_initialize);
  }
  if (profiler_getShared_sAPSTimeProfiler)
  {
    int v2 = 1;
    v4[0] = 1;
    v4[1] = CFRetain(cf);
    void v4[2] = mach_absolute_time();
    APSAtomicMessageQueueSendMessage(qword_1EA642BC8, v4);
    double v3 = *(atomic_uint **)(qword_1EA642BD0 + 16);
    atomic_compare_exchange_strong_explicit(v3 + 10, (unsigned int *)&v2, 2u, memory_order_release, memory_order_relaxed);
    if (v2 == 1) {
      caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v3 + 6), (caulk::concurrent::message *)v3);
    }
  }
}

void profiler_initialize(uint64_t a1)
{
  *(void *)(a1 + 48) = 0;
  *(_OWORD *)(a1 + 16) = 0u;
  *(_OWORD *)(a1 + 32) = 0u;
  *(_OWORD *)a1 = 0u;
  uint64_t Int64 = APSSettingsGetInt64(@"enableTimeProfiler", 0);
  *(unsigned char *)a1 = Int64 != 0;
  if (Int64)
  {
    double v3 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
    uint64_t v4 = dispatch_queue_create("APSTimeProfiler", v3);
    *(void *)(a1 + 8) = v4;
    *(void *)(a1 + 16) = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v4);
    CFAllocatorRef v5 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    APSAtomicMessageQueueCreate(*MEMORY[0x1E4F1CF80], 24, (uint64_t *)(a1 + 24));
    APSRealTimeSignalCreate(*(NSObject **)(a1 + 8), (void *)a1, (uint64_t)profiler_messageSignalHandler, 0, a1 + 32);
    long long v6 = (const CFDictionaryKeyCallBacks *)MEMORY[0x1E4F1D530];
    *(void *)(a1 + 40) = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    *(void *)(a1 + 48) = CFDictionaryCreateMutable(v5, 0, v6, 0);
    dispatch_set_context(*(dispatch_object_t *)(a1 + 16), (void *)a1);
    dispatch_source_set_event_handler_f(*(dispatch_source_t *)(a1 + 16), (dispatch_function_t)profiler_timerTick);
    dispatch_source_set_timer(*(dispatch_source_t *)(a1 + 16), 0, 0x12A05F200uLL, 0x4C4B40uLL);
    uint64_t v7 = *(NSObject **)(a1 + 16);
    dispatch_resume(v7);
  }
}

void profiler_timerTick(uint64_t a1)
{
  CFDictionaryApplyFunction(*(CFDictionaryRef *)(a1 + 48), (CFDictionaryApplierFunction)profiler_taskProfileLogAndFreeApplier, 0);
  int v2 = *(__CFDictionary **)(a1 + 48);

  CFDictionaryRemoveAllValues(v2);
}

void profiler_taskProfileLogAndFreeApplier(int a1, void *a2)
{
  if (gLogCategory_APSTimeProfiler <= 50
    && (gLogCategory_APSTimeProfiler != -1 || _LogCategory_Initialize()))
  {
    UpTicksToMicroseconds();
    UpTicksToMicroseconds();
    UpTicksToMicroseconds();
    LogPrintF();
  }

  free(a2);
}

uint64_t profiler_messageSignalHandler(uint64_t a1)
{
  uint64_t __dst = 0;
  CFStringRef key = 0;
  unint64_t v18 = 0;
  CFAllocatorRef v2 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  double v3 = (const CFArrayCallBacks *)MEMORY[0x1E4F1D510];
  while (1)
  {
    uint64_t result = APSAtomicMessageQueueReadMessage(*(void *)(a1 + 24), &__dst);
    if (!result) {
      return result;
    }
    unint64_t valuePtr = 0;
    if (__dst == 1)
    {
      CFAllocatorRef v5 = key;
      if (!CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 40), key))
      {
        CFMutableDictionaryRef Mutable = CFArrayCreateMutable(v2, 0, v3);
        if (!Mutable) {
          goto LABEL_30;
        }
        uint64_t v15 = Mutable;
        CFDictionaryAddValue(*(CFMutableDictionaryRef *)(a1 + 40), v5, Mutable);
        CFRelease(v15);
      }
      CFMutableDictionaryRef Mutable = (void *)CFArrayAppendInt64();
      if (Mutable) {
        goto LABEL_30;
      }
LABEL_24:
      if (v5) {
        goto LABEL_25;
      }
    }
    else
    {
      if (__dst != 2)
      {
        CFAllocatorRef v5 = key;
        goto LABEL_24;
      }
      CFAllocatorRef v5 = key;
      CFMutableDictionaryRef Mutable = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 40), key);
      if (!Mutable) {
        goto LABEL_30;
      }
      CFArrayRef v7 = (const __CFArray *)Mutable;
      if (CFArrayGetCount((CFArrayRef)Mutable) <= 0)
      {
        CFMutableDictionaryRef Mutable = 0;
        goto LABEL_30;
      }
      CFNumberRef ValueAtIndex = (const __CFNumber *)CFArrayGetValueAtIndex(v7, 0);
      int Value = CFNumberGetValue(ValueAtIndex, kCFNumberSInt64Type, &valuePtr);
      CFArrayRemoveValueAtIndex(v7, 0);
      if (!Value)
      {
        CFMutableDictionaryRef Mutable = 0;
        goto LABEL_30;
      }
      unint64_t v10 = v18 - valuePtr;
      if (v18 < valuePtr)
      {
        CFMutableDictionaryRef Mutable = 0;
        goto LABEL_30;
      }
      uint64_t v11 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 48), v5);
      if (v11)
      {
LABEL_12:
        unint64_t v12 = v11[1] + v10;
        ++*v11;
        v11[1] = v12;
        unint64_t v13 = v11[2];
        unint64_t v14 = v11[3];
        if (v13 >= v10) {
          unint64_t v13 = v10;
        }
        if (v14 <= v10) {
          unint64_t v14 = v10;
        }
        void v11[2] = v13;
        v11[3] = v14;
        if (v5) {
LABEL_25:
        }
          CFRelease(v5);
      }
      else
      {
        CFMutableDictionaryRef Mutable = malloc_type_malloc(0x20uLL, 0x1000040E0EAB150uLL);
        if (Mutable)
        {
          uint64_t v11 = Mutable;
          void *Mutable = 0;
          Mutable[1] = 0;
          *((_OWORD *)Mutable + 1) = xmmword_1D0C1ED60;
          CFDictionaryAddValue(*(CFMutableDictionaryRef *)(a1 + 48), v5, Mutable);
          goto LABEL_12;
        }
LABEL_30:
        APSLogErrorAt((uint64_t)Mutable);
        if (v5) {
          goto LABEL_25;
        }
      }
    }
  }
}

void APSTimeProfilerTaskEnd(CFTypeRef cf)
{
  if (profiler_getShared_sAPSTimeProfilerOnce != -1) {
    dispatch_once_f(&profiler_getShared_sAPSTimeProfilerOnce, &profiler_getShared_sAPSTimeProfiler, (dispatch_function_t)profiler_initialize);
  }
  if (profiler_getShared_sAPSTimeProfiler)
  {
    v4[0] = 2;
    v4[1] = CFRetain(cf);
    void v4[2] = mach_absolute_time();
    APSAtomicMessageQueueSendMessage(qword_1EA642BC8, v4);
    CFAllocatorRef v2 = *(atomic_uint **)(qword_1EA642BD0 + 16);
    int v3 = 1;
    atomic_compare_exchange_strong_explicit(v2 + 10, (unsigned int *)&v3, 2u, memory_order_release, memory_order_relaxed);
    if (v3 == 1) {
      caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v2 + 6), (caulk::concurrent::message *)v2);
    }
  }
}

BOOL APSAccessControlIsValidConfig(int a1, int a2)
{
  switch(a1)
  {
    case 2:
      return 1;
    case 1:
      return (a2 - 1) < 2;
    case 0:
      return 1;
  }
  return 0;
}

uint64_t APSNetworkAddressGetTypeID()
{
  if (APSNetworkAddressGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSNetworkAddressGetTypeID_sInitOnce, &APSNetworkAddressGetTypeID_sTypeID, (dispatch_function_t)networkAddress_getTypeID);
  }
  return APSNetworkAddressGetTypeID_sTypeID;
}

uint64_t networkAddress_getTypeID(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

__CFString *networkAddress_CopyDebugDescription(uint64_t a1)
{
  uint64_t v6 = *MEMORY[0x1E4F143B8];
  memset(v5, 0, sizeof(v5));
  uint64_t Mutable = (uint64_t)CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  int v3 = (__CFString *)Mutable;
  if (!Mutable || (uint64_t Mutable = SockAddrToString(), Mutable)) {
    APSLogErrorAt(Mutable);
  }
  else {
    CFStringAppendFormat(v3, 0, @"<APSNetworkAddress %p '%s'>", a1, v5);
  }
  return v3;
}

BOOL networkAddress_Equal(_OWORD *a1, _OWORD *a2)
{
  CFTypeID v4 = CFGetTypeID(a1);
  if (APSNetworkAddressGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSNetworkAddressGetTypeID_sInitOnce, &APSNetworkAddressGetTypeID_sTypeID, (dispatch_function_t)networkAddress_getTypeID);
  }
  if (v4 != APSNetworkAddressGetTypeID_sTypeID) {
    return 0;
  }
  CFTypeID v5 = CFGetTypeID(a2);
  if (APSNetworkAddressGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSNetworkAddressGetTypeID_sInitOnce, &APSNetworkAddressGetTypeID_sTypeID, (dispatch_function_t)networkAddress_getTypeID);
  }
  if (v5 == APSNetworkAddressGetTypeID_sTypeID
    && BYTE1(a1[1]) == BYTE1(a2[1])
    && (int Port = SockAddrGetPort(), Port == SockAddrGetPort()))
  {
    return SockAddrCompareAddr() == 0;
  }
  else
  {
    return 0;
  }
}

uint64_t networkAddress_Finalize(uint64_t result)
{
  uint64_t v1 = result;
  if (gLogCategory_APSNetworkAddress <= 30)
  {
    if (gLogCategory_APSNetworkAddress != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
      uint64_t result = LogPrintF();
    }
  }
  *(void *)(v1 + 16) = 0;
  *(void *)(v1 + 24) = 0;
  *(_DWORD *)(v1 + 40) = 0;
  *(void *)(v1 + 32) = 0;
  return result;
}

uint64_t APSNetworkAddressCreateWithSocketAddr(uint64_t a1, long long *a2, void *a3)
{
  if (APSNetworkAddressGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSNetworkAddressGetTypeID_sInitOnce, &APSNetworkAddressGetTypeID_sTypeID, (dispatch_function_t)networkAddress_getTypeID);
  }
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (Instance)
  {
    uint64_t v6 = Instance;
    Instance[1] = 0u;
    Instance[2] = 0u;
    long long v7 = *a2;
    *(_OWORD *)((char *)Instance + 28) = *(long long *)((char *)a2 + 12);
    Instance[1] = v7;
    if (gLogCategory_APSNetworkAddress <= 30
      && (gLogCategory_APSNetworkAddress != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t result = 0;
    *a3 = v6;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  return result;
}

uint64_t APSNetworkAddressCreateWithString(uint64_t a1, CFStringRef theString, void *a3)
{
  uint64_t v18 = *MEMORY[0x1E4F143B8];
  long long v16 = 0u;
  long long v17 = 0u;
  long long v14 = 0u;
  long long v15 = 0u;
  long long v12 = 0u;
  long long v13 = 0u;
  *(_OWORD *)UInt8 buffer = 0u;
  long long v11 = 0u;
  memset(&v9[2], 0, 28);
  if (!CFStringGetCString(theString, buffer, 128, 0x8000100u))
  {
    if (gLogCategory_APSNetworkAddress > 90
      || gLogCategory_APSNetworkAddress == -1 && !_LogCategory_Initialize())
    {
      return 4294960554;
    }
    uint64_t v7 = 4294960554;
    goto LABEL_11;
  }
  uint64_t v5 = StringToSockAddr();
  if (v5)
  {
    uint64_t v7 = v5;
    if (gLogCategory_APSNetworkAddress > 90
      || gLogCategory_APSNetworkAddress == -1 && !_LogCategory_Initialize())
    {
      return v7;
    }
LABEL_11:
    LogPrintF();
    return v7;
  }
  v9[0] = v9[2];
  *(long long *)((char *)v9 + 12) = *(long long *)((char *)&v9[2] + 12);
  uint64_t v6 = APSNetworkAddressCreateWithSocketAddr(a1, v9, a3);
  uint64_t v7 = v6;
  if (v6) {
    APSLogErrorAt(v6);
  }
  return v7;
}

__n128 APSNetworkAddressGetSocketAddr@<Q0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  *(_OWORD *)a2 = *(_OWORD *)(a1 + 16);
  __n128 result = *(__n128 *)(a1 + 28);
  *(__n128 *)(a2 + 12) = result;
  return result;
}

uint64_t APSNetworkAddressGetPort()
{
  return (unsigned __int16)SockAddrGetPort();
}

uint64_t APSNetworkAddressSetPort()
{
  return SockAddrSetPort();
}

uint64_t APSNetworkAddressCopyStringRepresentation(uint64_t a1, CFStringRef *a2)
{
  return APSNetworkAddressCopyStringRepresentationWithFlags(a1, 0, a2);
}

uint64_t APSNetworkAddressCopyStringRepresentationWithFlags(uint64_t a1, uint64_t a2, CFStringRef *a3)
{
  uint64_t v8 = *MEMORY[0x1E4F143B8];
  memset(v7, 0, sizeof(v7));
  if (a3)
  {
    uint64_t v4 = SockAddrToString();
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
    else {
      *a3 = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const char *)v7, 0x8000100u);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return v5;
}

uint64_t APSNetworkAddressGetCStringRepresentation(uint64_t a1, char *a2, CFIndex a3)
{
  return APSNetworkAddressGetCStringRepresentationWithFlags(a1, 0, a2, a3);
}

uint64_t APSNetworkAddressGetCStringRepresentationWithFlags(uint64_t a1, uint64_t a2, char *a3, CFIndex a4)
{
  CFStringRef theString = 0;
  uint64_t v6 = APSNetworkAddressCopyStringRepresentationWithFlags(a1, a2, &theString);
  if (v6)
  {
    uint64_t v8 = v6;
    APSLogErrorAt(v6);
  }
  else
  {
    uint64_t CString = CFStringGetCString(theString, a3, a4, 0x8000100u);
    if (CString)
    {
      uint64_t v8 = 0;
    }
    else
    {
      APSLogErrorAt(CString);
      uint64_t v8 = 4294960533;
    }
  }
  if (theString) {
    CFRelease(theString);
  }
  return v8;
}

uint64_t APSNetworkAddressCopyInterfaceName(uint64_t a1, CFStringRef *a2)
{
  uint64_t v7 = *MEMORY[0x1E4F143B8];
  if (!a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (*(unsigned char *)(a1 + 17) == 30)
  {
    uint64_t v3 = *(unsigned int *)(a1 + 40);
    if (!v3)
    {
      APSLogErrorAt(v3);
      return 4294960560;
    }
    if (!if_indextoname(v3, cStr))
    {
      APSLogErrorAt(0);
      return 4294960569;
    }
    CFStringRef v4 = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], cStr, 0x8000100u);
  }
  else
  {
    CFStringRef v4 = 0;
  }
  uint64_t result = 0;
  *a2 = v4;
  return result;
}

uint64_t APSNetworkAddressSetInterfaceName(uint64_t a1, CFStringRef theString)
{
  uint64_t v8 = *MEMORY[0x1E4F143B8];
  if (!theString)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (*(unsigned char *)(a1 + 17) != 30) {
    return 4294960591;
  }
  uint64_t CString = CFStringGetCString(theString, buffer, 128, 0x8000100u);
  if (CString)
  {
    uint64_t v4 = if_nametoindex(buffer);
    if (v4)
    {
      int v5 = v4;
      uint64_t result = 0;
      *(_DWORD *)(a1 + 40) = v5;
    }
    else
    {
      APSLogErrorAt(v4);
      return 4294960569;
    }
  }
  else
  {
    APSLogErrorAt(CString);
    return 4294960560;
  }
  return result;
}

BOOL APSNetworkAddressIsIPv6(uint64_t a1)
{
  return *(unsigned char *)(a1 + 17) == 30;
}

uint64_t APSRealTimePTPClockGetTypeID()
{
  if (gAPSRealTimePTPClockInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimePTPClockInitOnce, 0, (dispatch_function_t)_APSRealTimePTPClockGetTypeID);
  }
  return gAPSRealTimePTPClockTypeID;
}

uint64_t _APSRealTimePTPClockGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimePTPClockTypeID = result;
  return result;
}

void _APSRealTimePTPClockFinalize(uint64_t a1)
{
  if (gLogCategory_APSRealTimePTPClock <= 50
    && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFAllocatorRef v2 = *(dispatch_queue_t **)(a1 + 16);
  if (v2)
  {
    dispatch_sync_f(*v2, v2, (dispatch_function_t)rtPTPClockServer_deregisterClientInternal);
    *(void *)(a1 + 16) = 0;
  }
}

void rtPTPClockServer_deregisterClientInternal(void *a1)
{
  uint64_t v2 = a1[3];
  if (v2)
  {
    if (gLogCategory_APSRealTimePTPClock <= 50)
    {
      if (gLogCategory_APSRealTimePTPClock != -1 || (int v3 = _LogCategory_Initialize(), v2 = a1[3], v3))
      {
        LogPrintF();
        uint64_t v2 = a1[3];
      }
    }
    uint64_t v4 = v2 - 1;
    a1[3] = v4;
    if (!v4)
    {
      if (gLogCategory_APSRealTimePTPClock <= 50
        && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      int v5 = (const void *)a1[2];
      if (v5)
      {
        CFRelease(v5);
        a1[2] = 0;
      }
      uint64_t v6 = a1[1];
      dispatch_suspend(v6);
    }
  }
  else if (gLogCategory_APSRealTimePTPClock <= 90 {
         && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
  }
  {
    LogPrintF();
  }
}

uint64_t APSRealTimePTPClockCreate(CFTypeRef *a1)
{
  if (a1)
  {
    if (gAPSRealTimePTPClockInitOnce != -1) {
      dispatch_once_f(&gAPSRealTimePTPClockInitOnce, 0, (dispatch_function_t)_APSRealTimePTPClockGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      int v3 = (void *)Instance;
      *(void *)(Instance + 16) = 0;
      if (rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServerOnce != -1) {
        dispatch_once_f(&rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServerOnce, &rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServer, (dispatch_function_t)rtPTPClockServer_init);
      }
      context = &rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServer;
      uint64_t v7 = 0;
      dispatch_sync_f((dispatch_queue_t)rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServer, &context, (dispatch_function_t)rtPTPClockServer_registerClientInternal);
      uint64_t v4 = v7;
      if (v7)
      {
        if (gLogCategory_APSRealTimePTPClock <= 90
          && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
      else
      {
        v3[2] = &rtPTPClockServer_getSharedServer_sAPSRealTimePTPClockServer;
        if (gLogCategory_APSRealTimePTPClock <= 50
          && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        *a1 = CFRetain(v3);
      }
      CFRelease(v3);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

uint64_t rtPTPClockServer_registerClientInternal(uint64_t a1)
{
  uint64_t v2 = *(void *)a1;
  memset(v6, 0, sizeof(v6));
  if (gLogCategory_APSRealTimePTPClock <= 50
    && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v3 = *(void *)(v2 + 24);
  if (v3) {
    goto LABEL_12;
  }
  if (gLogCategory_APSRealTimePTPClock <= 50
    && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t result = CM8021ASClockCreate();
  if (!result)
  {
    rtPTPClockServer_getRelativeRateAndAnchor(v2, (uint64_t)v6);
    APSRealTimeWritableWrite(*(void *)(v2 + 32), v6);
    dispatch_resume(*(dispatch_object_t *)(v2 + 8));
    uint64_t v3 = *(void *)(v2 + 24);
LABEL_12:
    uint64_t result = 0;
    *(void *)(v2 + 24) = v3 + 1;
    goto LABEL_13;
  }
  if (gLogCategory_APSRealTimePTPClock <= 90)
  {
    uint64_t v5 = result;
    if (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    uint64_t result = v5;
  }
LABEL_13:
  *(_DWORD *)(a1 + 8) = result;
  return result;
}

void rtPTPClockServer_getRelativeRateAndAnchor(uint64_t a1, uint64_t a2)
{
  CMTime v16 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  CMTime v15 = v16;
  CMTime v14 = v16;
  CMTime v13 = v16;
  uint64_t v11 = 0;
  uint64_t v12 = 0;
  do
  {
    CMClockRef HostTimeClock = CMClockGetHostTimeClock();
    CMClockGetTime(&v16, HostTimeClock);
    CMTimeMake(&rhs, 1, 1);
    CMTime lhs = v16;
    CMTimeAdd(&v15, &lhs, &rhs);
    CMTime lhs = v16;
    CM8021ASClockGetClockTimeForHostTime();
    CMTime lhs = v15;
    CM8021ASClockGetClockTimeForHostTime();
    uint64_t v4 = v12;
  }
  while (v12 != v11);
  *(CMTime *)a2 = v16;
  long long v5 = *(_OWORD *)&v14.value;
  *(_OWORD *)(a2 + 24) = *(_OWORD *)&v14.value;
  CMTimeEpoch epoch = v14.epoch;
  *(void *)(a2 + 40) = v14.epoch;
  *(void *)(a2 + 48) = v4;
  CMTime lhs = v13;
  *(_OWORD *)&v7.CMTimeValue value = v5;
  v7.CMTimeEpoch epoch = epoch;
  CMTimeSubtract(&time, &lhs, &v7);
  *(Float64 *)(a2 + 56) = CMTimeGetSeconds(&time);
}

void rtPTPClockServer_init(dispatch_source_t *a1)
{
  APSRealTimeWritableCreate(0, 0x40uLL, (CFTypeRef *)a1 + 4);
  uint64_t v2 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  uint64_t v3 = dispatch_queue_create("APSRealTimePTPClockServer", v2);
  *a1 = v3;
  uint64_t v4 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v3);
  a1[1] = v4;
  dispatch_source_set_timer(v4, 0, 0x1DCD6500uLL, 0xF4240uLL);
  dispatch_set_context(a1[1], a1);
  dispatch_source_set_event_handler_f(a1[1], (dispatch_function_t)rtPTPClockServer_updateRelativeRateAndAnchorTime);
  if (gLogCategory_APSRealTimePTPClock <= 50
    && (gLogCategory_APSRealTimePTPClock != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
}

uint64_t rtPTPClockServer_updateRelativeRateAndAnchorTime(uint64_t a1)
{
  memset(v3, 0, sizeof(v3));
  rtPTPClockServer_getRelativeRateAndAnchor(a1, (uint64_t)v3);
  return APSRealTimeWritableWrite(*(void *)(a1 + 32), v3);
}

uint64_t APSRealTimePTPClockGetEstimatedPTPTimeForHostTime@<X0>(uint64_t a1@<X0>, uint64_t a2@<X1>, void *a3@<X2>, CMTime *a4@<X8>)
{
  uint64_t v6 = *(void *)(a1 + 16);
  *(_OWORD *)&v10.CMTimeValue value = *(_OWORD *)a2;
  v10.CMTimeEpoch epoch = *(void *)(a2 + 16);
  uint64_t v7 = MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&a4->CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  a4->CMTimeEpoch epoch = *(void *)(v7 + 16);
  long long v19 = 0u;
  memset(__dst, 0, sizeof(__dst));
  uint64_t v8 = APSRealTimeWritableRead(*(void *)(v6 + 32), __dst);
  if (v8) {
    return APSLogErrorAt(v8);
  }
  CMTime lhs = v10;
  CMTime rhs = __dst[0];
  CMTimeSubtract(&time, &lhs, &rhs);
  CMTimeMultiplyByFloat64(&lhs, &time, *((Float64 *)&v19 + 1));
  CMTime rhs = __dst[1];
  uint64_t result = (uint64_t)CMTimeAdd(a4, &rhs, &lhs);
  if (gLogCategory_APSRealTimePTPClock <= 30)
  {
    if (gLogCategory_APSRealTimePTPClock != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      uint64_t v14 = 0;
      memset(&rhs, 0, sizeof(rhs));
      CMTime v13 = v10;
      uint64_t result = CM8021ASClockGetClockTimeForHostTime();
      if (gLogCategory_APSRealTimePTPClock <= 30)
      {
        if (gLogCategory_APSRealTimePTPClock != -1 || (uint64_t result = _LogCategory_Initialize(), result))
        {
          CMTime v13 = v10;
          CMTimeGetSeconds(&v13);
          CMTime v13 = *a4;
          CMTimeGetSeconds(&v13);
          CMTime v13 = rhs;
          CMTimeGetSeconds(&v13);
          if ((void)v19 == v14)
          {
            CMTime v12 = *a4;
            CMTime v11 = rhs;
            CMTimeSubtract(&v13, &v12, &v11);
            CMTimeGetSeconds(&v13);
          }
          uint64_t result = LogPrintF();
        }
      }
    }
  }
  if (a3) {
    *a3 = v19;
  }
  return result;
}

uint64_t APSRealTimePTPClockGetEstimatedHostTimeForPTPTime@<X0>(uint64_t a1@<X0>, uint64_t a2@<X1>, void *a3@<X2>, CMTime *a4@<X8>)
{
  uint64_t v6 = *(void *)(a1 + 16);
  *(_OWORD *)&v10.CMTimeValue value = *(_OWORD *)a2;
  v10.CMTimeEpoch epoch = *(void *)(a2 + 16);
  uint64_t v7 = MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&a4->CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  a4->CMTimeEpoch epoch = *(void *)(v7 + 16);
  long long v19 = 0u;
  memset(__dst, 0, sizeof(__dst));
  uint64_t v8 = APSRealTimeWritableRead(*(void *)(v6 + 32), __dst);
  if (v8) {
    return APSLogErrorAt(v8);
  }
  CMTime lhs = v10;
  CMTime rhs = __dst[1];
  CMTimeSubtract(&time, &lhs, &rhs);
  CMTimeMultiplyByFloat64(&lhs, &time, 1.0 / *((double *)&v19 + 1));
  CMTime rhs = __dst[0];
  uint64_t result = (uint64_t)CMTimeAdd(a4, &rhs, &lhs);
  if (gLogCategory_APSRealTimePTPClock <= 30)
  {
    if (gLogCategory_APSRealTimePTPClock != -1 || (uint64_t result = _LogCategory_Initialize(), result))
    {
      uint64_t v14 = 0;
      memset(&rhs, 0, sizeof(rhs));
      CMTime v13 = v10;
      uint64_t result = CM8021ASClockGetHostTimeForClockTime();
      if (gLogCategory_APSRealTimePTPClock <= 30)
      {
        if (gLogCategory_APSRealTimePTPClock != -1 || (uint64_t result = _LogCategory_Initialize(), result))
        {
          CMTime v13 = v10;
          CMTimeGetSeconds(&v13);
          CMTime v13 = *a4;
          CMTimeGetSeconds(&v13);
          CMTime v13 = rhs;
          CMTimeGetSeconds(&v13);
          if ((void)v19 == v14)
          {
            CMTime v12 = *a4;
            CMTime v11 = rhs;
            CMTimeSubtract(&v13, &v12, &v11);
            CMTimeGetSeconds(&v13);
          }
          uint64_t result = LogPrintF();
        }
      }
    }
  }
  if (a3) {
    *a3 = v19;
  }
  return result;
}

uint64_t APSRealTimeSafeSemaphoreCreate(uint64_t a1, uint64_t a2)
{
  if (a2)
  {
    if (APSRealTimeSafeSemaphoreGetTypeID::sRegisterAPSRealTimeSafeSemaphoreOnce != -1) {
      dispatch_once_f(&APSRealTimeSafeSemaphoreGetTypeID::sRegisterAPSRealTimeSafeSemaphoreOnce, 0, (dispatch_function_t)registerAPSRealTimeSafeSemaphore);
    }
    if (_CFRuntimeCreateInstance()) {
      operator new();
    }
    APSLogErrorAt(0);
    return 4294960568;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

void sub_1D0BDD000(_Unwind_Exception *a1)
{
  MEMORY[0x1D25EEC90](v1, 0x1000C40A517B1A3);
  _Unwind_Resume(a1);
}

uint64_t registerAPSRealTimeSafeSemaphore(void *a1)
{
  sAPSRealTimeSafeSemaphoreClass = 0;
  *(void *)algn_1EA642C48 = "APSRealTimeSafeSemaphore";
  qword_1EA642C50 = (uint64_t)APSRealTimeSafeSemaphoreInit;
  unk_1EA642C58 = 0;
  qword_1EA642C60 = (uint64_t)APSRealTimeSafeSemaphoreFinalize;
  unk_1EA642C68 = 0;
  qword_1EA642C70 = 0;
  unk_1EA642C78 = 0;
  qword_1EA642C80 = (uint64_t)APSRealTimeSafeSemaphoreCopyDebugDesc;
  uint64_t result = _CFRuntimeRegisterClass();
  sAPSRealTimeSafeSemaphoreID = result;
  return result;
}

__CFString *APSRealTimeSafeSemaphoreCopyDebugDesc(const void *a1)
{
  CFAllocatorRef v1 = CFGetAllocator(a1);
  uint64_t Mutable = CFStringCreateMutable(v1, 0);
  CFStringAppendFormat(Mutable, 0, @"APSRealTimeSafeSemaphore");
  return Mutable;
}

uint64_t APSRealTimeSafeSemaphoreFinalize(void *a1)
{
  uint64_t result = a1[2];
  if (result)
  {
    MEMORY[0x1D25EEC60]();
    JUMPOUT(0x1D25EEC90);
  }
  return result;
}

uint64_t APSRealTimeSafeSemaphoreInit(uint64_t result)
{
  *(void *)(result + 16) = 0;
  return result;
}

uint64_t APSRealTimeSafeSemaphoreGetTypeID()
{
  if (APSRealTimeSafeSemaphoreGetTypeID::sRegisterAPSRealTimeSafeSemaphoreOnce != -1) {
    dispatch_once_f(&APSRealTimeSafeSemaphoreGetTypeID::sRegisterAPSRealTimeSafeSemaphoreOnce, 0, (dispatch_function_t)registerAPSRealTimeSafeSemaphore);
  }
  return sAPSRealTimeSafeSemaphoreID;
}

uint64_t APSRealTimeSafeSemaphoreSignal(uint64_t a1)
{
  return MEMORY[0x1F4177B78](*(void *)(a1 + 16));
}

uint64_t APSRealTimeSafeSemaphoreWait(uint64_t a1)
{
  return caulk::semaphore::timed_wait(*(caulk::semaphore **)(a1 + 16), -1.0);
}

uint64_t APSRealTimeSafeSemaphoreTimedWait(uint64_t a1, double a2)
{
  return caulk::semaphore::timed_wait(*(caulk::semaphore **)(a1 + 16), a2);
}

uint64_t APSDynamicLatencyManagerGetTypeID()
{
  if (gAPSDynamicLatencyManagerInitOnce != -1) {
    dispatch_once_f(&gAPSDynamicLatencyManagerInitOnce, 0, (dispatch_function_t)_APSDynamicLatencyManagerGetTypeID);
  }
  return gAPSDynamicLatencyManagerTypeID;
}

uint64_t _APSDynamicLatencyManagerGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSDynamicLatencyManagerTypeID = result;
  return result;
}

uint64_t _APSDynamicLatencyManagerFinalize(void *a1)
{
  uint64_t v2 = (void *)a1[12];
  if (v2) {
    free(v2);
  }
  uint64_t v3 = (const void *)a1[11];
  if (v3) {
    CFRelease(v3);
  }
  uint64_t v4 = (const void *)a1[15];
  if (v4) {
    CFRelease(v4);
  }
  long long v5 = (const void *)a1[16];
  if (v5) {
    CFRelease(v5);
  }
  uint64_t result = FigSimpleMutexDestroy();
  if (gLogCategory_APSDynamicLatencyManager <= 50)
  {
    if (gLogCategory_APSDynamicLatencyManager != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t _APSDynamicLatencyManagerCreate(const void *a1, const void *a2, unint64_t a3, unint64_t a4, const __CFDictionary *a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t *a10)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!a2 || !a3 || a4 >= a3 || !a1 || !a10)
  {
    APSLogErrorAt(0);
    return -6705;
  }
  uint64_t v32 = a6;
  if (gAPSDynamicLatencyManagerInitOnce != -1) {
    dispatch_once_f(&gAPSDynamicLatencyManagerInitOnce, 0, (dispatch_function_t)_APSDynamicLatencyManagerGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return -6728;
  }
  uint64_t v19 = Instance;
  uint64_t v31 = a8;
  *(_OWORD *)(Instance + 16) = 0u;
  uint64_t v20 = Instance + 16;
  *(void *)(Instance + 128) = 0;
  *(_OWORD *)(Instance + 96) = 0u;
  *(_OWORD *)(Instance + 112) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  CFAllocatorRef v21 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *(void *)(v20 + 104) = Mutable;
  if (!Mutable
    || (CFMutableDictionaryRef v23 = CFDictionaryCreateMutable(v21, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]),
        (*(void *)(v19 + 128) = v23) == 0)
    || (uint64_t v24 = FigSimpleMutexCreate(), (*(void *)(v19 + 80) = v24) == 0))
  {
    APSLogErrorAt(0);
    unsigned int v33 = -6728;
LABEL_38:
    CFRelease((CFTypeRef)v19);
    return v33;
  }
  *(_OWORD *)(v19 + 24) = xmmword_1D0C1ED70;
  *(void *)(v19 + 40) = 0x4024000000000000;
  *(void *)(v19 + 16) = 0x500000E10;
  if (a5)
  {
    if (CFDictionaryContainsKey(a5, @"PromotionSecs")) {
      *(_DWORD *)uint64_t v20 = CFDictionaryGetInt64Ranged();
    }
    if (CFDictionaryContainsKey(a5, @"MinSessionDurationSecs")) {
      *(_DWORD *)(v19 + 20) = CFDictionaryGetInt64Ranged();
    }
    if (CFDictionaryContainsKey(a5, @"GlitchesPerHourPromoteTier"))
    {
      CFDictionaryGetDouble();
      *(void *)(v19 + 24) = v25;
    }
    if (CFDictionaryContainsKey(a5, @"GlitchesPerHourDemoteTier"))
    {
      CFDictionaryGetDouble();
      *(void *)(v19 + 32) = v26;
    }
    if (CFDictionaryContainsKey(a5, @"GlitchesPerHourWorstTier"))
    {
      CFDictionaryGetDouble();
      *(void *)(v19 + 40) = v27;
    }
  }
  uint64_t v28 = dynamicLatencyManager_SetTiers(v19, a1, a2, a3, a4);
  unsigned int v33 = v28;
  if (v28)
  {
    APSLogErrorAt(v28);
    goto LABEL_38;
  }
  *(void *)(v19 + 48) = v32;
  *(void *)(v19 + 56) = a7;
  *(void *)(v19 + 64) = v31;
  *(void *)(v19 + 72) = a9;
  *a10 = v19;
  if (gLogCategory_APSDynamicLatencyManager <= 50
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v33;
}

uint64_t dynamicLatencyManager_SetTiers(uint64_t a1, const void *a2, const void *a3, uint64_t a4, uint64_t a5)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
  CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 120));
  CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 128));
  CMTime v10 = *(const void **)(a1 + 88);
  *(void *)(a1 + 88) = a2;
  if (a2) {
    CFRetain(a2);
  }
  if (v10) {
    CFRelease(v10);
  }
  CMTime v11 = *(void **)(a1 + 96);
  if (v11) {
    free(v11);
  }
  *(void *)(a1 + 104) = a4;
  size_t v12 = 4 * a4;
  CMTime v13 = malloc_type_malloc(v12, 0xDA92CFCFuLL);
  *(void *)(a1 + 96) = v13;
  if (v13)
  {
    memcpy(v13, a3, v12);
    uint64_t v14 = 0;
    *(void *)(a1 + 112) = a5;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v14 = 4294960568;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
  return v14;
}

uint64_t _APSDynamicLatencyManagerUpdateTiers(uint64_t a1, const void *a2, const void *a3, unint64_t a4, unint64_t a5)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1 && a2 && a3 && a4 && a5 < a4)
  {
    uint64_t v10 = dynamicLatencyManager_SetTiers(a1, a2, a3, a4, a5);
    uint64_t v11 = v10;
    if (v10) {
      APSLogErrorAt(v10);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v11;
}

uint64_t APSDynamicLatencyManagerGetLLA()
{
  if (APSDynamicLatencyManagerGetLLA_sInitOnce != -1) {
    dispatch_once_f(&APSDynamicLatencyManagerGetLLA_sInitOnce, &APSDynamicLatencyManagerGetLLA_sAPSDynamicLatencyManager, (dispatch_function_t)dynamicLatencyManager_GetLLA);
  }
  return APSDynamicLatencyManagerGetLLA_sAPSDynamicLatencyManager;
}

void dynamicLatencyManager_GetLLA(uint64_t *a1)
{
  uint64_t v2 = 0;
  uint64_t v14 = 0;
  while (!FigCFEqual())
  {
    v2 += 40;
    if (v2 == 120)
    {
      uint64_t v3 = 0;
      goto LABEL_6;
    }
  }
  uint64_t v3 = (char *)&kDLMConfigurations + v2;
LABEL_6:
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFStringRef v4 = (const __CFString *)APSSettingsCopyValueEx(@"llaDLMVariant", 0, (int *)&v14 + 1);
  CFStringRef v5 = v4;
  unint64_t v6 = 0;
  if (HIDWORD(v14) || !v4)
  {
LABEL_35:
    if (v5) {
      goto LABEL_39;
    }
    goto LABEL_40;
  }
  CFTypeID v7 = CFGetTypeID(v4);
  if (v7 != CFStringGetTypeID() || CFStringGetLength(v5) < 1)
  {
    unint64_t v6 = 0;
    goto LABEL_39;
  }
  if (gLogCategory_APSDynamicLatencyManager <= 50
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  for (uint64_t i = 0; i != 120; i += 40)
  {
    long long v9 = (char *)&kDLMConfigurations + i;
    if (FigCFEqual())
    {
      if (gLogCategory_APSDynamicLatencyManager <= 50
        && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      uint64_t Int64 = APSSettingsGetInt64(@"llaDLMTierIndex", (int *)&v14 + 1);
      if (!HIDWORD(v14))
      {
        unint64_t v6 = (unint64_t)Int64;
        if (gLogCategory_APSDynamicLatencyManager <= 50
          && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        if (v6 < 5) {
          goto LABEL_34;
        }
        APSLogErrorAt(0);
        if (gLogCategory_APSDynamicLatencyManager <= 90
          && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
      unint64_t v6 = 0;
LABEL_34:
      uint64_t v3 = v9;
      goto LABEL_35;
    }
  }
  APSLogErrorAt(0);
  if (gLogCategory_APSDynamicLatencyManager <= 90
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  unint64_t v6 = 0;
  if (v5) {
LABEL_39:
  }
    CFRelease(v5);
LABEL_40:
  if (gLogCategory_APSDynamicLatencyManager <= 50
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (Mutable)
  {
    CFDictionaryRef v12 = Mutable;
    APSSettingsGetIntWithOverrideAndDefault(@"llaDLMPromotionSec", 0, 3600);
    FigCFDictionarySetInt64();
    APSSettingsGetIntWithOverrideAndDefault(@"llaDLMMinSessionDurationSec", 0, 5);
    FigCFDictionarySetInt64();
    APSSettingsGetDouble(@"llaDLMGlitchesPerHourPromoteTier", (int *)&v14);
    FigCFDictionarySetDouble();
    APSSettingsGetDouble(@"llaDLMGlitchesPerHourDemoteTier", (int *)&v14);
    FigCFDictionarySetDouble();
    APSSettingsGetDouble(@"llaDLMGlitchesPerHourWorstTier", (int *)&v14);
    FigCFDictionarySetDouble();
    uint64_t v13 = _APSDynamicLatencyManagerCreate(*(const void **)v3, v3 + 8, *((void *)v3 + 4), v6, v12, (uint64_t)dynamicLatencyManager_LatencyTierChangeCallback, 0, (uint64_t)dynamicLatencyManager_SetVariantCallback, 0, a1);
    LODWORD(v14) = v13;
    if (v13)
    {
      APSLogErrorAt(v13);
    }
    else
    {
      dynamicLatencyManager_SetVariantCallback(*a1, *(const void **)v3);
      LODWORD(v14) = 0;
      dynamicLatencyManager_LatencyTierChangeCallback();
      LODWORD(v14) = 0;
    }
    CFRelease(v12);
  }
  else
  {
    APSLogErrorAt(0);
  }
}

uint64_t dynamicLatencyManager_SetVariantCallback(uint64_t a1, const void *a2)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a2)
  {
    if (CFEqual(@"llaDLMVariant", @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v3 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v3 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(@"llaDLMVariant", a2, v3);
    if (gLogCategory_APSDynamicLatencyManager <= 50
      && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
  return 0;
}

uint64_t dynamicLatencyManager_LatencyTierChangeCallback()
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  APSSettingsSetInt64(@"llaDLMTierIndex");
  if (gLogCategory_APSDynamicLatencyManager <= 50
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return 0;
}

uint64_t APSDynamicLatencyManagerSetVariant(uint64_t a1, uint64_t a2)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
  CFStringRef v4 = *(const void **)(a1 + 88);
  if (v4) {
    CFTypeRef v5 = CFRetain(v4);
  }
  else {
    CFTypeRef v5 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
  if (FigCFEqual())
  {
    if (gLogCategory_APSDynamicLatencyManager <= 50
      && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    goto LABEL_29;
  }
  uint64_t v6 = 0;
  CFTypeID v7 = (const void **)&kDLMConfigurations;
  while (1)
  {
    uint64_t v8 = *v7;
    if (FigCFEqual()) {
      break;
    }
    ++v6;
    v7 += 5;
    if (v6 == 3)
    {
      APSLogErrorAt(0);
      uint64_t v9 = 4294960569;
      goto LABEL_30;
    }
  }
  uint64_t v10 = &kDLMConfigurations + 5 * v6 + 1;
  uint64_t v11 = dynamicLatencyManager_SetTiers(a1, v8, v10, 5, 0);
  if (v11)
  {
    uint64_t v9 = v11;
LABEL_27:
    APSLogErrorAt(v11);
    goto LABEL_30;
  }
  CFDictionaryRef v12 = *(uint64_t (**)(uint64_t, uint64_t, void))(a1 + 64);
  if (v12)
  {
    uint64_t v11 = v12(a1, a2, *(void *)(a1 + 72));
    if (v11)
    {
      uint64_t v9 = v11;
      goto LABEL_27;
    }
  }
  uint64_t v13 = *(uint64_t (**)(uint64_t, void, void, void))(a1 + 48);
  if (v13)
  {
    uint64_t v11 = v13(a1, *(unsigned int *)v10, 0, *(void *)(a1 + 56));
    uint64_t v9 = v11;
    if (!v11) {
      goto LABEL_30;
    }
    goto LABEL_27;
  }
LABEL_29:
  uint64_t v9 = 0;
LABEL_30:
  if (v5) {
    CFRelease(v5);
  }
  return v9;
}

uint64_t APSDynamicLatencyManagerAddPerformanceReport(uint64_t a1, const __CFDictionary *a2)
{
  unsigned int v16 = 0;
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return -6705;
  }
  CFStringGetTypeID();
  Typedint Value = (const void *)CFDictionaryGetTypedValue();
  uint64_t Int64 = CFDictionaryGetInt64();
  unint64_t v6 = CFDictionaryGetInt64();
  CFDictionaryGetInt64();
  int Value = (pthread_mutex_t **)CFDictionaryGetValue(a2, @"GlitchDurationHistogram");
  if (!Value)
  {
    APSLogErrorAt(0);
    return -6727;
  }
  if (v6 >= *(unsigned int *)(a1 + 20))
  {
    uint64_t v8 = Value;
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
    if (CFDictionaryContainsKey(*(CFDictionaryRef *)(a1 + 128), TypedValue))
    {
      if (CFDictionaryGetInt64() == Int64)
      {
        if (gLogCategory_APSDynamicLatencyManager <= 50
          && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        goto LABEL_43;
      }
      CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 128));
    }
    uint64_t v9 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 120), TypedValue);
    if (v9)
    {
      uint64_t v10 = (__CFArray *)CFRetain(v9);
      if (v10) {
        goto LABEL_16;
      }
    }
    CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
    if (Mutable)
    {
      uint64_t v10 = Mutable;
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 120), TypedValue, Mutable);
LABEL_16:
      if (CFArrayGetCount(v10) && CFArrayGetValueAtIndex(v10, 0) && Int64 == CFDictionaryGetInt64()) {
        CFArraySetValueAtIndex(v10, 0, a2);
      }
      else {
        CFArrayInsertValueAtIndex(v10, 0, a2);
      }
      unint64_t v12 = 0;
      for (CFIndex i = 0; i < CFArrayGetCount(v10) && v12 < *(unsigned int *)(a1 + 16); ++i)
      {
        CFArrayGetValueAtIndex(v10, i);
        v12 += CFDictionaryGetInt64();
      }
      if (gLogCategory_APSDynamicLatencyManager <= 50
        && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
      {
        pthread_mutex_lock(v8[2]);
        pthread_mutex_unlock(v8[2]);
        CFArrayGetCount(v10);
        CFArrayGetCount(v10);
        LogPrintF();
      }
      if (i < CFArrayGetCount(v10))
      {
        v17.unsigned int length = CFArrayGetCount(v10) - i;
        v17.location = i;
        CFArrayReplaceValues(v10, v17, 0, 0);
      }
      pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
      CFRelease(v10);
      return v16;
    }
    APSLogErrorAt(0);
    unsigned int v16 = -6728;
LABEL_43:
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
    return v16;
  }
  if (gLogCategory_APSDynamicLatencyManager <= 50
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v16;
}

uint64_t APSDynamicLatencyManagerUpdate(uint64_t a1, unsigned char *a2)
{
  long long context = xmmword_1D0C1F190;
  int64_t v10 = 0x7FFFFFFFLL;
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1 && a2)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
    if (!CFDictionaryGetCount(*(CFDictionaryRef *)(a1 + 120))) {
      goto LABEL_27;
    }
    unint64_t v4 = *(void *)(a1 + 112);
    CFDictionaryApplyFunction(*(CFDictionaryRef *)(a1 + 120), (CFDictionaryApplierFunction)dynamicLatencyManager_EndpointPerformance, &context);
    if (v4)
    {
      if (*((double *)&context + 1) > *(double *)(a1 + 40))
      {
        unint64_t v5 = 0;
        goto LABEL_16;
      }
      if (*((double *)&context + 1) > *(double *)(a1 + 32))
      {
        unint64_t v5 = v4 - 1;
        goto LABEL_16;
      }
    }
    if (v4 < *(void *)(a1 + 104) - 1 && (unint64_t)context >= *(unsigned int *)(a1 + 16))
    {
      unint64_t v5 = v4;
      if (*((double *)&context + 1) <= *(double *)(a1 + 24))
      {
        if (v10 <= (uint64_t)(*(unsigned int *)(*(void *)(a1 + 96) + 4 * v4)
                            - (unint64_t)*(unsigned int *)(*(void *)(a1 + 96) + 4 * (v4 + 1))))
          unint64_t v5 = v4;
        else {
          unint64_t v5 = v4 + 1;
        }
      }
    }
    else
    {
      unint64_t v5 = v4;
    }
LABEL_16:
    if (gLogCategory_APSDynamicLatencyManager <= 50
      && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (v4 != v5)
    {
      *(void *)(a1 + 112) = v5;
      uint64_t v6 = *(unsigned int *)(*(void *)(a1 + 96) + 4 * v5);
      CFDictionaryApplyFunction(*(CFDictionaryRef *)(a1 + 120), (CFDictionaryApplierFunction)dynamicLatencyManager_AddSessionToDenyList, (void *)a1);
      CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 120));
      *a2 = 1;
      pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
      CFTypeID v7 = *(uint64_t (**)(uint64_t, uint64_t, unint64_t, void))(a1 + 48);
      if (v7) {
        return v7(a1, v6, v5, *(void *)(a1 + 56));
      }
      return 0;
    }
LABEL_27:
    *a2 = 0;
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
    return 0;
  }
  APSLogErrorAt(0);
  return 4294960591;
}

void dynamicLatencyManager_AddSessionToDenyList(const void *a1, CFArrayRef theArray, uint64_t a3)
{
  if (CFArrayGetCount(theArray))
  {
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(theArray, 0);
    if (ValueAtIndex)
    {
      CFTypeID v7 = *(__CFDictionary **)(a3 + 128);
      int Value = CFDictionaryGetValue(ValueAtIndex, @"SessionID");
      CFDictionarySetValue(v7, a1, Value);
    }
  }
}

uint64_t dynamicLatencyManager_EndpointPerformance(int a1, CFArrayRef theArray, uint64_t a3)
{
  if (theArray && a3 && CFArrayGetCount(theArray)) {
    return FigCFArrayApplyFunction();
  }

  return APSLogErrorAt(0);
}

uint64_t dynamicLatencyManager_SessionPerformance(const __CFDictionary *a1, uint64_t a2)
{
  if (a1 && a2)
  {
    *(void *)a2 += CFDictionaryGetInt64();
    uint64_t Int64 = CFDictionaryGetInt64();
    if ((Int64 & 0x8000000000000000) == 0)
    {
      *(void *)(a2 + 16) += Int64;
      ++*(_DWORD *)(a2 + 24);
    }
    int Value = CFDictionaryGetValue(a1, @"GlitchDurationHistogram");
    for (uint64_t i = 0; i != 72; i += 24)
    {
      uint64_t result = APSStatsHistogramGetSampleCountInRange((uint64_t)Value, *(double *)((char *)&kGlitchWeights + i), *(double *)((char *)&kGlitchWeights + i + 8));
      *(double *)(a2 + 8) = *(double *)(a2 + 8)
                          + (double)result * *(double *)((char *)&kGlitchWeights + i + 16);
    }
  }
  else
  {
    return APSLogErrorAt(0);
  }
  return result;
}

uint64_t APSDynamicLatencyManagerReset(uint64_t a1, BOOL *a2)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1 && a2)
  {
    if (gLogCategory_APSDynamicLatencyManager <= 50
      && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
    {
      CFDictionaryGetCount(*(CFDictionaryRef *)(a1 + 120));
      LogPrintF();
    }
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
    CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 120));
    CFDictionaryRemoveAllValues(*(CFMutableDictionaryRef *)(a1 + 128));
    uint64_t v4 = *(void *)(a1 + 112);
    *(void *)(a1 + 112) = 0;
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
    if (v4
      && (unint64_t v5 = *(uint64_t (**)(uint64_t, void, void, void))(a1 + 48)) != 0
      && (uint64_t v6 = v5(a1, **(unsigned int **)(a1 + 96), 0, *(void *)(a1 + 56)), v6))
    {
      uint64_t v7 = v6;
      APSLogErrorAt(v6);
    }
    else
    {
      uint64_t v7 = 0;
      *a2 = v4 != 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

uint64_t APSDynamicLatencyManagerGetLatencyTier(uint64_t a1, _DWORD *a2, void *a3)
{
  if (gLogCategory_APSDynamicLatencyManager <= 30
    && (gLogCategory_APSDynamicLatencyManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (a1 && a2 && a3)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 80));
    uint64_t v6 = *(void *)(a1 + 112);
    *a2 = *(_DWORD *)(*(void *)(a1 + 96) + 4 * v6);
    *a3 = v6;
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 80));
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSDisplayUtilsCopyDisplayCapabilities(uint64_t a1, __CFDictionary **a2)
{
  BOOL v10 = 0;
  uint64_t v9 = 0;
  if (gLogCategory_APSDisplayUtils <= 50
    && (gLogCategory_APSDisplayUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v11 = 0;
  if (APSSettingsGetInt64IfPresent(@"fakeDisplayIsProvisionedForHDCP2", &v11))
  {
    BOOL v10 = v11 != 0;
  }
  else
  {
    uint64_t HDCPCapabilityOfDevice = AUCWirelessHDCPSessionManagerGetHDCPCapabilityOfDevice();
    if (gLogCategory_APSDisplayUtils <= 30
      && (gLogCategory_APSDisplayUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (HDCPCapabilityOfDevice)
    {
      uint64_t v8 = HDCPCapabilityOfDevice;
      goto LABEL_25;
    }
  }
  if (!APSSettingsGetUInt64IfPresent(@"fakeDisplayProtectionBits", &v9))
  {
    uint64_t HDCPCapabilityOfDevice = AUCWirelessHDCPSessionManagerGetProtectionBitsOfDisplay();
    if (gLogCategory_APSDisplayUtils <= 30
      && (gLogCategory_APSDisplayUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (HDCPCapabilityOfDevice)
    {
      uint64_t v8 = HDCPCapabilityOfDevice;
LABEL_25:
      APSLogErrorAt(v8);
      return HDCPCapabilityOfDevice;
    }
  }
  CFMutableArrayRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  CFDictionarySetInt64();
  uint64_t v6 = (const void **)MEMORY[0x1E4F1CFD0];
  if (!v10) {
    uint64_t v6 = (const void **)MEMORY[0x1E4F1CFC8];
  }
  CFDictionarySetValue(Mutable, @"isProvisionedForHDCP2", *v6);
  if (gLogCategory_APSDisplayUtils <= 30
    && (gLogCategory_APSDisplayUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t HDCPCapabilityOfDevice = 0;
  *a2 = Mutable;
  return HDCPCapabilityOfDevice;
}

uint64_t APSWiFiTrafficRegistrationGetTypeID()
{
  if (gAPSWiFiTrafficRegistrationInitOnce != -1) {
    dispatch_once_f(&gAPSWiFiTrafficRegistrationInitOnce, 0, (dispatch_function_t)_APSWiFiTrafficRegistrationGetTypeID);
  }
  return gAPSWiFiTrafficRegistrationTypeID;
}

uint64_t _APSWiFiTrafficRegistrationGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSWiFiTrafficRegistrationTypeID = result;
  return result;
}

void _APSWiFiTrafficRegistrationFinalize(uint64_t a1)
{
  uint64_t v6 = 0;
  [*(id *)(a1 + 40) clearTrafficRegistration:*(void *)(a1 + 32) error:&v6];
  if (v6)
  {
    int v2 = **(_DWORD **)(a1 + 56);
    if (v2 <= 90 && (v2 != -1 || _LogCategory_Initialize())) {
      LogPrintF();
    }
  }
  CFStringRef v3 = *(NSObject **)(a1 + 24);
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 3221225472;
  block[2] = ___APSWiFiRegistrationPostRegistrationRemovedEvent_block_invoke;
  block[3] = &__block_descriptor_40_e5_v8__0l;
  block[4] = a1;
  dispatch_sync(v3, block);
  uint64_t v4 = *(NSObject **)(a1 + 24);
  if (v4)
  {
    dispatch_release(v4);
    *(void *)(a1 + 24) = 0;
  }

  *(void *)(a1 + 40) = 0;
  *(void *)(a1 + 32) = 0;
  unint64_t v5 = *(const void **)(a1 + 16);
  if (v5)
  {
    _Block_release(v5);
    *(void *)(a1 + 16) = 0;
  }
}

uint64_t APSWiFiTrafficRegistrationCreate(void *a1, void *a2, unsigned int *a3, int a4, int a5, uint64_t a6, uint64_t a7, CFTypeRef *a8)
{
  uint64_t v37 = *MEMORY[0x1E4F143B8];
  id v32 = 0;
  long long v35 = 0u;
  long long v36 = 0u;
  *(_OWORD *)label = 0u;
  long long v34 = 0u;
  if (!a1 || !a2 || !a8)
  {
    APSLogErrorAt(0);
    uint64_t v19 = 0;
    uint64_t v20 = 0;
    uint64_t v26 = 4294960591;
    goto LABEL_38;
  }
  if (gAPSWiFiTrafficRegistrationInitOnce != -1) {
    dispatch_once_f(&gAPSWiFiTrafficRegistrationInitOnce, 0, (dispatch_function_t)_APSWiFiTrafficRegistrationGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    uint64_t v19 = 0;
    uint64_t v20 = 0;
    uint64_t v26 = 4294960568;
    goto LABEL_38;
  }
  uint64_t v17 = Instance;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  *(void *)(Instance + 48) = a6;
  *(void *)(Instance + 56) = a7;
  uint64_t v29 = Instance;
  SNPrintF();
  dispatch_queue_t v18 = dispatch_queue_create(label, 0);
  *(void *)(v17 + 24) = v18;
  if (!v18)
  {
    APSLogErrorAt(0);
    uint64_t v20 = 0;
    uint64_t v19 = 0;
LABEL_46:
    uint64_t v26 = 4294960568;
    goto LABEL_37;
  }
  uint64_t v19 = objc_msgSend(objc_alloc(MEMORY[0x1E4FB6FC8]), "initWithAddress:", *a3 | ((unint64_t)*((unsigned __int16 *)a3 + 2) << 32), v29);
  if (!v19)
  {
    APSLogErrorAt(0);
    uint64_t v20 = 0;
    goto LABEL_46;
  }
  uint64_t v20 = (void *)[objc_alloc(MEMORY[0x1E4FB6FB0]) initWithUniqueIdentifier:a2 peerAddress:v19];
  if (!v20)
  {
    APSLogErrorAt(0);
    goto LABEL_46;
  }
  if (!a4 || ![a2 isEqualToString:*MEMORY[0x1E4FB6F90]]) {
    goto LABEL_26;
  }
  [a1 performRealtimeConnectivityCheckWithConfiguration:v20 error:&v32];
  if ([v32 code] != 13)
  {
    uint64_t v21 = [v32 code];
    if (!a5 || v21 != 35) {
      goto LABEL_20;
    }
LABEL_17:
    int v22 = **(_DWORD **)(v17 + 56);
    if (v22 <= 50 && (v22 != -1 || _LogCategory_Initialize()))
    {
      uint64_t v30 = *(void *)(v17 + 48);
      id v31 = v32;
      LogPrintF();
    }
    id v32 = 0;
    goto LABEL_26;
  }
  if (a5) {
    goto LABEL_17;
  }
LABEL_20:
  uint64_t v23 = NSErrorToOSStatus();
  if (v23)
  {
    uint64_t v26 = v23;
    goto LABEL_51;
  }
  int v24 = **(_DWORD **)(v17 + 56);
  if (v24 <= 30 && (v24 != -1 || _LogCategory_Initialize()))
  {
    uint64_t v30 = *(void *)(v17 + 48);
    LogPrintF();
  }
LABEL_26:
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    int v28 = **(_DWORD **)(v17 + 56);
    if (v28 <= 90 && (v28 != -1 || _LogCategory_Initialize()))
    {
      IsAppleInternalBuild();
      LogPrintF();
    }
    uint64_t v26 = 4294960526;
    goto LABEL_37;
  }
  [v20 setLegacyUpgradeRequired:APSSettingsGetInt64(@"legacyTrafficRegistration", 0) != 0, v30, v31];
  [a1 setTrafficRegistration:v20 error:&v32];
  uint64_t v23 = NSErrorToOSStatus();
  if (v23)
  {
    uint64_t v26 = v23;
LABEL_51:
    APSLogErrorAt(v23);
    goto LABEL_37;
  }
  int v25 = **(_DWORD **)(v17 + 56);
  if (v25 <= 50)
  {
    if (v25 != -1)
    {
LABEL_30:
      if (v25 == -1) {
        _LogCategory_Initialize();
      }
      LogPrintF();
      goto LABEL_36;
    }
    if (_LogCategory_Initialize())
    {
      int v25 = **(_DWORD **)(v17 + 56);
      goto LABEL_30;
    }
  }
LABEL_36:
  *(void *)(v17 + 40) = a1;
  *(void *)(v17 + 32) = v20;
  uint64_t v26 = 0;
  *a8 = CFRetain((CFTypeRef)v17);
LABEL_37:
  CFRelease((CFTypeRef)v17);
LABEL_38:

  return v26;
}

void APSWiFiTrafficRegistrationSetRemovalHandler(uint64_t a1, uint64_t a2)
{
  int v2 = *(NSObject **)(a1 + 24);
  v3[0] = MEMORY[0x1E4F143A8];
  v3[1] = 3221225472;
  v3[2] = __APSWiFiTrafficRegistrationSetRemovalHandler_block_invoke;
  v3[3] = &unk_1E6899118;
  _OWORD v3[4] = a2;
  v3[5] = a1;
  dispatch_sync(v2, v3);
}

void __APSWiFiTrafficRegistrationSetRemovalHandler_block_invoke(uint64_t a1)
{
  int v2 = *(const void **)(a1 + 32);
  if (v2) {
    CFStringRef v3 = _Block_copy(v2);
  }
  else {
    CFStringRef v3 = 0;
  }
  uint64_t v4 = *(void *)(a1 + 40);
  unint64_t v5 = *(const void **)(v4 + 16);
  if (v5)
  {
    _Block_release(v5);
    uint64_t v4 = *(void *)(a1 + 40);
  }
  *(void *)(v4 + 16) = v3;
}

uint64_t APSConnectionInterfaceManagerGetTypeID()
{
  if (APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerInitOnce != -1) {
    dispatch_once_f(&APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerInitOnce, &APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerTypeID, (dispatch_function_t)interfaceManager_registerCMClass);
  }
  return APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerTypeID;
}

uint64_t interfaceManager_registerCMClass(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

void connectionInterfaceManager_Finalize(uint64_t a1)
{
  int v2 = *(NSObject **)(a1 + 16);
  if (v2)
  {
    dispatch_release(v2);
    *(void *)(a1 + 16) = 0;
  }
  CFStringRef v3 = *(const void **)(a1 + 32);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 32) = 0;
  }
}

uint64_t APSConnectionInterfaceManagerCreate(const __CFAllocator *a1, void *a2)
{
  if (APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerInitOnce != -1) {
    dispatch_once_f(&APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerInitOnce, &APSConnectionInterfaceManagerGetTypeID_connectionInterfaceManagerTypeID, (dispatch_function_t)interfaceManager_registerCMClass);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    uint64_t v8 = 4294895426;
    APSLogErrorAt(0);
    return v8;
  }
  unint64_t v5 = (void *)Instance;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  dispatch_queue_t v6 = dispatch_queue_create("com.apple.airplay.connectionInterfaceManager", 0);
  _OWORD v5[2] = v6;
  if (!v6)
  {
    APSLogErrorAt(0);
LABEL_11:
    uint64_t v8 = 4294895426;
    CFRelease(v5);
    return v8;
  }
  CFMutableSetRef Mutable = CFSetCreateMutable(a1, 0, 0);
  v5[4] = Mutable;
  if (!Mutable)
  {
    APSLogErrorAt(0);
    APSSignalErrorAt(4294895426);
    goto LABEL_11;
  }
  uint64_t v8 = 0;
  *a2 = v5;
  return v8;
}

uint64_t APSConnectionInterfaceManagerSelectInterface(uint64_t a1, unsigned int a2, uint64_t a3)
{
  v5[0] = a1;
  v5[1] = a2;
  CFStringRef v3 = *(NSObject **)(a1 + 16);
  unsigned int v7 = 0;
  _OWORD v5[2] = a3;
  context[0] = &v7;
  context[1] = v5;
  context[2] = connectionInterfaceManager_selectInterfaceInternal;
  if (!v3) {
    return 4294960591;
  }
  dispatch_sync_f(v3, context, (dispatch_function_t)APSDispatchSyncTaskCallback);
  return v7;
}

uint64_t connectionInterfaceManager_selectInterfaceInternal(uint64_t *a1)
{
  if (!*((_DWORD *)a1 + 2))
  {
    APSLogErrorAt(0);
    uint64_t v3 = 4294895425;
    APSSignalErrorAt(4294895425);
    return v3;
  }
  if (!CFSetGetCount(*(CFSetRef *)(*a1 + 32)))
  {
    if (gLogCategory_APSConnectionInterfaceManager <= 40
      && (gLogCategory_APSConnectionInterfaceManager != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v2 = *a1;
    *(_DWORD *)(*a1 + 24) = *((_DWORD *)a1 + 2);
    goto LABEL_15;
  }
  uint64_t v2 = *a1;
  if (*(_DWORD *)(*a1 + 24) == *((_DWORD *)a1 + 2))
  {
    if (gLogCategory_APSConnectionInterfaceManager <= 30)
    {
      if (gLogCategory_APSConnectionInterfaceManager != -1 || (int v7 = _LogCategory_Initialize(), v2 = *a1, v7))
      {
        LogPrintF();
        uint64_t v2 = *a1;
      }
    }
LABEL_15:
    unint64_t v4 = (*(_DWORD *)(v2 + 40) + 1);
    *(_DWORD *)(v2 + 40) = v4;
    CFSetSetValue(*(CFMutableSetRef *)(v2 + 32), (const void *)v4);
    unint64_t v5 = (_DWORD *)a1[2];
    uint64_t v3 = 0;
    if (v5) {
      *unint64_t v5 = *(_DWORD *)(*a1 + 40);
    }
    return v3;
  }
  uint64_t v3 = 4294895424;
  if (gLogCategory_APSConnectionInterfaceManager <= 30
    && (gLogCategory_APSConnectionInterfaceManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v3;
}

uint64_t APSConnectionInterfaceManagerReleaseInterfaceSelection(uint64_t a1, unsigned int a2)
{
  v3[0] = a1;
  v3[1] = a2;
  dispatch_sync_f(*(dispatch_queue_t *)(a1 + 16), v3, (dispatch_function_t)connectionInterfaceManager_releaseInterfaceSelection);
  return 0;
}

CFIndex connectionInterfaceManager_releaseInterfaceSelection(unsigned int *a1)
{
  if (gLogCategory_APSConnectionInterfaceManager <= 30
    && (gLogCategory_APSConnectionInterfaceManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFSetRemoveValue(*(CFMutableSetRef *)(*(void *)a1 + 32), (const void *)a1[2]);
  CFIndex result = CFSetGetCount(*(CFSetRef *)(*(void *)a1 + 32));
  if (!result)
  {
    if (gLogCategory_APSConnectionInterfaceManager <= 40)
    {
      if (gLogCategory_APSConnectionInterfaceManager != -1 || (CFIndex result = _LogCategory_Initialize(), result)) {
        CFIndex result = LogPrintF();
      }
    }
    *(_DWORD *)(*(void *)a1 + 24) = 0;
  }
  return result;
}

uint64_t APSReferencingAllocatorCreate(const __CFAllocator *a1, void *a2, CFAllocatorRef *a3)
{
  memset(&context.reallocate, 0, 24);
  if (a2 && a3)
  {
    context.version = 0;
    context.info = a2;
    context.retain = (CFAllocatorRetainCallBack)MEMORY[0x1E4F1C280];
    context.release = (CFAllocatorReleaseCallBack)MEMORY[0x1E4F1C278];
    context.copyDescription = (CFAllocatorCopyDescriptionCallBack)MEMORY[0x1E4F1C220];
    context.allocate = (CFAllocatorAllocateCallBack)refAllocator_Allocate;
    CFAllocatorRef v4 = CFAllocatorCreate(a1, &context);
    *a3 = v4;
    if (v4)
    {
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t refAllocator_Allocate()
{
  return 0;
}

uint64_t APSReferencingAllocatorGetOverheadBytes()
{
  if (APSReferencingAllocatorGetOverheadBytes_sOnce != -1) {
    dispatch_once_f(&APSReferencingAllocatorGetOverheadBytes_sOnce, &APSReferencingAllocatorGetOverheadBytes_sOverheadBytes, (dispatch_function_t)refAllocator_calculateOverheadBytes);
  }
  return APSReferencingAllocatorGetOverheadBytes_sOverheadBytes;
}

void refAllocator_calculateOverheadBytes(void *a1)
{
  context.reallocate = 0;
  memset(&context.retain, 0, 24);
  CFTypeRef cf = 0;
  context.version = 0;
  context.info = a1;
  context.allocate = (CFAllocatorAllocateCallBack)refAllocatorOverhead_Allocate;
  context.deallocate = (CFAllocatorDeallocateCallBack)refAllocatorOverhead_Deallocate;
  context.preferredSize = 0;
  CFAllocatorRef v1 = CFAllocatorCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], &context);
  CFAllocatorRef v2 = v1;
  if (!v1
    || (CFAllocatorRef v1 = (const __CFAllocator *)APSReferencingAllocatorCreate(v1, (void *)*MEMORY[0x1E4F1D260], (CFAllocatorRef *)&cf), v1))
  {
    APSLogErrorAt((uint64_t)v1);
  }
  if (cf) {
    CFRelease(cf);
  }
  if (v2) {
    CFRelease(v2);
  }
}

void refAllocatorOverhead_Deallocate(void *ptr)
{
}

void *refAllocatorOverhead_Allocate(CFIndex size, CFOptionFlags hint, void *a3)
{
  *a3 += size;
  return CFAllocatorAllocate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], size, hint);
}

uint64_t APSPSGDataSourceGetClassID()
{
  if (APSPSGDataSourceGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSPSGDataSourceGetClassID_sRegisterOnce, &APSPSGDataSourceGetClassID_sClassID, (dispatch_function_t)psgDataSource_registerBaseClass);
  }
  return APSPSGDataSourceGetClassID_sClassID;
}

uint64_t psgDataSource_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&psgDataSource_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

CFStringRef psgDataSource_copyFormattingDesc(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"[APSPSGDataSource %p]", a1);
}

uint64_t APSPSGDataSourceGetTypeID()
{
  if (APSPSGDataSourceGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSPSGDataSourceGetClassID_sRegisterOnce, &APSPSGDataSourceGetClassID_sClassID, (dispatch_function_t)psgDataSource_registerBaseClass);
  }
  uint64_t v0 = APSPSGDataSourceGetClassID_sClassID;

  return MEMORY[0x1F40DB8F8](v0);
}

uint64_t flatQueueValueInfoCF_FreeValue(uint64_t a1, CFTypeRef *a2)
{
  return 0;
}

uint64_t flatQueueValueInfoCF_CopyValue(uint64_t a1, CFTypeRef *a2, CFTypeRef *a3)
{
  *a3 = CFRetain(*a2);
  return 0;
}

uint64_t APSFlatQueueGetTypeID()
{
  if (gAPSFlatQueueInitOnce != -1) {
    dispatch_once_f(&gAPSFlatQueueInitOnce, 0, (dispatch_function_t)_APSFlatQueueGetTypeID);
  }
  return gAPSFlatQueueTypeID;
}

uint64_t _APSFlatQueueGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSFlatQueueTypeID = result;
  return result;
}

void _APSFlatQueueFinalize(uint64_t a1)
{
  uint64_t v2 = a1 + 16;
  if (*(void *)(a1 + 32) && *(void *)(a1 + 96))
  {
    uint64_t v3 = *(void *)(a1 + 80);
    do
    {
      (*(void (**)(uint64_t, uint64_t))(a1 + 32))(v2, *(void *)(a1 + 72) + *(void *)(a1 + 16) * v3);
      uint64_t v3 = (*(void *)(a1 + 80) + 1) & *(void *)(a1 + 64);
      *(void *)(a1 + 80) = v3;
      uint64_t v4 = *(void *)(a1 + 96) - 1;
      *(void *)(a1 + 96) = v4;
    }
    while (v4);
  }
  unint64_t v5 = *(void (**)(uint64_t))(a1 + 40);
  if (v5) {
    v5(v2);
  }
  dispatch_queue_t v6 = *(void **)(a1 + 72);

  free(v6);
}

uint64_t APSFlatQueueCreate(long long *a1, uint64_t a2, void *a3)
{
  if (!a1) {
    return 4294960591;
  }
  uint64_t v5 = 4294960591;
  if (a3 && *(void *)a1)
  {
    if (gAPSFlatQueueInitOnce != -1) {
      dispatch_once_f(&gAPSFlatQueueInitOnce, 0, (dispatch_function_t)_APSFlatQueueGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      int v7 = (void *)Instance;
      *(void *)(Instance + 96) = 0;
      *(_OWORD *)(Instance + 64) = 0u;
      *(_OWORD *)(Instance + 80) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      *(_OWORD *)(Instance + 48) = 0u;
      *(_OWORD *)(Instance + 16) = 0u;
      long long v8 = *a1;
      long long v9 = a1[1];
      *(void *)(Instance + 48) = *((void *)a1 + 4);
      *(_OWORD *)(Instance + 16) = v8;
      *(_OWORD *)(Instance + 32) = v9;
      unsigned int v10 = iceil2();
      v7[7] = v10;
      _OWORD v7[8] = v10 - 1;
      uint64_t v11 = malloc_type_malloc(v7[2] * v10, 0x1F1C35CCuLL);
      v7[9] = v11;
      if (v11)
      {
        uint64_t v5 = 0;
        *a3 = v7;
      }
      else
      {
        CFRelease(v7);
        return 4294960568;
      }
      return v5;
    }
    uint64_t v5 = 4294960568;
  }
  uint64_t v13 = (void (*)(long long *))*((void *)a1 + 3);
  if (v13) {
    v13(a1);
  }
  return v5;
}

uint64_t APSFlatQueueGetCapacity(uint64_t result)
{
  if (result) {
    return *(void *)(result + 56);
  }
  return result;
}

uint64_t APSFlatQueueGetCount(uint64_t result)
{
  if (result) {
    return *(void *)(result + 96);
  }
  return result;
}

BOOL APSFlatQueueIsEmpty(uint64_t a1)
{
  return !a1 || *(void *)(a1 + 96) == 0;
}

uint64_t APSFlatQueueEnqueue(uint64_t a1, void *__src)
{
  uint64_t result = 4294960591;
  if (a1 && __src)
  {
    uint64_t v5 = *(void *)(a1 + 96);
    if (v5 == *(void *)(a1 + 56))
    {
      if (v5) {
        uint64_t v6 = 2 * v5;
      }
      else {
        uint64_t v6 = 1;
      }
      int v7 = (char *)malloc_type_realloc(*(void **)(a1 + 72), *(void *)(a1 + 16) * v6, 0xBEBAFDDCuLL);
      if (!v7) {
        return 4294960568;
      }
      long long v8 = v7;
      unsigned int v10 = (void *)(a1 + 88);
      unint64_t v9 = *(void *)(a1 + 88);
      uint64_t v11 = *(void *)(a1 + 56);
      uint64_t v12 = *(void *)(a1 + 80);
      if (v9 <= v11 - v12)
      {
        memcpy(&v7[*(void *)(a1 + 16) * v11], v7, *(void *)(a1 + 16) * v9);
      }
      else
      {
        memcpy(&v7[*(void *)(a1 + 16) * (v12 + v11)], &v7[*(void *)(a1 + 16) * v12], *(void *)(a1 + 16) * (v11 - v12));
        unsigned int v10 = (void *)(a1 + 80);
      }
      *v10 += *(void *)(a1 + 56);
      *(void *)(a1 + 56) = v6;
      *(void *)(a1 + 64) = v6 - 1;
      *(void *)(a1 + 72) = v8;
    }
    else
    {
      long long v8 = *(char **)(a1 + 72);
    }
    uint64_t v13 = *(uint64_t (**)(void))(a1 + 24);
    if (v13)
    {
      uint64_t result = v13();
      if (result) {
        return result;
      }
    }
    else
    {
      memcpy(&v8[*(void *)(a1 + 16) * *(void *)(a1 + 88)], __src, *(void *)(a1 + 16));
    }
    uint64_t result = 0;
    uint64_t v14 = *(void *)(a1 + 96) + 1;
    *(void *)(a1 + 88) = (*(void *)(a1 + 88) + 1) & *(void *)(a1 + 64);
    *(void *)(a1 + 96) = v14;
  }
  return result;
}

uint64_t APSFlatQueueDequeue(size_t *a1, void *__dst)
{
  if (!a1) {
    return 4294960591;
  }
  if (!a1[12]) {
    return 4294960546;
  }
  if (__dst)
  {
    memcpy(__dst, (const void *)(a1[9] + a1[2] * a1[10]), a1[2]);
LABEL_5:
    uint64_t result = 0;
    a1[10] = (a1[10] + 1) & a1[8];
    --a1[12];
    return result;
  }
  uint64_t v4 = (uint64_t (*)(void))a1[4];
  if (!v4) {
    goto LABEL_5;
  }
  uint64_t result = v4();
  if (!result) {
    goto LABEL_5;
  }
  return result;
}

uint64_t APSFlatQueuePeek(size_t *a1, void *__dst)
{
  uint64_t result = 4294960591;
  if (a1 && __dst)
  {
    if (a1[12])
    {
      memcpy(__dst, (const void *)(a1[9] + a1[2] * a1[10]), a1[2]);
      return 0;
    }
    else
    {
      return 4294960546;
    }
  }
  return result;
}

uint64_t APSFlatQueueRemoveAllValues(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  if (*(void *)(a1 + 32))
  {
    if (*(void *)(a1 + 96))
    {
      uint64_t v2 = *(void *)(a1 + 80);
      while (1)
      {
        uint64_t result = (*(uint64_t (**)(uint64_t, uint64_t))(a1 + 32))(a1 + 16, *(void *)(a1 + 72) + *(void *)(a1 + 16) * v2);
        if (result) {
          break;
        }
        uint64_t v2 = (*(void *)(a1 + 80) + 1) & *(void *)(a1 + 64);
        *(void *)(a1 + 80) = v2;
        uint64_t v4 = *(void *)(a1 + 96) - 1;
        *(void *)(a1 + 96) = v4;
        if (!v4) {
          return 0;
        }
      }
    }
    else
    {
      return 0;
    }
  }
  else
  {
    uint64_t result = 0;
    *(void *)(a1 + 80) = *(void *)(a1 + 88);
    *(void *)(a1 + 96) = 0;
  }
  return result;
}

uint64_t APSFlatQueueDequeueWhileF(void *a1, uint64_t (*a2)(uint64_t, uint64_t), uint64_t a3)
{
  uint64_t result = 4294960591;
  if (a1 && a2)
  {
    if (a1[12])
    {
      uint64_t v7 = a1[10];
      while (1)
      {
        uint64_t v8 = a1[9] + a1[2] * v7;
        uint64_t result = a2(v8, a3);
        if (!result) {
          break;
        }
        unint64_t v9 = (uint64_t (*)(void *, uint64_t))a1[4];
        if (v9)
        {
          uint64_t result = v9(a1 + 2, v8);
          if (result) {
            break;
          }
        }
        uint64_t v7 = (a1[10] + 1) & a1[8];
        a1[10] = v7;
        uint64_t v10 = a1[12] - 1;
        a1[12] = v10;
        if (!v10) {
          return 0;
        }
      }
    }
    else
    {
      return 0;
    }
  }
  return result;
}

uint64_t APSFlatQueueDequeueWhileB(void *a1, uint64_t a2)
{
  if (a2) {
    uint64_t v3 = flatQueue_dequeueWhileBCallbackF;
  }
  else {
    uint64_t v3 = 0;
  }
  return APSFlatQueueDequeueWhileF(a1, v3, a2);
}

uint64_t flatQueue_dequeueWhileBCallbackF(uint64_t a1, uint64_t a2)
{
  return (*(uint64_t (**)(uint64_t, uint64_t))(a2 + 16))(a2, a1);
}

uint64_t APSDebugAllocatorCreate(const void *a1, __CFString *a2, CFAllocatorRef *a3)
{
  if (!a3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t v6 = (unint64_t *)malloc_type_calloc(1uLL, 0x68uLL, 0x10E004095A892B6uLL);
  if (!v6)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  uint64_t v7 = v6;
  memset(&v21, 0, sizeof(v21));
  atomic_store(1uLL, v6);
  if (a1) {
    CFTypeRef v8 = CFRetain(a1);
  }
  else {
    CFTypeRef v8 = 0;
  }
  void v7[2] = (unint64_t)v8;
  if (a2) {
    unint64_t v9 = a2;
  }
  else {
    unint64_t v9 = &stru_1F26EE2F0;
  }
  v7[3] = (unint64_t)CFRetain(v9);
  if ((APSSettingsGetIntWithOverrideAndDefault(@"debugAllocatorHighWaterUs", 0, 100) & 0x80000000) != 0) {
    unint64_t IntWithOverrideAndDefault = 0;
  }
  else {
    unint64_t IntWithOverrideAndDefault = (int)APSSettingsGetIntWithOverrideAndDefault(@"debugAllocatorHighWaterUs", 0, 100);
  }
  v7[6] = IntWithOverrideAndDefault;
  CFAllocatorRef v11 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t v12 = APSAtomicMessageQueueCreate(*MEMORY[0x1E4F1CF80], 40, (uint64_t *)v7 + 4);
  if (v12)
  {
    uint64_t v19 = v12;
LABEL_27:
    APSLogErrorAt(v12);
    goto LABEL_20;
  }
  uint64_t v13 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  uint64_t v14 = dispatch_queue_create("APSDebugAllocator", v13);
  v7[7] = (unint64_t)v14;
  if (!v14)
  {
LABEL_28:
    APSLogErrorAt(0);
    uint64_t v19 = 4294960568;
    goto LABEL_20;
  }
  uint64_t v12 = APSRealTimeSignalCreate(v14, v7, (uint64_t)dbgAllocator_messageSignalHandler, 0, (uint64_t)(v7 + 5));
  if (v12)
  {
    uint64_t v19 = v12;
    goto LABEL_27;
  }
  atomic_store(0, v7 + 11);
  atomic_store(0, v7 + 12);
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(v11, 0, 0, 0);
  v7[9] = (unint64_t)Mutable;
  if (!Mutable) {
    goto LABEL_28;
  }
  CFMutableDictionaryRef v16 = CFDictionaryCreateMutable(v11, 0, 0, 0);
  v7[10] = (unint64_t)v16;
  if (!v16) {
    goto LABEL_28;
  }
  uint64_t v17 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, (dispatch_queue_t)v7[7]);
  _OWORD v7[8] = (unint64_t)v17;
  if (!v17) {
    goto LABEL_28;
  }
  dispatch_set_context(v17, v7);
  dispatch_source_set_event_handler_f((dispatch_source_t)v7[8], (dispatch_function_t)dbgAllocator_timerTick);
  dispatch_source_set_timer((dispatch_source_t)v7[8], 0, 0x12A05F200uLL, 0x4C4B40uLL);
  dispatch_resume((dispatch_object_t)v7[8]);
  v21.copyDescription = 0;
  v21.version = 0;
  v21.allocate = (CFAllocatorAllocateCallBack)dbgAllocator_allocate;
  v21.reallocate = 0;
  v21.deallocate = (CFAllocatorDeallocateCallBack)dbgAllocator_deallocate;
  v21.preferredSize = (CFAllocatorPreferredSizeCallBack)dbgAllocator_preferredSize;
  v21.info = v7;
  v21.retain = (CFAllocatorRetainCallBack)dbgAllocator_retain;
  v21.release = (CFAllocatorReleaseCallBack)dbgAllocator_release;
  CFAllocatorRef v18 = CFAllocatorCreate(v11, &v21);
  if (!v18) {
    goto LABEL_28;
  }
  uint64_t v19 = 0;
  v7[1] = (unint64_t)v18;
  *a3 = v18;
LABEL_20:
  dbgAllocator_release(v7);
  return v19;
}

void dbgAllocator_release(void *a1)
{
  if (atomic_fetch_add((atomic_ullong *volatile)a1, 0xFFFFFFFFFFFFFFFFLL) == 1)
  {
    uint64_t v2 = (const void *)*((void *)a1 + 5);
    if (v2) {
      CFRelease(v2);
    }
    uint64_t v3 = *((void *)a1 + 8);
    if (v3)
    {
      dispatch_source_cancel(v3);
      dispatch_sync_f(*((dispatch_queue_t *)a1 + 7), a1, (dispatch_function_t)dbgAllocator_flush);
      dispatch_release(*((dispatch_object_t *)a1 + 8));
    }
    uint64_t v4 = *((void *)a1 + 7);
    if (v4) {
      dispatch_release(v4);
    }
    CFDictionaryRef v5 = (const __CFDictionary *)*((void *)a1 + 10);
    if (v5)
    {
      CFDictionaryApplyFunction(v5, (CFDictionaryApplierFunction)dbgAllocator_freeStatsApplier, a1);
      CFRelease(*((CFTypeRef *)a1 + 10));
    }
    uint64_t v6 = (const void *)*((void *)a1 + 9);
    if (v6) {
      CFRelease(v6);
    }
    uint64_t v7 = (const void *)*((void *)a1 + 2);
    if (v7) {
      CFRelease(v7);
    }
    CFTypeRef v8 = (const void *)*((void *)a1 + 3);
    if (v8) {
      CFRelease(v8);
    }
    free(a1);
  }
}

void dbgAllocator_freeStatsApplier(int a1, void *a2)
{
}

atomic_ullong *dbgAllocator_retain(atomic_ullong *result)
{
  return result;
}

CFIndex dbgAllocator_preferredSize(CFIndex size, CFOptionFlags hint, uint64_t a3)
{
  return CFAllocatorGetPreferredSizeForSize(*(CFAllocatorRef *)(a3 + 16), size, hint);
}

uint64_t dbgAllocator_deallocate(void *a1, uint64_t a2)
{
  long long v8 = 0u;
  long long v9 = 0u;
  uint64_t v4 = mach_absolute_time();
  CFAllocatorDeallocate(*(CFAllocatorRef *)(a2 + 16), a1);
  LODWORD(v8) = 2;
  *(void *)&long long v9 = a1;
  uint64_t v10 = mach_absolute_time() - v4;
  uint64_t result = APSAtomicMessageQueueSendMessage(*(void *)(a2 + 32), &v8);
  uint64_t v6 = *(atomic_uint **)(*(void *)(a2 + 40) + 16);
  int v7 = 1;
  atomic_compare_exchange_strong_explicit(v6 + 10, (unsigned int *)&v7, 2u, memory_order_release, memory_order_relaxed);
  if (v7 == 1)
  {
    return caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v6 + 6), (caulk::concurrent::message *)v6);
  }
  return result;
}

void *dbgAllocator_allocate(CFIndex a1, CFOptionFlags a2, uint64_t a3)
{
  uint64_t v6 = mach_absolute_time();
  int v7 = CFAllocatorAllocate(*(CFAllocatorRef *)(a3 + 16), a1, a2);
  uint64_t v8 = mach_absolute_time();
  if (v7)
  {
    int v9 = 1;
    v12[1] = a1;
    v12[0] = 1;
    _OWORD v12[2] = 0;
    v12[3] = v7;
    void v12[4] = v8 - v6;
    APSAtomicMessageQueueSendMessage(*(void *)(a3 + 32), v12);
    uint64_t v10 = *(atomic_uint **)(*(void *)(a3 + 40) + 16);
    atomic_compare_exchange_strong_explicit(v10 + 10, (unsigned int *)&v9, 2u, memory_order_release, memory_order_relaxed);
    if (v9 == 1) {
      caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v10 + 6), (caulk::concurrent::message *)v10);
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v7;
}

void dbgAllocator_timerTick(CFDictionaryRef *context)
{
  if (gLogCategory_APSDebugAllocator <= 50
    && (gLogCategory_APSDebugAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFDictionaryApplyFunction(context[10], (CFDictionaryApplierFunction)dbgAllocator_logStatsApplier, context);
  CFDictionaryRef v2 = context[10];

  CFDictionaryApplyFunction(v2, (CFDictionaryApplierFunction)dbgAllocator_resetStatsApplier, context);
}

double dbgAllocator_resetStatsApplier(uint64_t a1, uint64_t a2)
{
  double result = 0.0;
  *(_OWORD *)(a2 + 32) = 0u;
  *(_OWORD *)(a2 + 48) = 0u;
  *(_OWORD *)a2 = 0u;
  *(_OWORD *)(a2 + 16) = 0u;
  *(void *)(a2 + 8) = -1;
  *(void *)(a2 + 40) = -1;
  return result;
}

uint64_t dbgAllocator_logStatsApplier(uint64_t a1, void *a2)
{
  if (*a2 || a2[4])
  {
    if (gLogCategory_APSDebugAllocator <= 50)
    {
      if (gLogCategory_APSDebugAllocator != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
        uint64_t result = LogPrintF();
      }
    }
    if (*a2)
    {
      if (gLogCategory_APSDebugAllocator <= 50)
      {
        if (gLogCategory_APSDebugAllocator != -1 || (uint64_t result = _LogCategory_Initialize(), result))
        {
          UpTicksToMicroseconds();
          UpTicksToMicroseconds();
          UpTicksToMicroseconds();
          uint64_t result = LogPrintF();
        }
      }
    }
    if (a2[4])
    {
      if (gLogCategory_APSDebugAllocator <= 50)
      {
        if (gLogCategory_APSDebugAllocator != -1 || (uint64_t result = _LogCategory_Initialize(), result))
        {
          UpTicksToMicroseconds();
          UpTicksToMicroseconds();
          UpTicksToMicroseconds();
          return LogPrintF();
        }
      }
    }
  }
  return result;
}

uint64_t dbgAllocator_messageSignalHandler(uint64_t a1)
{
  unint64_t v16 = 0;
  *(_OWORD *)CFStringRef key = 0u;
  *(_OWORD *)CMTime v15 = 0u;
  __swp(v2, (unsigned int *)(a1 + 88));
  __swp(v1, (unsigned int *)(a1 + 96));
  if (v2
    && gLogCategory_APSDebugAllocator <= 50
    && (gLogCategory_APSDebugAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (v1
    && gLogCategory_APSDebugAllocator <= 50
    && (gLogCategory_APSDebugAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  while (1)
  {
    uint64_t result = APSAtomicMessageQueueReadMessage(*(void *)(a1 + 32), key);
    if (!result) {
      return result;
    }
    unint64_t v5 = v16;
    unint64_t v6 = UpTicksToMicroseconds();
    if (LODWORD(key[0]) == 2)
    {
      CMTimeValue value = 0;
      if (v6 >= *(void *)(a1 + 48))
      {
        if (gLogCategory_APSDebugAllocator > 90
          || gLogCategory_APSDebugAllocator == -1 && !_LogCategory_Initialize())
        {
          goto LABEL_42;
        }
      }
      else if (gLogCategory_APSDebugAllocator > 30 {
             || gLogCategory_APSDebugAllocator == -1 && !_LogCategory_Initialize())
      }
      {
        goto LABEL_42;
      }
      LogPrintF();
LABEL_42:
      CFAllocatorRef v11 = v15[0];
      if (CFDictionaryGetValueIfPresent(*(CFDictionaryRef *)(a1 + 72), v15[0], (const void **)&value))
      {
        uint64_t v12 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 80), value);
        unint64_t v13 = v12[5];
        ++v12[4];
        if (v5 < v13) {
          void v12[5] = v5;
        }
        if (v5 > v12[6]) {
          void v12[6] = v5;
        }
        v12[7] += v5;
        CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 72), v11);
      }
    }
    else if (LODWORD(key[0]) == 1)
    {
      if (v6 >= *(void *)(a1 + 48))
      {
        if (gLogCategory_APSDebugAllocator <= 90
          && (gLogCategory_APSDebugAllocator != -1 || _LogCategory_Initialize()))
        {
LABEL_24:
          LogPrintF();
        }
      }
      else if (gLogCategory_APSDebugAllocator <= 30 {
             && (gLogCategory_APSDebugAllocator != -1 || _LogCategory_Initialize()))
      }
      {
        goto LABEL_24;
      }
      int v7 = key[1];
      uint64_t v8 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 80), key[1]);
      if (v8) {
        goto LABEL_36;
      }
      int v9 = malloc_type_malloc(0x40uLL, 0x1000040FA0F61DDuLL);
      if (v9)
      {
        uint64_t v8 = v9;
        *((_OWORD *)v9 + 2) = 0u;
        *((_OWORD *)v9 + 3) = 0u;
        *(_OWORD *)int v9 = 0u;
        *((_OWORD *)v9 + 1) = 0u;
        v9[1] = -1;
        v9[5] = -1;
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 80), v7, v9);
LABEL_36:
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 72), v15[1], v7);
        unint64_t v10 = v8[1];
        ++*v8;
        if (v5 < v10) {
          v8[1] = v5;
        }
        if (v5 > v8[2]) {
          _OWORD v8[2] = v5;
        }
        v8[3] += v5;
      }
      else
      {
        APSLogErrorAt(0);
      }
    }
  }
}

uint64_t APSPriorityDispatcherGetTypeID()
{
  if (gAPSPriorityDispatcherInitOnce != -1) {
    dispatch_once_f(&gAPSPriorityDispatcherInitOnce, 0, (dispatch_function_t)_APSPriorityDispatcherGetTypeID);
  }
  return gAPSPriorityDispatcherTypeID;
}

uint64_t _APSPriorityDispatcherGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSPriorityDispatcherTypeID = result;
  return result;
}

uint64_t _APSPriorityDispatcherFinalize(void *a1)
{
  uint64_t v2 = a1[2];
  if (v2)
  {
    dispatch_release(v2);
    a1[2] = 0;
  }
  uint64_t v3 = a1[5];
  if (v3)
  {
    dispatch_release(v3);
    a1[5] = 0;
  }
  uint64_t result = a1[3];
  if (result)
  {
    uint64_t result = FigSimpleMutexDestroy();
    a1[3] = 0;
  }
  if (gLogCategory_APSPriorityDispatcher <= 50)
  {
    if (gLogCategory_APSPriorityDispatcher != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSPriorityDispatcherCreate(NSObject *a1, int a2, CFTypeRef *a3)
{
  if (a1 && a3)
  {
    if (gAPSPriorityDispatcherInitOnce != -1) {
      dispatch_once_f(&gAPSPriorityDispatcherInitOnce, 0, (dispatch_function_t)_APSPriorityDispatcherGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      int v7 = (void *)Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      dispatch_retain(a1);
      void v7[2] = a1;
      uint64_t v8 = FigSimpleMutexCreate();
      v7[3] = v8;
      if (v8)
      {
        uint64_t v9 = priorityDispatcher_setPriority((uint64_t)v7, a2, 1);
        if (v9)
        {
          uint64_t v10 = v9;
          APSLogErrorAt(v9);
        }
        else
        {
          if (gLogCategory_APSPriorityDispatcher <= 50
            && (gLogCategory_APSPriorityDispatcher != -1 || _LogCategory_Initialize()))
          {
            FigThreadGetMachThreadPriorityValue();
            LogPrintF();
          }
          uint64_t v10 = 0;
          *a3 = CFRetain(v7);
        }
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v10 = 4294960568;
      }
      CFRelease(v7);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v10;
}

uint64_t priorityDispatcher_setPriority(uint64_t a1, int a2, int a3)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 24));
  if (!a3)
  {
    if (*(_DWORD *)(a1 + 32) == a2)
    {
      uint64_t v9 = 0;
      goto LABEL_16;
    }
    if (gLogCategory_APSPriorityDispatcher <= 50
      && (gLogCategory_APSPriorityDispatcher != -1 || _LogCategory_Initialize()))
    {
      FigThreadGetMachThreadPriorityValue();
      FigThreadGetMachThreadPriorityValue();
      LogPrintF();
    }
  }
  uint64_t v6 = FigDispatchQueueCreateWithPriority();
  if (!v6)
  {
    APSLogErrorAt(0);
    uint64_t v9 = 4294960568;
LABEL_16:
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 24));
    return v9;
  }
  int v7 = v6;
  uint64_t v8 = *(NSObject **)(a1 + 40);
  if (v8)
  {
    dispatch_release(v8);
    *(void *)(a1 + 40) = 0;
  }
  dispatch_retain(v7);
  *(void *)(a1 + 40) = v7;
  *(_DWORD *)(a1 + 32) = a2;
  dispatch_retain(*(dispatch_object_t *)(a1 + 16));
  dispatch_async_f(*(dispatch_queue_t *)(a1 + 40), *(void **)(a1 + 16), (dispatch_function_t)priorityDispatcher_syncFlushOnQueue);
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 24));
  dispatch_release(v7);
  return 0;
}

void priorityDispatcher_syncFlushOnQueue(NSObject *a1)
{
  dispatch_sync_f(a1, 0, (dispatch_function_t)priorityDispatcher_flush);
  if (a1)
  {
    dispatch_release(a1);
  }
}

uint64_t APSPriorityDispatcherSetPriority(uint64_t a1, int a2)
{
  return priorityDispatcher_setPriority(a1, a2, 0);
}

uint64_t APSPriorityDispatcherSyncF(uint64_t a1, NSObject *a2, NSObject *a3)
{
  return priorityDispatcher_dispatchFunction(a1, a2, a3, 0);
}

uint64_t priorityDispatcher_dispatchFunction(uint64_t a1, NSObject *a2, NSObject *a3, int a4)
{
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t v8 = (dispatch_object_t *)malloc_type_malloc(0x18uLL, 0xA00402214FCE6uLL);
  if (!v8)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  uint64_t v9 = v8;
  dispatch_retain(*(dispatch_object_t *)(a1 + 16));
  uint64_t v10 = *(pthread_mutex_t **)(a1 + 24);
  dispatch_object_t *v9 = *(dispatch_object_t *)(a1 + 16);
  v9[1] = a2;
  _OWORD v9[2] = a3;
  pthread_mutex_lock(v10);
  dispatch_retain(*(dispatch_object_t *)(a1 + 40));
  CFAllocatorRef v11 = *(NSObject **)(a1 + 40);
  uint64_t v12 = pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 24));
  if (a4)
  {
    if (a4 != 1)
    {
      if (a4 != 2)
      {
        if (*v9) {
          dispatch_release(*v9);
        }
        free(v9);
        uint64_t v13 = 4294960587;
        if (v11) {
          goto LABEL_19;
        }
        return v13;
      }
      MEMORY[0x1D25EE330](v12);
      FigThreadCopyProperty();
      CFGetInt64Ranged();
      if (gLogCategory_APSPriorityDispatcher <= 90
        && (gLogCategory_APSPriorityDispatcher != -1 || _LogCategory_Initialize()))
      {
        FigThreadGetMachThreadPriorityValue();
        LogPrintF();
      }
    }
    dispatch_async_f(v11, v9, (dispatch_function_t)priorityDispatcher_invokeAndDestroyContext);
  }
  else
  {
    dispatch_sync_f(v11, v9, (dispatch_function_t)priorityDispatcher_invokeAndDestroyContext);
  }
  uint64_t v13 = 0;
  if (v11) {
LABEL_19:
  }
    dispatch_release(v11);
  return v13;
}

void priorityDispatcher_invokeAndDestroyContext(uint64_t a1)
{
  dispatch_sync_f(*(dispatch_queue_t *)a1, *(void **)(a1 + 16), *(dispatch_function_t *)(a1 + 8));
  if (*(void *)a1) {
    dispatch_release(*(dispatch_object_t *)a1);
  }

  free((void *)a1);
}

uint64_t APSPriorityDispatcherAsyncF(uint64_t a1, NSObject *a2, NSObject *a3)
{
  return priorityDispatcher_dispatchFunction(a1, a2, a3, 1);
}

uint64_t APSPriorityDispatcherAsyncEnforcePriorityF(uint64_t a1, NSObject *a2, NSObject *a3)
{
  return priorityDispatcher_dispatchFunction(a1, a2, a3, 2);
}

uint64_t APSPriorityDispatcherSync(uint64_t a1, void *a2)
{
  return priorityDispatcher_dispatchBlock(a1, a2, 0);
}

uint64_t priorityDispatcher_dispatchBlock(uint64_t a1, void *aBlock, int a3)
{
  if (a1 && aBlock)
  {
    unint64_t v5 = _Block_copy(aBlock);
    if (v5)
    {
      uint64_t v6 = v5;
      uint64_t v7 = priorityDispatcher_dispatchFunction(a1, priorityDispatcher_invokeAndReleaseBlock, v5, a3);
      uint64_t v8 = v7;
      if (v7)
      {
        APSLogErrorAt(v7);
        _Block_release(v6);
      }
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v8;
}

void priorityDispatcher_invokeAndReleaseBlock(void (**a1)(void))
{
  a1[2]();

  _Block_release(a1);
}

uint64_t APSPriorityDispatcherAsync(uint64_t a1, void *a2)
{
  return priorityDispatcher_dispatchBlock(a1, a2, 1);
}

uint64_t APSPriorityDispatcherAsyncEnforcePriority(uint64_t a1, void *a2)
{
  return priorityDispatcher_dispatchBlock(a1, a2, 2);
}

uint64_t APSPriorityDispatcherSyncTask(uint64_t a1, objc_class *a2, objc_class *a3)
{
  v6[0].isa = a2;
  v6[1].isa = a3;
  if (a1 && a2)
  {
    uint64_t v7 = 0;
    uint64_t v3 = priorityDispatcher_dispatchFunction(a1, priorityDispatcher_syncTask, v6, 0);
    if (v3)
    {
      uint64_t v4 = v3;
      APSLogErrorAt(v3);
    }
    else
    {
      return v7;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

uint64_t priorityDispatcher_syncTask(uint64_t a1)
{
  uint64_t result = (*(uint64_t (**)(void))a1)(*(void *)(a1 + 8));
  *(_DWORD *)(a1 + 16) = result;
  return result;
}

uint64_t APSRTPJitterBufferCreate(uint64_t a1, long long *a2, long long *a3, int a4, char a5, const void *a6, _DWORD *a7)
{
  if (!a2 || !a3 || *((_DWORD *)a3 + 2) != 1819304813 || !a4)
  {
    APSLogErrorAt(0);
    uint64_t v14 = 0;
    LODWORD(v34) = -6705;
    goto LABEL_45;
  }
  if (APSRTPJitterBufferGetTypeID_once != -1) {
    dispatch_once(&APSRTPJitterBufferGetTypeID_once, &__block_literal_global_1051);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  uint64_t v14 = Instance;
  if (!Instance) {
    goto LABEL_49;
  }
  *(_OWORD *)(Instance + 112) = 0u;
  CMTime v15 = (double *)(Instance + 112);
  *(_OWORD *)(Instance + 256) = 0u;
  *(_OWORD *)(Instance + 272) = 0u;
  *(_OWORD *)(Instance + 224) = 0u;
  *(_OWORD *)(Instance + 240) = 0u;
  *(_OWORD *)(Instance + 192) = 0u;
  *(_OWORD *)(Instance + 208) = 0u;
  *(_OWORD *)(Instance + 160) = 0u;
  *(_OWORD *)(Instance + 176) = 0u;
  *(_OWORD *)(Instance + 128) = 0u;
  *(_OWORD *)(Instance + 144) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 96) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  long long v16 = *a2;
  long long v17 = a2[1];
  *(void *)(Instance + 104) = *((void *)a2 + 4);
  *(_OWORD *)(Instance + 88) = v17;
  *(_OWORD *)(Instance + 72) = v16;
  long long v19 = *a3;
  long long v18 = a3[1];
  *(void *)(Instance + 144) = *((void *)a3 + 4);
  *(_OWORD *)(Instance + 112) = v19;
  *(_OWORD *)(Instance + 128) = v18;
  *(_DWORD *)(Instance + 156) = *(double *)(Instance + 112) * a4 / 0x3E8;
  *(_DWORD *)(Instance + 160) = a4;
  *(unsigned char *)(Instance + 274) = 0;
  *(_DWORD *)(Instance + 236) = 0;
  if (a5) {
    *(_WORD *)(Instance + 164) = 257;
  }
  *(void *)(Instance + 16) = CFRetain(a6);
  dispatch_queue_t v20 = dispatch_queue_create("com.apple.APSRTPJitterBuffer.log", 0);
  *(void *)(v14 + 24) = v20;
  if (!v20)
  {
LABEL_49:
    APSLogErrorAt(0);
    LODWORD(v34) = -6728;
    goto LABEL_45;
  }
  if (gLogCategory_APSRTPJitterBuffer <= 40
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(_DWORD *)(v14 + 80) == 1819304813) {
    unsigned int v21 = 0x5A0u / *(_DWORD *)(v14 + 88);
  }
  else {
    unsigned int v21 = *(_DWORD *)(v14 + 92);
  }
  *(_DWORD *)(v14 + 152) = v21;
  if (!v21)
  {
    APSLogErrorAt(0);
    uint64_t v34 = 4294960591;
LABEL_56:
    uint64_t v36 = v34;
LABEL_63:
    APSLogErrorAt(v36);
    goto LABEL_45;
  }
  size_t v22 = 4 * *(_DWORD *)(v14 + 156) / v21 + 1;
  *(_DWORD *)(v14 + 40) = v22;
  uint64_t v23 = malloc_type_calloc(v22, 0x5C8uLL, 0x10000409D9978B0uLL);
  *(void *)(v14 + 32) = v23;
  if (!v23) {
    goto LABEL_55;
  }
  if (gLogCategory_APSRTPJitterBuffer <= 40
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFAllocatorRef v24 = CFGetAllocator((CFTypeRef)v14);
  uint64_t v25 = CMSimpleQueueCreate(v24, *(_DWORD *)(v14 + 40), (CMSimpleQueueRef *)(v14 + 56));
  if (v25)
  {
    uint64_t v34 = v25;
LABEL_54:
    APSLogErrorAt(v25);
    goto LABEL_56;
  }
  CFAllocatorRef v26 = CFGetAllocator((CFTypeRef)v14);
  uint64_t v25 = CMSimpleQueueCreate(v26, *(_DWORD *)(v14 + 40), (CMSimpleQueueRef *)(v14 + 48));
  if (v25)
  {
    uint64_t v34 = v25;
    goto LABEL_54;
  }
  dispatch_semaphore_t v27 = dispatch_semaphore_create(0);
  *(void *)(v14 + 64) = v27;
  if (!v27)
  {
LABEL_55:
    APSLogErrorAt(0);
    uint64_t v34 = 4294960568;
    goto LABEL_56;
  }
  if (*(_DWORD *)(v14 + 40))
  {
    uint64_t v28 = 0;
    unint64_t v29 = 0;
    do
    {
      CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(v14 + 48), (const void *)(*(void *)(v14 + 32) + v28));
      ++v29;
      v28 += 1480;
    }
    while (v29 < *(unsigned int *)(v14 + 40));
  }
  if (*(double *)(v14 + 72) != *v15 || *(_DWORD *)(v14 + 100) != *(_DWORD *)(v14 + 140))
  {
    APSLogErrorAt(0);
    uint64_t v34 = 4294960591;
LABEL_62:
    uint64_t v36 = v34;
    goto LABEL_63;
  }
  *(_DWORD *)(v14 + 224) = 20 * *(_DWORD *)(v14 + 156) * *(_DWORD *)(v14 + 136);
  uint64_t v30 = MirroredRingBufferInit();
  if (v30)
  {
    uint64_t v34 = v30;
LABEL_61:
    APSLogErrorAt(v30);
    goto LABEL_62;
  }
  if (gLogCategory_APSRTPJitterBuffer <= 40
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v30 = AudioConverterNew((const AudioStreamBasicDescription *)v15 - 1, (const AudioStreamBasicDescription *)(v14 + 112), (AudioConverterRef *)(v14 + 248));
  if (v30)
  {
    uint64_t v34 = v30;
    goto LABEL_61;
  }
  uint64_t v30 = pthread_create((pthread_t *)(v14 + 256), 0, (void *(__cdecl *)(void *))_APSRTPJitterBufferDecodeThreadEntry, (void *)v14);
  if (v30)
  {
    uint64_t v34 = v30;
    goto LABEL_61;
  }
  *(void *)(v14 + 264) = v14 + 256;
  if (*(unsigned char *)(v14 + 164))
  {
    LODWORD(v31) = *(_DWORD *)(v14 + 224);
    HIDWORD(v32) = 1072483532;
    LODWORD(v32) = *(_DWORD *)(v14 + 136);
    unsigned int v33 = 4 * a4 * *(double *)(v14 + 112) / 0x3E8;
    *(_DWORD *)(v14 + 180) = ((double)v31 * 0.9 / (double)v32);
    *(_DWORD *)(v14 + 184) = v33;
    if (gLogCategory_APSRTPJitterBuffer <= 40
      && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  LODWORD(v34) = 0;
LABEL_45:
  if (a7) {
    *a7 = v34;
  }
  return v14;
}

uint64_t _APSRTPJitterBufferDecodeThreadEntry(uint64_t a1)
{
  SetCurrentThreadPriority();
  if (gLogCategory_APSRTPJitterBuffer <= 30
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    uint64_t v2 = *(NSObject **)(a1 + 24);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = ___APSRTPJitterBufferDecodeThreadEntry_block_invoke;
    block[3] = &__block_descriptor_tmp_28;
    block[4] = a1;
    dispatch_async(v2, block);
  }
  while (!*(unsigned char *)(a1 + 273))
  {
    dispatch_semaphore_wait(*(dispatch_semaphore_t *)(a1 + 64), 0xFFFFFFFFFFFFFFFFLL);
    if (*(unsigned char *)(a1 + 273)) {
      break;
    }
    uint64_t v4 = CMSimpleQueueDequeue(*(CMSimpleQueueRef *)(a1 + 56));
    if (*(unsigned char *)(a1 + 273)) {
      break;
    }
    unint64_t v5 = v4;
    if (v4)
    {
      if (*((void *)v4 + 184))
      {
        if (!*(unsigned char *)(a1 + 272))
        {
          int v6 = *(_DWORD *)(a1 + 228);
          if (*(unsigned char *)(a1 + 164))
          {
            *(_DWORD *)(a1 + 232) = v6;
            *(_DWORD *)(a1 + 236) = v6 - v4[1];
            *(_DWORD *)(a1 + 240) = v6;
          }
          else
          {
            *(_DWORD *)(a1 + 232) = v4[1];
            int v7 = v4[1];
            int v8 = v7 - v6;
            int v9 = *(_DWORD *)(a1 + 156);
            int v10 = v6 - v7 + v9;
            if (v8 >= v9) {
              int v10 = 0;
            }
            *(_DWORD *)(a1 + 236) = v10;
            int v11 = v10 + v4[1];
            *(_DWORD *)(a1 + 232) = v11;
            *(_DWORD *)(a1 + 240) = v11;
            unsigned int v12 = *(_DWORD *)(a1 + 136) * (v11 - v6);
            if (v12)
            {
              unsigned int v13 = *(_DWORD *)(a1 + 224);
              if (v12 >= v13) {
                size_t v14 = v13;
              }
              else {
                size_t v14 = v12;
              }
              bzero((void *)(*(void *)(a1 + 192) + (*(_DWORD *)(a1 + 212) & *(_DWORD *)(a1 + 220))), v14);
              *(_DWORD *)(a1 + 220) += v12;
            }
          }
          if (gLogCategory_APSRTPJitterBuffer <= 30
            && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
          {
            CMTime v15 = *(NSObject **)(a1 + 24);
            uint64_t v50 = MEMORY[0x1E4F143A8];
            uint64_t v51 = 0x40000000;
            int v52 = ___APSRTPJitterBufferInitializeWritePointers_block_invoke;
            long long v53 = &__block_descriptor_tmp_38;
            uint64_t v54 = a1;
            CMTime v55 = v5;
            dispatch_async(v15, &v50);
          }
        }
        unsigned int v16 = v5[1] + *(_DWORD *)(a1 + 236);
        v5[1] = v16;
        unsigned int v17 = *(_DWORD *)(a1 + 240);
        unsigned int v18 = v16 - v17;
        if (v16 < v17)
        {
          if (gLogCategory_APSRTPJitterBuffer <= 30
            && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
          {
            uint64_t v37 = *(NSObject **)(a1 + 24);
            v47[0] = MEMORY[0x1E4F143A8];
            v47[1] = 0x40000000;
            CFTypeRef v47[2] = ___APSRTPJitterBufferWritePacket_block_invoke;
            v47[3] = &__block_descriptor_tmp_32;
            v47[4] = a1;
            v47[5] = v5;
            dispatch_async(v37, v47);
          }
        }
        else
        {
          if (v16 == v17)
          {
            unsigned int v18 = 0;
          }
          else
          {
            if (gLogCategory_APSRTPJitterBuffer <= 30
              && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
            {
              long long v19 = *(NSObject **)(a1 + 24);
              v43[0] = MEMORY[0x1E4F143A8];
              v43[1] = 0x40000000;
              v43[2] = ___APSRTPJitterBufferWritePacket_block_invoke_2;
              v43[3] = &__block_descriptor_tmp_34;
              v43[4] = a1;
              int v44 = v16 - v17;
              unsigned int v45 = v17;
              unsigned int v46 = v16;
              dispatch_async(v19, v43);
            }
            ++*(_DWORD *)(a1 + 284);
          }
          unsigned int v20 = *(_DWORD *)(a1 + 92);
          unsigned int v21 = (*(_DWORD *)(a1 + 208) - *(_DWORD *)(a1 + 220) + *(_DWORD *)(a1 + 216))
              / *(_DWORD *)(a1 + 136);
          if (v21 < v20 + v18)
          {
            if (gLogCategory_APSRTPJitterBuffer <= 30)
            {
              size_t v22 = *(_DWORD **)(a1 + 228);
              if (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize())
              {
                uint64_t v23 = *(NSObject **)(a1 + 24);
                uint64_t v50 = MEMORY[0x1E4F143A8];
                uint64_t v51 = 0x40000000;
                int v52 = ___APSRTPJitterBufferCheckOverrun_block_invoke;
                long long v53 = &__block_descriptor_tmp_42_1059;
                uint64_t v54 = a1;
                CMTime v55 = v22;
                unsigned int v56 = v21;
                dispatch_async(v23, &v50);
              }
            }
            ++*(_DWORD *)(a1 + 280);
            unsigned int v20 = *(_DWORD *)(a1 + 92);
          }
          if (v20 < 2)
          {
            int v26 = 0;
            int v25 = v18;
          }
          else
          {
            int v24 = v18 / v20;
            int v25 = v18 % v20;
            if (v20 <= v18)
            {
              int v26 = 0;
              do
              {
                v26 += _APSRTPJitterBufferDecodeOneUnit(a1, (OSStatus (__cdecl *)(AudioConverterRef, UInt32 *, AudioBufferList *, AudioStreamPacketDescription **, void *))_APSRTPJitterBufferNullDecodeInputCallback, 0);
                --v24;
              }
              while (v24);
            }
            else
            {
              int v26 = 0;
            }
          }
          if (v25)
          {
            if (gLogCategory_APSRTPJitterBuffer <= 30
              && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
            {
              dispatch_semaphore_t v27 = *(NSObject **)(a1 + 24);
              v48[0] = MEMORY[0x1E4F143A8];
              v48[1] = 0x40000000;
              v48[2] = ___APSRTPJitterBufferDecodePacketSamples_block_invoke;
              v48[3] = &__block_descriptor_tmp_40;
              v48[4] = a1;
              int v49 = v25;
              dispatch_async(v27, v48);
            }
            unsigned int v28 = *(_DWORD *)(a1 + 136) * v25;
            unsigned int v29 = *(_DWORD *)(a1 + 224);
            if (v28 >= v29) {
              size_t v30 = v29;
            }
            else {
              size_t v30 = v28;
            }
            bzero((void *)(*(void *)(a1 + 192) + (*(_DWORD *)(a1 + 212) & *(_DWORD *)(a1 + 220))), v30);
            if (gLogCategory_APSRTPJitterBuffer <= 20
              && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
            {
              unint64_t v31 = *(NSObject **)(a1 + 24);
              uint64_t v50 = MEMORY[0x1E4F143A8];
              uint64_t v51 = 0x40000000;
              int v52 = ___APSRTPJitterBufferWriteZeros_block_invoke;
              long long v53 = &__block_descriptor_tmp_50;
              uint64_t v54 = a1;
              LODWORD(v55) = v25;
              dispatch_async(v31, &v50);
            }
            int v32 = *(_DWORD *)(a1 + 136);
            int v33 = *(_DWORD *)(a1 + 220);
            *(_DWORD *)(a1 + 232) += 2 * v25;
            *(_DWORD *)(a1 + 220) = v33 + v32 * 2 * v25;
            v26 += v25;
          }
          *(_DWORD *)(a1 + 240) += _APSRTPJitterBufferDecodeOneUnit(a1, (OSStatus (__cdecl *)(AudioConverterRef, UInt32 *, AudioBufferList *, AudioStreamPacketDescription **, void *))_APSRTPJitterBufferDecodeInputCallback, (uint64_t)v5)+ v26;
          if (*(unsigned char *)(a1 + 164))
          {
            if (!*(unsigned char *)(a1 + 176))
            {
              int v34 = *(_DWORD *)(a1 + 244) - *(_DWORD *)(a1 + 228);
              if (v34 >= *(_DWORD *)(a1 + 180))
              {
                if (gLogCategory_APSRTPJitterBuffer <= 30
                  && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
                {
                  long long v35 = *(NSObject **)(a1 + 24);
                  v41[0] = MEMORY[0x1E4F143A8];
                  v41[1] = 0x40000000;
                  v41[2] = ___APSRTPJitterBufferWritePacket_block_invoke_3;
                  v41[3] = &__block_descriptor_tmp_36;
                  v41[4] = a1;
                  int v42 = v34;
                  dispatch_async(v35, v41);
                }
                ++*(_DWORD *)(a1 + 280);
                *(unsigned char *)(a1 + 176) = 1;
              }
            }
          }
          if (!*(unsigned char *)(a1 + 272))
          {
            if (*(unsigned char *)(a1 + 165))
            {
              uint64_t v36 = mach_absolute_time();
              *(void *)(a1 + 168) = v36 - MillisecondsToUpTicks();
            }
            *(unsigned char *)(a1 + 272) = 1;
          }
        }
      }
      CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(a1 + 48), v5);
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
  if (gLogCategory_APSRTPJitterBuffer <= 30
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    uint64_t v3 = *(NSObject **)(a1 + 24);
    v39[0] = MEMORY[0x1E4F143A8];
    v39[1] = 0x40000000;
    v39[2] = ___APSRTPJitterBufferDecodeThreadEntry_block_invoke_2;
    v39[3] = &__block_descriptor_tmp_30;
    v39[4] = a1;
    dispatch_async(v3, v39);
  }
  return 0;
}

uint64_t _APSRTPJitterBufferDecodeOneUnit(uint64_t a1, OSStatus (__cdecl *a2)(AudioConverterRef, UInt32 *, AudioBufferList *, AudioStreamPacketDescription **, void *), uint64_t a3)
{
  *(void *)&outOutputData.mNumberBuffers = 1;
  inInputDataProcUserData[0] = a1;
  inInputDataProcUserData[1] = a3;
  memset(&inInputDataProcUserData[2], 0, 24);
  unsigned int v4 = *(_DWORD *)(a1 + 88);
  if (v4) {
    uint64_t v5 = *(_DWORD *)(a3 + 1472) / v4;
  }
  else {
    uint64_t v5 = *(unsigned int *)(a1 + 92);
  }
  outOutputData.mBuffers[0].mData = (void *)(*(void *)(a1 + 192)
                                           + (*(_DWORD *)(a1 + 212) & *(_DWORD *)(a1 + 220)));
  UInt32 v6 = *(_DWORD *)(a1 + 128) * v5;
  outOutputData.mBuffers[0].mNumberChannels = *(_DWORD *)(a1 + 140);
  outOutputData.mBuffers[0].mDataByteSize = v6;
  UInt32 ioOutputDataPacketSize = v5;
  OSStatus v7 = AudioConverterFillComplexBuffer(*(AudioConverterRef *)(a1 + 248), a2, inInputDataProcUserData, &ioOutputDataPacketSize, &outOutputData, 0);
  if (v7 == -6750)
  {
    if (gLogCategory_APSRTPJitterBuffer > 30) {
      goto LABEL_20;
    }
    if (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize())
    {
      unsigned int v12 = *(NSObject **)(a1 + 24);
      block[0] = MEMORY[0x1E4F143A8];
      block[1] = 0x40000000;
      block[2] = ___APSRTPJitterBufferDecodeOneUnit_block_invoke_2;
      block[3] = &__block_descriptor_tmp_46_1065;
      block[4] = a1;
      UInt32 v18 = ioOutputDataPacketSize;
      dispatch_async(v12, block);
    }
    goto LABEL_15;
  }
  OSStatus v8 = v7;
  if (!v7)
  {
LABEL_15:
    if (gLogCategory_APSRTPJitterBuffer <= 20
      && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      int v10 = *(NSObject **)(a1 + 24);
      v15[0] = MEMORY[0x1E4F143A8];
      v15[1] = 0x40000000;
      v15[2] = ___APSRTPJitterBufferDecodeOneUnit_block_invoke_3;
      void v15[3] = &__block_descriptor_tmp_48;
      v15[4] = a1;
      UInt32 v16 = ioOutputDataPacketSize;
      int v11 = v15;
      goto LABEL_18;
    }
    goto LABEL_20;
  }
  bzero(outOutputData.mBuffers[0].mData, (*(_DWORD *)(a1 + 128) * v5));
  UInt32 ioOutputDataPacketSize = v5;
  if (gLogCategory_APSRTPJitterBuffer <= 60)
  {
    UInt32 v9 = v5;
    if (gLogCategory_APSRTPJitterBuffer != -1)
    {
LABEL_8:
      int v10 = *(NSObject **)(a1 + 24);
      v19[0] = MEMORY[0x1E4F143A8];
      v19[1] = 0x40000000;
      v19[2] = ___APSRTPJitterBufferDecodeOneUnit_block_invoke;
      v19[3] = &__block_descriptor_tmp_44;
      v19[4] = a1;
      UInt32 v20 = v9;
      OSStatus v21 = v8;
      int v11 = v19;
LABEL_18:
      dispatch_async(v10, v11);
      goto LABEL_20;
    }
    if (_LogCategory_Initialize())
    {
      UInt32 v9 = ioOutputDataPacketSize;
      goto LABEL_8;
    }
  }
LABEL_20:
  UInt32 v13 = ioOutputDataPacketSize;
  *(_DWORD *)(a1 + 232) += ioOutputDataPacketSize;
  *(_DWORD *)(a1 + 220) += *(_DWORD *)(a1 + 136) * v13;
  return v5;
}

uint64_t _APSRTPJitterBufferDecodeInputCallback(uint64_t a1, _DWORD *a2, uint64_t a3, void *a4, uint64_t *a5)
{
  if (!*a2) {
    return 0;
  }
  uint64_t v5 = a5[1];
  if (!v5) {
    return 4294960546;
  }
  uint64_t v6 = *(void *)(v5 + 1472);
  if (!v6) {
    return 4294960546;
  }
  *(void *)(a3 + 16) = v5 + 12;
  uint64_t v7 = *a5;
  *(_DWORD *)(a3 + 8) = *(_DWORD *)(*a5 + 100);
  *(_DWORD *)(a3 + 12) = v6;
  if (a4)
  {
    a5[2] = 0;
    *((_DWORD *)a5 + 6) = 0;
    *((_DWORD *)a5 + 7) = v6;
    *a4 = a5 + 2;
    uint64_t v7 = *a5;
  }
  unint64_t v8 = *(unsigned int *)(v7 + 88);
  uint64_t v9 = *a2;
  if (v8)
  {
    uint64_t v10 = a5[1];
    if (*(void *)(v10 + 1472) / v8 != v9) {
      goto LABEL_14;
    }
LABEL_11:
    uint64_t result = 0;
    *(void *)(v10 + 1472) = 0;
    *((unsigned char *)a5 + 32) = 1;
    return result;
  }
  if (v9 == 1)
  {
    uint64_t v10 = a5[1];
    goto LABEL_11;
  }
LABEL_14:
  APSLogErrorAt(0);
  return 4294960534;
}

uint64_t _APSRTPJitterBufferNullDecodeInputCallback(uint64_t a1, int *a2, uint64_t a3, void *a4, uint64_t a5)
{
  if (*a2)
  {
    if (*(void *)(a5 + 8))
    {
      int v6 = 0;
      uint64_t result = 4294960546;
    }
    else
    {
      *(void *)(a3 + 16) = &_APSRTPJitterBufferNullDecodeInputCallback_missingData;
      *(void *)(a3 + 8) = *(unsigned int *)(*(void *)a5 + 100);
      if (a4)
      {
        *(void *)(a5 + 16) = 0;
        *(void *)(a5 + 24) = 0;
        *a4 = a5 + 16;
      }
      uint64_t result = 0;
      int v6 = 1;
      *(unsigned char *)(a5 + 32) = 1;
    }
  }
  else
  {
    uint64_t result = 0;
    int v6 = 1;
  }
  *a2 = v6;
  return result;
}

uint64_t __APSRTPJitterBufferGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSRTPJitterBufferGetTypeID_typeID = result;
  return result;
}

void _APSRTPJitterBufferFinalize(uint64_t a1)
{
  if (*(void *)(a1 + 264))
  {
    *(unsigned char *)(a1 + 273) = 1;
    dispatch_semaphore_signal(*(dispatch_semaphore_t *)(a1 + 64));
    pthread_join(*(pthread_t *)(a1 + 256), 0);
    *(void *)(a1 + 264) = 0;
  }
  dispatch_sync(*(dispatch_queue_t *)(a1 + 24), &__block_literal_global_53);
  if (gLogCategory_APSRTPJitterBuffer <= 50
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v2 = *(OpaqueAudioConverter **)(a1 + 248);
  if (v2)
  {
    AudioConverterDispose(v2);
    *(void *)(a1 + 248) = 0;
  }
  MirroredRingBufferFree();
  uint64_t v3 = *(void **)(a1 + 32);
  if (v3)
  {
    free(v3);
    *(void *)(a1 + 32) = 0;
  }
  unsigned int v4 = *(const void **)(a1 + 56);
  if (v4)
  {
    CFRelease(v4);
    *(void *)(a1 + 56) = 0;
  }
  uint64_t v5 = *(const void **)(a1 + 48);
  if (v5)
  {
    CFRelease(v5);
    *(void *)(a1 + 48) = 0;
  }
  int v6 = *(NSObject **)(a1 + 64);
  if (v6)
  {
    dispatch_release(v6);
    *(void *)(a1 + 64) = 0;
  }
  uint64_t v7 = *(NSObject **)(a1 + 24);
  if (v7)
  {
    dispatch_release(v7);
    *(void *)(a1 + 24) = 0;
  }
  unint64_t v8 = *(const void **)(a1 + 16);
  if (v8)
  {
    CFRelease(v8);
    *(void *)(a1 + 16) = 0;
  }
}

uint64_t APSRTPJitterBufferGetTypeID()
{
  if (APSRTPJitterBufferGetTypeID_once != -1) {
    dispatch_once(&APSRTPJitterBufferGetTypeID_once, &__block_literal_global_1051);
  }
  return APSRTPJitterBufferGetTypeID_typeID;
}

const void *APSRTPJitterBufferGetEmptyPacket(uint64_t a1, int *a2)
{
  if (!a1 || (uint64_t v3 = *(opaqueCMSimpleQueue **)(a1 + 48)) == 0)
  {
    APSLogErrorAt(0);
    uint64_t result = 0;
    int v5 = -6718;
    if (!a2) {
      return result;
    }
    goto LABEL_9;
  }
  uint64_t result = CMSimpleQueueDequeue(v3);
  if (result) {
    int v5 = 0;
  }
  else {
    int v5 = -6728;
  }
  if (!result) {
    uint64_t result = 0;
  }
  if (a2) {
LABEL_9:
  }
    *a2 = v5;
  return result;
}

intptr_t APSRTPJitterBufferDiscardPacket(intptr_t result, void *a2)
{
  if (a2)
  {
    intptr_t v2 = result;
    a2[184] = 0;
    CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(result + 56), a2);
    uint64_t v3 = *(NSObject **)(v2 + 64);
    return dispatch_semaphore_signal(v3);
  }
  return result;
}

intptr_t APSRTPJitterBufferEnqueuePacket(intptr_t result, uint64_t a2)
{
  if (a2)
  {
    intptr_t v2 = result;
    int v3 = *(_DWORD *)(a2 + 4);
    if (*(_DWORD *)(result + 80) == 1819304813) {
      int v4 = v3 + *(void *)(a2 + 1472) / (unint64_t)*(unsigned int *)(result + 96);
    }
    else {
      int v4 = *(_DWORD *)(result + 92) + v3;
    }
    *(_DWORD *)(result + 244) = v4;
    CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(result + 56), (const void *)a2);
    int v5 = *(NSObject **)(v2 + 64);
    return dispatch_semaphore_signal(v5);
  }
  return result;
}

uint64_t APSRTPJitterBufferRead(uint64_t a1, unsigned int a2, char *__dst, unint64_t a4)
{
  unsigned int v7 = *(_DWORD *)(a1 + 232);
  int v8 = *(unsigned __int8 *)(a1 + 272);
  unint64_t v9 = a4 / *(unsigned int *)(a1 + 136);
  if (gLogCategory_APSRTPJitterBuffer <= 10
    && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    int v11 = *(NSObject **)(a1 + 24);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __APSRTPJitterBufferRead_block_invoke;
    block[3] = &__block_descriptor_tmp_9;
    block[4] = a1;
    void block[5] = a4;
    int v54 = v9;
    dispatch_async(v11, block);
  }
  if (!*(unsigned char *)(a1 + 164))
  {
    if (v9 + a2 < *(_DWORD *)(a1 + 232) || *(unsigned char *)(a1 + 272) == 0)
    {
      if (*(unsigned char *)(a1 + 274))
      {
        if (gLogCategory_APSRTPJitterBuffer <= 30
          && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        *(unsigned char *)(a1 + 274) = 0;
      }
    }
    else if (!*(unsigned char *)(a1 + 274))
    {
      if (gLogCategory_APSRTPJitterBuffer <= 30
        && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      *(unsigned char *)(a1 + 274) = 1;
      ++*(_DWORD *)(a1 + 276);
    }
  }
  if (!v8)
  {
    unsigned int v15 = 0;
    *(_DWORD *)(a1 + 228) = a2;
    int v16 = v9;
    goto LABEL_78;
  }
  if (!*(unsigned char *)(a1 + 164))
  {
    unsigned int v17 = *(_DWORD *)(a1 + 228);
    if (v17 <= a2)
    {
      if (v17 >= a2)
      {
        unsigned int v18 = 0;
      }
      else
      {
        unsigned int v19 = a2 - v17;
        if (gLogCategory_APSRTPJitterBuffer <= 30
          && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
        {
          UInt32 v20 = *(NSObject **)(a1 + 24);
          v51[0] = MEMORY[0x1E4F143A8];
          v51[1] = 0x40000000;
          _OWORD v51[2] = __APSRTPJitterBufferRead_block_invoke_2;
          v51[3] = &__block_descriptor_tmp_11;
          v51[4] = a1;
          unsigned int v52 = v19;
          dispatch_async(v20, v51);
        }
        unsigned int v18 = 0;
        *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v19;
        unsigned int v17 = *(_DWORD *)(a1 + 228) + v19;
        *(_DWORD *)(a1 + 228) = v17;
      }
    }
    else if (v17 - a2 >= v9)
    {
      unsigned int v18 = v9;
    }
    else
    {
      unsigned int v18 = v17 - a2;
    }
    goto LABEL_57;
  }
  mach_absolute_time();
  if (!*(unsigned char *)(a1 + 165)) {
    goto LABEL_39;
  }
  unint64_t v12 = UpTicksToMilliseconds();
  unint64_t v13 = *(unsigned int *)(a1 + 160);
  if ((int)(1000
           * (*(_DWORD *)(a1 + 236) + *(_DWORD *)(a1 + 244) - *(_DWORD *)(a1 + 228))
           / *(double *)(a1 + 112)) >= (int)v13 + (int)v12
    || v12 >= v13)
  {
    *(unsigned char *)(a1 + 176) = 1;
    *(unsigned char *)(a1 + 165) = 0;
    *(void *)(a1 + 168) = 0;
    if (gLogCategory_APSRTPJitterBuffer > 30) {
      goto LABEL_39;
    }
    if (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
  }
  if (!*(unsigned char *)(a1 + 165))
  {
LABEL_39:
    if (*(unsigned char *)(a1 + 176))
    {
      int v21 = *(_DWORD *)(a1 + 228);
      int v22 = *(_DWORD *)(a1 + 236) + *(_DWORD *)(a1 + 244) - v21;
      if (v22 <= *(_DWORD *)(a1 + 184))
      {
        int v23 = 0;
      }
      else
      {
        int v23 = v7 - v21;
        if (gLogCategory_APSRTPJitterBuffer <= 30
          && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
        {
          int v24 = *(NSObject **)(a1 + 24);
          v57[0] = MEMORY[0x1E4F143A8];
          v57[1] = 0x40000000;
          v57[2] = ___APSRTPJitterBufferLegacyDiscardExcess_block_invoke;
          v57[3] = &__block_descriptor_tmp_59;
          v57[4] = a1;
          int v58 = v22;
          dispatch_async(v24, v57);
        }
        if (v22 - *(_DWORD *)(a1 + 184) < v23) {
          int v23 = v22 - *(_DWORD *)(a1 + 184);
        }
        *(_DWORD *)(a1 + 216) += v23 * *(_DWORD *)(a1 + 136);
        *(_DWORD *)(a1 + 228) += v23;
        if (gLogCategory_APSRTPJitterBuffer <= 30
          && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
        {
          int v25 = *(NSObject **)(a1 + 24);
          v55[0] = MEMORY[0x1E4F143A8];
          v55[1] = 0x40000000;
          v55[2] = ___APSRTPJitterBufferLegacyDiscardExcess_block_invoke_2;
          v55[3] = &__block_descriptor_tmp_61_1080;
          v55[4] = a1;
          int v56 = v23;
          dispatch_async(v25, v55);
        }
      }
      if (v22 - v23 <= *(_DWORD *)(a1 + 184)) {
        *(unsigned char *)(a1 + 176) = 0;
      }
    }
  }
  unsigned int v18 = 0;
  unsigned int v17 = *(_DWORD *)(a1 + 228);
LABEL_57:
  if (v9 > v18 && *(unsigned char *)(a1 + 165) == 0 && v7 >= v17)
  {
    unsigned int v29 = v7 - v17;
    if (v29 >= v9 - v18) {
      unsigned int v29 = v9 - v18;
    }
    if (v29 >= (*(_DWORD *)(a1 + 220) - *(_DWORD *)(a1 + 216)) / *(_DWORD *)(a1 + 136)) {
      unsigned int v28 = (*(_DWORD *)(a1 + 220) - *(_DWORD *)(a1 + 216)) / *(_DWORD *)(a1 + 136);
    }
    else {
      unsigned int v28 = v29;
    }
  }
  else
  {
    unsigned int v28 = 0;
  }
  unsigned int v15 = v28 + v18;
  int v16 = v9 - (v28 + v18);
  if (v18)
  {
    bzero(__dst, *(_DWORD *)(a1 + 136) * v18);
    __dst += *(_DWORD *)(a1 + 136) * v18;
  }
  if (v28)
  {
    size_t v30 = *(_DWORD *)(a1 + 136) * v28;
    if (gLogCategory_APSRTPJitterBuffer <= 10
      && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      unint64_t v31 = *(NSObject **)(a1 + 24);
      v47[0] = MEMORY[0x1E4F143A8];
      v47[1] = 0x40000000;
      CFTypeRef v47[2] = __APSRTPJitterBufferRead_block_invoke_3;
      v47[3] = &__block_descriptor_tmp_13;
      v47[4] = a1;
      int v48 = v30;
      unsigned int v49 = v28;
      unsigned int v50 = v7;
      dispatch_async(v31, v47);
    }
    memcpy(__dst, (const void *)(*(void *)(a1 + 192) + (*(_DWORD *)(a1 + 212) & *(_DWORD *)(a1 + 216))), v30);
    *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v28;
    *(_DWORD *)(a1 + 228) += v28;
    __dst += v30;
  }
LABEL_78:
  if (v15 != v9)
  {
    if (*(unsigned char *)(a1 + 164))
    {
      unsigned int v32 = *(_DWORD *)(a1 + 136);
      if (*(unsigned char *)(a1 + 165))
      {
LABEL_103:
        bzero(__dst, v32 * v16);
        return 0;
      }
      int v34 = *(_DWORD *)(a1 + 216);
      int v33 = *(_DWORD *)(a1 + 220);
      int32_t Count = CMSimpleQueueGetCount(*(CMSimpleQueueRef *)(a1 + 56));
      if (gLogCategory_APSRTPJitterBuffer <= 30)
      {
        int32_t v36 = Count;
        if (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize())
        {
          uint64_t v37 = *(NSObject **)(a1 + 24);
          v43[0] = MEMORY[0x1E4F143A8];
          v43[1] = 0x40000000;
          v43[2] = __APSRTPJitterBufferRead_block_invoke_4;
          v43[3] = &__block_descriptor_tmp_15;
          v43[4] = a1;
          int v44 = v16;
          unsigned int v45 = (v33 - v34) / v32;
          int32_t v46 = v36;
          dispatch_async(v37, v43);
        }
      }
      *(unsigned char *)(a1 + 165) = 1;
      *(void *)(a1 + 168) = mach_absolute_time();
      if (gLogCategory_APSRTPJitterBuffer <= 40
        && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
      {
        uint64_t v38 = *(NSObject **)(a1 + 24);
        v42[0] = MEMORY[0x1E4F143A8];
        v42[1] = 0x40000000;
        v42[2] = __APSRTPJitterBufferRead_block_invoke_5;
        v42[3] = &__block_descriptor_tmp_17;
        v42[4] = a1;
        dispatch_async(v38, v42);
      }
      uint64_t v39 = (_DWORD *)(a1 + 276);
      int v40 = 1;
    }
    else
    {
      if (v8)
      {
        *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v16;
        if (!*(unsigned char *)(a1 + 274))
        {
          if (gLogCategory_APSRTPJitterBuffer <= 30
            && (gLogCategory_APSRTPJitterBuffer != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          ++*(_DWORD *)(a1 + 276);
          *(unsigned char *)(a1 + 274) = 1;
        }
      }
      uint64_t v39 = (_DWORD *)(a1 + 228);
      int v40 = v16;
    }
    *v39 += v40;
    unsigned int v32 = *(_DWORD *)(a1 + 136);
    goto LABEL_103;
  }
  return 0;
}

uint64_t __APSRTPJitterBufferRead_block_invoke()
{
  if (gLogCategory_APSRTPJitterBuffer <= 10)
  {
    if (gLogCategory_APSRTPJitterBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferRead_block_invoke_2()
{
  if (gLogCategory_APSRTPJitterBuffer <= 30)
  {
    if (gLogCategory_APSRTPJitterBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferRead_block_invoke_3()
{
  if (gLogCategory_APSRTPJitterBuffer <= 10)
  {
    if (gLogCategory_APSRTPJitterBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferRead_block_invoke_4()
{
  if (gLogCategory_APSRTPJitterBuffer <= 30)
  {
    if (gLogCategory_APSRTPJitterBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferRead_block_invoke_5()
{
  if (gLogCategory_APSRTPJitterBuffer <= 40)
  {
    if (gLogCategory_APSRTPJitterBuffer != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSRTPJitterBufferCopyStatistics(uint64_t a1, CFTypeRef *a2)
{
  if (a2)
  {
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      CFMutableDictionaryRef v4 = Mutable;
      CFDictionarySetInt64();
      CFDictionarySetInt64();
      CFDictionarySetInt64();
      *a2 = CFRetain(v4);
      CFRelease(v4);
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

void APSTapToRadarInvoke(const void *a1, const void *a2, const void *a3, uint64_t a4, const void *a5, int a6)
{
  if (!IsAppleInternalBuild())
  {
    if (gLogCategory_APSTapToRadar > 50 || gLogCategory_APSTapToRadar == -1 && !_LogCategory_Initialize()) {
      return;
    }
LABEL_10:
    goto LABEL_12;
  }
  if (!getTapToRadarServiceClass())
  {
    if (gLogCategory_APSTapToRadar > 90 || gLogCategory_APSTapToRadar == -1 && !_LogCategory_Initialize()) {
      return;
    }
    goto LABEL_10;
  }
  unint64_t v12 = (const void *)[NSString stringWithFormat:@"%@ (%@)", @"AirPlay has detected an internal error. Please help us make AirPlay better by logging a bug. Thanks.", a4];
  unint64_t v13 = objc_msgSend((id)-[objc_class shared](getTapToRadarServiceClass(), "shared"), "serviceSettings");
  if (!v13) {
    goto LABEL_43;
  }
  if ([v13 authorizationStatus] != 1)
  {
    if (gLogCategory_APSTapToRadar <= 50
      && (gLogCategory_APSTapToRadar != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (a2)
    {
      if (a6)
      {
        CFMutableDictionaryRef Mutable = 0;
        CFUserNotificationRef v15 = 0;
        if (!a1) {
          goto LABEL_25;
        }
        goto LABEL_24;
      }
      if (v12)
      {
        CFAllocatorRef v16 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
        CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
        CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F1D990], @"AirPlay Error");
        CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F1D9A8], v12);
        CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F1D9E0], @"Tap-to-Radar");
        CFDictionarySetValue(Mutable, (const void *)*MEMORY[0x1E4F1D9D0], @"Cancel");
        CFUserNotificationRef v17 = CFUserNotificationCreate(v16, 10.0, 0, 0, Mutable);
        if (!v17)
        {
          APSLogErrorAt(0);
          if (!Mutable) {
            return;
          }
          goto LABEL_30;
        }
        CFUserNotificationRef v15 = v17;
        if (!a1)
        {
LABEL_25:
          CFRetain(a2);
          if (a3) {
            CFRetain(a3);
          }
          if (a5) {
            CFRetain(a5);
          }
          block[0] = MEMORY[0x1E4F143A8];
          block[1] = 3221225472;
          block[2] = __apsTapToRadarInvokeDetailed_block_invoke;
          block[3] = &__block_descriptor_73_e5_v8__0l;
          char v19 = a6;
          block[4] = v15;
          void block[5] = a1;
          void block[6] = a2;
          block[7] = a3;
          void block[8] = a5;
          dispatch_async(MEMORY[0x1E4F14428], block);
          if (!Mutable) {
            return;
          }
LABEL_30:
          CFRelease(Mutable);
          return;
        }
LABEL_24:
        CFRetain(a1);
        goto LABEL_25;
      }
    }
LABEL_43:
    APSLogErrorAt(0);
    return;
  }
  if (gLogCategory_APSTapToRadar <= 50 && (gLogCategory_APSTapToRadar != -1 || _LogCategory_Initialize())) {
LABEL_12:
  }
    LogPrintF();
}

void __apsTapToRadarInvokeDetailed_block_invoke(uint64_t a1)
{
  CFOptionFlags responseFlags = 0;
  if (!*(unsigned char *)(a1 + 72))
  {
    CFOptionFlags responseFlags = 3;
    CFUserNotificationReceiveResponse(*(CFUserNotificationRef *)(a1 + 32), 10.0, &responseFlags);
    if (responseFlags)
    {
      int v5 = 0;
LABEL_11:
      unsigned int v7 = 0;
      goto LABEL_12;
    }
  }
  uint64_t v2 = *(void *)(a1 + 40);
  if (apsRadarLogging_radarComponentEntryForAPSRadarComponentID_onceToken != -1) {
    dispatch_once(&apsRadarLogging_radarComponentEntryForAPSRadarComponentID_onceToken, &__block_literal_global_64);
  }
  int v3 = (void *)[(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries valueForKey:v2];
  id v4 = objc_alloc_init(getRadarDraftClass());
  int v5 = v4;
  if (!v4)
  {
    APSLogErrorAt(0);
    goto LABEL_11;
  }
  [v4 setTitle:*(void *)(a1 + 48)];
  uint64_t v6 = *(void *)(a1 + 56);
  if (!v6) {
    uint64_t v6 = *(void *)(a1 + 48);
  }
  [v5 setProblemDescription:v6];
  unsigned int v7 = objc_msgSend(objc_alloc(getRadarComponentClass()), "initWithName:version:identifier:", objc_msgSend(v3, "componentName"), objc_msgSend(v3, "componentVersion"), objc_msgSend((id)objc_msgSend(v3, "componentID"), "integerValue"));
  if (v7)
  {
    [v5 setComponent:v7];
    [v5 setClassification:6];
    [v5 setReproducibility:6];
    [v5 setDeviceIDs:*(void *)(a1 + 64)];
    [v5 setIsUserInitiated:*(unsigned char *)(a1 + 72) == 0];
    [v5 setShouldCapturePerformanceTrace:1];
    objc_msgSend((id)-[objc_class shared](getTapToRadarServiceClass(), "shared"), "createDraft:forProcessNamed:withDisplayReason:completionHandler:", v5, 0, @"AirPlay has detected an internal error", &__block_literal_global_60_1135);
  }
  else
  {
    APSLogErrorAt(0);
  }
LABEL_12:

  int v8 = *(const void **)(a1 + 64);
  if (v8) {
    CFRelease(v8);
  }
  unint64_t v9 = *(const void **)(a1 + 40);
  if (v9) {
    CFRelease(v9);
  }
  uint64_t v10 = *(const void **)(a1 + 48);
  if (v10) {
    CFRelease(v10);
  }
  int v11 = *(const void **)(a1 + 56);
  if (v11) {
    CFRelease(v11);
  }
  unint64_t v12 = *(const void **)(a1 + 32);
  if (v12) {
    CFRelease(v12);
  }
}

void __apsTapToRadarInvokeDetailed_block_invoke_2(uint64_t a1, void *a2)
{
  if (a2
    && gLogCategory_APSTapToRadar <= 90
    && (gLogCategory_APSTapToRadar != -1 || _LogCategory_Initialize()))
  {
    [a2 localizedDescription];
    LogPrintF();
  }
}

Class initRadarComponent()
{
  if (TapToRadarKitLibrary_sOnce != -1) {
    dispatch_once(&TapToRadarKitLibrary_sOnce, &__block_literal_global_1140);
  }
  Class result = objc_getClass("RadarComponent");
  classRadarComponent = (uint64_t)result;
  getRadarComponentClass = RadarComponentFunction;
  return result;
}

uint64_t RadarComponentFunction()
{
  return classRadarComponent;
}

void *__TapToRadarKitLibrary_block_invoke()
{
  Class result = dlopen("/AppleInternal/Library/Frameworks/TapToRadarKit.framework/TapToRadarKit", 2);
  TapToRadarKitLibrary_sLib = (uint64_t)result;
  return result;
}

Class initRadarDraft()
{
  if (TapToRadarKitLibrary_sOnce != -1) {
    dispatch_once(&TapToRadarKitLibrary_sOnce, &__block_literal_global_1140);
  }
  Class result = objc_getClass("RadarDraft");
  classRadarDraft = (uint64_t)result;
  getRadarDraftClass = RadarDraftFunction;
  return result;
}

uint64_t RadarDraftFunction()
{
  return classRadarDraft;
}

uint64_t __apsRadarLogging_radarComponentEntryForAPSRadarComponentID_block_invoke()
{
  apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries = [MEMORY[0x1E4F1CA60] dictionary];
  uint64_t v0 = +[APSRadarComponentEntry componentEntryWithName:@"AirPlay (New Bugs)" version:@"All" ID:@"629193"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v0 forKeyedSubscript:@"AirPlay (New Bugs)"];
  uint64_t v1 = +[APSRadarComponentEntry componentEntryWithName:@"AirPlay Core" version:@"All" ID:@"629196"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v1 forKeyedSubscript:@"AirPlay Core"];
  uint64_t v2 = +[APSRadarComponentEntry componentEntryWithName:@"AirPlay Audio - Buffered" version:@"All" ID:@"1158817"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v2 forKeyedSubscript:@"AirPlay Audio - Buffered"];
  int v3 = +[APSRadarComponentEntry componentEntryWithName:@"AirPlay Audio - Streaming" version:@"All" ID:@"1158818"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v3 forKeyedSubscript:@"AirPlay Audio - Streaming"];
  id v4 = +[APSRadarComponentEntry componentEntryWithName:@"AirPlay Performance" version:@"All" ID:@"953616"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v4 forKeyedSubscript:@"AirPlay Performance"];
  int v5 = +[APSRadarComponentEntry componentEntryWithName:@"CoreMedia Buffered AirPlay" version:@"All" ID:@"629211"];
  [(id)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries setObject:v5 forKeyedSubscript:@"CoreMedia Buffered AirPlay"];
  uint64_t v6 = +[APSRadarComponentEntry componentEntryWithName:@"CoreMedia AP Video" version:@"All" ID:@"629212"];
  unsigned int v7 = (void *)apsRadarLogging_radarComponentEntryForAPSRadarComponentID_entries;

  return [v7 setObject:v6 forKeyedSubscript:@"CoreMedia AP Video"];
}

Class initTapToRadarService()
{
  if (TapToRadarKitLibrary_sOnce != -1) {
    dispatch_once(&TapToRadarKitLibrary_sOnce, &__block_literal_global_1140);
  }
  Class result = objc_getClass("TapToRadarService");
  classTapToRadarService = (uint64_t)result;
  getTapToRadarServiceClass = TapToRadarServiceFunction;
  return result;
}

uint64_t TapToRadarServiceFunction()
{
  return classTapToRadarService;
}

uint64_t APSTimedInfoManagerGetTypeID()
{
  if (gAPSTimedInfoManagerInitOnce != -1) {
    dispatch_once_f(&gAPSTimedInfoManagerInitOnce, 0, (dispatch_function_t)_APSTimedInfoManagerGetTypeID);
  }
  return gAPSTimedInfoManagerTypeID;
}

uint64_t _APSTimedInfoManagerGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSTimedInfoManagerTypeID = result;
  return result;
}

void _APSTimedInfoManagerFinalize(uint64_t a1)
{
  if (gLogCategory_APSTimedInfoManager <= 30
    && (gLogCategory_APSTimedInfoManager != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  timedInfoManager_removeAllElemFromCurrentElem(*(void **)(a1 + 80), *(void **)(a1 + 80));
  FigSimpleMutexDestroy();
  CMTimebaseRemoveTimerDispatchSource(*(CMTimebaseRef *)(a1 + 40), *(dispatch_source_t *)(a1 + 16));
  uint64_t v2 = *(NSObject **)(a1 + 16);
  if (v2)
  {
    dispatch_source_cancel(*(dispatch_source_t *)(a1 + 16));
    dispatch_release(v2);
    *(void *)(a1 + 16) = 0;
  }
  int v3 = *(const void **)(a1 + 40);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 40) = 0;
  }
  id v4 = *(NSObject **)(a1 + 24);
  if (v4)
  {
    dispatch_release(v4);
    *(void *)(a1 + 24) = 0;
  }
}

void *timedInfoManager_removeAllElemFromCurrentElem(void *a1, void *a2)
{
  if (a1)
  {
    if (a1 == a2)
    {
LABEL_7:
      if (a2)
      {
        uint64_t v6 = a2;
        do
        {
          unsigned int v7 = (void *)*v6;
          int v8 = (const void *)v6[5];
          if (v8) {
            CFRelease(v8);
          }
          free(v6);
          uint64_t v6 = v7;
        }
        while (v7);
      }
    }
    else
    {
      id v4 = a1;
      while (1)
      {
        int v5 = v4;
        id v4 = (void *)*v4;
        if (!v4) {
          break;
        }
        if (v4 == a2)
        {
          *int v5 = 0;
          goto LABEL_7;
        }
      }
    }
  }
  if (a1 == a2) {
    return 0;
  }
  else {
    return a1;
  }
}

uint64_t APSTimedInfoManagerCreate(CFTypeRef *a1)
{
  if (a1)
  {
    if (gAPSTimedInfoManagerInitOnce != -1) {
      dispatch_once_f(&gAPSTimedInfoManagerInitOnce, 0, (dispatch_function_t)_APSTimedInfoManagerGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v3 = Instance;
      *(void *)(Instance + 80) = 0;
      *(_OWORD *)(Instance + 48) = 0u;
      *(_OWORD *)(Instance + 64) = 0u;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      uint64_t v4 = FigDispatchQueueCreateWithPriority();
      *(void *)(v3 + 24) = v4;
      if (v4 && (uint64_t v5 = FigSimpleMutexCreate(), (*(void *)(v3 + 32) = v5) != 0))
      {
        uint64_t v6 = MEMORY[0x1E4F1F9F8];
        *(_OWORD *)(v3 + 48) = *MEMORY[0x1E4F1F9F8];
        *(void *)(v3 + 64) = *(void *)(v6 + 16);
        *(_WORD *)(v3 + 72) = 0;
        if (gLogCategory_APSTimedInfoManager <= 30
          && (gLogCategory_APSTimedInfoManager != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v7 = 0;
        *a1 = CFRetain((CFTypeRef)v3);
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v7 = 4294960568;
      }
      CFRelease((CFTypeRef)v3);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

uint64_t APSTimedInfoManagerResume(uint64_t a1, const void *a2)
{
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
  uint64_t v4 = FigCFWeakReferenceHolderCreateWithReferencedObject();
  if (*(unsigned char *)(a1 + 72))
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294960587;
    APSSignalErrorAt(4294960587);
    goto LABEL_12;
  }
  if (*(void *)(a1 + 16))
  {
    APSLogErrorAt(0);
  }
  else
  {
    uint64_t v5 = (void *)v4;
    uint64_t v6 = *(const void **)(a1 + 40);
    *(void *)(a1 + 40) = a2;
    CFRetain(a2);
    if (v6) {
      CFRelease(v6);
    }
    uint64_t v7 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 1uLL, *(dispatch_queue_t *)(a1 + 24));
    *(void *)(a1 + 16) = v7;
    if (!v7)
    {
      APSLogErrorAt(0);
      uint64_t v8 = 4294960568;
      goto LABEL_12;
    }
    dispatch_set_context(v7, v5);
    dispatch_source_set_timer(*(dispatch_source_t *)(a1 + 16), 0xFFFFFFFFFFFFFFFFLL, 0xFFFFFFFFFFFFFFFFLL, 0);
    dispatch_source_set_event_handler_f(*(dispatch_source_t *)(a1 + 16), (dispatch_function_t)timedInfoManager_fireNotification);
    dispatch_source_set_cancel_handler_f(*(dispatch_source_t *)(a1 + 16), (dispatch_function_t)FigCFRelease);
    dispatch_resume(*(dispatch_object_t *)(a1 + 16));
    CMTimebaseAddTimerDispatchSource(*(CMTimebaseRef *)(a1 + 40), *(dispatch_source_t *)(a1 + 16));
    *(unsigned char *)(a1 + 72) = 1;
    if (*(unsigned char *)(a1 + 73) && (*(unsigned char *)(a1 + 60) & 1) != 0)
    {
      unint64_t v9 = *(OpaqueCMTimebase **)(a1 + 40);
      uint64_t v10 = *(NSObject **)(a1 + 16);
      CMTime v12 = *(CMTime *)(a1 + 48);
      CMTimebaseSetTimerDispatchSourceNextFireTime(v9, v10, &v12, 1u);
      uint64_t v8 = 0;
      *(unsigned char *)(a1 + 73) = 0;
      goto LABEL_12;
    }
  }
  uint64_t v8 = 0;
LABEL_12:
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
  return v8;
}

void FigCFRelease(CFTypeRef cf)
{
  if (cf) {
    CFRelease(cf);
  }
}

void timedInfoManager_fireNotification()
{
  uint64_t v0 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v0)
  {
    uint64_t v1 = v0;
    pthread_mutex_lock(*(pthread_mutex_t **)(v0 + 32));
    uint64_t v2 = (_OWORD *)(v1 + 48);
    uint64_t v3 = v1 + 80;
    while (1)
    {
      uint64_t v3 = *(void *)v3;
      if (!v3) {
        break;
      }
      CMTime time1 = *(CMTime *)(v3 + 16);
      *(_OWORD *)&v10.CMTimeValue value = *v2;
      v10.CMTimeEpoch epoch = *(void *)(v1 + 64);
      if (CMTimeCompare(&time1, &v10) <= 0)
      {
        CMNotificationCenterGetDefaultLocalCenter();
        CMNotificationCenterPostNotification();
        uint64_t v4 = *(void *)(v3 + 8);
        if (v4)
        {
          long long v5 = *(_OWORD *)(v4 + 16);
          CMTimeEpoch v6 = *(void *)(v4 + 32);
          *(void *)(v1 + 64) = v6;
          *uint64_t v2 = v5;
          uint64_t v7 = *(OpaqueCMTimebase **)(v1 + 40);
          uint64_t v8 = *(NSObject **)(v1 + 16);
          *(_OWORD *)&time1.CMTimeValue value = *v2;
          time1.CMTimeEpoch epoch = v6;
          CMTimebaseSetTimerDispatchSourceNextFireTime(v7, v8, &time1, 1u);
        }
        else
        {
          uint64_t v9 = MEMORY[0x1E4F1F9F8];
          *uint64_t v2 = *MEMORY[0x1E4F1F9F8];
          *(void *)(v1 + 64) = *(void *)(v9 + 16);
        }
        *(void *)(v1 + 80) = timedInfoManager_removeAllElemFromCurrentElem(*(void **)(v1 + 80), (void *)v3);
        break;
      }
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(v1 + 32));
    CFRelease((CFTypeRef)v1);
  }
  else
  {
    APSLogErrorAt(0);
  }
}

uint64_t APSTimedInfoManagerSuspend(uint64_t a1, int a2)
{
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
    if (*(unsigned char *)(a1 + 72))
    {
      CMTimebaseRemoveTimerDispatchSource(*(CMTimebaseRef *)(a1 + 40), *(dispatch_source_t *)(a1 + 16));
      *(unsigned char *)(a1 + 72) = 0;
      if (a2)
      {
        uint64_t v4 = MEMORY[0x1E4F1F9F8];
        *(_OWORD *)(a1 + 48) = *MEMORY[0x1E4F1F9F8];
        *(void *)(a1 + 64) = *(void *)(v4 + 16);
        *(void *)(a1 + 80) = timedInfoManager_removeAllElemFromCurrentElem(*(void **)(a1 + 80), *(void **)(a1 + 80));
      }
      else
      {
        *(unsigned char *)(a1 + 73) = 1;
      }
      long long v5 = *(NSObject **)(a1 + 16);
      if (v5)
      {
        dispatch_source_cancel(*(dispatch_source_t *)(a1 + 16));
        dispatch_release(v5);
        *(void *)(a1 + 16) = 0;
      }
      CMTimeEpoch v6 = *(const void **)(a1 + 40);
      if (v6)
      {
        CFRelease(v6);
        *(void *)(a1 + 40) = 0;
      }
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSTimedInfoManagerAddTimedInfo(uint64_t a1, long long *a2, const void *a3)
{
  if (!a1) {
    goto LABEL_33;
  }
  if ((*((unsigned char *)a2 + 12) & 1) == 0)
  {
    APSLogErrorAt(0);
    uint64_t v18 = 4294960591;
    APSSignalErrorAt(4294960591);
    return v18;
  }
  if (!a3)
  {
LABEL_33:
    APSLogErrorAt(0);
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
  CMTimeEpoch v6 = malloc_type_calloc(1uLL, 0x30uLL, 0x106004041D4C332uLL);
  if (v6)
  {
    uint64_t v7 = v6;
    long long v8 = *a2;
    _OWORD v6[4] = *((void *)a2 + 2);
    *((_OWORD *)v6 + 1) = v8;
    v6[5] = CFRetain(a3);
    uint64_t v9 = *(void *)(a1 + 80);
    if (v9)
    {
      CMTime time1 = *(CMTime *)(v9 + 16);
      CMTime v21 = *(CMTime *)(v7 + 2);
      if (CMTimeCompare(&time1, &v21) < 0)
      {
        *uint64_t v7 = v9;
        v7[1] = 0;
        *(void *)(v9 + 8) = v7;
      }
      else
      {
        CMTime v10 = *(void **)v9;
        if (*(void *)v9)
        {
          int v11 = (void *)v9;
          while (1)
          {
            CMTime time1 = *(CMTime *)(v10 + 2);
            CMTime v21 = *(CMTime *)(v7 + 2);
            int32_t v12 = CMTimeCompare(&time1, &v21);
            unint64_t v13 = (void *)*v11;
            if (v12 < 0) {
              break;
            }
            CMTime v10 = (void *)*v13;
            int v11 = (void *)*v11;
            if (!*v13) {
              goto LABEL_16;
            }
          }
          CMTime v10 = (void *)*v11;
          unint64_t v13 = v11;
        }
        else
        {
          unint64_t v13 = (void *)v9;
        }
LABEL_16:
        *uint64_t v7 = v10;
        void *v13 = v7;
        v7[1] = v13;
        if (*v7) {
          *(void *)(*v7 + 8) = v7;
        }
        uint64_t v7 = 0;
      }
    }
    else
    {
      *uint64_t v7 = 0;
      v7[1] = 0;
    }
    if (v7) {
      size_t v14 = v7;
    }
    else {
      size_t v14 = (void *)v9;
    }
    *(void *)(a1 + 80) = v14;
    CFUserNotificationRef v15 = (_OWORD *)(a1 + 48);
    if ((*(unsigned char *)(a1 + 60) & 1) != 0
      && (*(_OWORD *)&time1.CMTimeValue value = *v15,
          time1.CMTimeEpoch epoch = *(void *)(a1 + 64),
          CMTime v21 = *(CMTime *)a2,
          CMTimeCompare(&time1, &v21) < 0))
    {
      uint64_t v18 = 0;
    }
    else
    {
      if (*(unsigned char *)(a1 + 72))
      {
        CFAllocatorRef v16 = *(OpaqueCMTimebase **)(a1 + 40);
        CFUserNotificationRef v17 = *(NSObject **)(a1 + 16);
        CMTime time1 = *(CMTime *)a2;
        CMTimebaseSetTimerDispatchSourceNextFireTime(v16, v17, &time1, 1u);
      }
      else
      {
        *(unsigned char *)(a1 + 73) = 1;
      }
      uint64_t v18 = 0;
      long long v19 = *a2;
      *(void *)(a1 + 64) = *((void *)a2 + 2);
      _OWORD *v15 = v19;
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v18 = 4294960591;
    APSSignalErrorAt(4294960591);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
  return v18;
}

uint64_t APSTimedInfoManagerFlush(uint64_t a1)
{
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
    CMTimebaseRemoveTimerDispatchSource(*(CMTimebaseRef *)(a1 + 40), *(dispatch_source_t *)(a1 + 16));
    uint64_t v2 = timedInfoManager_removeAllElemFromCurrentElem(*(void **)(a1 + 80), *(void **)(a1 + 80));
    uint64_t v3 = MEMORY[0x1E4F1F9F8];
    *(void *)(a1 + 80) = v2;
    *(_OWORD *)(a1 + 48) = *(_OWORD *)v3;
    *(void *)(a1 + 64) = *(void *)(v3 + 16);
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSTimedInfoManagerFlushWithinTimeRange(uint64_t a1, _OWORD *a2)
{
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
    uint64_t v4 = *(char **)(a1 + 80);
    if (v4)
    {
      while (1)
      {
        long long v5 = a2[1];
        *(_OWORD *)&range.start.CMTimeValue value = *a2;
        *(_OWORD *)&range.start.CMTimeEpoch epoch = v5;
        *(_OWORD *)&range.duration.CMTimeScale timescale = a2[2];
        CMTime v12 = *(CMTime *)(v4 + 16);
        int v6 = CMTimeRangeContainsTime(&range, &v12);
        uint64_t v7 = *(char **)v4;
        if (v6) {
          break;
        }
LABEL_12:
        uint64_t v4 = v7;
        if (!v7) {
          goto LABEL_16;
        }
      }
      long long v8 = (char **)*((void *)v4 + 1);
      if (v8)
      {
        NSObject *v8 = v7;
        uint64_t v9 = *(char **)v4;
        if (!*(void *)v4)
        {
LABEL_7:
          *(_OWORD *)&range.start.CMTimeValue value = *((_OWORD *)v4 + 1);
          range.start.CMTimeEpoch epoch = *((void *)v4 + 4);
          CMTime v12 = *(CMTime *)(a1 + 48);
          if (!CMTimeCompare(&range.start, &v12)) {
            CMTimebaseRemoveTimerDispatchSource(*(CMTimebaseRef *)(a1 + 40), *(dispatch_source_t *)(a1 + 16));
          }
          CMTime v10 = (const void *)*((void *)v4 + 5);
          if (v10) {
            CFRelease(v10);
          }
          free(v4);
          goto LABEL_12;
        }
      }
      else
      {
        *(void *)(a1 + 80) = v7;
        uint64_t v9 = v7;
        if (!v7) {
          goto LABEL_7;
        }
      }
      *((void *)v9 + 1) = v8;
      goto LABEL_7;
    }
LABEL_16:
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSTimedInfoManagerGetTimebase(uint64_t a1)
{
  return *(void *)(a1 + 40);
}

uint64_t APSWrapperGetTypeID()
{
  if (gAPSWrapperInitOnce != -1) {
    dispatch_once_f(&gAPSWrapperInitOnce, 0, (dispatch_function_t)_APSWrapperGetTypeID);
  }
  return gAPSWrapperTypeID;
}

uint64_t _APSWrapperGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSWrapperTypeID = result;
  return result;
}

uint64_t _APSWrapperFinalize(uint64_t result)
{
  uint64_t v1 = *(uint64_t (**)(void))(result + 24);
  if (v1) {
    return v1(*(void *)(result + 16));
  }
  return result;
}

uint64_t APSWrapperCreate(uint64_t a1, uint64_t a2, CFTypeRef *a3)
{
  if (!a3) {
    return 4294960591;
  }
  if (gAPSWrapperInitOnce != -1) {
    dispatch_once_f(&gAPSWrapperInitOnce, 0, (dispatch_function_t)_APSWrapperGetTypeID);
  }
  uint64_t Instance = (void *)_CFRuntimeCreateInstance();
  if (!Instance) {
    return 4294960568;
  }
  uint64_t v7 = Instance;
  Instance[2] = a1;
  Instance[3] = a2;
  *a3 = CFRetain(Instance);
  CFRelease(v7);
  return 0;
}

uint64_t APSWrapperGetValue(uint64_t result)
{
  if (result) {
    return *(void *)(result + 16);
  }
  return result;
}

uint64_t APSStatsHistogramGetTypeID()
{
  if (APSStatsHistogramGetTypeID_once != -1) {
    dispatch_once(&APSStatsHistogramGetTypeID_once, &__block_literal_global_1242);
  }
  return APSStatsHistogramGetTypeID_typeID;
}

uint64_t __APSStatsHistogramGetTypeID_block_invoke()
{
  APSStatsHistogramGetTypeID_histogramClass = 0;
  *(void *)algn_1EB9F4DB8 = "APSStatsHistogram";
  qword_1EB9F4DC0 = 0;
  unk_1EB9F4DC8 = 0;
  qword_1EB9F4DD0 = (uint64_t)hist_finalize;
  unk_1EB9F4DD8 = 0;
  qword_1EB9F4DE0 = 0;
  unk_1EB9F4DE8 = 0;
  qword_1EB9F4DF0 = (uint64_t)hist_copyDebugDescription;
  uint64_t result = _CFRuntimeRegisterClass();
  APSStatsHistogramGetTypeID_typeID = result;
  return result;
}

__CFString *hist_copyDebugDescription(uint64_t a1)
{
  uint64_t v19 = *MEMORY[0x1E4F143B8];
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  uint64_t v3 = APSStatsHistogramCopyAsDictionary(a1);
  if (v3)
  {
    CFDictionaryRef v4 = v3;
    CFTypeRef cf = v3;
    if (CFDictionaryGetCount(v3) < 1) {
      goto LABEL_12;
    }
    int Value = CFDictionaryGetValue(v4, @"Name");
    int v6 = CFDictionaryGetValue(v4, @"UnitName");
    uint64_t v7 = CFDictionaryGetValue(v4, @"BucketCount");
    long long v8 = CFDictionaryGetValue(v4, @"SampleCount");
    CFDictionaryGetDouble();
    CFStringAppendFormat(Mutable, 0, @"%@ (%@)\nBucket count: %@\nTotal samples: %@\nDuration: %.1f sec\n", Value, v6, v7, v8, v9);
    CFArrayRef v10 = (const __CFArray *)CFDictionaryGetValue(v4, @"Intervals");
    CFArrayRef v11 = (const __CFArray *)CFDictionaryGetValue(v4, @"Values");
    CFIndex Count = CFArrayGetCount(v11);
    if (CFArrayGetCount(v10) == Count + 1)
    {
      if (Count >= 1)
      {
        uint64_t v13 = 0;
        do
        {
          FigCFArrayGetFloatAtIndex();
          uint64_t v14 = v13 + 1;
          FigCFArrayGetFloatAtIndex();
          FigCFArrayGetFloatAtIndex();
          snprintf(__str, 0x20uLL, "%.1f - %.1f", 0.0, 0.0);
          CFStringAppendFormat(Mutable, 0, @"%16s %5.1f%%  ", __str, 0.0 * 100.0);
          int v15 = (int)(0.0 * 50.0 + 0.5);
          if (v15 >= 1)
          {
            do
            {
              CFStringAppend(Mutable, @"*");
              --v15;
            }
            while (v15);
          }
          CFStringAppend(Mutable, @"\n");
          uint64_t v13 = v14;
        }
        while (v14 != Count);
      }
    }
    else
    {
LABEL_12:
      APSLogErrorAt(0);
    }
    CFRelease(cf);
  }
  else
  {
    APSLogErrorAt(0);
  }
  return Mutable;
}

__CFDictionary *APSStatsHistogramCopyAsDictionary(uint64_t a1)
{
  CFAllocatorRef v2 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  CFDictionaryRef v4 = Mutable;
  if (a1)
  {
    CFDictionarySetValue(Mutable, @"Name", *(const void **)(a1 + 24));
    CFDictionarySetValue(v4, @"UnitName", *(const void **)(a1 + 32));
    FigCFDictionarySetInt32();
    long long v5 = (const CFArrayCallBacks *)MEMORY[0x1E4F1D510];
    CFMutableArrayRef v6 = CFArrayCreateMutable(v2, 0, MEMORY[0x1E4F1D510]);
    CFMutableArrayRef v7 = CFArrayCreateMutable(v2, 0, v5);
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    FigCFDictionarySetInt32();
    UpTicksToSecondsF();
    FigCFDictionarySetFloat();
    FigCFArrayAppendFloat();
    if (*(_DWORD *)(a1 + 120) >= 2u)
    {
      unsigned int v8 = 1;
      do
      {
        FigCFArrayAppendFloat();
        ++v8;
      }
      while (v8 < *(_DWORD *)(a1 + 120));
    }
    FigCFArrayAppendFloat();
    CFDictionarySetValue(v4, @"Intervals", v6);
    if (*(_DWORD *)(a1 + 120))
    {
      unint64_t v9 = 0;
      do
      {
        FigCFArrayAppendFloat();
        ++v9;
      }
      while (v9 < *(unsigned int *)(a1 + 120));
    }
    CFDictionarySetValue(v4, @"Values", v7);
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
    if (v6) {
      CFRelease(v6);
    }
    if (v7) {
      CFRelease(v7);
    }
  }
  return v4;
}

void hist_finalize(uint64_t a1)
{
  CFAllocatorRef v2 = *(const void **)(a1 + 24);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 24) = 0;
  }
  uint64_t v3 = *(const void **)(a1 + 32);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 32) = 0;
  }
  if (*(void *)(a1 + 16))
  {
    FigSimpleMutexDestroy();
    *(void *)(a1 + 16) = 0;
  }
  free(*(void **)(a1 + 112));
  *(void *)(a1 + 112) = 0;
}

uint64_t APSStatsHistogramCreate(const __CFDictionary *a1)
{
  if (APSStatsHistogramGetTypeID_once != -1) {
    dispatch_once(&APSStatsHistogramGetTypeID_once, &__block_literal_global_1242);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  uint64_t v3 = Instance;
  if (Instance)
  {
    *(void *)(Instance + 128) = 0;
    *(_OWORD *)(Instance + 96) = 0u;
    *(_OWORD *)(Instance + 112) = 0u;
    *(_OWORD *)(Instance + 64) = 0u;
    *(_OWORD *)(Instance + 80) = 0u;
    *(_OWORD *)(Instance + 16) = 0u;
    *(_OWORD *)(Instance + 32) = 0u;
    *(_OWORD *)(Instance + 48) = 0u;
    *(void *)(Instance + 16) = FigSimpleMutexCreate();
    *(void *)(v3 + 48) = 0x41DFFFFFFFC00000;
    *(_DWORD *)(v3 + 120) = 10;
    if (a1)
    {
      int Value = CFDictionaryGetValue(a1, @"Name");
      if (Value) {
        int Value = CFRetain(Value);
      }
      *(void *)(v3 + 24) = Value;
      long long v5 = CFDictionaryGetValue(a1, @"UnitName");
      if (v5) {
        long long v5 = CFRetain(v5);
      }
      *(void *)(v3 + 32) = v5;
      FigCFDictionaryGetInt32IfPresent();
      FigCFDictionaryGetDoubleIfPresent();
      FigCFDictionaryGetDoubleIfPresent();
      FigCFDictionaryGetDoubleIfPresent();
      FigCFDictionaryGetBooleanIfPresent();
    }
    if (!*(void *)(v3 + 24)) {
      *(void *)(v3 + 24) = CFRetain(@"Histogram");
    }
    if (!*(void *)(v3 + 32)) {
      *(void *)(v3 + 32) = CFRetain(@" ");
    }
    unsigned int v6 = *(_DWORD *)(v3 + 120);
    if (v6 <= 1) {
      unsigned int v6 = 1;
    }
    if (v6 >= 0x64) {
      size_t v7 = 100;
    }
    else {
      size_t v7 = v6;
    }
    *(_DWORD *)(v3 + 120) = v7;
    *(void *)(v3 + 112) = malloc_type_calloc(v7, 4uLL, 0x100004052888210uLL);
    *(void *)(v3 + 88) = SecondsToUpTicksF();
    double v8 = *(double *)(v3 + 40);
    double v9 = *(double *)(v3 + 48);
    *(double *)(v3 + 56) = v8;
    *(double *)(v3 + 64) = v9;
    double v10 = v9 - v8;
    LODWORD(v9) = *(_DWORD *)(v3 + 120);
    *(double *)(v3 + 72) = v10 / (double)*(unint64_t *)&v9;
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v3;
}

uint64_t APSStatsHistogramCreateFromSerializedDictionary(const __CFDictionary *a1, uint64_t *a2)
{
  unsigned int v23 = 0;
  if (!a1)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6705;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      return v23;
    }
LABEL_35:
    LogPrintF();
    return v23;
  }
  if (!a2)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6705;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      return v23;
    }
    goto LABEL_35;
  }
  if (APSStatsHistogramGetTypeID_once != -1) {
    dispatch_once(&APSStatsHistogramGetTypeID_once, &__block_literal_global_1242);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6728;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      return v23;
    }
    goto LABEL_35;
  }
  uint64_t v5 = Instance;
  *(void *)(Instance + 128) = 0;
  *(_OWORD *)(Instance + 96) = 0u;
  *(_OWORD *)(Instance + 112) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  uint64_t v6 = FigSimpleMutexCreate();
  *(void *)(v5 + 16) = v6;
  if (!v6)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6728;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_25;
    }
LABEL_23:
    LogPrintF();
LABEL_25:
    CFRelease((CFTypeRef)v5);
    return v23;
  }
  int Value = CFDictionaryGetValue(a1, @"Name");
  if (!Value)
  {
    *(void *)(v5 + 24) = 0;
    goto LABEL_21;
  }
  CFTypeRef v8 = CFRetain(Value);
  *(void *)(v5 + 24) = v8;
  if (!v8) {
    goto LABEL_21;
  }
  double v9 = CFDictionaryGetValue(a1, @"UnitName");
  if (!v9)
  {
    *(void *)(v5 + 32) = 0;
    goto LABEL_21;
  }
  CFTypeRef v10 = CFRetain(v9);
  *(void *)(v5 + 32) = v10;
  if (!v10)
  {
LABEL_21:
    APSLogErrorAt(0);
    unsigned int v23 = -6727;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_25;
    }
    goto LABEL_23;
  }
  int Int64Ranged = CFDictionaryGetInt64Ranged();
  *(_DWORD *)(v5 + 120) = Int64Ranged;
  if (!Int64Ranged)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6709;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_25;
    }
    goto LABEL_23;
  }
  CFDictionaryGetDouble();
  *(void *)(v5 + 88) = SecondsToUpTicksF();
  CFDictionaryGetDouble();
  *(void *)(v5 + 40) = v12;
  CFDictionaryGetDouble();
  *(void *)(v5 + 48) = v13;
  *(unsigned char *)(v5 + 128) = CFDictionaryGetInt64() != 0;
  CFDictionaryGetDouble();
  *(void *)(v5 + 72) = v14;
  *(_DWORD *)(v5 + 124) = CFDictionaryGetInt64Ranged();
  *(void *)(v5 + 104) = mach_absolute_time();
  CFDictionaryGetDouble();
  uint64_t v15 = *(void *)(v5 + 104);
  *(void *)(v5 + 96) = v15 - SecondsToUpTicksF();
  CFDictionaryGetDouble();
  *(void *)(v5 + 56) = v16;
  CFDictionaryGetDouble();
  *(void *)(v5 + 64) = v17;
  CFDictionaryGetDouble();
  *(void *)(v5 + 80) = v18;
  if (!CFDictionaryGetValue(a1, @"Samples")) {
    goto LABEL_21;
  }
  uint64_t v19 = malloc_type_calloc(*(unsigned int *)(v5 + 120), 4uLL, 0x100004052888210uLL);
  *(void *)(v5 + 112) = v19;
  if (!v19)
  {
    APSLogErrorAt(0);
    unsigned int v23 = -6728;
    if (gLogCategory_APStatsHistogram > 90
      || gLogCategory_APStatsHistogram == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_25;
    }
    goto LABEL_23;
  }
  if (*(_DWORD *)(v5 + 120))
  {
    uint64_t v20 = 0;
    unint64_t v21 = 0;
    do
    {
      FigCFArrayGetInt32AtIndex();
      ++v21;
      v20 += 4;
    }
    while (v21 < *(unsigned int *)(v5 + 120));
  }
  *a2 = v5;
  return v23;
}

uint64_t APSStatsHistogramAddValue(uint64_t a1, double a2)
{
  uint64_t result = mach_absolute_time();
  if (!a1 || *(double *)(a1 + 72) <= 0.0) {
    return result;
  }
  uint64_t v5 = result;
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t v6 = *(void *)(a1 + 104);
  if (v5 - v6 > *(void *)(a1 + 88))
  {
    if (!*(unsigned char *)(a1 + 128))
    {
LABEL_7:
      double v9 = *(double *)(a1 + 40);
      double v10 = *(double *)(a1 + 72);
      if (a2 >= v9 + v10)
      {
        if (a2 >= *(double *)(a1 + 48) - v10)
        {
          int v11 = *(_DWORD *)(a1 + 120) - 1;
          double v13 = *(double *)(a1 + 64);
          if (v13 <= a2) {
            double v13 = a2;
          }
          *(double *)(a1 + 64) = v13;
        }
        else
        {
          int v11 = (int)((a2 - v9) / v10);
        }
      }
      else
      {
        int v11 = 0;
        double v12 = *(double *)(a1 + 56);
        if (v12 >= a2) {
          double v12 = a2;
        }
        *(double *)(a1 + 56) = v12;
      }
      ++*(_DWORD *)(*(void *)(a1 + 112) + 4 * v11);
      ++*(_DWORD *)(a1 + 124);
      if (!*(void *)(a1 + 96)) {
        *(void *)(a1 + 96) = v5;
      }
      *(void *)(a1 + 104) = v5;
      goto LABEL_20;
    }
    if (v6)
    {
      double v7 = a2 - *(double *)(a1 + 80);
      UpTicksToSecondsF();
      *(double *)(a1 + 80) = a2;
      a2 = v7 / v8;
      goto LABEL_7;
    }
    *(void *)(a1 + 96) = v5;
    *(void *)(a1 + 104) = v5;
    *(double *)(a1 + 80) = a2;
  }
LABEL_20:
  uint64_t v14 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v14);
}

uint64_t APSStatsHistogramCreateSerializedDictionary(uint64_t a1, __CFDictionary **a2)
{
  if (a1)
  {
    if (a2)
    {
      CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
      CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!Mutable)
      {
        APSLogErrorAt(0);
        if (gLogCategory_APStatsHistogram <= 90
          && (gLogCategory_APStatsHistogram != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        return 4294960568;
      }
      uint64_t v6 = Mutable;
      if (*(_DWORD *)(a1 + 120))
      {
        CFDictionarySetInt64();
        CFDictionarySetValue(v6, @"Name", *(const void **)(a1 + 24));
        CFDictionarySetValue(v6, @"UnitName", *(const void **)(a1 + 32));
        UpTicksToSecondsF();
        FigCFDictionarySetDouble();
        FigCFDictionarySetDouble();
        FigCFDictionarySetDouble();
        double v7 = (const void **)MEMORY[0x1E4F1CFD0];
        if (!*(unsigned char *)(a1 + 128)) {
          double v7 = (const void **)MEMORY[0x1E4F1CFC8];
        }
        CFDictionarySetValue(v6, @"ConvertToRate", *v7);
        FigCFDictionarySetDouble();
        pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
        CFMutableArrayRef v8 = CFArrayCreateMutable(v4, 0, MEMORY[0x1E4F1D510]);
        if (v8)
        {
          CFMutableArrayRef v9 = v8;
          if (*(_DWORD *)(a1 + 120))
          {
            unint64_t v10 = 0;
            do
            {
              FigCFArrayAppendInt32();
              ++v10;
            }
            while (v10 < *(unsigned int *)(a1 + 120));
          }
          CFDictionarySetValue(v6, @"Samples", v9);
          CFDictionarySetInt64();
          UpTicksToSecondsF();
          FigCFDictionarySetDouble();
          FigCFDictionarySetDouble();
          FigCFDictionarySetDouble();
          FigCFDictionarySetDouble();
          *a2 = v6;
          pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
          CFRelease(v9);
          return 0;
        }
        APSLogErrorAt(0);
        if (gLogCategory_APStatsHistogram <= 90
          && (gLogCategory_APStatsHistogram != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
        uint64_t v11 = 4294960568;
      }
      else
      {
        APSLogErrorAt(0);
        if (gLogCategory_APStatsHistogram <= 90
          && (gLogCategory_APStatsHistogram != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v11 = 4294960587;
      }
      CFRelease(v6);
      return v11;
    }
    APSLogErrorAt(0);
    if (gLogCategory_APStatsHistogram == -1) {
      _LogCategory_Initialize();
    }
  }
  else
  {
    APSLogErrorAt(0);
    if (gLogCategory_APStatsHistogram == -1) {
      _LogCategory_Initialize();
    }
  }
  uint64_t result = LogPrintF();
  __break(1u);
  return result;
}

__CFString *APSStatsHistogramCopyAsRTCString(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    uint64_t v3 = *(unsigned int *)(a1 + 124);
    double v4 = (double)v3;
    if (v3) {
      double v5 = (double)v3;
    }
    else {
      double v5 = 1.0;
    }
    LODWORD(v4) = **(_DWORD **)(a1 + 112);
    CFStringAppendFormat(Mutable, 0, @"%u,%.1f,%d,", v3, *(void *)(a1 + 56), (int)((double)*(unint64_t *)&v4 * 100.0 / v5 + 0.5));
    if (*(_DWORD *)(a1 + 120) >= 2u)
    {
      unint64_t v6 = 1;
      do
      {
        *(double *)&unint64_t v7 = (double)v6;
        LODWORD(v7) = *(_DWORD *)(*(void *)(a1 + 112) + 4 * v6);
        CFStringAppendFormat(Mutable, 0, @"%.1f,%d,", *(double *)(a1 + 40) + *(double *)(a1 + 72) * (double)v6++, (int)((double)v7 * 100.0 / v5 + 0.5));
      }
      while (v6 < *(unsigned int *)(a1 + 120));
    }
    CFStringAppendFormat(Mutable, 0, @"%.1f", *(void *)(a1 + 64));
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  }
  return Mutable;
}

__CFString *APSStatsHistogramCopyPercentageValuesAsRTCString(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    unsigned int v3 = *(_DWORD *)(a1 + 124);
    double v4 = (double)v3;
    if (v3) {
      double v5 = (double)v3;
    }
    else {
      double v5 = 1.0;
    }
    LODWORD(v4) = **(_DWORD **)(a1 + 112);
    CFStringAppendFormat(Mutable, 0, @"%d", (int)((double)*(unint64_t *)&v4 * 100.0 / v5 + 0.5));
    if (*(_DWORD *)(a1 + 120) >= 2u)
    {
      unint64_t v7 = 1;
      do
      {
        LODWORD(v6) = *(_DWORD *)(*(void *)(a1 + 112) + 4 * v7);
        CFStringAppendFormat(Mutable, 0, @",%d", (int)((double)v6 * 100.0 / v5 + 0.5));
        ++v7;
      }
      while (v7 < *(unsigned int *)(a1 + 120));
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  }
  return Mutable;
}

__CFString *APSStatsHistogramCopyValuesAsRTCString(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    CFStringAppendFormat(Mutable, 0, @"%d", **(unsigned int **)(a1 + 112));
    if (*(_DWORD *)(a1 + 120) >= 2u)
    {
      unint64_t v3 = 1;
      do
        CFStringAppendFormat(Mutable, 0, @",%d", *(unsigned int *)(*(void *)(a1 + 112) + 4 * v3++));
      while (v3 < *(unsigned int *)(a1 + 120));
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  }
  return Mutable;
}

uint64_t APSStatsHistogramGetTotalSampleCount(uint64_t a1)
{
  if (!a1) {
    return 0;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t v2 = *(unsigned int *)(a1 + 124);
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v2;
}

uint64_t APSStatsHistogramGetSampleCountInRange(uint64_t a1, double a2, double a3)
{
  if (!a1) {
    return 0;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  unsigned int v6 = *(_DWORD *)(a1 + 120);
  if (v6)
  {
    uint64_t v7 = 0;
    double v8 = *(double *)(a1 + 40);
    double v9 = *(double *)(a1 + 56);
    if (v9 >= v8) {
      double v9 = *(double *)(a1 + 40);
    }
    for (unsigned int i = 1; i <= v6; ++i)
    {
      double v11 = v9;
      if (v6 == i)
      {
        double v9 = *(double *)(a1 + 64);
        if (v9 <= *(double *)(a1 + 48)) {
          double v9 = *(double *)(a1 + 48);
        }
      }
      else
      {
        double v9 = v8 + *(double *)(a1 + 72) * (double)i;
      }
      if (v11 >= a2 && v9 <= a3) {
        uint64_t v7 = (*(_DWORD *)(*(void *)(a1 + 112) + 4 * (i - 1)) + v7);
      }
    }
  }
  else
  {
    uint64_t v7 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v7;
}

uint64_t APSLocalAudioCapabilityMonitorGetTypeID()
{
  if (gAPSLocalAudioCapabilityMonitorInitOnce != -1) {
    dispatch_once_f(&gAPSLocalAudioCapabilityMonitorInitOnce, 0, (dispatch_function_t)_APSLocalAudioCapabilityMonitorGetTypeID);
  }
  return gAPSLocalAudioCapabilityMonitorTypeID;
}

uint64_t _APSLocalAudioCapabilityMonitorGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSLocalAudioCapabilityMonitorTypeID = result;
  return result;
}

void _APSLocalAudioCapabilityMonitorFinalize(void *a1)
{
  if (gLogCategory_APSLocalAudioCapabilityMonitor <= 50
    && (gLogCategory_APSLocalAudioCapabilityMonitor != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CMNotificationCenterGetDefaultLocalCenter();
  FigNotificationCenterRemoveWeakListener();
  uint64_t v2 = (const void *)a1[4];
  if (v2) {
    CFRelease(v2);
  }
  unint64_t v3 = (const void *)a1[5];
  if (v3) {
    CFRelease(v3);
  }
  double v4 = (const void *)a1[6];
  if (v4) {
    CFRelease(v4);
  }
  FigSimpleMutexDestroy();
  double v5 = a1[3];
  if (v5)
  {
    dispatch_release(v5);
    a1[3] = 0;
  }
}

void apsCapabilityMonitor_handleFormatInfoChanged(uint64_t a1, void *a2)
{
  CFTypeRef v15 = 0;
  CFTypeRef cf = 0;
  uint64_t v2 = a2[4];
  if (!v2 || (uint64_t v4 = *(void *)(CMBaseObjectGetVTable() + 16)) == 0)
  {
    uint64_t v7 = 4294948075;
    goto LABEL_19;
  }
  double v5 = *(uint64_t (**)(uint64_t, void, void, CFTypeRef *))(v4 + 48);
  if (!v5)
  {
    uint64_t v7 = 4294948071;
    goto LABEL_19;
  }
  uint64_t v6 = *MEMORY[0x1E4F1CF80];
  uint64_t v7 = v5(v2, *MEMORY[0x1E4F763C8], *MEMORY[0x1E4F1CF80], &cf);
  if (v7)
  {
LABEL_19:
    APSLogErrorAt(v7);
    goto LABEL_20;
  }
  uint64_t v8 = a2[4];
  if (!v8 || (uint64_t v9 = *(void *)(CMBaseObjectGetVTable() + 16)) == 0)
  {
    uint64_t v7 = 4294948075;
    goto LABEL_19;
  }
  unint64_t v10 = *(uint64_t (**)(uint64_t, void, uint64_t, CFTypeRef *))(v9 + 48);
  if (!v10)
  {
    uint64_t v7 = 4294948071;
    goto LABEL_19;
  }
  uint64_t v7 = v10(v8, *MEMORY[0x1E4F76358], v6, &v15);
  if (v7) {
    goto LABEL_19;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(gAPSLocalAudioCapabilityMonitor + 16));
  double v11 = (const void *)a2[5];
  CFTypeRef v12 = cf;
  a2[5] = cf;
  if (v12) {
    CFRetain(v12);
  }
  if (v11) {
    CFRelease(v11);
  }
  double v13 = (const void *)a2[6];
  CFTypeRef v14 = v15;
  a2[6] = v15;
  if (v14) {
    CFRetain(v14);
  }
  if (v13) {
    CFRelease(v13);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(gAPSLocalAudioCapabilityMonitor + 16));
  CMNotificationCenterGetDefaultLocalCenter();
  FigDispatchAsyncPostNotification();
LABEL_20:
  if (cf) {
    CFRelease(cf);
  }
  if (v15) {
    CFRelease(v15);
  }
}

uint64_t APSLocalAudioCapabilityMonitorInitialize()
{
  if (APSLocalAudioCapabilityMonitorInitialize_once != -1) {
    dispatch_once(&APSLocalAudioCapabilityMonitorInitialize_once, &__block_literal_global_1326);
  }
  return gCreationErr;
}

void __APSLocalAudioCapabilityMonitorInitialize_block_invoke()
{
  if (gAPSLocalAudioCapabilityMonitorInitOnce != -1) {
    dispatch_once_f(&gAPSLocalAudioCapabilityMonitorInitOnce, 0, (dispatch_function_t)_APSLocalAudioCapabilityMonitorGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
LABEL_14:
    int v5 = -6728;
    goto LABEL_11;
  }
  uint64_t v1 = Instance;
  *(_OWORD *)(Instance + 16) = 0u;
  uint64_t v2 = (uint64_t *)(Instance + 16);
  *(void *)(Instance + 48) = 0;
  *(_OWORD *)(Instance + 32) = 0u;
  dispatch_queue_t v3 = dispatch_queue_create("APSLocalAudioCapabilityMonitor.queue", 0);
  v2[1] = (uint64_t)v3;
  if (!v3 || (uint64_t v4 = FigSimpleMutexCreate(), (*v2 = v4) == 0))
  {
    APSLogErrorAt(0);
    CFRelease((CFTypeRef)v1);
    goto LABEL_14;
  }
  *(void *)(v1 + 40) = 0;
  *(void *)(v1 + 48) = 0;
  if (gLogCategory_APSLocalAudioCapabilityMonitor <= 50
    && (gLogCategory_APSLocalAudioCapabilityMonitor != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  gAPSLocalAudioCapabilityMonitor = v1;
  dispatch_async(*(dispatch_queue_t *)(v1 + 24), &__block_literal_global_16);
  int v5 = 0;
LABEL_11:
  gCreationErr = v5;
}

void __APSLocalAudioCapabilityMonitorCreate_block_invoke()
{
  CFTypeRef cf = 0;
  CFTypeRef v3 = 0;
  CFTypeRef v1 = 0;
  uint64_t UsingAuxiliaryAVAudioSession = FigAudioSessionCreateUsingAuxiliaryAVAudioSession();
  if (!UsingAuxiliaryAVAudioSession)
  {
    CMNotificationCenterGetDefaultLocalCenter();
    uint64_t UsingAuxiliaryAVAudioSession = FigNotificationCenterAddWeakListener();
    if (!UsingAuxiliaryAVAudioSession) {
      uint64_t UsingAuxiliaryAVAudioSession = 4294948075;
    }
  }
  APSLogErrorAt(UsingAuxiliaryAVAudioSession);
  if (cf) {
    CFRelease(cf);
  }
  if (v1) {
    CFRelease(v1);
  }
  if (v3) {
    CFRelease(v3);
  }
}

uint64_t APSLocalAudioCapabilityMonitorGetSharedInstance(void *a1)
{
  if (APSLocalAudioCapabilityMonitorInitialize_once == -1)
  {
    if (!a1) {
      return gCreationErr;
    }
  }
  else
  {
    dispatch_once(&APSLocalAudioCapabilityMonitorInitialize_once, &__block_literal_global_1326);
    if (!a1) {
      return gCreationErr;
    }
  }
  CFTypeRef v2 = (CFTypeRef)gAPSLocalAudioCapabilityMonitor;
  if (gAPSLocalAudioCapabilityMonitor) {
    CFTypeRef v2 = CFRetain((CFTypeRef)gAPSLocalAudioCapabilityMonitor);
  }
  *a1 = v2;
  return gCreationErr;
}

uint64_t APSLocalAudioCapabilityMonitorCopyProperty(uint64_t a1, uint64_t a2, void *a3)
{
  if (!a2 || !a3)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  if (FigCFEqual())
  {
    int v5 = (pthread_mutex_t **)(a1 + 16);
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    CFTypeRef v6 = *(CFTypeRef *)(a1 + 40);
    if (v6) {
LABEL_5:
    }
      CFTypeRef v6 = CFRetain(v6);
  }
  else
  {
    if (!FigCFEqual())
    {
      uint64_t v7 = 4294954512;
      goto LABEL_7;
    }
    int v5 = (pthread_mutex_t **)(a1 + 16);
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
    CFTypeRef v6 = *(CFTypeRef *)(a1 + 48);
    if (v6) {
      goto LABEL_5;
    }
  }
  *a3 = v6;
  pthread_mutex_unlock(*v5);
  uint64_t v7 = 0;
LABEL_7:
  if (gLogCategory_APSLocalAudioCapabilityMonitor <= 50
    && (gLogCategory_APSLocalAudioCapabilityMonitor != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v7;
}

uint64_t APSRealTimeReadableGetTypeID()
{
  if (gAPSRealTimeReadableInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeReadableInitOnce, 0, (dispatch_function_t)_APSRealTimeReadableGetTypeID);
  }
  return gAPSRealTimeReadableTypeID;
}

uint64_t _APSRealTimeReadableGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimeReadableTypeID = result;
  return result;
}

uint64_t _APSRealTimeReadableFinalize(uint64_t a1)
{
  CFTypeRef v1 = *(void **)(a1 + 40);
  if (v1) {
    free(v1);
  }

  return FigSimpleMutexDestroy();
}

uint64_t APSRealTimeReadableCreate(const void *a1, size_t a2, CFTypeRef *a3)
{
  if (a2 && a3)
  {
    if (gAPSRealTimeReadableInitOnce != -1) {
      dispatch_once_f(&gAPSRealTimeReadableInitOnce, 0, (dispatch_function_t)_APSRealTimeReadableGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v7 = (void *)Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      uint64_t v8 = malloc_type_malloc(a2, 0x4B3B55A3uLL);
      if (!v8) {
        goto LABEL_16;
      }
      uint64_t v9 = v8;
      if (a1) {
        memcpy(v8, a1, a2);
      }
      else {
        bzero(v8, a2);
      }
      v7[5] = v9;
      void v7[2] = a2;
      v7[3] = v9;
      uint64_t v10 = FigSimpleMutexCreate();
      v7[4] = v10;
      if (v10)
      {
        uint64_t v11 = 0;
        *a3 = CFRetain(v7);
      }
      else
      {
LABEL_16:
        APSLogErrorAt(0);
        uint64_t v11 = 4294960568;
      }
      CFRelease(v7);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v11;
}

uint64_t APSRealTimeReadableRead(uint64_t a1, void *__dst)
{
  if (a1 && __dst)
  {
    CFTypeRef v2 = (unint64_t *)(a1 + 24);
    CFTypeRef v3 = (const void *)atomic_exchange_explicit((atomic_ullong *volatile)(a1 + 24), 0, memory_order_acquire);
    if (v3)
    {
      memcpy(__dst, v3, *(void *)(a1 + 16));
      uint64_t v4 = 0;
      atomic_store((unint64_t)v3, v2);
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v4 = 4294960537;
      APSSignalErrorAt(4294960537);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

uint64_t APSRealTimeReadableWrite(uint64_t a1, const void *a2)
{
  if (a1 && a2)
  {
    uint64_t v4 = malloc_type_malloc(*(void *)(a1 + 16), 0x70681FB2uLL);
    if (v4)
    {
      unint64_t v5 = (unint64_t)v4;
      memcpy(v4, a2, *(void *)(a1 + 16));
      pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
      CFTypeRef v6 = (atomic_ullong *)(a1 + 24);
      uint64_t v7 = *(void **)(a1 + 40);
      while (1)
      {
        uint64_t v8 = v7;
        atomic_compare_exchange_strong_explicit(v6, (unint64_t *)&v8, v5, memory_order_release, memory_order_relaxed);
        if (v8 == v7) {
          break;
        }
        pthread_yield_np();
        uint64_t v7 = *(void **)(a1 + 40);
        CFTypeRef v6 = (atomic_ullong *)(a1 + 24);
      }
      *(void *)(a1 + 40) = v5;
      pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
      free(v7);
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSRealTimeAllocatorGetDefault()
{
  if (APSRealTimeAllocatorGetDefault::sRTAllocatorOnce != -1) {
    dispatch_once(&APSRealTimeAllocatorGetDefault::sRTAllocatorOnce, &__block_literal_global_1341);
  }
  return APSRealTimeAllocatorGetDefault::sRTAllocator;
}

void __APSRealTimeAllocatorGetDefault_block_invoke()
{
  MEMORY[0x1D25EEC20]();
  if (!*MEMORY[0x1E4FB7E88])
  {
    __break(1u);
LABEL_7:
    dispatch_once(&rtReleaser_getInstance(void)::sRTReleaserOnce, &__block_literal_global_7);
    return;
  }
  APSCaulkMemoryResourceAllocatorCreate(*MEMORY[0x1E4FB7E88], 0, (uint64_t)&APSRealTimeAllocatorGetDefault::sRTAllocator);
  if (APSSettingsGetIntWithOverrideAndDefault(@"debugRTAllocator", 0, 0)) {
    APSDebugAllocatorCreate((const void *)APSRealTimeAllocatorGetDefault::sRTAllocator, @"APSRealTimeAllocator", (CFAllocatorRef *)&APSRealTimeAllocatorGetDefault::sRTAllocator);
  }
  if (rtReleaser_getInstance(void)::sRTReleaserOnce != -1) {
    goto LABEL_7;
  }
}

uint64_t ___ZL22rtReleaser_getInstancev_block_invoke()
{
  uint64_t v0 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  rtReleaser_getInstance(void)::sRTReleaser = (uint64_t)dispatch_queue_create("APSRealTimeReleaser", v0);
  APSAtomicMessageQueueCreate(*MEMORY[0x1E4F1CF80], 8, &qword_1EA642DA0);
  CFTypeRef v1 = rtReleaser_getInstance(void)::sRTReleaser;
  CFTypeRef v2 = (void *)qword_1EA642DA0;

  return APSRealTimeSignalCreate(v1, v2, (uint64_t)rtReleaser_serviceMessageQueue, 0, (uint64_t)&qword_1EA642DA8);
}

uint64_t rtReleaser_serviceMessageQueue(uint64_t a1)
{
  for (CFTypeRef cf = 0; ; CFRelease(cf))
  {
    uint64_t result = APSAtomicMessageQueueReadMessage(a1, &cf);
    if (!result) {
      break;
    }
  }
  return result;
}

void *APSRealTimeAllocatorAllocate(CFIndex size)
{
  if (APSRealTimeAllocatorGetDefault::sRTAllocatorOnce != -1) {
    dispatch_once(&APSRealTimeAllocatorGetDefault::sRTAllocatorOnce, &__block_literal_global_1341);
  }
  CFAllocatorRef v2 = (const __CFAllocator *)APSRealTimeAllocatorGetDefault::sRTAllocator;

  return CFAllocatorAllocate(v2, size, 0);
}

void APSRealTimeAllocatorDeallocate(void *ptr)
{
  if (APSRealTimeAllocatorGetDefault::sRTAllocatorOnce != -1) {
    dispatch_once(&APSRealTimeAllocatorGetDefault::sRTAllocatorOnce, &__block_literal_global_1341);
  }
  CFAllocatorRef v2 = (const __CFAllocator *)APSRealTimeAllocatorGetDefault::sRTAllocator;

  CFAllocatorDeallocate(v2, ptr);
}

void APSCFRealTimeRelease(CFTypeRef cf)
{
  CFTypeRef v5 = cf;
  if (rtReleaser_getInstance(void)::sRTReleaserOnce == -1)
  {
    if (!cf) {
      return;
    }
  }
  else
  {
    dispatch_once(&rtReleaser_getInstance(void)::sRTReleaserOnce, &__block_literal_global_7);
    if (!cf) {
      return;
    }
  }
  CFAllocatorRef v2 = CFGetAllocator(cf);
  if (APSRealTimeAllocatorGetDefault::sRTAllocatorOnce != -1) {
    dispatch_once(&APSRealTimeAllocatorGetDefault::sRTAllocatorOnce, &__block_literal_global_1341);
  }
  if (v2 == (CFAllocatorRef)APSRealTimeAllocatorGetDefault::sRTAllocator)
  {
    CFRelease(cf);
  }
  else
  {
    APSAtomicMessageQueueSendMessage(qword_1EA642DA0, &v5);
    CFTypeRef v3 = *(atomic_uint **)(qword_1EA642DA8 + 16);
    int v4 = 1;
    atomic_compare_exchange_strong_explicit(v3 + 10, (unsigned int *)&v4, 2u, memory_order_release, memory_order_relaxed);
    if (v4 == 1)
    {
      caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v3 + 6), (caulk::concurrent::message *)v3);
    }
  }
}

uint64_t APSAudioStats_MarkEvent(uint64_t result, uint64_t a2)
{
  if (result && a2)
  {
    uint64_t v2 = result;
    if (gLogCategory_APSAudioStats <= 50)
    {
      if (gLogCategory_APSAudioStats != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
        uint64_t result = LogPrintF();
      }
    }
    *(void *)(v2 + 392) = 0;
  }
  else
  {
    return APSLogErrorAt(0);
  }
  return result;
}

uint64_t APSAudioStatsCreate(const void *a1, long long *a2, int a3, int a4, unsigned int a5, uint64_t *a6)
{
  if (a2 && a6)
  {
    if (APSAudioStatsGetTypeID_once != -1) {
      dispatch_once(&APSAudioStatsGetTypeID_once, &__block_literal_global_1354);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v13 = Instance;
      *(void *)(Instance + 400) = 0;
      *(_OWORD *)(Instance + 368) = 0u;
      *(_OWORD *)(Instance + 384) = 0u;
      *(_OWORD *)(Instance + 336) = 0u;
      *(_OWORD *)(Instance + 352) = 0u;
      *(_OWORD *)(Instance + 304) = 0u;
      *(_OWORD *)(Instance + 320) = 0u;
      *(_OWORD *)(Instance + 272) = 0u;
      *(_OWORD *)(Instance + 288) = 0u;
      *(_OWORD *)(Instance + 240) = 0u;
      *(_OWORD *)(Instance + 256) = 0u;
      *(_OWORD *)(Instance + 208) = 0u;
      *(_OWORD *)(Instance + 224) = 0u;
      *(_OWORD *)(Instance + 176) = 0u;
      *(_OWORD *)(Instance + 192) = 0u;
      *(_OWORD *)(Instance + 144) = 0u;
      *(_OWORD *)(Instance + 160) = 0u;
      *(_OWORD *)(Instance + 112) = 0u;
      *(_OWORD *)(Instance + 128) = 0u;
      *(_OWORD *)(Instance + 80) = 0u;
      *(_OWORD *)(Instance + 96) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      *(_OWORD *)(Instance + 48) = 0u;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 64) = 0u;
      CFTypeRef v14 = (_OWORD *)(Instance + 64);
      *a6 = Instance;
      long long v15 = *a2;
      long long v16 = a2[1];
      *(void *)(Instance + 56) = *((void *)a2 + 4);
      *(_OWORD *)(Instance + 40) = v16;
      *(_OWORD *)(Instance + 24) = v15;
      *(void *)(Instance + 16) = CFRetain(a1);
      _OWORD *v14 = 0u;
      *(_OWORD *)(v13 + 80) = 0u;
      *(_OWORD *)(v13 + 96) = 0u;
      *(_OWORD *)(v13 + 112) = 0u;
      *(_OWORD *)(v13 + 128) = 0u;
      *(_OWORD *)(v13 + 144) = 0u;
      *(_OWORD *)(v13 + 160) = 0u;
      *(_OWORD *)(v13 + 176) = 0u;
      *(_OWORD *)(v13 + 192) = 0u;
      *(_OWORD *)(v13 + 208) = 0u;
      *(_OWORD *)(v13 + 224) = 0u;
      *(_OWORD *)(v13 + 240) = 0u;
      *(_OWORD *)(v13 + 256) = 0u;
      *(_OWORD *)(v13 + 272) = 0u;
      *(_OWORD *)(v13 + 288) = 0u;
      *(void *)(v13 + 304) = 0;
      *(void *)(v13 + 88) = mach_absolute_time();
      *(void *)(v13 + 104) = 0;
      if (a4)
      {
        if (a5 <= 3) {
          int v17 = 3;
        }
        else {
          int v17 = a5;
        }
        *(_DWORD *)(v13 + 292) = v17;
        *(unsigned char *)(v13 + 288) = a4;
        uint64_t v18 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, *(dispatch_queue_t *)(v13 + 296));
        *(void *)(v13 + 304) = v18;
        dispatch_time_t v19 = dispatch_time(0xF4240uLL, 0);
        dispatch_source_set_timer(v18, v19, 0x989680uLL, 0);
        uint64_t v20 = *(NSObject **)(v13 + 304);
        handler[0] = MEMORY[0x1E4F143A8];
        handler[1] = 0x40000000;
        handler[2] = __APSZeroTracker_StartZeroLoggerDispatch_block_invoke;
        handler[3] = &__block_descriptor_tmp_12;
        handler[4] = v14;
        void handler[5] = a1;
        handler[6] = a2;
        dispatch_source_set_event_handler(v20, handler);
        dispatch_resume(*(dispatch_object_t *)(v13 + 304));
      }
      else
      {
        *(_DWORD *)(v13 + 292) = 0;
        *(unsigned char *)(v13 + 288) = 0;
      }
      APSSampleRateTracker_Init(v13 + 312, 0x64uLL, a1, a3);
      APSSampleRateTracker_Init(v13 + 352, 0x3E8uLL, a1, a3);
      uint64_t result = 0;
      *(void *)(v13 + 392) = 0;
      *(void *)(v13 + 400) = 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return result;
}

void APSSampleRateTracker_Init(uint64_t a1, size_t count, const void *a3, int a4)
{
  if (a1)
  {
    *(void *)(a1 + 32) = 0;
    *(_OWORD *)a1 = 0u;
    *(_OWORD *)(a1 + 16) = 0u;
    *(_DWORD *)(a1 + 16) = count;
    *(void *)(a1 + 8) = malloc_type_calloc(count, 0x10uLL, 0x1000040451B5BE8uLL);
    if (a4)
    {
      CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      CFDictionarySetValue(Mutable, @"Name", a3);
      CFDictionarySetValue(Mutable, @"UnitName", @"Hz");
      FigCFDictionarySetDouble();
      FigCFDictionarySetDouble();
      *(void *)(a1 + 32) = APSStatsHistogramCreate(Mutable);
      if (Mutable)
      {
        CFRelease(Mutable);
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
}

uint64_t __APSAudioStatsGetTypeID_block_invoke()
{
  APSAudioStatsGetTypeID_histogramClass = 0;
  unk_1EA642DC0 = "APSAudioStats";
  qword_1EA642DC8 = 0;
  unk_1EA642DD0 = 0;
  qword_1EA642DD8 = (uint64_t)APSAudioStatsFinalize;
  unk_1EA642DE0 = 0;
  qword_1EA642DE8 = 0;
  unk_1EA642DF0 = 0;
  qword_1EA642DF8 = (uint64_t)APSAudioStatsCopyDebugDescription;
  uint64_t result = _CFRuntimeRegisterClass();
  APSAudioStatsGetTypeID_typeID = result;
  return result;
}

__CFString *APSAudioStatsCopyDebugDescription(uint64_t a1)
{
  if (a1)
  {
    CFAllocatorRef v2 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
    CFStringRef v4 = CFStringCreateMutable(v2, 0);
    CFStringAppendF();
    CFStringAppend(Mutable, v4);
    if (v4) {
      CFRelease(v4);
    }
    CFStringAppendF();
    if (*(void *)(a1 + 16))
    {
      if (*(_DWORD *)(a1 + 80) >= 0xAu) {
        int v5 = 10;
      }
      else {
        int v5 = *(_DWORD *)(a1 + 80);
      }
      CFStringRef v6 = CFStringCreateMutable(v2, 0);
      if (*(_DWORD *)(a1 + 32) == 1819304813 && v5)
      {
        CFStringAppendF();
        CFStringAppendF();
        for (uint64_t i = 9; i != -1; --i)
        {
          uint64_t v8 = *(void *)(a1 + 104);
          int v9 = i + (__int16)v8 - 10;
          uint64_t v10 = i + v8;
          if (v9 >= 0) {
            v10 -= 10;
          }
          if (*(_DWORD *)(a1 + 16 * v10 + 128))
          {
            UpTicksToSecondsF();
            CFStringAppendF();
          }
        }
      }
      CFStringAppend(Mutable, v6);
      if (v6) {
        CFRelease(v6);
      }
    }
    else
    {
      APSLogErrorAt(0);
      CFStringAppend(Mutable, 0);
    }
    CFStringRef v11 = (const __CFString *)APSAudioStats_CopySampleRateStatsAsString((unint64_t *)a1);
    CFStringAppend(Mutable, v11);
    if (v11) {
      CFRelease(v11);
    }
    if (*(void *)(a1 + 344)) {
      CFStringAppendF();
    }
    if (*(void *)(a1 + 384)) {
      CFStringAppendF();
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return Mutable;
}

uint64_t APSAudioStats_CopySampleRateStatsAsString(unint64_t *a1)
{
  if (a1)
  {
    CFAllocatorRef v2 = a1;
    uint64_t v3 = (uint64_t)(a1 + 39);
    APSSampleRateTracker_GetRate(a1 + 39);
    APSSampleRateTracker_GetTimeAccumulated(v3);
    v2 += 44;
    APSSampleRateTracker_GetRate(v2);
    APSSampleRateTracker_GetTimeAccumulated((uint64_t)v2);
    return CFStringCreateF();
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v1;
}

double APSSampleRateTracker_GetRate(unint64_t *a1)
{
  if (a1)
  {
    double TimeAccumulated = APSSampleRateTracker_GetTimeAccumulated((uint64_t)a1);
    double v3 = (double)*a1;
    uint64_t v4 = a1[4];
    double v5 = v3 / TimeAccumulated;
    if (v4) {
      APSStatsHistogramAddValue(v4, v3 / TimeAccumulated);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0.0;
  }
  return v5;
}

double APSSampleRateTracker_GetTimeAccumulated(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0.0;
  }
  if (!*(void *)(a1 + 8)) {
    return 0.0;
  }

  UpTicksToSecondsF();
  return result;
}

void APSAudioStatsFinalize(uint64_t a1)
{
  if (a1)
  {
    APSSampleRateTracker_Finalize(a1 + 312);
    APSSampleRateTracker_Finalize(a1 + 352);
    *(void *)(a1 + 392) = 0;
    *(void *)(a1 + 400) = 0;
    double v3 = *(const void **)(a1 + 16);
    if (v3) {
      CFRelease(v3);
    }
    if (*(unsigned char *)(a1 + 288))
    {
      uint64_t v4 = *(NSObject **)(a1 + 304);
      if (v4)
      {
        dispatch_source_cancel(v4);
        dispatch_release(*(dispatch_object_t *)(a1 + 304));
        *(void *)(a1 + 304) = 0;
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
}

void APSSampleRateTracker_Finalize(uint64_t a1)
{
  if (a1)
  {
    free(*(void **)(a1 + 8));
    double v3 = *(const void **)(a1 + 32);
    if (v3) {
      CFRelease(v3);
    }
    *(void *)(a1 + 32) = 0;
    *(_OWORD *)a1 = 0u;
    *(_OWORD *)(a1 + 16) = 0u;
  }
  else
  {
    APSLogErrorAt(0);
  }
}

uint64_t APSAudioStats_ProcessAudioBuffer(uint64_t a1, unsigned __int8 *a2, unint64_t a3)
{
  if (a1 && a2)
  {
    uint64_t v6 = mach_absolute_time();
    if (*(_DWORD *)(a1 + 32) == 1819304813) {
      unint64_t v7 = a3 / *(unsigned int *)(a1 + 48);
    }
    else {
      unint64_t v7 = *(unsigned int *)(a1 + 44);
    }
    uint64_t v8 = 8;
    if (a3 < 8) {
      uint64_t v8 = a3;
    }
    if (v8)
    {
      uint64_t v9 = v8;
      uint64_t v10 = a2;
      while (!*v10++)
      {
        if (!--v9) {
          goto LABEL_12;
        }
      }
    }
    else
    {
LABEL_12:
      unint64_t v12 = a3 - 8;
      if (a3 < 8) {
        unint64_t v12 = 0;
      }
      if (v8 + 8 >= a3) {
        unint64_t v13 = v8;
      }
      else {
        unint64_t v13 = v12;
      }
      unint64_t v14 = a3 - v13;
      if (a3 <= v13)
      {
LABEL_21:
        int v17 = *(_DWORD *)(a1 + 112);
        if (!v17)
        {
          *(void *)(a1 + 120) = mach_absolute_time();
          int v17 = *(_DWORD *)(a1 + 112);
        }
        *(_DWORD *)(a1 + 112) = v17 + a3;
        if (*(unsigned char *)(a1 + 288)) {
          *(_DWORD *)(a1 + 68) += a3;
        }
        *(_DWORD *)(a1 + 76) += a3;
        ++*(_DWORD *)(a1 + 64);
LABEL_28:
        APSSampleRateTracker_AddNewRecord(a1 + 312, v7, v6);
        uint64_t result = APSSampleRateTracker_AddNewRecord(a1 + 352, v7, v6);
        *(int64x2_t *)(a1 + 392) = vaddq_s64(*(int64x2_t *)(a1 + 392), vdupq_n_s64(v7));
        return result;
      }
      long long v15 = &a2[v13];
      while (!*v15++)
      {
        if (!--v14) {
          goto LABEL_21;
        }
      }
    }
    if (*(_DWORD *)(a1 + 112)) {
      APSZeroTracker_EndCurrentRun(a1 + 64);
    }
    goto LABEL_28;
  }

  return APSLogErrorAt(0);
}

uint64_t APSZeroTracker_EndCurrentRun(uint64_t result)
{
  if (!result) {
    return APSLogErrorAt(0);
  }
  if (*(_DWORD *)(result + 48))
  {
    uint64_t v1 = *(void *)(result + 48);
    uint64_t v2 = result + 16 * *(void *)(result + 40);
    unsigned int v4 = *(_DWORD *)(v2 + 64);
    double v3 = (void *)(v2 + 64);
    if (v4 < v1)
    {
      uint64_t v5 = 0;
      *double v3 = v1;
      uint64_t v6 = (unsigned int *)(result + 64);
      unint64_t v7 = *(unsigned int *)(result + 64);
      v3[1] = *(void *)(result + 56);
      do
      {
        unsigned int v9 = *v6;
        v6 += 4;
        unint64_t v8 = v9;
        if (v7 > v9)
        {
          *(void *)(result + 40) = v5;
          unint64_t v7 = v8;
        }
        ++v5;
      }
      while (v5 != 10);
      LODWORD(v1) = *(_DWORD *)(result + 48);
    }
    if (v1 > *(_DWORD *)(result + 8))
    {
      *(_DWORD *)(result + 8) = v1;
      *(void *)(result + 32) = *(void *)(result + 56);
    }
    *(_DWORD *)(result + 48) = 0;
    ++*(_DWORD *)(result + 16);
    *(_DWORD *)(result + 4) = 0;
  }
  return result;
}

uint64_t APSSampleRateTracker_AddNewRecord(uint64_t result, uint64_t a2, uint64_t a3)
{
  if (!result) {
    return APSLogErrorAt(0);
  }
  uint64_t v3 = *(void *)(result + 8);
  uint64_t v4 = *(unsigned int *)(result + 20);
  unsigned int v5 = *(_DWORD *)(result + 24);
  if (v5)
  {
    unsigned int v6 = *(_DWORD *)(result + 16);
    if (v4) {
      int v7 = *(_DWORD *)(result + 20);
    }
    else {
      int v7 = *(_DWORD *)(result + 16);
    }
    uint64_t v8 = *(void *)result + *(void *)(v3 + 16 * (v7 - 1) + 8);
    *(void *)uint64_t result = v8;
    if (v5 >= v6) {
      *(void *)uint64_t result = v8 - *(void *)(v3 + 16 * v4 + 8);
    }
  }
  else
  {
    unsigned int v6 = *(_DWORD *)(result + 16);
  }
  *(void *)(v3 + 16 * v4 + 8) = a2;
  *(void *)(v3 + 16 * v4) = a3;
  if ((int)v4 + 1 < v6) {
    int v9 = v4 + 1;
  }
  else {
    int v9 = 0;
  }
  *(_DWORD *)(result + 20) = v9;
  *(_DWORD *)(result + 24) = v5 + 1;
  return result;
}

uint64_t APSAudioStats_TerminateSession(uint64_t a1)
{
  if (a1)
  {
    uint64_t v3 = a1 + 64;
    if (*(unsigned char *)(a1 + 288))
    {
      uint64_t v4 = *(NSObject **)(a1 + 304);
      if (v4)
      {
        dispatch_source_cancel(v4);
        dispatch_release(*(dispatch_object_t *)(a1 + 304));
        *(void *)(a1 + 304) = 0;
      }
    }
    return APSZeroTracker_EndCurrentRun(v3);
  }
  else
  {
    return APSLogErrorAt(0);
  }
}

uint64_t APSIssueReporterProtocolGetProtocolID()
{
  if (APSIssueReporterProtocolGetProtocolID_sAPSIssueReporterProtocolIDOnce != -1) {
    dispatch_once_f(&APSIssueReporterProtocolGetProtocolID_sAPSIssueReporterProtocolIDOnce, &APSIssueReporterProtocolGetProtocolID_sAPSIssueReporterProtocolID, (dispatch_function_t)issueReporter_registerProtocol);
  }
  return APSIssueReporterProtocolGetProtocolID_sAPSIssueReporterProtocolID;
}

uint64_t issueReporter_registerProtocol(uint64_t a1)
{
  return MEMORY[0x1F40DC660](&kAPSIssueReporterProtocolDesc, 0, a1);
}

uint64_t APSRealTimeDispatcherGetTypeID()
{
  if (gAPSRealTimeDispatcherInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeDispatcherInitOnce, 0, (dispatch_function_t)_APSRealTimeDispatcherGetTypeID);
  }
  return gAPSRealTimeDispatcherTypeID;
}

uint64_t _APSRealTimeDispatcherGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimeDispatcherTypeID = result;
  return result;
}

void _APSRealTimeDispatcherFinalize(void *a1)
{
  uint64_t v2 = a1[2];
  if (v2) {
    dispatch_release(v2);
  }
  uint64_t v3 = (const void *)a1[3];
  if (v3) {
    CFRelease(v3);
  }
  uint64_t v4 = (const void *)a1[4];
  if (v4)
  {
    CFRelease(v4);
  }
}

uint64_t APSRealTimeDispatcherCreate(NSObject *a1, CFTypeRef *a2)
{
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (gAPSRealTimeDispatcherInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeDispatcherInitOnce, 0, (dispatch_function_t)_APSRealTimeDispatcherGetTypeID);
  }
  uint64_t Instance = (void *)_CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  unsigned int v5 = (CFTypeRef *)Instance;
  Instance[3] = 0;
  unsigned int v6 = Instance + 3;
  Instance[2] = 0;
  Instance[4] = 0;
  dispatch_retain(a1);
  *(v6 - 1) = (uint64_t)a1;
  uint64_t v7 = APSAtomicMessageQueueCreate(*MEMORY[0x1E4F1CF80], 16, v6);
  if (v7)
  {
    uint64_t v9 = v7;
    goto LABEL_14;
  }
  uint64_t v8 = (void *)CFRetain(v5[3]);
  uint64_t v7 = APSRealTimeSignalCreate(a1, v8, (uint64_t)rtDispatcher_signalHandler, (void (__cdecl *)(void *))rtDispatcher_signalFinalizer, (uint64_t)(v5 + 4));
  uint64_t v9 = v7;
  if (v7)
  {
LABEL_14:
    APSLogErrorAt(v7);
    goto LABEL_9;
  }
  *a2 = CFRetain(v5);
LABEL_9:
  CFRelease(v5);
  return v9;
}

void rtDispatcher_signalFinalizer(const void *a1)
{
  uint64_t v2 = 0;
  uint64_t v3 = 0;
  while (APSAtomicMessageQueueReadMessage((uint64_t)a1, &v2))
    v2(v3);

  CFRelease(a1);
}

uint64_t rtDispatcher_signalHandler(uint64_t a1)
{
  uint64_t v3 = 0;
  for (uint64_t i = 0; ; v3(i))
  {
    uint64_t result = APSAtomicMessageQueueReadMessage(a1, &v3);
    if (!result) {
      break;
    }
  }
  return result;
}

uint64_t APSRealTimeDispatcherAsync(uint64_t result, uint64_t a2, uint64_t a3)
{
  v6[0] = a2;
  v6[1] = a3;
  if (a2)
  {
    uint64_t v3 = result;
    uint64_t result = APSAtomicMessageQueueSendMessage(*(void *)(result + 24), v6);
    uint64_t v4 = *(atomic_uint **)(*(void *)(v3 + 32) + 16);
    int v5 = 1;
    atomic_compare_exchange_strong_explicit(v4 + 10, (unsigned int *)&v5, 2u, memory_order_release, memory_order_relaxed);
    if (v5 == 1)
    {
      return caulk::concurrent::messenger::enqueue((caulk::concurrent::messenger *)(v4 + 6), (caulk::concurrent::message *)v4);
    }
  }
  return result;
}

uint64_t APSRTPPassThroughJitterBufferAcquireRelinquishedNode(uint64_t a1, void *a2)
{
  uint64_t v2 = 4294895295;
  if (a1 && a2)
  {
    _X0 = 0;
    _X1 = 0;
    uint64_t v2 = 4294895294;
    *a2 = 0;
    __asm { CASPAL          X0, X1, X0, X1, [X8] }
    while (1)
    {
      unint64_t v12 = _X0;
      if (!_X0) {
        break;
      }
      _X2 = *_X0;
      _X1 = 0;
      __asm { CASPAL          X0, X1, X2, X3, [X9] }
      if (_X0 == v12)
      {
        long long v15 = v12;
        goto LABEL_15;
      }
    }
    while (1)
    {
      unsigned int v16 = atomic_load((unsigned int *)(a1 + 116));
      if (!v16)
      {
        atomic_compare_exchange_strong((atomic_uint *volatile)(a1 + 116), &v16, 1u);
        if (!v16) {
          break;
        }
      }
      pthread_yield_np();
    }
    int v17 = *(void **)(a1 + 200);
    long long v15 = (void *)*v17;
    if ((void *)*v17 != v17)
    {
      uint64_t v18 = *v15;
      *(void *)(v18 + 8) = v15[1];
      *(void *)v15[1] = v18;
      atomic_store(0, (unsigned int *)(a1 + 116));
      atomic_fetch_add((atomic_uint *volatile)(a1 + 112), 0xFFFFFFFF);
LABEL_15:
      int v24 = v15 + 2;
      *((_DWORD *)v15 + 13) = 0;
      *((_DWORD *)v15 + 14) = 0;
      if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
        && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      uint64_t v2 = 0;
      *a2 = v24;
      return v2;
    }
    _X2 = 0;
    atomic_store(0, (unsigned int *)(a1 + 116));
    _X3 = 0;
    __asm { CASPAL          X2, X3, X2, X3, [X8] }
    while (_X2)
    {
      long long v15 = _X2;
      _X4 = *_X2;
      _X3 = 0;
      __asm { CASPAL          X2, X3, X4, X5, [X9] }
      if (_X2 == v15) {
        goto LABEL_15;
      }
    }
    if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
      && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  return v2;
}

uint64_t APSRTPPassThroughJitterBufferRelinquishNode(uint64_t a1, uint64_t a2)
{
  uint64_t result = 4294895295;
  if (a1 && a2)
  {
    if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
      && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    _X2 = 0;
    _X3 = 0;
    _X0 = (void *)(a2 - 16);
    __asm { CASPAL          X2, X3, X2, X3, [X8] }
    *(void *)(a2 - 8) = 0;
    do
    {
      *_X0 = _X2;
      _X5 = 0;
      __asm { CASPAL          X4, X5, X0, X1, [X8] }
      _ZF = _X4 == _X2;
      _X2 = _X4;
    }
    while (!_ZF);
    return 0;
  }
  return result;
}

uint64_t APSRTPPassThroughJitterBufferInsertNode(uint64_t a1, uint64_t a2)
{
  uint64_t result = 4294895295;
  if (a1 && a2)
  {
    if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
      && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    unsigned int v5 = *(_DWORD *)(*(void *)a2 + 4);
    unint64_t v6 = atomic_load((unint64_t *)(a1 + 216));
    do
    {
      unint64_t v7 = (v6 & 0x4000000000000000) >> 62;
      if ((v6 & 0x4000000000000000) != 0) {
        unint64_t v8 = v6 >> 31;
      }
      else {
        LODWORD(v8) = v6;
      }
      if ((v6 & 0x4000000000000000) != 0) {
        LODWORD(v9) = v6;
      }
      else {
        unint64_t v9 = v6 >> 31;
      }
      int v10 = 31;
      unsigned int v11 = v5;
      while (1)
      {
        unsigned int v12 = v11 % 0x1F;
        if ((v8 & (1 << v12)) == 0) {
          break;
        }
        if (*(_DWORD *)(a1 + 124 * v7 + 224 + 4 * v12) == v5)
        {
LABEL_36:
          APSRTPPassThroughJitterBufferRelinquishNode(a1, a2);
          return 0;
        }
        unsigned int v11 = v12 + 1;
        if (!--v10)
        {
          unsigned int v12 = -1;
          break;
        }
      }
      int v13 = 31;
      unsigned int v14 = v5;
      do
      {
        unsigned int v15 = v14 % 0x1F;
        if ((v9 & (1 << v15)) == 0) {
          break;
        }
        if (*(_DWORD *)(a1 + 124 * (v7 ^ 1) + 224 + 4 * v15) == v5) {
          goto LABEL_36;
        }
        unsigned int v14 = v15 + 1;
        --v13;
      }
      while (v13);
      unint64_t v16 = v6;
      if (v12 == -1)
      {
        if ((v6 & 0x4000000000000000) != 0) {
          unint64_t v17 = 0xFFFFFFFF80000000;
        }
        else {
          unint64_t v17 = 0xC00000007FFFFFFFLL;
        }
        unint64_t v16 = (v6 & 0xBFFFFFFFFFFFFFFFLL | ((v7 ^ 1) << 62)) & v17;
        unsigned int v12 = v5 % 0x1F;
        LODWORD(v7) = (v6 & 0x4000000000000000) == 0;
      }
      unint64_t v18 = (1 << v12);
      if (v7) {
        unint64_t v18 = (unint64_t)(1 << v12) << 31;
      }
      unint64_t v19 = v6;
      atomic_compare_exchange_strong((atomic_ullong *volatile)(a1 + 216), &v19, v18 | v16);
      _ZF = v19 == v6;
      unint64_t v6 = v19;
    }
    while (!_ZF);
    _X2 = 0;
    _X3 = 0;
    *(_DWORD *)(a1 + 124 * ((v16 >> 62) & 1) + 4 * v12 + 224) = v5;
    _X4 = (void *)(a2 - 16);
    __asm { CASPAL          X2, X3, X2, X3, [X8] }
    *(void *)(a2 - 8) = 0;
    do
    {
      uint64_t result = 0;
      *_X4 = _X2;
      _X7 = 0;
      __asm { CASPAL          X6, X7, X4, X5, [X8] }
      _ZF = _X6 == _X2;
      _X2 = _X6;
    }
    while (!_ZF);
  }
  return result;
}

uint64_t APSRTPPassThroughJitterBufferAcquireLowestInsertedNode(uint64_t a1, uint64_t *a2)
{
  uint64_t v4 = 4294895295;
  if (a1 && a2)
  {
    _X2 = 0;
    _X3 = 0;
    __asm { CASPAL          X2, X3, X2, X3, [X8] }
    if (_X2)
    {
      unsigned int v12 = _X2;
      do
      {
        _X7 = 0;
        _X4 = 0;
        __asm { CASPAL          X6, X7, X4, X5, [X8] }
        BOOL v16 = _X6 == v12;
        if (_X6 != v12) {
          unsigned int v12 = _X6;
        }
      }
      while (!v16 && v12);
      if (v12)
      {
        unint64_t v17 = 0;
        do
        {
          unint64_t v18 = v12;
          unsigned int v12 = (void *)*v12;
          void *v18 = v17;
          unint64_t v17 = v18;
        }
        while (v12);
        do
        {
          while (1)
          {
            unint64_t v19 = v18;
            unint64_t v18 = (void *)*v18;
            uint64_t v20 = v19 + 2;
            *unint64_t v19 = 0;
            v19[1] = 0;
            do
            {
              unint64_t v21 = atomic_load((unint64_t *)(a1 + 208));
              if ((v21 & 0x8000000000000000) == 0) {
                break;
              }
              int v22 = *(_DWORD *)(*v20 + 4);
              if (v22 - (int)v21 < 0)
              {
                char v28 = 1;
                goto LABEL_30;
              }
              if (v22 - ((HIDWORD(v21) & 0x7FFFFFFF) + (int)v21) < 0) {
                break;
              }
              unint64_t v23 = v21;
              atomic_compare_exchange_strong((atomic_ullong *volatile)(a1 + 208), &v23, v21 & 0x7FFFFFFFFFFFFFFFLL);
            }
            while (v23 != v21);
            while (1)
            {
              unsigned int v24 = atomic_load((unsigned int *)(a1 + 116));
              if (!v24)
              {
                atomic_compare_exchange_strong((atomic_uint *volatile)(a1 + 116), &v24, 1u);
                if (!v24) {
                  break;
                }
              }
              atomic_fetch_add((atomic_uint *volatile)(a1 + 120), 1u);
              pthread_yield_np();
            }
            int v25 = *(uint64_t **)(a1 + 200);
            do
            {
              int v25 = (uint64_t *)v25[1];
              if (v25 == *(uint64_t **)(a1 + 200))
              {
                int v25 = *(uint64_t **)(a1 + 200);
                goto LABEL_27;
              }
              int v26 = *(_DWORD *)(v25[2] + 4);
              int v27 = *(_DWORD *)(*v20 + 4);
            }
            while (v26 - v27 > 0);
            if (v26 == v27)
            {
              char v28 = 1;
              goto LABEL_28;
            }
LABEL_27:
            char v28 = 0;
            uint64_t v29 = *v25;
            *unint64_t v19 = *v25;
            v19[1] = (uint64_t)v25;
            *(void *)(v29 + 8) = v19;
            *(void *)v19[1] = v19;
LABEL_28:
            atomic_store(0, (unsigned int *)(a1 + 116));
LABEL_30:
            if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
              && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
            {
              LogPrintF();
            }
            if ((v28 & 1) == 0) {
              break;
            }
            APSRTPPassThroughJitterBufferRelinquishNode(a1, (uint64_t)(v19 + 2));
            if (!v18) {
              goto LABEL_38;
            }
          }
          atomic_fetch_add((atomic_uint *volatile)(a1 + 112), 1u);
        }
        while (v18);
      }
    }
LABEL_38:
    while (1)
    {
      unsigned int v30 = atomic_load((unsigned int *)(a1 + 116));
      if (!v30)
      {
        atomic_compare_exchange_strong((atomic_uint *volatile)(a1 + 116), &v30, 1u);
        if (!v30) {
          break;
        }
      }
      atomic_fetch_add((atomic_uint *volatile)(a1 + 120), 1u);
      pthread_yield_np();
    }
    unint64_t v31 = atomic_load((unint64_t *)(a1 + 208));
    unsigned int v32 = *(void ***)(a1 + 200);
    int v33 = *v32;
    if (*v32 == v32)
    {
LABEL_45:
      *a2 = 0;
      uint64_t v4 = 4294895294;
    }
    else
    {
      while (1)
      {
        *unsigned int v32 = (void *)*v33;
        long long v35 = (void *)*v33;
        uint64_t v34 = (uint64_t)(v33 + 2);
        v35[1] = v32;
        *a2 = v34;
        atomic_fetch_add((atomic_uint *volatile)(a1 + 112), 0xFFFFFFFF);
        if ((v31 & 0x8000000000000000) == 0) {
          break;
        }
        int v36 = *(_DWORD *)(*(void *)v34 + 4);
        if (v36 - (int)v31 >= 0)
        {
          if (v36 - ((HIDWORD(v31) & 0x7FFFFFFF) + (int)v31) >= 0)
          {
            uint64_t v4 = 0;
            atomic_compare_exchange_strong((atomic_ullong *volatile)(a1 + 208), &v37, v31 & 0x7FFFFFFFFFFFFFFFLL);
            goto LABEL_49;
          }
          break;
        }
        APSRTPPassThroughJitterBufferRelinquishNode(a1, v34);
        unint64_t v31 = atomic_load((unint64_t *)(a1 + 208));
        unsigned int v32 = *(void ***)(a1 + 200);
        int v33 = *v32;
        if (*v32 == v32) {
          goto LABEL_45;
        }
      }
      uint64_t v4 = 0;
    }
LABEL_49:
    atomic_store(0, (unsigned int *)(a1 + 116));
  }
  if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
    && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v4;
}

uint64_t APSRTPPassThroughJitterBufferGetInsertedNodeCount(uint64_t result)
{
  if (result) {
    return atomic_load((unsigned int *)(result + 112));
  }
  return result;
}

uint64_t APSRTPPassThroughJitterBufferFlush(uint64_t a1, unsigned int a2, int a3)
{
  uint64_t v3 = 4294895295;
  if (a1)
  {
    if ((int)(a2 - a3) >= 1)
    {
      APSLogErrorAt(0);
    }
    else
    {
      if (gLogCategory_APSRTPPassThroughJitterBuffer <= 30
        && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      uint64_t v3 = 0;
      atomic_store(a2 | ((unint64_t)((a3 - a2) | 0x80000000) << 32), (unint64_t *)(a1 + 208));
    }
  }
  return v3;
}

unint64_t APSRTPPassThroughJitterBufferIsFlushing(unint64_t result)
{
  if (result)
  {
    unint64_t v1 = atomic_load((unint64_t *)(result + 208));
    return v1 >> 63;
  }
  return result;
}

uint64_t APSRTPPassThroughJitterBufferCreate(uint64_t a1, int a2, uint64_t a3, const void *a4, uint64_t *a5)
{
  if (a2 <= 0)
  {
    uint64_t v35 = 4294895295;
LABEL_33:
    APSLogErrorAt(0);
    return v35;
  }
  if (!a3)
  {
    uint64_t v35 = 4294895295;
    goto LABEL_33;
  }
  if (!a5)
  {
    uint64_t v35 = 4294895295;
    goto LABEL_33;
  }
  unsigned int v8 = a2;
  if (APSRTPPassThroughJitterBufferGetTypeID_sRegisterAPSRTPPassThroughJitterBufferOnce != -1) {
    dispatch_once_f(&APSRTPPassThroughJitterBufferGetTypeID_sRegisterAPSRTPPassThroughJitterBufferOnce, 0, (dispatch_function_t)registerAPSRTPPassThroughJitterBuffer);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return 4294895296;
  }
  uint64_t v10 = Instance;
  *(_DWORD *)(Instance + 16) = v8;
  *(void *)(Instance + 24) = a3;
  if (a4)
  {
    CFTypeRef v11 = CFRetain(a4);
    unsigned int v8 = *(_DWORD *)(v10 + 16);
  }
  else
  {
    CFTypeRef v11 = 0;
  }
  *(void *)(v10 + 32) = v11;
  unsigned int v12 = CFAllocatorAllocate((CFAllocatorRef)a4, 72 * v8, 0);
  *(void *)(v10 + 40) = v12;
  if (!v12)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSRTPPassThroughJitterBuffer > 90
      || gLogCategory_APSRTPPassThroughJitterBuffer == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_45;
    }
LABEL_40:
    LogPrintF();
LABEL_45:
    CFRelease((CFTypeRef)v10);
    return 4294895296;
  }
  int v13 = (char *)CFAllocatorAllocate((CFAllocatorRef)a4, *(void *)(v10 + 24) * *(unsigned int *)(v10 + 16), 0);
  *(void *)(v10 + 48) = v13;
  if (!v13)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSRTPPassThroughJitterBuffer > 90
      || gLogCategory_APSRTPPassThroughJitterBuffer == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_45;
    }
    goto LABEL_40;
  }
  int v14 = *(_DWORD *)(v10 + 16);
  _X2 = *(void *)(v10 + 40);
  if (v14 != 1)
  {
    uint64_t v16 = *(void *)(v10 + 24);
    uint64_t v17 = _X2 + 72;
    uint64_t v18 = (v14 - 1);
    do
    {
      *(void *)(v17 - 32) = v13;
      *(void *)(v17 - 72) = v17;
      v13 += v16;
      v17 += 72;
      --v18;
    }
    while (v18);
  }
  unint64_t v19 = (void *)(_X2 + 72 * (v14 - 1));
  void v19[5] = v13;
  *unint64_t v19 = 0;
  uint64_t v20 = *(void *)(v10 + 96);
  do
  {
    _X4 = 0;
    _X7 = *(void *)(v10 + 104);
    __asm { CASPAL          X6, X7, X4, X5, [X9] }
    _ZF = _X6 == v20;
    uint64_t v20 = _X6;
  }
  while (!_ZF);
  uint64_t v28 = *(void *)(v10 + 80);
  do
  {
    _X4 = 0;
    _X7 = *(void *)(v10 + 88);
    __asm { CASPAL          X6, X7, X4, X5, [X9] }
    _ZF = _X6 == v28;
    uint64_t v28 = _X6;
  }
  while (!_ZF);
  uint64_t v32 = *(void *)(v10 + 64);
  do
  {
    _X5 = *(void *)(v10 + 72);
    __asm { CASPAL          X4, X5, X2, X3, [X9] }
    _ZF = _X4 == v32;
    uint64_t v32 = _X4;
  }
  while (!_ZF);
  *(void *)(v10 + 128) = v10 + 128;
  *(void *)(v10 + 136) = v10 + 128;
  *(void *)(v10 + 200) = v10 + 128;
  atomic_store(0, (unsigned int *)(v10 + 112));
  if (gLogCategory_APSRTPPassThroughJitterBuffer <= 50
    && (gLogCategory_APSRTPPassThroughJitterBuffer != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v35 = 0;
  *a5 = v10;
  return v35;
}

uint64_t registerAPSRTPPassThroughJitterBuffer()
{
  sAPSRTPPassThroughJitterBufferClass = 0;
  unk_1EA642E60 = "APSRTPPassThroughJitterBuffer";
  qword_1EA642E68 = (uint64_t)APSRTPPassThroughJitterBufferInit;
  unk_1EA642E70 = 0;
  qword_1EA642E78 = (uint64_t)APSRTPPassThroughJitterBufferFinalize;
  unk_1EA642E80 = 0;
  qword_1EA642E88 = 0;
  unk_1EA642E90 = 0;
  qword_1EA642E98 = (uint64_t)APSRTPPassThroughJitterBufferCopyDebugDesc;
  uint64_t result = _CFRuntimeRegisterClass();
  sAPSRTPPassThroughJitterBufferID = result;
  return result;
}

__CFString *APSRTPPassThroughJitterBufferCopyDebugDesc(const void *a1)
{
  CFAllocatorRef v1 = CFGetAllocator(a1);
  CFMutableDictionaryRef Mutable = CFStringCreateMutable(v1, 0);
  CFStringAppendFormat(Mutable, 0, @"APSRTPPassThroughJitterBuffer");
  return Mutable;
}

void APSRTPPassThroughJitterBufferFinalize(uint64_t a1)
{
  uint64_t v2 = *(void **)(a1 + 40);
  if (v2) {
    CFAllocatorDeallocate(*(CFAllocatorRef *)(a1 + 32), v2);
  }
  uint64_t v3 = *(void **)(a1 + 48);
  if (v3) {
    CFAllocatorDeallocate(*(CFAllocatorRef *)(a1 + 32), v3);
  }
  uint64_t v4 = *(const void **)(a1 + 32);
  if (v4)
  {
    CFRelease(v4);
  }
}

double APSRTPPassThroughJitterBufferInit(_OWORD *a1)
{
  double result = 0.0;
  a1[28] = 0u;
  a1[29] = 0u;
  a1[26] = 0u;
  a1[27] = 0u;
  a1[24] = 0u;
  a1[25] = 0u;
  a1[22] = 0u;
  a1[23] = 0u;
  a1[20] = 0u;
  a1[21] = 0u;
  a1[18] = 0u;
  a1[19] = 0u;
  a1[16] = 0u;
  a1[17] = 0u;
  a1[14] = 0u;
  a1[15] = 0u;
  a1[12] = 0u;
  a1[13] = 0u;
  a1[10] = 0u;
  a1[11] = 0u;
  a1[8] = 0u;
  a1[9] = 0u;
  a1[6] = 0u;
  a1[7] = 0u;
  a1[4] = 0u;
  a1[5] = 0u;
  a1[2] = 0u;
  a1[3] = 0u;
  a1[1] = 0u;
  return result;
}

uint64_t APSRTPPassThroughJitterBufferGetTypeID()
{
  if (APSRTPPassThroughJitterBufferGetTypeID_sRegisterAPSRTPPassThroughJitterBufferOnce != -1) {
    dispatch_once_f(&APSRTPPassThroughJitterBufferGetTypeID_sRegisterAPSRTPPassThroughJitterBufferOnce, 0, (dispatch_function_t)registerAPSRTPPassThroughJitterBuffer);
  }
  return sAPSRTPPassThroughJitterBufferID;
}

uint64_t APSAudioIOAssertionTimingControllerGetTypeID()
{
  if (gAPSAudioIOAssertionTimingControllerInitOnce != -1) {
    dispatch_once_f(&gAPSAudioIOAssertionTimingControllerInitOnce, 0, (dispatch_function_t)_APSAudioIOAssertionTimingControllerGetTypeID);
  }
  return gAPSAudioIOAssertionTimingControllerTypeID;
}

uint64_t _APSAudioIOAssertionTimingControllerGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSAudioIOAssertionTimingControllerTypeID = result;
  return result;
}

void _APSAudioIOAssertionTimingControllerFinalize(uint64_t a1)
{
  if (gLogCategory_APSAudioIOAssertionTimingController <= 50
    && (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v2 = *(NSObject **)(a1 + 32);
  if (v2)
  {
    dispatch_source_cancel(v2);
    dispatch_sync_f(*(dispatch_queue_t *)(a1 + 24), (void *)a1, (dispatch_function_t)audioIOAssertionTimingController_releaseAndClearAssertion);
  }
  uint64_t v3 = *(NSObject **)(a1 + 24);
  if (v3) {
    dispatch_release(v3);
  }
  uint64_t v4 = *(NSObject **)(a1 + 32);
  if (v4) {
    dispatch_release(v4);
  }
  unsigned int v5 = *(const void **)(a1 + 16);
  if (v5) {
    CFRelease(v5);
  }
  unint64_t v6 = *(const void **)(a1 + 40);
  if (v6)
  {
    CFRelease(v6);
  }
}

void audioIOAssertionTimingController_releaseAndClearAssertion(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 40);
  if (v2)
  {
    if (gLogCategory_APSAudioIOAssertionTimingController > 50) {
      goto LABEL_7;
    }
    if (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    uint64_t v2 = *(const void **)(a1 + 40);
    if (v2)
    {
LABEL_7:
      CFRelease(v2);
      *(void *)(a1 + 40) = 0;
    }
  }
}

uint64_t APSAudioIOAssertionTimingControllerCreate(__CFString *a1, CFTypeRef *a2)
{
  if (a2)
  {
    if (gAPSAudioIOAssertionTimingControllerInitOnce != -1) {
      dispatch_once_f(&gAPSAudioIOAssertionTimingControllerInitOnce, 0, (dispatch_function_t)_APSAudioIOAssertionTimingControllerGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v5 = Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      if (a1) {
        unint64_t v6 = a1;
      }
      else {
        unint64_t v6 = &stru_1F26EE2F0;
      }
      *(void *)(v5 + 16) = CFRetain(v6);
      unint64_t v7 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
      unsigned int v8 = dispatch_queue_create("APSAudioIOAssertionTimingController", v7);
      *(void *)(v5 + 24) = v8;
      if (v8 && (unint64_t v9 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v8), (*(void *)(v5 + 32) = v9) != 0))
      {
        dispatch_source_set_timer(v9, 0xFFFFFFFFFFFFFFFFLL, 0xFFFFFFFFFFFFFFFFLL, 0);
        dispatch_set_context(*(dispatch_object_t *)(v5 + 32), (void *)v5);
        dispatch_source_set_event_handler_f(*(dispatch_source_t *)(v5 + 32), (dispatch_function_t)audioIOAssertionTimingController_releaseAndClearAssertion);
        dispatch_resume(*(dispatch_object_t *)(v5 + 32));
        if (gLogCategory_APSAudioIOAssertionTimingController <= 50
          && (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v10 = 0;
        *a2 = CFRetain((CFTypeRef)v5);
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v10 = 4294960568;
      }
      CFRelease((CFTypeRef)v5);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v10;
}

uint64_t APSAudioIOAssertionTimingControllerAssertUntilTime(uint64_t a1, uint64_t a2)
{
  context[0] = a1;
  context[1] = a2;
  if (a1)
  {
    uint64_t v4 = 0;
    dispatch_sync_f(*(dispatch_queue_t *)(a1 + 24), context, (dispatch_function_t)audioIOAssertionTimingController_assertUntilTimeInternal);
    return v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t audioIOAssertionTimingController_assertUntilTimeInternal(void *a1)
{
  uint64_t v2 = *a1;
  uint64_t v3 = *(void *)(*a1 + 40);
  if (!a1[1])
  {
    if (v3)
    {
      if (gLogCategory_APSAudioIOAssertionTimingController <= 50)
      {
        if (gLogCategory_APSAudioIOAssertionTimingController != -1 || (int v5 = _LogCategory_Initialize(), v2 = *a1, v5))
        {
          LogPrintF();
          uint64_t v2 = *a1;
        }
      }
      unint64_t v6 = *(const void **)(v2 + 40);
      if (v6)
      {
        CFRelease(v6);
        *(void *)(*a1 + 40) = 0;
      }
    }
    goto LABEL_15;
  }
  if (v3)
  {
LABEL_15:
    if (gLogCategory_APSAudioIOAssertionTimingController <= 30
      && (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    goto LABEL_19;
  }
  uint64_t result = APSAudioIOAssertionCreate(*(__CFString **)(v2 + 16), (CFTypeRef *)(*a1 + 40));
  if (!result)
  {
    if (gLogCategory_APSAudioIOAssertionTimingController > 50)
    {
LABEL_19:
      dispatch_source_set_timer(*(dispatch_source_t *)(*a1 + 32), a1[1], 0xFFFFFFFFFFFFFFFFLL, 0);
      uint64_t result = 0;
      goto LABEL_20;
    }
    if (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    goto LABEL_15;
  }
  if (gLogCategory_APSAudioIOAssertionTimingController <= 90)
  {
    uint64_t v7 = result;
    if (gLogCategory_APSAudioIOAssertionTimingController != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
    uint64_t result = v7;
  }
LABEL_20:
  *((_DWORD *)a1 + 4) = result;
  return result;
}

uint64_t APSStallMonitorActivityGetTypeID()
{
  if (gAPSStallMonitorActivityInitOnce != -1) {
    dispatch_once_f(&gAPSStallMonitorActivityInitOnce, 0, (dispatch_function_t)_APSStallMonitorActivityGetTypeID);
  }
  return gAPSStallMonitorActivityTypeID;
}

uint64_t _APSStallMonitorActivityGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSStallMonitorActivityTypeID = result;
  return result;
}

void _APSStallMonitorActivityFinalize(uint64_t a1)
{
  uint64_t v2 = *(dispatch_queue_t **)(a1 + 40);
  if (v2)
  {
    v4[0] = *(void *)(a1 + 40);
    v4[1] = a1;
    dispatch_sync_f(*v2, v4, (dispatch_function_t)stallMonitor_deregisterActivity);
  }
  uint64_t v3 = *(const void **)(a1 + 24);
  if (v3) {
    CFRelease(v3);
  }
}

void stallMonitor_deregisterActivity(const void **a1)
{
}

uint64_t APSStallMonitorActivityCreate(const void *a1, int a2, int a3, uint64_t *a4)
{
  if (a1 && a2)
  {
    if (gAPSStallMonitorActivityInitOnce != -1) {
      dispatch_once_f(&gAPSStallMonitorActivityInitOnce, 0, (dispatch_function_t)_APSStallMonitorActivityGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v9 = Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      *(void *)(Instance + 24) = CFRetain(a1);
      *(_DWORD *)(v9 + 32) = a2;
      *(_DWORD *)(v9 + 36) = a3;
      if (_APSStallMonitorGetInstance_sOnce != -1) {
        dispatch_once_f(&_APSStallMonitorGetInstance_sOnce, &_APSStallMonitorGetInstance_sInstance, (dispatch_function_t)stallMonitor_init);
      }
      v11[0] = &_APSStallMonitorGetInstance_sInstance;
      v11[1] = v9;
      dispatch_sync_f((dispatch_queue_t)_APSStallMonitorGetInstance_sInstance, v11, (dispatch_function_t)stallMonitor_registerActivity);
      uint64_t result = 0;
      *(void *)(v9 + 40) = &_APSStallMonitorGetInstance_sInstance;
      *a4 = v9;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

void stallMonitor_registerActivity(const void **a1)
{
}

void stallMonitor_init(uint64_t a1)
{
  uint64_t v2 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  *(void *)a1 = dispatch_queue_create("APSStallMonitor", v2);
  *(void *)(a1 + 8) = dispatch_queue_create("APSStallMonitor.notification", 0);
  *(void *)(a1 + 16) = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, *(dispatch_queue_t *)a1);
  *(void *)(a1 + 24) = CFSetCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0);
  *(void *)(a1 + 32) = 0;
  APSSettingsGetIntWithOverrideAndDefault(@"stallMonitorReportBackoffSecs", 0, 86400);
  *(void *)(a1 + 40) = SecondsToUpTicks();
  dispatch_set_context(*(dispatch_object_t *)(a1 + 16), (void *)a1);
  dispatch_source_set_event_handler_f(*(dispatch_source_t *)(a1 + 16), (dispatch_function_t)stallMonitor_timerFire);
  uint64_t v3 = *(NSObject **)(a1 + 16);
  dispatch_time_t v4 = dispatch_time(0, 1000000000);
  dispatch_source_set_timer(v3, v4, 0x3B9ACA00uLL, 0xF4240uLL);
  int v5 = *(NSObject **)(a1 + 16);

  dispatch_resume(v5);
}

void stallMonitor_timerFire(uint64_t a1)
{
  uint64_t context = a1;
  CFTypeRef cf = 0;
  CFTypeRef v7 = 0;
  uint64_t v5 = mach_absolute_time();
  uint64_t v8 = 0;
  CFSetApplyFunction(*(CFSetRef *)(a1 + 24), (CFSetApplierFunction)stallMonitor_activityApplier, &context);
  if (!v8) {
    goto LABEL_44;
  }
  if (!cf || !v7)
  {
    APSLogErrorAt(0);
    goto LABEL_44;
  }
  if (v5 < *(void *)(context + 32))
  {
LABEL_44:
    uint64_t v2 = 0;
LABEL_27:
    uint64_t v3 = 0;
    goto LABEL_34;
  }
  *(void *)(context + 32) = *(void *)(context + 40) + v5;
  uint64_t v2 = (const void *)CFStringCreateF();
  if (!v2)
  {
    APSLogErrorAt(0);
    goto LABEL_27;
  }
  if (v8)
  {
    if (gLogCategory_APSStallMonitor <= 50
      && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (!FigUserTailspinWithMessage()
      && gLogCategory_APSStallMonitor <= 90
      && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  if ((v8 & 2) != 0)
  {
    if (gLogCategory_APSStallMonitor <= 50
      && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (!FigUserStackshotWithMessage()
      && gLogCategory_APSStallMonitor <= 90
      && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  if ((v8 & 4) == 0) {
    goto LABEL_27;
  }
  if (gLogCategory_APSStallMonitor <= 50
    && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v3 = (const void *)CFStringCreateF();
  if (v3) {
    APSTapToRadarInvoke(@"AirPlay (New Bugs)", v3, v7, @"AirPlay - Stall Monitor", 0, 0);
  }
  else {
    APSLogErrorAt(0);
  }
LABEL_34:
  if (cf) {
    CFRelease(cf);
  }
  if (v7) {
    CFRelease(v7);
  }
  if (v2) {
    CFRelease(v2);
  }
  if (v3) {
    CFRelease(v3);
  }
}

uint64_t stallMonitor_activityApplier(uint64_t result, uint64_t a2)
{
  uint64_t v3 = result;
  uint64_t v4 = *(unsigned int *)(result + 16);
  while ((v4 & 1) != 0)
  {
    unsigned int v5 = *(_DWORD *)(result + 32);
    if (v5 < v4 >> 1) {
      break;
    }
    unsigned int v6 = (v4 | 1) + 2;
    uint64_t v7 = v4;
    atomic_compare_exchange_strong_explicit((atomic_uint *volatile)(result + 16), (unsigned int *)&v7, v6, memory_order_relaxed, memory_order_relaxed);
    BOOL v8 = v7 == v4;
    uint64_t v4 = v7;
    if (v8)
    {
      if (v5 < v6 >> 1)
      {
        if (gLogCategory_APSStallMonitor <= 90
          && (gLogCategory_APSStallMonitor != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        CMNotificationCenterGetDefaultLocalCenter();
        FigDispatchAsyncPostNotification();
        if ((*(void *)(a2 + 16)
           || (uint64_t result = (uint64_t)CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0),
               (*(void *)(a2 + 16) = result) != 0))
          && (*(void *)(a2 + 24)
           || (uint64_t result = (uint64_t)CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0),
               (*(void *)(a2 + 24) = result) != 0))
          && (uint64_t result = CFStringAppendF(), !result)
          && (uint64_t result = CFStringAppendF(), !result))
        {
          *(_DWORD *)(a2 + 32) |= *(_DWORD *)(v3 + 36);
        }
        else
        {
          return APSLogErrorAt(result);
        }
      }
      return result;
    }
  }
  return result;
}

uint64_t APSStallMonitorActivityBegin(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  int v1 = 0;
  atomic_compare_exchange_strong_explicit((atomic_uint *volatile)(a1 + 16), (unsigned int *)&v1, 1u, memory_order_acquire, memory_order_acquire);
  if (v1) {
    return 4294960575;
  }
  else {
    return 0;
  }
}

uint64_t APSStallMonitorActivityEnd(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  if (atomic_exchange_explicit((atomic_uint *volatile)(a1 + 16), 0, memory_order_release)) {
    return 0;
  }
  return 4294960576;
}

uint64_t APSSystemGetUserVersion()
{
  if (APSSystemGetUserVersion_prefsOnce != -1) {
    dispatch_once(&APSSystemGetUserVersion_prefsOnce, &__block_literal_global_1462);
  }
  uint64_t v0 = APSSystemGetUserVersion_prefsUserVersion;
  if (APSSystemGetUserVersion_prefsUserVersion >= 3)
  {
    uint64_t v0 = gUserVersionOverride;
    if (gUserVersionOverride >= 3)
    {
      if (senderSupportsAirPlay1080p_once != -1) {
        dispatch_once(&senderSupportsAirPlay1080p_once, &__block_literal_global_351);
      }
      uint64_t v0 = senderSupportsAirPlay1080p_result;
    }
  }
  if (gLogCategory_APSSystemUtils <= 30
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v0;
}

uint64_t __senderSupportsAirPlay1080p_block_invoke()
{
  uint64_t v0 = 0;
  mach_port_t v1 = *MEMORY[0x1E4F2EEF0];
  for (char i = 1; ; char i = 0)
  {
    char v3 = i;
    CFDictionaryRef v4 = IOServiceMatching(senderSupportsAirPlay1080p_drivers[v0]);
    uint64_t result = IOServiceGetMatchingService(v1, v4);
    if (result) {
      break;
    }
    uint64_t v0 = 1;
    if ((v3 & 1) == 0) {
      return result;
    }
  }
  senderSupportsAirPlay1080p_uint64_t result = 1;

  return IOObjectRelease(result);
}

uint64_t __APSSystemGetUserVersion_block_invoke()
{
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSSystemGetUserVersion_prefsUserVersion = result;
  if (result <= 2 && gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSSystemSetUserVersion(uint64_t result)
{
  int v1 = result;
  if (gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
      uint64_t result = LogPrintF();
    }
  }
  gUserVersionOverride = v1;
  return result;
}

uint64_t APSIsMXAvailableForPrewarm()
{
  return in_audio_mx_server_process();
}

uint64_t __APSIsAPMSpeaker_block_invoke()
{
  int v0 = MGGetSInt32Answer();
  if (gLogCategory_APSSystemUtils <= 50
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSIsAPMSpeaker_sIsAPMSpeaker = result != 0;
  if ((v0 == 7) != (result != 0) && gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSIsIPhone()
{
  if (APSIsIPhone_onceToken != -1) {
    dispatch_once(&APSIsIPhone_onceToken, &__block_literal_global_23);
  }
  return APSIsIPhone_sIsiPhone;
}

uint64_t __APSIsIPhone_block_invoke()
{
  uint64_t result = MGGetSInt32Answer();
  if (result == 1) {
    APSIsIPhone_sIsiPhone = 1;
  }
  return result;
}

uint64_t APSIsIPad()
{
  if (APSIsIPad_onceToken != -1) {
    dispatch_once(&APSIsIPad_onceToken, &__block_literal_global_25);
  }
  return APSIsIPad_sIsiPad;
}

uint64_t __APSIsIPad_block_invoke()
{
  uint64_t result = MGGetSInt32Answer();
  if (result == 3) {
    APSIsIPad_sIsiPad = 1;
  }
  return result;
}

uint64_t APSIsEndpointClusteringEnabled()
{
  if (APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabledOnce != -1) {
    dispatch_once(&APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabledOnce, &__block_literal_global_27);
  }
  return APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabled;
}

uint64_t __APSIsEndpointClusteringEnabled_block_invoke()
{
  APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabled = 1;
  uint64_t result = IsAppleInternalBuild();
  if (result)
  {
    uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"enableClusterEndpoint", 0, APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabled);
    APSIsEndpointClusteringEnabled_sIsEndpointClusteringEnabled = result;
  }
  return result;
}

uint64_t APSIsPairingGroupEnabled()
{
  if (APSIsPairingGroupEnabled_sIsPairingGroupEnabledOnce != -1) {
    dispatch_once(&APSIsPairingGroupEnabled_sIsPairingGroupEnabledOnce, &__block_literal_global_32);
  }
  return APSIsPairingGroupEnabled_sIsPairingGroupEnabled;
}

uint64_t __APSIsPairingGroupEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"PairingGroup");
  APSIsPairingGroupEnabled_sIsPairingGroupEnabled = result;
  return result;
}

uint64_t APSMultiPrimariesEnabled()
{
  if (APSMultiPrimariesEnabled_sMultiPrimariesEnabledOnce != -1) {
    dispatch_once(&APSMultiPrimariesEnabled_sMultiPrimariesEnabledOnce, &__block_literal_global_37);
  }
  return APSMultiPrimariesEnabled_sMultiPrimariesEnabled;
}

void __APSMultiPrimariesEnabled_block_invoke()
{
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker)
  {
    if (APSSettingsIsFeatureEnabledInDomain()) {
      APSMultiPrimariesEnabled_sMultiPrimariesEnabled = 1;
    }
  }
}

uint64_t APSNowPlayingSessionDataSourceEnabled()
{
  if (APSNowPlayingSessionDataSourceEnabled_sNowPlayingSessionDataSourceEnabledOnce != -1) {
    dispatch_once(&APSNowPlayingSessionDataSourceEnabled_sNowPlayingSessionDataSourceEnabledOnce, &__block_literal_global_45);
  }
  return APSNowPlayingSessionDataSourceEnabled_sNowPlayingSessionDataSourceEnabled;
}

void __APSNowPlayingSessionDataSourceEnabled_block_invoke()
{
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker)
  {
    if (APSSettingsIsFeatureEnabledInDomain()) {
      APSNowPlayingSessionDataSourceEnabled_sNowPlayingSessionDataSourceEnabled = 1;
    }
  }
}

uint64_t APSIsRemoteHALPluginLoadingEnabled()
{
  if (APSIsRemoteHALPluginLoadingEnabled_sOnce != -1) {
    dispatch_once(&APSIsRemoteHALPluginLoadingEnabled_sOnce, &__block_literal_global_50);
  }
  return APSIsRemoteHALPluginLoadingEnabled_sRemoteHalPluginLoadingEnabled;
}

uint64_t __APSIsRemoteHALPluginLoadingEnabled_block_invoke()
{
  uint64_t result = FigIsAirplaydEnabled();
  APSIsRemoteHALPluginLoadingEnabled_sRemoteHalPluginLoadingEnabled = result;
  return result;
}

uint64_t APSShouldClusterEngageOnActivation()
{
  if (APSShouldClusterEngageOnActivation_sOnce != -1) {
    dispatch_once(&APSShouldClusterEngageOnActivation_sOnce, &__block_literal_global_52);
  }
  return APSShouldClusterEngageOnActivation_sEngageOnActivateCluster;
}

uint64_t __APSShouldClusterEngageOnActivation_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"EngageOnActivateCluster");
  if (result) {
    APSShouldClusterEngageOnActivation_sEngageOnActivateCluster = 1;
  }
  return result;
}

uint64_t APSIsExplicitEndpointManagerInitializationEnabledInMX()
{
  if (APSIsExplicitEndpointManagerInitializationEnabledInMX_sOnce != -1) {
    dispatch_once(&APSIsExplicitEndpointManagerInitializationEnabledInMX_sOnce, &__block_literal_global_57);
  }
  return APSIsExplicitEndpointManagerInitializationEnabledInMX_sEnabled;
}

uint64_t __APSIsExplicitEndpointManagerInitializationEnabledInMX_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabledInDomain();
  if (result) {
    APSIsExplicitEndpointManagerInitializationEnabledInMX_sEnabled = 1;
  }
  return result;
}

uint64_t APSIsSuntoryEnabled()
{
  if (APSIsSuntoryEnabled_sSuntoryEnabledOnce != -1) {
    dispatch_once(&APSIsSuntoryEnabled_sSuntoryEnabledOnce, &__block_literal_global_65);
  }
  return APSIsSuntoryEnabled_sSuntoryEnabled;
}

uint64_t __APSIsSuntoryEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabledInDomain();
  if (result) {
    APSIsSuntoryEnabled_sSuntoryEnabled = 1;
  }
  return result;
}

uint64_t __APSIsProximitySenderEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"ProximitySender");
  APSIsProximitySenderEnabled_sProximitySenderEnabled = result;
  return result;
}

uint64_t APSIsProximityReceiverEnabled()
{
  if (APSIsProximityReceiverEnabled_sOnce != -1) {
    dispatch_once(&APSIsProximityReceiverEnabled_sOnce, &__block_literal_global_78);
  }
  return APSIsProximityReceiverEnabled_sProximityReceiverEnabled;
}

uint64_t __APSIsProximityReceiverEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"ProximityReceiver");
  APSIsProximityReceiverEnabled_sProximityReceiverEnabled = result;
  return result;
}

uint64_t APSIsPermanentSpeakerGroupingEnabled(uint64_t a1)
{
  if (a1) {
    return *MEMORY[0x1E4F1CFD0] == a1;
  }
  if (APSIsPermanentSpeakerGroupingEnabled_sOnce != -1) {
    dispatch_once(&APSIsPermanentSpeakerGroupingEnabled_sOnce, &__block_literal_global_83);
  }
  return APSIsPermanentSpeakerGroupingEnabled_sPSGEnabled;
}

uint64_t __APSIsPermanentSpeakerGroupingEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"PermanentSpeakerGrouping");
  APSIsPermanentSpeakerGroupingEnabled_sPSGEnabled = result;
  return result;
}

uint64_t APSIsSetMRInfoCommandEnabled()
{
  if (APSIsSetMRInfoCommandEnabled_sOnce != -1) {
    dispatch_once(&APSIsSetMRInfoCommandEnabled_sOnce, &__block_literal_global_88);
  }
  return APSIsSetMRInfoCommandEnabled_sSetMREnabled;
}

uint64_t __APSIsSetMRInfoCommandEnabled_block_invoke()
{
  uint64_t result = APSSettingsIsFeatureEnabled(@"SetMRInfo");
  if (result) {
    APSIsSetMRInfoCommandEnabled_sSetMREnabled = 1;
  }
  return result;
}

__CFString *APSGetFabricatedMemberIDForHTGroup(uint64_t a1, int a2, int a3)
{
  if (a3) {
    BOOL v3 = 1;
  }
  else {
    BOOL v3 = a1 == 2;
  }
  CFDictionaryRef v4 = @"2";
  if (v3) {
    CFDictionaryRef v4 = @"1";
  }
  if (a2) {
    return @"0";
  }
  else {
    return v4;
  }
}

CFStringRef APSCreateGroupID(const void *a1, const __CFString *a2, const __CFString *a3)
{
  if (!a1) {
    return 0;
  }
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 0;
  }
  BOOL v8 = Mutable;
  CFArrayAppendValue(Mutable, a1);
  if (a2)
  {
    if ((unint64_t)(CFStringGetLength(a2) - 1) > 2)
    {
      if (gLogCategory_APSSystemUtils <= 90
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
    else
    {
      CFArrayAppendValue(v8, a2);
    }
  }
  if (a3)
  {
    if (CFStringGetLength(a3) < 4)
    {
      if (gLogCategory_APSSystemUtils <= 90
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
    else
    {
      CFArrayAppendValue(v8, a3);
    }
  }
  CFStringRef v9 = CFStringCreateByCombiningStrings(v6, v8, @"+");
  CFRelease(v8);
  return v9;
}

uint64_t APSParseGroupID(CFStringRef theString, void *a2, void *a3, void *a4, void *a5)
{
  if (!theString
    || (CFAllocatorRef v9 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80],
        (CFArrayRef ArrayBySeparatingStrings = CFStringCreateArrayBySeparatingStrings((CFAllocatorRef)*MEMORY[0x1E4F1CF80], theString, @"+")) == 0))
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  CFArrayRef v11 = ArrayBySeparatingStrings;
  CFIndex Count = CFArrayGetCount(ArrayBySeparatingStrings);
  if ((unint64_t)(Count - 4) < 0xFFFFFFFFFFFFFFFDLL
    || (unint64_t v13 = Count,
        CFStringRef ValueAtIndex = (const __CFString *)CFArrayGetValueAtIndex(v11, 0),
        CFStringGetLength(ValueAtIndex) < 1))
  {
    APSLogErrorAt(0);
    CFRelease(v11);
    return 4294960591;
  }
  CFTypeRef v15 = CFRetain(ValueAtIndex);
  if (v13 < 2)
  {
    uint64_t v20 = 0;
    goto LABEL_20;
  }
  CFStringRef v16 = (const __CFString *)CFArrayGetValueAtIndex(v11, 1);
  CFIndex Length = CFStringGetLength(v16);
  if (Length <= 0)
  {
    APSLogErrorAt(0);
    unint64_t v21 = 0;
LABEL_44:
    uint64_t v20 = 0;
    goto LABEL_45;
  }
  unint64_t v18 = Length;
  CFTypeRef v19 = CFRetain(v16);
  uint64_t v20 = v19;
  if (v18 < 4)
  {
    if (v13 != 3)
    {
      CFTypeRef v23 = 0;
      if (v19)
      {
LABEL_16:
        unsigned int v24 = CFStringCreateWithFormat(v9, 0, @"%@+%@", v15, v20);
        if (!a2)
        {
LABEL_22:
          if (a3)
          {
            unint64_t v21 = 0;
            *a3 = v20;
            if (a4)
            {
LABEL_24:
              uint64_t v20 = 0;
              *a4 = v23;
              goto LABEL_27;
            }
          }
          else
          {
            unint64_t v21 = v20;
            if (a4) {
              goto LABEL_24;
            }
          }
          uint64_t v20 = v23;
LABEL_27:
          uint64_t v25 = 0;
          if (a5)
          {
            *a5 = v24;
            unsigned int v24 = 0;
          }
          goto LABEL_29;
        }
LABEL_21:
        *a2 = v15;
        CFTypeRef v15 = 0;
        goto LABEL_22;
      }
      goto LABEL_19;
    }
    unint64_t v21 = v19;
    goto LABEL_14;
  }
  if (v13 != 3) {
    goto LABEL_20;
  }
  if (!v19)
  {
    unint64_t v21 = 0;
LABEL_14:
    CFStringRef v22 = (const __CFString *)CFArrayGetValueAtIndex(v11, 2);
    if (CFStringGetLength(v22) > 3)
    {
      CFTypeRef v23 = CFRetain(v22);
      uint64_t v20 = v21;
      if (v21) {
        goto LABEL_16;
      }
LABEL_19:
      uint64_t v20 = v23;
LABEL_20:
      unsigned int v24 = CFRetain(v15);
      CFTypeRef v23 = v20;
      uint64_t v20 = 0;
      if (!a2) {
        goto LABEL_22;
      }
      goto LABEL_21;
    }
    APSLogErrorAt(0);
    goto LABEL_44;
  }
  APSLogErrorAt(0);
  unint64_t v21 = 0;
LABEL_45:
  unsigned int v24 = 0;
  uint64_t v25 = 4294960591;
LABEL_29:
  CFRelease(v11);
  if (v15) {
    CFRelease(v15);
  }
  if (v21) {
    CFRelease(v21);
  }
  if (v20) {
    CFRelease(v20);
  }
  if (v24) {
    CFRelease(v24);
  }
  return v25;
}

BOOL APSIsMemberOfHTGroup()
{
  CFTypeRef cf = 0;
  unsigned int v4 = 0;
  APSCopyPersistentGroupInfo((const __CFString **)&cf, &v4, 0, 0, 0, 0, 0, 0);
  CFTypeRef v0 = cf;
  unsigned int v1 = v4;
  if (cf) {
    CFRelease(cf);
  }
  return v0 && v1 == 1;
}

void APSCopyPersistentGroupInfo(const __CFString **a1, unsigned int *a2, void *a3, void *a4, CFStringRef *a5, BOOL *a6, void *a7, void *a8)
{
  if (a1) {
    *a1 = 0;
  }
  if (a3) {
    *a3 = 0;
  }
  if (a2) {
    *a2 = 0;
  }
  if (a4) {
    *a4 = 0;
  }
  if (a5) {
    *a5 = 0;
  }
  if (a6) {
    *a6 = 0;
  }
  if (a7) {
    *a7 = 0;
  }
  if (a8) {
    *a8 = 0;
  }
  unsigned int v35 = 0;
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  CFStringRef v11 = (const __CFString *)APSSettingsCopyValueEx(@"persistentGroupUUID", 0, 0);
  uint64_t v34 = a8;
  if (v11)
  {
    unsigned int Int64 = APSSettingsGetInt64(@"persistentGroupType", (int *)&v35);
    uint64_t v13 = v35;
    if (v35 || (v14 = APSSettingsGetInt64(@"persistentGroupSize", (int *)&v35), (uint64_t v13 = v35) != 0))
    {
      APSLogErrorAt(v13);
      CFStringRef v28 = v11;
    }
    else
    {
      CFAllocatorRef v15 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
      uint64_t v16 = APSGetPersistentGroupModel();
      CFStringRef v17 = CFStringCreateWithFormat(v15, 0, @"%d", v16);
      unint64_t v18 = APSSettingsCopyValueEx(@"persistentGroupMemberID", 0, 0);
      if (!v18 && Int64 == 1)
      {
        int v19 = IsAppleTV();
        uint64_t v20 = APSSettingsGetInt64(@"tightSyncIsGroupLeader", 0);
        unint64_t v21 = @"2";
        if (v20) {
          BOOL v22 = 1;
        }
        else {
          BOOL v22 = v14 == (const void *)2;
        }
        if (v22) {
          unint64_t v21 = @"1";
        }
        if (v19) {
          CFTypeRef v23 = @"0";
        }
        else {
          CFTypeRef v23 = v21;
        }
        unint64_t v18 = CFRetain(v23);
      }
      uint64_t v24 = APSValidatePersistentGroupInfo((uint64_t)v11, (uint64_t)v14, Int64, (uint64_t)v18, (uint64_t)v17, 0);
      unsigned int v35 = v24;
      if (!v24)
      {
        BOOL v25 = APSSettingsGetInt64(@"persistentGroupIsGroupLeader", 0) != 0;
        int v26 = APSSettingsCopyValueEx(@"persistentGroupLeaderUUID", 0, 0);
        int v27 = APSSettingsCopyValueEx(@"groupName", 0, 0);
        goto LABEL_41;
      }
      APSLogErrorAt(v24);
      CFRelease(v11);
      if (v18) {
        CFRelease(v18);
      }
      if (!v17)
      {
        CFStringRef v11 = 0;
        unsigned int Int64 = 0;
        int v14 = 0;
        unint64_t v18 = 0;
        goto LABEL_40;
      }
      CFStringRef v28 = v17;
    }
    CFRelease(v28);
    CFStringRef v11 = 0;
  }
  unsigned int Int64 = 0;
  int v14 = 0;
  unint64_t v18 = 0;
  CFStringRef v17 = 0;
LABEL_40:
  BOOL v25 = 0;
  int v26 = 0;
  int v27 = 0;
LABEL_41:
  if (a1)
  {
    *a1 = v11;
    CFStringRef v11 = 0;
  }
  if (a3) {
    *a3 = v14;
  }
  if (a2) {
    *a2 = Int64;
  }
  if (a4)
  {
    *a4 = v18;
    unint64_t v18 = 0;
  }
  if (a5)
  {
    *a5 = v17;
    CFStringRef v17 = 0;
  }
  if (a6) {
    *a6 = v25;
  }
  if (a7)
  {
    *a7 = v26;
    int v26 = 0;
  }
  if (v34)
  {
    *uint64_t v34 = v27;
    int v27 = 0;
  }
  if (v11) {
    CFRelease(v11);
  }
  if (v18) {
    CFRelease(v18);
  }
  if (v17) {
    CFRelease(v17);
  }
  if (v26) {
    CFRelease(v26);
  }
  if (v27) {
    CFRelease(v27);
  }
}

uint64_t APSGetPersistentGroupModel()
{
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"persistentGroupModel", 0, 0);

  return APSSettingsGetIntWithOverrideAndDefault(@"simulatePersistentGroupModel", 0, IntWithOverrideAndDefault);
}

uint64_t APSValidatePersistentGroupInfo(uint64_t a1, uint64_t a2, unsigned int a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  if (!a1)
  {
    uint64_t v10 = 4294960591;
    goto LABEL_18;
  }
  if (a3 > 1)
  {
    uint64_t v10 = 4294960561;
    goto LABEL_18;
  }
  if (!a3 && !APSIsPermanentSpeakerGroupingEnabled(a6)) {
    return 4294960561;
  }
  if (a2 < 2)
  {
    uint64_t v10 = 4294960561;
    goto LABEL_18;
  }
  if (!a4)
  {
    uint64_t v10 = 4294960561;
    goto LABEL_18;
  }
  if (a3 == 1)
  {
    if ((unint64_t)a2 > 3)
    {
      uint64_t v10 = 4294960561;
    }
    else
    {
      if (a5) {
        return 0;
      }
      uint64_t v10 = 4294960561;
    }
LABEL_18:
    APSLogErrorAt(0);
    return v10;
  }
  return 0;
}

BOOL APSIsMemberOfStereoPair()
{
  CFTypeRef v4 = 0;
  CFTypeRef cf = 0;
  unsigned int v3 = 0;
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (!APSIsAPMSpeaker_sIsAPMSpeaker)
  {
    BOOL v0 = 0;
LABEL_8:
    CFTypeRef v1 = v4;
    goto LABEL_9;
  }
  APSCopyPersistentGroupInfo((const __CFString **)&v4, &v3, 0, 0, 0, 0, 0, 0);
  BOOL v0 = 0;
  CFTypeRef v1 = v4;
  if (!v4 && !v3)
  {
    APSCopyTightSyncInfo(&cf, 0, 0, 0, 0);
    BOOL v0 = cf != 0;
    if (cf)
    {
      CFRelease(cf);
      BOOL v0 = 1;
    }
    goto LABEL_8;
  }
LABEL_9:
  if (v1) {
    CFRelease(v1);
  }
  return v0;
}

void APSCopyTightSyncInfo(void *a1, BOOL *a2, void *a3, CFStringRef *a4, void *a5)
{
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  CFTypeID TypeID = CFStringGetTypeID();
  CFStringRef v11 = APSSettingsCopyValueEx(@"tightSyncGroupUUID", TypeID, 0);
  if (v11)
  {
    if (!a2) {
      goto LABEL_3;
    }
  }
  else
  {
    CFTypeID v12 = CFStringGetTypeID();
    CFStringRef v11 = APSSettingsCopyValueEx(@"tightSyncUUID", v12, 0);
    if (!a2)
    {
LABEL_3:
      if (!a3) {
        goto LABEL_4;
      }
      goto LABEL_14;
    }
  }
  if (v11) {
    BOOL v13 = APSSettingsGetInt64(@"tightSyncIsGroupLeader", 0) != 0;
  }
  else {
    BOOL v13 = 0;
  }
  *a2 = v13;
  if (!a3)
  {
LABEL_4:
    if (!a4) {
      goto LABEL_5;
    }
    goto LABEL_18;
  }
LABEL_14:
  if (v11)
  {
    CFTypeID v14 = CFStringGetTypeID();
    CFAllocatorRef v15 = APSSettingsCopyValueEx(@"tightSyncGroupLeaderUUID", v14, 0);
  }
  else
  {
    CFAllocatorRef v15 = 0;
  }
  *a3 = v15;
  if (!a4)
  {
LABEL_5:
    if (!a5) {
      goto LABEL_6;
    }
LABEL_22:
    if (v11)
    {
      CFTypeID v19 = CFStringGetTypeID();
      uint64_t v20 = APSSettingsCopyValueEx(@"groupName", v19, 0);
    }
    else
    {
      uint64_t v20 = 0;
    }
    *a5 = v20;
    if (a1) {
      goto LABEL_7;
    }
    goto LABEL_26;
  }
LABEL_18:
  if (v11)
  {
    CFAllocatorRef v16 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    uint64_t v17 = APSGetTightSyncGroupModel();
    CFStringRef v18 = CFStringCreateWithFormat(v16, 0, @"%d", v17);
  }
  else
  {
    CFStringRef v18 = 0;
  }
  *a4 = v18;
  if (a5) {
    goto LABEL_22;
  }
LABEL_6:
  if (a1)
  {
LABEL_7:
    *a1 = v11;
    return;
  }
LABEL_26:
  if (v11)
  {
    CFRelease(v11);
  }
}

uint64_t APSGetTightSyncGroupModel()
{
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  uint64_t IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"tightSyncGroupModel", 0, 0);

  return APSSettingsGetIntWithOverrideAndDefault(@"simulateTightSyncGroupModel", 0, IntWithOverrideAndDefault);
}

BOOL APSIsMemberOfPersistentGroup()
{
  CFTypeRef cf = 0;
  APSCopyClusterInfo(&cf, 0, 0, 0, 0);
  CFTypeRef v0 = cf;
  if (cf) {
    CFRelease(cf);
  }
  return v0 != 0;
}

void APSCopyClusterInfo(void *a1, uint64_t *a2, int *a3, void *a4, void *a5)
{
  CFTypeRef cf = 0;
  unsigned int v23 = 0;
  CFTypeRef v21 = 0;
  uint64_t v22 = 0;
  CFTypeRef v19 = 0;
  CFTypeRef v20 = 0;
  BOOL v18 = 0;
  CFTypeRef v17 = 0;
  if (a1) {
    *a1 = 0;
  }
  if (a2) {
    *a2 = 0;
  }
  if (a3) {
    *a3 = 0;
  }
  if (a4) {
    *a4 = 0;
  }
  if (a5) {
    *a5 = 0;
  }
  APSCopyPersistentGroupInfo((const __CFString **)&cf, &v23, &v22, &v21, (CFStringRef *)&v20, 0, 0, 0);
  if (cf)
  {
    CFTypeRef v10 = CFRetain(cf);
    if (v23) {
      int v11 = 0;
    }
    else {
      int v11 = 3;
    }
    if (v23 == 1) {
      int v12 = 2;
    }
    else {
      int v12 = v11;
    }
    uint64_t v13 = v22;
    CFTypeRef v14 = CFRetain(v21);
    CFTypeRef v15 = v20;
    if (v20) {
      CFRetain(v20);
    }
    if (a1)
    {
LABEL_21:
      *a1 = v10;
      CFTypeRef v10 = 0;
    }
  }
  else
  {
    APSCopyTightSyncInfo(&v19, &v18, 0, (CFStringRef *)&v17, 0);
    if (!v19)
    {
      CFTypeRef v10 = 0;
      CFTypeRef v14 = 0;
      goto LABEL_30;
    }
    CFTypeRef v10 = CFRetain(v19);
    if (v18) {
      CFAllocatorRef v16 = @"0";
    }
    else {
      CFAllocatorRef v16 = @"1";
    }
    CFTypeRef v14 = CFRetain(v16);
    CFTypeRef v15 = CFRetain(v17);
    int v12 = 1;
    uint64_t v13 = 2;
    if (a1) {
      goto LABEL_21;
    }
  }
  if (a2) {
    *a2 = v13;
  }
  if (a3) {
    *a3 = v12;
  }
  if (a4)
  {
    *a4 = v14;
    CFTypeRef v14 = 0;
  }
  if (a5)
  {
    *a5 = v15;
LABEL_30:
    CFTypeRef v15 = 0;
  }
  if (cf) {
    CFRelease(cf);
  }
  if (v21) {
    CFRelease(v21);
  }
  if (v20) {
    CFRelease(v20);
  }
  if (v19) {
    CFRelease(v19);
  }
  if (v17) {
    CFRelease(v17);
  }
  if (v10) {
    CFRelease(v10);
  }
  if (v14) {
    CFRelease(v14);
  }
  if (v15) {
    CFRelease(v15);
  }
}

uint64_t APSHasSamePersistentGroupUUID(uint64_t a1)
{
  uint64_t v1 = a1;
  CFTypeRef cf = 0;
  if (a1)
  {
    APSCopyClusterInfo(&cf, 0, 0, 0, 0);
    uint64_t v1 = FigCFEqual();
    if (cf) {
      CFRelease(cf);
    }
  }
  return v1;
}

uint64_t APSIsAPValeriaScreenSender()
{
  if (APSIsAPValeriaScreenSender_once != -1) {
    dispatch_once(&APSIsAPValeriaScreenSender_once, &__block_literal_global_110);
  }
  return APSIsAPValeriaScreenSender_result;
}

uint64_t __APSIsAPValeriaScreenSender_block_invoke()
{
  BOOL v0 = IsAppleTV() != 0;
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSIsAPValeriaScreenSender_uint64_t result = result != 0;
  if (v0 != (result != 0) && gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSHasUDPMirroringSenderSupport()
{
  if (APSHasUDPMirroringSenderSupport_sCheckOnce != -1) {
    dispatch_once(&APSHasUDPMirroringSenderSupport_sCheckOnce, &__block_literal_global_116);
  }
  return APSHasUDPMirroringSenderSupport_sIsSupported;
}

uint64_t __APSHasUDPMirroringSenderSupport_block_invoke()
{
  uint64_t v4 = *MEMORY[0x1E4F143B8];
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (!APSIsAPMSpeaker_sIsAPMSpeaker && !IsAppleTV())
  {
    GetDeviceModelString();
    uint64_t v2 = 0;
    while (strncmp(__s1, gLogCategory_APSSystemUtils_block_invoke_unsupportedModels[v2], 0x40uLL))
    {
      if (++v2 == 27)
      {
        int v0 = 1;
        goto LABEL_6;
      }
    }
  }
  int v0 = 0;
LABEL_6:
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSHasUDPMirroringSenderSupport_sIsSupported = result != 0;
  if (v0 != (result != 0) && gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSHasUDPMirroringOutOfProcessSupport()
{
  if (APSHasUDPMirroringOutOfProcessSupport_sCheckOnce != -1) {
    dispatch_once(&APSHasUDPMirroringOutOfProcessSupport_sCheckOnce, &__block_literal_global_149);
  }
  return APSHasUDPMirroringOutOfProcessSupport_sIsSupported;
}

uint64_t __APSHasUDPMirroringOutOfProcessSupport_block_invoke()
{
  int IsFeatureEnabledInDomain = APSSettingsIsFeatureEnabledInDomain();
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSHasUDPMirroringOutOfProcessSupport_sIsSupported = result != 0;
  if (IsFeatureEnabledInDomain != (result != 0) && gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSHasUHDMirroringSupport()
{
  if (APSHasUDPMirroringSenderSupport_sCheckOnce != -1) {
    dispatch_once(&APSHasUDPMirroringSenderSupport_sCheckOnce, &__block_literal_global_116);
  }
  return APSHasUDPMirroringSenderSupport_sIsSupported;
}

uint64_t APSHasUDPMirroringReceiverSupport()
{
  if (APSHasUDPMirroringReceiverSupport_sCheckOnce != -1) {
    dispatch_once(&APSHasUDPMirroringReceiverSupport_sCheckOnce, &__block_literal_global_161);
  }
  return APSHasUDPMirroringReceiverSupport_sIsSupported;
}

uint64_t __APSHasUDPMirroringReceiverSupport_block_invoke()
{
  uint64_t result = FigGetCFPreferenceNumberWithDefault();
  APSHasUDPMirroringReceiverSupport_sIsSupported = result != 0;
  if (result)
  {
    if (gLogCategory_APSSystemUtils <= 50)
    {
      if (gLogCategory_APSSystemUtils != -1) {
        return LogPrintF();
      }
      uint64_t result = _LogCategory_Initialize();
      if (result) {
        return LogPrintF();
      }
    }
  }
  return result;
}

uint64_t APSHas4K60444SenderSupport()
{
  if (APSHas4K60444SenderSupport_sCheckOnce != -1) {
    dispatch_once(&APSHas4K60444SenderSupport_sCheckOnce, &__block_literal_global_166);
  }
  return APSHas4K60444SenderSupport_sIsSupported;
}

uint64_t __APSHas4K60444SenderSupport_block_invoke()
{
  uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"senderSupports4k60444", 0, 0);
  APSHas4K60444SenderSupport_sIsSupported = result != 0;
  if (result)
  {
    if (gLogCategory_APSSystemUtils <= 50)
    {
      if (gLogCategory_APSSystemUtils != -1) {
        return LogPrintF();
      }
      uint64_t result = _LogCategory_Initialize();
      if (result) {
        return LogPrintF();
      }
    }
  }
  return result;
}

uint64_t APSHasHDRSenderSupport()
{
  if (APSHasHDRSenderSupport_once != -1) {
    dispatch_once(&APSHasHDRSenderSupport_once, &__block_literal_global_172);
  }
  return APSHasHDRSenderSupport_supported;
}

void __APSHasHDRSenderSupport_block_invoke()
{
  if (FVDUtilsHEVCEncoderSupports42010())
  {
    if (APSIsAPMSpeaker_sCheckOnce != -1) {
      dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
    }
    if (!APSIsAPMSpeaker_sIsAPMSpeaker && !IsAppleTV())
    {
      mach_port_t v0 = *MEMORY[0x1E4F2EEF0];
      CFDictionaryRef v1 = IOServiceMatching("AppleM2ScalerCSCDriver");
      io_service_t MatchingService = IOServiceGetMatchingService(v0, v1);
      if (MatchingService)
      {
        io_object_t v3 = MatchingService;
        CFTypeRef v4 = IORegistryEntrySearchCFProperty(MatchingService, "IOService", @"IOSurfaceAcceleratorCapabilitiesDict", 0, 0);
        if (v4)
        {
          unsigned int v5 = v4;
          APSHasHDRSenderSupport_supported = CFDictionaryGetInt64() != 0;
          if (gLogCategory_APSSystemUtils <= 50
            && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          CFRelease(v5);
        }
        IOObjectRelease(v3);
      }
    }
  }
}

BOOL APSIsPersistentGroupSDBCapable()
{
  return APSGetPersistentGroupModel() == 0;
}

uint64_t APSIsATVInHTGroup()
{
  uint64_t result = IsAppleTV();
  if (result) {
    return APSIsMemberOfHTGroup();
  }
  return result;
}

unint64_t APSGetDeviceID(int a1, unsigned __int8 *a2, int *a3)
{
  uint64_t v34 = *MEMORY[0x1E4F143B8];
  int v16 = 0;
  switch(a1)
  {
    case 0:
    case 4:
      CFStringRef theString = 0;
      long long v32 = 0u;
      long long v33 = 0u;
      long long v30 = 0u;
      long long v31 = 0u;
      long long v28 = 0u;
      long long v29 = 0u;
      long long v26 = 0u;
      long long v27 = 0u;
      long long v25 = 0u;
      long long v23 = 0u;
      long long v24 = 0u;
      long long v21 = 0u;
      long long v22 = 0u;
      long long v19 = 0u;
      long long v20 = 0u;
      *(_OWORD *)UInt8 buffer = 0u;
      unint64_t PrimaryMACAddress = atomic_load(&systemUtils_getDeviceIDFromSystemPairingID_sScalarDeviceID);
      if (PrimaryMACAddress)
      {
        int v15 = 0;
        *a2 = BYTE5(PrimaryMACAddress);
        a2[1] = BYTE4(PrimaryMACAddress);
        a2[2] = BYTE3(PrimaryMACAddress);
        a2[3] = BYTE2(PrimaryMACAddress);
        a2[4] = BYTE1(PrimaryMACAddress);
        a2[5] = PrimaryMACAddress;
        goto LABEL_8;
      }
      uint64_t v6 = APSCopyPairingIdentity(1, &theString);
      if (v6)
      {
        int v14 = v6;
        goto LABEL_25;
      }
      CFStringRef v7 = theString;
      uint64_t CString = CFStringGetCString(theString, buffer, 256, 0x8000100u);
      if (CString)
      {
        uint64_t v6 = HexToData();
        if (!v6)
        {
          APSLogErrorAt(0);
          unint64_t PrimaryMACAddress = 0;
          int v15 = -6717;
LABEL_8:
          CFStringRef v7 = theString;
          goto LABEL_9;
        }
        int v14 = v6;
LABEL_25:
        APSLogErrorAt(v6);
        int v15 = v14;
        unint64_t PrimaryMACAddress = 0;
        goto LABEL_8;
      }
      APSLogErrorAt(CString);
      unint64_t PrimaryMACAddress = 0;
      int v15 = -6762;
LABEL_9:
      int v16 = v15;
      if (v7) {
        CFRelease(v7);
      }
LABEL_17:
      if (a3) {
        *a3 = v16;
      }
      if (v16) {
        return 0;
      }
      else {
        return PrimaryMACAddress;
      }
    case 1:
      unint64_t PrimaryMACAddress = GetPrimaryMACAddress();
      goto LABEL_17;
    case 2:
      unint64_t PrimaryMACAddress = systemUtils_generateRandomDeviceID(a2);
      goto LABEL_17;
    case 3:
      if (!atomic_load((unint64_t *)&systemUtils_getProcessStableRandomDeviceID_sScalarDeviceID))
      {
        unint64_t RandomDeviceID = systemUtils_generateRandomDeviceID(a2);
        uint64_t v11 = 0;
        atomic_compare_exchange_strong(&systemUtils_getProcessStableRandomDeviceID_sScalarDeviceID, (unint64_t *)&v11, RandomDeviceID);
      }
      unint64_t v12 = atomic_load((unint64_t *)&systemUtils_getProcessStableRandomDeviceID_sScalarDeviceID);
      *a2 = BYTE5(v12);
      a2[1] = BYTE4(v12);
      a2[2] = BYTE3(v12);
      a2[3] = BYTE2(v12);
      a2[4] = BYTE1(v12);
      a2[5] = v12;
      unint64_t PrimaryMACAddress = atomic_load((unint64_t *)&systemUtils_getProcessStableRandomDeviceID_sScalarDeviceID);
      goto LABEL_17;
    default:
      unint64_t PrimaryMACAddress = 0;
      goto LABEL_17;
  }
}

unint64_t systemUtils_generateRandomDeviceID(unsigned __int8 *a1)
{
  arc4random_buf(a1, 6uLL);
  uint64_t v2 = *a1 & 0xFC | 2;
  *a1 = v2;
  return (v2 << 40) | ((unint64_t)a1[1] << 32) | ((unint64_t)a1[2] << 24) | ((unint64_t)a1[3] << 16) | ((unint64_t)a1[4] << 8) | a1[5];
}

uint64_t APSCopyPairingIdentity(int a1, CFStringRef *a2)
{
  uint64_t v4 = PairingSessionCreate();
  if (v4)
  {
    uint64_t v5 = v4;
LABEL_8:
    APSLogErrorAt(v4);
    return v5;
  }
  if (a1) {
    PairingSessionSetFlags();
  }
  PairingSessionSetKeychainInfo();
  uint64_t v4 = PairingSessionCopyIdentity();
  uint64_t v5 = v4;
  if (v4) {
    goto LABEL_8;
  }
  CFStringRef v6 = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0x8000100u);
  free(0);
  *a2 = v6;
  return v5;
}

uint64_t APSScreenGetMediaPresentationParams(double a1, double a2, uint64_t a3, int a4, int a5, int a6, double *a7, int *a8)
{
  uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"limit4KFPSBasedOnConnectionLatencyHint", 0, 1);
  char v16 = result;
  if (!a5)
  {
    BOOL v17 = a2 * a1 > 8294400.0;
    if (a2 * a1 > 8294400.0) {
      a1 = 3840.0;
    }
    double v18 = 2160.0;
    goto LABEL_9;
  }
  uint64_t result = FigCFEqual();
  if (result)
  {
    BOOL v17 = a2 * a1 > 2073600.0;
    if (a2 * a1 > 2073600.0) {
      a1 = 1920.0;
    }
    double v18 = 1080.0;
LABEL_9:
    if (v17) {
      a2 = v18;
    }
    BOOL v19 = a4 < 60;
    int v20 = 60;
LABEL_12:
    if (v19) {
      int v21 = a4;
    }
    else {
      int v21 = v20;
    }
    goto LABEL_15;
  }
  uint64_t result = FigCFEqual();
  if (a2 * a1 > 8294400.0)
  {
    a1 = 3840.0;
    a2 = 2160.0;
  }
  if (a4 >= 60) {
    int v21 = 60;
  }
  else {
    int v21 = a4;
  }
  if (result)
  {
    if (a1 * a2 <= 2073600.0) {
      goto LABEL_15;
    }
    BOOL v19 = a4 < 30;
    int v20 = 30;
    goto LABEL_12;
  }
  if (a1 * a2 > 2073600.0)
  {
    if (senderSupports4K60HDR_once != -1) {
      dispatch_once(&senderSupports4K60HDR_once, &__block_literal_global_353);
    }
    uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"senderSupports4k60HDR", 0, senderSupports4K60HDR_supported);
    int v22 = result != 0;
    senderSupports4K60HDR_supported = result != 0;
    if (gLogCategory_APSSystemUtils <= 50)
    {
      if (gLogCategory_APSSystemUtils != -1
        || (uint64_t result = _LogCategory_Initialize(), v22 = senderSupports4K60HDR_supported, result))
      {
        uint64_t result = LogPrintF();
        int v22 = senderSupports4K60HDR_supported;
      }
    }
    if (v22) {
      int v23 = 60;
    }
    else {
      int v23 = 30;
    }
    if (v23 >= a4) {
      int v21 = a4;
    }
    else {
      int v21 = v23;
    }
  }
LABEL_15:
  if (a6 == 1 && v16 && a2 * a1 > 2073600.0)
  {
    if (v21 >= 30) {
      int v21 = 30;
    }
    if (gLogCategory_APSSystemUtils <= 50)
    {
      if (gLogCategory_APSSystemUtils != -1 || (uint64_t result = _LogCategory_Initialize(), result)) {
        uint64_t result = LogPrintF();
      }
    }
  }
  if (a7)
  {
    *a7 = a1;
    a7[1] = a2;
  }
  if (a8) {
    *a8 = v21;
  }
  return result;
}

void __senderSupports4K60HDR_block_invoke()
{
  uint64_t v2 = *MEMORY[0x1E4F143B8];
  if (APSHasHDRSenderSupport_once != -1) {
    dispatch_once(&APSHasHDRSenderSupport_once, &__block_literal_global_172);
  }
  senderSupports4K60HDR_supported = APSHasHDRSenderSupport_supported;
  if (APSHasHDRSenderSupport_supported)
  {
    memset(v1, 0, sizeof(v1));
    GetDeviceModelString();
    uint64_t v0 = 0;
    while (strncmp((const char *)v1, gUserVersionOverride_block_invoke_2_unsupportedModels[v0], 0x40uLL))
    {
      if (++v0 == 36) {
        return;
      }
    }
    senderSupports4K60HDR_supported = 0;
  }
}

BOOL APSIsLinkLocalInterface(const char *a1)
{
  BOOL v8 = 0;
  if (!a1)
  {
    APSLogErrorAt(0);
    goto LABEL_20;
  }
  if (!getifaddrs(&v8))
  {
LABEL_5:
    io_object_t v3 = v8;
    if (v8)
    {
      uint64_t v4 = v8;
      while (1)
      {
        if (!strcmp(a1, v4->ifa_name))
        {
          ifa_addr = v4->ifa_addr;
          if (ifa_addr->sa_family == 2
            && ifa_addr->sa_data[2] == 169
            && ifa_addr->sa_data[3] == 254)
          {
            break;
          }
        }
        uint64_t v4 = v4->ifa_next;
        if (!v4) {
          goto LABEL_15;
        }
      }
      LODWORD(v4) = 1;
      if (!v3) {
        goto LABEL_21;
      }
LABEL_16:
      MEMORY[0x1D25EF110](v3);
      goto LABEL_21;
    }
LABEL_20:
    LODWORD(v4) = 0;
    goto LABEL_21;
  }
  if (*__error())
  {
    uint64_t v2 = *__error();
    if (!v2) {
      goto LABEL_5;
    }
  }
  else
  {
    uint64_t v2 = 4294960596;
  }
  APSLogErrorAt(v2);
  LODWORD(v4) = 0;
  io_object_t v3 = v8;
LABEL_15:
  if (v3) {
    goto LABEL_16;
  }
LABEL_21:
  int CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  if (v4 != (CFPreferenceNumberWithDefault != 0)
    && gLogCategory_APSSystemUtils <= 50
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return CFPreferenceNumberWithDefault != 0;
}

uint64_t APSHasNANSupport()
{
  if (APSHasNANSupport_sHasNANSupportOnce != -1) {
    dispatch_once(&APSHasNANSupport_sHasNANSupportOnce, &__block_literal_global_199);
  }
  return APSHasNANSupport_sHasNANSupport;
}

uint64_t __APSHasNANSupport_block_invoke()
{
  uint64_t result = GestaltGetBoolean();
  APSHasNANSupport_sHasNANSupport = result;
  return result;
}

uint64_t APSCanSendToAltReceiver()
{
  if (APSCanSendToAltReceiver_sCanSendToAltReceiverOnce != -1) {
    dispatch_once(&APSCanSendToAltReceiver_sCanSendToAltReceiverOnce, &__block_literal_global_204);
  }
  return APSCanSendToAltReceiver_sCanSendToAltReceiver;
}

uint64_t __APSCanSendToAltReceiver_block_invoke()
{
  uint64_t result = IsAppleInternalBuild();
  if (result)
  {
    uint64_t v1 = 0;
    uint64_t result = APSSettingsGetInt64IfPresent(@"canSendToAltReceiver", &v1);
    if (result) {
      APSCanSendToAltReceiver_sCanSendToAltReceiver = v1 != 0;
    }
  }
  if (gLogCategory_APSSystemUtils <= 50)
  {
    if (gLogCategory_APSSystemUtils != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSCopyBootUUID(CFStringRef *a1)
{
  uint64_t v9 = *MEMORY[0x1E4F143B8];
  size_t v6 = 37;
  if (!a1)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  *(_OWORD *)cStr = 0u;
  memset(v8, 0, sizeof(v8));
  if (!sysctlbyname("kern.bootsessionuuid", cStr, &v6, 0, 0)) {
    goto LABEL_5;
  }
  if (!*__error())
  {
    uint64_t v2 = 4294960596;
    goto LABEL_10;
  }
  uint64_t v2 = *__error();
  if (v2)
  {
LABEL_10:
    APSLogErrorAt(v2);
    return v2;
  }
LABEL_5:
  CFStringRef v3 = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], cStr, 0x8000100u);
  if (v3)
  {
    CFStringRef v4 = v3;
    if (gLogCategory_APSSystemUtils <= 50
      && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v2 = 0;
    *a1 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  return v2;
}

CFTypeRef APSCopyDeviceName()
{
  if (systemUtils_copyCachedDeviceName_sOnce != -1) {
    dispatch_once(&systemUtils_copyCachedDeviceName_sOnce, &__block_literal_global_395);
  }
  pthread_mutex_lock((pthread_mutex_t *)systemUtils_copyCachedDeviceName_sCachedDeviceNameMutex);
  if (systemUtils_copyCachedDeviceName_sCachedDeviceName) {
    CFTypeRef v0 = CFRetain((CFTypeRef)systemUtils_copyCachedDeviceName_sCachedDeviceName);
  }
  else {
    CFTypeRef v0 = 0;
  }
  pthread_mutex_unlock((pthread_mutex_t *)systemUtils_copyCachedDeviceName_sCachedDeviceNameMutex);
  return v0;
}

void __systemUtils_copyCachedDeviceName_block_invoke()
{
  values = @"UserAssignedDeviceName";
  CFArrayRef v0 = CFArrayCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const void **)&values, 1, MEMORY[0x1E4F1D510]);
  systemUtils_copyCachedDeviceName_sCachedDeviceNameMutex = FigSimpleMutexCreate();
  MGRegisterForUpdates();
  systemUtils_updateCachedDeviceName((pthread_mutex_t *)systemUtils_copyCachedDeviceName_sCachedDeviceNameMutex);
  if (v0) {
    CFRelease(v0);
  }
}

void systemUtils_updateCachedDeviceName(pthread_mutex_t *a1)
{
  if (a1)
  {
    pthread_mutex_lock(a1);
    uint64_t v2 = (const void *)MGCopyAnswer();
    if (gLogCategory_APSSystemUtils <= 30
      && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFStringRef v3 = (const void *)systemUtils_copyCachedDeviceName_sCachedDeviceName;
    systemUtils_copyCachedDeviceName_sCachedDeviceName = (uint64_t)v2;
    if (v2) {
      CFRetain(v2);
    }
    if (v3) {
      CFRelease(v3);
    }
    pthread_mutex_unlock(a1);
    if (v2)
    {
      CFRelease(v2);
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
}

void __systemUtils_copyCachedDeviceName_block_invoke_2()
{
}

UInt8 *APSGetDeviceNameCString(UInt8 *a1, uint64_t a2)
{
  uint64_t v2 = a1;
  CFIndex usedBufLen = 0;
  if (a1)
  {
    CFStringRef v4 = (const __CFString *)APSCopyDeviceName();
    if (v4)
    {
      CFStringRef v5 = v4;
      uint64_t Length = CFStringGetLength(v4);
      if (Length >= 1
        && (v9.unsigned int length = Length, v9.location = 0, CFStringGetBytes(v5, v9, 0x8000100u, 0, 0, v2, a2 - 1, &usedBufLen)))
      {
        v2[usedBufLen] = 0;
      }
      else
      {
        uint64_t v2 = 0;
      }
      CFRelease(v5);
    }
    else
    {
      APSLogErrorAt(0);
      return 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v2;
}

uint64_t APSPersistentGroupTypeToClusterType(int a1)
{
  if (a1) {
    unsigned int v1 = 0;
  }
  else {
    unsigned int v1 = 3;
  }
  if (a1 == 1) {
    return 2;
  }
  else {
    return v1;
  }
}

uint64_t APSCopyDefaultGroupUUID(void *a1)
{
  CFTypeRef cf = 0;
  APSCopyClusterInfo(&cf, 0, 0, 0, 0);
  CFTypeRef v2 = cf;
  if (cf) {
    goto LABEL_4;
  }
  uint64_t v3 = APSCopyBootUUID((CFStringRef *)&cf);
  if (!v3)
  {
    CFTypeRef v2 = cf;
LABEL_4:
    uint64_t v4 = 0;
    *a1 = v2;
    return v4;
  }
  uint64_t v4 = v3;
  APSLogErrorAt(v3);
  if (cf) {
    CFRelease(cf);
  }
  return v4;
}

uint64_t APSGetDeviceClassFromDeviceModel()
{
  return MEMORY[0x1F41163B0]();
}

char *APSGetDeviceClassString(char *a1, size_t a2)
{
  int DeviceClass = GestaltGetDeviceClass();
  CFStringRef v5 = "iPhone";
  switch(DeviceClass)
  {
    case 1:
      break;
    case 2:
      CFStringRef v5 = "iPod";
      break;
    case 3:
      CFStringRef v5 = "iPad";
      break;
    case 4:
      CFStringRef v5 = "AppleTV";
      break;
    case 5:
      CFStringRef v5 = "FPGA";
      break;
    case 6:
      CFStringRef v5 = "Watch";
      break;
    case 7:
      CFStringRef v5 = "HomePod";
      break;
    default:
      if (DeviceClass == 100) {
        CFStringRef v5 = "Mac";
      }
      else {
        CFStringRef v5 = "Unknown";
      }
      break;
  }
  strlcpy(a1, v5, a2);
  return a1;
}

uint64_t APSSaveAirPlayNonSystemPeer()
{
  if (gLogCategory_APSSystemUtils <= 50
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v0 = PairingSessionCreate();
  if (v0)
  {
    uint64_t v1 = v0;
    goto LABEL_9;
  }
  PairingSessionSetKeychainInfo();
  uint64_t v0 = PairingSessionSavePeer();
  uint64_t v1 = v0;
  if (v0) {
LABEL_9:
  }
    APSLogErrorAt(v0);
  return v1;
}

CFIndex APSGetAirPlayNonSystemPeersCount()
{
  CFArrayRef v0 = (const __CFArray *)KeychainCopyMatchingFormatted();
  if (!v0) {
    return 0;
  }
  CFArrayRef v1 = v0;
  CFIndex Count = CFArrayGetCount(v0);
  CFRelease(v1);
  return Count;
}

CFArrayRef APSCopyAirPlayNonSystemPeers()
{
  uint64_t v0 = PairingSessionCreate();
  if (v0)
  {
    APSLogErrorAt(v0);
    CFArrayRef v1 = 0;
  }
  else
  {
    PairingSessionSetKeychainInfo();
    CFArrayRef v1 = (const __CFArray *)PairingSessionCopyPeers();
  }
  if (gLogCategory_APSSystemUtils <= 50
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    if (v1) {
      CFArrayGetCount(v1);
    }
    LogPrintF();
  }
  return v1;
}

uint64_t APSClearLegacyAirPlayPairingInfo()
{
  CFTypeRef v2 = 0;
  if (gLogCategory_APSSystemUtils <= 50
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!gQblcfSzZBQsYCCV((uint64_t *)&v2, 0))
  {
    uint64_t v0 = v2;
    PHDcW8((uint64_t)v2, 0);
    KeychainDeleteFormatted();
    CFRelease(v0);
  }

  return APSRemoveAirPlayNonSystemPeers(0);
}

uint64_t APSRemoveAirPlayNonSystemPeers(uint64_t a1)
{
  if (a1)
  {
    uint64_t v1 = PairingSessionCreate();
    if (v1)
    {
      uint64_t v2 = v1;
      APSLogErrorAt(v1);
    }
    else
    {
      PairingSessionSetKeychainInfo();
      return PairingSessionDeletePeer();
    }
  }
  else
  {
    KeychainDeleteFormatted();
    return 0;
  }
  return v2;
}

void APSEnsureCanInitiatePlayback()
{
  if (APSEnsureCanInitiatePlayback_once != -1) {
    dispatch_once(&APSEnsureCanInitiatePlayback_once, &__block_literal_global_253);
  }
  if (APSEnsureCanInitiatePlayback_bundleID)
  {
    uint64_t v2 = 0;
    uint64_t v0 = (void *)[MEMORY[0x1E4F74F68] sharedAVSystemController];
    [v0 setAttribute:APSEnsureCanInitiatePlayback_bundleID forKey:*MEMORY[0x1E4F74AA8] error:&v2];
    if (v2)
    {
      if (gLogCategory_APSSystemUtils <= 90
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
LABEL_10:
        LogPrintF();
      }
    }
    else
    {
      uint64_t v1 = (void *)[MEMORY[0x1E4F74F68] sharedAVSystemController];
      objc_msgSend((id)objc_msgSend(v1, "attributeForKey:", *MEMORY[0x1E4F74B20]), "BOOLValue");
      if (gLogCategory_APSSystemUtils <= 50
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_10;
      }
    }
  }
}

CFStringRef APSCopyPSGDeviceModelString()
{
  GetDeviceModelString();
  if (v9 == 0x6363416F69647541 && v10 == 0x2C3179726F737365 && v11 == 49)
  {
    uint64_t v7 = 0;
  }
  else if (v9 == 0x6363416F69647541 && v10 == 0x2C3579726F737365 && v11 == 49)
  {
    uint64_t v7 = 1;
  }
  else
  {
    BOOL v6 = v9 == 0x6363416F69647541 && v10 == 0x2C3679726F737365 && v11 == 49;
    uint64_t v7 = (2 * v6);
  }
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"%d", v7);
}

CFStringRef APSCopyPersistentGroupModelString()
{
  CFAllocatorRef v0 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  uint64_t v1 = APSGetPersistentGroupModel();
  return CFStringCreateWithFormat(v0, 0, @"%d", v1);
}

uint64_t APSGetClusterModelForTightSyncGroupModel(int a1)
{
  if (a1 == 2) {
    return 2;
  }
  else {
    return a1 == 1;
  }
}

uint64_t APSGetClusterModelForPersistentGroupModel(int a1)
{
  if (a1 == 2) {
    return 2;
  }
  else {
    return a1 == 1;
  }
}

__CFString *APSGetClusterModelNameForClusterTypeAndModel(int a1, int a2)
{
  uint64_t v2 = @"AppleTVHTCluster";
  if (a2 == 1) {
    uint64_t v2 = @"AudioAccessory5,1-AppleTVHTCluster";
  }
  if (a2 == 2) {
    uint64_t v2 = @"AudioAccessory6,1-AppleTVHTCluster";
  }
  uint64_t v3 = @"AudioAccessory1,1-TightSyncCluster";
  if (a2 == 1) {
    uint64_t v3 = @"AudioAccessory5,1-TightSyncCluster";
  }
  if (a2 == 2) {
    uint64_t v3 = @"AudioAccessory6,1-TightSyncCluster";
  }
  if (a1 != 1) {
    uint64_t v3 = 0;
  }
  if (a1 != 2) {
    uint64_t v2 = v3;
  }
  if (a1 == 3) {
    return @"GenericPersistentGroup";
  }
  else {
    return v2;
  }
}

__CFString *APSClusterTypeToDescriptionString(int a1)
{
  uint64_t v1 = @"PSG";
  if (a1 == 2) {
    uint64_t v1 = @"HT";
  }
  if (a1 == 1) {
    return @"Stereo Pair";
  }
  else {
    return v1;
  }
}

uint64_t APSClusterTypeToFigEndpointDescriptorClusterType(int a1)
{
  uint64_t v1 = MEMORY[0x1E4F75480];
  uint64_t v2 = MEMORY[0x1E4F75478];
  if (a1 != 2) {
    uint64_t v2 = MEMORY[0x1E4F75488];
  }
  if (a1 != 1) {
    uint64_t v1 = v2;
  }
  return *(void *)v1;
}

uint64_t APSIsDirectLinkInterface(uint64_t a1)
{
  if (!a1 || (uint64_t v1 = _SCNetworkInterfaceCreateWithBSDName()) == 0)
  {
    APSLogErrorAt(0);
    return 0;
  }
  uint64_t v2 = (const __SCNetworkInterface *)v1;
  uint64_t IsThunderbolt = _SCNetworkInterfaceIsThunderbolt();
  if (IsThunderbolt)
  {
    uint64_t v4 = IsThunderbolt;
    if (gLogCategory_APSSystemUtils > 50
      || gLogCategory_APSSystemUtils == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_18;
    }
  }
  else
  {
    CFStringRef InterfaceType = SCNetworkInterfaceGetInterfaceType(v2);
    if (CFStringCompare(InterfaceType, (CFStringRef)*MEMORY[0x1E4F41B58], 0)
      || (_SCNetworkInterfaceGetFamilySubType(), CFGetInt64() != 1)
      || (_SCNetworkInterfaceGetIOPath(), !FigCFStringFind()))
    {
      uint64_t v4 = 0;
      goto LABEL_18;
    }
    if (gLogCategory_APSSystemUtils > 50)
    {
      uint64_t v4 = 1;
      goto LABEL_18;
    }
    if (gLogCategory_APSSystemUtils == -1)
    {
      uint64_t v4 = 1;
      if (!_LogCategory_Initialize()) {
        goto LABEL_18;
      }
    }
    else
    {
      uint64_t v4 = 1;
    }
  }
  LogPrintF();
LABEL_18:
  CFRelease(v2);
  return v4;
}

uint64_t APSIsEthernetInterface(uint64_t a1)
{
  if (a1 && (uint64_t v1 = _SCNetworkInterfaceCreateWithBSDName()) != 0)
  {
    uint64_t v2 = (const void *)v1;
    uint64_t IsPhysicalEthernet = _SCNetworkInterfaceIsPhysicalEthernet();
    CFRelease(v2);
    return IsPhysicalEthernet;
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSShouldStartAdvertistingForAirPlaySourceBeacon(void *a1, int a2, int a3)
{
  char v6 = [a1 airplaySourceFlags];
  char v7 = v6;
  uint64_t v8 = 1;
  if (a2 && (v6 & 4) == 0)
  {
    if (gLogCategory_APSSystemUtils <= 30
      && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
    {
      uint64_t v10 = [a1 identifier];
      LogPrintF();
    }
    uint64_t v8 = 0;
  }
  if (a3 && (v7 & 0x10) != 0)
  {
    if (([a1 deviceFlags] & 0x80) != 0)
    {
      if (gLogCategory_APSSystemUtils <= 30
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        objc_msgSend(a1, "accountID", v10);
        LogPrintF();
      }
    }
    else
    {
      if (gLogCategory_APSSystemUtils <= 30
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        objc_msgSend(a1, "identifier", v10);
        LogPrintF();
      }
      return 0;
    }
  }
  return v8;
}

uint64_t APSGetAccessControlConfig(unsigned int *a1, _DWORD *a2)
{
  unsigned int v10 = 0;
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  int v4 = 0;
  unsigned int Int64 = APSSettingsGetInt64(@"accessControlType", (int *)&v10);
  unsigned int v6 = v10;
  unsigned int v10 = 0;
  BOOL v7 = Int64 != 1 && v6 == 0;
  if (v7
    || (int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"accessControlLevel", 0, 0),
        int v4 = IntWithOverrideAndDefault,
        !v6))
  {
    if (!Int64 || Int64 == 2) {
      goto LABEL_12;
    }
    if (Int64 != 1) {
      goto LABEL_16;
    }
  }
  else if ((IntWithOverrideAndDefault - 1) >= 2)
  {
    unsigned int Int64 = 2;
LABEL_12:
    if (a1) {
      *a1 = Int64;
    }
    if (a2) {
      *a2 = v4;
    }
    return v10;
  }
  unsigned int Int64 = 1;
  if ((v4 - 3) > 0xFFFFFFFD) {
    goto LABEL_12;
  }
LABEL_16:
  if (gLogCategory_APSSystemUtils <= 90
    && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return -6705;
}

BOOL APSGetP2PAllow()
{
  int v4 = 0;
  int v3 = 0;
  unsigned int Int64 = APSSettingsGetInt64(@"p2pAllow", &v3);
  BOOL result = 0;
  if (v3) {
    BOOL v2 = 0;
  }
  else {
    BOOL v2 = Int64 == 0;
  }
  if (!v2)
  {
    APSCopyClusterInfo(0, 0, &v4, 0, 0);
    return (v4 & 0xFFFFFFFD) != 1;
  }
  return result;
}

void __APSIsDemoModeEnabled_block_invoke()
{
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (!APSIsAPMSpeaker_sIsAPMSpeaker && !IsAppleTV())
  {
    unsigned int Int64 = APSSettingsGetInt64(@"TetheredDemoMode", 0);
    APSIsDemoModeEnabled_enabled = Int64 != 0;
    if (Int64)
    {
      if (gLogCategory_APSSystemUtils <= 50
        && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
  }
}

uint64_t APSSystemSupportsWiFiUDM()
{
  return 1;
}

double APSGetMaxSizePreservingAspectRatio(double result, double a2, double a3, double a4)
{
  if (result > a3 || a2 > a4)
  {
    double v5 = a3 / result;
    double v6 = a4 / a2;
    if (v5 >= v6) {
      double v5 = v6;
    }
    return (double)(int)(result * v5 + 0.5);
  }
  return result;
}

uint64_t __APSIsVirtualMachine_block_invoke()
{
  int v3 = 0;
  size_t v2 = 4;
  uint64_t result = sysctlbyname("kern.hv_vmm_present", &v3, &v2, 0, 0);
  if (result) {
    BOOL v1 = 1;
  }
  else {
    BOOL v1 = v3 == 0;
  }
  if (!v1)
  {
    APSIsVirtualMachine_sIsVirtualMachine = 1;
    uint64_t result = (uint64_t)APSSettingsGetInt64(@"useWiFiAndAWDLOnVirtualMachine", 0);
    if (result) {
      APSIsVirtualMachine_sIsVirtualMachine = 0;
    }
    if (gLogCategory_APSSystemUtils <= 50)
    {
      if (gLogCategory_APSSystemUtils != -1) {
        return LogPrintF();
      }
      uint64_t result = _LogCategory_Initialize();
      if (result) {
        return LogPrintF();
      }
    }
  }
  return result;
}

uint64_t APSIsValidDeviceEnclosureColorString(CFStringRef str)
{
  uint64_t v1 = (uint64_t)str;
  if (!str) {
    return v1;
  }
  Intint Value = CFStringGetIntValue(str);
  if ((IntValue & 0x80000000) != 0)
  {
    if (gLogCategory_APSSystemUtils > 60
      || gLogCategory_APSSystemUtils == -1 && !_LogCategory_Initialize())
    {
      return 0;
    }
LABEL_14:
    LogPrintF();
    return 0;
  }
  if (IntValue >= 0x3E8)
  {
    if (gLogCategory_APSSystemUtils > 60
      || gLogCategory_APSSystemUtils == -1 && !_LogCategory_Initialize())
    {
      return 0;
    }
    goto LABEL_14;
  }
  CFStringRef v3 = CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"%d", IntValue);
  if (!v3)
  {
    APSLogErrorAt(0);
    return 0;
  }
  CFStringRef v4 = v3;
  if (CFEqual((CFTypeRef)v1, v3))
  {
    uint64_t v1 = 1;
  }
  else
  {
    if (gLogCategory_APSSystemUtils <= 60
      && (gLogCategory_APSSystemUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v1 = 0;
  }
  CFRelease(v4);
  return v1;
}

uint64_t APSIsInAirPlaySenderSystemServer()
{
  if (APSIsInAirPlaySenderSystemServer_sOnceToken != -1) {
    dispatch_once(&APSIsInAirPlaySenderSystemServer_sOnceToken, &__block_literal_global_338);
  }
  return APSIsInAirPlaySenderSystemServer_sIsInAirPlaySenderSystemServer;
}

uint64_t __APSIsInAirPlaySenderSystemServer_block_invoke()
{
  if (FigIsAirplaydEnabled()) {
    uint64_t result = FigServer_IsAirplayd();
  }
  else {
    uint64_t result = in_audio_mx_server_process();
  }
  APSIsInAirPlaySenderSystemServer_sIsInAirPlaySenderSystemServer = result;
  return result;
}

uint64_t APSIsInAudioSystemServer()
{
  if (APSIsInAudioSystemServer_sOnceToken != -1) {
    dispatch_once(&APSIsInAudioSystemServer_sOnceToken, &__block_literal_global_340);
  }
  return APSIsInAudioSystemServer_sIsInAudioSystemServer;
}

uint64_t __APSIsInAudioSystemServer_block_invoke()
{
  uint64_t result = in_audio_mx_server_process();
  APSIsInAudioSystemServer_sIsInAudioSystemServer = result;
  return result;
}

double APSGetCPULoadAverage(void *a1)
{
  v4[1] = *(double *)MEMORY[0x1E4F143B8];
  v4[0] = 0.0;
  if (APSGetCPULoadAverage_sOnceToken != -1) {
    dispatch_once(&APSGetCPULoadAverage_sOnceToken, &__block_literal_global_342);
  }
  int v2 = getloadavg(v4, 1);
  double result = v4[0];
  if (a1) {
    *a1 = APSGetCPULoadAverage_sProcessorCount;
  }
  if (v2 != 1) {
    return 0.0;
  }
  return result;
}

uint64_t __APSGetCPULoadAverage_block_invoke()
{
  uint64_t result = sysconf(58);
  APSGetCPULoadAverage_sProcessorCFIndex Count = result;
  return result;
}

uint64_t APSGetAllowPersistentGroupsOnInfra()
{
  if (APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfraOnce != -1) {
    dispatch_once(&APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfraOnce, &__block_literal_global_344);
  }
  return APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfra;
}

uint64_t __APSGetAllowPersistentGroupsOnInfra_block_invoke()
{
  if (APSIsVirtualMachine_sCheckOnceForVM != -1) {
    dispatch_once(&APSIsVirtualMachine_sCheckOnceForVM, &__block_literal_global_326);
  }
  APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfra = APSIsVirtualMachine_sIsVirtualMachine;
  uint64_t result = IsAppleInternalBuild();
  if (result)
  {
    uint64_t result = APSSettingsGetIntWithOverrideAndDefault(@"allowPersistentGroupsOnInfra", 0, APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfra);
    APSGetAllowPersistentGroupsOnInfra_sAllowPersistentGroupsOnInfra = result;
  }
  return result;
}

uint64_t APSDispatchSectionGetTypeID()
{
  if (gAPSDispatchSectionInitOnce != -1) {
    dispatch_once_f(&gAPSDispatchSectionInitOnce, 0, (dispatch_function_t)_APSDispatchSectionGetTypeID);
  }
  return gAPSDispatchSectionTypeID;
}

uint64_t _APSDispatchSectionGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSDispatchSectionCFTypeID TypeID = result;
  return result;
}

uint64_t _APSDispatchSectionFinalize()
{
  return FigSimpleMutexDestroy();
}

uint64_t APSDispatchSectionCreate(void *a1)
{
  if (gAPSDispatchSectionInitOnce != -1) {
    dispatch_once_f(&gAPSDispatchSectionInitOnce, 0, (dispatch_function_t)_APSDispatchSectionGetTypeID);
  }
  uint64_t Instance = (void *)_CFRuntimeCreateInstance();
  if (Instance)
  {
    CFStringRef v3 = Instance;
    Instance[4] = 0;
    CFStringRef v4 = Instance + 4;
    Instance[2] = 0;
    Instance[3] = 0;
    Instance[5] = Instance + 4;
    uint64_t v5 = FigSimpleMutexCreate();
    *(v4 - 2) = v5;
    if (v5)
    {
      uint64_t result = 0;
      *a1 = v3;
      return result;
    }
    CFRelease(v3);
  }
  return 4294960568;
}

uint64_t APSDispatchSectionEnter(uint64_t a1, NSObject *a2, void (__cdecl *a3)(void *), void *a4)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t v8 = 4294960591;
  if (a2 && a3)
  {
    if (*(unsigned char *)(a1 + 24))
    {
      uint64_t v9 = malloc_type_malloc(0x30uLL, 0x10A0040C5FEEBA1uLL);
      if (v9)
      {
        unsigned int v10 = v9;
        v9[1] = a2;
        _OWORD v9[2] = 0;
        *((_DWORD *)v9 + 6) = 0;
        long long v9[4] = a3;
        v9[5] = a4;
        dispatch_retain(a2);
        uint64_t v8 = 0;
        void *v10 = 0;
        **(void **)(a1 + 40) = v10;
        *(void *)(a1 + 40) = v10;
      }
      else
      {
        uint64_t v8 = 4294960568;
      }
    }
    else
    {
      CFRetain((CFTypeRef)a1);
      *(unsigned char *)(a1 + 24) = 1;
      dispatch_async_f(a2, a4, a3);
      uint64_t v8 = 0;
    }
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v8;
}

uint64_t APSDispatchSectionEnterWithPriorityDispatcher(uint64_t a1, const void *a2, int a3, NSObject *a4, NSObject *a5)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t v10 = 4294960591;
  if (a2 && a4)
  {
    if (*(unsigned char *)(a1 + 24))
    {
      __int16 v11 = malloc_type_malloc(0x30uLL, 0x10A0040C5FEEBA1uLL);
      if (v11)
      {
        unint64_t v12 = v11;
        CFTypeRef v13 = CFRetain(a2);
        uint64_t v10 = 0;
        v12[1] = 0;
        _OWORD v12[2] = v13;
        *((_DWORD *)v12 + 6) = a3;
        void v12[4] = a4;
        void v12[5] = a5;
        *unint64_t v12 = 0;
        **(void **)(a1 + 40) = v12;
        *(void *)(a1 + 40) = v12;
      }
      else
      {
        uint64_t v10 = 4294960568;
      }
    }
    else
    {
      uint64_t v10 = priorityDispatcher_setPriority((uint64_t)a2, a3, 0);
      if (!v10)
      {
        uint64_t v10 = priorityDispatcher_dispatchFunction((uint64_t)a2, a4, a5, 1);
        if (!v10)
        {
          CFRetain((CFTypeRef)a1);
          *(unsigned char *)(a1 + 24) = 1;
        }
      }
    }
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v10;
}

uint64_t APSDispatchSectionEnterWithBlock(uint64_t a1, NSObject *a2, void *aBlock)
{
  uint64_t v3 = 4294960591;
  if (a2 && aBlock)
  {
    double v6 = _Block_copy(aBlock);
    if (v6)
    {
      BOOL v7 = v6;
      uint64_t v3 = APSDispatchSectionEnter(a1, a2, (void (__cdecl *)(void *))_APSDispatchSectionDidEnterWithBlock, v6);
      if (v3) {
        _Block_release(v7);
      }
    }
    else
    {
      return 4294960568;
    }
  }
  return v3;
}

void _APSDispatchSectionDidEnterWithBlock(void (**a1)(void))
{
  a1[2]();

  _Block_release(a1);
}

uint64_t APSDispatchSectionLeave(uint64_t a1)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  if (!*(unsigned char *)(a1 + 24))
  {
    uint64_t v6 = 4294960587;
    goto LABEL_12;
  }
  int v2 = (void *)(a1 + 32);
  uint64_t v3 = *(uint64_t **)(a1 + 32);
  if (v3)
  {
    uint64_t v4 = *v3;
    *int v2 = *v3;
    if (!v4) {
      *(void *)(a1 + 40) = v2;
    }
    uint64_t v5 = v3[1];
    if (v5)
    {
      dispatch_async_f(v5, (void *)v3[5], (dispatch_function_t)v3[4]);
      dispatch_release((dispatch_object_t)v3[1]);
    }
    else
    {
      uint64_t v7 = v3[2];
      if (v7)
      {
        priorityDispatcher_setPriority(v7, *((_DWORD *)v3 + 6), 0);
        uint64_t v6 = priorityDispatcher_dispatchFunction(v3[2], v3[4], v3[5], 1);
        CFRelease((CFTypeRef)v3[2]);
        goto LABEL_11;
      }
    }
    uint64_t v6 = 0;
LABEL_11:
    free(v3);
LABEL_12:
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
    return v6;
  }
  *(unsigned char *)(a1 + 24) = 0;
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  CFRelease((CFTypeRef)a1);
  return 0;
}

uint64_t APSDispatchSectionIsOccupied(uint64_t a1)
{
  return *(unsigned __int8 *)(a1 + 24);
}

uint64_t APSW5LogCollect(__CFString *a1)
{
  v13[1] = *MEMORY[0x1E4F143B8];
  uint64_t v10 = 0;
  int v2 = (void *)MEMORY[0x1D25EF3B0]();
  uint64_t v3 = [MEMORY[0x1E4FB6FF8] requestWithItemID:83 configuration:0];
  if (v3)
  {
    uint64_t v4 = v3;
    if (a1) {
      uint64_t v5 = a1;
    }
    else {
      uint64_t v5 = @"AirPlay Performance Issue";
    }
    uint64_t v6 = (void *)[MEMORY[0x1E4FB6FF0] sharedClient];
    v13[0] = v4;
    uint64_t v7 = [MEMORY[0x1E4F1C978] arrayWithObjects:v13 count:1];
    v11[0] = @"Reason";
    v11[1] = @"Compress";
    v12[0] = v5;
    v12[1] = MEMORY[0x1E4F1CC38];
    if (objc_msgSend(v6, "collectLogs:configuration:update:receipts:error:", v7, objc_msgSend(MEMORY[0x1E4F1C9E8], "dictionaryWithObjects:forKeys:count:", v12, v11, 2), &__block_literal_global_1706, 0, &v10))
    {
      uint64_t v8 = 0;
    }
    else
    {
      APSLogErrorAt(0);
      if (NSErrorToOSStatus()) {
        uint64_t v8 = 0;
      }
      else {
        uint64_t v8 = 4294960596;
      }
      if (gLogCategory_APSW5Log <= 50 && (gLogCategory_APSW5Log != -1 || _LogCategory_Initialize())) {
        LogPrintF();
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294960568;
  }
  return v8;
}

void __APSW5LogCollect_block_invoke()
{
  if (gLogCategory_APSW5Log <= 40 && (gLogCategory_APSW5Log != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
}

uint64_t APSCMBlockBufferCreateWithDispatchData(const __CFAllocator *a1, NSObject *a2, CFTypeRef *a3)
{
  buffer_ptr = 0;
  CMBlockBufferRef blockBufferOut = 0;
  size_t size_ptr = 0;
  uint64_t v3 = 4294960591;
  if (a2 && a3)
  {
    APSTimeProfilerTaskBegin(@"DispatchDataCreateMap");
    dispatch_data_t v7 = dispatch_data_create_map(a2, (const void **)&buffer_ptr, &size_ptr);
    APSTimeProfilerTaskEnd(@"DispatchDataCreateMap");
    if (v7)
    {
      customBlockSource.version = 0;
      customBlockSource.AllocateBlock = 0;
      customBlockSource.FreeBlock = (void (__cdecl *)(void *, void *, size_t))bbufUtils_freeDispatchDataBlock;
      customBlockSource.refCon = v7;
      uint64_t v3 = CMBlockBufferCreateWithMemoryBlock(a1, buffer_ptr, size_ptr, (CFAllocatorRef)*MEMORY[0x1E4F1CFA0], &customBlockSource, 0, size_ptr, 0, &blockBufferOut);
      if (!v3)
      {
        dispatch_retain(v7);
        *a3 = CFRetain(blockBufferOut);
      }
      dispatch_release(v7);
      if (blockBufferOut) {
        CFRelease(blockBufferOut);
      }
    }
    else
    {
      return 4294960568;
    }
  }
  return v3;
}

uint64_t APSCMBlockBufferCreateContiguousCopy(const __CFAllocator *a1, const __CFAllocator *a2, CMBlockBufferRef theBuffer, CFTypeRef *a4)
{
  CMTime dataPointerOut = 0;
  CMBlockBufferRef theBuffera = 0;
  uint64_t DataPointer = 4294960591;
  if (theBuffer && a4)
  {
    size_t DataLength = CMBlockBufferGetDataLength(theBuffer);
    if (DataLength)
    {
      size_t v10 = DataLength;
      uint64_t DataPointer = CMBlockBufferCreateWithMemoryBlock(a1, 0, v10, a2, 0, 0, v10, 1u, &theBuffera);
      if (DataPointer) {
        goto LABEL_10;
      }
      uint64_t DataPointer = CMBlockBufferGetDataPointer(theBuffera, 0, 0, 0, &dataPointerOut);
      if (DataPointer) {
        goto LABEL_10;
      }
      uint64_t v11 = CMBlockBufferCopyDataBytes(theBuffer, 0, v10, dataPointerOut);
    }
    else
    {
      uint64_t v11 = CMBlockBufferCreateEmpty(a1, 0, 1u, &theBuffera);
    }
    uint64_t DataPointer = v11;
    if (!v11)
    {
      uint64_t DataPointer = 0;
      *a4 = CFRetain(theBuffera);
    }
  }
LABEL_10:
  if (theBuffera) {
    CFRelease(theBuffera);
  }
  return DataPointer;
}

uint64_t APSCMBlockBufferReplace(CMBlockBufferRef theBuffer, uint64_t a2, OpaqueCMBlockBuffer *a3, size_t a4, uint64_t a5)
{
  int v15 = 0;
  size_t lengthAtOffsetOut = 0;
  uint64_t result = 4294960591;
  if (theBuffer)
  {
    if (a3)
    {
      size_t DataLength = CMBlockBufferGetDataLength(theBuffer);
      size_t v12 = CMBlockBufferGetDataLength(a3);
      uint64_t result = 4294960591;
      if (a5 + a2 <= DataLength)
      {
        size_t v13 = a5 + a4;
        if (v13 <= v12)
        {
          if (v13 <= a4)
          {
            return 0;
          }
          else
          {
            while (1)
            {
              uint64_t result = CMBlockBufferGetDataPointer(a3, a4, &lengthAtOffsetOut, 0, &v15);
              if (result) {
                break;
              }
              size_t v14 = lengthAtOffsetOut >= v13 - a4 ? v13 - a4 : lengthAtOffsetOut;
              uint64_t result = CMBlockBufferReplaceDataBytes(v15, theBuffer, a4 + a2, v14);
              if (result) {
                break;
              }
              a4 += lengthAtOffsetOut;
              if (a4 >= v13) {
                return 0;
              }
            }
          }
        }
      }
    }
  }
  return result;
}

uint64_t APSCMBlockBufferCreateBigUIntWithUInt64(CFAllocatorRef structureAllocator, unint64_t a2, CMBlockBufferRef *blockBufferOut)
{
  if (a2)
  {
    unsigned int v6 = ilog2_64();
    dispatch_data_t v7 = CFAllocatorAllocate(structureAllocator, 8, 0);
    if (!v7) {
      return 4294960568;
    }
    uint64_t v8 = v7;
    *dispatch_data_t v7 = bswap64(a2);
    uint64_t v9 = CMBlockBufferCreateWithMemoryBlock(structureAllocator, v7, 8uLL, structureAllocator, 0, 8 - ((v6 >> 3) + 1), (v6 >> 3) + 1, 0, blockBufferOut);
    if (v9) {
      CFAllocatorDeallocate(structureAllocator, v8);
    }
    return v9;
  }
  else
  {
    return CMBlockBufferCreateEmpty(structureAllocator, 0, 0, blockBufferOut);
  }
}

uint64_t APSCMBlockBufferGetBigUIntAsUInt64(OpaqueCMBlockBuffer *a1, unint64_t *a2)
{
  if (!a1) {
    return 4294960591;
  }
  size_t DataLength = CMBlockBufferGetDataLength(a1);
  if (DataLength > 8) {
    return 4294960553;
  }
  if (!a2) {
    return 0;
  }
  if (DataLength)
  {
    uint64_t result = CMBlockBufferCopyDataBytes(a1, 0, DataLength, (char *)a2 - DataLength + 8);
    if (result) {
      return result;
    }
    unint64_t v6 = bswap64(*a2);
  }
  else
  {
    unint64_t v6 = 0;
  }
  uint64_t result = 0;
  *a2 = v6;
  return result;
}

uint64_t APSCMBlockBufferCreateWithUUID(const __CFUUID *a1, void *a2)
{
  if (!a2) {
    return 4294960591;
  }
  CFUUIDGetUUIDBytes(a1);
  uint64_t BlockBufferCopyingMemoryBlock = FigCreateBlockBufferCopyingMemoryBlock();
  if (!BlockBufferCopyingMemoryBlock) {
    *a2 = 0;
  }
  return BlockBufferCopyingMemoryBlock;
}

uint64_t APSCMBlockBufferCopyAsUUID(OpaqueCMBlockBuffer *a1, CFTypeRef *a2)
{
  *(void *)&v6.byte0 = 0;
  *(void *)&v6.byte8 = 0;
  if (!a2) {
    return 4294960591;
  }
  if (CMBlockBufferGetDataLength(a1) != 16) {
    return 4294960553;
  }
  uint64_t result = CMBlockBufferCopyDataBytes(a1, 0, 0x10uLL, &v6);
  if (!result)
  {
    uint64_t result = (uint64_t)CFUUIDCreateFromUUIDBytes((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v6);
    if (result)
    {
      uint64_t v5 = (const void *)result;
      *a2 = CFRetain((CFTypeRef)result);
      CFRelease(v5);
      return 0;
    }
    else
    {
      *a2 = 0;
    }
  }
  return result;
}

uint64_t APSCMBlockBufferCreateWithString(const __CFAllocator *a1, __CFString *theString, CFStringEncoding encoding, int a4, CMBlockBufferRef *a5)
{
  CFIndex v19 = 0;
  CFIndex usedBufLen = 0;
  uint64_t v5 = 4294960591;
  if (theString && a5)
  {
    if (!a4
      || (CStringPtr = CFStringGetCStringPtr(theString, encoding)) == 0
      || (uint64_t v11 = (char *)CStringPtr, v12 = strlen(CStringPtr), v12 < 0x1D))
    {
      CFIndex Length = CFStringGetLength(theString);
      v21.location = 0;
      v21.unsigned int length = Length;
      if (CFStringGetBytes(theString, v21, encoding, 0, 1u, 0, 0, &usedBufLen) != Length) {
        return 4294960579;
      }
      if (usedBufLen < 1) {
        return CMBlockBufferCreateEmpty(a1, 0, 0, a5);
      }
      int v15 = (UInt8 *)CFAllocatorAllocate(a1, usedBufLen, 0);
      if (!v15) {
        return 4294960568;
      }
      char v16 = v15;
      v22.location = 0;
      v22.unsigned int length = Length;
      if (CFStringGetBytes(theString, v22, encoding, 0, 1u, v15, usedBufLen, &v19) == Length)
      {
        if (v19 == usedBufLen)
        {
          uint64_t v5 = CMBlockBufferCreateWithMemoryBlock(a1, v16, v19, a1, 0, 0, v19, 0, a5);
          if (!v5) {
            return v5;
          }
        }
        else
        {
          uint64_t v5 = 4294960548;
        }
      }
      else
      {
        uint64_t v5 = 4294960579;
      }
      CFAllocatorDeallocate(a1, v16);
      return v5;
    }
    CFAllocatorRef v13 = (const __CFAllocator *)*MEMORY[0x1E4F1CFA0];
    customBlockSource.version = 0;
    customBlockSource.AllocateBlock = 0;
    customBlockSource.FreeBlock = (void (__cdecl *)(void *, void *, size_t))bbufUtils_freeStringBlock;
    customBlockSource.refCon = theString;
    uint64_t v5 = CMBlockBufferCreateWithMemoryBlock(a1, v11, v12, v13, &customBlockSource, 0, v12, 0, a5);
    if (!v5) {
      CFRetain(theString);
    }
  }
  return v5;
}

uint64_t APSCMBlockBufferCopyAsString(const __CFAllocator *a1, CMBlockBufferRef theBuffer, CFStringEncoding a3, int a4, void *a5)
{
  CMTime dataPointerOut = 0;
  size_t lengthAtOffsetOut = 0;
  contentsDeCFAllocatorRef allocator = 0;
  uint64_t DataPointer = 4294960591;
  if (!theBuffer || !a5) {
    return DataPointer;
  }
  size_t DataLength = CMBlockBufferGetDataLength(theBuffer);
  if (!DataLength)
  {
    uint64_t DataPointer = 0;
    *a5 = CFRetain(&stru_1F26EE2F0);
    goto LABEL_20;
  }
  unint64_t v12 = DataLength;
  uint64_t DataPointer = CMBlockBufferGetDataPointer(theBuffer, 0, &lengthAtOffsetOut, 0, &dataPointerOut);
  if (DataPointer) {
    goto LABEL_20;
  }
  if (a4 && lengthAtOffsetOut == v12)
  {
    if (APSReferencingAllocatorGetOverheadBytes_sOnce != -1) {
      dispatch_once_f(&APSReferencingAllocatorGetOverheadBytes_sOnce, &APSReferencingAllocatorGetOverheadBytes_sOverheadBytes, (dispatch_function_t)refAllocator_calculateOverheadBytes);
    }
    if (v12 > APSReferencingAllocatorGetOverheadBytes_sOverheadBytes)
    {
      uint64_t DataPointer = APSReferencingAllocatorCreate(a1, theBuffer, &contentsDeallocator);
      if (DataPointer) {
        goto LABEL_20;
      }
      CFAllocatorRef v13 = 0;
      CFAllocatorRef v14 = contentsDeallocator;
LABEL_18:
      CFStringRef v16 = CFStringCreateWithBytesNoCopy(a1, (const UInt8 *)dataPointerOut, v12, a3, 1u, v14);
      *a5 = v16;
      if (v16)
      {
        uint64_t DataPointer = 0;
        goto LABEL_20;
      }
      if (v13)
      {
        uint64_t DataPointer = 4294960568;
        CFAllocatorRef v14 = contentsDeallocator;
        goto LABEL_17;
      }
      goto LABEL_26;
    }
  }
  if (a1) {
    CFAllocatorRef v14 = (const __CFAllocator *)CFRetain(a1);
  }
  else {
    CFAllocatorRef v14 = 0;
  }
  contentsDeCFAllocatorRef allocator = v14;
  int v15 = (char *)CFAllocatorAllocate(v14, v12, 0);
  if (v15)
  {
    CFAllocatorRef v13 = v15;
    CMTime dataPointerOut = v15;
    uint64_t DataPointer = CMBlockBufferCopyDataBytes(theBuffer, 0, v12, v15);
    if (DataPointer)
    {
LABEL_17:
      CFAllocatorDeallocate(v14, v13);
      goto LABEL_20;
    }
    goto LABEL_18;
  }
LABEL_26:
  uint64_t DataPointer = 4294960568;
LABEL_20:
  if (contentsDeallocator) {
    CFRelease(contentsDeallocator);
  }
  return DataPointer;
}

uint64_t AirPlayDeviceSupportsAWDLSolo(_DWORD *a1)
{
  if (APSIsVirtualMachine_sCheckOnceForVM != -1) {
    dispatch_once(&APSIsVirtualMachine_sCheckOnceForVM, &__block_literal_global_326);
  }
  if (APSIsVirtualMachine_sIsVirtualMachine == 1)
  {
    if (gLogCategory_APSNetworkUtils <= 50
      && (gLogCategory_APSNetworkUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v3 = 0;
  }
  else
  {
    pthread_mutex_lock(&AirPlayDeviceSupportsAWDLSolo_soloQueryMutex);
    if ((AirPlayDeviceSupportsAWDLSolo_querySuccessful & 1) == 0)
    {
      char Int64 = WiFiManagerGetInt64();
      uint64_t v3 = Int64 & 1;
      AirPlayDeviceSupportsAWDLSolo_supportsSolo = Int64 & 1;
      AirPlayDeviceSupportsAWDLSolo_querySuccessful = 1;
      if (gLogCategory_APSNetworkUtils > 40) {
        goto LABEL_13;
      }
      if (gLogCategory_APSNetworkUtils != -1 || _LogCategory_Initialize()) {
        LogPrintF();
      }
    }
    uint64_t v3 = AirPlayDeviceSupportsAWDLSolo_supportsSolo;
    if (gLogCategory_APSNetworkUtils <= 10
      && (gLogCategory_APSNetworkUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
LABEL_13:
  pthread_mutex_unlock(&AirPlayDeviceSupportsAWDLSolo_soloQueryMutex);
  if (a1) {
    *a1 = 0;
  }
  return v3;
}

char *AirPlayCreateAWDLChannelSequenceString(uint64_t a1, uint64_t a2, unsigned int a3, char **a4)
{
  uint64_t v16 = *MEMORY[0x1E4F143B8];
  if (a3 >= 0x10) {
    uint64_t v4 = 16;
  }
  else {
    uint64_t v4 = a3;
  }
  if (v4)
  {
    unint64_t v7 = 0;
    unint64_t v8 = 0;
    while (1)
    {
      v7 += snprintf(&__s1[v7], 256 - v7, "%u", *(unsigned __int8 *)(a1 + v8));
      if (v7 > 0xFF) {
        break;
      }
      if (*(unsigned char *)(a1 + v8))
      {
        int v9 = *(_DWORD *)(a2 + 4 * v8);
        if ((v9 & 0x400) != 0)
        {
          int v12 = snprintf(&__s1[v7], 256 - v7, "++");
          goto LABEL_13;
        }
        if ((v9 & 4) != 0)
        {
          size_t v10 = &__s1[v7];
          size_t v11 = 256 - v7;
          if ((v9 & 0x200) != 0) {
            int v12 = snprintf(v10, v11, "+");
          }
          else {
            int v12 = snprintf(v10, v11, "-");
          }
LABEL_13:
          v7 += v12;
          if (v7 > 0xFF) {
            break;
          }
        }
      }
      if (v8 >= (v4 - 1) || (v7 += snprintf(&__s1[v7], 256 - v7, ", "), v7 < 0x100))
      {
        if (v4 != ++v8) {
          continue;
        }
      }
      break;
    }
  }
  uint64_t result = strdup(__s1);
  *a4 = result;
  return result;
}

uint64_t APSAudioIOAssertionGetTypeID()
{
  if (gAPSAudioIOAssertionInitOnce != -1) {
    dispatch_once_f(&gAPSAudioIOAssertionInitOnce, 0, (dispatch_function_t)_APSAudioIOAssertionGetTypeID);
  }
  return gAPSAudioIOAssertionTypeID;
}

uint64_t _APSAudioIOAssertionGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSAudioIOAssertionCFTypeID TypeID = result;
  return result;
}

void _APSAudioIOAssertionFinalize(uint64_t a1)
{
  if (gLogCategory_APSAudioIOAssertion <= 50
    && (gLogCategory_APSAudioIOAssertion != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  int v2 = *(pthread_mutex_t ***)(a1 + 24);
  if (v2)
  {
    pthread_mutex_lock(*v2);
    uint64_t v3 = *(void *)(a1 + 24);
    int v4 = *(_DWORD *)(v3 + 16) - 1;
    *(_DWORD *)(v3 + 16) = v4;
    if (!v4)
    {
      audioIOAssertion_setAudioIOState(v3, 0);
      uint64_t v3 = *(void *)(a1 + 24);
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)v3);
  }
  uint64_t v5 = *(const void **)(a1 + 16);
  if (v5)
  {
    CFRelease(v5);
  }
}

uint64_t audioIOAssertion_setAudioIOState(uint64_t a1, int a2)
{
  BOOL inPropertyData = a2 != 0;
  FigSimpleMutexCheckIsLockedOnThisThread();
  uint64_t v3 = *(unsigned int *)(a1 + 20);
  if (v3)
  {
    if (v3 == 1836589345)
    {
      getpid();
      CMSessionMgrSystemSoundActivateForPID();
      uint64_t v3 = 0;
    }
    else if (v3 == 1667330849)
    {
      uint64_t v4 = AudioServicesSetProperty(0x61637421u, 4u, (const void *)(a1 + 24), 4u, &inPropertyData);
      uint64_t v3 = v4;
      if (v4) {
        APSLogErrorAt(v4);
      }
    }
    else
    {
      uint64_t v3 = 4294960561;
    }
  }
  if (gLogCategory_APSAudioIOAssertion <= 110
    && (gLogCategory_APSAudioIOAssertion != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v3;
}

uint64_t APSAudioIOAssertionCreate(__CFString *a1, CFTypeRef *a2)
{
  if (audioIOAssertion_getManager_sManagerOnce == -1)
  {
    if (a2) {
      goto LABEL_3;
    }
LABEL_20:
    APSLogErrorAt(0);
    return 4294960591;
  }
  dispatch_once_f(&audioIOAssertion_getManager_sManagerOnce, &audioIOAssertion_getManager_sManager, (dispatch_function_t)audioIOAssertion_initManager);
  if (!a2) {
    goto LABEL_20;
  }
LABEL_3:
  if (gAPSAudioIOAssertionInitOnce != -1) {
    dispatch_once_f(&gAPSAudioIOAssertionInitOnce, 0, (dispatch_function_t)_APSAudioIOAssertionGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  uint64_t v5 = (void *)Instance;
  *(void *)(Instance + 16) = 0;
  *(void *)(Instance + 24) = 0;
  if (a1) {
    CFUUIDBytes v6 = a1;
  }
  else {
    CFUUIDBytes v6 = &stru_1F26EE2F0;
  }
  _OWORD v5[2] = CFRetain(v6);
  pthread_mutex_lock((pthread_mutex_t *)audioIOAssertion_getManager_sManager);
  int v7 = dword_1EA643058;
  if (dword_1EA643058) {
    goto LABEL_12;
  }
  uint64_t v8 = audioIOAssertion_setAudioIOState((uint64_t)&audioIOAssertion_getManager_sManager, 1);
  if (!v8)
  {
    int v7 = dword_1EA643058;
LABEL_12:
    dword_1EA643058 = v7 + 1;
    void v5[3] = &audioIOAssertion_getManager_sManager;
    if (gLogCategory_APSAudioIOAssertion <= 50
      && (gLogCategory_APSAudioIOAssertion != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v9 = 0;
    *a2 = CFRetain(v5);
    goto LABEL_17;
  }
  uint64_t v9 = v8;
  APSLogErrorAt(v8);
LABEL_17:
  pthread_mutex_unlock((pthread_mutex_t *)audioIOAssertion_getManager_sManager);
  CFRelease(v5);
  return v9;
}

uint64_t audioIOAssertion_initManager(uint64_t a1)
{
  *(void *)a1 = FigSimpleMutexCreate();
  int v2 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_UTILITY, 0);
  *(void *)(a1 + 8) = dispatch_queue_create("APSAudioIOAssertionManager.timer", v2);
  *(void *)(a1 + 16) = 0x6361732100000000;
  *(_DWORD *)(a1 + 24) = APSSettingsGetIntWithOverrideAndDefault(@"audioIOAssertionSSID", 0, 3100);
  uint64_t result = in_audio_mx_server_process();
  if (result) {
    *(_DWORD *)(a1 + 20) = 1836589345;
  }
  return result;
}

uint64_t APSAudioIOAssertionUntilTime(__CFString *a1, dispatch_time_t a2)
{
  uint64_t context = 0;
  uint64_t v3 = APSAudioIOAssertionCreate(a1, (CFTypeRef *)&context);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  else {
    dispatch_after_f(a2, *(dispatch_queue_t *)(*((void *)context + 3) + 8), context, MEMORY[0x1E4F1C278]);
  }
  return v4;
}

uint64_t _APSAudioIOAssertionSetActivationMethod(int a1)
{
  if (audioIOAssertion_getManager_sManagerOnce != -1) {
    dispatch_once_f(&audioIOAssertion_getManager_sManagerOnce, &audioIOAssertion_getManager_sManager, (dispatch_function_t)audioIOAssertion_initManager);
  }
  pthread_mutex_lock((pthread_mutex_t *)audioIOAssertion_getManager_sManager);
  dword_1EA64305C = a1;
  int v2 = (pthread_mutex_t *)audioIOAssertion_getManager_sManager;

  return pthread_mutex_unlock(v2);
}

uint64_t _APSAudioIOAssertionGetActivationCount()
{
  if (audioIOAssertion_getManager_sManagerOnce != -1) {
    dispatch_once_f(&audioIOAssertion_getManager_sManagerOnce, &audioIOAssertion_getManager_sManager, (dispatch_function_t)audioIOAssertion_initManager);
  }
  pthread_mutex_lock((pthread_mutex_t *)audioIOAssertion_getManager_sManager);
  uint64_t v0 = dword_1EA643058;
  pthread_mutex_unlock((pthread_mutex_t *)audioIOAssertion_getManager_sManager);
  return v0;
}

uint64_t APSPairingAuthenticationCoreUtilsSignBytesForSelfIdentity(uint64_t a1, uint64_t a2, uint64_t a3)
{
  uint64_t v24 = 0;
  long long v25 = &v24;
  uint64_t v26 = 0x3052000000;
  long long v27 = __Block_byref_object_copy_;
  long long v28 = __Block_byref_object_dispose_;
  uint64_t v29 = 0;
  uint64_t v18 = 0;
  CFIndex v19 = &v18;
  uint64_t v20 = 0x3052000000;
  CFRange v21 = __Block_byref_object_copy_;
  CFRange v22 = __Block_byref_object_dispose_;
  uint64_t v23 = 0;
  id v17 = 0;
  id v6 = objc_alloc_init(MEMORY[0x1E4F946C8]);
  if (!v6 || (dispatch_semaphore_t v7 = dispatch_semaphore_create(0)) == 0)
  {
    APSLogErrorAt(0);
    uint64_t v8 = 0;
    uint64_t v10 = 4294960568;
    goto LABEL_20;
  }
  uint64_t v8 = v7;
  if (gLogCategory_APSPairingAuthenticationCoreUtils <= 50
    && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  dispatch_retain(v8);
  v16[0] = MEMORY[0x1E4F143A8];
  v16[1] = 3221225472;
  v16[2] = __APSPairingAuthenticationCoreUtilsSignBytesForSelfIdentity_block_invoke;
  v16[3] = &unk_1E6898A78;
  v16[5] = &v24;
  v16[6] = &v18;
  v16[4] = v8;
  [v6 getIdentitiesWithFlags:1 completion:v16];
  dispatch_semaphore_wait(v8, 0xFFFFFFFFFFFFFFFFLL);
  if (gLogCategory_APSPairingAuthenticationCoreUtils <= 50
    && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v9 = [(id)v19[5] code];
  uint64_t v10 = v9;
  if (v9) {
    goto LABEL_27;
  }
  size_t v11 = (void *)[(id)v25[5] firstObject];
  int v12 = v11;
  if (!v11) {
    goto LABEL_28;
  }
  char v13 = [v11 signDataPtr:a1 dataLen:a2 signatureBytes:a3 error:&v17];
  uint64_t v9 = [v17 code];
  if (v9)
  {
    uint64_t v10 = v9;
LABEL_27:
    APSLogErrorAt(v9);
    goto LABEL_20;
  }
  if ((v13 & 1) == 0)
  {
LABEL_28:
    APSLogErrorAt(0);
    uint64_t v10 = 4294960587;
    goto LABEL_20;
  }
  if (gLogCategory_APSPairingAuthenticationCoreUtils <= 30
    && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
  {
    int v15 = v12;
    LogPrintF();
  }
  uint64_t v10 = 0;
LABEL_20:

  if (v8) {
    dispatch_release(v8);
  }
  objc_msgSend(v6, "invalidate", v15);

  _Block_object_dispose(&v18, 8);
  _Block_object_dispose(&v24, 8);
  return v10;
}

void sub_1D0BF2BE4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, ...)
{
  va_start(va1, a11);
  va_start(va, a11);
  uint64_t v12 = va_arg(va1, void);
  uint64_t v14 = va_arg(va1, void);
  uint64_t v15 = va_arg(va1, void);
  uint64_t v16 = va_arg(va1, void);
  uint64_t v17 = va_arg(va1, void);
  uint64_t v18 = va_arg(va1, void);
  _Block_object_dispose(va, 8);
  _Block_object_dispose(va1, 8);
  _Unwind_Resume(a1);
}

void __Block_byref_object_copy_(uint64_t a1, uint64_t a2)
{
}

void __Block_byref_object_dispose_(uint64_t a1)
{
}

void __APSPairingAuthenticationCoreUtilsSignBytesForSelfIdentity_block_invoke(uint64_t a1, void *a2, void *a3)
{
  *(void *)(*(void *)(*(void *)(a1 + 40) + 8) + 40) = a2;
  *(void *)(*(void *)(*(void *)(a1 + 48) + 8) + 40) = a3;
  dispatch_semaphore_signal(*(dispatch_semaphore_t *)(a1 + 32));
  uint64_t v5 = *(NSObject **)(a1 + 32);

  dispatch_release(v5);
}

uint64_t APSPairingAuthenticationCoreUtilsVerifySignatureForSameAccount(uint64_t a1, uint64_t a2, uint64_t a3)
{
  uint64_t v43 = *MEMORY[0x1E4F143B8];
  uint64_t v36 = 0;
  unint64_t v37 = &v36;
  uint64_t v38 = 0x3052000000;
  uint64_t v39 = __Block_byref_object_copy_;
  int v40 = __Block_byref_object_dispose_;
  uint64_t v41 = 0;
  uint64_t v30 = 0;
  long long v31 = &v30;
  uint64_t v32 = 0x3052000000;
  long long v33 = __Block_byref_object_copy_;
  uint64_t v34 = __Block_byref_object_dispose_;
  uint64_t v35 = 0;
  id v6 = objc_alloc_init(MEMORY[0x1E4F946C8]);
  if (v6 && (dispatch_semaphore_t v7 = dispatch_semaphore_create(0)) != 0)
  {
    uint64_t v8 = v7;
    if (gLogCategory_APSPairingAuthenticationCoreUtils <= 50
      && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    dispatch_retain(v8);
    v29[0] = MEMORY[0x1E4F143A8];
    v29[1] = 3221225472;
    v29[2] = __APSPairingAuthenticationCoreUtilsVerifySignatureForSameAccount_block_invoke;
    v29[3] = &unk_1E6898A78;
    v29[5] = &v36;
    v29[6] = &v30;
    v29[4] = v8;
    [v6 getIdentitiesWithFlags:2 completion:v29];
    dispatch_semaphore_wait(v8, 0xFFFFFFFFFFFFFFFFLL);
    if (gLogCategory_APSPairingAuthenticationCoreUtils <= 50
      && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v9 = [(id)v31[5] code];
    uint64_t v10 = v9;
    if (v9)
    {
      APSLogErrorAt(v9);
    }
    else if (v37[5])
    {
      long long v27 = 0u;
      long long v28 = 0u;
      long long v25 = 0u;
      long long v26 = 0u;
      size_t v11 = (void *)v37[5];
      uint64_t v12 = [v11 countByEnumeratingWithState:&v25 objects:v42 count:16];
      id v23 = v6;
      if (v12)
      {
        uint64_t v13 = *(void *)v26;
LABEL_15:
        uint64_t v14 = 0;
        while (1)
        {
          if (*(void *)v26 != v13) {
            objc_enumerationMutation(v11);
          }
          uint64_t v15 = *(void **)(*((void *)&v25 + 1) + 8 * v14);
          uint64_t v24 = 0;
          char v16 = objc_msgSend(v15, "verifySignaturePtr:signatureLen:dataPtr:dataLen:error:", a3, 64, a1, a2, &v24, v21, v22);
          uint64_t v17 = v24;
          if (v24) {
            char v18 = 0;
          }
          else {
            char v18 = v16;
          }
          if (v18)
          {
            if (gLogCategory_APSPairingAuthenticationCoreUtils <= 30
              && (gLogCategory_APSPairingAuthenticationCoreUtils != -1 || _LogCategory_Initialize()))
            {
              CFRange v21 = v15;
              LogPrintF();
            }
            uint64_t v10 = 0;
            goto LABEL_36;
          }
          if (gLogCategory_APSPairingAuthenticationCoreUtils > 30) {
            goto LABEL_26;
          }
          if (gLogCategory_APSPairingAuthenticationCoreUtils == -1)
          {
            if (!_LogCategory_Initialize()) {
              goto LABEL_26;
            }
            uint64_t v17 = v24;
          }
          CFRange v21 = v15;
          uint64_t v22 = v17;
          LogPrintF();
LABEL_26:
          if (v12 == ++v14)
          {
            uint64_t v19 = [v11 countByEnumeratingWithState:&v25 objects:v42 count:16];
            uint64_t v12 = v19;
            if (v19) {
              goto LABEL_15;
            }
            break;
          }
        }
      }
      APSLogErrorAt(0);
      uint64_t v10 = 4294960580;
LABEL_36:
      id v6 = v23;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v10 = 4294960587;
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v8 = 0;
    uint64_t v10 = 4294960568;
  }

  if (v8) {
    dispatch_release(v8);
  }
  objc_msgSend(v6, "invalidate", v21);

  _Block_object_dispose(&v30, 8);
  _Block_object_dispose(&v36, 8);
  return v10;
}

void sub_1D0BF311C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20,uint64_t a21,uint64_t a22,uint64_t a23,uint64_t a24,uint64_t a25,uint64_t a26,uint64_t a27,uint64_t a28,uint64_t a29,uint64_t a30,char a31,uint64_t a32,uint64_t a33,uint64_t a34,uint64_t a35,uint64_t a36,char a37)
{
}

void __APSPairingAuthenticationCoreUtilsVerifySignatureForSameAccount_block_invoke(uint64_t a1, void *a2, void *a3)
{
  *(void *)(*(void *)(*(void *)(a1 + 40) + 8) + 40) = a2;
  *(void *)(*(void *)(*(void *)(a1 + 48) + 8) + 40) = a3;
  dispatch_semaphore_signal(*(dispatch_semaphore_t *)(a1 + 32));
  uint64_t v5 = *(NSObject **)(a1 + 32);

  dispatch_release(v5);
}

uint64_t tGvVBtfGSsOH67XQ()
{
  if (TyZKBvs2dXtrLjcUCR != -1) {
    dispatch_once_f(&TyZKBvs2dXtrLjcUCR, 0, (dispatch_function_t)Ja1EGqpVx);
  }
  return ItH26wrAHoeKhrXaDR;
}

uint64_t Ja1EGqpVx()
{
  uint64_t result = _CFRuntimeRegisterClass();
  ItH26wrAHoeKhrXaDR = result;
  return result;
}

uint64_t yItiyMt(uint64_t a1)
{
  uint64_t result = NhB9kxUGdXXE(a1);
  if (*(unsigned char *)(a1 + 336))
  {
    uint64_t result = AES_CTR_Final();
    *(unsigned char *)(a1 + 336) = 0;
  }
  for (uint64_t i = 16; i != 448; ++i)
    *(unsigned char *)(a1 + i) = 0;
  return result;
}

uint64_t NhB9kxUGdXXE(uint64_t a1)
{
  *(_DWORD *)(a1 + 340) = 0;
  int v2 = *(const void **)(a1 + 344);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 344) = 0;
  }
  uint64_t v3 = *(const void **)(a1 + 352);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 352) = 0;
  }
  if (*(void *)(a1 + 360))
  {
    SRP_free();
    *(void *)(a1 + 360) = 0;
  }
  uint64_t result = *(void *)(a1 + 368);
  if (result)
  {
    uint64_t result = cstr_free();
    *(void *)(a1 + 368) = 0;
  }
  if (*(unsigned char *)(a1 + 424))
  {
    uint64_t result = AES_GCM_Final();
    *(unsigned char *)(a1 + 424) = 0;
  }
  if (*(unsigned char *)(a1 + 425))
  {
    uint64_t result = AES_GCM_Final();
    *(unsigned char *)(a1 + 425) = 0;
  }
  return result;
}

uint64_t gQblcfSzZBQsYCCV(uint64_t *a1, int a2)
{
  if (B0qLAG != -1) {
    dispatch_once_f(&B0qLAG, 0, (dispatch_function_t)_GlobalInitialize);
  }
  if (tHHVsHfAtS9mW)
  {
    if (TyZKBvs2dXtrLjcUCR != -1) {
      dispatch_once_f(&TyZKBvs2dXtrLjcUCR, 0, (dispatch_function_t)Ja1EGqpVx);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      *(_OWORD *)(Instance + 20) = 0u;
      *(_OWORD *)(Instance + 404) = 0u;
      *(_OWORD *)(Instance + 420) = 0u;
      int v5 = 1634747209;
      *(_OWORD *)(Instance + 372) = 0u;
      *(_OWORD *)(Instance + 388) = 0u;
      *(_OWORD *)(Instance + 340) = 0u;
      *(_OWORD *)(Instance + 356) = 0u;
      *(_OWORD *)(Instance + 308) = 0u;
      *(_OWORD *)(Instance + 324) = 0u;
      *(_OWORD *)(Instance + 276) = 0u;
      *(_OWORD *)(Instance + 292) = 0u;
      *(_OWORD *)(Instance + 244) = 0u;
      *(_OWORD *)(Instance + 260) = 0u;
      *(_OWORD *)(Instance + 212) = 0u;
      *(_OWORD *)(Instance + 228) = 0u;
      *(_OWORD *)(Instance + 180) = 0u;
      *(_OWORD *)(Instance + 196) = 0u;
      *(_OWORD *)(Instance + 148) = 0u;
      *(_OWORD *)(Instance + 164) = 0u;
      *(_OWORD *)(Instance + 116) = 0u;
      *(_OWORD *)(Instance + 132) = 0u;
      *(_OWORD *)(Instance + 84) = 0u;
      *(_OWORD *)(Instance + 100) = 0u;
      *(_OWORD *)(Instance + 52) = 0u;
      *(_OWORD *)(Instance + 68) = 0u;
      *(_OWORD *)(Instance + 36) = 0u;
      *(_OWORD *)(Instance + 432) = 0u;
      *(_DWORD *)(Instance + 16) = a2;
      if (a2)
      {
        int v5 = 1634751305;
        int v6 = 11;
        int v7 = 1634751312;
        uint64_t v8 = @"AirPlay Server Peer";
        uint64_t v9 = @"AirPlay Server Identity";
      }
      else
      {
        int v7 = 1634747216;
        int v6 = 1;
        uint64_t v8 = @"AirPlay Client Peer";
        uint64_t v9 = @"AirPlay Client Identity";
      }
      uint64_t v10 = 0;
      *(void *)(Instance + 24) = v9;
      *(_DWORD *)(Instance + 32) = v5;
      *(void *)(Instance + 40) = v8;
      *(_DWORD *)(Instance + 48) = v7;
      *(_DWORD *)(Instance + 52) = v6;
      *(_DWORD *)(Instance + 56) = v6;
      *a1 = Instance;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960534;
  }
  return v10;
}

dispatch_semaphore_t _GlobalInitialize()
{
  dispatch_semaphore_t result = dispatch_semaphore_create(1);
  tHHVsHfAtS9mW = (uint64_t)result;
  return result;
}

uint64_t XoN3GgjZNCvkN1T8I3(uint64_t a1)
{
  uint64_t result = NhB9kxUGdXXE(a1);
  if (*(_DWORD *)(a1 + 16)) {
    int v3 = 11;
  }
  else {
    int v3 = 1;
  }
  *(_DWORD *)(a1 + 52) = v3;
  *(_DWORD *)(a1 + 56) = v3;
  if (*(unsigned char *)(a1 + 336))
  {
    uint64_t result = AES_CTR_Final();
    *(unsigned char *)(a1 + 336) = 0;
  }
  return result;
}

__n128 aMoe8v8GNE9T(uint64_t a1, uint64_t a2)
{
  __n128 result = *(__n128 *)(a1 + 220);
  long long v3 = *(_OWORD *)(a1 + 236);
  *(__n128 *)a2 = result;
  *(_OWORD *)(a2 + 16) = v3;
  return result;
}

__n128 Dk7hjUuq(uint64_t a1, uint64_t a2)
{
  __n128 result = *(__n128 *)a2;
  *(_OWORD *)(a1 + 236) = *(_OWORD *)(a2 + 16);
  *(__n128 *)(a1 + 220) = result;
  return result;
}

uint64_t PCFdAVst(uint64_t a1, const void *a2, CC_LONG a3, const void *a4, CC_LONG a5, _OWORD *a6, _OWORD *a7)
{
  int v7 = *(_DWORD *)(a1 + 56);
  if (*(_DWORD *)(a1 + 16))
  {
    if (v7 != 14) {
      goto LABEL_6;
    }
LABEL_5:
    Mb6C1FLt7vW91ix(a1, a2, a3, a4, a5, a6, a7);
    return 0;
  }
  if (v7 == 5) {
    goto LABEL_5;
  }
LABEL_6:
  APSLogErrorAt(0);
  return 4294960587;
}

double Mb6C1FLt7vW91ix(uint64_t a1, const void *a2, CC_LONG a3, const void *a4, CC_LONG a5, _OWORD *a6, _OWORD *a7)
{
  uint64_t v17 = *MEMORY[0x1E4F143B8];
  double result = 0.0;
  memset(&v15, 0, sizeof(v15));
  if (a6)
  {
    CC_SHA512_Init(&v15);
    CC_SHA512_Update(&v15, a2, a3);
    CC_SHA512_Update(&v15, (const void *)(a1 + 252), 0x20u);
    CC_SHA512_Final((unsigned __int8 *)md, &v15);
    double result = md[0];
    *a6 = *(_OWORD *)md;
  }
  if (a7)
  {
    CC_SHA512_Init(&v15);
    CC_SHA512_Update(&v15, a4, a5);
    CC_SHA512_Update(&v15, (const void *)(a1 + 252), 0x20u);
    CC_SHA512_Final((unsigned __int8 *)md, &v15);
    double result = md[0];
    *a7 = *(_OWORD *)md;
  }
  return result;
}

uint64_t h4BvW7X(uint64_t a1, long long *a2, uint64_t a3, _OWORD *a4, unint64_t a5, void *a6, unsigned char *a7)
{
  switch(*(_DWORD *)(a1 + 52))
  {
    case 1:
    case 3:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (a3)
      {
        APSLogErrorAt(0);
        uint64_t v15 = 4294960591;
        goto LABEL_42;
      }
      if (a5 <= 0x1F) {
        goto LABEL_59;
      }
      uint64_t v16 = KUY675K4ryxHGzD5GVD(a1, 1, a4, 0);
      uint64_t v15 = v16;
      if (v16) {
        goto LABEL_61;
      }
      *a6 = 32;
      *a7 = 0;
      *(_DWORD *)(a1 + 52) = 2;
      return v15;
    case 2:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (a3 != 32) {
        goto LABEL_59;
      }
      long long v17 = *a2;
      *(_OWORD *)(a1 + 236) = a2[1];
      *(_OWORD *)(a1 + 220) = v17;
      uint64_t v16 = i9kF3TCOFmU(a1, a1 + 220, 0);
      if (v16)
      {
        uint64_t v15 = v16;
        goto LABEL_61;
      }
      *a6 = 0;
      *a7 = 1;
      *(_DWORD *)(a1 + 52) = 3;
      if (gLogCategory_AirPlayPairing > 40
        || gLogCategory_AirPlayPairing == -1 && !_LogCategory_Initialize())
      {
        return 0;
      }
      goto LABEL_37;
    case 0xB:
    case 0xC:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (a3 != 32 || a5 <= 0x1F)
      {
LABEL_59:
        APSLogErrorAt(0);
        uint64_t v15 = 4294960553;
        goto LABEL_42;
      }
      uint64_t v16 = i9kF3TCOFmU(a1, (uint64_t)a2, 0);
      if (v16)
      {
        uint64_t v15 = v16;
LABEL_61:
        APSLogErrorAt(v16);
        goto LABEL_42;
      }
      uint64_t v16 = KUY675K4ryxHGzD5GVD(a1, 1, a4, 0);
      if (v16)
      {
        uint64_t v15 = v16;
        goto LABEL_61;
      }
      *a6 = 32;
      *a7 = 1;
      *(_DWORD *)(a1 + 52) = 12;
      if (gLogCategory_AirPlayPairing <= 40
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
LABEL_37:
        LogPrintF();
      }
      return 0;
    default:
      if (gLogCategory_AirPlayPairing >= 61)
      {
        if (*(_DWORD *)(a1 + 16)) {
          int v14 = 11;
        }
        else {
          int v14 = 1;
        }
        *(_DWORD *)(a1 + 52) = v14;
        return 4294960587;
      }
      else
      {
        if (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()) {
          LogPrintF();
        }
        uint64_t v15 = 4294960587;
LABEL_42:
        int v19 = gLogCategory_AirPlayPairing;
        if (*(_DWORD *)(a1 + 16)) {
          int v20 = 11;
        }
        else {
          int v20 = 1;
        }
        *(_DWORD *)(a1 + 52) = v20;
        if (v19 <= 60 && (v19 != -1 || _LogCategory_Initialize())) {
          LogPrintF();
        }
      }
      return v15;
  }
}

uint64_t KUY675K4ryxHGzD5GVD(uint64_t a1, int a2, _OWORD *a3, _OWORD *a4)
{
  uint64_t v19 = *MEMORY[0x1E4F143B8];
  dispatch_semaphore_wait((dispatch_semaphore_t)tHHVsHfAtS9mW, 0xFFFFFFFFFFFFFFFFLL);
  int v5 = 0;
  int v6 = 1;
  unsigned int v13 = 1;
  do
  {
    if (v5) {
      CFRelease(v5);
    }
    int v5 = (const void *)KeychainCopyMatchingFormatted();
    if (!a2 || v13 == -25293) {
      goto LABEL_20;
    }
    int v10 = v6;
    KeychainDeleteFormatted();
    cced25519_make_key_pair_compat();
    DataToHexCStringEx();
    DataToHexCStringEx();
    SNPrintF();
    strlen(__s);
    unsigned int v13 = KeychainAddFormatted();
    if (!v13)
    {
      long long v7 = v18;
      *a3 = v17;
      a3[1] = v7;
      if (a4)
      {
        long long v8 = v16;
        *a4 = v15;
        a4[1] = v8;
      }
      if (gLogCategory_AirPlayPairing <= 50
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_18;
      }
      goto LABEL_20;
    }
    if (gLogCategory_AirPlayPairing <= 40
      && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    usleep(0x4E20u);
    ++v6;
  }
  while (v10 != 10);
  if (gLogCategory_AirPlayPairing <= 60
    && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
  {
LABEL_18:
    LogPrintF();
  }
LABEL_20:
  if (v5) {
    CFRelease(v5);
  }
  dispatch_semaphore_signal((dispatch_semaphore_t)tHHVsHfAtS9mW);
  return v13;
}

uint64_t i9kF3TCOFmU(uint64_t a1, uint64_t a2, uint64_t a3)
{
  DataToHexCStringEx();
  uint64_t Formatted = CFPropertyListCreateFormatted();
  if (Formatted)
  {
    uint64_t updated = Formatted;
    APSLogErrorAt(Formatted);
  }
  else
  {
    if (!a3) {
      SNPrintF();
    }
    dispatch_semaphore_wait((dispatch_semaphore_t)tHHVsHfAtS9mW, 0xFFFFFFFFFFFFFFFFLL);
    uint64_t updated = KeychainUpdateFormatted();
    if (updated == -25300) {
      uint64_t updated = KeychainAddFormatted();
    }
    if (updated != -25293 && updated) {
      APSLogErrorAt(updated);
    }
    dispatch_semaphore_signal((dispatch_semaphore_t)tHHVsHfAtS9mW);
  }
  if (updated != -25293
    && updated
    && gLogCategory_AirPlayPairing <= 60
    && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return updated;
}

uint64_t VBAEFt(uint64_t a1, long long *a2, unint64_t a3, uint64_t a4, unint64_t a5, void *a6, unsigned char *a7)
{
  unint64_t v11 = a3;
  uint64_t v12 = a2;
  uint64_t v46 = *MEMORY[0x1E4F143B8];
  int v14 = *(_DWORD *)(a1 + 16);
  if (v14 == 1)
  {
    if (a3 <= 3)
    {
LABEL_123:
      APSLogErrorAt(0);
      uint64_t v16 = 4294960553;
      goto LABEL_64;
    }
    if (*(unsigned char *)a2) {
      *(_DWORD *)(a1 + 56) = 11;
    }
    uint64_t v12 = (long long *)((char *)a2 + 4);
    unint64_t v11 = a3 - 4;
  }
  switch(*(_DWORD *)(a1 + 56))
  {
    case 1:
    case 5:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (v11 || a5 <= 0x43) {
        goto LABEL_123;
      }
      RandomBytes();
      cccurve25519_make_pub();
      uint64_t v17 = KUY675K4ryxHGzD5GVD(a1, 1, (_OWORD *)(a1 + 124), (_OWORD *)(a1 + 156));
      uint64_t v16 = v17;
      if (v17) {
        goto LABEL_124;
      }
      *(_DWORD *)a4 = 1;
      long long v18 = *(_OWORD *)(a1 + 60);
      *(_OWORD *)(a4 + 20) = *(_OWORD *)(a1 + 76);
      *(_OWORD *)(a4 + 4) = v18;
      long long v19 = *(_OWORD *)(a1 + 124);
      *(_OWORD *)(a4 + 52) = *(_OWORD *)(a1 + 140);
      *(_OWORD *)(a4 + 36) = v19;
      *a6 = 68;
      *a7 = 0;
      int v20 = 2;
      goto LABEL_93;
    case 2:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (v11 != 96) {
        goto LABEL_123;
      }
      long long v27 = *v12;
      *(_OWORD *)(a1 + 204) = v12[1];
      *(_OWORD *)(a1 + 188) = v27;
      long long v28 = v12[3];
      long long v42 = v12[2];
      long long v43 = v28;
      long long v29 = v12[5];
      long long v44 = v12[4];
      long long v45 = v29;
      cccurve25519();
      for (uint64_t i = 92; i != 124; ++i)
        *(unsigned char *)(a1 + i) = 0;
      Mb6C1FLt7vW91ix(a1, "Pair-Verify-AES-Key", 0x13u, "Pair-Verify-AES-IV", 0x12u, v41, v40);
      if (*(unsigned char *)(a1 + 336))
      {
        AES_CTR_Final();
        *(unsigned char *)(a1 + 336) = 0;
      }
      uint64_t v17 = AES_CTR_Init();
      uint64_t v16 = v17;
      for (uint64_t j = 0; j != 64; ++j)
        *((unsigned char *)v41 + j) = 0;
      for (uint64_t k = 0; k != 64; ++k)
        *((unsigned char *)v40 + k) = 0;
      if (v17) {
        goto LABEL_124;
      }
      *(unsigned char *)(a1 + 336) = 1;
      uint64_t v17 = AES_CTR_Update();
      if (v17)
      {
        uint64_t v16 = v17;
        goto LABEL_124;
      }
      int v33 = cced25519_verify_compat();
      int v34 = gLogCategory_AirPlayPairing;
      if (!v33)
      {
        if (gLogCategory_AirPlayPairing <= 30
          && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        if (a5 <= 0x43) {
          goto LABEL_123;
        }
        cced25519_sign_compat();
        for (uint64_t m = 0; m != 32; ++m)
          *(unsigned char *)(a1 + 156 + m) = 0;
        *(_DWORD *)a4 = 0;
        uint64_t v17 = AES_CTR_Update();
        uint64_t v16 = v17;
        if (!v17)
        {
          *a6 = 68;
          *a7 = 0;
          int v20 = 4;
          goto LABEL_93;
        }
        goto LABEL_124;
      }
      if (gLogCategory_AirPlayPairing > 50) {
        goto LABEL_122;
      }
      if (gLogCategory_AirPlayPairing == -1 && !_LogCategory_Initialize()) {
        goto LABEL_131;
      }
      goto LABEL_120;
    case 4:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (v11) {
        goto LABEL_123;
      }
      *a6 = 0;
      *a7 = 1;
      *(_DWORD *)(a1 + 56) = 5;
      if (gLogCategory_AirPlayPairing <= 40
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        goto LABEL_82;
      }
      return 0;
    case 0xB:
    case 0xE:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (v11 != 64 || a5 <= 0x5F) {
        goto LABEL_123;
      }
      long long v21 = *v12;
      *(_OWORD *)(a1 + 204) = v12[1];
      *(_OWORD *)(a1 + 188) = v21;
      long long v22 = v12[2];
      *(_OWORD *)(a1 + 236) = v12[3];
      *(_OWORD *)(a1 + 220) = v22;
      if (xOvZekdnwD6())
      {
        RandomBytes();
        cccurve25519_make_pub();
        cccurve25519();
        uint64_t v17 = KUY675K4ryxHGzD5GVD(a1, 1, (_OWORD *)(a1 + 124), (_OWORD *)(a1 + 156));
        if (v17)
        {
          uint64_t v16 = v17;
          goto LABEL_124;
        }
        cced25519_sign_compat();
        for (uint64_t n = 156; n != 188; ++n)
          *(unsigned char *)(a1 + n) = 0;
        Mb6C1FLt7vW91ix(a1, "Pair-Verify-AES-Key", 0x13u, "Pair-Verify-AES-IV", 0x12u, v41, v40);
        if (*(unsigned char *)(a1 + 336))
        {
          AES_CTR_Final();
          *(unsigned char *)(a1 + 336) = 0;
        }
        uint64_t v17 = AES_CTR_Init();
        if (v17)
        {
          uint64_t v16 = v17;
          goto LABEL_124;
        }
        *(unsigned char *)(a1 + 336) = 1;
        uint64_t v17 = AES_CTR_Update();
        uint64_t v16 = v17;
        if (v17) {
          goto LABEL_124;
        }
        long long v24 = *(_OWORD *)(a1 + 76);
        *(_OWORD *)a4 = *(_OWORD *)(a1 + 60);
        *(_OWORD *)(a4 + 16) = v24;
        long long v25 = v43;
        *(_OWORD *)(a4 + 32) = v42;
        *(_OWORD *)(a4 + 48) = v25;
        long long v26 = v45;
        *(_OWORD *)(a4 + 64) = v44;
        *(_OWORD *)(a4 + 80) = v26;
        *a6 = 96;
        *a7 = 0;
        int v20 = 13;
LABEL_93:
        *(_DWORD *)(a1 + 56) = v20;
        return v16;
      }
      int v34 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 50)
      {
        uint64_t v16 = 4294960551;
        goto LABEL_65;
      }
      if (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()) {
        LogPrintF();
      }
      uint64_t v16 = 4294960551;
      break;
    case 0xD:
      if (gLogCategory_AirPlayPairing <= 30
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      if (v11 != 64) {
        goto LABEL_123;
      }
      long long v36 = v12[1];
      long long v42 = *v12;
      long long v43 = v36;
      long long v37 = v12[3];
      long long v44 = v12[2];
      long long v45 = v37;
      uint64_t v17 = AES_CTR_Update();
      if (v17)
      {
        uint64_t v16 = v17;
LABEL_124:
        APSLogErrorAt(v17);
      }
      else
      {
        if (!cced25519_verify_compat())
        {
          *a6 = 0;
          *a7 = 1;
          *(_DWORD *)(a1 + 56) = 14;
          if (gLogCategory_AirPlayPairing <= 30
            && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
          {
LABEL_82:
            LogPrintF();
          }
          return 0;
        }
        int v34 = gLogCategory_AirPlayPairing;
        if (gLogCategory_AirPlayPairing > 50)
        {
LABEL_122:
          uint64_t v16 = 4294960580;
          goto LABEL_65;
        }
        if (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()) {
LABEL_120:
        }
          LogPrintF();
LABEL_131:
        uint64_t v16 = 4294960580;
      }
      break;
    default:
      if (gLogCategory_AirPlayPairing >= 61)
      {
        if (v14) {
          int v15 = 11;
        }
        else {
          int v15 = 1;
        }
        *(_DWORD *)(a1 + 56) = v15;
        return 4294960587;
      }
      if (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()) {
        LogPrintF();
      }
      uint64_t v16 = 4294960587;
      break;
  }
LABEL_64:
  int v34 = gLogCategory_AirPlayPairing;
LABEL_65:
  if (*(_DWORD *)(a1 + 16)) {
    int v35 = 11;
  }
  else {
    int v35 = 1;
  }
  *(_DWORD *)(a1 + 56) = v35;
  if (v34 <= 60 && (v34 != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return v16;
}

uint64_t xOvZekdnwD6()
{
  DataToHexCStringEx();
  uint64_t result = KeychainCopyMatchingFormatted();
  if (result)
  {
    uint64_t v1 = (const void *)result;
    int Value = CFDictionaryGetValue((CFDictionaryRef)result, (const void *)*MEMORY[0x1E4F3B558]);
    if (!Value || !CFEqual(Value, (CFTypeRef)*MEMORY[0x1E4F3B5B0])) {
      goto LABEL_10;
    }
    uint64_t Formatted = CFPropertyListCreateFormatted();
    if (!Formatted)
    {
      uint64_t updated = KeychainUpdateFormatted();
      CFRelease(0);
      if (!updated)
      {
        if (gLogCategory_AirPlayPairing > 50
          || gLogCategory_AirPlayPairing == -1 && !_LogCategory_Initialize())
        {
          goto LABEL_10;
        }
        goto LABEL_8;
      }
      uint64_t Formatted = updated;
    }
    APSLogErrorAt(Formatted);
    if (gLogCategory_AirPlayPairing > 50
      || gLogCategory_AirPlayPairing == -1 && !_LogCategory_Initialize())
    {
      goto LABEL_10;
    }
LABEL_8:
    LogPrintF();
LABEL_10:
    CFRelease(v1);
    return 1;
  }
  return result;
}

uint64_t rJPl3sdBfc0E3yB(uint64_t a1, CFTypeRef cf, uint64_t a3)
{
  if (*(_DWORD *)(a1 + 16))
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    if (a3)
    {
      CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!Mutable)
      {
        APSLogErrorAt(0);
        return 4294960568;
      }
      int v6 = Mutable;
      CFDictionarySetValue(Mutable, @"method", @"pin");
      CFDictionarySetValue(v6, @"user", cf);
      uint64_t Bytes = CFPropertyListCreateBytes();
      CFRelease(v6);
      if (Bytes)
      {
        APSLogErrorAt(Bytes);
        return Bytes;
      }
    }
    long long v8 = *(const void **)(a1 + 352);
    if (cf) {
      CFRetain(cf);
    }
    *(void *)(a1 + 352) = cf;
    if (v8) {
      CFRelease(v8);
    }
    uint64_t Bytes = 0;
    *(_DWORD *)(a1 + 340) = 101;
  }
  return Bytes;
}

uint64_t o4IBrWf(uint64_t a1)
{
  unsigned int v6 = 0;
  if (*(_DWORD *)(a1 + 16) == 1)
  {
    CFDictionaryGetTypeID();
    int v2 = (const void *)CFCreateWithPlistBytes();
    CFStringGetTypeID();
    Typedint Value = (const void *)CFDictionaryGetTypedValue();
    uint64_t v4 = CFEqual(TypedValue, @"pin");
    if (v4)
    {
      CFStringGetTypeID();
      CFDictionaryGetTypedValue();
      *(_DWORD *)(a1 + 340) = 111;
    }
    else
    {
      APSLogErrorAt(v4);
      unsigned int v6 = -6735;
    }
    if (v2) {
      CFRelease(v2);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return -6705;
  }
  return v6;
}

uint64_t GvMGlTNs(uint64_t a1, CFTypeRef cf)
{
  uint64_t v4 = *(const void **)(a1 + 344);
  if (cf) {
    CFRetain(cf);
  }
  *(void *)(a1 + 344) = cf;
  if (v4) {
    CFRelease(v4);
  }
  return 0;
}

uint64_t SrtySZG0(uint64_t a1, uint64_t a2, uint64_t a3, void *a4, void *a5, char *a6)
{
  uint64_t v90 = *MEMORY[0x1E4F143B8];
  int v10 = *(_DWORD *)(a1 + 340);
  if (!v10)
  {
    if (*(_DWORD *)(a1 + 16)) {
      int v10 = 111;
    }
    else {
      int v10 = 101;
    }
    *(_DWORD *)(a1 + 340) = v10;
  }
  unsigned int v86 = 0;
  uint64_t v84 = 0;
  unint64_t Length = 0;
  memset(&c, 0, sizeof(c));
  switch(v10)
  {
    case 'e':
      if (a3 || !*(void *)(a1 + 352)) {
        goto LABEL_278;
      }
      CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!Mutable)
      {
        APSLogErrorAt(0);
        int v26 = -6728;
        goto LABEL_71;
      }
      uint64_t v12 = Mutable;
      CFDictionarySetValue(Mutable, @"method", @"pin");
      CFDictionarySetValue(v12, @"user", *(const void **)(a1 + 352));
      uint64_t Bytes = CFPropertyListCreateBytes();
      unsigned int v86 = Bytes;
      if (!Bytes)
      {
        *(_DWORD *)(a1 + 340) = 102;
        int v14 = gLogCategory_AirPlayPairing;
        if (gLogCategory_AirPlayPairing <= 30)
        {
          if (gLogCategory_AirPlayPairing != -1)
          {
LABEL_13:
            if (v14 == -1) {
              _LogCategory_Initialize();
            }
            LogPrintF();
            goto LABEL_160;
          }
          if (_LogCategory_Initialize())
          {
            int v14 = gLogCategory_AirPlayPairing;
            goto LABEL_13;
          }
        }
LABEL_160:
        int v15 = 0;
        goto LABEL_250;
      }
      APSLogErrorAt(Bytes);
      int v15 = 0;
      goto LABEL_252;
    case 'f':
      if (!a3 || !*(void *)(a1 + 344) || !*(void *)(a1 + 352)) {
        goto LABEL_278;
      }
      CFDictionaryGetTypeID();
      int v15 = (const void *)CFCreateWithPlistBytes();
      int v16 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_163;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_20;
      }
      if (_LogCategory_Initialize())
      {
        int v16 = gLogCategory_AirPlayPairing;
LABEL_20:
        if (v16 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
LABEL_163:
      if (*(void *)(a1 + 360))
      {
        SRP_free();
        *(void *)(a1 + 360) = 0;
      }
      SRP6a_client_method();
      uint64_t v49 = SRP_new();
      *(void *)(a1 + 360) = v49;
      if (!v49) {
        goto LABEL_319;
      }
      unsigned int v50 = (void *)CFCopyCString();
      uint64_t v36 = v86;
      if (v86) {
        goto LABEL_329;
      }
      unsigned int v86 = SRP_set_username();
      free(v50);
      uint64_t v51 = v86;
      if (v86) {
        goto LABEL_300;
      }
      CFDataGetTypeID();
      Typedint Value = (const __CFData *)CFDictionaryGetTypedValue();
      unint64_t Length = CFDataGetLength(TypedValue);
      if (Length <= 0xF) {
        goto LABEL_299;
      }
      CFDataGetBytePtr(TypedValue);
      uint64_t v51 = SRP_set_params();
      unsigned int v86 = v51;
      if (v51)
      {
LABEL_300:
        APSLogErrorAt(v51);
        int v81 = -6705;
        goto LABEL_320;
      }
      CFMutableDictionaryRef v53 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!v53) {
        goto LABEL_319;
      }
      uint64_t v12 = v53;
      uint64_t v84 = 0;
      uint64_t v54 = SRP_gen_pub();
      unsigned int v86 = v54;
      if (v54) {
        goto LABEL_326;
      }
      CFDictionarySetData();
      cstr_free();
      CMTime v55 = (void *)CFCopyCString();
      unsigned int v86 = SRP_set_auth_password();
      free(v55);
      uint64_t v56 = v86;
      if (v86) {
        goto LABEL_325;
      }
      CFDataGetTypeID();
      CFDataRef v57 = (const __CFData *)CFDictionaryGetTypedValue();
      if (*(void *)(a1 + 368))
      {
        cstr_free();
        *(void *)(a1 + 368) = 0;
      }
      CFDataGetBytePtr(v57);
      CFDataGetLength(v57);
      uint64_t v58 = SRP_compute_key();
      unsigned int v86 = v58;
      if (v58)
      {
        APSLogErrorAt(v58);
        int v80 = -6737;
        goto LABEL_314;
      }
      uint64_t v84 = 0;
      uint64_t v54 = SRP_respond();
      unsigned int v86 = v54;
      if (v54) {
        goto LABEL_326;
      }
      CFDictionarySetData();
      cstr_free();
      uint64_t v59 = CFPropertyListCreateBytes();
      unsigned int v86 = v59;
      if (v59) {
        goto LABEL_328;
      }
      *(_DWORD *)(a1 + 340) = 104;
      int v60 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_250;
      }
      if (gLogCategory_AirPlayPairing == -1)
      {
        if (!_LogCategory_Initialize()) {
          goto LABEL_250;
        }
        int v60 = gLogCategory_AirPlayPairing;
      }
      if (v60 == -1) {
        goto LABEL_248;
      }
      goto LABEL_249;
    case 'h':
      if (!a3) {
        goto LABEL_278;
      }
      if (!*(void *)(a1 + 360) || !*(void *)(a1 + 368)) {
        goto LABEL_277;
      }
      CFDictionaryGetTypeID();
      int v15 = (const void *)CFCreateWithPlistBytes();
      int v18 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_186;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_36;
      }
      if (_LogCategory_Initialize())
      {
        int v18 = gLogCategory_AirPlayPairing;
LABEL_36:
        if (v18 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
LABEL_186:
      CFDataGetTypeID();
      CFDataRef v61 = (const __CFData *)CFDictionaryGetTypedValue();
      CFDataGetBytePtr(v61);
      CFDataGetLength(v61);
      if (SRP_verify()) {
        goto LABEL_262;
      }
      uint64_t inited = KUY675K4ryxHGzD5GVD(a1, 1, v89, 0);
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      CC_SHA512_Init(&c);
      CC_SHA512_Update(&c, "Pair-Setup-AES-Key", 0x12u);
      CC_SHA512_Update(&c, **(const void ***)(a1 + 368), *(_DWORD *)(*(void *)(a1 + 368) + 8));
      CC_SHA512_Final(md, &c);
      CC_SHA512_Init(&c);
      CC_SHA512_Update(&c, "Pair-Setup-AES-IV", 0x11u);
      CC_SHA512_Update(&c, **(const void ***)(a1 + 368), *(_DWORD *)(*(void *)(a1 + 368) + 8));
      CC_SHA512_Final(v87, &c);
      if (*(unsigned char *)(a1 + 424))
      {
        AES_GCM_Final();
        *(unsigned char *)(a1 + 424) = 0;
      }
      if (*(unsigned char *)(a1 + 425))
      {
        AES_GCM_Final();
        *(unsigned char *)(a1 + 425) = 0;
      }
      uint64_t inited = AES_GCM_InitEx();
      unsigned int v86 = inited;
      if (inited || (inited = AES_GCM_InitEx(), (unsigned int v86 = inited) != 0))
      {
        char v62 = 0;
      }
      else
      {
        *(_OWORD *)(a1 + 427) = *(_OWORD *)v87;
        char v62 = 1;
      }
      for (uint64_t i = 0; i != 64; md[i++] = 0)
        ;
      for (uint64_t j = 0; j != 64; v87[j++] = 0)
        ;
      if ((v62 & 1) == 0) {
        goto LABEL_330;
      }
      uint64_t v65 = 0;
      *(_WORD *)(a1 + 424) = 257;
      uint64_t v66 = a1 + 442;
      do
      {
        if (v65 == -16) {
          break;
        }
        __int16 v67 = (*(unsigned char *)(v66 + v65--))++ + 1;
      }
      while ((v67 & 0x100) != 0);
      uint64_t inited = AES_GCM_InitMessage();
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      uint64_t inited = AES_GCM_Encrypt();
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      uint64_t inited = AES_GCM_FinalizeMessage();
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      CFMutableDictionaryRef v68 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (!v68) {
        goto LABEL_309;
      }
      uint64_t v12 = v68;
      CFDictionarySetData();
      CFDictionarySetData();
      uint64_t v32 = CFPropertyListCreateBytes();
      unsigned int v86 = v32;
      if (v32) {
        goto LABEL_315;
      }
      *(_DWORD *)(a1 + 340) = 106;
      int v69 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_213;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_210;
      }
      if (!_LogCategory_Initialize()) {
        goto LABEL_213;
      }
      int v69 = gLogCategory_AirPlayPairing;
LABEL_210:
      if (v69 == -1) {
        _LogCategory_Initialize();
      }
      goto LABEL_249;
    case 'j':
      if (!a3) {
        goto LABEL_278;
      }
      if (!*(unsigned char *)(a1 + 425))
      {
LABEL_277:
        APSLogErrorAt(0);
        int v26 = -6745;
        goto LABEL_71;
      }
      CFDictionaryGetTypeID();
      int v15 = (const void *)CFCreateWithPlistBytes();
      int v19 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_103;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_42;
      }
      if (_LogCategory_Initialize())
      {
        int v19 = gLogCategory_AirPlayPairing;
LABEL_42:
        if (v19 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
LABEL_103:
      uint64_t v34 = 442;
      do
      {
        if (v34 == 426) {
          break;
        }
        __int16 v35 = (*(unsigned char *)(a1 + v34--))++ + 1;
      }
      while ((v35 & 0x100) != 0);
      uint64_t v36 = AES_GCM_InitMessage();
      unsigned int v86 = v36;
      if (v36) {
        goto LABEL_329;
      }
      CFDictionaryGetData();
      uint64_t v36 = AES_GCM_Decrypt();
      unsigned int v86 = v36;
      if (v36) {
        goto LABEL_329;
      }
      CFDictionaryGetData();
      if (Length != 16)
      {
LABEL_299:
        APSLogErrorAt(0);
        int v81 = -6743;
        goto LABEL_320;
      }
      unsigned int v86 = AES_GCM_VerifyMessage();
      if (v86) {
        goto LABEL_253;
      }
      if (!*(unsigned char *)(a1 + 426) && (uint64_t v36 = i9kF3TCOFmU(a1, (uint64_t)v89, 0), (v86 = v36) != 0))
      {
LABEL_329:
        APSLogErrorAt(v36);
      }
      else
      {
        long long v37 = v89[1];
        *(_OWORD *)(a1 + 220) = v89[0];
        *(_OWORD *)(a1 + 236) = v37;
        *(_DWORD *)(a1 + 340) = 107;
        *a4 = 0;
        *a5 = 0;
        if (gLogCategory_AirPlayPairing <= 30
          && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        *a6 = 1;
        unsigned int v86 = 0;
      }
      goto LABEL_253;
    case 'o':
      if (!a3 || !*(void *)(a1 + 344)) {
        goto LABEL_278;
      }
      pthread_mutex_lock(&keNhHD7HkAhiLlu6y);
      uint64_t v20 = mach_absolute_time();
      uint64_t v21 = h2UmgtdqR3Ht;
      if (!h2UmgtdqR3Ht)
      {
        h2UmgtdqR3Ht = v20;
        uint64_t v21 = v20;
      }
      if (R7q7ABg4QtpjFZAFcR <= 9)
      {
        ++R7q7ABg4QtpjFZAFcR;
        goto LABEL_65;
      }
      unsigned int v23 = 2 * RAQKrwbyvjlDG1nD;
      if ((2 * RAQKrwbyvjlDG1nD) >= 0x2A30) {
        unsigned int v23 = 10800;
      }
      if (RAQKrwbyvjlDG1nD) {
        uint64_t v24 = v23;
      }
      else {
        uint64_t v24 = 1;
      }
      RAQKrwbyvjlDG1nD = v24;
      if (v21 + UpTicksPerSecond() * v24 <= v20)
      {
LABEL_65:
        pthread_mutex_unlock(&keNhHD7HkAhiLlu6y);
        CFDictionaryGetTypeID();
        int v15 = (const void *)CFCreateWithPlistBytes();
        int v25 = gLogCategory_AirPlayPairing;
        if (gLogCategory_AirPlayPairing > 30) {
          goto LABEL_230;
        }
        if (gLogCategory_AirPlayPairing == -1)
        {
          if (!_LogCategory_Initialize()) {
            goto LABEL_230;
          }
          int v25 = gLogCategory_AirPlayPairing;
        }
        if (v25 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
LABEL_230:
        CFStringGetTypeID();
        uint64_t v71 = (const void *)CFDictionaryGetTypedValue();
        uint64_t v72 = CFEqual(v71, @"pin");
        if (v72)
        {
          CFMutableDictionaryRef v73 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
          if (v73)
          {
            uint64_t v12 = v73;
            if (*(void *)(a1 + 360))
            {
              SRP_free();
              *(void *)(a1 + 360) = 0;
            }
            SRP6a_server_method();
            uint64_t v74 = SRP_new();
            *(void *)(a1 + 360) = v74;
            if (v74)
            {
              CFStringRef v75 = (void *)CFDictionaryCopyCString();
              uint64_t v59 = v86;
              if (v86) {
                goto LABEL_328;
              }
              unsigned int v86 = SRP_set_username();
              free(v75);
              uint64_t v56 = v86;
              if (v86) {
                goto LABEL_325;
              }
              uint64_t v59 = RandomBytes();
              unsigned int v86 = v59;
              if (v59) {
                goto LABEL_328;
              }
              CFDictionarySetData();
              uint64_t v56 = SRP_set_params();
              unsigned int v86 = v56;
              if (v56
                || (v76 = (void *)CFCopyCString(), v86 = SRP_set_auth_password(), free(v76), (uint64_t v56 = v86) != 0))
              {
LABEL_325:
                APSLogErrorAt(v56);
                int v82 = -6705;
              }
              else
              {
                uint64_t v84 = 0;
                uint64_t v54 = SRP_gen_pub();
                unsigned int v86 = v54;
                if (!v54)
                {
                  CFDictionarySetData();
                  cstr_free();
                  uint64_t v59 = CFPropertyListCreateBytes();
                  unsigned int v86 = v59;
                  if (!v59)
                  {
                    *(_DWORD *)(a1 + 340) = 113;
                    int v77 = gLogCategory_AirPlayPairing;
                    if (gLogCategory_AirPlayPairing > 30) {
                      goto LABEL_250;
                    }
                    if (gLogCategory_AirPlayPairing == -1)
                    {
                      if (!_LogCategory_Initialize()) {
                        goto LABEL_250;
                      }
                      int v77 = gLogCategory_AirPlayPairing;
                    }
                    if (v77 == -1) {
                      goto LABEL_248;
                    }
                    goto LABEL_249;
                  }
LABEL_328:
                  APSLogErrorAt(v59);
                  goto LABEL_252;
                }
LABEL_326:
                APSLogErrorAt(v54);
                int v82 = -6700;
              }
            }
            else
            {
              APSLogErrorAt(0);
              int v82 = -6728;
            }
            unsigned int v86 = v82;
            goto LABEL_252;
          }
LABEL_319:
          APSLogErrorAt(0);
          int v81 = -6728;
        }
        else
        {
          APSLogErrorAt(v72);
          int v81 = -6735;
        }
LABEL_320:
        unsigned int v86 = v81;
        goto LABEL_253;
      }
      pthread_mutex_unlock(&keNhHD7HkAhiLlu6y);
      if (gLogCategory_AirPlayPairing <= 50
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        UpTicksPerSecond();
        LogPrintF();
      }
      int v26 = -6760;
      goto LABEL_71;
    case 'q':
      if (!a3 || !*(void *)(a1 + 360)) {
        goto LABEL_278;
      }
      CFDictionaryGetTypeID();
      int v15 = (const void *)CFCreateWithPlistBytes();
      int v17 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_88;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_29;
      }
      if (_LogCategory_Initialize())
      {
        int v17 = gLogCategory_AirPlayPairing;
LABEL_29:
        if (v17 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
LABEL_88:
      CFDataGetTypeID();
      CFDataRef v27 = (const __CFData *)CFDictionaryGetTypedValue();
      if (*(void *)(a1 + 368))
      {
        cstr_free();
        *(void *)(a1 + 368) = 0;
      }
      CFDataGetBytePtr(v27);
      CFDataGetLength(v27);
      uint64_t v28 = SRP_compute_key();
      unsigned int v86 = v28;
      if (v28)
      {
        APSLogErrorAt(v28);
        int v79 = -6737;
      }
      else
      {
        CFDataGetTypeID();
        CFDataRef v29 = (const __CFData *)CFDictionaryGetTypedValue();
        CFDataGetBytePtr(v29);
        CFDataGetLength(v29);
        unsigned int v86 = SRP_verify();
        if (!v86)
        {
          CFMutableDictionaryRef v30 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
          if (!v30) {
            goto LABEL_309;
          }
          uint64_t v12 = v30;
          uint64_t v84 = 0;
          uint64_t v31 = SRP_respond();
          unsigned int v86 = v31;
          if (v31)
          {
            APSLogErrorAt(v31);
            int v80 = -6700;
LABEL_314:
            unsigned int v86 = v80;
            goto LABEL_252;
          }
          CFDictionarySetData();
          cstr_free();
          uint64_t v32 = CFPropertyListCreateBytes();
          unsigned int v86 = v32;
          if (v32) {
            goto LABEL_315;
          }
          *(_DWORD *)(a1 + 340) = 115;
          int v33 = gLogCategory_AirPlayPairing;
          if (gLogCategory_AirPlayPairing <= 30)
          {
            if (gLogCategory_AirPlayPairing != -1) {
              goto LABEL_97;
            }
            if (_LogCategory_Initialize())
            {
              int v33 = gLogCategory_AirPlayPairing;
LABEL_97:
              if (v33 == -1) {
LABEL_248:
              }
                _LogCategory_Initialize();
LABEL_249:
              LogPrintF();
LABEL_250:
              char v70 = 0;
              goto LABEL_251;
            }
          }
LABEL_213:
          char v70 = 0;
          goto LABEL_251;
        }
LABEL_262:
        int v79 = -6754;
      }
      goto LABEL_310;
    case 's':
      if (!a3 || !*(void *)(a1 + 368))
      {
LABEL_278:
        APSLogErrorAt(0);
        int v26 = -6705;
LABEL_71:
        unsigned int v86 = v26;
        goto LABEL_256;
      }
      CFDictionaryGetTypeID();
      int v15 = (const void *)CFCreateWithPlistBytes();
      int v22 = gLogCategory_AirPlayPairing;
      if (gLogCategory_AirPlayPairing > 30) {
        goto LABEL_119;
      }
      if (gLogCategory_AirPlayPairing != -1) {
        goto LABEL_54;
      }
      if (_LogCategory_Initialize())
      {
        int v22 = gLogCategory_AirPlayPairing;
LABEL_54:
        if (v22 == -1) {
          _LogCategory_Initialize();
        }
        LogPrintF();
      }
LABEL_119:
      CC_SHA512_Init(&c);
      CC_SHA512_Update(&c, "Pair-Setup-AES-Key", 0x12u);
      CC_SHA512_Update(&c, **(const void ***)(a1 + 368), *(_DWORD *)(*(void *)(a1 + 368) + 8));
      CC_SHA512_Final(md, &c);
      CC_SHA512_Init(&c);
      CC_SHA512_Update(&c, "Pair-Setup-AES-IV", 0x11u);
      CC_SHA512_Update(&c, **(const void ***)(a1 + 368), *(_DWORD *)(*(void *)(a1 + 368) + 8));
      CC_SHA512_Final(v87, &c);
      if (*(unsigned char *)(a1 + 424))
      {
        AES_GCM_Final();
        *(unsigned char *)(a1 + 424) = 0;
      }
      if (*(unsigned char *)(a1 + 425))
      {
        AES_GCM_Final();
        *(unsigned char *)(a1 + 425) = 0;
      }
      uint64_t inited = AES_GCM_InitEx();
      unsigned int v86 = inited;
      if (inited || (inited = AES_GCM_InitEx(), (unsigned int v86 = inited) != 0))
      {
        char v39 = 0;
      }
      else
      {
        *(_OWORD *)(a1 + 427) = *(_OWORD *)v87;
        char v39 = 1;
      }
      for (uint64_t k = 0; k != 64; ++k)
        md[k] = 0;
      for (uint64_t m = 0; m != 64; ++m)
        v87[m] = 0;
      if ((v39 & 1) == 0) {
        goto LABEL_330;
      }
      *(_WORD *)(a1 + 424) = 257;
      uint64_t v42 = 442;
      do
      {
        if (v42 == 426) {
          break;
        }
        __int16 v43 = (*(unsigned char *)(a1 + v42--))++ + 1;
      }
      while ((v43 & 0x100) != 0);
      uint64_t inited = AES_GCM_InitMessage();
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      CFDictionaryGetData();
      uint64_t inited = v86;
      if (v86) {
        goto LABEL_330;
      }
      uint64_t inited = AES_GCM_Decrypt();
      unsigned int v86 = inited;
      if (inited) {
        goto LABEL_330;
      }
      CFDictionaryGetData();
      uint64_t inited = v86;
      if (v86) {
        goto LABEL_330;
      }
      if (Length != 16)
      {
        APSLogErrorAt(0);
        int v79 = -6743;
LABEL_310:
        unsigned int v86 = v79;
        goto LABEL_253;
      }
      unsigned int v86 = AES_GCM_VerifyMessage();
      if (v86) {
        goto LABEL_253;
      }
      if (*(unsigned char *)(a1 + 426) || (inited = i9kF3TCOFmU(a1, (uint64_t)v89, 0), (unsigned int v86 = inited) == 0))
      {
        uint64_t inited = KUY675K4ryxHGzD5GVD(a1, 1, v89, 0);
        unsigned int v86 = inited;
        if (!inited)
        {
          uint64_t v44 = 0;
          uint64_t v45 = a1 + 442;
          do
          {
            if (v44 == -16) {
              break;
            }
            __int16 v46 = (*(unsigned char *)(v45 + v44--))++ + 1;
          }
          while ((v46 & 0x100) != 0);
          uint64_t inited = AES_GCM_InitMessage();
          unsigned int v86 = inited;
          if (!inited)
          {
            uint64_t inited = AES_GCM_Encrypt();
            unsigned int v86 = inited;
            if (!inited)
            {
              uint64_t inited = AES_GCM_FinalizeMessage();
              unsigned int v86 = inited;
              if (!inited)
              {
                CFMutableDictionaryRef v47 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
                if (v47)
                {
                  uint64_t v12 = v47;
                  CFDictionarySetData();
                  CFDictionarySetData();
                  uint64_t v32 = CFPropertyListCreateBytes();
                  unsigned int v86 = v32;
                  if (v32)
                  {
LABEL_315:
                    APSLogErrorAt(v32);
                    goto LABEL_252;
                  }
                  *(_DWORD *)(a1 + 340) = 117;
                  pthread_mutex_lock(&keNhHD7HkAhiLlu6y);
                  R7q7ABg4QtpjFZAFcR = 0;
                  RAQKrwbyvjlDG1nD = 0;
                  h2UmgtdqR3Ht = 0;
                  pthread_mutex_unlock(&keNhHD7HkAhiLlu6y);
                  int v48 = gLogCategory_AirPlayPairing;
                  if (gLogCategory_AirPlayPairing > 30) {
                    goto LABEL_222;
                  }
                  if (gLogCategory_AirPlayPairing == -1)
                  {
                    if (!_LogCategory_Initialize()) {
                      goto LABEL_219;
                    }
                    int v48 = gLogCategory_AirPlayPairing;
                  }
                  if (v48 == -1) {
                    _LogCategory_Initialize();
                  }
                  LogPrintF();
LABEL_219:
                  if (gLogCategory_AirPlayPairing <= 30)
                  {
                    if (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()) {
                      LogPrintF();
                    }
                    char v70 = 1;
LABEL_251:
                    *a6 = v70;
                    unsigned int v86 = 0;
LABEL_252:
                    CFRelease(v12);
                    goto LABEL_253;
                  }
LABEL_222:
                  char v70 = 1;
                  goto LABEL_251;
                }
LABEL_309:
                APSLogErrorAt(0);
                int v79 = -6728;
                goto LABEL_310;
              }
            }
          }
        }
      }
LABEL_330:
      APSLogErrorAt(inited);
LABEL_253:
      if (v15) {
        CFRelease(v15);
      }
      if (!v86) {
        return 0;
      }
LABEL_256:
      if (gLogCategory_AirPlayPairing <= 60
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      NhB9kxUGdXXE(a1);
      return v86;
    default:
      if (gLogCategory_AirPlayPairing <= 60
        && (gLogCategory_AirPlayPairing != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      int v26 = -6709;
      goto LABEL_71;
  }
}

uint64_t G30ooIXBM()
{
  return KeychainDeleteFormatted();
}

CFMutableArrayRef Fqbh1vZGfV6J(uint64_t a1, int *a2)
{
  dispatch_semaphore_wait((dispatch_semaphore_t)tHHVsHfAtS9mW, 0xFFFFFFFFFFFFFFFFLL);
  CFArrayRef v3 = (const __CFArray *)KeychainCopyMatchingFormatted();
  dispatch_semaphore_signal((dispatch_semaphore_t)tHHVsHfAtS9mW);
  CFMutableArrayRef Mutable = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  if (Mutable)
  {
    if (v3 && (CFIndex Count = CFArrayGetCount(v3), Count >= 1))
    {
      CFIndex v6 = Count;
      CFIndex v7 = 0;
      long long v8 = (const CFDictionaryKeyCallBacks *)MEMORY[0x1E4F1D530];
      uint64_t v9 = (const CFDictionaryValueCallBacks *)MEMORY[0x1E4F1D540];
      while (1)
      {
        CFArrayGetValueAtIndex(v3, v7);
        CFMutableDictionaryRef v10 = CFDictionaryCreateMutable(0, 0, v8, v9);
        if (!v10) {
          break;
        }
        CFMutableDictionaryRef v11 = v10;
        CFDictionaryGetData();
        CFRelease(v11);
        if (v6 == ++v7) {
          goto LABEL_7;
        }
      }
      APSLogErrorAt(0);
      int v13 = -6728;
      CFRelease(Mutable);
      CFMutableArrayRef Mutable = 0;
    }
    else
    {
LABEL_7:
      int v13 = 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
    int v13 = -6728;
  }
  if (v3) {
    CFRelease(v3);
  }
  if (a2) {
    *a2 = v13;
  }
  return Mutable;
}

uint64_t PHDcW8(uint64_t a1, uint64_t a2)
{
  uint64_t v15 = *MEMORY[0x1E4F143B8];
  int v12 = 0;
  v14[0] = 0;
  if (a2) {
    DataToHexCStringEx();
  }
  CFArrayRef v3 = (const __CFArray *)KeychainCopyMatchingFormatted();
  if (v3)
  {
    CFArrayRef v4 = v3;
    CFIndex Count = CFArrayGetCount(v3);
    if (Count >= 1)
    {
      CFIndex v6 = Count;
      uint64_t v7 = 0;
      long long v8 = (const void *)*MEMORY[0x1E4F3BD40];
      do
      {
        CFDictionaryGetTypeID();
        TypedCFStringRef ValueAtIndex = CFArrayGetTypedValueAtIndex();
        if (TypedValueAtIndex)
        {
          CFDictionaryRef v10 = (const __CFDictionary *)TypedValueAtIndex;
          if (*(_DWORD *)(a1 + 48) == CFDictionaryGetInt64())
          {
            if (!v14[0] || (CFDictionaryGetCString(), !v12) && !strcasecmp(v13, v14))
            {
              if (CFDictionaryGetValue(v10, v8)) {
                int v12 = KeychainDeleteFormatted();
              }
            }
          }
        }
        ++v7;
      }
      while (v6 != v7);
    }
    CFRelease(v4);
  }
  return 0;
}

uint64_t APAudioFormatIndexToASBD(uint64_t a1, uint64_t a2)
{
  if (a2)
  {
    switch(a1)
    {
      case 2:
        uint64_t result = 0;
        uint64_t v6 = 0x40BF400000000000;
        goto LABEL_24;
      case 3:
        uint64_t result = 0;
        uint64_t v7 = 0x40BF400000000000;
        goto LABEL_26;
      case 4:
        uint64_t result = 0;
        uint64_t v6 = 0x40CF400000000000;
        goto LABEL_24;
      case 5:
        uint64_t result = 0;
        uint64_t v7 = 0x40CF400000000000;
        goto LABEL_26;
      case 6:
        uint64_t result = 0;
        uint64_t v6 = 0x40D7700000000000;
        goto LABEL_24;
      case 7:
        uint64_t result = 0;
        uint64_t v7 = 0x40D7700000000000;
        goto LABEL_26;
      case 8:
        uint64_t result = 0;
        uint64_t v6 = 0x40DF400000000000;
        goto LABEL_24;
      case 9:
        uint64_t result = 0;
        uint64_t v7 = 0x40DF400000000000;
        goto LABEL_26;
      case 10:
        uint64_t result = 0;
        uint64_t v6 = 0x40E5888000000000;
        goto LABEL_24;
      case 11:
        uint64_t result = 0;
        uint64_t v7 = 0x40E5888000000000;
        goto LABEL_26;
      case 12:
        uint64_t result = 0;
        uint64_t v8 = 0x40E5888000000000;
        goto LABEL_28;
      case 13:
        uint64_t result = 0;
        uint64_t v9 = 0x40E5888000000000;
        goto LABEL_30;
      case 14:
        uint64_t result = 0;
        uint64_t v6 = 0x40E7700000000000;
LABEL_24:
        *(void *)a2 = v6;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F0B0;
        long long v4 = xmmword_1D0C1F0C0;
        goto LABEL_108;
      case 15:
        uint64_t result = 0;
        uint64_t v7 = 0x40E7700000000000;
LABEL_26:
        *(void *)a2 = v7;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F090;
        long long v4 = xmmword_1D0C1F0A0;
        goto LABEL_108;
      case 16:
        uint64_t result = 0;
        uint64_t v8 = 0x40E7700000000000;
LABEL_28:
        *(void *)a2 = v8;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F070;
        long long v4 = xmmword_1D0C1F080;
        goto LABEL_108;
      case 17:
        uint64_t result = 0;
        uint64_t v9 = 0x40E7700000000000;
LABEL_30:
        *(void *)a2 = v9;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F050;
        long long v4 = xmmword_1D0C1F060;
        goto LABEL_108;
      case 18:
        uint64_t result = 0;
        uint64_t v10 = 0x40E5888000000000;
        goto LABEL_34;
      case 19:
        uint64_t result = 0;
        uint64_t v11 = 0x40E5888000000000;
        goto LABEL_36;
      case 20:
        uint64_t result = 0;
        uint64_t v10 = 0x40E7700000000000;
LABEL_34:
        *(void *)a2 = v10;
        long long v12 = xmmword_1D0C1EF10;
        goto LABEL_105;
      case 21:
        uint64_t result = 0;
        uint64_t v11 = 0x40E7700000000000;
LABEL_36:
        *(void *)a2 = v11;
        long long v12 = xmmword_1D0C1EEF0;
        goto LABEL_105;
      case 22:
        uint64_t result = 0;
        uint64_t v13 = 0x40E5888000000000;
        goto LABEL_39;
      case 23:
        uint64_t result = 0;
        uint64_t v13 = 0x40E7700000000000;
LABEL_39:
        *(void *)a2 = v13;
        long long v12 = xmmword_1D0C1EEE0;
        goto LABEL_105;
      case 24:
        uint64_t result = 0;
        uint64_t v14 = 0x40E5888000000000;
        goto LABEL_42;
      case 25:
        uint64_t result = 0;
        uint64_t v14 = 0x40E7700000000000;
LABEL_42:
        *(void *)a2 = v14;
        long long v12 = xmmword_1D0C1EED0;
        goto LABEL_105;
      case 26:
        uint64_t result = 0;
        uint64_t v15 = 0x40CF400000000000;
        goto LABEL_60;
      case 27:
        uint64_t result = 0;
        uint64_t v15 = 0x40D7700000000000;
        goto LABEL_60;
      case 28:
        uint64_t result = 0;
        *(void *)a2 = 0x40CF400000000000;
        long long v16 = xmmword_1D0C1EEC0;
        goto LABEL_61;
      case 29:
        uint64_t result = 0;
        *(void *)a2 = 0x40D7700000000000;
        long long v16 = xmmword_1D0C1EEB0;
        goto LABEL_61;
      case 30:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v16 = xmmword_1D0C1EE90;
        goto LABEL_61;
      case 31:
        uint64_t result = 0;
        uint64_t v15 = 0x40E5888000000000;
        goto LABEL_60;
      case 32:
        uint64_t result = 0;
        uint64_t v15 = 0x40E7700000000000;
        goto LABEL_60;
      case 33:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EE20;
        goto LABEL_103;
      case 34:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v17 = xmmword_1D0C1EE20;
        goto LABEL_84;
      case 35:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v18 = xmmword_1D0C1EE20;
        goto LABEL_71;
      case 38:
      case 78:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F010;
        long long v4 = xmmword_1D0C1F020;
        goto LABEL_108;
      case 39:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EEE0;
        goto LABEL_107;
      case 40:
      case 90:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EEE0;
        goto LABEL_103;
      case 41:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EED0;
        goto LABEL_107;
      case 42:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EED0;
        goto LABEL_103;
      case 43:
        uint64_t result = 0;
        uint64_t v15 = 0x40DF400000000000;
LABEL_60:
        *(void *)a2 = v15;
        long long v16 = xmmword_1D0C1EED0;
LABEL_61:
        *(_OWORD *)(a2 + 8) = v16;
        long long v4 = xmmword_1D0C1EEA0;
        goto LABEL_108;
      case 44:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1F030;
        long long v4 = xmmword_1D0C1F040;
        goto LABEL_108;
      case 45:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1EFD0;
        long long v4 = xmmword_1D0C1EFE0;
        goto LABEL_108;
      case 46:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1EFB0;
        long long v4 = xmmword_1D0C1EFC0;
        goto LABEL_108;
      case 47:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1EF90;
        long long v4 = xmmword_1D0C1EFA0;
        goto LABEL_108;
      case 48:
      case 79:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1EF70;
        long long v4 = xmmword_1D0C1EF80;
        goto LABEL_108;
      case 49:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v12 = xmmword_1D0C1EF20;
        goto LABEL_105;
      case 50:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EF20;
        goto LABEL_107;
      case 51:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EF20;
        goto LABEL_103;
      case 52:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v17 = xmmword_1D0C1EF20;
        goto LABEL_84;
      case 53:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v18 = xmmword_1D0C1EF20;
LABEL_71:
        *(_OWORD *)(a2 + 8) = v18;
        long long v4 = xmmword_1D0C1EE30;
        goto LABEL_108;
      case 54:
        uint64_t result = 0;
        uint64_t v20 = 0x40E7700000000000;
        goto LABEL_87;
      case 55:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EE50;
        goto LABEL_107;
      case 56:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EE50;
        goto LABEL_103;
      case 57:
        uint64_t result = 0;
        uint64_t v21 = 0x40E7700000000000;
        goto LABEL_89;
      case 58:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EE40;
        goto LABEL_107;
      case 60:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EE40;
        goto LABEL_103;
      case 61:
        uint64_t result = 0;
        uint64_t v22 = 0x40E7700000000000;
        goto LABEL_92;
      case 62:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v12 = xmmword_1D0C1EE20;
        goto LABEL_105;
      case 63:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EE20;
        goto LABEL_107;
      case 64:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v12 = xmmword_1D0C1EDA0;
        goto LABEL_105;
      case 65:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EDA0;
        goto LABEL_107;
      case 66:
      case 67:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EDA0;
        goto LABEL_103;
      case 68:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v17 = xmmword_1D0C1EDA0;
LABEL_84:
        *(_OWORD *)(a2 + 8) = v17;
        long long v4 = xmmword_1D0C1EDB0;
        goto LABEL_108;
      case 69:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v23 = xmmword_1D0C1EF30;
        goto LABEL_97;
      case 70:
        uint64_t result = 0;
        uint64_t v20 = 0x40E5888000000000;
LABEL_87:
        *(void *)a2 = v20;
        long long v12 = xmmword_1D0C1EE50;
        goto LABEL_105;
      case 71:
        uint64_t result = 0;
        uint64_t v21 = 0x40E5888000000000;
LABEL_89:
        *(void *)a2 = v21;
        long long v12 = xmmword_1D0C1EE40;
        goto LABEL_105;
      case 72:
        uint64_t result = 0;
        *(void *)a2 = 0x40E5888000000000;
        long long v12 = xmmword_1D0C1EE80;
        goto LABEL_105;
      case 73:
        uint64_t result = 0;
        uint64_t v22 = 0x40E5888000000000;
LABEL_92:
        *(void *)a2 = v22;
        long long v12 = xmmword_1D0C1EE60;
        goto LABEL_105;
      case 74:
        uint64_t result = 0;
        uint64_t v24 = 0x40E5888000000000;
        goto LABEL_95;
      case 75:
        uint64_t result = 0;
        uint64_t v24 = 0x40E7700000000000;
LABEL_95:
        *(void *)a2 = v24;
        long long v12 = xmmword_1D0C1ED80;
        goto LABEL_105;
      case 76:
      case 77:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        *(_OWORD *)(a2 + 8) = xmmword_1D0C1EDA0;
        long long v4 = xmmword_1D0C1EDC0;
        goto LABEL_108;
      case 80:
      case 82:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v5 = xmmword_1D0C1F000;
        goto LABEL_9;
      case 81:
      case 83:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v5 = xmmword_1D0C1EF50;
LABEL_9:
        *(_OWORD *)(a2 + 8) = v5;
        long long v4 = xmmword_1D0C1EF60;
        goto LABEL_108;
      case 84:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v23 = xmmword_1D0C1EFF0;
LABEL_97:
        *(_OWORD *)(a2 + 8) = v23;
        long long v4 = xmmword_1D0C1EF40;
        goto LABEL_108;
      case 85:
        uint64_t result = 0;
        uint64_t v25 = 0x40E5888000000000;
        goto LABEL_100;
      case 86:
        uint64_t result = 0;
        uint64_t v25 = 0x40E7700000000000;
LABEL_100:
        *(void *)a2 = v25;
        long long v12 = xmmword_1D0C1EF00;
        goto LABEL_105;
      case 87:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EE10;
        goto LABEL_107;
      case 88:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v3 = xmmword_1D0C1EE00;
LABEL_103:
        *(_OWORD *)(a2 + 8) = v3;
        long long v4 = xmmword_1D0C1EDD0;
        goto LABEL_108;
      case 89:
        uint64_t result = 0;
        *(void *)a2 = 0x40E5888000000000;
        long long v12 = xmmword_1D0C1EE70;
LABEL_105:
        *(_OWORD *)(a2 + 8) = v12;
        long long v4 = xmmword_1D0C1ED90;
        goto LABEL_108;
      case 91:
        uint64_t result = 0;
        *(void *)a2 = 0x40E7700000000000;
        long long v19 = xmmword_1D0C1EDF0;
LABEL_107:
        *(_OWORD *)(a2 + 8) = v19;
        long long v4 = xmmword_1D0C1EDE0;
LABEL_108:
        *(_OWORD *)(a2 + 24) = v4;
        break;
      default:
        if (gLogCategory_APAudioFormat <= 90
          && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t result = 4294960561;
        break;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

uint64_t APAudioFormatIndexGetBitsPerChannel(uint64_t a1)
{
  uint64_t v1 = 16;
  switch(a1)
  {
    case 18:
    case 20:
    case 22:
    case 23:
    case 24:
    case 25:
    case 26:
    case 27:
    case 28:
    case 29:
    case 30:
    case 31:
    case 32:
    case 33:
    case 34:
    case 35:
    case 39:
    case 40:
    case 41:
    case 42:
    case 43:
    case 49:
    case 50:
    case 51:
    case 52:
    case 54:
    case 55:
    case 56:
    case 57:
    case 58:
    case 60:
    case 62:
    case 63:
    case 64:
    case 65:
    case 66:
    case 67:
    case 68:
    case 70:
    case 71:
    case 72:
    case 74:
    case 75:
    case 76:
    case 77:
    case 87:
    case 88:
    case 89:
    case 90:
    case 91:
      return v1;
    default:
      if (((1 << (a1 - 19)) & 0x40040000000005) != 0) {
        int v3 = 24;
      }
      else {
        int v3 = 0;
      }
      if ((unint64_t)(a1 - 19) <= 0x36) {
        unsigned int v4 = v3;
      }
      else {
        unsigned int v4 = 0;
      }
      if ((unint64_t)(a1 - 85) >= 2) {
        uint64_t v1 = v4;
      }
      else {
        uint64_t v1 = 20;
      }
      break;
  }
  return v1;
}

uint64_t APAudioFormatIndexToChannelLayoutTag(uint64_t a1, int *a2)
{
  if (a2)
  {
    uint64_t v2 = a1 - 2;
    if ((unint64_t)(a1 - 2) > 0x59)
    {
      int v4 = -65536;
      uint64_t result = 4294960561;
    }
    else
    {
      uint64_t result = dword_1D0C1F414[v2];
      int v4 = dword_1D0C1F57C[v2];
    }
    *a2 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

uint64_t ASBDToAPAudioFormatIndex(uint64_t a1, int a2, uint64_t *a3)
{
  if (!a1 || !a3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  int v5 = *(_DWORD *)(a1 + 8);
  if (v5 > 1869641074)
  {
    if (v5 <= 1902207855)
    {
      if (v5 <= 1902207330)
      {
        if (v5 == 1869641075)
        {
          if (*(_DWORD *)(a1 + 28) == 1)
          {
            int v20 = (int)*(double *)a1;
            switch(v20)
            {
              case 16000:
                uint64_t v6 = 28;
                goto LABEL_175;
              case 48000:
                uint64_t v6 = 30;
                goto LABEL_175;
              case 24000:
                uint64_t v6 = 29;
                goto LABEL_175;
            }
          }
          return 4294960561;
        }
        if (v5 == 1885430115)
        {
          if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
          {
            uint64_t v6 = 89;
            goto LABEL_175;
          }
          return 4294960561;
        }
      }
      else
      {
        switch(v5)
        {
          case 1902207331:
            if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
            {
              uint64_t v6 = 70;
              goto LABEL_175;
            }
            if (*(double *)a1 == 48000.0)
            {
              int v24 = *(_DWORD *)(a1 + 28);
              switch(v24)
              {
                case 2:
                  uint64_t v6 = 54;
                  goto LABEL_175;
                case 8:
                  uint64_t v6 = 56;
                  goto LABEL_175;
                case 6:
                  uint64_t v6 = 55;
                  goto LABEL_175;
              }
            }
            return 4294960561;
          case 1902207795:
            if (*(double *)a1 == 48000.0 && *(_DWORD *)(a1 + 28) == 6)
            {
              uint64_t v6 = 87;
              goto LABEL_175;
            }
            return 4294960561;
          case 1902207848:
            if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
            {
              uint64_t v6 = 71;
LABEL_175:
              uint64_t result = 0;
              *a3 = v6;
              return result;
            }
            if (*(double *)a1 == 48000.0)
            {
              int v23 = *(_DWORD *)(a1 + 28);
              switch(v23)
              {
                case 2:
                  uint64_t v6 = 57;
                  goto LABEL_175;
                case 8:
                  uint64_t v6 = 60;
                  goto LABEL_175;
                case 6:
                  uint64_t v6 = 58;
                  goto LABEL_175;
              }
            }
            return 4294960561;
        }
      }
LABEL_96:
      if (gLogCategory_APAudioFormat <= 50
        && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      return 4294960561;
    }
    if (v5 > 1902324530)
    {
      if (v5 != 1902324531)
      {
        if (v5 == 1902469939)
        {
          if (*(double *)a1 == 48000.0 && *(_DWORD *)(a1 + 28) == 8)
          {
            uint64_t v6 = 88;
            goto LABEL_175;
          }
          return 4294960561;
        }
        if (v5 == 1902928227)
        {
          if (*(_DWORD *)(a1 + 12) == 3 && *(_DWORD *)(a1 + 28) == 2)
          {
            if (*(double *)a1 == 44100.0)
            {
              uint64_t v6 = 73;
              goto LABEL_175;
            }
            if (*(double *)a1 == 48000.0)
            {
              uint64_t v6 = 61;
              goto LABEL_175;
            }
          }
          return 4294960561;
        }
        goto LABEL_96;
      }
      if (*(double *)a1 != 48000.0) {
        return 4294960561;
      }
      HIDWORD(v18) = *(_DWORD *)(a1 + 28);
      LODWORD(v18) = HIDWORD(v18) - 2;
      unsigned int v15 = v18 >> 1;
      if (v15 >= 8 || ((0xADu >> v15) & 1) == 0) {
        return 4294960561;
      }
      long long v17 = &unk_1D0C1F758;
LABEL_74:
      uint64_t v6 = v17[v15];
      goto LABEL_175;
    }
    if (v5 == 1902207856)
    {
      if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
      {
        uint64_t v6 = 72;
        goto LABEL_175;
      }
      return 4294960561;
    }
    int v11 = 1902211171;
    goto LABEL_47;
  }
  if (v5 <= 1634754914)
  {
    if (v5 <= 1633772388)
    {
      if (v5 == 778924083)
      {
        if (*(_DWORD *)(a1 + 28) == 2)
        {
          int v19 = (int)*(double *)a1;
          if (v19 == 44100)
          {
            uint64_t v6 = 74;
            goto LABEL_175;
          }
          if (v19 == 48000)
          {
            uint64_t v6 = 75;
            goto LABEL_175;
          }
        }
        return 4294960561;
      }
      if (v5 == 1633772320)
      {
        int v9 = *(_DWORD *)(a1 + 28);
        switch(v9)
        {
          case 8:
            if (*(double *)a1 == 48000.0)
            {
              int IsAudioChannelLayoutTag7_1 = APAudioFormatIsAudioChannelLayoutTag7_1(a2);
              uint64_t v6 = 90;
              if (!IsAudioChannelLayoutTag7_1) {
                uint64_t v6 = 40;
              }
              goto LABEL_175;
            }
            break;
          case 6:
            if (*(double *)a1 == 48000.0)
            {
              uint64_t v6 = 39;
              goto LABEL_175;
            }
            break;
          case 2:
            int v10 = (int)*(double *)a1;
            if (v10 == 44100)
            {
              uint64_t v6 = 22;
              goto LABEL_175;
            }
            if (v10 == 48000)
            {
              uint64_t v6 = 23;
              goto LABEL_175;
            }
            break;
        }
        return 4294960561;
      }
      goto LABEL_96;
    }
    if (v5 != 1633772389)
    {
      if (v5 == 1634492771)
      {
        if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
        {
          unsigned int v13 = *(_DWORD *)(a1 + 12) - 1;
          if (v13 >= 3) {
            return 4294960561;
          }
          uint64_t v14 = &unk_1D0C1F6E8;
        }
        else
        {
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          if (*(_DWORD *)(a1 + 28) != 2) {
            return 4294960561;
          }
          unsigned int v13 = *(_DWORD *)(a1 + 12) - 1;
          if (v13 >= 3) {
            return 4294960561;
          }
          uint64_t v14 = &unk_1D0C1F700;
        }
        uint64_t v6 = v14[v13];
        goto LABEL_175;
      }
      goto LABEL_96;
    }
    int v21 = *(_DWORD *)(a1 + 28);
    uint64_t result = 4294960561;
    switch(v21)
    {
      case 1:
        int v22 = (int)*(double *)a1;
        if (v22 <= 31999)
        {
          if (v22 == 16000)
          {
            uint64_t v6 = 26;
            goto LABEL_175;
          }
          if (v22 == 24000)
          {
            uint64_t v6 = 27;
            goto LABEL_175;
          }
        }
        else
        {
          switch(v22)
          {
            case 32000:
              uint64_t v6 = 43;
              goto LABEL_175;
            case 44100:
              uint64_t v6 = 31;
              goto LABEL_175;
            case 48000:
              uint64_t v6 = 32;
              goto LABEL_175;
          }
        }
        break;
      case 2:
        int v28 = (int)*(double *)a1;
        if (v28 == 44100)
        {
          uint64_t v6 = 24;
          goto LABEL_175;
        }
        if (v28 == 48000)
        {
          uint64_t v6 = 25;
          goto LABEL_175;
        }
        break;
      case 6:
        if (*(double *)a1 == 48000.0)
        {
          uint64_t v6 = 41;
          goto LABEL_175;
        }
        break;
      case 8:
        if (*(double *)a1 == 48000.0)
        {
          uint64_t v6 = 42;
          goto LABEL_175;
        }
        break;
      default:
        return result;
    }
  }
  else
  {
    if (v5 <= 1700997938)
    {
      if (v5 == 1634754915)
      {
LABEL_48:
        if (*(double *)a1 != 48000.0) {
          return 4294960561;
        }
        uint64_t result = 4294960561;
        uint64_t v6 = 64;
        switch(*(_DWORD *)(a1 + 28))
        {
          case 2:
            goto LABEL_175;
          case 6:
            uint64_t v6 = 65;
            goto LABEL_175;
          case 8:
            int v26 = APAudioFormatIsAudioChannelLayoutTag7_1(a2);
            uint64_t v6 = 66;
            if (v26) {
              uint64_t v6 = 67;
            }
            goto LABEL_175;
          case 0xA:
            uint64_t v6 = 76;
            if (a2 == 12845066) {
              uint64_t v6 = 77;
            }
            goto LABEL_175;
          case 0xC:
            uint64_t v6 = 68;
            goto LABEL_175;
          default:
            return result;
        }
        return result;
      }
      int v11 = 1667330147;
LABEL_47:
      if (v5 != v11) {
        goto LABEL_96;
      }
      goto LABEL_48;
    }
    if (v5 == 1700997939)
    {
      if (*(double *)a1 != 48000.0) {
        return 4294960561;
      }
      HIDWORD(v16) = *(_DWORD *)(a1 + 28);
      LODWORD(v16) = HIDWORD(v16) - 2;
      unsigned int v15 = v16 >> 1;
      if (v15 >= 8 || ((0xADu >> v15) & 1) == 0) {
        return 4294960561;
      }
      long long v17 = &unk_1D0C1F718;
      goto LABEL_74;
    }
    if (v5 == 1700998451)
    {
      if (*(double *)a1 == 48000.0 && *(_DWORD *)(a1 + 28) == 6)
      {
        uint64_t v6 = 91;
        goto LABEL_175;
      }
      return 4294960561;
    }
    if (v5 != 1819304813) {
      goto LABEL_96;
    }
    double v7 = *(double *)a1;
    if (*(double *)a1 == 8000.0)
    {
      int v8 = *(_DWORD *)(a1 + 28);
      if (v8 == 1)
      {
        uint64_t v6 = 2;
        goto LABEL_175;
      }
      if (v8 == 2)
      {
        uint64_t v6 = 3;
        goto LABEL_175;
      }
      return 4294960561;
    }
    if (v7 == 16000.0)
    {
      int v25 = *(_DWORD *)(a1 + 28);
      if (v25 == 1)
      {
        uint64_t v6 = 4;
        goto LABEL_175;
      }
      if (v25 == 2)
      {
        uint64_t v6 = 5;
        goto LABEL_175;
      }
      return 4294960561;
    }
    if (v7 == 24000.0)
    {
      int v29 = *(_DWORD *)(a1 + 28);
      if (v29 == 1)
      {
        uint64_t v6 = 6;
        goto LABEL_175;
      }
      if (v29 == 2)
      {
        uint64_t v6 = 7;
        goto LABEL_175;
      }
      return 4294960561;
    }
    if (v7 == 32000.0)
    {
      int v30 = *(_DWORD *)(a1 + 28);
      if (v30 == 1)
      {
        uint64_t v6 = 8;
        goto LABEL_175;
      }
      if (v30 == 2)
      {
        uint64_t v6 = 9;
        goto LABEL_175;
      }
      return 4294960561;
    }
    if (v7 == 44100.0)
    {
      int v31 = *(_DWORD *)(a1 + 28);
      if (v31 == 2)
      {
        int v35 = *(_DWORD *)(a1 + 32);
        if (v35 == 16)
        {
          uint64_t v6 = 11;
          goto LABEL_175;
        }
        if (v35 == 24)
        {
          uint64_t v6 = 13;
          goto LABEL_175;
        }
      }
      else if (v31 == 1)
      {
        int v32 = *(_DWORD *)(a1 + 32);
        if (v32 == 16)
        {
          uint64_t v6 = 10;
          goto LABEL_175;
        }
        if (v32 == 24)
        {
          uint64_t v6 = 12;
          goto LABEL_175;
        }
      }
      return 4294960561;
    }
    if (v7 != 48000.0) {
      return 4294960561;
    }
    int v33 = *(_DWORD *)(a1 + 28);
    uint64_t result = 4294960561;
    switch(v33)
    {
      case 1:
        int v34 = *(_DWORD *)(a1 + 32);
        if (v34 == 16)
        {
          uint64_t v6 = 14;
          goto LABEL_175;
        }
        if (v34 == 24)
        {
          uint64_t v6 = 16;
          goto LABEL_175;
        }
        if (*(unsigned char *)(a1 + 12))
        {
          uint64_t v6 = 45;
          goto LABEL_175;
        }
        break;
      case 2:
        int v36 = *(_DWORD *)(a1 + 32);
        if (v36 == 16)
        {
          uint64_t v6 = 15;
          goto LABEL_175;
        }
        if (v36 == 24)
        {
          uint64_t v6 = 17;
          goto LABEL_175;
        }
        if (*(unsigned char *)(a1 + 12))
        {
          uint64_t v6 = 46;
          goto LABEL_175;
        }
        break;
      case 6:
        if (*(_DWORD *)(a1 + 32) == 16)
        {
          uint64_t v6 = 44;
          goto LABEL_175;
        }
        if (*(unsigned char *)(a1 + 12))
        {
          uint64_t v6 = 47;
          goto LABEL_175;
        }
        break;
      case 8:
        if (*(_DWORD *)(a1 + 32) == 16)
        {
          uint64_t v6 = 38;
          goto LABEL_175;
        }
        if (*(unsigned char *)(a1 + 12))
        {
          uint64_t v6 = 48;
          goto LABEL_175;
        }
        break;
      default:
        return result;
    }
  }
  return result;
}

uint64_t APAudioFormatIsAudioChannelLayoutTag7_1(int a1)
{
  uint64_t result = 0;
  if (a1 <= 10747911)
  {
    if (a1 <= 8519687)
    {
      if (a1 > 8388615)
      {
        if (a1 == 8388616) {
          return 1;
        }
        int v3 = 8454152;
      }
      else
      {
        if (a1 == 8257544) {
          return 1;
        }
        int v3 = 8323080;
      }
    }
    else if (a1 <= 10551303)
    {
      if (a1 == 8519688) {
        return 1;
      }
      int v3 = 10485768;
    }
    else
    {
      if (a1 == 10551304 || a1 == 10616840) {
        return 1;
      }
      int v3 = 10682376;
    }
LABEL_27:
    if (a1 != v3) {
      return result;
    }
    return 1;
  }
  if (a1 > 11993095)
  {
    if (a1 <= 12386311)
    {
      if (a1 == 11993096) {
        return 1;
      }
      int v3 = 12058632;
    }
    else
    {
      if (a1 == 12386312 || a1 == 14090248) {
        return 1;
      }
      int v3 = 13172744;
    }
    goto LABEL_27;
  }
  if (a1 <= 10878983)
  {
    if (a1 == 10747912) {
      return 1;
    }
    int v3 = 10813448;
    goto LABEL_27;
  }
  if (a1 != 10878984 && a1 != 10944520)
  {
    int v3 = 11599880;
    goto LABEL_27;
  }
  return 1;
}

uint64_t APAudioFormatToASBD(uint64_t a1, uint64_t a2, int *a3)
{
  uint64_t v3 = 0xC6C70636DLL;
  uint64_t v4 = 4294960561;
  if (a1 > 0x3FFFFFFF)
  {
    if (a1 <= 0x7FFFFFFFFFFFLL)
    {
      if (a1 > 0x7FFFFFFFFFLL)
      {
        if (a1 <= 0x7FFFFFFFFFFLL)
        {
          if (a1 <= 0x1FFFFFFFFFFLL)
          {
            if (a1 != 0x8000000000)
            {
              if (a1 != 0x10000000000) {
                return v4;
              }
              int v5 = 0;
              uint64_t v6 = 0x40000000000;
              uint64_t v3 = 1633772320;
              goto LABEL_141;
            }
            int v5 = 0;
            uint64_t v6 = 0x40000000000;
            uint64_t v3 = 1633772320;
LABEL_138:
            int v7 = 6;
LABEL_160:
            uint64_t v8 = 0x40E7700000000000;
            goto LABEL_161;
          }
          if (a1 == 0x20000000000)
          {
            int v5 = 0;
            uint64_t v6 = 0x1E000000000;
            uint64_t v3 = 1633772389;
            goto LABEL_138;
          }
          if (a1 != 0x40000000000) {
            return v4;
          }
          int v5 = 0;
          uint64_t v6 = 0x1E000000000;
          uint64_t v3 = 1633772389;
          goto LABEL_141;
        }
        if (a1 <= 0x1FFFFFFFFFFFLL)
        {
          if (a1 != 0x80000000000)
          {
            if (a1 != 0x100000000000) {
              return v4;
            }
            uint64_t v6 = 0x10000000CLL;
            int v5 = 16;
            goto LABEL_138;
          }
          int v5 = 0;
          uint64_t v6 = 0x1E000000000;
          uint64_t v3 = 1633772389;
          goto LABEL_134;
        }
        if (a1 != 0x200000000000)
        {
          if (a1 != 0x400000000000) {
            return v4;
          }
          uint64_t v6 = 0x100000008;
          uint64_t v3 = 0x16C70636DLL;
          int v5 = 32;
          goto LABEL_159;
        }
        uint64_t v6 = 0x100000004;
        uint64_t v3 = 0x16C70636DLL;
        int v5 = 32;
LABEL_154:
        int v7 = 1;
        goto LABEL_160;
      }
      if (a1 > 0x1FFFFFFFFLL)
      {
        if (a1 <= 0x7FFFFFFFFLL)
        {
          if (a1 == 0x200000000)
          {
            int v5 = 0;
            uint64_t v6 = 0x60000000000;
            uint64_t v3 = 1902324531;
            goto LABEL_141;
          }
          if (a1 != 0x400000000) {
            return v4;
          }
          int v5 = 0;
          uint64_t v6 = 0x60000000000;
          uint64_t v3 = 1902324531;
LABEL_149:
          int v7 = 12;
          goto LABEL_160;
        }
        if (a1 != 0x800000000)
        {
          if (a1 != 0x4000000000) {
            return v4;
          }
          uint64_t v6 = 0x100000010;
          int v5 = 16;
          goto LABEL_141;
        }
        int v5 = 0;
        uint64_t v6 = 0x60000000000;
        uint64_t v3 = 1902324531;
        goto LABEL_146;
      }
      if (a1 == 0x40000000)
      {
        int v5 = 0;
        uint64_t v6 = 0x3C000000000;
        uint64_t v3 = 1869641075;
        goto LABEL_154;
      }
      if (a1 != 0x80000000)
      {
        if (a1 != 0x100000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x1E000000000;
        uint64_t v3 = 1633772389;
        goto LABEL_154;
      }
      int v5 = 0;
      uint64_t v6 = 0x1E000000000;
      uint64_t v3 = 1633772389;
      goto LABEL_128;
    }
    if (a1 <= 0x3FFFFFFFFFFFFFLL)
    {
      if (a1 > 0x3FFFFFFFFFFFFLL)
      {
        if (a1 <= 0xFFFFFFFFFFFFFLL)
        {
          if (a1 == 0x4000000000000)
          {
            int v5 = 0;
            uint64_t v6 = 0x60000000000;
            uint64_t v3 = 1700997939;
            goto LABEL_138;
          }
          if (a1 != 0x8000000000000) {
            return v4;
          }
          int v5 = 0;
          uint64_t v6 = 0x60000000000;
          uint64_t v3 = 1700997939;
LABEL_141:
          int v7 = 8;
          goto LABEL_160;
        }
        if (a1 == 0x10000000000000)
        {
          int v5 = 0;
          uint64_t v6 = 0x60000000000;
          uint64_t v3 = 1700997939;
          goto LABEL_149;
        }
        if (a1 != 0x20000000000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x60000000000;
        uint64_t v3 = 1700997939;
LABEL_146:
        int v7 = 16;
        goto LABEL_160;
      }
      if (a1 == 0x800000000000)
      {
        uint64_t v6 = 0x100000018;
        uint64_t v3 = 0x16C70636DLL;
        int v5 = 32;
        goto LABEL_138;
      }
      if (a1 == 0x1000000000000)
      {
        uint64_t v6 = 0x100000020;
        uint64_t v3 = 0x16C70636DLL;
        int v5 = 32;
        goto LABEL_141;
      }
      if (a1 != 0x2000000000000) {
        return v4;
      }
      int v5 = 0;
      uint64_t v6 = 0x60000000000;
      uint64_t v3 = 1700997939;
    }
    else if (a1 > 0x3FFFFFFFFFFFFFFLL)
    {
      if (a1 <= 0x1FFFFFFFFFFFFFFFLL)
      {
        if (a1 == 0x400000000000000)
        {
          int v5 = 0;
          uint64_t v6 = 0x40000000000;
          uint64_t v3 = 1902207848;
          goto LABEL_138;
        }
        if (a1 != 0x1000000000000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x40000000000;
        uint64_t v3 = 1902207848;
        goto LABEL_141;
      }
      if (a1 == 0x2000000000000000)
      {
        int v5 = 0;
        uint64_t v6 = 0x100000000000;
        uint64_t v3 = 0x3716C6163;
      }
      else
      {
        if (a1 != 0x4000000000000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x60000000000;
        uint64_t v3 = 1902324531;
      }
    }
    else if (a1 > 0xFFFFFFFFFFFFFFLL)
    {
      if (a1 == 0x100000000000000)
      {
        int v5 = 0;
        uint64_t v6 = 0x40000000000;
        uint64_t v3 = 1902207331;
        goto LABEL_141;
      }
      if (a1 != 0x200000000000000) {
        return v4;
      }
      int v5 = 0;
      uint64_t v6 = 0x40000000000;
      uint64_t v3 = 1902207848;
    }
    else
    {
      if (a1 != 0x40000000000000)
      {
        if (a1 != 0x80000000000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x40000000000;
        uint64_t v3 = 1902207331;
        goto LABEL_138;
      }
      int v5 = 0;
      uint64_t v6 = 0x40000000000;
      uint64_t v3 = 1902207331;
    }
LABEL_159:
    int v7 = 2;
    goto LABEL_160;
  }
  if (a1 >= 0x8000)
  {
    if (a1 >= 0x400000)
    {
      if (a1 <= 0x3FFFFFF)
      {
        if (a1 > 0xFFFFFF)
        {
          if (a1 != 0x1000000)
          {
            if (a1 != 0x2000000) {
              return v4;
            }
            int v5 = 0;
            uint64_t v6 = 0x1E000000000;
            uint64_t v3 = 1633772389;
            goto LABEL_159;
          }
          int v5 = 0;
          uint64_t v6 = 0x1E000000000;
          uint64_t v3 = 1633772389;
        }
        else
        {
          if (a1 != 0x400000)
          {
            if (a1 != 0x800000) {
              return v4;
            }
            int v5 = 0;
            uint64_t v6 = 0x40000000000;
            uint64_t v3 = 1633772320;
            goto LABEL_159;
          }
          int v5 = 0;
          uint64_t v6 = 0x40000000000;
          uint64_t v3 = 1633772320;
        }
        goto LABEL_151;
      }
      if (a1 <= 0xFFFFFFF)
      {
        if (a1 != 0x4000000)
        {
          if (a1 != 0x8000000) {
            return v4;
          }
          int v5 = 0;
          uint64_t v6 = 0x1E000000000;
          uint64_t v3 = 1633772389;
          goto LABEL_143;
        }
        int v5 = 0;
        uint64_t v6 = 0x1E000000000;
        uint64_t v3 = 1633772389;
        goto LABEL_156;
      }
      if (a1 != 0x10000000)
      {
        if (a1 != 0x20000000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x1E000000000;
        uint64_t v3 = 1869641075;
        goto LABEL_143;
      }
      int v5 = 0;
      uint64_t v6 = 0x14000000000;
      uint64_t v3 = 1869641075;
      goto LABEL_156;
    }
    if (a1 < 0x40000)
    {
      if (a1 != 0x8000)
      {
        if (a1 != 0x10000)
        {
          if (a1 != 0x20000) {
            return v4;
          }
          uint64_t v6 = 0x100000006;
          int v5 = 24;
          goto LABEL_159;
        }
        uint64_t v6 = 0x100000003;
        int v5 = 24;
        goto LABEL_154;
      }
      uint64_t v6 = 0x100000004;
      int v5 = 16;
      goto LABEL_159;
    }
    if (a1 >= 0x100000)
    {
      if (a1 == 0x100000)
      {
        int v5 = 0;
        uint64_t v6 = 0x16000000000;
        uint64_t v3 = 0x1616C6163;
      }
      else
      {
        if (a1 != 0x200000) {
          return v4;
        }
        int v5 = 0;
        uint64_t v6 = 0x16000000000;
        uint64_t v3 = 0x3616C6163;
      }
      goto LABEL_159;
    }
    if (a1 == 0x40000)
    {
      int v5 = 0;
      uint64_t v6 = 0x16000000000;
      uint64_t v3 = 0x1616C6163;
    }
    else
    {
      if (a1 != 0x80000) {
        return v4;
      }
      int v5 = 0;
      uint64_t v6 = 0x16000000000;
      uint64_t v3 = 0x3616C6163;
    }
LABEL_151:
    int v7 = 2;
    goto LABEL_152;
  }
  uint64_t v6 = 0x100000002;
  if (a1 <= 255)
  {
    if (a1 <= 15)
    {
      if (a1 != 0x8000000000000000)
      {
        uint64_t v8 = 0x40BF400000000000;
        if (a1 == 4)
        {
          int v5 = 16;
          int v7 = 1;
        }
        else
        {
          if (a1 != 8) {
            return v4;
          }
          uint64_t v6 = 0x100000004;
          int v5 = 16;
          int v7 = 2;
        }
        goto LABEL_161;
      }
      int v5 = 0;
      uint64_t v6 = 0x60000000000;
      uint64_t v3 = 1902324531;
      goto LABEL_138;
    }
    if (a1 > 63)
    {
      if (a1 != 64)
      {
        if (a1 != 128) {
          return v4;
        }
        uint64_t v6 = 0x100000004;
        int v5 = 16;
        int v7 = 2;
        goto LABEL_144;
      }
      int v5 = 16;
LABEL_143:
      int v7 = 1;
LABEL_144:
      uint64_t v8 = 0x40D7700000000000;
      goto LABEL_161;
    }
    if (a1 != 16)
    {
      if (a1 != 32) {
        return v4;
      }
      uint64_t v6 = 0x100000004;
      int v5 = 16;
      int v7 = 2;
      goto LABEL_157;
    }
    int v5 = 16;
LABEL_156:
    int v7 = 1;
LABEL_157:
    uint64_t v8 = 0x40CF400000000000;
    goto LABEL_161;
  }
  if (a1 > 2047)
  {
    if (a1 >= 0x2000)
    {
      if (a1 != 0x2000)
      {
        if (a1 != 0x4000) {
          return v4;
        }
        int v5 = 16;
        goto LABEL_154;
      }
      uint64_t v6 = 0x100000006;
      int v5 = 24;
      goto LABEL_151;
    }
    if (a1 == 2048)
    {
      uint64_t v6 = 0x100000004;
      int v5 = 16;
      goto LABEL_151;
    }
    if (a1 != 4096) {
      return v4;
    }
    uint64_t v6 = 0x100000003;
    int v5 = 24;
LABEL_128:
    int v7 = 1;
LABEL_152:
    uint64_t v8 = 0x40E5888000000000;
    goto LABEL_161;
  }
  if (a1 != 256)
  {
    if (a1 == 512)
    {
      uint64_t v6 = 0x100000004;
      int v5 = 16;
      int v7 = 2;
      goto LABEL_136;
    }
    if (a1 != 1024) {
      return v4;
    }
    int v5 = 16;
    goto LABEL_128;
  }
  int v5 = 16;
LABEL_134:
  int v7 = 1;
LABEL_136:
  uint64_t v8 = 0x40DF400000000000;
LABEL_161:
  *(void *)a2 = v8;
  *(void *)(a2 + 8) = v3;
  *(void *)(a2 + 16) = v6;
  *(_DWORD *)(a2 + 24) = v6;
  *(_DWORD *)(a2 + 28) = v7;
  *(_DWORD *)(a2 + 32) = v5;
  *(_DWORD *)(a2 + 36) = 0;
  if (a3)
  {
    int v9 = 16;
    if (a1 > 0x7FFFFFFFFLL)
    {
      if (a1 > 0xFFFFFFFFFFFFFLL)
      {
        if (a1 <= 0x1FFFFFFFFFFFFFFLL)
        {
          if (a1 > 0x7FFFFFFFFFFFFFLL)
          {
            if (a1 != 0x80000000000000)
            {
              uint64_t v10 = 0x100000000000000;
              goto LABEL_215;
            }
          }
          else if (a1 != 0x10000000000000)
          {
            uint64_t v10 = 0x40000000000000;
            goto LABEL_215;
          }
        }
        else
        {
          if (a1 > 0xFFFFFFFFFFFFFFFLL)
          {
            if (a1 == 0x1000000000000000 || a1 == 0x4000000000000000) {
              goto LABEL_216;
            }
            goto LABEL_208;
          }
          if (a1 != 0x200000000000000)
          {
            uint64_t v10 = 0x400000000000000;
            goto LABEL_215;
          }
        }
      }
      else if (a1 <= 0x3FFFFFFFFFFLL)
      {
        if (a1 > 0xFFFFFFFFFFLL)
        {
          if (a1 != 0x10000000000)
          {
            uint64_t v10 = 0x20000000000;
            goto LABEL_215;
          }
        }
        else if (a1 != 0x800000000)
        {
          uint64_t v10 = 0x8000000000;
          goto LABEL_215;
        }
      }
      else
      {
        if (a1 > 0x1FFFFFFFFFFFFLL)
        {
          if (a1 == 0x2000000000000 || a1 == 0x4000000000000) {
            goto LABEL_216;
          }
          uint64_t v10 = 0x8000000000000;
          goto LABEL_215;
        }
        if (a1 != 0x40000000000)
        {
          uint64_t v10 = 0x80000000000;
          goto LABEL_215;
        }
      }
    }
    else if (a1 > 0x3FFFFFF)
    {
      if (a1 <= 0x3FFFFFFF)
      {
        if (a1 > 0xFFFFFFF)
        {
          if (a1 != 0x10000000)
          {
            uint64_t v10 = 0x20000000;
            goto LABEL_215;
          }
        }
        else if (a1 != 0x4000000)
        {
          uint64_t v10 = 0x8000000;
          goto LABEL_215;
        }
      }
      else
      {
        if (a1 > 0xFFFFFFFFLL)
        {
          if (a1 == 0x100000000 || a1 == 0x200000000) {
            goto LABEL_216;
          }
          uint64_t v10 = 0x400000000;
          goto LABEL_215;
        }
        if (a1 != 0x40000000)
        {
          uint64_t v10 = 0x80000000;
          goto LABEL_215;
        }
      }
    }
    else
    {
      if (a1 >= 0x200000)
      {
        if (a1 >= 0x800000)
        {
          if (a1 == 0x800000 || a1 == 0x1000000) {
            goto LABEL_216;
          }
          uint64_t v10 = 0x2000000;
LABEL_215:
          if (a1 == v10) {
            goto LABEL_216;
          }
LABEL_218:
          int v9 = v5;
          goto LABEL_216;
        }
        if (a1 != 0x200000) {
          goto LABEL_216;
        }
        goto LABEL_208;
      }
      if (a1 < 0x80000)
      {
        if (a1 == 0x8000000000000000 || a1 == 0x40000) {
          goto LABEL_216;
        }
        goto LABEL_218;
      }
      if (a1 == 0x80000) {
LABEL_208:
      }
        int v9 = 24;
    }
LABEL_216:
    uint64_t v4 = 0;
    *a3 = v9;
    return v4;
  }
  return 0;
}

uint64_t APAudioFormatIndexToAPAudioFormat(unint64_t a1)
{
  if (a1 >= 0x40) {
    return 0;
  }
  else {
    return 1 << a1;
  }
}

uint64_t ASBDToAPAudioFormat(uint64_t a1, unint64_t *a2)
{
  int v2 = *(_DWORD *)(a1 + 8);
  uint64_t v3 = 4294960561;
  if (v2 > 1869641074)
  {
    if (v2 <= 1902207847)
    {
      if (v2 == 1869641075)
      {
        if (*(_DWORD *)(a1 + 28) == 1)
        {
          double v14 = *(double *)a1;
          if (*(double *)a1 == 16000.0)
          {
            unint64_t v6 = 0x10000000;
            goto LABEL_156;
          }
          if (v14 == 24000.0)
          {
            unint64_t v6 = 0x20000000;
            goto LABEL_156;
          }
          if (v14 == 48000.0)
          {
            unint64_t v6 = 0x40000000;
            goto LABEL_156;
          }
        }
      }
      else
      {
        if (v2 != 1902207331) {
          return v3;
        }
        int v8 = *(_DWORD *)(a1 + 28);
        if (v8 == 8)
        {
          if (*(double *)a1 == 48000.0)
          {
            unint64_t v6 = 0x100000000000000;
            goto LABEL_156;
          }
        }
        else if (v8 == 6)
        {
          if (*(double *)a1 == 48000.0)
          {
            unint64_t v6 = 0x80000000000000;
            goto LABEL_156;
          }
        }
        else if (v8 == 2 && *(double *)a1 == 48000.0)
        {
          unint64_t v6 = 0x40000000000000;
          goto LABEL_156;
        }
      }
    }
    else
    {
      if (v2 != 1902207848)
      {
        if (v2 == 1902324531)
        {
          HIDWORD(v12) = *(_DWORD *)(a1 + 28);
          LODWORD(v12) = HIDWORD(v12) - 2;
          uint64_t v3 = 4294960561;
          switch((v12 >> 1))
          {
            case 0u:
              if (*(double *)a1 != 48000.0) {
                return 4294960561;
              }
              unint64_t v6 = 0x4000000000000000;
              goto LABEL_156;
            case 2u:
              if (*(double *)a1 != 48000.0) {
                return 4294960561;
              }
              unint64_t v6 = 0x8000000000000000;
              goto LABEL_156;
            case 3u:
              if (*(double *)a1 != 48000.0) {
                return 4294960561;
              }
              unint64_t v6 = 0x200000000;
              goto LABEL_156;
            case 5u:
              if (*(double *)a1 != 48000.0) {
                return 4294960561;
              }
              unint64_t v6 = 0x400000000;
              goto LABEL_156;
            case 7u:
              if (*(double *)a1 != 48000.0) {
                return 4294960561;
              }
              unint64_t v6 = 0x800000000;
              goto LABEL_156;
            default:
              return v3;
          }
        }
        else if (v2 == 1902928227)
        {
          if (*(double *)a1 == 48000.0 && *(_DWORD *)(a1 + 28) == 2 && *(_DWORD *)(a1 + 12) == 3)
          {
            unint64_t v6 = 0x2000000000000000;
            goto LABEL_156;
          }
          return 4294960561;
        }
        return v3;
      }
      int v11 = *(_DWORD *)(a1 + 28);
      if (v11 == 8)
      {
        if (*(double *)a1 == 48000.0)
        {
          unint64_t v6 = 0x1000000000000000;
          goto LABEL_156;
        }
      }
      else if (v11 == 6)
      {
        if (*(double *)a1 == 48000.0)
        {
          unint64_t v6 = 0x400000000000000;
          goto LABEL_156;
        }
      }
      else if (v11 == 2 && *(double *)a1 == 48000.0)
      {
        unint64_t v6 = 0x200000000000000;
        goto LABEL_156;
      }
    }
    return 4294960561;
  }
  if (v2 <= 1634492770)
  {
    if (v2 != 1633772320)
    {
      if (v2 == 1633772389)
      {
        unint64_t v6 = 0x20000000000;
        switch(*(_DWORD *)(a1 + 28))
        {
          case 1:
            double v7 = *(double *)a1;
            if (*(double *)a1 == 16000.0)
            {
              unint64_t v6 = 0x4000000;
              goto LABEL_156;
            }
            if (v7 == 24000.0)
            {
              unint64_t v6 = 0x8000000;
              goto LABEL_156;
            }
            if (v7 == 32000.0)
            {
              unint64_t v6 = 0x80000000000;
              goto LABEL_156;
            }
            if (v7 == 44100.0)
            {
              unint64_t v6 = 0x80000000;
              goto LABEL_156;
            }
            if (v7 != 48000.0) {
              return 4294960561;
            }
            unint64_t v6 = 0x100000000;
            goto LABEL_156;
          case 2:
            if (*(double *)a1 == 44100.0)
            {
              unint64_t v6 = 0x1000000;
              goto LABEL_156;
            }
            if (*(double *)a1 != 48000.0) {
              return 4294960561;
            }
            unint64_t v6 = 0x2000000;
            break;
          case 6:
            goto LABEL_156;
          case 8:
            unint64_t v6 = 0x40000000000;
            goto LABEL_156;
          default:
            return v3;
        }
        goto LABEL_156;
      }
      return v3;
    }
    int v13 = *(_DWORD *)(a1 + 28);
    switch(v13)
    {
      case 8:
        unint64_t v6 = 0x10000000000;
        goto LABEL_156;
      case 6:
        unint64_t v6 = 0x8000000000;
        goto LABEL_156;
      case 2:
        if (*(double *)a1 == 44100.0)
        {
          unint64_t v6 = 0x400000;
          goto LABEL_156;
        }
        if (*(double *)a1 == 48000.0)
        {
          unint64_t v6 = 0x800000;
          goto LABEL_156;
        }
        break;
    }
    return 4294960561;
  }
  switch(v2)
  {
    case 1634492771:
      if (*(double *)a1 == 44100.0 && *(_DWORD *)(a1 + 28) == 2)
      {
        int v9 = *(_DWORD *)(a1 + 12);
        if (v9 == 1)
        {
          unint64_t v6 = 0x40000;
          goto LABEL_156;
        }
        if (v9 == 3)
        {
          unint64_t v6 = 0x80000;
          goto LABEL_156;
        }
      }
      else if (*(double *)a1 == 48000.0 && *(_DWORD *)(a1 + 28) == 2)
      {
        int v15 = *(_DWORD *)(a1 + 12);
        if (v15 == 1)
        {
          unint64_t v6 = 0x100000;
          goto LABEL_156;
        }
        if (v15 == 3)
        {
          unint64_t v6 = 0x200000;
          goto LABEL_156;
        }
      }
      return 4294960561;
    case 1700997939:
      HIDWORD(v10) = *(_DWORD *)(a1 + 28);
      LODWORD(v10) = HIDWORD(v10) - 2;
      uint64_t v3 = 4294960561;
      switch((v10 >> 1))
      {
        case 0u:
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          unint64_t v6 = 0x2000000000000;
          goto LABEL_156;
        case 2u:
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          unint64_t v6 = 0x4000000000000;
          goto LABEL_156;
        case 3u:
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          unint64_t v6 = 0x8000000000000;
          goto LABEL_156;
        case 5u:
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          unint64_t v6 = 0x10000000000000;
          goto LABEL_156;
        case 7u:
          if (*(double *)a1 != 48000.0) {
            return 4294960561;
          }
          unint64_t v6 = 0x20000000000000;
          goto LABEL_156;
        default:
          return v3;
      }
    case 1819304813:
      double v4 = *(double *)a1;
      if (*(double *)a1 == 8000.0)
      {
        int v5 = *(_DWORD *)(a1 + 28);
        if (v5 == 1)
        {
          unint64_t v6 = 4;
          goto LABEL_156;
        }
        if (v5 == 2)
        {
          unint64_t v6 = 8;
LABEL_156:
          uint64_t v3 = 0;
          *a2 = v6;
          return v3;
        }
      }
      else if (v4 == 16000.0)
      {
        int v16 = *(_DWORD *)(a1 + 28);
        if (v16 == 1)
        {
          unint64_t v6 = 16;
          goto LABEL_156;
        }
        if (v16 == 2)
        {
          unint64_t v6 = 32;
          goto LABEL_156;
        }
      }
      else if (v4 == 24000.0)
      {
        int v17 = *(_DWORD *)(a1 + 28);
        if (v17 == 1)
        {
          unint64_t v6 = 64;
          goto LABEL_156;
        }
        if (v17 == 2)
        {
          unint64_t v6 = 128;
          goto LABEL_156;
        }
      }
      else if (v4 == 32000.0)
      {
        int v18 = *(_DWORD *)(a1 + 28);
        if (v18 == 1)
        {
          unint64_t v6 = 256;
          goto LABEL_156;
        }
        if (v18 == 2)
        {
          unint64_t v6 = 512;
          goto LABEL_156;
        }
      }
      else if (v4 == 44100.0)
      {
        int v19 = *(_DWORD *)(a1 + 28);
        if (v19 == 2)
        {
          int v22 = *(_DWORD *)(a1 + 32);
          if (v22 == 16)
          {
            unint64_t v6 = 2048;
            goto LABEL_156;
          }
          if (v22 == 24)
          {
            unint64_t v6 = 0x2000;
            goto LABEL_156;
          }
        }
        else if (v19 == 1)
        {
          int v20 = *(_DWORD *)(a1 + 32);
          if (v20 == 16)
          {
            unint64_t v6 = 1024;
            goto LABEL_156;
          }
          if (v20 == 24)
          {
            unint64_t v6 = 4096;
            goto LABEL_156;
          }
        }
      }
      else if (v4 == 48000.0)
      {
        uint64_t v3 = 4294960561;
        switch(*(_DWORD *)(a1 + 28))
        {
          case 1:
            int v21 = *(_DWORD *)(a1 + 32);
            if (v21 == 16)
            {
              unint64_t v6 = 0x4000;
              goto LABEL_156;
            }
            if (v21 == 24)
            {
              unint64_t v6 = 0x10000;
              goto LABEL_156;
            }
            if ((*(unsigned char *)(a1 + 12) & 1) == 0) {
              return 4294960561;
            }
            unint64_t v6 = 0x200000000000;
            goto LABEL_156;
          case 2:
            int v23 = *(_DWORD *)(a1 + 32);
            if (v23 == 16)
            {
              unint64_t v6 = 0x8000;
              goto LABEL_156;
            }
            if (v23 == 24)
            {
              unint64_t v6 = 0x20000;
              goto LABEL_156;
            }
            if ((*(unsigned char *)(a1 + 12) & 1) == 0) {
              return 4294960561;
            }
            unint64_t v6 = 0x400000000000;
            goto LABEL_156;
          case 6:
            if (*(_DWORD *)(a1 + 32) == 16)
            {
              unint64_t v6 = 0x100000000000;
              goto LABEL_156;
            }
            if ((*(unsigned char *)(a1 + 12) & 1) == 0) {
              return 4294960561;
            }
            unint64_t v6 = 0x800000000000;
            goto LABEL_156;
          case 8:
            if (*(_DWORD *)(a1 + 32) == 16)
            {
              unint64_t v6 = 0x4000000000;
              goto LABEL_156;
            }
            if ((*(unsigned char *)(a1 + 12) & 1) == 0) {
              return 4294960561;
            }
            unint64_t v6 = 0x1000000000000;
            break;
          default:
            return v3;
        }
        goto LABEL_156;
      }
      return 4294960561;
  }
  return v3;
}

uint64_t APAudioFormatToCompressionType(uint64_t a1, int *a2)
{
  int v3 = 1;
  uint64_t result = 4294960561;
  if (a1 <= 0x7FFFFFFFFFLL)
  {
    if (a1 >= 0x80000)
    {
      if (a1 > 0xFFFFFF)
      {
        if (a1 > 0x1FFFFFFFFLL)
        {
          if (a1 == 0x200000000 || a1 == 0x400000000) {
            goto LABEL_53;
          }
          uint64_t v6 = 0x800000000;
          goto LABEL_44;
        }
        if (a1 == 0x1000000 || a1 == 0x2000000) {
          goto LABEL_73;
        }
        return result;
      }
      if (a1 < 0x200000)
      {
        if (a1 != 0x80000 && a1 != 0x100000) {
          return result;
        }
      }
      else if (a1 != 0x200000)
      {
        if (a1 == 0x400000 || a1 == 0x800000) {
          goto LABEL_56;
        }
        return result;
      }
    }
    else
    {
      if (a1 <= 2047)
      {
        if (a1 > 31)
        {
          if (a1 == 32 || a1 == 128 || a1 == 512) {
            goto LABEL_75;
          }
          return result;
        }
        if (a1 == 0x8000000000000000) {
          goto LABEL_53;
        }
        if (a1 != 8) {
          return result;
        }
LABEL_75:
        uint64_t result = 0;
        *a2 = v3;
        return result;
      }
      if (a1 < 0x8000)
      {
        if (a1 == 2048 || a1 == 0x2000) {
          goto LABEL_75;
        }
        return result;
      }
      if (a1 == 0x8000 || a1 == 0x20000) {
        goto LABEL_75;
      }
      if (a1 != 0x40000) {
        return result;
      }
    }
    int v3 = 2;
    goto LABEL_75;
  }
  if (a1 > 0x7FFFFFFFFFFFFLL)
  {
    if (a1 > 0xFFFFFFFFFFFFFFLL)
    {
      if (a1 <= 0xFFFFFFFFFFFFFFFLL)
      {
        if (a1 != 0x100000000000000)
        {
          if (a1 != 0x200000000000000 && a1 != 0x400000000000000) {
            return result;
          }
          goto LABEL_49;
        }
LABEL_53:
        int v3 = 1902207331;
        goto LABEL_75;
      }
      if (a1 == 0x1000000000000000)
      {
LABEL_49:
        int v3 = 1902207848;
        goto LABEL_75;
      }
      if (a1 == 0x2000000000000000)
      {
        int v3 = 1902928227;
        goto LABEL_75;
      }
      uint64_t v7 = 0x4000000000000000;
      goto LABEL_62;
    }
    if (a1 > 0x1FFFFFFFFFFFFFLL)
    {
      if (a1 != 0x20000000000000)
      {
        if (a1 == 0x40000000000000) {
          goto LABEL_53;
        }
        uint64_t v6 = 0x80000000000000;
LABEL_44:
        if (a1 != v6) {
          return result;
        }
        goto LABEL_53;
      }
LABEL_63:
      int v3 = 128;
      goto LABEL_75;
    }
    if (a1 == 0x8000000000000) {
      goto LABEL_63;
    }
    uint64_t v7 = 0x10000000000000;
LABEL_62:
    if (a1 != v7) {
      return result;
    }
    goto LABEL_63;
  }
  if (a1 > 0x3FFFFFFFFFFFLL)
  {
    if (a1 <= 0xFFFFFFFFFFFFLL)
    {
      if (a1 == 0x400000000000) {
        goto LABEL_75;
      }
      uint64_t v5 = 0x800000000000;
      goto LABEL_69;
    }
    if (a1 != 0x1000000000000)
    {
      if (a1 == 0x2000000000000) {
        goto LABEL_63;
      }
      uint64_t v7 = 0x4000000000000;
      goto LABEL_62;
    }
    goto LABEL_75;
  }
  if (a1 > 0x1FFFFFFFFFFLL)
  {
    if (a1 != 0x20000000000 && a1 != 0x40000000000)
    {
      uint64_t v5 = 0x200000000000;
LABEL_69:
      if (a1 != v5) {
        return result;
      }
      goto LABEL_75;
    }
LABEL_73:
    int v3 = 8;
    goto LABEL_75;
  }
  if (a1 == 0x8000000000 || a1 == 0x10000000000)
  {
LABEL_56:
    int v3 = 4;
    goto LABEL_75;
  }
  return result;
}

uint64_t APAudioFormatToPCMASBD(uint64_t a1, uint64_t a2)
{
  uint64_t v3 = 0xC6C70636DLL;
  int v4 = 2;
  unsigned int v5 = 16;
  uint64_t result = 4294960561;
  uint64_t v7 = 0x40E7700000000000;
  if (a1 > 0x3FFFFFFF)
  {
    if (a1 <= 0x7FFFFFFFFFFFLL)
    {
      if (a1 > 0x7FFFFFFFFFLL)
      {
        if (a1 <= 0x7FFFFFFFFFFLL)
        {
          if (a1 <= 0x1FFFFFFFFFFLL)
          {
            if (a1 != 0x8000000000)
            {
              uint64_t v8 = 0x10000000000;
              goto LABEL_78;
            }
LABEL_80:
            int v4 = 6;
            goto LABEL_121;
          }
          if (a1 == 0x20000000000) {
            goto LABEL_80;
          }
          uint64_t v8 = 0x40000000000;
LABEL_78:
          if (a1 != v8) {
            return result;
          }
          goto LABEL_79;
        }
        if (a1 <= 0x1FFFFFFFFFFFLL)
        {
          if (a1 == 0x80000000000)
          {
            int v4 = 1;
            uint64_t v7 = 0x40DF400000000000;
            goto LABEL_121;
          }
          if (a1 != 0x100000000000) {
            return result;
          }
          uint64_t v9 = 0x1000000006;
          uint64_t v10 = 0x10000000CLL;
          goto LABEL_132;
        }
        if (a1 == 0x200000000000)
        {
          uint64_t v9 = 0x2000000001;
          uint64_t v10 = 0x100000004;
        }
        else
        {
          if (a1 != 0x400000000000) {
            return result;
          }
          uint64_t v9 = 0x2000000002;
          uint64_t v10 = 0x100000008;
        }
        goto LABEL_131;
      }
      if (a1 > 0x1FFFFFFFFLL)
      {
        if (a1 <= 0x7FFFFFFFFLL)
        {
          if (a1 != 0x200000000)
          {
            if (a1 != 0x400000000) {
              return result;
            }
LABEL_113:
            int v4 = 12;
            goto LABEL_121;
          }
LABEL_79:
          int v4 = 8;
          goto LABEL_121;
        }
        if (a1 != 0x800000000)
        {
          if (a1 != 0x4000000000) {
            return result;
          }
          uint64_t v9 = 0x1000000008;
          uint64_t v10 = 0x100000010;
          goto LABEL_132;
        }
LABEL_98:
        int v4 = 16;
        goto LABEL_121;
      }
      if (a1 == 0x40000000) {
        goto LABEL_64;
      }
      if (a1 != 0x80000000)
      {
        if (a1 != 0x100000000) {
          return result;
        }
LABEL_64:
        int v4 = 1;
        goto LABEL_121;
      }
      int v4 = 1;
LABEL_120:
      uint64_t v7 = 0x40E5888000000000;
      goto LABEL_121;
    }
    if (a1 <= 0x3FFFFFFFFFFFFFLL)
    {
      if (a1 > 0x3FFFFFFFFFFFFLL)
      {
        if (a1 <= 0xFFFFFFFFFFFFFLL)
        {
          if (a1 == 0x4000000000000) {
            goto LABEL_80;
          }
          uint64_t v8 = 0x8000000000000;
          goto LABEL_78;
        }
        if (a1 == 0x10000000000000) {
          goto LABEL_113;
        }
        if (a1 != 0x20000000000000) {
          return result;
        }
        unsigned int v5 = 0;
        goto LABEL_98;
      }
      if (a1 == 0x800000000000)
      {
        uint64_t v9 = 0x2000000006;
        uint64_t v10 = 0x100000018;
      }
      else
      {
        if (a1 != 0x1000000000000)
        {
          uint64_t v13 = 0x2000000000000;
          goto LABEL_111;
        }
        uint64_t v9 = 0x2000000008;
        uint64_t v10 = 0x100000020;
      }
LABEL_131:
      uint64_t v3 = 0x16C70636DLL;
      goto LABEL_132;
    }
    if (a1 <= 0x3FFFFFFFFFFFFFFLL)
    {
      if (a1 <= 0xFFFFFFFFFFFFFFLL)
      {
        if (a1 != 0x40000000000000)
        {
          if (a1 == 0x80000000000000) {
            goto LABEL_80;
          }
          return result;
        }
LABEL_121:
        uint64_t result = 0;
        *(void *)a2 = v7;
        *(void *)(a2 + 8) = 0xC6C70636DLL;
        int v14 = v4 * (v5 >> 3);
        *(_DWORD *)(a2 + 16) = v14;
        *(_DWORD *)(a2 + 20) = 1;
        *(_DWORD *)(a2 + 24) = v14;
        *(_DWORD *)(a2 + 28) = v4;
        *(_DWORD *)(a2 + 32) = v5;
LABEL_134:
        *(_DWORD *)(a2 + 36) = 0;
        return result;
      }
      if (a1 == 0x100000000000000) {
        goto LABEL_79;
      }
      uint64_t v13 = 0x200000000000000;
      goto LABEL_111;
    }
    if (a1 <= 0x1FFFFFFFFFFFFFFFLL)
    {
      if (a1 == 0x400000000000000) {
        goto LABEL_80;
      }
      uint64_t v8 = 0x1000000000000000;
      goto LABEL_78;
    }
    if (a1 != 0x2000000000000000)
    {
      uint64_t v13 = 0x4000000000000000;
      goto LABEL_111;
    }
    goto LABEL_115;
  }
  if (a1 >= 0x8000)
  {
    if (a1 < 0x400000)
    {
      if (a1 < 0x40000)
      {
        switch(a1)
        {
          case 0x8000:
            uint64_t v9 = 0x1000000002;
            uint64_t v10 = 0x100000004;
            break;
          case 0x10000:
            uint64_t v9 = 0x1800000001;
            uint64_t v10 = 0x100000003;
            break;
          case 0x20000:
            uint64_t v9 = 0x1800000002;
            uint64_t v10 = 0x100000006;
            break;
          default:
            return result;
        }
        goto LABEL_132;
      }
      if (a1 < 0x100000)
      {
        if (a1 == 0x40000) {
          goto LABEL_120;
        }
        if (a1 != 0x80000) {
          return result;
        }
        uint64_t v7 = 0x40E5888000000000;
LABEL_116:
        unsigned int v5 = 24;
        goto LABEL_121;
      }
      if (a1 == 0x100000) {
        goto LABEL_121;
      }
      if (a1 != 0x200000) {
        return result;
      }
LABEL_115:
      uint64_t v7 = 0x40E7700000000000;
      goto LABEL_116;
    }
    if (a1 <= 0x3FFFFFF)
    {
      if (a1 <= 0xFFFFFF)
      {
        if (a1 == 0x400000) {
          goto LABEL_120;
        }
        if (a1 != 0x800000) {
          return result;
        }
        goto LABEL_121;
      }
      if (a1 == 0x1000000) {
        goto LABEL_120;
      }
      uint64_t v13 = 0x2000000;
LABEL_111:
      if (a1 == v13) {
        goto LABEL_121;
      }
      return result;
    }
    if (a1 > 0xFFFFFFF)
    {
      if (a1 != 0x10000000)
      {
        uint64_t v12 = 0x20000000;
        goto LABEL_107;
      }
    }
    else if (a1 != 0x4000000)
    {
      uint64_t v12 = 0x8000000;
LABEL_107:
      if (a1 != v12) {
        return result;
      }
      int v4 = 1;
      uint64_t v7 = 0x40D7700000000000;
      goto LABEL_121;
    }
    int v4 = 1;
    uint64_t v7 = 0x40CF400000000000;
    goto LABEL_121;
  }
  uint64_t v9 = 0x1000000001;
  uint64_t v10 = 0x100000002;
  if (a1 <= 255)
  {
    if (a1 <= 15)
    {
      if (a1 == 0x8000000000000000) {
        goto LABEL_80;
      }
      uint64_t v11 = 0x40BF400000000000;
      if (a1 != 4)
      {
        if (a1 != 8) {
          return result;
        }
        uint64_t v9 = 0x1000000002;
        uint64_t v10 = 0x100000004;
      }
    }
    else if (a1 > 63)
    {
      if (a1 != 64)
      {
        if (a1 != 128) {
          return result;
        }
        uint64_t v9 = 0x1000000002;
        uint64_t v10 = 0x100000004;
      }
      uint64_t v11 = 0x40D7700000000000;
    }
    else
    {
      if (a1 != 16)
      {
        if (a1 != 32) {
          return result;
        }
        uint64_t v9 = 0x1000000002;
        uint64_t v10 = 0x100000004;
      }
      uint64_t v11 = 0x40CF400000000000;
    }
LABEL_133:
    uint64_t result = 0;
    *(void *)a2 = v11;
    *(void *)(a2 + 8) = v3;
    *(void *)(a2 + 16) = v10;
    *(_DWORD *)(a2 + 24) = v10;
    *(void *)(a2 + 28) = v9;
    goto LABEL_134;
  }
  if (a1 <= 2047)
  {
    if (a1 != 256)
    {
      if (a1 != 512)
      {
        if (a1 != 1024) {
          return result;
        }
        goto LABEL_129;
      }
      uint64_t v9 = 0x1000000002;
      uint64_t v10 = 0x100000004;
    }
    uint64_t v11 = 0x40DF400000000000;
    goto LABEL_133;
  }
  if (a1 < 0x2000)
  {
    if (a1 == 2048)
    {
      uint64_t v9 = 0x1000000002;
      uint64_t v10 = 0x100000004;
    }
    else
    {
      if (a1 != 4096) {
        return result;
      }
      uint64_t v9 = 0x1800000001;
      uint64_t v10 = 0x100000003;
    }
    goto LABEL_129;
  }
  if (a1 == 0x2000)
  {
    uint64_t v9 = 0x1800000002;
    uint64_t v10 = 0x100000006;
LABEL_129:
    uint64_t v11 = 0x40E5888000000000;
    goto LABEL_133;
  }
  if (a1 == 0x4000)
  {
LABEL_132:
    uint64_t v11 = 0x40E7700000000000;
    goto LABEL_133;
  }
  return result;
}

uint64_t APAudioFormatIndexToPCMASBD(uint64_t a1, uint64_t a2)
{
  uint64_t v13 = 0;
  long long v11 = 0u;
  long long v12 = 0u;
  uint64_t v4 = APAudioFormatIndexToASBD(a1, (uint64_t)&v11);
  if (!v4)
  {
    if (DWORD2(v11) == 1819304813)
    {
      long long v5 = v12;
      *(_OWORD *)a2 = v11;
      *(_OWORD *)(a2 + 16) = v5;
      *(void *)(a2 + 32) = v13;
    }
    else
    {
      int BitsPerChannel = APAudioFormatIndexGetBitsPerChannel(a1);
      if (BitsPerChannel == ((BitsPerChannel + 7) & 0x38)) {
        int v7 = 12;
      }
      else {
        int v7 = 20;
      }
      *(void *)a2 = v11;
      *(_DWORD *)(a2 + 8) = 1819304813;
      *(_DWORD *)(a2 + 12) = v7;
      int v8 = HIDWORD(v12);
      unsigned int v9 = HIDWORD(v12) * ((BitsPerChannel + 7) >> 3);
      *(_DWORD *)(a2 + 16) = v9;
      *(_DWORD *)(a2 + 20) = 1;
      *(_DWORD *)(a2 + 24) = v9;
      *(_DWORD *)(a2 + 28) = v8;
      *(_DWORD *)(a2 + 32) = BitsPerChannel;
      *(_DWORD *)(a2 + 36) = 0;
    }
  }
  return v4;
}

uint64_t APAudioFormatGetAudioFormatCount(uint64_t result)
{
  uint64_t v1 = result;
  LODWORD(result) = 0;
  unsigned int v2 = 65;
  uint64_t v3 = 1;
  do
  {
    if ((v3 & v1) != 0) {
      uint64_t result = (result + 1);
    }
    else {
      uint64_t result = result;
    }
    v3 *= 2;
    --v2;
  }
  while (v2 > 1);
  return result;
}

uint64_t APAudioFormatCreateDescriptionArray(uint64_t a1, int a2, char a3, CFAllocatorRef allocator, const __CFData **a5)
{
  if (a2 != 1634955876)
  {
    if (a2 != 1634951780) {
      return 4294954516;
    }
    unsigned int v8 = 0;
    unsigned int v9 = 65;
    uint64_t v10 = 1;
    do
    {
      if ((v10 & a1) != 0) {
        ++v8;
      }
      v10 *= 2;
      --v9;
    }
    while (v9 > 1);
    if (v8)
    {
      CFIndex v11 = 40 * v8;
      CFMutableArrayRef Mutable = CFDataCreateMutable(allocator, v11);
      if (Mutable)
      {
        CFDataRef v13 = Mutable;
        CFDataSetLength(Mutable, v11);
        BytePtr = (UInt8 *)CFDataGetBytePtr(v13);
        int v15 = 65;
        uint64_t v16 = 1;
        while ((v16 & a1) == 0)
        {
LABEL_185:
          v16 *= 2;
          if (--v15 <= 1) {
            goto LABEL_375;
          }
        }
        if (a3)
        {
          APAudioFormatToPCMASBD(v16, (uint64_t)BytePtr);
          goto LABEL_184;
        }
        if (v16 > 0x3FFFFFFF)
        {
          if (v16 <= 0x7FFFFFFFFFFFLL)
          {
            if (v16 > 0x7FFFFFFFFFLL)
            {
              if (v16 <= 0x7FFFFFFFFFFLL)
              {
                if (v16 <= 0x1FFFFFFFFFFLL)
                {
                  if (v16 != 0x8000000000)
                  {
                    if (v16 == 0x10000000000)
                    {
                      uint64_t v17 = 0x40E7700000000000;
                      uint64_t v18 = 1633772320;
LABEL_167:
                      uint64_t v20 = 0x40000000000;
                      goto LABEL_168;
                    }
LABEL_184:
                    BytePtr += 40;
                    goto LABEL_185;
                  }
                  uint64_t v17 = 0x40E7700000000000;
                  uint64_t v18 = 1633772320;
                  goto LABEL_144;
                }
                if (v16 == 0x20000000000)
                {
                  uint64_t v17 = 0x40E7700000000000;
                  uint64_t v18 = 1633772389;
                  uint64_t v20 = 0x1E000000000;
                  goto LABEL_162;
                }
                if (v16 != 0x40000000000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40E7700000000000;
                uint64_t v18 = 1633772389;
                uint64_t v20 = 0x1E000000000;
LABEL_168:
                uint64_t v19 = 8;
                goto LABEL_183;
              }
              if (v16 <= 0x1FFFFFFFFFFFLL)
              {
                if (v16 != 0x80000000000)
                {
                  if (v16 != 0x100000000000) {
                    goto LABEL_184;
                  }
                  uint64_t v19 = 0x1000000006;
                  uint64_t v20 = 0x10000000CLL;
                  goto LABEL_107;
                }
                uint64_t v17 = 0x40DF400000000000;
                goto LABEL_149;
              }
              if (v16 == 0x200000000000)
              {
                uint64_t v19 = 0x2000000001;
                uint64_t v18 = 0x16C70636DLL;
                uint64_t v17 = 0x40E7700000000000;
                uint64_t v20 = 0x100000004;
                goto LABEL_183;
              }
              if (v16 != 0x400000000000) {
                goto LABEL_184;
              }
              uint64_t v19 = 0x2000000002;
              uint64_t v20 = 0x100000008;
LABEL_157:
              uint64_t v17 = 0x40E7700000000000;
              uint64_t v18 = 0x16C70636DLL;
              goto LABEL_183;
            }
            if (v16 <= 0x1FFFFFFFFLL)
            {
              switch(v16)
              {
                case 0x40000000:
                  uint64_t v17 = 0x40E7700000000000;
                  uint64_t v18 = 1869641075;
                  uint64_t v20 = 0x3C000000000;
LABEL_151:
                  uint64_t v19 = 1;
                  goto LABEL_183;
                case 0x80000000:
                  uint64_t v17 = 0x40E5888000000000;
                  break;
                case 0x100000000:
                  uint64_t v17 = 0x40E7700000000000;
                  break;
                default:
                  goto LABEL_184;
              }
              goto LABEL_149;
            }
            if (v16 > 0x7FFFFFFFFLL)
            {
              if (v16 != 0x800000000)
              {
                if (v16 != 0x4000000000) {
                  goto LABEL_184;
                }
                uint64_t v19 = 0x1000000008;
                uint64_t v20 = 0x100000010;
LABEL_107:
                uint64_t v17 = 0x40E7700000000000;
                uint64_t v18 = 0xC6C70636DLL;
                goto LABEL_183;
              }
              uint64_t v19 = 16;
              goto LABEL_172;
            }
            if (v16 != 0x200000000)
            {
              if (v16 != 0x400000000) {
                goto LABEL_184;
              }
              uint64_t v19 = 12;
LABEL_172:
              uint64_t v17 = 0x40E7700000000000;
              uint64_t v18 = 1902324531;
              goto LABEL_179;
            }
            uint64_t v17 = 0x40E7700000000000;
            uint64_t v18 = 1902324531;
LABEL_136:
            uint64_t v20 = 0x60000000000;
            goto LABEL_168;
          }
          if (v16 > 0x3FFFFFFFFFFFFFLL)
          {
            if (v16 <= 0x3FFFFFFFFFFFFFFLL)
            {
              if (v16 <= 0xFFFFFFFFFFFFFFLL)
              {
                if (v16 != 0x40000000000000)
                {
                  if (v16 != 0x80000000000000) {
                    goto LABEL_184;
                  }
                  uint64_t v18 = 1902207331;
                  goto LABEL_143;
                }
                uint64_t v18 = 1902207331;
                goto LABEL_132;
              }
              if (v16 != 0x100000000000000)
              {
                if (v16 != 0x200000000000000) {
                  goto LABEL_184;
                }
                uint64_t v18 = 1902207848;
LABEL_132:
                uint64_t v17 = 0x40E7700000000000;
LABEL_133:
                uint64_t v20 = 0x40000000000;
                goto LABEL_176;
              }
              uint64_t v18 = 1902207331;
LABEL_166:
              uint64_t v17 = 0x40E7700000000000;
              goto LABEL_167;
            }
            if (v16 <= 0x1FFFFFFFFFFFFFFFLL)
            {
              if (v16 == 0x400000000000000)
              {
                uint64_t v18 = 1902207848;
LABEL_143:
                uint64_t v17 = 0x40E7700000000000;
LABEL_144:
                uint64_t v20 = 0x40000000000;
LABEL_162:
                uint64_t v19 = 6;
                goto LABEL_183;
              }
              if (v16 != 0x1000000000000000) {
                goto LABEL_184;
              }
              uint64_t v18 = 1902207848;
              goto LABEL_166;
            }
            if (v16 == 0x2000000000000000)
            {
              uint64_t v20 = 0x100000000000;
              uint64_t v18 = 0x3716C6163;
              uint64_t v17 = 0x40E7700000000000;
              goto LABEL_176;
            }
            if (v16 != 0x4000000000000000) {
              goto LABEL_184;
            }
            uint64_t v17 = 0x40E7700000000000;
            uint64_t v18 = 1902324531;
            goto LABEL_127;
          }
          if (v16 <= 0x3FFFFFFFFFFFFLL)
          {
            if (v16 == 0x800000000000)
            {
              uint64_t v19 = 0x2000000006;
              uint64_t v20 = 0x100000018;
              goto LABEL_157;
            }
            if (v16 == 0x1000000000000)
            {
              uint64_t v19 = 0x2000000008;
              uint64_t v20 = 0x100000020;
              goto LABEL_157;
            }
            if (v16 != 0x2000000000000) {
              goto LABEL_184;
            }
            uint64_t v18 = 1700997939;
            uint64_t v17 = 0x40E7700000000000;
LABEL_127:
            uint64_t v20 = 0x60000000000;
            goto LABEL_176;
          }
          if (v16 > 0xFFFFFFFFFFFFFLL)
          {
            if (v16 == 0x10000000000000)
            {
              uint64_t v19 = 12;
            }
            else
            {
              if (v16 != 0x20000000000000) {
                goto LABEL_184;
              }
              uint64_t v19 = 16;
            }
            uint64_t v18 = 1700997939;
            uint64_t v17 = 0x40E7700000000000;
LABEL_179:
            uint64_t v20 = 0x60000000000;
            goto LABEL_183;
          }
          if (v16 != 0x4000000000000)
          {
            if (v16 != 0x8000000000000) {
              goto LABEL_184;
            }
            uint64_t v18 = 1700997939;
            uint64_t v17 = 0x40E7700000000000;
            goto LABEL_136;
          }
          uint64_t v18 = 1700997939;
          uint64_t v17 = 0x40E7700000000000;
LABEL_146:
          uint64_t v20 = 0x60000000000;
          goto LABEL_162;
        }
        if (v16 >= 0x8000)
        {
          if (v16 >= 0x400000)
          {
            if (v16 > 0x3FFFFFF)
            {
              if (v16 > 0xFFFFFFF)
              {
                if (v16 == 0x10000000)
                {
                  uint64_t v17 = 0x40CF400000000000;
                  uint64_t v18 = 1869641075;
                  uint64_t v20 = 0x14000000000;
                  goto LABEL_151;
                }
                if (v16 != 0x20000000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40D7700000000000;
                uint64_t v18 = 1869641075;
                goto LABEL_150;
              }
              if (v16 == 0x4000000)
              {
                uint64_t v17 = 0x40CF400000000000;
              }
              else
              {
                if (v16 != 0x8000000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40D7700000000000;
              }
LABEL_149:
              uint64_t v18 = 1633772389;
LABEL_150:
              uint64_t v20 = 0x1E000000000;
              goto LABEL_151;
            }
            if (v16 <= 0xFFFFFF)
            {
              if (v16 == 0x400000)
              {
                uint64_t v17 = 0x40E5888000000000;
              }
              else
              {
                if (v16 != 0x800000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40E7700000000000;
              }
              uint64_t v18 = 1633772320;
              goto LABEL_133;
            }
            if (v16 == 0x1000000)
            {
              uint64_t v17 = 0x40E5888000000000;
            }
            else
            {
              if (v16 != 0x2000000) {
                goto LABEL_184;
              }
              uint64_t v17 = 0x40E7700000000000;
            }
            uint64_t v18 = 1633772389;
            uint64_t v20 = 0x1E000000000;
LABEL_176:
            uint64_t v19 = 2;
            goto LABEL_183;
          }
          if (v16 >= 0x40000)
          {
            if (v16 >= 0x100000)
            {
              if (v16 != 0x100000)
              {
                if (v16 != 0x200000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40E7700000000000;
LABEL_111:
                uint64_t v18 = 0x3616C6163;
LABEL_175:
                uint64_t v20 = 0x16000000000;
                goto LABEL_176;
              }
              uint64_t v17 = 0x40E7700000000000;
            }
            else
            {
              if (v16 != 0x40000)
              {
                if (v16 != 0x80000) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40E5888000000000;
                goto LABEL_111;
              }
              uint64_t v17 = 0x40E5888000000000;
            }
            uint64_t v18 = 0x1616C6163;
            goto LABEL_175;
          }
          if (v16 != 0x8000)
          {
            if (v16 != 0x10000)
            {
              if (v16 != 0x20000) {
                goto LABEL_184;
              }
              uint64_t v17 = 0x40E7700000000000;
LABEL_181:
              uint64_t v18 = 0xC6C70636DLL;
              uint64_t v20 = 0x100000006;
              uint64_t v19 = 0x1800000002;
              goto LABEL_183;
            }
            uint64_t v17 = 0x40E7700000000000;
LABEL_154:
            uint64_t v18 = 0xC6C70636DLL;
            uint64_t v20 = 0x100000003;
            uint64_t v19 = 0x1800000001;
            goto LABEL_183;
          }
          uint64_t v17 = 0x40E7700000000000;
          goto LABEL_160;
        }
        if (v16 > 255)
        {
          if (v16 <= 2047)
          {
            switch(v16)
            {
              case 256:
                uint64_t v17 = 0x40DF400000000000;
                break;
              case 512:
                uint64_t v17 = 0x40DF400000000000;
                goto LABEL_160;
              case 1024:
                uint64_t v17 = 0x40E5888000000000;
                break;
              default:
                goto LABEL_184;
            }
          }
          else
          {
            if (v16 < 0x2000)
            {
              if (v16 != 2048)
              {
                if (v16 != 4096) {
                  goto LABEL_184;
                }
                uint64_t v17 = 0x40E5888000000000;
                goto LABEL_154;
              }
              uint64_t v17 = 0x40E5888000000000;
LABEL_160:
              uint64_t v18 = 0xC6C70636DLL;
              uint64_t v20 = 0x100000004;
              uint64_t v19 = 0x1000000002;
              goto LABEL_183;
            }
            if (v16 == 0x2000)
            {
              uint64_t v17 = 0x40E5888000000000;
              goto LABEL_181;
            }
            if (v16 != 0x4000) {
              goto LABEL_184;
            }
            uint64_t v17 = 0x40E7700000000000;
          }
        }
        else
        {
          if (v16 <= 15)
          {
            if (v16 == 0x8000000000000000)
            {
              uint64_t v17 = 0x40E7700000000000;
              uint64_t v18 = 1902324531;
              goto LABEL_146;
            }
            uint64_t v17 = 0x40BF400000000000;
            uint64_t v18 = 0xC6C70636DLL;
            uint64_t v20 = 0x100000002;
            uint64_t v19 = 0x1000000001;
            if (v16 == 4)
            {
LABEL_183:
              *(void *)BytePtr = v17;
              *((void *)BytePtr + 1) = v18;
              *((void *)BytePtr + 2) = v20;
              *((_DWORD *)BytePtr + 6) = v20;
              *(void *)(BytePtr + 28) = v19;
              *((_DWORD *)BytePtr + 9) = 0;
              goto LABEL_184;
            }
            if (v16 != 8) {
              goto LABEL_184;
            }
            uint64_t v17 = 0x40BF400000000000;
            goto LABEL_160;
          }
          if (v16 > 63)
          {
            if (v16 != 64)
            {
              if (v16 != 128) {
                goto LABEL_184;
              }
              uint64_t v17 = 0x40D7700000000000;
              goto LABEL_160;
            }
            uint64_t v17 = 0x40D7700000000000;
          }
          else
          {
            if (v16 != 16)
            {
              if (v16 != 32) {
                goto LABEL_184;
              }
              uint64_t v17 = 0x40CF400000000000;
              goto LABEL_160;
            }
            uint64_t v17 = 0x40CF400000000000;
          }
        }
        uint64_t v18 = 0xC6C70636DLL;
        uint64_t v20 = 0x100000002;
        uint64_t v19 = 0x1000000001;
        goto LABEL_183;
      }
      goto LABEL_380;
    }
LABEL_378:
    APSLogErrorAt(0);
    return 4294954516;
  }
  unsigned int v21 = 0;
  unsigned int v22 = 65;
  uint64_t v23 = 1;
  do
  {
    if ((v23 & a1) != 0) {
      ++v21;
    }
    v23 *= 2;
    --v22;
  }
  while (v22 > 1);
  if (!v21) {
    goto LABEL_378;
  }
  CFIndex v24 = 56 * v21;
  int v25 = CFDataCreateMutable(allocator, v24);
  if (v25)
  {
    CFDataRef v13 = v25;
    CFDataSetLength(v25, v24);
    int v26 = (UInt8 *)CFDataGetBytePtr(v13);
    int v27 = 65;
    uint64_t v28 = 1;
    while ((v28 & a1) == 0)
    {
LABEL_371:
      v28 *= 2;
      if (--v27 <= 1)
      {
LABEL_375:
        uint64_t result = 0;
        *a5 = v13;
        return result;
      }
    }
    if (a3)
    {
      APAudioFormatToPCMASBD(v28, (uint64_t)v26);
      goto LABEL_370;
    }
    if (v28 > 0x3FFFFFFF)
    {
      if (v28 <= 0x7FFFFFFFFFFFLL)
      {
        if (v28 > 0x7FFFFFFFFFLL)
        {
          if (v28 <= 0x7FFFFFFFFFFLL)
          {
            if (v28 <= 0x1FFFFFFFFFFLL)
            {
              if (v28 != 0x8000000000)
              {
                if (v28 == 0x10000000000)
                {
                  uint64_t v29 = 0x40E7700000000000;
                  uint64_t v30 = 1633772320;
LABEL_353:
                  uint64_t v32 = 0x40000000000;
                  goto LABEL_354;
                }
LABEL_370:
                uint64_t v33 = *(void *)v26;
                *((void *)v26 + 5) = *(void *)v26;
                *((void *)v26 + 6) = v33;
                v26 += 56;
                goto LABEL_371;
              }
              uint64_t v29 = 0x40E7700000000000;
              uint64_t v30 = 1633772320;
              goto LABEL_330;
            }
            if (v28 == 0x20000000000)
            {
              uint64_t v29 = 0x40E7700000000000;
              uint64_t v30 = 1633772389;
              uint64_t v32 = 0x1E000000000;
              goto LABEL_348;
            }
            if (v28 != 0x40000000000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40E7700000000000;
            uint64_t v30 = 1633772389;
            uint64_t v32 = 0x1E000000000;
LABEL_354:
            uint64_t v31 = 8;
            goto LABEL_369;
          }
          if (v28 <= 0x1FFFFFFFFFFFLL)
          {
            if (v28 != 0x80000000000)
            {
              if (v28 != 0x100000000000) {
                goto LABEL_370;
              }
              uint64_t v31 = 0x1000000006;
              uint64_t v32 = 0x10000000CLL;
              goto LABEL_293;
            }
            uint64_t v29 = 0x40DF400000000000;
            goto LABEL_335;
          }
          if (v28 == 0x200000000000)
          {
            uint64_t v31 = 0x2000000001;
            uint64_t v30 = 0x16C70636DLL;
            uint64_t v29 = 0x40E7700000000000;
            uint64_t v32 = 0x100000004;
            goto LABEL_369;
          }
          if (v28 != 0x400000000000) {
            goto LABEL_370;
          }
          uint64_t v31 = 0x2000000002;
          uint64_t v32 = 0x100000008;
LABEL_343:
          uint64_t v29 = 0x40E7700000000000;
          uint64_t v30 = 0x16C70636DLL;
          goto LABEL_369;
        }
        if (v28 <= 0x1FFFFFFFFLL)
        {
          switch(v28)
          {
            case 0x40000000:
              uint64_t v29 = 0x40E7700000000000;
              uint64_t v30 = 1869641075;
              uint64_t v32 = 0x3C000000000;
LABEL_337:
              uint64_t v31 = 1;
              goto LABEL_369;
            case 0x80000000:
              uint64_t v29 = 0x40E5888000000000;
              break;
            case 0x100000000:
              uint64_t v29 = 0x40E7700000000000;
              break;
            default:
              goto LABEL_370;
          }
          goto LABEL_335;
        }
        if (v28 > 0x7FFFFFFFFLL)
        {
          if (v28 != 0x800000000)
          {
            if (v28 != 0x4000000000) {
              goto LABEL_370;
            }
            uint64_t v31 = 0x1000000008;
            uint64_t v32 = 0x100000010;
LABEL_293:
            uint64_t v29 = 0x40E7700000000000;
            uint64_t v30 = 0xC6C70636DLL;
            goto LABEL_369;
          }
          uint64_t v31 = 16;
          goto LABEL_358;
        }
        if (v28 != 0x200000000)
        {
          if (v28 != 0x400000000) {
            goto LABEL_370;
          }
          uint64_t v31 = 12;
LABEL_358:
          uint64_t v29 = 0x40E7700000000000;
          uint64_t v30 = 1902324531;
          goto LABEL_365;
        }
        uint64_t v29 = 0x40E7700000000000;
        uint64_t v30 = 1902324531;
LABEL_322:
        uint64_t v32 = 0x60000000000;
        goto LABEL_354;
      }
      if (v28 > 0x3FFFFFFFFFFFFFLL)
      {
        if (v28 <= 0x3FFFFFFFFFFFFFFLL)
        {
          if (v28 <= 0xFFFFFFFFFFFFFFLL)
          {
            if (v28 != 0x40000000000000)
            {
              if (v28 != 0x80000000000000) {
                goto LABEL_370;
              }
              uint64_t v30 = 1902207331;
              goto LABEL_329;
            }
            uint64_t v30 = 1902207331;
            goto LABEL_318;
          }
          if (v28 != 0x100000000000000)
          {
            if (v28 != 0x200000000000000) {
              goto LABEL_370;
            }
            uint64_t v30 = 1902207848;
LABEL_318:
            uint64_t v29 = 0x40E7700000000000;
LABEL_319:
            uint64_t v32 = 0x40000000000;
            goto LABEL_362;
          }
          uint64_t v30 = 1902207331;
LABEL_352:
          uint64_t v29 = 0x40E7700000000000;
          goto LABEL_353;
        }
        if (v28 <= 0x1FFFFFFFFFFFFFFFLL)
        {
          if (v28 == 0x400000000000000)
          {
            uint64_t v30 = 1902207848;
LABEL_329:
            uint64_t v29 = 0x40E7700000000000;
LABEL_330:
            uint64_t v32 = 0x40000000000;
LABEL_348:
            uint64_t v31 = 6;
            goto LABEL_369;
          }
          if (v28 != 0x1000000000000000) {
            goto LABEL_370;
          }
          uint64_t v30 = 1902207848;
          goto LABEL_352;
        }
        if (v28 == 0x2000000000000000)
        {
          uint64_t v32 = 0x100000000000;
          uint64_t v30 = 0x3716C6163;
          uint64_t v29 = 0x40E7700000000000;
          goto LABEL_362;
        }
        if (v28 != 0x4000000000000000) {
          goto LABEL_370;
        }
        uint64_t v29 = 0x40E7700000000000;
        uint64_t v30 = 1902324531;
        goto LABEL_313;
      }
      if (v28 <= 0x3FFFFFFFFFFFFLL)
      {
        if (v28 == 0x800000000000)
        {
          uint64_t v31 = 0x2000000006;
          uint64_t v32 = 0x100000018;
          goto LABEL_343;
        }
        if (v28 == 0x1000000000000)
        {
          uint64_t v31 = 0x2000000008;
          uint64_t v32 = 0x100000020;
          goto LABEL_343;
        }
        if (v28 != 0x2000000000000) {
          goto LABEL_370;
        }
        uint64_t v30 = 1700997939;
        uint64_t v29 = 0x40E7700000000000;
LABEL_313:
        uint64_t v32 = 0x60000000000;
        goto LABEL_362;
      }
      if (v28 > 0xFFFFFFFFFFFFFLL)
      {
        if (v28 == 0x10000000000000)
        {
          uint64_t v31 = 12;
        }
        else
        {
          if (v28 != 0x20000000000000) {
            goto LABEL_370;
          }
          uint64_t v31 = 16;
        }
        uint64_t v30 = 1700997939;
        uint64_t v29 = 0x40E7700000000000;
LABEL_365:
        uint64_t v32 = 0x60000000000;
        goto LABEL_369;
      }
      if (v28 != 0x4000000000000)
      {
        if (v28 != 0x8000000000000) {
          goto LABEL_370;
        }
        uint64_t v30 = 1700997939;
        uint64_t v29 = 0x40E7700000000000;
        goto LABEL_322;
      }
      uint64_t v30 = 1700997939;
      uint64_t v29 = 0x40E7700000000000;
LABEL_332:
      uint64_t v32 = 0x60000000000;
      goto LABEL_348;
    }
    if (v28 >= 0x8000)
    {
      if (v28 >= 0x400000)
      {
        if (v28 > 0x3FFFFFF)
        {
          if (v28 > 0xFFFFFFF)
          {
            if (v28 == 0x10000000)
            {
              uint64_t v29 = 0x40CF400000000000;
              uint64_t v30 = 1869641075;
              uint64_t v32 = 0x14000000000;
              goto LABEL_337;
            }
            if (v28 != 0x20000000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40D7700000000000;
            uint64_t v30 = 1869641075;
            goto LABEL_336;
          }
          if (v28 == 0x4000000)
          {
            uint64_t v29 = 0x40CF400000000000;
          }
          else
          {
            if (v28 != 0x8000000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40D7700000000000;
          }
LABEL_335:
          uint64_t v30 = 1633772389;
LABEL_336:
          uint64_t v32 = 0x1E000000000;
          goto LABEL_337;
        }
        if (v28 <= 0xFFFFFF)
        {
          if (v28 == 0x400000)
          {
            uint64_t v29 = 0x40E5888000000000;
          }
          else
          {
            if (v28 != 0x800000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40E7700000000000;
          }
          uint64_t v30 = 1633772320;
          goto LABEL_319;
        }
        if (v28 == 0x1000000)
        {
          uint64_t v29 = 0x40E5888000000000;
        }
        else
        {
          if (v28 != 0x2000000) {
            goto LABEL_370;
          }
          uint64_t v29 = 0x40E7700000000000;
        }
        uint64_t v30 = 1633772389;
        uint64_t v32 = 0x1E000000000;
LABEL_362:
        uint64_t v31 = 2;
        goto LABEL_369;
      }
      if (v28 >= 0x40000)
      {
        if (v28 >= 0x100000)
        {
          if (v28 != 0x100000)
          {
            if (v28 != 0x200000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40E7700000000000;
LABEL_297:
            uint64_t v30 = 0x3616C6163;
LABEL_361:
            uint64_t v32 = 0x16000000000;
            goto LABEL_362;
          }
          uint64_t v29 = 0x40E7700000000000;
        }
        else
        {
          if (v28 != 0x40000)
          {
            if (v28 != 0x80000) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40E5888000000000;
            goto LABEL_297;
          }
          uint64_t v29 = 0x40E5888000000000;
        }
        uint64_t v30 = 0x1616C6163;
        goto LABEL_361;
      }
      if (v28 != 0x8000)
      {
        if (v28 != 0x10000)
        {
          if (v28 != 0x20000) {
            goto LABEL_370;
          }
          uint64_t v29 = 0x40E7700000000000;
LABEL_367:
          uint64_t v30 = 0xC6C70636DLL;
          uint64_t v32 = 0x100000006;
          uint64_t v31 = 0x1800000002;
          goto LABEL_369;
        }
        uint64_t v29 = 0x40E7700000000000;
LABEL_340:
        uint64_t v30 = 0xC6C70636DLL;
        uint64_t v32 = 0x100000003;
        uint64_t v31 = 0x1800000001;
        goto LABEL_369;
      }
      uint64_t v29 = 0x40E7700000000000;
      goto LABEL_346;
    }
    if (v28 > 255)
    {
      if (v28 <= 2047)
      {
        switch(v28)
        {
          case 256:
            uint64_t v29 = 0x40DF400000000000;
            break;
          case 512:
            uint64_t v29 = 0x40DF400000000000;
            goto LABEL_346;
          case 1024:
            uint64_t v29 = 0x40E5888000000000;
            break;
          default:
            goto LABEL_370;
        }
      }
      else
      {
        if (v28 < 0x2000)
        {
          if (v28 != 2048)
          {
            if (v28 != 4096) {
              goto LABEL_370;
            }
            uint64_t v29 = 0x40E5888000000000;
            goto LABEL_340;
          }
          uint64_t v29 = 0x40E5888000000000;
LABEL_346:
          uint64_t v30 = 0xC6C70636DLL;
          uint64_t v32 = 0x100000004;
          uint64_t v31 = 0x1000000002;
          goto LABEL_369;
        }
        if (v28 == 0x2000)
        {
          uint64_t v29 = 0x40E5888000000000;
          goto LABEL_367;
        }
        if (v28 != 0x4000) {
          goto LABEL_370;
        }
        uint64_t v29 = 0x40E7700000000000;
      }
    }
    else
    {
      if (v28 <= 15)
      {
        if (v28 == 0x8000000000000000)
        {
          uint64_t v29 = 0x40E7700000000000;
          uint64_t v30 = 1902324531;
          goto LABEL_332;
        }
        uint64_t v29 = 0x40BF400000000000;
        uint64_t v30 = 0xC6C70636DLL;
        uint64_t v32 = 0x100000002;
        uint64_t v31 = 0x1000000001;
        if (v28 == 4)
        {
LABEL_369:
          *(void *)int v26 = v29;
          *((void *)v26 + 1) = v30;
          *((void *)v26 + 2) = v32;
          *((_DWORD *)v26 + 6) = v32;
          *(void *)(v26 + 28) = v31;
          *((_DWORD *)v26 + 9) = 0;
          goto LABEL_370;
        }
        if (v28 != 8) {
          goto LABEL_370;
        }
        uint64_t v29 = 0x40BF400000000000;
        goto LABEL_346;
      }
      if (v28 > 63)
      {
        if (v28 != 64)
        {
          if (v28 != 128) {
            goto LABEL_370;
          }
          uint64_t v29 = 0x40D7700000000000;
          goto LABEL_346;
        }
        uint64_t v29 = 0x40D7700000000000;
      }
      else
      {
        if (v28 != 16)
        {
          if (v28 != 32) {
            goto LABEL_370;
          }
          uint64_t v29 = 0x40CF400000000000;
          goto LABEL_346;
        }
        uint64_t v29 = 0x40CF400000000000;
      }
    }
    uint64_t v30 = 0xC6C70636DLL;
    uint64_t v32 = 0x100000002;
    uint64_t v31 = 0x1000000001;
    goto LABEL_369;
  }
LABEL_380:
  APSLogErrorAt(0);
  return 4294954510;
}

uint64_t APCompressionTypeToAPAudioFormat(int a1, uint64_t *a2)
{
  uint64_t result = 4294960561;
  if (a1 > 255)
  {
    if (a1 > 1023)
    {
      if (a1 == 1024)
      {
        uint64_t v5 = 0x40000000000000;
      }
      else
      {
        if (a1 != 2048) {
          return result;
        }
        uint64_t v5 = 0x2000000000000000;
      }
    }
    else if (a1 == 256)
    {
      uint64_t v5 = 0x4000000000000000;
    }
    else
    {
      if (a1 != 512) {
        return result;
      }
      uint64_t v5 = 0x200000000000000;
    }
LABEL_15:
    uint64_t result = 0;
    *a2 = v5;
  }
  else
  {
    int v4 = a1 - 1;
    uint64_t v5 = 2048;
    switch(v4)
    {
      case 0:
        goto LABEL_15;
      case 1:
        uint64_t v5 = 0x40000;
        goto LABEL_15;
      case 3:
        uint64_t v5 = 0x400000;
        goto LABEL_15;
      case 7:
        uint64_t v5 = 0x1000000;
        goto LABEL_15;
      default:
        return result;
    }
  }
  return result;
}

uint64_t APCompressionTypeToAPAudioFormatIndex(int a1, uint64_t *a2)
{
  if (!a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t result = 4294960561;
  if (a1 > 255)
  {
    if (a1 <= 1023)
    {
      if (a1 == 256)
      {
        uint64_t result = 0;
        uint64_t v4 = 62;
      }
      else
      {
        if (a1 != 512) {
          return result;
        }
        uint64_t result = 0;
        uint64_t v4 = 57;
      }
    }
    else
    {
      switch(a1)
      {
        case 1024:
          uint64_t result = 0;
          uint64_t v4 = 54;
          break;
        case 2048:
          uint64_t result = 0;
          uint64_t v4 = 61;
          break;
        case 4096:
          uint64_t result = 0;
          uint64_t v4 = 64;
          break;
        default:
          return result;
      }
    }
  }
  else
  {
    switch(a1)
    {
      case 1:
        uint64_t result = 0;
        uint64_t v4 = 11;
        break;
      case 2:
        uint64_t result = 0;
        uint64_t v4 = 18;
        break;
      case 3:
      case 5:
      case 6:
      case 7:
        return result;
      case 4:
        uint64_t result = 0;
        uint64_t v4 = 22;
        break;
      case 8:
        uint64_t result = 0;
        uint64_t v4 = 24;
        break;
      default:
        if (a1 != 128) {
          return result;
        }
        uint64_t result = 0;
        uint64_t v4 = 49;
        break;
    }
  }
  *a2 = v4;
  return result;
}

uint64_t APAudioFormatCopyPreferredBufferedAudioFormats(CFMutableArrayRef *a1)
{
  uint64_t v9 = 0;
  CFMutableArrayRef Mutable = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  CFMutableArrayRef v3 = Mutable;
  if (!APAudioFormatGetCompressionTypeOverrideAudioFormat(&v9))
  {
    uint64_t appended = CFArrayAppendInt64();
    if (appended)
    {
      uint64_t v5 = appended;
    }
    else
    {
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v5 = appended;
      }
      else
      {
        uint64_t appended = CFArrayAppendInt64();
        if (appended)
        {
          uint64_t v5 = appended;
        }
        else
        {
          uint64_t SupportedTransportAudioFormatsForBufferedSender = APAudioFormatGetSupportedTransportAudioFormatsForBufferedSender(0);
          uint64_t v7 = 0;
          while (1)
          {
            if (((1 << v7) & SupportedTransportAudioFormatsForBufferedSender) != 0)
            {
              uint64_t appended = CFArrayAppendInt64();
              if (appended) {
                break;
              }
            }
            if (++v7 == 64) {
              goto LABEL_12;
            }
          }
          uint64_t v5 = appended;
        }
      }
    }
    goto LABEL_15;
  }
  uint64_t appended = CFArrayAppendInt64();
  if (appended)
  {
    uint64_t v5 = appended;
LABEL_15:
    APSLogErrorAt(appended);
    goto LABEL_16;
  }
LABEL_12:
  uint64_t v5 = 0;
  if (!a1)
  {
LABEL_16:
    CFRelease(v3);
    return v5;
  }
  *a1 = v3;
  return v5;
}

BOOL APAudioFormatGetCompressionTypeOverrideAudioFormat(void *a1)
{
  uint64_t v8 = 0;
  if (!a1)
  {
    uint64_t v4 = 0;
    goto LABEL_10;
  }
  int CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  if ((CFPreferenceNumberWithDefault & 0xF) == 0)
  {
    uint64_t v4 = 0;
    int v5 = 0;
    goto LABEL_12;
  }
  int v3 = CFPreferenceNumberWithDefault;
  if (gLogCategory_APAudioFormat <= 50 && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  int v5 = APCompressionTypeToAPAudioFormat(v3, &v8);
  uint64_t v4 = v8;
  if (!v5)
  {
    if (!v8)
    {
LABEL_10:
      int v5 = -6705;
      goto LABEL_12;
    }
    int v5 = 0;
    *a1 = v8;
    uint64_t v4 = 1;
  }
LABEL_12:
  if (v5) {
    BOOL v6 = 1;
  }
  else {
    BOOL v6 = v4 == 0;
  }
  return !v6;
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsForBufferedSender(uint64_t *a1)
{
  char CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
  }
  int v3 = APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed;
  unint64_t BufferedPassthroughSupportedFormats = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed);
  if (a1)
  {
    uint64_t v5 = 0x200000;
    if (!CFPreferenceNumberWithDefault) {
      uint64_t v5 = 0x400000;
    }
    *a1 = v5;
  }
  uint64_t v6 = 0x400000;
  if (v3) {
    uint64_t v6 = 0x18000C00000;
  }
  unint64_t v7 = BufferedPassthroughSupportedFormats | v6;
  if (CFPreferenceNumberWithDefault) {
    return v7 | 0x200000;
  }
  else {
    return v7;
  }
}

unint64_t APAudioFormatGetBufferedPassthroughSupportedFormats(int a1)
{
  if (!IsAppleTV())
  {
    if (APSIsAPMSpeaker_sCheckOnce != -1) {
      dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
    }
    if (!APSIsAPMSpeaker_sIsAPMSpeaker) {
      return 0;
    }
  }
  if (APAudioFormatGetBufferedPassthroughSupportedFormats_initOnce != -1) {
    dispatch_once(&APAudioFormatGetBufferedPassthroughSupportedFormats_initOnce, &__block_literal_global_107);
  }
  if (!APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughEnabled) {
    return 0;
  }
  uint64_t v2 = 0x18000E80000;
  if (a1 != 0 && APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughDDPAtmosEnabled != 0) {
    uint64_t v2 = 0x3E018000E80000;
  }
  unint64_t v3 = 0x37C0018000E80000;
  if (a1 != 0 && APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughDDPAtmosEnabled != 0) {
    unint64_t v3 = 0xF7FE018E00E80000;
  }
  if (APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughEncryptedEnabled) {
    return v3;
  }
  else {
    return v2;
  }
}

uint64_t __APAudioFormatGetBufferedPassthroughSupportedFormats_block_invoke()
{
  APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughEnabled = APSSettingsIsFeatureEnabled(@"BufferedPassthrough");
  APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughDDPAtmosEnabled = APSSettingsIsFeatureEnabled(@"BufferedPassthroughDDP");
  uint64_t result = APSSettingsIsFeatureEnabled(@"BufferedPassthroughEncrypted");
  APAudioFormatGetBufferedPassthroughSupportedFormats_sPassthroughEncryptedEnabled = result;
  return result;
}

void __APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_block_invoke()
{
  if (APSSettingsIsFeatureEnabled(@"BufferedSurround")) {
    APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed = 1;
  }
  if (IsAppleTV() && MGGetProductType() != 1110205732) {
    goto LABEL_8;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker) {
LABEL_8:
  }
    APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed = 1;
}

uint64_t APAudioFormatCopyPreferredRealTimeAudioFormats(int a1, CFMutableArrayRef *a2)
{
  uint64_t v9 = 0;
  CFMutableArrayRef Mutable = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  if (Mutable)
  {
    CFMutableArrayRef v5 = Mutable;
    if (APAudioFormatGetCompressionTypeOverrideAudioFormat(&v9))
    {
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
LABEL_21:
        APSLogErrorAt(appended);
        goto LABEL_22;
      }
    }
    else if (a1)
    {
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
    }
    else
    {
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
      uint64_t appended = CFArrayAppendInt64();
      if (appended)
      {
        uint64_t v7 = appended;
        goto LABEL_21;
      }
    }
    uint64_t v7 = 0;
    if (!a2)
    {
LABEL_22:
      CFRelease(v5);
      return v7;
    }
    *a2 = v5;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  return v7;
}

BOOL APAudioFormatIsLowLatencyAudioSurroundSender()
{
  return (APSGetPersistentGroupModel() & 0xFFFFFFFD) == 0;
}

BOOL APAudioFormatIsLowLatencyAudioSurroundReceiver()
{
  uint64_t v0 = MGGetProductType();
  return v0 == 1540760353 || v0 == 4240173202 || v0 == 2702125347;
}

uint64_t APAudioFormatGetLowLatencyAudioFramesPerPacket()
{
  return 512;
}

uint64_t APAudioFormatCopyPreferredLowLatencyAudioFormats(CFMutableArrayRef *a1)
{
  uint64_t v10 = 0;
  CFMutableArrayRef Mutable = CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  CFMutableArrayRef v3 = Mutable;
  if (!APAudioFormatGetCompressionTypeOverrideAudioFormat(&v10))
  {
    BOOL v6 = (APSGetPersistentGroupModel() & 0xFFFFFFFD) == 0;
    uint64_t v7 = 0;
    if (APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundSender", 0, v6)) {
      uint64_t v8 = 0x40002000000;
    }
    else {
      uint64_t v8 = 0x2000000;
    }
    while (1)
    {
      if (((1 << v7) & v8) != 0)
      {
        uint64_t appended = CFArrayAppendInt64();
        if (appended) {
          break;
        }
      }
      if (++v7 == 64) {
        goto LABEL_11;
      }
    }
    uint64_t v5 = appended;
    goto LABEL_14;
  }
  uint64_t appended = CFArrayAppendInt64();
  if (appended)
  {
    uint64_t v5 = appended;
LABEL_14:
    APSLogErrorAt(appended);
    goto LABEL_15;
  }
LABEL_11:
  uint64_t v5 = 0;
  if (!a1)
  {
LABEL_15:
    CFRelease(v3);
    return v5;
  }
  *a1 = v3;
  return v5;
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsLowLatencySender(void *a1)
{
  BOOL v2 = (APSGetPersistentGroupModel() & 0xFFFFFFFD) == 0;
  int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundSender", 0, v2);
  if (a1) {
    *a1 = 0x2000000;
  }
  if (IntWithOverrideAndDefault) {
    return 0x40002000000;
  }
  else {
    return 0x2000000;
  }
}

uint64_t APAudioFormatChooseFromPreferredAudioFormats(const __CFArray *a1, uint64_t a2, uint64_t a3)
{
  CFIndex Count = CFArrayGetCount(a1);
  if (a3 && Count >= 1)
  {
    CFArrayGetValueAtIndex(a1, 0);
    CFGetInt64();
    APSLogErrorAt(4294960591);
  }
  return 4294960591;
}

uint64_t ASBDGetBitsPerChannel(uint64_t a1)
{
  int v2 = *(_DWORD *)(a1 + 8);
  uint64_t result = 16;
  if (v2 > 1634492770)
  {
    BOOL v4 = v2 == 1634492771;
    int v5 = 1869641075;
  }
  else
  {
    BOOL v4 = v2 == 1633772320;
    int v5 = 1633772389;
  }
  if (!v4 && v2 != v5) {
    return *(unsigned int *)(a1 + 32);
  }
  return result;
}

uint64_t APAudioFormatAudioCompressionTypeSupportsVBR(int a1)
{
  uint64_t result = 0;
  if (a1 > 255)
  {
    if (a1 > 1023)
    {
      if (a1 != 4096 && a1 != 1024) {
        return result;
      }
    }
    else if (a1 != 256 && a1 != 512)
    {
      return result;
    }
    return 1;
  }
  if (a1 <= 0x20 && ((1 << a1) & 0x100000110) != 0 || a1 == 128) {
    return 1;
  }
  return result;
}

uint64_t APAudioFormatSupportsVBR(uint64_t a1)
{
  int v2 = 1;
  if (a1 <= 0x7FFFFFFFFFLL)
  {
    if (a1 >= 0x80000)
    {
      if (a1 > 0xFFFFFF)
      {
        if (a1 > 0x1FFFFFFFFLL)
        {
          if (a1 == 0x200000000 || a1 == 0x400000000) {
            goto LABEL_53;
          }
          uint64_t v4 = 0x800000000;
LABEL_44:
          if (a1 == v4) {
            goto LABEL_53;
          }
          goto LABEL_78;
        }
        if (a1 != 0x1000000 && a1 != 0x2000000) {
          goto LABEL_78;
        }
        goto LABEL_73;
      }
      if (a1 < 0x200000)
      {
        if (a1 != 0x80000 && a1 != 0x100000) {
          goto LABEL_78;
        }
      }
      else if (a1 != 0x200000)
      {
        if (a1 != 0x400000 && a1 != 0x800000) {
          goto LABEL_78;
        }
        goto LABEL_56;
      }
    }
    else
    {
      if (a1 <= 2047)
      {
        if (a1 <= 31)
        {
          if (a1 == 0x8000000000000000) {
            goto LABEL_53;
          }
          if (a1 == 8) {
            goto LABEL_75;
          }
          goto LABEL_78;
        }
        if (a1 != 32 && a1 != 128 && a1 != 512) {
          goto LABEL_78;
        }
        goto LABEL_75;
      }
      if (a1 < 0x8000)
      {
        if (a1 != 2048 && a1 != 0x2000) {
          goto LABEL_78;
        }
        goto LABEL_75;
      }
      if (a1 == 0x8000 || a1 == 0x20000) {
        goto LABEL_75;
      }
      if (a1 != 0x40000) {
        goto LABEL_78;
      }
    }
    int v2 = 2;
    goto LABEL_75;
  }
  if (a1 > 0x7FFFFFFFFFFFFLL)
  {
    if (a1 > 0xFFFFFFFFFFFFFFLL)
    {
      if (a1 <= 0xFFFFFFFFFFFFFFFLL)
      {
        if (a1 != 0x100000000000000)
        {
          if (a1 != 0x200000000000000 && a1 != 0x400000000000000) {
            goto LABEL_78;
          }
          goto LABEL_49;
        }
LABEL_53:
        int v2 = 1902207331;
        goto LABEL_75;
      }
      if (a1 == 0x1000000000000000)
      {
LABEL_49:
        int v2 = 1902207848;
        goto LABEL_75;
      }
      if (a1 == 0x2000000000000000)
      {
        int v2 = 1902928227;
        goto LABEL_75;
      }
      uint64_t v5 = 0x4000000000000000;
LABEL_62:
      if (a1 == v5) {
        goto LABEL_63;
      }
LABEL_78:
      APSLogErrorAt(4294960561);
      return 0;
    }
    if (a1 <= 0x1FFFFFFFFFFFFFLL)
    {
      if (a1 != 0x8000000000000)
      {
        uint64_t v5 = 0x10000000000000;
        goto LABEL_62;
      }
    }
    else if (a1 != 0x20000000000000)
    {
      if (a1 == 0x40000000000000) {
        goto LABEL_53;
      }
      uint64_t v4 = 0x80000000000000;
      goto LABEL_44;
    }
LABEL_63:
    int v2 = 128;
    goto LABEL_75;
  }
  if (a1 <= 0x3FFFFFFFFFFFLL)
  {
    if (a1 > 0x1FFFFFFFFFFLL)
    {
      if (a1 != 0x20000000000 && a1 != 0x40000000000)
      {
        uint64_t v3 = 0x200000000000;
LABEL_69:
        if (a1 == v3) {
          goto LABEL_75;
        }
        goto LABEL_78;
      }
LABEL_73:
      int v2 = 8;
      goto LABEL_75;
    }
    if (a1 != 0x8000000000 && a1 != 0x10000000000) {
      goto LABEL_78;
    }
LABEL_56:
    int v2 = 4;
    goto LABEL_75;
  }
  if (a1 <= 0xFFFFFFFFFFFFLL)
  {
    if (a1 == 0x400000000000) {
      goto LABEL_75;
    }
    uint64_t v3 = 0x800000000000;
    goto LABEL_69;
  }
  if (a1 != 0x1000000000000)
  {
    if (a1 != 0x2000000000000)
    {
      uint64_t v5 = 0x4000000000000;
      goto LABEL_62;
    }
    goto LABEL_63;
  }
LABEL_75:
  return APAudioFormatAudioCompressionTypeSupportsVBR(v2);
}

uint64_t APAudioFormatCompressionTypeToAudioFormatID(int a1)
{
  if (a1 > 255)
  {
    if (a1 > 1023)
    {
      if (a1 == 1024) {
        return 1902207331;
      }
      if (a1 == 2048) {
        return 1902928227;
      }
    }
    else
    {
      if (a1 == 256) {
        return 1902324531;
      }
      if (a1 == 512) {
        return 1902207848;
      }
    }
    return 0;
  }
  int v1 = a1 - 1;
  uint64_t result = 1819304813;
  switch(v1)
  {
    case 0:
      return result;
    case 1:
      uint64_t result = 1634492771;
      break;
    case 3:
      uint64_t result = 1633772320;
      break;
    case 7:
      uint64_t result = 1633772389;
      break;
    default:
      return 0;
  }
  return result;
}

uint64_t APAudioFormatIDToAPCompressionType(int a1)
{
  if (a1 <= 1869641074)
  {
    if (a1 > 1634492770)
    {
      if (a1 == 1634492771) {
        return 2;
      }
      if (a1 == 1819304813) {
        return 1;
      }
    }
    else
    {
      if (a1 == 1633772320) {
        return 4;
      }
      if (a1 == 1633772389) {
        return 8;
      }
    }
  }
  else if (a1 <= 1902207847)
  {
    if (a1 == 1869641075) {
      return 32;
    }
    if (a1 == 1902207331) {
      return 1024;
    }
  }
  else
  {
    switch(a1)
    {
      case 1902207848:
        return 512;
      case 1902324531:
        return 256;
      case 1902928227:
        return 2048;
    }
  }
  return 0;
}

uint64_t APAudioFormatFindMaxChannelPerFrameFromAudioFormat(uint64_t a1, int *a2)
{
  if ((a1 & 0x1109054200000000) != 0)
  {
    int v2 = 8;
  }
  else if ((a1 & 0x8484928000000000) != 0)
  {
    int v2 = 6;
  }
  else if ((a1 & 0x6242400003FEAAA8) != 0)
  {
    int v2 = 2;
  }
  else
  {
    if ((a1 & 0x2801FC015554) == 0)
    {
      uint64_t v3 = 4294960591;
      APSSignalErrorAt(4294960591);
      return v3;
    }
    int v2 = 1;
  }
  uint64_t v3 = 0;
  *a2 = v2;
  return v3;
}

BOOL APAudioFormatIndexIsDolbyOrAtmos(unint64_t a1)
{
  return a1 <= 0x3F && ((1 << a1) & 0xC03E000E00000000) != 0;
}

uint64_t APAudioFormatCopyTransportFormatDescriptionForSourceContentFormatDescriptionAndSupportedFormats(const opaqueCMFormatDescription *a1, uint64_t a2, CMAudioFormatDescriptionRef *a3)
{
  memset(layoutSize, 0, sizeof(layoutSize));
  memset(&layout, 0, sizeof(layout));
  CMAudioFormatDescriptionRef formatDescriptionOut = 0;
  char CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  if (!a1
    || (char v7 = CFPreferenceNumberWithDefault,
        (StreamBasicDescriptiouint64_t n = CMAudioFormatDescriptionGetStreamBasicDescription(a1)) == 0))
  {
    APSLogErrorAt(0);
    goto LABEL_67;
  }
  UInt32 mChannelsPerFrame = StreamBasicDescription->mChannelsPerFrame;
  if (mChannelsPerFrame - 1 >= 2)
  {
    if (mChannelsPerFrame != 6)
    {
      if (mChannelsPerFrame != 8)
      {
        int v11 = gLogCategory_APAudioFormat;
        if (gLogCategory_APAudioFormat <= 50)
        {
          if (gLogCategory_APAudioFormat == -1 && !_LogCategory_Initialize()) {
            goto LABEL_67;
          }
LABEL_66:
          LogPrintF();
LABEL_67:
          int v11 = gLogCategory_APAudioFormat;
        }
LABEL_68:
        if (v11 <= 90 && (v11 != -1 || _LogCategory_Initialize()))
        {
          uint64_t v22 = 4294960561;
          LogPrintF();
        }
        else
        {
          uint64_t v22 = 4294960561;
        }
        goto LABEL_83;
      }
      uint64_t v10 = 0x40E7700000000000;
      if ((a2 & 0x10000000000) != 0)
      {
        uint64_t v12 = 1633772320;
        goto LABEL_48;
      }
      if ((a2 & 0x40000000000) != 0) {
        goto LABEL_49;
      }
      if (gLogCategory_APAudioFormat <= 50
        && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
    }
    signed int MediaSubType = CMFormatDescriptionGetMediaSubType(a1);
    if (MediaSubType > 1885692722)
    {
      if (MediaSubType <= 1902469938)
      {
        if (MediaSubType != 1885692723)
        {
          int v14 = 1902324531;
LABEL_33:
          if (MediaSubType != v14) {
            goto LABEL_50;
          }
LABEL_44:
          uint64_t v12 = 1633772320;
          uint64_t v10 = 0x40E7700000000000;
          if ((a2 & 0x10000000000) == 0)
          {
            if ((a2 & 0x40000000000) == 0)
            {
              if ((a2 & 0x8000000000) == 0)
              {
LABEL_52:
                if (gLogCategory_APAudioFormat <= 50
                  && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
                {
                  LogPrintF();
                }
                goto LABEL_59;
              }
LABEL_56:
              int v19 = 6;
              int v20 = 1024;
              uint64_t v21 = 0x8000000000;
              goto LABEL_73;
            }
LABEL_49:
            uint64_t v12 = 1633772389;
            int v19 = 8;
            int v20 = 480;
            uint64_t v21 = 0x40000000000;
            goto LABEL_73;
          }
LABEL_48:
          int v19 = 8;
          int v20 = 1024;
          uint64_t v21 = 0x10000000000;
          goto LABEL_73;
        }
        goto LABEL_35;
      }
      if (MediaSubType == 2053464883)
      {
LABEL_35:
        size_t sizeOut = 0;
        FormatList = CMAudioFormatDescriptionGetFormatList(a1, &sizeOut);
        if (!FormatList || sizeOut <= 0x2F) {
          goto LABEL_50;
        }
        int mFormatID = FormatList->mASBD.mFormatID;
        if (mFormatID <= 1885547314)
        {
          if (mFormatID == 1667574579) {
            goto LABEL_44;
          }
          int v18 = 1700997939;
        }
        else
        {
          if (mFormatID == 1885547315 || mFormatID == 1902324531) {
            goto LABEL_44;
          }
          int v18 = 2053319475;
        }
        if (mFormatID == v18) {
          goto LABEL_44;
        }
LABEL_50:
        uint64_t v10 = 0x40E7700000000000;
        if ((a2 & 0x8000000000) == 0)
        {
          if ((a2 & 0x20000000000) != 0)
          {
            uint64_t v12 = 1633772389;
            int v19 = 6;
            int v20 = 480;
            uint64_t v21 = 0x20000000000;
            goto LABEL_73;
          }
          goto LABEL_52;
        }
        uint64_t v12 = 1633772320;
        goto LABEL_56;
      }
      if (MediaSubType == 2053319475) {
        goto LABEL_44;
      }
      int v15 = 1902469939;
    }
    else
    {
      if (MediaSubType > 1700997938)
      {
        if (MediaSubType == 1700997939) {
          goto LABEL_44;
        }
        if (MediaSubType != 1700998451)
        {
          int v14 = 1885547315;
          goto LABEL_33;
        }
        goto LABEL_35;
      }
      if (MediaSubType == 1667574579) {
        goto LABEL_44;
      }
      int v15 = 1667575091;
    }
    if (MediaSubType != v15) {
      goto LABEL_50;
    }
    goto LABEL_35;
  }
LABEL_59:
  uint64_t v10 = 0x40E7700000000000;
  if ((a2 & 0x200000) != 0 && v7)
  {
    uint64_t v12 = 0x3616C6163;
    int v19 = 2;
    int v20 = 352;
    uint64_t v21 = 0x200000;
    goto LABEL_73;
  }
  uint64_t v12 = 1633772320;
  if ((a2 & 0x800000) != 0)
  {
    int v19 = 2;
    int v20 = 1024;
    uint64_t v21 = 0x800000;
  }
  else
  {
    if ((a2 & 0x400000) == 0)
    {
      int v11 = gLogCategory_APAudioFormat;
      if (gLogCategory_APAudioFormat <= 50)
      {
        if (gLogCategory_APAudioFormat == -1 && !_LogCategory_Initialize()) {
          goto LABEL_67;
        }
        goto LABEL_66;
      }
      goto LABEL_68;
    }
    int v19 = 2;
    int v20 = 1024;
    uint64_t v10 = 0x40E5888000000000;
    uint64_t v21 = 0x400000;
  }
LABEL_73:
  *(void *)&layoutSize[1] = v10;
  *(void *)&layoutSize[3] = v12;
  layoutSize[5] = 0;
  layoutSize[6] = v20;
  layoutSize[7] = 0;
  layoutSize[8] = v19;
  *(void *)&layoutSize[9] = 0;
  uint64_t v23 = APAudioFormatToAudioChannelLayout(v21, (long long *)&layout, layoutSize);
  if (v23)
  {
    uint64_t v22 = v23;
LABEL_93:
    APSLogErrorAt(v23);
    goto LABEL_83;
  }
  uint64_t v23 = CMAudioFormatDescriptionCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const AudioStreamBasicDescription *)&layoutSize[1], layoutSize[0], &layout, 0, 0, 0, &formatDescriptionOut);
  if (v23)
  {
    uint64_t v22 = v23;
    goto LABEL_93;
  }
  if (formatDescriptionOut)
  {
    if (a3)
    {
      *a3 = formatDescriptionOut;
      CMAudioFormatDescriptionRef formatDescriptionOut = 0;
    }
    if (gLogCategory_APAudioFormat <= 50
      && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v22 = 0;
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v22 = 4294954510;
    APSSignalErrorAt(4294954510);
  }
LABEL_83:
  if (formatDescriptionOut) {
    CFRelease(formatDescriptionOut);
  }
  return v22;
}

uint64_t APAudioFormatToAudioChannelLayout(uint64_t a1, long long *a2, _DWORD *a3)
{
  uint64_t v3 = 4294960591;
  if (a2 && a3)
  {
    if (a1 > 0x3FFFFFFF)
    {
      if (a1 <= 0x7FFFFFFFFFFFLL)
      {
        if (a1 > 0x7FFFFFFFFFLL)
        {
          if (a1 <= 0x7FFFFFFFFFFLL)
          {
            if (a1 <= 0x1FFFFFFFFFFLL)
            {
              if (a1 != 0x8000000000)
              {
                uint64_t v4 = 0x10000000000;
                goto LABEL_82;
              }
LABEL_75:
              uint64_t v3 = 0;
              uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1;
LABEL_103:
              long long v10 = v9[1];
              *a2 = *v9;
              a2[1] = v10;
              *a3 = 12;
              return v3;
            }
            if (a1 == 0x20000000000) {
              goto LABEL_75;
            }
            uint64_t v4 = 0x40000000000;
LABEL_82:
            if (a1 == v4) {
              goto LABEL_83;
            }
LABEL_106:
            uint64_t v3 = 4294960561;
            APSLogErrorAt(4294960561);
            return v3;
          }
          if (a1 <= 0x1FFFFFFFFFFFLL)
          {
            if (a1 != 0x80000000000)
            {
              uint64_t v5 = 0x100000000000;
LABEL_51:
              if (a1 != v5) {
                goto LABEL_106;
              }
              goto LABEL_75;
            }
LABEL_98:
            uint64_t v3 = 0;
            uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_Mono;
            goto LABEL_103;
          }
          if (a1 == 0x200000000000) {
            goto LABEL_98;
          }
          uint64_t v8 = 0x400000000000;
          goto LABEL_101;
        }
        if (a1 > 0x1FFFFFFFFLL)
        {
          if (a1 <= 0x7FFFFFFFFLL)
          {
            if (a1 != 0x200000000)
            {
              if (a1 != 0x400000000) {
                goto LABEL_106;
              }
              goto LABEL_105;
            }
LABEL_83:
            uint64_t v3 = 0;
            uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1_2;
            goto LABEL_103;
          }
          if (a1 != 0x800000000)
          {
            uint64_t v4 = 0x4000000000;
            goto LABEL_82;
          }
LABEL_89:
          uint64_t v3 = 0;
          uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_9_1_6;
          goto LABEL_103;
        }
        if (a1 == 0x40000000 || a1 == 0x80000000) {
          goto LABEL_98;
        }
        uint64_t v7 = 0x100000000;
LABEL_97:
        if (a1 != v7) {
          goto LABEL_106;
        }
        goto LABEL_98;
      }
      if (a1 <= 0x3FFFFFFFFFFFFFLL)
      {
        if (a1 > 0x3FFFFFFFFFFFFLL)
        {
          if (a1 <= 0xFFFFFFFFFFFFFLL)
          {
            if (a1 == 0x4000000000000) {
              goto LABEL_75;
            }
            uint64_t v4 = 0x8000000000000;
            goto LABEL_82;
          }
          if (a1 == 0x10000000000000)
          {
LABEL_105:
            uint64_t v3 = 0;
            uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_7_1_4;
            goto LABEL_103;
          }
          if (a1 != 0x20000000000000) {
            goto LABEL_106;
          }
          goto LABEL_89;
        }
        if (a1 == 0x800000000000) {
          goto LABEL_75;
        }
        if (a1 == 0x1000000000000) {
          goto LABEL_83;
        }
        uint64_t v8 = 0x2000000000000;
      }
      else if (a1 > 0x3FFFFFFFFFFFFFFLL)
      {
        if (a1 <= 0x1FFFFFFFFFFFFFFFLL)
        {
          if (a1 == 0x400000000000000) {
            goto LABEL_75;
          }
          uint64_t v4 = 0x1000000000000000;
          goto LABEL_82;
        }
        if (a1 == 0x2000000000000000) {
          goto LABEL_102;
        }
        uint64_t v8 = 0x4000000000000000;
      }
      else
      {
        if (a1 <= 0xFFFFFFFFFFFFFFLL)
        {
          if (a1 != 0x40000000000000)
          {
            uint64_t v5 = 0x80000000000000;
            goto LABEL_51;
          }
          goto LABEL_102;
        }
        if (a1 == 0x100000000000000) {
          goto LABEL_83;
        }
        uint64_t v8 = 0x200000000000000;
      }
LABEL_101:
      if (a1 != v8) {
        goto LABEL_106;
      }
      goto LABEL_102;
    }
    if (a1 < 0x8000)
    {
      if (a1 > 255)
      {
        if (a1 <= 2047)
        {
          if (a1 == 256) {
            goto LABEL_98;
          }
          if (a1 != 512)
          {
            if (a1 != 1024) {
              goto LABEL_106;
            }
            goto LABEL_98;
          }
        }
        else if (a1 >= 0x2000)
        {
          if (a1 != 0x2000)
          {
            if (a1 != 0x4000) {
              goto LABEL_106;
            }
            goto LABEL_98;
          }
        }
        else if (a1 != 2048)
        {
          if (a1 != 4096) {
            goto LABEL_106;
          }
          goto LABEL_98;
        }
      }
      else
      {
        char v6 = a1 - 4;
        if ((unint64_t)(a1 - 4) > 0x3C) {
          goto LABEL_26;
        }
        if (((1 << v6) & 0x1000000000001001) != 0) {
          goto LABEL_98;
        }
        if (((1 << v6) & 0x10000010) == 0)
        {
LABEL_26:
          if (a1 == 0x8000000000000000) {
            goto LABEL_75;
          }
          if (a1 != 128) {
            goto LABEL_106;
          }
        }
      }
    }
    else
    {
      if (a1 >= 0x400000)
      {
        if (a1 <= 0x3FFFFFF)
        {
          if (a1 <= 0xFFFFFF)
          {
            if (a1 != 0x400000 && a1 != 0x800000) {
              goto LABEL_106;
            }
            goto LABEL_102;
          }
          if (a1 == 0x1000000) {
            goto LABEL_102;
          }
          uint64_t v8 = 0x2000000;
          goto LABEL_101;
        }
        if (a1 > 0xFFFFFFF)
        {
          if (a1 == 0x10000000) {
            goto LABEL_98;
          }
          uint64_t v7 = 0x20000000;
        }
        else
        {
          if (a1 == 0x4000000) {
            goto LABEL_98;
          }
          uint64_t v7 = 0x8000000;
        }
        goto LABEL_97;
      }
      if (a1 < 0x40000)
      {
        if (a1 != 0x8000)
        {
          if (a1 == 0x10000) {
            goto LABEL_98;
          }
          if (a1 != 0x20000) {
            goto LABEL_106;
          }
        }
      }
      else if (a1 >= 0x100000)
      {
        if (a1 != 0x100000 && a1 != 0x200000) {
          goto LABEL_106;
        }
      }
      else if (a1 != 0x40000 && a1 != 0x80000)
      {
        goto LABEL_106;
      }
    }
LABEL_102:
    uint64_t v3 = 0;
    uint64_t v9 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_Stereo;
    goto LABEL_103;
  }
  return v3;
}

uint64_t APAudioFormatSelectTransportFormatForAudioSourceInputFormat(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  char CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  unint64_t v7 = a1 & 0xF7FFF7CF42B3C000;
  if ((a1 & 0x814C3C00) != 0 && (a2 & 0x814C3C00) != 0)
  {
    if (!v7)
    {
      uint64_t v8 = 0;
      uint64_t v9 = 0x400000;
LABEL_95:
      *a3 = v9;
      return v8;
    }
  }
  else if (!v7 || (a2 & 0xF7FFF7CF42B3C000) == 0)
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294960591;
    goto LABEL_86;
  }
  if (a1 > 0x3FFFFFFFFFLL)
  {
    if (a1 > 0x1FFFFFFFFFFFFLL)
    {
      if (a1 <= 0xFFFFFFFFFFFFFFLL)
      {
        if (a1 <= 0x7FFFFFFFFFFFFLL)
        {
          if (a1 == 0x2000000000000) {
            goto LABEL_89;
          }
          uint64_t v11 = 0x4000000000000;
        }
        else
        {
          if (a1 == 0x8000000000000) {
            goto LABEL_58;
          }
          if (a1 == 0x40000000000000) {
            goto LABEL_89;
          }
          uint64_t v11 = 0x80000000000000;
        }
      }
      else
      {
        if (a1 > 0xFFFFFFFFFFFFFFFLL)
        {
          if (a1 == 0x4000000000000000 || a1 == 0x2000000000000000) {
            goto LABEL_89;
          }
          uint64_t v12 = 0x1000000000000000;
          goto LABEL_57;
        }
        if (a1 == 0x100000000000000) {
          goto LABEL_58;
        }
        if (a1 == 0x200000000000000) {
          goto LABEL_89;
        }
        uint64_t v11 = 0x400000000000000;
      }
    }
    else
    {
      if (a1 > 0x7FFFFFFFFFFLL)
      {
        if (a1 <= 0x3FFFFFFFFFFFLL)
        {
          if (a1 == 0x80000000000) {
            goto LABEL_89;
          }
          if (a1 != 0x100000000000)
          {
            uint64_t v10 = 0x200000000000;
LABEL_71:
            if (a1 != v10) {
              goto LABEL_85;
            }
LABEL_89:
            if ((a2 & 0x200000) != 0 && CFPreferenceNumberWithDefault)
            {
              uint64_t v8 = 0;
              uint64_t v9 = 0x200000;
            }
            else if ((a2 & 0x800000) != 0)
            {
              uint64_t v8 = 0;
              uint64_t v9 = 0x800000;
            }
            else
            {
              uint64_t v8 = 4294960591;
              APSSignalErrorAt(4294960591);
              uint64_t v9 = 0;
            }
            goto LABEL_95;
          }
LABEL_76:
          if ((a2 & 0x8000000000) != 0)
          {
            uint64_t v8 = 0;
            uint64_t v9 = 0x8000000000;
            goto LABEL_95;
          }
          if ((a2 & 0x20000000000) != 0)
          {
            uint64_t v8 = 0;
            uint64_t v9 = 0x20000000000;
            goto LABEL_95;
          }
          if (gLogCategory_APAudioFormat <= 50
            && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          goto LABEL_89;
        }
        if (a1 == 0x400000000000) {
          goto LABEL_89;
        }
        if (a1 == 0x800000000000) {
          goto LABEL_76;
        }
        uint64_t v12 = 0x1000000000000;
        goto LABEL_57;
      }
      if (a1 > 0xFFFFFFFFFFLL)
      {
        if (a1 != 0x10000000000)
        {
          if (a1 == 0x20000000000) {
            goto LABEL_76;
          }
          uint64_t v12 = 0x40000000000;
          goto LABEL_57;
        }
LABEL_58:
        if ((a2 & 0x10000000000) != 0)
        {
          uint64_t v8 = 0;
          uint64_t v9 = 0x10000000000;
          goto LABEL_95;
        }
        if ((a2 & 0x40000000000) != 0)
        {
          uint64_t v8 = 0;
          uint64_t v9 = 0x40000000000;
          goto LABEL_95;
        }
        if (gLogCategory_APAudioFormat <= 50
          && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        goto LABEL_76;
      }
      if (a1 == 0x4000000000) {
        goto LABEL_58;
      }
      uint64_t v11 = 0x8000000000;
    }
    if (a1 == v11) {
      goto LABEL_76;
    }
    goto LABEL_85;
  }
  if (a1 < 0x800000)
  {
    if (a1 >= 0x40000)
    {
      if (a1 < 0x100000)
      {
        if (a1 != 0x40000 && a1 != 0x80000) {
          goto LABEL_85;
        }
      }
      else if (a1 != 0x100000 && a1 != 0x200000 && a1 != 0x400000)
      {
        goto LABEL_85;
      }
      goto LABEL_89;
    }
    if (a1 >= 0x8000)
    {
      if (a1 != 0x8000 && a1 != 0x10000 && a1 != 0x20000) {
        goto LABEL_85;
      }
      goto LABEL_89;
    }
    if (a1 == 0x8000000000000000) {
      goto LABEL_76;
    }
    if (a1 == 0x4000) {
      goto LABEL_89;
    }
    goto LABEL_85;
  }
  if (a1 <= 0xFFFFFFF)
  {
    if (a1 <= 0x1FFFFFF)
    {
      if (a1 == 0x800000) {
        goto LABEL_89;
      }
      uint64_t v10 = 0x1000000;
    }
    else
    {
      if (a1 == 0x2000000 || a1 == 0x4000000) {
        goto LABEL_89;
      }
      uint64_t v10 = 0x8000000;
    }
    goto LABEL_71;
  }
  if (a1 <= 0x7FFFFFFF)
  {
    if (a1 == 0x10000000 || a1 == 0x20000000) {
      goto LABEL_89;
    }
    uint64_t v10 = 0x40000000;
    goto LABEL_71;
  }
  if (a1 == 0x80000000 || a1 == 0x100000000) {
    goto LABEL_89;
  }
  uint64_t v12 = 0x200000000;
LABEL_57:
  if (a1 == v12) {
    goto LABEL_58;
  }
LABEL_85:
  uint64_t v8 = 4294960591;
LABEL_86:
  APSSignalErrorAt(4294960591);
  return v8;
}

uint64_t APAudioFormatIsBufferedLosslessEnabled()
{
  return FigGetCFPreferenceNumberWithDefault();
}

unint64_t APAudioFormatGetAudioFormatForFormatDescription(const opaqueCMFormatDescription *a1, uint64_t a2)
{
  unint64_t v13 = 0;
  RichestDecodableFormat = CMAudioFormatDescriptionGetRichestDecodableFormat(a1);
  if (RichestDecodableFormat)
  {
    int mFormatID = RichestDecodableFormat->mASBD.mFormatID;
    if (mFormatID <= 1885547314)
    {
      BOOL v6 = mFormatID == 1667574579;
      int v7 = 1700997939;
    }
    else
    {
      BOOL v6 = mFormatID == 1885547315 || mFormatID == 1902324531;
      int v7 = 2053319475;
    }
    if (v6 || mFormatID == v7)
    {
      if (!a2) {
        goto LABEL_15;
      }
      goto LABEL_14;
    }
  }
  RichestDecodableFormat = (const AudioFormatListItem *)CMAudioFormatDescriptionGetStreamBasicDescription(a1);
  if (a2)
  {
LABEL_14:
    long long v9 = *(_OWORD *)&RichestDecodableFormat->mASBD.mSampleRate;
    long long v10 = *(_OWORD *)&RichestDecodableFormat->mASBD.mBytesPerPacket;
    *(void *)(a2 + 32) = *(void *)&RichestDecodableFormat->mASBD.mBitsPerChannel;
    *(_OWORD *)a2 = v9;
    *(_OWORD *)(a2 + 16) = v10;
  }
LABEL_15:
  uint64_t v11 = ASBDToAPAudioFormat((uint64_t)RichestDecodableFormat, &v13);
  if (!v11) {
    return v13;
  }
  APSLogErrorAt(v11);
  return 0;
}

uint64_t APAudioFormatGetPassthroughAudioFormatsForFormatDescription(const opaqueCMFormatDescription *a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  uint64_t v7 = 0;
  memset(v6, 0, sizeof(v6));
  AudioFormatForFormatDescriptiouint64_t n = APAudioFormatGetAudioFormatForFormatDescription(a1, (uint64_t)v6);
  if (!AudioFormatForFormatDescription)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APAudioFormat <= 50
      && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 0;
  }
  uint64_t v2 = AudioFormatForFormatDescription;
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
  }
  unint64_t BufferedPassthroughSupportedFormats = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed);
  CFTypeRef cf = 0;
  APAudioFormatCopyAudioFormatsToReadableString(BufferedPassthroughSupportedFormats, (__CFString **)&cf);
  if (gLogCategory_APAudioFormat <= 50 && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  if (cf) {
    CFRelease(cf);
  }
  CFTypeRef cf = 0;
  APAudioFormatCopyAudioFormatsToReadableString(v2, (__CFString **)&cf);
  if (gLogCategory_APAudioFormat <= 50 && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  if (cf) {
    CFRelease(cf);
  }
  if ((BufferedPassthroughSupportedFormats & v2) != 0) {
    return v2;
  }
  else {
    return 0;
  }
}

uint64_t APAudioFormatCopyAudioFormatsToReadableString(uint64_t a1, __CFString **a2)
{
  if (a2)
  {
    CFMutableStringRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
    if (Mutable)
    {
      uint64_t v5 = Mutable;
      int v6 = 65;
      for (uint64_t i = 1; (i & a1) == 0; i *= 2)
      {
LABEL_149:
        if (--v6 <= 1)
        {
          uint64_t result = 0;
          *a2 = v5;
          return result;
        }
      }
      CFStringAppend(v5, @"[");
      if (i > 0x3FFFFFFF)
      {
        if (i <= 0x7FFFFFFFFFFFLL)
        {
          if (i > 0xFFFFFFFFFFLL)
          {
            if (i <= 0x7FFFFFFFFFFLL)
            {
              switch(i)
              {
                case 0x10000000000:
                  uint64_t v8 = "AAC_LC/48000/5.1.2";
                  goto LABEL_148;
                case 0x20000000000:
                  uint64_t v8 = "AAC_ELD/48000/5.1";
                  goto LABEL_148;
                case 0x40000000000:
                  uint64_t v8 = "AAC_ELD/48000/5.1.2";
                  goto LABEL_148;
              }
            }
            else if (i > 0x1FFFFFFFFFFFLL)
            {
              if (i == 0x200000000000)
              {
                uint64_t v8 = "PCM/48000/32f/1";
                goto LABEL_148;
              }
              if (i == 0x400000000000)
              {
                uint64_t v8 = "PCM/48000/32f/2";
                goto LABEL_148;
              }
            }
            else
            {
              if (i == 0x80000000000)
              {
                uint64_t v8 = "AAC-ELD/32000/1";
                goto LABEL_148;
              }
              if (i == 0x100000000000)
              {
                uint64_t v8 = "PCM/48000/16/5.1";
                goto LABEL_148;
              }
            }
          }
          else if (i <= 0x1FFFFFFFFLL)
          {
            switch(i)
            {
              case 0x40000000:
                uint64_t v8 = "OPUS/48000/1";
                goto LABEL_148;
              case 0x80000000:
                uint64_t v8 = "AAC-ELD/44100/1";
                goto LABEL_148;
              case 0x100000000:
                uint64_t v8 = "AAC-ELD/48000/1";
                goto LABEL_148;
            }
          }
          else if (i > 0x3FFFFFFFFFLL)
          {
            if (i == 0x4000000000)
            {
              uint64_t v8 = "PCM/48000/16/5.1.2";
              goto LABEL_148;
            }
            if (i == 0x8000000000)
            {
              uint64_t v8 = "AAC_LC/48000/5.1";
              goto LABEL_148;
            }
          }
          else
          {
            if (i == 0x200000000)
            {
              uint64_t v8 = "QC3/48000/5.1.2";
              goto LABEL_148;
            }
            if (i == 0x400000000)
            {
              uint64_t v8 = "QC3/48000/7.1.4";
              goto LABEL_148;
            }
          }
        }
        else if (i <= 0x3FFFFFFFFFFFFFLL)
        {
          if (i <= 0x3FFFFFFFFFFFFLL)
          {
            switch(i)
            {
              case 0x800000000000:
                uint64_t v8 = "PCM/48000/32f/5.1";
                goto LABEL_148;
              case 0x1000000000000:
                uint64_t v8 = "PCM/48000/32f/5.1.2";
                goto LABEL_148;
              case 0x2000000000000:
                uint64_t v8 = "DDPLUS/48000/2";
                goto LABEL_148;
            }
          }
          else if (i > 0xFFFFFFFFFFFFFLL)
          {
            if (i == 0x10000000000000)
            {
              uint64_t v8 = "DDPLUS/48000/7.1.4";
              goto LABEL_148;
            }
            if (i == 0x20000000000000)
            {
              uint64_t v8 = "DDPLUS/48000/9.1.6";
              goto LABEL_148;
            }
          }
          else
          {
            if (i == 0x4000000000000)
            {
              uint64_t v8 = "DDPLUS/48000/5.1";
              goto LABEL_148;
            }
            if (i == 0x8000000000000)
            {
              uint64_t v8 = "DDPLUS/48000/5.1.2";
              goto LABEL_148;
            }
          }
        }
        else if (i > 0x3FFFFFFFFFFFFFFLL)
        {
          if (i > 0x1FFFFFFFFFFFFFFFLL)
          {
            if (i == 0x2000000000000000)
            {
              uint64_t v8 = "QLAC/48000/24/2";
              goto LABEL_148;
            }
            if (i == 0x4000000000000000)
            {
              uint64_t v8 = "QC3/48000/2";
              goto LABEL_148;
            }
          }
          else
          {
            if (i == 0x400000000000000)
            {
              uint64_t v8 = "QAACHE/48000/5.1";
              goto LABEL_148;
            }
            if (i == 0x1000000000000000)
            {
              uint64_t v8 = "QAACHE/48000/5.1.2";
              goto LABEL_148;
            }
          }
        }
        else if (i > 0xFFFFFFFFFFFFFFLL)
        {
          if (i == 0x100000000000000)
          {
            uint64_t v8 = "QAAC/48000/5.1.2";
            goto LABEL_148;
          }
          if (i == 0x200000000000000)
          {
            uint64_t v8 = "QAACHE/48000/2";
            goto LABEL_148;
          }
        }
        else
        {
          if (i == 0x40000000000000)
          {
            uint64_t v8 = "QAAC/48000/2";
            goto LABEL_148;
          }
          if (i == 0x80000000000000)
          {
            uint64_t v8 = "QAAC/48000/5.1";
            goto LABEL_148;
          }
        }
      }
      else if (i < 0x8000)
      {
        if (i > 255)
        {
          if (i <= 2047)
          {
            switch(i)
            {
              case 256:
                uint64_t v8 = "PCM/32000/16/1";
                goto LABEL_148;
              case 512:
                uint64_t v8 = "PCM/32000/16/2";
                goto LABEL_148;
              case 1024:
                uint64_t v8 = "PCM/44100/16/1";
                goto LABEL_148;
            }
          }
          else if (i >= 0x2000)
          {
            if (i == 0x2000)
            {
              uint64_t v8 = "PCM/44100/24/2";
              goto LABEL_148;
            }
            if (i == 0x4000)
            {
              uint64_t v8 = "PCM/48000/16/1";
              goto LABEL_148;
            }
          }
          else
          {
            if (i == 2048)
            {
              uint64_t v8 = "PCM/44100/16/2";
              goto LABEL_148;
            }
            if (i == 4096)
            {
              uint64_t v8 = "PCM/44100/24/1";
              goto LABEL_148;
            }
          }
        }
        else if (i <= 15)
        {
          switch(i)
          {
            case 0x8000000000000000:
              uint64_t v8 = "QC3/48000/5.1";
              goto LABEL_148;
            case 4:
              uint64_t v8 = "PCM/8000/16/1";
              goto LABEL_148;
            case 8:
              uint64_t v8 = "PCM/8000/16/2";
              goto LABEL_148;
          }
        }
        else if (i > 63)
        {
          uint64_t v8 = "PCM/24000/16/1";
          if (i == 64) {
            goto LABEL_148;
          }
          if (i == 128)
          {
            uint64_t v8 = "PCM/24000/16/2";
            goto LABEL_148;
          }
        }
        else
        {
          if (i == 16)
          {
            uint64_t v8 = "PCM/16000/16/1";
            goto LABEL_148;
          }
          if (i == 32)
          {
            uint64_t v8 = "PCM/16000/16/2";
            goto LABEL_148;
          }
        }
      }
      else if (i < 0x400000)
      {
        if (i < 0x40000)
        {
          switch(i)
          {
            case 0x8000:
              uint64_t v8 = "PCM/48000/16/2";
              goto LABEL_148;
            case 0x10000:
              uint64_t v8 = "PCM/48000/24/1";
              goto LABEL_148;
            case 0x20000:
              uint64_t v8 = "PCM/48000/24/2";
              goto LABEL_148;
          }
        }
        else if (i >= 0x100000)
        {
          if (i == 0x100000)
          {
            uint64_t v8 = "ALAC/48000/16/2";
            goto LABEL_148;
          }
          if (i == 0x200000)
          {
            uint64_t v8 = "ALAC/48000/24/2";
            goto LABEL_148;
          }
        }
        else
        {
          if (i == 0x40000)
          {
            uint64_t v8 = "ALAC/44100/16/2";
            goto LABEL_148;
          }
          if (i == 0x80000)
          {
            uint64_t v8 = "ALAC/44100/24/2";
            goto LABEL_148;
          }
        }
      }
      else if (i > 0x3FFFFFF)
      {
        if (i > 0xFFFFFFF)
        {
          if (i == 0x10000000)
          {
            uint64_t v8 = "OPUS/16000/1";
            goto LABEL_148;
          }
          if (i == 0x20000000)
          {
            uint64_t v8 = "OPUS/24000/1";
            goto LABEL_148;
          }
        }
        else
        {
          if (i == 0x4000000)
          {
            uint64_t v8 = "AAC-ELD/16000/1";
            goto LABEL_148;
          }
          if (i == 0x8000000)
          {
            uint64_t v8 = "AAC-ELD/24000/1";
            goto LABEL_148;
          }
        }
      }
      else if (i > 0xFFFFFF)
      {
        if (i == 0x1000000)
        {
          uint64_t v8 = "AAC-ELD/44100/2";
          goto LABEL_148;
        }
        if (i == 0x2000000)
        {
          uint64_t v8 = "AAC-ELD/48000/2";
          goto LABEL_148;
        }
      }
      else
      {
        if (i == 0x400000)
        {
          uint64_t v8 = "AAC-LC/44100/2";
          goto LABEL_148;
        }
        if (i == 0x800000)
        {
          uint64_t v8 = "AAC-LC/48000/2";
LABEL_148:
          CFStringAppendCString(v5, v8, 0x8000100u);
          CFStringAppend(v5, @"]");
          goto LABEL_149;
        }
      }
      if (i == 0x800000000) {
        uint64_t v8 = "QC3/48000/9.1.6";
      }
      else {
        uint64_t v8 = "";
      }
      goto LABEL_148;
    }
    APSLogErrorAt(0);
    return 4294954510;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender()
{
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
  }
  return APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed;
}

uint64_t APAudioFormatIndexToAudioChannelLayout(uint64_t a1, long long *a2, _DWORD *a3)
{
  uint64_t v3 = 4294960591;
  if (a2 && a3)
  {
    uint64_t v15 = 0;
    long long v13 = 0u;
    long long v14 = 0u;
    uint64_t v7 = APAudioFormatIndexToASBD(a1, (uint64_t)&v13);
    if (v7)
    {
      uint64_t v3 = v7;
      APSLogErrorAt(v7);
    }
    else
    {
      switch(HIDWORD(v14))
      {
        case 1:
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_Mono;
          goto LABEL_26;
        case 2:
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_Stereo;
          goto LABEL_26;
        case 6:
          if ((unint64_t)(a1 - 39) > 0x34 || ((1 << (a1 - 39)) & 0x10000005090925) == 0) {
            goto LABEL_28;
          }
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1;
          goto LABEL_26;
        case 8:
          char v9 = a1 - 33;
          if ((unint64_t)(a1 - 33) > 0x39) {
            goto LABEL_28;
          }
          if (((1 << v9) & 0x2088482A1) != 0)
          {
            uint64_t v3 = 0;
            uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1_2;
            goto LABEL_26;
          }
          if (((1 << v9) & 0x200600400000000) == 0) {
            goto LABEL_28;
          }
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_7_1;
          goto LABEL_26;
        case 0xA:
          char v10 = a1 - 76;
          if ((unint64_t)(a1 - 76) > 7) {
            goto LABEL_28;
          }
          if (((1 << v10) & 0x31) != 0)
          {
            uint64_t v3 = 0;
            uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1_4;
            goto LABEL_26;
          }
          if (((1 << v10) & 0xC2) != 0)
          {
            uint64_t v3 = 0;
            uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_7_1_2;
LABEL_26:
            long long v11 = v8[1];
            *a2 = *v8;
            a2[1] = v11;
            *a3 = 12;
            return v3;
          }
LABEL_28:
          APSSignalErrorAt(4294960591);
          break;
        case 0xC:
          if ((unint64_t)(a1 - 34) > 0x32 || ((1 << (a1 - 34)) & 0x4000C00040001) == 0) {
            goto LABEL_28;
          }
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_7_1_4;
          goto LABEL_26;
        case 0x10:
          if (a1 != 53 && a1 != 35) {
            goto LABEL_28;
          }
          uint64_t v3 = 0;
          uint64_t v8 = &APAudioFormatIndexToAudioChannelLayout_gAPLayout_9_1_6;
          goto LABEL_26;
        default:
          return v3;
      }
    }
  }
  return v3;
}

BOOL APAudioFormatIsAudioChannelLayoutTag7_1_2(int a1)
{
  return a1 == 12845066;
}

BOOL APAudioFormatIsAudioChannelLayoutTag7_1_4(int a1)
{
  return a1 == 13238284 || a1 == 12582924;
}

uint64_t APSAudioFormatDoesAudioChannelLayoutTagHaveHeights(int a1)
{
  uint64_t result = 0;
  if (a1 > 12779529)
  {
    if (a1 != 12779530 && a1 != 13238284)
    {
      int v3 = 12845066;
LABEL_8:
      if (a1 != v3) {
        return result;
      }
    }
  }
  else if (a1 != 12582924 && a1 != 12648464)
  {
    int v3 = 12713992;
    goto LABEL_8;
  }
  return 1;
}

uint64_t APSAudioFormatGetFullRangeChannelCountFromChannelLayoutTag(int a1)
{
  if (a1 <= 12582923)
  {
    if (a1 > 8126469)
    {
      if (a1 != 8126470)
      {
        int v1 = 8388616;
LABEL_15:
        if (a1 == v1) {
          return 7;
        }
        goto LABEL_19;
      }
      return 5;
    }
    if (a1 == 6553601) {
      return 1;
    }
    if (a1 == 6619138) {
      return 2;
    }
  }
  else
  {
    if (a1 > 12713991)
    {
      if (a1 != 12713992 && a1 != 12779530)
      {
        int v1 = 12845066;
        goto LABEL_15;
      }
      return 5;
    }
    if (a1 == 12582924) {
      return 7;
    }
    if (a1 == 12648464) {
      return 9;
    }
  }
LABEL_19:
  if (gLogCategory_APAudioFormat > 90) {
    return 0;
  }
  if (gLogCategory_APAudioFormat != -1 || (uint64_t result = _LogCategory_Initialize(), result))
  {
    LogPrintF();
    return 0;
  }
  return result;
}

uint64_t APAudioFormatASBDArrayToAPAudioFormats(const __CFData *a1, void *a2)
{
  unint64_t v10 = 0;
  unint64_t Length = CFDataGetLength(a1);
  if (Length <= 0x27)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  else
  {
    unint64_t v5 = Length / 0x28;
    BytePtr = CFDataGetBytePtr(a1);
    uint64_t v7 = 0;
    if (v5 <= 1) {
      unint64_t v5 = 1;
    }
    do
    {
      uint64_t result = ASBDToAPAudioFormat((uint64_t)BytePtr, &v10);
      unint64_t v9 = v10;
      if (result) {
        unint64_t v9 = 0;
      }
      v7 |= v9;
      BytePtr += 40;
      --v5;
    }
    while (v5);
    *a2 = v7;
  }
  return result;
}

BOOL APAudioFormatAPACIsAllowedForCurrentDeviceAsSender()
{
  if (APAudioFormatAPACIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
    dispatch_once(&APAudioFormatAPACIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_2036);
  }
  return APAudioFormatAPACIsAllowedForCurrentDeviceAsSender_apacAllowed == 1
      && APSSettingsIsFeatureEnabled(@"BufferedAPAC") != 0;
}

void __APAudioFormatAPACIsAllowedForCurrentDeviceAsSender_block_invoke()
{
  if (IsAppleTV() && MGGetProductType() != 1110205732) {
    goto LABEL_12;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker) {
    goto LABEL_12;
  }
  if (APSIsIPhone_onceToken != -1) {
    dispatch_once(&APSIsIPhone_onceToken, &__block_literal_global_23);
  }
  if (APSIsIPhone_sIsiPhone) {
    goto LABEL_12;
  }
  if (APSIsIPad_onceToken != -1) {
    dispatch_once(&APSIsIPad_onceToken, &__block_literal_global_25);
  }
  if (APSIsIPad_sIsiPad == 1) {
LABEL_12:
  }
    APAudioFormatAPACIsAllowedForCurrentDeviceAsSender_apacAllowed = 1;
}

uint64_t APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver()
{
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
  }
  return APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed;
}

void __APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_block_invoke()
{
  if (APSSettingsIsFeatureEnabled(@"BufferedSurround")) {
    APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed = 1;
  }
  if (IsAppleTV() && MGGetProductType() != 1110205732) {
    APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed = 1;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker) {
    APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed = 1;
  }
}

uint64_t APAudioFormatFilterFormatsForSpatialSender(uint64_t a1, CFArrayRef theArray, int a3)
{
  uint64_t v3 = a1;
  CMTimeValue value = 0;
  int v23 = 0;
  char v22 = 0;
  if (!theArray)
  {
    unint64_t v9 = 0;
    goto LABEL_34;
  }
  CFArrayRef v4 = theArray;
  CFIndex Count = CFArrayGetCount(theArray);
  if (Count < 1)
  {
    unint64_t v9 = 0;
    goto LABEL_25;
  }
  CFIndex v6 = Count;
  int v7 = 0;
  CFIndex v8 = 0;
  unint64_t v9 = 0;
  unint64_t v10 = @"IsLocalStream";
  long long v11 = @"TightSyncUUID";
  CFArrayRef v20 = v4;
  do
  {
    CFDictionaryRef ValueAtIndex = (const __CFDictionary *)CFArrayGetValueAtIndex(v4, v8);
    FigCFDictionaryGetBooleanIfPresent();
    if (CFDictionaryGetValueIfPresent(ValueAtIndex, v11, (const void **)&value) && (!v9 || !CFEqual(value, v9)))
    {
      long long v13 = v11;
      long long v14 = v10;
      uint64_t v15 = value;
      if (value) {
        CFRetain(value);
      }
      if (v9) {
        CFRelease(v9);
      }
      unint64_t v9 = v15;
      unint64_t v10 = v14;
      long long v11 = v13;
      CFArrayRef v4 = v20;
    }
    v7 |= v22 != 0;
    FigCFDictionaryGetInt64IfPresent();
    ++v8;
  }
  while (v6 != v8);
  if (IsAppleTV() && MGGetProductType() != 1110205732)
  {
    if (APSSettingsGetIntWithOverrideAndDefault(@"DisableATVWHASurround", 0, 0))
    {
      LODWORD(v3) = a1;
      goto LABEL_28;
    }
    if (v7)
    {
      if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
        dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
      }
      uint64_t v3 = a1;
      unint64_t v16 = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed) | 0x600000;
      goto LABEL_33;
    }
LABEL_25:
    uint64_t v3 = a1;
    goto LABEL_34;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  uint64_t v3 = a1;
  if (!APSIsAPMSpeaker_sIsAPMSpeaker) {
    goto LABEL_34;
  }
  if (!a3)
  {
LABEL_28:
    v3 &= 0x400000uLL;
    goto LABEL_34;
  }
  if (!FigGetCFPreferenceNumberWithDefault())
  {
    if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce != -1) {
      dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_initOnce, &__block_literal_global_98);
    }
    unint64_t v16 = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsSender_atmosAllowed) | 0xE6C6FA81FFFFFFFCLL;
LABEL_33:
    v3 &= v16;
  }
LABEL_34:
  CFTypeRef cf = 0;
  APAudioFormatCopyAudioFormatsToReadableString(v3, (__CFString **)&cf);
  if (gLogCategory_APAudioFormat <= 50 && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  if (cf) {
    CFRelease(cf);
  }
  if (v9) {
    CFRelease(v9);
  }
  return v3;
}

uint64_t APAudioFormatFilterFormatsForCurrentBufferedSender(uint64_t a1)
{
  uint64_t SupportedTransportAudioFormatsForBufferedSender = APAudioFormatGetSupportedTransportAudioFormatsForBufferedSender(0);
  return APAudioFormatFilterFormatsForSpatialSender(SupportedTransportAudioFormatsForBufferedSender, 0, 0) & a1;
}

uint64_t APAudioFormatFilterFormatsForCurrentBufferedSenderWithEndpointStreamInfo(uint64_t a1, const __CFArray *a2, int a3)
{
  uint64_t SupportedTransportAudioFormatsForBufferedSender = APAudioFormatGetSupportedTransportAudioFormatsForBufferedSender(0);
  return APAudioFormatFilterFormatsForSpatialSender(SupportedTransportAudioFormatsForBufferedSender, a2, a3) & a1;
}

uint64_t APAudioFormatFilterFormatsForCurrentRealTimeSender(int a1)
{
  return *(void *)&a1 & 0x40000;
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsForRealTimeSender(void *a1)
{
  if (a1) {
    *a1 = 0x40000;
  }
  return 0x40000;
}

uint64_t APAudioFormatFilterFormatsForCurrentLowLatencySender(uint64_t a1)
{
  BOOL v2 = (APSGetPersistentGroupModel() & 0xFFFFFFFD) == 0;
  int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundSender", 0, v2);
  uint64_t v4 = 0x2000000;
  if (IntWithOverrideAndDefault) {
    uint64_t v4 = 0x40002000000;
  }
  return v4 & a1;
}

unint64_t APAudioFormatGetSupportedTransportAudioFormatsForBufferedReceiver(void *a1)
{
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
  }
  int v2 = APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed;
  unint64_t BufferedPassthroughSupportedFormats = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed);
  if (a1) {
    *a1 = 0x800000;
  }
  uint64_t v4 = 14680064;
  if (v2) {
    uint64_t v4 = 0x18000E00000;
  }
  return BufferedPassthroughSupportedFormats | v4;
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsForRealTimeReceiver(void *a1)
{
  if (a1) {
    *a1 = 0x40000;
  }
  return 21235712;
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsForScreenReceiver(void *a1)
{
  if (a1) {
    *a1 = 0x400000;
  }
  return 21235712;
}

uint64_t APAudioFormatGetTransportAudioFormatForPCMFormatLowLatencySender(uint64_t a1)
{
  unsigned int v2 = 0;
  APAudioFormatFindMaxChannelPerFrameFromAudioFormat(a1, (int *)&v2);
  if (v2 <= 2) {
    return 0x2000000;
  }
  else {
    return 0x40000000000;
  }
}

uint64_t APAudioFormatGetSupportedTransportAudioFormatsLowLatencyReceiver(uint64_t *a1)
{
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker)
  {
    uint64_t v2 = MGGetProductType();
    BOOL v3 = v2 == 1540760353 || v2 == 4240173202 || v2 == 2702125347;
    int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"lowLatencyAudioSurroundReceiver", 0, v3);
    uint64_t v4 = 0x2000000;
    if (IntWithOverrideAndDefault) {
      uint64_t result = 0x40002000000;
    }
    else {
      uint64_t result = 0x2000000;
    }
    if (a1) {
      goto LABEL_15;
    }
  }
  else
  {
    uint64_t v4 = 0;
    uint64_t result = 0;
    if (a1) {
LABEL_15:
    }
      *a1 = v4;
  }
  return result;
}

unint64_t APAudioFormatGetSupportedAudioFormatsForLocalEchoCancellationReferenceReceiver(void *a1)
{
  unint64_t SupportedAudioFormatsForLocalBufferedReceiver = APAudioFormatGetSupportedAudioFormatsForLocalBufferedReceiver(0);
  if (a1) {
    *a1 = 0x800000;
  }
  return SupportedAudioFormatsForLocalBufferedReceiver & 0xF7CFFFC3FFFFFFFCLL;
}

unint64_t APAudioFormatGetSupportedAudioFormatsForLocalBufferedReceiver(void *a1)
{
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
  }
  int v2 = APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed;
  char CFPreferenceNumberWithDefault = FigGetCFPreferenceNumberWithDefault();
  if (APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce != -1) {
    dispatch_once(&APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_initOnce, &__block_literal_global_104);
  }
  unint64_t BufferedPassthroughSupportedFormats = APAudioFormatGetBufferedPassthroughSupportedFormats(APAudioFormatAtmosIsAllowedForCurrentDeviceAsReceiver_atmosAllowed);
  if (a1) {
    *a1 = 0x800000;
  }
  uint64_t v5 = 0x400000;
  if (v2) {
    uint64_t v5 = 0x18000C00000;
  }
  if (CFPreferenceNumberWithDefault) {
    v5 |= 0x200000uLL;
  }
  return BufferedPassthroughSupportedFormats | v5;
}

uint64_t APAudioFormatGetSupportedAudioFormatsForLocalRealTimeReceiver(void *a1)
{
  if (a1) {
    *a1 = 0x40000;
  }
  return 21235712;
}

uint64_t APAudioFormatGetMagicCookieForAACLC(int a1, void *a2, int *a3, double a4)
{
  if (APAudioFormatInitializeMagicCookieForCodec_initOnce != -1) {
    dispatch_once(&APAudioFormatInitializeMagicCookieForCodec_initOnce, &__block_literal_global_159);
  }
  if (a4 != 48000.0) {
    return 0;
  }
  if (sAAC_LCMagicSurround51 && sAAC_LCMagicSurround512)
  {
    if (a1 == 8)
    {
      uint64_t result = 0;
      *a2 = sAAC_LCMagicSurround512;
      int v9 = sAAC_LCMagicSurroundSize512;
      goto LABEL_11;
    }
    if (a1 == 6)
    {
      uint64_t result = 0;
      *a2 = sAAC_LCMagicSurround51;
      int v9 = sAAC_LCMagicSurroundSize51;
LABEL_11:
      *a3 = v9;
      return result;
    }
    return 0;
  }
  APSLogErrorAt(0);
  return 4294960561;
}

uint64_t __APAudioFormatInitializeMagicCookieForCodec_block_invoke()
{
  if (IsAppleTV()) {
    goto LABEL_5;
  }
  if (APSIsAPMSpeaker_sCheckOnce != -1) {
    dispatch_once(&APSIsAPMSpeaker_sCheckOnce, &__block_literal_global_11);
  }
  if (APSIsAPMSpeaker_sIsAPMSpeaker)
  {
LABEL_5:
    outAudioConverter[0] = 0;
    inSourceFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF90;
    *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EFA0;
    inDestinationFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EEE0;
    *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDE0;
    uint64_t PropertyInfo = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
    if (PropertyInfo
      || (uint64_t PropertyInfo = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_LCMagicSurroundSize51, 0), PropertyInfo)|| (sAAC_LCMagicSurround51 = (uint64_t)malloc_type_malloc(sAAC_LCMagicSurroundSize51, 0x4A80C73uLL), uint64_t PropertyInfo = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_LCMagicSurroundSize51, (void *)sAAC_LCMagicSurround51), PropertyInfo))
    {
      APSLogErrorAt(PropertyInfo);
    }
    AudioConverterDispose(outAudioConverter[0]);
    AudioConverterRef inAudioConverter = 0;
    int inPropertyData = 699835888;
    *(_OWORD *)outAudioConverter = 0u;
    long long v16 = 0u;
    inSourceFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF70;
    *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF80;
    inDestinationFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EEE0;
    *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDD0;
    uint64_t Property = AudioConverterNew(&inSourceFormat, &inDestinationFormat, &inAudioConverter);
    if (Property) {
      goto LABEL_68;
    }
    *(_OWORD *)outAudioConverter = APAudioFormatIndexToAudioChannelLayout_gAPLayout_5_1_2;
    long long v16 = *(_OWORD *)algn_1D0C1F364;
    uint64_t Property = AudioConverterSetProperty(inAudioConverter, 0x6869646Eu, 4u, &inPropertyData);
    if (Property
      || (uint64_t Property = AudioConverterSetProperty(inAudioConverter, 0x69636C20u, 0xCu, outAudioConverter), Property)
      || (uint64_t Property = AudioConverterSetProperty(inAudioConverter, 0x6F636C20u, 0xCu, outAudioConverter), Property)
      || (uint64_t Property = AudioConverterGetPropertyInfo(inAudioConverter, 0x636D6763u, (UInt32 *)&sAAC_LCMagicSurroundSize512, 0), Property)|| (sAAC_LCMagicSurround512 = (uint64_t)malloc_type_malloc(sAAC_LCMagicSurroundSize512, 0x65C16F43uLL), uint64_t Property = AudioConverterGetProperty(inAudioConverter, 0x636D6763u, (UInt32 *)&sAAC_LCMagicSurroundSize512, (void *)sAAC_LCMagicSurround512), Property))
    {
LABEL_68:
      APSLogErrorAt(Property);
    }
    AudioConverterDispose(inAudioConverter);
    outAudioConverter[0] = 0;
    inSourceFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF70;
    *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF80;
    inDestinationFormat.mSampleRate = 48000.0;
    *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDD0;
    *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1F0D0;
    uint64_t v2 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
    if (v2
      || (uint64_t v2 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ELDMagicSurroundSize512, 0), v2)|| (sAAC_ELDMagicSurround512 = (uint64_t)malloc_type_malloc(sAAC_ELDMagicSurroundSize512, 0x3D02B33uLL), uint64_t v2 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ELDMagicSurroundSize512, (void *)sAAC_ELDMagicSurround512), v2))
    {
      APSLogErrorAt(v2);
    }
    AudioConverterDispose(outAudioConverter[0]);
  }
  outAudioConverter[0] = 0;
  inSourceFormat.mSampleRate = 44100.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1F090;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1F0A0;
  inDestinationFormat.mSampleRate = 44100.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EF10;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1ED90;
  uint64_t v3 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v3
    || (uint64_t v3 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC44k16BitSizeStereo, 0), v3)|| (uint64_t v3 = (uint64_t)malloc_type_malloc(sAAC_ALAC44k16BitSizeStereo, 0x133C2FD4uLL), (sAAC_ALAC44k16BitStereo = v3) == 0)|| (uint64_t v3 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC44k16BitSizeStereo, (void *)v3), v3))
  {
    APSLogErrorAt(v3);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  inSourceFormat.mSampleRate = 44100.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1F050;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1F060;
  inDestinationFormat.mSampleRate = 44100.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EEF0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1ED90;
  uint64_t v4 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v4
    || (uint64_t v4 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC44k24BitSizeStereo, 0), v4)|| (uint64_t v4 = (uint64_t)malloc_type_malloc(sAAC_ALAC44k24BitSizeStereo, 0x2BD0B986uLL), (sAAC_ALAC44k24BitStereo = v4) == 0)|| (uint64_t v4 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC44k24BitSizeStereo, (void *)v4), v4))
  {
    APSLogErrorAt(v4);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1F090;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1F0A0;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EF10;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1ED90;
  uint64_t v5 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v5
    || (uint64_t v5 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC48k16BitSizeStereo, 0), v5)|| (uint64_t v5 = (uint64_t)malloc_type_malloc(sAAC_ALAC48k16BitSizeStereo, 0x18EE8EBBuLL), (sAAC_ALAC48k16BitStereo = v5) == 0)|| (uint64_t v5 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC48k16BitSizeStereo, (void *)v5), v5))
  {
    APSLogErrorAt(v5);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1F050;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1F060;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EEF0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1ED90;
  uint64_t v6 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v6
    || (uint64_t v6 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC48k24BitSizeStereo, 0), v6)|| (uint64_t v6 = (uint64_t)malloc_type_malloc(sAAC_ALAC48k24BitSizeStereo, 0xCC80C764uLL), (sAAC_ALAC48k24BitStereo = v6) == 0)|| (uint64_t v6 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAAC_ALAC48k24BitSizeStereo, (void *)v6), v6))
  {
    APSLogErrorAt(v6);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EFB0;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EFC0;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1ED90;
  uint64_t v7 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v7
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v7 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicStereoSize, 0),
        v7)
    || (sAPAC_MagicStereo = (uint64_t)malloc_type_malloc(sAPAC_MagicStereoSize, 0xC66CAFDBuLL),
        uint64_t v7 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicStereoSize, (void *)sAPAC_MagicStereo), v7))
  {
    APSLogErrorAt(v7);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF90;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EFA0;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDE0;
  uint64_t v8 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v8
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v8 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround51Size, 0),
        v8)
    || (sAPAC_MagicSurround51 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround51Size, 0x6B917364uLL),
        uint64_t v8 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround51Size, (void *)sAPAC_MagicSurround51), v8))
  {
    APSLogErrorAt(v8);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF70;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF80;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDD0;
  uint64_t v9 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v9
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v9 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround512Size, 0), v9)|| (sAPAC_MagicSurround512 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround512Size, 0xBAF199FAuLL), uint64_t v9 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround512Size, (void *)sAPAC_MagicSurround512), v9))
  {
    APSLogErrorAt(v9);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF70;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF80;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDD0;
  uint64_t v10 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v10
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v10 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround71Size, 0), v10)|| (sAPAC_MagicSurround71 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround71Size, 0xC96A5FFEuLL), uint64_t v10 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround71Size, (void *)sAPAC_MagicSurround71), v10))
  {
    APSLogErrorAt(v10);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF50;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF60;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDC0;
  uint64_t v11 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v11
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v11 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround514Size, 0), v11)|| (sAPAC_MagicSurround514 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround514Size, 0xA854BA81uLL), uint64_t v11 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround514Size, (void *)sAPAC_MagicSurround514), v11))
  {
    APSLogErrorAt(v11);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF50;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF60;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDC0;
  uint64_t v12 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v12
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v12 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround712Size, 0), v12)|| (sAPAC_MagicSurround712 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround71Size, 0x11F78588uLL), uint64_t v12 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround712Size, (void *)sAPAC_MagicSurround712), v12))
  {
    APSLogErrorAt(v12);
  }
  AudioConverterDispose(outAudioConverter[0]);
  outAudioConverter[0] = 0;
  LODWORD(inAudioConverter) = 0;
  inSourceFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inSourceFormat.int mFormatID = xmmword_1D0C1EF30;
  *(_OWORD *)&inSourceFormat.mBytesPerFrame = xmmword_1D0C1EF40;
  inDestinationFormat.mSampleRate = 48000.0;
  *(_OWORD *)&inDestinationFormat.int mFormatID = xmmword_1D0C1EDA0;
  *(_OWORD *)&inDestinationFormat.mBytesPerFrame = xmmword_1D0C1EDB0;
  uint64_t v13 = AudioConverterNew(&inSourceFormat, &inDestinationFormat, outAudioConverter);
  if (v13
    || (AudioConverterSetProperty(outAudioConverter[0], 0x63647263u, 4u, &inAudioConverter),
        uint64_t v13 = AudioConverterGetPropertyInfo(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround714Size, 0), v13)|| (sAPAC_MagicSurround714 = (uint64_t)malloc_type_malloc(sAPAC_MagicSurround714Size, 0xE51D2D07uLL), uint64_t v13 = AudioConverterGetProperty(outAudioConverter[0], 0x636D6763u, (UInt32 *)&sAPAC_MagicSurround714Size, (void *)sAPAC_MagicSurround714), v13))
  {
    APSLogErrorAt(v13);
  }
  return AudioConverterDispose(outAudioConverter[0]);
}

uint64_t APAudioFormatGetMagicCookieForAACELD(int a1, void *a2, _DWORD *a3)
{
  if (APAudioFormatInitializeMagicCookieForCodec_initOnce != -1) {
    dispatch_once(&APAudioFormatInitializeMagicCookieForCodec_initOnce, &__block_literal_global_159);
  }
  if (sAAC_ELDMagicSurround512)
  {
    uint64_t result = 0;
    if (a1 == 8)
    {
      *a2 = sAAC_ELDMagicSurround512;
      *a3 = sAAC_ELDMagicSurroundSize512;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960561;
  }
  return result;
}

uint64_t APAudioFormatGetMagicCookieForALAC(int a1, int a2, void *a3, int *a4)
{
  if (APAudioFormatInitializeMagicCookieForCodec_initOnce == -1)
  {
    if (a3) {
      goto LABEL_3;
    }
LABEL_27:
    uint64_t v8 = 4294960591;
    goto LABEL_29;
  }
  dispatch_once(&APAudioFormatInitializeMagicCookieForCodec_initOnce, &__block_literal_global_159);
  if (!a3) {
    goto LABEL_27;
  }
LABEL_3:
  if (!a4)
  {
    uint64_t v8 = 4294960591;
    goto LABEL_29;
  }
  if (a1 == 48000)
  {
    if (a2 != 24)
    {
      if (a2 == 16)
      {
        if (sAAC_ALAC48k16BitStereo)
        {
          uint64_t v8 = 0;
          *a3 = sAAC_ALAC48k16BitStereo;
          int v9 = sAAC_ALAC48k16BitSizeStereo;
          goto LABEL_22;
        }
        uint64_t v8 = 4294960561;
        goto LABEL_29;
      }
      goto LABEL_14;
    }
    if (sAAC_ALAC48k24BitStereo)
    {
      uint64_t v8 = 0;
      *a3 = sAAC_ALAC48k24BitStereo;
      int v9 = sAAC_ALAC48k24BitSizeStereo;
      goto LABEL_22;
    }
    uint64_t v8 = 4294960561;
LABEL_29:
    APSLogErrorAt(0);
    goto LABEL_15;
  }
  if (a1 != 44100) {
    goto LABEL_14;
  }
  if (a2 == 24)
  {
    if (sAAC_ALAC44k24BitStereo)
    {
      uint64_t v8 = 0;
      *a3 = sAAC_ALAC44k24BitStereo;
      int v9 = sAAC_ALAC44k24BitSizeStereo;
      goto LABEL_22;
    }
    uint64_t v8 = 4294960561;
    goto LABEL_29;
  }
  if (a2 == 16)
  {
    if (sAAC_ALAC44k16BitStereo)
    {
      uint64_t v8 = 0;
      *a3 = sAAC_ALAC44k16BitStereo;
      int v9 = sAAC_ALAC44k16BitSizeStereo;
LABEL_22:
      *a4 = v9;
      return v8;
    }
    uint64_t v8 = 4294960561;
    goto LABEL_29;
  }
LABEL_14:
  uint64_t v8 = 4294960561;
LABEL_15:
  if (gLogCategory_APAudioFormat <= 90 && (gLogCategory_APAudioFormat != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return v8;
}

uint64_t APAudioFormatGetMagicCookieForAPAC(uint64_t a1, void *a2, int *a3, double a4)
{
  if (APAudioFormatInitializeMagicCookieForCodec_initOnce != -1) {
    dispatch_once(&APAudioFormatInitializeMagicCookieForCodec_initOnce, &__block_literal_global_159);
  }
  if (sAPAC_MagicStereo
    && sAPAC_MagicSurround51
    && sAPAC_MagicSurround512
    && sAPAC_MagicSurround71
    && sAPAC_MagicSurround714)
  {
    uint64_t result = 0;
    if (a4 == 48000.0)
    {
      switch(a1)
      {
        case '@':
          uint64_t result = 0;
          *a2 = sAPAC_MagicStereo;
          int v9 = sAPAC_MagicStereoSize;
          goto LABEL_17;
        case 'A':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround51;
          int v9 = sAPAC_MagicSurround51Size;
          goto LABEL_17;
        case 'B':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround512;
          int v9 = sAPAC_MagicSurround512Size;
          goto LABEL_17;
        case 'C':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround71;
          int v9 = sAPAC_MagicSurround71Size;
          goto LABEL_17;
        case 'D':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround714;
          int v9 = sAPAC_MagicSurround714Size;
          goto LABEL_17;
        case 'L':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround514;
          int v9 = sAPAC_MagicSurround514Size;
          goto LABEL_17;
        case 'M':
          uint64_t result = 0;
          *a2 = sAPAC_MagicSurround712;
          int v9 = sAPAC_MagicSurround712Size;
LABEL_17:
          *a3 = v9;
          break;
        default:
          return result;
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960561;
  }
  return result;
}

uint64_t APSRealTimeWritableGetTypeID()
{
  if (gAPSRealTimeWritableInitOnce != -1) {
    dispatch_once_f(&gAPSRealTimeWritableInitOnce, 0, (dispatch_function_t)_APSRealTimeWritableGetTypeID);
  }
  return gAPSRealTimeWritableTypeID;
}

uint64_t _APSRealTimeWritableGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRealTimeWritableCFTypeID TypeID = result;
  return result;
}

void _APSRealTimeWritableFinalize(uint64_t a1)
{
  uint64_t v2 = *(void **)(a1 + 40);
  if (v2) {
    free(v2);
  }
  uint64_t v3 = *(void **)(a1 + 48);
  if (v3)
  {
    free(v3);
  }
}

uint64_t APSRealTimeWritableCreate(const void *a1, size_t a2, CFTypeRef *a3)
{
  if (a2 && a3)
  {
    if (gAPSRealTimeWritableInitOnce != -1) {
      dispatch_once_f(&gAPSRealTimeWritableInitOnce, 0, (dispatch_function_t)_APSRealTimeWritableGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v7 = (void *)Instance;
      *(void *)(Instance + 33) = 0;
      *(void *)(Instance + 25) = 0;
      *(void *)(Instance + 48) = 0;
      *(void *)(Instance + 41) = 0;
      *(void *)(Instance + 16) = a2;
      *(unsigned char *)(Instance + 24) = 0;
      atomic_store(0, (unint64_t *)(Instance + 32));
      uint64_t v8 = malloc_type_malloc(a2, 0x1E8E328DuLL);
      v7[5] = v8;
      if (v8 && (int v9 = malloc_type_malloc(a2, 0x949EECFuLL), (v7[6] = v9) != 0))
      {
        uint64_t v10 = (void *)v7[5];
        if (a1) {
          memcpy(v10, a1, a2);
        }
        else {
          bzero(v10, a2);
        }
        uint64_t v11 = 0;
        *a3 = CFRetain(v7);
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v11 = 4294960568;
      }
      CFRelease(v7);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v11;
}

uint64_t APSRealTimeWritableRead(uint64_t a1, void *__dst)
{
  if (a1 && __dst)
  {
    unint64_t v4 = *(void *)(a1 + 32);
    unint64_t v5 = v4;
    do
    {
      __dmb(9u);
      memcpy(__dst, *(const void **)(a1 + 8 * (v4 & 1) + 40), *(void *)(a1 + 16));
      atomic_compare_exchange_strong_explicit((atomic_ullong *volatile)(a1 + 32), &v5, v5, memory_order_release, memory_order_relaxed);
      BOOL v6 = v5 == v4;
      unint64_t v4 = v5;
    }
    while (!v6);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSRealTimeWritableWrite(uint64_t a1, const void *a2)
{
  if (a1 && a2)
  {
    __swp(a1 + 24, (unsigned int *)(a1 + 24));
    if ((a1 + 24))
    {
      APSLogErrorAt(0);
      uint64_t v4 = 4294960537;
      APSSignalErrorAt(4294960537);
    }
    else
    {
      unint64_t v3 = *(void *)(a1 + 32) + 1;
      memcpy(*(void **)(a1 + 8 * (v3 & 1) + 40), a2, *(void *)(a1 + 16));
      uint64_t v4 = 0;
      atomic_store(v3, (unint64_t *)(a1 + 32));
      *(unsigned char *)(a1 + 24) = 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

const void *APSEncryptionUtilsDeriveAESKeySHA512(const void *result, CC_LONG a2, const void *a3, CC_LONG a4, const void *a5, CC_LONG a6, _OWORD *a7, _OWORD *a8)
{
  uint64_t v12 = result;
  uint64_t v19 = *MEMORY[0x1E4F143B8];
  memset(&v17, 0, sizeof(v17));
  if (a7)
  {
    CC_SHA512_Init(&v17);
    CC_SHA512_Update(&v17, a3, a4);
    CC_SHA512_Update(&v17, v12, a2);
    uint64_t result = (const void *)CC_SHA512_Final(md, &v17);
    *a7 = *(_OWORD *)md;
  }
  if (a8)
  {
    CC_SHA512_Init(&v17);
    CC_SHA512_Update(&v17, a5, a6);
    CC_SHA512_Update(&v17, v12, a2);
    uint64_t result = (const void *)CC_SHA512_Final(md, &v17);
    *a8 = *(_OWORD *)md;
  }
  for (uint64_t i = 0; i != 64; ++i)
    md[i] = 0;
  return result;
}

void APSEncryptionUtilsDeriveAESKeySHA512ForScreen(const void *a1, CC_LONG a2, uint64_t a3, _OWORD *a4, _OWORD *a5)
{
  signed int v9 = ASPrintF();
  uint64_t v10 = v9;
  signed int v11 = ASPrintF();
  uint64_t v12 = v11;
  APSEncryptionUtilsDeriveAESKeySHA512(a1, a2, 0, v9, 0, v11, a4, a5);
  if (v9)
  {
    uint64_t v13 = 0;
    do
    {
      *v13++ = 0;
      --v10;
    }
    while (v10);
  }
  if (v12)
  {
    long long v14 = 0;
    do
    {
      *v14++ = 0;
      --v12;
    }
    while (v12);
  }
  free(0);
  free(0);
}

uint64_t APSThreadSafeDictionaryGetTypeID()
{
  if (gAPSThreadSafeDictionaryInitOnce != -1) {
    dispatch_once_f(&gAPSThreadSafeDictionaryInitOnce, 0, (dispatch_function_t)_APSThreadSafeDictionaryGetTypeID);
  }
  return gAPSThreadSafeDictionaryTypeID;
}

uint64_t _APSThreadSafeDictionaryGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSThreadSafeDictionaryCFTypeID TypeID = result;
  return result;
}

uint64_t _APSThreadSafeDictionaryFinalize(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 24);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 24) = 0;
  }

  return FigSimpleMutexDestroy();
}

uint64_t APSThreadSafeDictionaryCreate(CFTypeRef *a1)
{
  if (!a1) {
    return 4294960591;
  }
  if (gAPSThreadSafeDictionaryInitOnce != -1) {
    dispatch_once_f(&gAPSThreadSafeDictionaryInitOnce, 0, (dispatch_function_t)_APSThreadSafeDictionaryGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance) {
    return 4294960568;
  }
  unint64_t v3 = (void *)Instance;
  *(void *)(Instance + 16) = 0;
  *(void *)(Instance + 24) = 0;
  *(void *)(Instance + 16) = FigSimpleMutexCreate();
  v3[3] = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  *a1 = CFRetain(v3);
  CFRelease(v3);
  return 0;
}

uint64_t APSThreadSafeDictionaryCopyValueIfPresent(uint64_t a1, const void *a2, CFTypeRef *a3)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  if (CFDictionaryGetValueIfPresent(*(CFDictionaryRef *)(a1 + 24), a2, a3))
  {
    if (*a3) {
      CFRetain(*a3);
    }
    uint64_t v6 = 1;
  }
  else
  {
    uint64_t v6 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return v6;
}

void *APSThreadSafeDictionaryCopyValue(uint64_t a1, const void *a2)
{
  CMTimeValue value = 0;
  if (!*(void *)(a1 + 24)) {
    return 0;
  }
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  if (CFDictionaryGetValueIfPresent(*(CFDictionaryRef *)(a1 + 24), a2, (const void **)&value))
  {
    if (value) {
      CFRetain(value);
    }
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return value;
}

uint64_t APSThreadSafeDictionaryGetInt32IfPresent(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t Int32IfPresent = FigCFDictionaryGetInt32IfPresent();
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return Int32IfPresent;
}

uint64_t APSThreadSafeDictionaryGetInt64IfPresent(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t Int64IfPresent = FigCFDictionaryGetInt64IfPresent();
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return Int64IfPresent;
}

uint64_t APSThreadSafeDictionaryGetInt64(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t Int64 = CFDictionaryGetInt64();
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return Int64;
}

uint64_t APSThreadSafeDictionarySetValue(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  FigCFDictionarySetValue();
  uint64_t v2 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v2);
}

uint64_t APSThreadSafeDictionarySetInt64(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  FigCFDictionarySetInt64();
  uint64_t v2 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v2);
}

uint64_t APSThreadSafeDictionarySetInt32(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  FigCFDictionarySetInt32();
  uint64_t v2 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v2);
}

uint64_t APSThreadSafeDictionaryCopyMutableDictionary(uint64_t a1)
{
  FigSimpleMutexCheckIsNotLockedOnThisThread();
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  uint64_t MutableCopy = FigCFDictionaryCreateMutableCopy();
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 16));
  return MutableCopy;
}

uint64_t APSThreadSafeDictionaryRemoveValue(uint64_t a1, const void *a2)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 16));
  CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 24), a2);
  uint64_t v4 = *(pthread_mutex_t **)(a1 + 16);

  return pthread_mutex_unlock(v4);
}

uint64_t APSHierarchyReporterProtocolGetProtocolID()
{
  if (APSHierarchyReporterProtocolGetProtocolID_sAPSHierarchyReporterProtocolIDOnce != -1) {
    dispatch_once_f(&APSHierarchyReporterProtocolGetProtocolID_sAPSHierarchyReporterProtocolIDOnce, &APSHierarchyReporterProtocolGetProtocolID_sAPSHierarchyReporterProtocolID, (dispatch_function_t)endpointHierarchy_registerProtocol);
  }
  return APSHierarchyReporterProtocolGetProtocolID_sAPSHierarchyReporterProtocolID;
}

uint64_t endpointHierarchy_registerProtocol(uint64_t a1)
{
  return MEMORY[0x1F40DC660](&kAPSHierarchyReporterProtocolDesc, 0, a1);
}

uint64_t APSXPCServerStart(const void *a1, const __CFDictionary *a2)
{
  if (a1)
  {
    unint64_t v3 = apsxpc_serverLookup(a1);
    pthread_mutex_lock((pthread_mutex_t *)v3[3]);
    if (!v3[6])
    {
      void v3[6] = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], 0);
      v3[7] = FigSimpleMutexCreate();
    }
    if (v3[4])
    {
      pthread_mutex_unlock((pthread_mutex_t *)v3[3]);
      return 0;
    }
    else
    {
      uint64_t v13 = 0;
      name = 0;
      ASPrintF();
      uint64_t v5 = CFStringCopyUTF8CString();
      uint64_t v4 = v5;
      if (v5)
      {
        APSLogErrorAt(v5);
      }
      else
      {
        dispatch_queue_t v6 = dispatch_queue_create(v13, 0);
        _OWORD v3[4] = v6;
        if (a2)
        {
          int Value = CFDictionaryGetValue(a2, @"EntitlementName");
          if (Value) {
            int Value = CFRetain(Value);
          }
          void v3[2] = Value;
          uint64_t v8 = v3[4];
        }
        else
        {
          uint64_t v8 = v6;
        }
        mach_service = xpc_connection_create_mach_service(name, v8, 1uLL);
        v3[5] = mach_service;
        handler[0] = MEMORY[0x1E4F143A8];
        handler[1] = 0x40000000;
        handler[2] = __apsxpc_serverEnsureStart_block_invoke;
        handler[3] = &__block_descriptor_tmp_15_2076;
        handler[4] = v3;
        xpc_connection_set_event_handler(mach_service, handler);
        xpc_connection_resume((xpc_connection_t)v3[5]);
        if (gLogCategory_APSXPCService <= 50
          && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
      }
      free(v13);
      free(name);
      pthread_mutex_unlock((pthread_mutex_t *)v3[3]);
      if (v4) {
        APSLogErrorAt(v4);
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

void *apsxpc_serverLookup(const void *a1)
{
  if (apsxpc_getServerTable_once != -1) {
    dispatch_once(&apsxpc_getServerTable_once, &__block_literal_global_2098);
  }
  pthread_mutex_lock((pthread_mutex_t *)apsxpc_getServerTable_serverTable_1);
  int Value = CFDictionaryGetValue((CFDictionaryRef)apsxpc_getServerTable_serverTable_0, a1);
  if (!Value)
  {
    int Value = malloc_type_calloc(1uLL, 0x60uLL, 0x1070040C487B433uLL);
    void *Value = CFRetain(a1);
    Value[1] = CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"APSXPCServerDisconnected-%@", a1);
    Value[3] = FigSimpleMutexCreate();
    CFDictionaryAddValue((CFMutableDictionaryRef)apsxpc_getServerTable_serverTable_0, a1, Value);
  }
  pthread_mutex_unlock((pthread_mutex_t *)apsxpc_getServerTable_serverTable_1);
  return Value;
}

void __apsxpc_serverEnsureStart_block_invoke(uint64_t a1, _xpc_connection_s *a2)
{
  uint64_t v20 = *MEMORY[0x1E4F143B8];
  uint64_t v4 = MEMORY[0x1D25EF750](a2);
  if (v4 == MEMORY[0x1E4F14578])
  {
    uint64_t v5 = *(void *)(a1 + 32);
    memset(v19, 0, sizeof(v19));
    long long v18 = 0u;
    long long v17 = 0u;
    long long v16 = 0u;
    long long v15 = 0u;
    long long v14 = 0u;
    long long v13 = 0u;
    memset(buffer, 63, sizeof(buffer));
    pid_t pid = xpc_connection_get_pid(a2);
    proc_name(pid, buffer, 0x80u);
    if (gLogCategory_APSXPCService <= 50
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    label = 0;
    if (*(void *)(v5 + 16))
    {
      uint64_t v7 = CFStringCopyUTF8CString();
      if (v7)
      {
        APSLogErrorAt(v7);
        free(label);
      }
      else
      {
        char has_entitlement = xpc_connection_has_entitlement();
        free(label);
        if (has_entitlement) {
          goto LABEL_18;
        }
      }
      if (gLogCategory_APSXPCService > 90
        || gLogCategory_APSXPCService == -1 && !_LogCategory_Initialize())
      {
        goto LABEL_43;
      }
      goto LABEL_41;
    }
LABEL_18:
    if (!*(void *)(v5 + 72))
    {
      label = 0;
      if (gLogCategory_APSXPCService <= 50
        && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      *(void *)(v5 + 72) = xpc_retain(a2);
      *(_DWORD *)(v5 + 88) = pid;
      *(void *)(v5 + 64) = strdup(buffer);
      ASPrintF();
      signed int v9 = dispatch_queue_create(label, 0);
      *(void *)(v5 + 80) = v9;
      xpc_connection_set_target_queue(a2, v9);
      free(label);
      handler[0] = MEMORY[0x1E4F143A8];
      handler[1] = 0x40000000;
      handler[2] = __apsxpc_serverHandleNewClientConnection_block_invoke;
      handler[3] = &__block_descriptor_tmp_20;
      handler[4] = v5;
      xpc_connection_set_event_handler(a2, handler);
      xpc_connection_resume(a2);
      return;
    }
    if (gLogCategory_APSXPCService > 90 || gLogCategory_APSXPCService == -1 && !_LogCategory_Initialize())
    {
LABEL_43:
      xpc_connection_cancel(a2);
      return;
    }
LABEL_41:
    LogPrintF();
    goto LABEL_43;
  }
  if (v4 != MEMORY[0x1E4F145A8]) {
    return;
  }
  if (a2 == (_xpc_connection_s *)MEMORY[0x1E4F14528])
  {
    if (gLogCategory_APSXPCService <= 90
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_27;
    }
  }
  else if (a2 == (_xpc_connection_s *)MEMORY[0x1E4F14520])
  {
    if (gLogCategory_APSXPCService <= 90
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_27;
    }
  }
  else if (gLogCategory_APSXPCService <= 90 {
         && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
  }
  {
LABEL_27:
    LogPrintF();
  }
}

void __apsxpc_serverHandleNewClientConnection_block_invoke(uint64_t a1, void *a2)
{
  uint64_t v4 = MEMORY[0x1D25EF750](a2);
  if (v4 == MEMORY[0x1E4F14590])
  {
    xpc_object_t reply = xpc_dictionary_create_reply(a2);
    remote_connectiouint64_t n = xpc_dictionary_get_remote_connection(a2);
    CFTypeRef cf = 0;
    key[0] = 0;
    CFTypeRef v12 = 0;
    uint64_t v9 = FigXPCMessageCopyCFString();
    if (v9)
    {
      int v11 = v9;
    }
    else
    {
      int v11 = -6705;
      uint64_t v9 = 4294960591;
    }
    APSLogErrorAt(v9);
    if (key[0]) {
      CFRelease(key[0]);
    }
    if (cf) {
      CFRelease(cf);
    }
    if (v12) {
      CFRelease(v12);
    }
    xpc_dictionary_set_int64(reply, "OutError", v11);
    xpc_connection_send_message(remote_connection, reply);
    xpc_release(reply);
  }
  else if (v4 == MEMORY[0x1E4F145A8])
  {
    uint64_t v5 = *(void **)(a1 + 32);
    string = xpc_dictionary_get_string(a2, (const char *)*MEMORY[0x1E4F14530]);
    if (a2 == (void *)MEMORY[0x1E4F14528])
    {
      uint64_t v10 = v5[4];
      key[0] = (void *)MEMORY[0x1E4F143A8];
      key[1] = (void *)0x40000000;
      key[2] = __apsxpc_serverHandleClientConnectionError_block_invoke;
      key[3] = &__block_descriptor_tmp_30_2093;
      key[4] = v5;
      key[5] = (void *)string;
      dispatch_sync(v10, key);
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterPostNotification();
    }
    else if (gLogCategory_APSXPCService <= 90 {
           && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    }
    {
      LogPrintF();
    }
  }
}

void __apsxpc_serverHandleClientConnectionError_block_invoke(uint64_t a1)
{
  if (gLogCategory_APSXPCService <= 90 && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  uint64_t v2 = *(void *)(a1 + 32);
  if (*(_DWORD *)(v2 + 88)
    && gLogCategory_APSXPCService <= 50
    && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  unint64_t v3 = *(_xpc_connection_s **)(v2 + 72);
  if (v3)
  {
    xpc_connection_cancel(v3);
    uint64_t v4 = *(void **)(v2 + 72);
    if (v4)
    {
      *(void *)(v2 + 72) = 0;
      xpc_release(v4);
    }
  }
  uint64_t v5 = *(NSObject **)(v2 + 80);
  if (v5)
  {
    dispatch_release(v5);
    *(void *)(v2 + 80) = 0;
  }
  free(*(void **)(v2 + 64));
  *(void *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 88) = 0;
}

uint64_t __apsxpc_getServerTable_block_invoke()
{
  apsxpc_getServerTable_serverTable_0 = (uint64_t)CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], 0);
  uint64_t result = FigSimpleMutexCreate();
  apsxpc_getServerTable_serverTable_1 = result;
  return result;
}

uint64_t APSXPCServerAddCommandHandler(const void *a1, const void *a2, const void *a3)
{
  if (!a1 || !a2 || !a3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t v5 = apsxpc_serverLookup(a1);
  pthread_mutex_lock((pthread_mutex_t *)v5[3]);
  if (!v5[6])
  {
    v5[6] = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], 0);
    v5[7] = FigSimpleMutexCreate();
  }
  pthread_mutex_unlock((pthread_mutex_t *)v5[3]);
  pthread_mutex_lock((pthread_mutex_t *)v5[7]);
  int Value = CFDictionaryGetValue((CFDictionaryRef)v5[6], a2);
  if (Value)
  {
    pthread_mutex_unlock((pthread_mutex_t *)v5[7]);
    if (Value != a3)
    {
      uint64_t v7 = 4294960577;
      APSLogErrorAt(4294960577);
      return v7;
    }
  }
  else
  {
    CFDictionaryAddValue((CFMutableDictionaryRef)v5[6], a2, a3);
    pthread_mutex_unlock((pthread_mutex_t *)v5[7]);
  }
  if (Value != a3
    && gLogCategory_APSXPCService <= 50
    && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return 0;
}

uint64_t APSXPCServerPostEvent(const void *a1, uint64_t a2, uint64_t a3)
{
  uint64_t v12 = 0;
  long long v13 = &v12;
  uint64_t v14 = 0x2000000000;
  uint64_t v15 = 0;
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    uint64_t v9 = 4294960591;
    goto LABEL_13;
  }
  uint64_t v4 = apsxpc_serverLookup(a1);
  pthread_mutex_lock((pthread_mutex_t *)v4[3]);
  uint64_t v5 = v4[4];
  pthread_mutex_unlock((pthread_mutex_t *)v4[3]);
  if (!v5)
  {
    uint64_t v9 = 4294960551;
    APSLogErrorAt(4294960551);
    goto LABEL_13;
  }
  dispatch_queue_t v6 = v4[4];
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 0x40000000;
  block[2] = __APSXPCServerPostEvent_block_invoke;
  block[3] = &unk_1E6898B80;
  block[4] = &v12;
  void block[5] = v4;
  dispatch_sync(v6, block);
  if (!v13[3])
  {
    uint64_t v9 = 0;
    goto LABEL_13;
  }
  xpc_object_t v7 = xpc_dictionary_create(0, 0, 0);
  uint64_t v8 = FigXPCMessageSetCFString();
  if (v8)
  {
    uint64_t v9 = v8;
LABEL_19:
    APSLogErrorAt(v8);
    goto LABEL_13;
  }
  if (a3)
  {
    uint64_t v8 = FigXPCMessageSetCFDictionary();
    if (v8)
    {
      uint64_t v9 = v8;
      goto LABEL_19;
    }
  }
  xpc_connection_send_message((xpc_connection_t)v13[3], v7);
  if (gLogCategory_APSXPCService <= 50 && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  uint64_t v9 = 0;
LABEL_13:
  FigXPCRelease();
  FigXPCRelease();
  _Block_object_dispose(&v12, 8);
  return v9;
}

uint64_t __APSXPCServerPostEvent_block_invoke(uint64_t a1)
{
  uint64_t result = FigXPCRetain();
  *(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = result;
  return result;
}

uint64_t APSXPCServerGetDisconnectNotificationName(const void *a1)
{
  if (a1) {
    return apsxpc_serverLookup(a1)[1];
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSXPCClientSendCommandCreatingReply(const void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  uint64_t v12 = 0;
  long long v13 = &v12;
  uint64_t v14 = 0x2000000000;
  int v15 = 0;
  if (a1 && a2)
  {
    xpc_object_t v7 = apsxpc_clientLookup(a1);
    if (gLogCategory_APSXPCService <= 50
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v8 = v7[2];
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __APSXPCClientSendCommandCreatingReply_block_invoke;
    block[3] = &unk_1E6898BA8;
    block[4] = &v12;
    void block[5] = v7;
    void block[6] = a2;
    block[7] = a3;
    void block[8] = a4;
    dispatch_sync(v8, block);
    uint64_t v9 = *((unsigned int *)v13 + 6);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v9 = 4294960591;
    *((_DWORD *)v13 + 6) = -6705;
  }
  _Block_object_dispose(&v12, 8);
  return v9;
}

void *apsxpc_clientLookup(const void *a1)
{
  if (apsxpc_getClientTable_once != -1) {
    dispatch_once(&apsxpc_getClientTable_once, &__block_literal_global_40);
  }
  pthread_mutex_lock((pthread_mutex_t *)apsxpc_getClientTable_clientTable_1);
  int Value = CFDictionaryGetValue((CFDictionaryRef)apsxpc_getClientTable_clientTable_0, a1);
  if (!Value)
  {
    int Value = malloc_type_calloc(1uLL, 0x40uLL, 0x6004065B7E030uLL);
    void *Value = CFRetain(a1);
    CFAllocatorRef v3 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    Value[1] = CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"APSXPCClientDisconnected-%@", a1);
    ASPrintF();
    Value[2] = dispatch_queue_create(0, 0);
    ASPrintF();
    Value[3] = dispatch_queue_create(0, 0);
    ASPrintF();
    Value[7] = dispatch_queue_create(0, 0);
    Value[5] = CFDictionaryCreateMutable(v3, 0, MEMORY[0x1E4F1D530], 0);
    Value[6] = FigSimpleMutexCreate();
    CFDictionaryAddValue((CFMutableDictionaryRef)apsxpc_getClientTable_clientTable_0, a1, Value);
  }
  pthread_mutex_unlock((pthread_mutex_t *)apsxpc_getClientTable_clientTable_1);
  return Value;
}

uint64_t __APSXPCClientSendCommandCreatingReply_block_invoke(void *a1)
{
  uint64_t v2 = a1[5];
  uint64_t v4 = a1[7];
  uint64_t v3 = a1[8];
  name = 0;
  if (!*(void *)(v2 + 32))
  {
    uint64_t v5 = CFStringCopyUTF8CString();
    uint64_t v6 = v5;
    if (v5)
    {
      APSLogErrorAt(v5);
    }
    else
    {
      mach_service = xpc_connection_create_mach_service(name, *(dispatch_queue_t *)(v2 + 24), 0);
      *(void *)(v2 + 32) = mach_service;
      handler[0] = MEMORY[0x1E4F143A8];
      handler[1] = 0x40000000;
      handler[2] = __apsxpc_clientEnsureConnection_block_invoke;
      handler[3] = &__block_descriptor_tmp_50_2110;
      handler[4] = v2;
      xpc_connection_set_event_handler(mach_service, handler);
      xpc_connection_resume(*(xpc_connection_t *)(v2 + 32));
    }
    if (name) {
      free(name);
    }
    if (v6)
    {
      APSLogErrorAt(v6);
      goto LABEL_23;
    }
  }
  xpc_object_t v8 = xpc_dictionary_create(0, 0, 0);
  uint64_t v9 = FigXPCMessageSetCFString();
  if (v9)
  {
    LODWORD(v6) = v9;
LABEL_27:
    APSLogErrorAt(v9);
    goto LABEL_23;
  }
  if (v4)
  {
    uint64_t v9 = FigXPCMessageSetCFDictionary();
    if (v9)
    {
      LODWORD(v6) = v9;
      goto LABEL_27;
    }
  }
  xpc_object_t v10 = xpc_connection_send_message_with_reply_sync(*(xpc_connection_t *)(v2 + 32), v8);
  if (MEMORY[0x1D25EF750]() != MEMORY[0x1E4F14590])
  {
    if (gLogCategory_APSXPCService <= 50
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    xpc_connection_cancel(*(xpc_connection_t *)(v2 + 32));
    long long v13 = *(void **)(v2 + 32);
    if (v13)
    {
      *(void *)(v2 + 32) = 0;
      xpc_release(v13);
    }
    LODWORD(v6) = -6753;
    uint64_t v12 = 4294960543;
    goto LABEL_22;
  }
  int int64 = xpc_dictionary_get_int64(v10, "OutError");
  LODWORD(v6) = int64;
  if (v3)
  {
    if (!int64)
    {
      uint64_t v12 = FigXPCMessageCopyCFDictionary();
      LODWORD(v6) = v12;
      if (v12) {
LABEL_22:
      }
        APSLogErrorAt(v12);
    }
  }
LABEL_23:
  FigXPCRelease();
  uint64_t result = FigXPCRelease();
  *(_DWORD *)(*(void *)(a1[4] + 8) + 24) = v6;
  return result;
}

void __apsxpc_clientEnsureConnection_block_invoke(uint64_t a1, void *a2)
{
  uint64_t v3 = MEMORY[0x1D25EF750](a2);
  if (v3 == MEMORY[0x1E4F145A8])
  {
    xpc_dictionary_get_string(a2, (const char *)*MEMORY[0x1E4F14530]);
    if (gLogCategory_APSXPCService <= 90
      && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterPostNotification();
  }
  else if (v3 == MEMORY[0x1E4F14590])
  {
    uint64_t v4 = FigXPCMessageCopyCFString();
    if (!v4) {
      uint64_t v4 = 0;
    }
    APSLogErrorAt(v4);
  }
}

void __apsxpc_clientHandleMessageFromServer_block_invoke(uint64_t a1)
{
  if (gLogCategory_APSXPCService <= 50 && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  (*(void (**)(void, void))(a1 + 48))(*(void *)(a1 + 32), *(void *)(a1 + 56));
  uint64_t v2 = *(const void **)(a1 + 32);
  if (v2) {
    CFRelease(v2);
  }
  uint64_t v3 = *(const void **)(a1 + 56);
  if (v3)
  {
    CFRelease(v3);
  }
}

uint64_t __apsxpc_getClientTable_block_invoke()
{
  apsxpc_getClientTable_clientTable_0 = (uint64_t)CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], 0);
  uint64_t result = FigSimpleMutexCreate();
  apsxpc_getClientTable_clientTable_1 = result;
  return result;
}

uint64_t APSXPCClientAddEventHandler(const void *a1, const void *a2, const void *a3)
{
  if (!a1 || !a2 || !a3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  uint64_t v5 = apsxpc_clientLookup(a1);
  pthread_mutex_lock((pthread_mutex_t *)v5[6]);
  int Value = CFDictionaryGetValue((CFDictionaryRef)v5[5], a2);
  if (Value)
  {
    pthread_mutex_unlock((pthread_mutex_t *)v5[6]);
    if (Value != a3)
    {
      uint64_t v7 = 4294960577;
      APSLogErrorAt(4294960577);
      return v7;
    }
  }
  else
  {
    CFDictionaryAddValue((CFMutableDictionaryRef)v5[5], a2, a3);
    pthread_mutex_unlock((pthread_mutex_t *)v5[6]);
  }
  if (Value != a3
    && gLogCategory_APSXPCService <= 50
    && (gLogCategory_APSXPCService != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return 0;
}

uint64_t APSXPCClientGetDisconnectNotificationName(const void *a1)
{
  if (a1) {
    return apsxpc_clientLookup(a1)[1];
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSRTPJitterBufferSimCreate(uint64_t a1, long long *a2, uint64_t a3, int a4, char a5, const void *a6, _DWORD *a7)
{
  if (!a2 || !a3 || *(_DWORD *)(a3 + 8) != 1819304813 || !a4)
  {
    APSLogErrorAt(0);
    uint64_t v14 = 0;
    LODWORD(v35) = -6705;
    goto LABEL_43;
  }
  if (APSRTPJitterBufferSimGetTypeID_once != -1) {
    dispatch_once(&APSRTPJitterBufferSimGetTypeID_once, &__block_literal_global_2129);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  uint64_t v14 = Instance;
  if (!Instance) {
    goto LABEL_47;
  }
  *(_OWORD *)(Instance + 16) = 0u;
  *(void *)(Instance + 272) = 0;
  *(_OWORD *)(Instance + 240) = 0u;
  *(_OWORD *)(Instance + 256) = 0u;
  *(_OWORD *)(Instance + 208) = 0u;
  *(_OWORD *)(Instance + 224) = 0u;
  *(_OWORD *)(Instance + 176) = 0u;
  *(_OWORD *)(Instance + 192) = 0u;
  *(_OWORD *)(Instance + 144) = 0u;
  *(_OWORD *)(Instance + 160) = 0u;
  *(_OWORD *)(Instance + 128) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 96) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 112) = 0u;
  int v15 = (double *)(Instance + 112);
  *(_OWORD *)(Instance + 32) = 0u;
  long long v16 = *a2;
  long long v17 = a2[1];
  *(void *)(Instance + 104) = *((void *)a2 + 4);
  *(_OWORD *)(Instance + 88) = v17;
  *(_OWORD *)(Instance + 72) = v16;
  uint64_t v18 = *(void *)(a3 + 32);
  long long v19 = *(_OWORD *)(a3 + 16);
  *(_OWORD *)(Instance + 112) = *(_OWORD *)a3;
  *(void *)(Instance + 144) = v18;
  *(_OWORD *)(Instance + 128) = v19;
  *(_DWORD *)(Instance + 156) = *(double *)(Instance + 112) * a4 / 0x3E8;
  *(_DWORD *)(Instance + 160) = a4;
  *(unsigned char *)(Instance + 266) = 0;
  *(_DWORD *)(Instance + 236) = 0;
  if (a5) {
    *(_WORD *)(Instance + 164) = 257;
  }
  *(void *)(Instance + 16) = CFRetain(a6);
  dispatch_queue_t v20 = dispatch_queue_create("com.apple.APSRTPJitterBufferSim.log", 0);
  *(void *)(v14 + 24) = v20;
  if (!v20)
  {
LABEL_47:
    APSLogErrorAt(0);
    LODWORD(v35) = -6728;
    goto LABEL_43;
  }
  if (gLogCategory_APSRTPJitterBufferSim <= 50
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (*(_DWORD *)(v14 + 80) == 1819304813) {
    unsigned int v21 = 0x5A0u / *(_DWORD *)(v14 + 88);
  }
  else {
    unsigned int v21 = *(_DWORD *)(v14 + 92);
  }
  *(_DWORD *)(v14 + 152) = v21;
  if (!v21)
  {
    APSLogErrorAt(0);
    uint64_t v35 = 4294960591;
LABEL_54:
    uint64_t v37 = v35;
LABEL_58:
    APSLogErrorAt(v37);
    goto LABEL_43;
  }
  size_t v22 = 4 * *(_DWORD *)(v14 + 156) / v21 + 1;
  *(_DWORD *)(v14 + 40) = v22;
  int v23 = malloc_type_calloc(v22, 0x18uLL, 0x1000040FC63CA6CuLL);
  *(void *)(v14 + 32) = v23;
  if (!v23) {
    goto LABEL_53;
  }
  if (gLogCategory_APSRTPJitterBufferSim <= 30
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFAllocatorRef v24 = CFGetAllocator((CFTypeRef)v14);
  uint64_t v25 = CMSimpleQueueCreate(v24, *(_DWORD *)(v14 + 40), (CMSimpleQueueRef *)(v14 + 56));
  if (v25)
  {
    uint64_t v35 = v25;
LABEL_52:
    APSLogErrorAt(v25);
    goto LABEL_54;
  }
  CFAllocatorRef v26 = CFGetAllocator((CFTypeRef)v14);
  uint64_t v25 = CMSimpleQueueCreate(v26, *(_DWORD *)(v14 + 40), (CMSimpleQueueRef *)(v14 + 48));
  if (v25)
  {
    uint64_t v35 = v25;
    goto LABEL_52;
  }
  dispatch_semaphore_t v27 = dispatch_semaphore_create(0);
  *(void *)(v14 + 64) = v27;
  if (!v27)
  {
LABEL_53:
    APSLogErrorAt(0);
    uint64_t v35 = 4294960568;
    goto LABEL_54;
  }
  if (*(_DWORD *)(v14 + 40))
  {
    uint64_t v28 = 0;
    unint64_t v29 = 0;
    do
    {
      CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(v14 + 48), (const void *)(*(void *)(v14 + 32) + v28));
      ++v29;
      v28 += 24;
    }
    while (v29 < *(unsigned int *)(v14 + 40));
  }
  if (*(double *)(v14 + 72) != *v15 || *(_DWORD *)(v14 + 100) != *(_DWORD *)(v14 + 140))
  {
    APSLogErrorAt(0);
    uint64_t v35 = 4294960591;
LABEL_57:
    uint64_t v37 = v35;
    goto LABEL_58;
  }
  *(_DWORD *)(v14 + 224) = 20 * *(_DWORD *)(v14 + 156) * *(_DWORD *)(v14 + 136);
  unsigned int v30 = iceil2();
  *(void *)(v14 + 192) = 0;
  *(void *)(v14 + 200) = v30;
  *(_DWORD *)(v14 + 208) = v30;
  *(_DWORD *)(v14 + 212) = v30 - 1;
  *(void *)(v14 + 216) = 0;
  if (gLogCategory_APSRTPJitterBufferSim <= 30
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v31 = pthread_create((pthread_t *)(v14 + 248), 0, (void *(__cdecl *)(void *))_APSRTPJitterBufferSimDecodeThreadEntry, (void *)v14);
  if (v31)
  {
    uint64_t v35 = v31;
    APSLogErrorAt(v31);
    goto LABEL_57;
  }
  *(void *)(v14 + 256) = v14 + 248;
  if (*(unsigned char *)(v14 + 164))
  {
    LODWORD(v32) = *(_DWORD *)(v14 + 224);
    HIDWORD(v33) = 1072483532;
    LODWORD(v33) = *(_DWORD *)(v14 + 136);
    unsigned int v34 = 4 * a4 * *(double *)(v14 + 112) / 0x3E8;
    *(_DWORD *)(v14 + 180) = ((double)v32 * 0.9 / (double)v33);
    *(_DWORD *)(v14 + 184) = v34;
    if (gLogCategory_APSRTPJitterBufferSim <= 40
      && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
  }
  LODWORD(v35) = 0;
LABEL_43:
  if (a7) {
    *a7 = v35;
  }
  return v14;
}

uint64_t _APSRTPJitterBufferSimDecodeThreadEntry(uint64_t a1)
{
  SetCurrentThreadPriority();
  if (gLogCategory_APSRTPJitterBufferSim <= 30
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    uint64_t v2 = *(NSObject **)(a1 + 24);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = ___APSRTPJitterBufferSimDecodeThreadEntry_block_invoke;
    block[3] = &__block_descriptor_tmp_23;
    block[4] = a1;
    dispatch_async(v2, block);
  }
  while (!*(unsigned char *)(a1 + 265))
  {
    dispatch_semaphore_wait(*(dispatch_semaphore_t *)(a1 + 64), 0xFFFFFFFFFFFFFFFFLL);
    if (*(unsigned char *)(a1 + 265)) {
      break;
    }
    uint64_t v4 = CMSimpleQueueDequeue(*(CMSimpleQueueRef *)(a1 + 56));
    if (*(unsigned char *)(a1 + 265)) {
      break;
    }
    uint64_t v5 = v4;
    if (v4)
    {
      if (*((void *)v4 + 2))
      {
        if (!*(unsigned char *)(a1 + 264))
        {
          int v6 = *(_DWORD *)(a1 + 228);
          if (*(unsigned char *)(a1 + 164))
          {
            *(_DWORD *)(a1 + 232) = v6;
            *(_DWORD *)(a1 + 236) = v6 - v4[1];
            *(_DWORD *)(a1 + 240) = v6;
          }
          else
          {
            *(_DWORD *)(a1 + 232) = v4[1];
            int v7 = v4[1];
            int v8 = v7 - v6;
            int v9 = *(_DWORD *)(a1 + 156);
            int v10 = v6 - v7 + v9;
            if (v8 >= v9) {
              int v10 = 0;
            }
            *(_DWORD *)(a1 + 236) = v10;
            int v11 = v10 + v4[1];
            *(_DWORD *)(a1 + 232) = v11;
            *(_DWORD *)(a1 + 240) = v11;
            unsigned int v12 = *(_DWORD *)(a1 + 136) * (v11 - v6);
            if (v12)
            {
              unsigned int v13 = *(_DWORD *)(a1 + 224);
              if (v12 >= v13) {
                size_t v14 = v13;
              }
              else {
                size_t v14 = v12;
              }
              bzero((void *)(*(void *)(a1 + 192) + (*(_DWORD *)(a1 + 212) & *(_DWORD *)(a1 + 220))), v14);
              *(_DWORD *)(a1 + 220) += v12;
            }
          }
          if (gLogCategory_APSRTPJitterBufferSim <= 30
            && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
          {
            int v15 = *(NSObject **)(a1 + 24);
            uint64_t v44 = MEMORY[0x1E4F143A8];
            uint64_t v45 = 0x40000000;
            __int16 v46 = ___APSRTPJitterBufferSimInitializeWritePointers_block_invoke;
            CFMutableDictionaryRef v47 = &__block_descriptor_tmp_33;
            uint64_t v48 = a1;
            unint64_t v49 = (unint64_t)v5;
            dispatch_async(v15, &v44);
          }
        }
        unsigned int v16 = v5[1] + *(_DWORD *)(a1 + 236);
        v5[1] = v16;
        unsigned int v17 = *(_DWORD *)(a1 + 240);
        int v18 = v16 - v17;
        if (v16 < v17)
        {
          if (gLogCategory_APSRTPJitterBufferSim <= 30
            && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
          {
            unint64_t v33 = *(NSObject **)(a1 + 24);
            v43[0] = MEMORY[0x1E4F143A8];
            v43[1] = 0x40000000;
            v43[2] = ___APSRTPJitterBufferSimWritePacket_block_invoke;
            v43[3] = &__block_descriptor_tmp_27;
            v43[4] = a1;
            void v43[5] = v5;
            dispatch_async(v33, v43);
          }
        }
        else
        {
          if (v16 == v17)
          {
            int v18 = 0;
          }
          else
          {
            if (gLogCategory_APSRTPJitterBufferSim <= 30
              && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
            {
              long long v19 = *(NSObject **)(a1 + 24);
              v39[0] = MEMORY[0x1E4F143A8];
              v39[1] = 0x40000000;
              v39[2] = ___APSRTPJitterBufferSimWritePacket_block_invoke_2;
              v39[3] = &__block_descriptor_tmp_29;
              v39[4] = a1;
              int v40 = v16 - v17;
              unsigned int v41 = v17;
              unsigned int v42 = v16;
              dispatch_async(v19, v39);
            }
            ++*(_DWORD *)(a1 + 276);
          }
          unsigned int v20 = *(_DWORD *)(a1 + 88);
          if (v20) {
            int v21 = v5[4] / v20;
          }
          else {
            int v21 = *(_DWORD *)(a1 + 92);
          }
          unsigned int v22 = v21 + v18;
          int v23 = *(_DWORD *)(a1 + 220);
          unsigned int v24 = *(_DWORD *)(a1 + 136);
          unsigned int v25 = (*(_DWORD *)(a1 + 208) - v23 + *(_DWORD *)(a1 + 216)) / v24;
          unsigned int v26 = *(_DWORD *)(a1 + 232);
          if (v25 < v22)
          {
            if (gLogCategory_APSRTPJitterBufferSim <= 50)
            {
              unsigned int v27 = *(_DWORD *)(a1 + 228);
              if (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize())
              {
                uint64_t v28 = *(NSObject **)(a1 + 24);
                uint64_t v44 = MEMORY[0x1E4F143A8];
                uint64_t v45 = 0x40000000;
                __int16 v46 = ___APSRTPJitterBufferSimCheckOverrun_block_invoke;
                CFMutableDictionaryRef v47 = &__block_descriptor_tmp_35;
                uint64_t v48 = a1;
                unint64_t v49 = __PAIR64__(v26, v27);
                unsigned int v50 = v25;
                dispatch_async(v28, &v44);
              }
            }
            ++*(_DWORD *)(a1 + 272);
            unsigned int v24 = *(_DWORD *)(a1 + 136);
            int v23 = *(_DWORD *)(a1 + 220);
            unsigned int v20 = *(_DWORD *)(a1 + 88);
            unsigned int v26 = *(_DWORD *)(a1 + 232);
          }
          if (v20) {
            int v29 = v5[4] / v20;
          }
          else {
            int v29 = *(_DWORD *)(a1 + 92);
          }
          *(_DWORD *)(a1 + 232) = v26 + v18 + v29;
          *(_DWORD *)(a1 + 220) = v23 + (v29 + v18) * v24;
          *(_DWORD *)(a1 + 240) += v29;
          if (*(unsigned char *)(a1 + 164))
          {
            if (!*(unsigned char *)(a1 + 176))
            {
              int v30 = *(_DWORD *)(a1 + 244) - *(_DWORD *)(a1 + 228);
              if (v30 >= *(_DWORD *)(a1 + 180))
              {
                if (gLogCategory_APSRTPJitterBufferSim <= 30
                  && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
                {
                  uint64_t v31 = *(NSObject **)(a1 + 24);
                  v37[0] = MEMORY[0x1E4F143A8];
                  v37[1] = 0x40000000;
                  long long v37[2] = ___APSRTPJitterBufferSimWritePacket_block_invoke_3;
                  v37[3] = &__block_descriptor_tmp_31;
                  v37[4] = a1;
                  int v38 = v30;
                  dispatch_async(v31, v37);
                }
                ++*(_DWORD *)(a1 + 272);
                *(unsigned char *)(a1 + 176) = 1;
              }
            }
          }
          if (!*(unsigned char *)(a1 + 264))
          {
            if (*(unsigned char *)(a1 + 165))
            {
              uint64_t v32 = mach_absolute_time();
              *(void *)(a1 + 168) = v32 - MillisecondsToUpTicks();
            }
            *(unsigned char *)(a1 + 264) = 1;
          }
        }
      }
      CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(a1 + 48), v5);
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
  if (gLogCategory_APSRTPJitterBufferSim <= 30
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    uint64_t v3 = *(NSObject **)(a1 + 24);
    v35[0] = MEMORY[0x1E4F143A8];
    v35[1] = 0x40000000;
    v35[2] = ___APSRTPJitterBufferSimDecodeThreadEntry_block_invoke_2;
    v35[3] = &__block_descriptor_tmp_25;
    v35[4] = a1;
    dispatch_async(v3, v35);
  }
  return 0;
}

uint64_t __APSRTPJitterBufferSimGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSRTPJitterBufferSimGetTypeID_typeID = result;
  return result;
}

void _APSRTPJitterBufferSimFinalize(uint64_t a1)
{
  if (*(void *)(a1 + 256))
  {
    *(unsigned char *)(a1 + 265) = 1;
    dispatch_semaphore_signal(*(dispatch_semaphore_t *)(a1 + 64));
    pthread_join(*(pthread_t *)(a1 + 248), 0);
    *(void *)(a1 + 256) = 0;
  }
  dispatch_sync(*(dispatch_queue_t *)(a1 + 24), &__block_literal_global_38);
  if (gLogCategory_APSRTPJitterBufferSim <= 50
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  mach_vm_address_t v2 = *(void *)(a1 + 192);
  if (v2) {
    mach_vm_deallocate(*MEMORY[0x1E4F14960], v2, (2 * *(_DWORD *)(a1 + 208)));
  }
  *(_OWORD *)(a1 + 192) = 0u;
  *(_OWORD *)(a1 + 208) = 0u;
  uint64_t v3 = *(void **)(a1 + 32);
  if (v3)
  {
    free(v3);
    *(void *)(a1 + 32) = 0;
  }
  uint64_t v4 = *(const void **)(a1 + 56);
  if (v4)
  {
    CFRelease(v4);
    *(void *)(a1 + 56) = 0;
  }
  uint64_t v5 = *(const void **)(a1 + 48);
  if (v5)
  {
    CFRelease(v5);
    *(void *)(a1 + 48) = 0;
  }
  int v6 = *(NSObject **)(a1 + 64);
  if (v6)
  {
    dispatch_release(v6);
    *(void *)(a1 + 64) = 0;
  }
  int v7 = *(NSObject **)(a1 + 24);
  if (v7)
  {
    dispatch_release(v7);
    *(void *)(a1 + 24) = 0;
  }
  int v8 = *(const void **)(a1 + 16);
  if (v8)
  {
    CFRelease(v8);
    *(void *)(a1 + 16) = 0;
  }
}

uint64_t APSRTPJitterBufferSimGetTypeID()
{
  if (APSRTPJitterBufferSimGetTypeID_once != -1) {
    dispatch_once(&APSRTPJitterBufferSimGetTypeID_once, &__block_literal_global_2129);
  }
  return APSRTPJitterBufferSimGetTypeID_typeID;
}

const void *APSRTPJitterBufferSimGetEmptyPacket(uint64_t a1, int *a2)
{
  if (!a1 || (uint64_t v4 = *(opaqueCMSimpleQueue **)(a1 + 48)) == 0)
  {
    APSLogErrorAt(0);
    uint64_t result = 0;
    int v6 = -6718;
    if (!a2) {
      return result;
    }
    goto LABEL_11;
  }
  uint64_t result = CMSimpleQueueDequeue(v4);
  if (result)
  {
    int v6 = 0;
    if (!a2) {
      return result;
    }
    goto LABEL_11;
  }
  if (gLogCategory_APSRTPJitterBufferSim <= 30
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    CMSimpleQueueGetCount(*(CMSimpleQueueRef *)(a1 + 56));
    LogPrintF();
  }
  uint64_t result = 0;
  int v6 = -6728;
  if (a2) {
LABEL_11:
  }
    *a2 = v6;
  return result;
}

intptr_t APSRTPJitterBufferSimDiscardPacket(intptr_t result, void *a2)
{
  if (a2)
  {
    intptr_t v2 = result;
    a2[2] = 0;
    CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(result + 56), a2);
    uint64_t v3 = *(NSObject **)(v2 + 64);
    return dispatch_semaphore_signal(v3);
  }
  return result;
}

intptr_t APSRTPJitterBufferSimEnqueuePacket(intptr_t result, _DWORD *a2)
{
  if (a2)
  {
    intptr_t v2 = result;
    if (*(_DWORD *)(result + 80) == 1819304813) {
      int v3 = a2[4] / *(_DWORD *)(result + 96);
    }
    else {
      int v3 = *(_DWORD *)(result + 92);
    }
    *(_DWORD *)(result + 244) = v3 + a2[1];
    CMSimpleQueueEnqueue(*(CMSimpleQueueRef *)(result + 56), a2);
    uint64_t v4 = *(NSObject **)(v2 + 64);
    return dispatch_semaphore_signal(v4);
  }
  return result;
}

uint64_t APSRTPJitterBufferSimRead(uint64_t a1, unsigned int a2, unint64_t a3)
{
  unsigned int v5 = *(_DWORD *)(a1 + 232);
  int v6 = *(unsigned __int8 *)(a1 + 264);
  unint64_t v7 = a3 / *(unsigned int *)(a1 + 136);
  if (gLogCategory_APSRTPJitterBufferSim <= 10
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    int v9 = *(NSObject **)(a1 + 24);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __APSRTPJitterBufferSimRead_block_invoke;
    block[3] = &__block_descriptor_tmp_12_2150;
    block[4] = a1;
    void block[5] = a3;
    int v47 = v7;
    dispatch_async(v9, block);
  }
  if (!*(unsigned char *)(a1 + 164))
  {
    if (v7 + a2 < *(_DWORD *)(a1 + 232) || *(unsigned char *)(a1 + 264) == 0)
    {
      if (*(unsigned char *)(a1 + 266))
      {
        if (gLogCategory_APSRTPJitterBufferSim <= 30
          && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        *(unsigned char *)(a1 + 266) = 0;
      }
    }
    else if (!*(unsigned char *)(a1 + 266))
    {
      if (gLogCategory_APSRTPJitterBufferSim <= 50
        && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      *(unsigned char *)(a1 + 266) = 1;
      ++*(_DWORD *)(a1 + 268);
    }
  }
  if (!v6)
  {
    unsigned int v13 = 0;
    goto LABEL_77;
  }
  if (!*(unsigned char *)(a1 + 164))
  {
    unsigned int v14 = *(_DWORD *)(a1 + 228);
    if (v14 <= a2)
    {
      if (v14 >= a2)
      {
        unsigned int v13 = 0;
      }
      else
      {
        unsigned int v15 = a2 - v14;
        if (gLogCategory_APSRTPJitterBufferSim <= 30
          && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
        {
          unsigned int v16 = *(NSObject **)(a1 + 24);
          v44[0] = MEMORY[0x1E4F143A8];
          v44[1] = 0x40000000;
          v44[2] = __APSRTPJitterBufferSimRead_block_invoke_2;
          v44[3] = &__block_descriptor_tmp_14_2156;
          v44[4] = a1;
          unsigned int v45 = v15;
          dispatch_async(v16, v44);
        }
        unsigned int v13 = 0;
        *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v15;
        unsigned int v14 = *(_DWORD *)(a1 + 228) + v15;
        *(_DWORD *)(a1 + 228) = v14;
      }
    }
    else if (v14 - a2 >= v7)
    {
      unsigned int v13 = v7;
    }
    else
    {
      unsigned int v13 = v14 - a2;
    }
    goto LABEL_57;
  }
  mach_absolute_time();
  if (!*(unsigned char *)(a1 + 165)) {
    goto LABEL_39;
  }
  unint64_t v10 = UpTicksToMilliseconds();
  unint64_t v11 = *(unsigned int *)(a1 + 160);
  if ((int)(1000
           * (*(_DWORD *)(a1 + 236) + *(_DWORD *)(a1 + 244) - *(_DWORD *)(a1 + 228))
           / *(double *)(a1 + 112)) >= (int)v11 + (int)v10
    || v10 >= v11)
  {
    *(unsigned char *)(a1 + 176) = 1;
    *(unsigned char *)(a1 + 165) = 0;
    *(void *)(a1 + 168) = 0;
    if (gLogCategory_APSRTPJitterBufferSim > 30) {
      goto LABEL_39;
    }
    if (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()) {
      LogPrintF();
    }
  }
  if (!*(unsigned char *)(a1 + 165))
  {
LABEL_39:
    if (*(unsigned char *)(a1 + 176))
    {
      int v17 = *(_DWORD *)(a1 + 228);
      int v18 = *(_DWORD *)(a1 + 236) + *(_DWORD *)(a1 + 244) - v17;
      if (v18 <= *(_DWORD *)(a1 + 184))
      {
        int v19 = 0;
      }
      else
      {
        int v19 = v5 - v17;
        if (gLogCategory_APSRTPJitterBufferSim <= 30
          && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
        {
          unsigned int v20 = *(NSObject **)(a1 + 24);
          v50[0] = MEMORY[0x1E4F143A8];
          v50[1] = 0x40000000;
          v50[2] = ___APSRTPJitterBufferSimLegacyDiscardExcess_block_invoke;
          v50[3] = &__block_descriptor_tmp_44_2154;
          v50[4] = a1;
          int v51 = v18;
          dispatch_async(v20, v50);
        }
        if (v18 - *(_DWORD *)(a1 + 184) < v19) {
          int v19 = v18 - *(_DWORD *)(a1 + 184);
        }
        *(_DWORD *)(a1 + 216) += v19 * *(_DWORD *)(a1 + 136);
        *(_DWORD *)(a1 + 228) += v19;
        if (gLogCategory_APSRTPJitterBufferSim <= 50
          && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
        {
          int v21 = *(NSObject **)(a1 + 24);
          v48[0] = MEMORY[0x1E4F143A8];
          v48[1] = 0x40000000;
          v48[2] = ___APSRTPJitterBufferSimLegacyDiscardExcess_block_invoke_2;
          v48[3] = &__block_descriptor_tmp_46_2155;
          v48[4] = a1;
          int v49 = v19;
          dispatch_async(v21, v48);
        }
      }
      if (v18 - v19 <= *(_DWORD *)(a1 + 184)) {
        *(unsigned char *)(a1 + 176) = 0;
      }
    }
  }
  unsigned int v13 = 0;
  unsigned int v14 = *(_DWORD *)(a1 + 228);
LABEL_57:
  unsigned int v22 = v7 - v13;
  if (v7 <= v13 || *(unsigned char *)(a1 + 165) != 0 || v5 < v14) {
    goto LABEL_74;
  }
  if (v5 - v14 < v22) {
    unsigned int v22 = v5 - v14;
  }
  unsigned int v25 = *(_DWORD *)(a1 + 136);
  unsigned int v26 = v22 >= (*(_DWORD *)(a1 + 220) - *(_DWORD *)(a1 + 216)) / v25
      ? (*(_DWORD *)(a1 + 220) - *(_DWORD *)(a1 + 216)) / v25
      : v22;
  v13 += v26;
  if (!v26)
  {
LABEL_74:
    a2 = v14;
    goto LABEL_78;
  }
  if (gLogCategory_APSRTPJitterBufferSim <= 10
    && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
  {
    unsigned int v27 = *(NSObject **)(a1 + 24);
    v40[0] = MEMORY[0x1E4F143A8];
    v40[1] = 0x40000000;
    uint8_t v40[2] = __APSRTPJitterBufferSimRead_block_invoke_3;
    v40[3] = &__block_descriptor_tmp_16;
    _OWORD v40[4] = a1;
    int v41 = v25 * v26;
    unsigned int v42 = v26;
    unsigned int v43 = v5;
    dispatch_async(v27, v40);
  }
  *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v26;
  a2 = *(_DWORD *)(a1 + 228) + v26;
LABEL_77:
  *(_DWORD *)(a1 + 228) = a2;
LABEL_78:
  int v28 = v7 - v13;
  if (v28)
  {
    if (*(unsigned char *)(a1 + 164))
    {
      if (!*(unsigned char *)(a1 + 165))
      {
        int v30 = *(_DWORD *)(a1 + 216);
        int v29 = *(_DWORD *)(a1 + 220);
        unsigned int v31 = *(_DWORD *)(a1 + 136);
        int32_t Count = CMSimpleQueueGetCount(*(CMSimpleQueueRef *)(a1 + 56));
        if (gLogCategory_APSRTPJitterBufferSim <= 50)
        {
          int32_t v33 = Count;
          if (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize())
          {
            unsigned int v34 = *(NSObject **)(a1 + 24);
            v36[0] = MEMORY[0x1E4F143A8];
            v36[1] = 0x40000000;
            v36[2] = __APSRTPJitterBufferSimRead_block_invoke_4;
            v36[3] = &__block_descriptor_tmp_18;
            v36[4] = a1;
            int v37 = v28;
            unsigned int v38 = (v29 - v30) / v31;
            int32_t v39 = v33;
            dispatch_async(v34, v36);
          }
        }
        *(unsigned char *)(a1 + 165) = 1;
        *(void *)(a1 + 168) = mach_absolute_time();
        ++*(_DWORD *)(a1 + 268);
      }
    }
    else
    {
      if (v6)
      {
        *(_DWORD *)(a1 + 216) += *(_DWORD *)(a1 + 136) * v28;
        if (!*(unsigned char *)(a1 + 266))
        {
          if (gLogCategory_APSRTPJitterBufferSim <= 50
            && (gLogCategory_APSRTPJitterBufferSim != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          ++*(_DWORD *)(a1 + 268);
          *(unsigned char *)(a1 + 266) = 1;
          a2 = *(_DWORD *)(a1 + 228);
        }
      }
      *(_DWORD *)(a1 + 228) = a2 + v28;
    }
  }
  return 0;
}

uint64_t __APSRTPJitterBufferSimRead_block_invoke()
{
  if (gLogCategory_APSRTPJitterBufferSim <= 10)
  {
    if (gLogCategory_APSRTPJitterBufferSim != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferSimRead_block_invoke_2()
{
  if (gLogCategory_APSRTPJitterBufferSim <= 30)
  {
    if (gLogCategory_APSRTPJitterBufferSim != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferSimRead_block_invoke_3()
{
  if (gLogCategory_APSRTPJitterBufferSim <= 10)
  {
    if (gLogCategory_APSRTPJitterBufferSim != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t __APSRTPJitterBufferSimRead_block_invoke_4()
{
  if (gLogCategory_APSRTPJitterBufferSimMaxFreq <= 50)
  {
    if (gLogCategory_APSRTPJitterBufferSimMaxFreq != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

uint64_t APSSimulatedReceiverCreate(uint64_t a1, long long *a2, uint64_t a3, unsigned int a4)
{
  unsigned int v20 = 0;
  if (APSSimulatedReceiverGetTypeID_once != -1) {
    dispatch_once(&APSSimulatedReceiverGetTypeID_once, &__block_literal_global_2166);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  uint64_t v8 = Instance;
  if (!Instance)
  {
    APSLogErrorAt(0);
    int v9 = 0;
LABEL_18:
    int v19 = -6728;
    goto LABEL_20;
  }
  *(void *)(Instance + 96) = 0;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  int v9 = (const void *)CFStringCreateF();
  uint64_t v10 = *(void *)(a3 + 32);
  long long v11 = *(_OWORD *)(a3 + 16);
  *(_OWORD *)(v8 + 24) = *(_OWORD *)a3;
  *(_OWORD *)(v8 + 40) = v11;
  *(void *)(v8 + 56) = v10;
  *(void *)(v8 + 88) = mach_absolute_time();
  *(_DWORD *)(v8 + 96) = 0;
  *(unsigned char *)(v8 + 100) = 1;
  double v12 = *(double *)a3;
  *(void *)(v8 + 80) = *(void *)a3;
  *(void *)(v8 + 16) = APSRTPJitterBufferSimCreate(*MEMORY[0x1E4F1CF80], a2, a3, ((double)a4 * 1000.0 / v12), 1, v9, &v20);
  if (v20)
  {
    APSLogErrorAt(v20);
LABEL_8:
    if (!v20) {
      goto LABEL_12;
    }
    goto LABEL_9;
  }
  unsigned int v13 = FigDispatchQueueCreateWithPriority();
  *(void *)(v8 + 72) = v13;
  if (!v13)
  {
    APSLogErrorAt(0);
    goto LABEL_18;
  }
  unsigned int v14 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v13);
  *(void *)(v8 + 64) = v14;
  if (v14)
  {
    dispatch_set_context(v14, (void *)v8);
    dispatch_source_set_event_handler_f(*(dispatch_source_t *)(v8 + 64), (dispatch_function_t)simulatedReceiverReadDataBlock);
    unsigned int v15 = *(NSObject **)(v8 + 64);
    dispatch_time_t v16 = dispatch_time(0, 10000000);
    dispatch_source_set_timer(v15, v16, 0x989680uLL, 0x1F4uLL);
    dispatch_resume(*(dispatch_object_t *)(v8 + 64));
    goto LABEL_8;
  }
  APSLogErrorAt(0);
  int v19 = -6718;
LABEL_20:
  unsigned int v20 = v19;
LABEL_9:
  int v17 = *(const void **)(v8 + 16);
  if (v17)
  {
    CFRelease(v17);
    *(void *)(v8 + 16) = 0;
  }
  CFRelease((CFTypeRef)v8);
  uint64_t v8 = 0;
LABEL_12:
  if (v9) {
    CFRelease(v9);
  }
  return v8;
}

uint64_t simulatedReceiverReadDataBlock(uint64_t result)
{
  if (*(unsigned char *)(result + 100))
  {
    uint64_t v1 = result;
    uint64_t v2 = mach_absolute_time();
    UpTicksToSecondsF();
    unsigned int v4 = (v3 * *(double *)(v1 + 80));
    uint64_t result = APSRTPJitterBufferSimRead(*(void *)(v1 + 16), *(_DWORD *)(v1 + 96), *(_DWORD *)(v1 + 48) * v4);
    *(void *)(v1 + 88) = v2;
    *(_DWORD *)(v1 + 96) += v4;
  }
  return result;
}

uint64_t __APSSimulatedReceiverGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSSimulatedReceiverGetTypeID_typeID = result;
  return result;
}

void _APSSimulatedReceiverFinalize(uint64_t a1)
{
  uint64_t v1 = *(NSObject **)(a1 + 72);
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 0x40000000;
  block[2] = ___APSSimulatedReceiverFinalize_block_invoke;
  block[3] = &__block_descriptor_tmp_6;
  block[4] = a1;
  dispatch_sync(v1, block);
}

uint64_t APSSimulatedReceiverWritePacket(uint64_t a1, uint64_t a2, uint64_t a3)
{
  unsigned int v9 = 0;
  EmptyPacket = APSRTPJitterBufferSimGetEmptyPacket(*(void *)(a1 + 16), (int *)&v9);
  uint64_t v7 = v9;
  if (v9) {
    goto LABEL_7;
  }
  if (!EmptyPacket)
  {
    uint64_t v7 = 0;
LABEL_7:
    APSLogErrorAt(v7);
    return v9;
  }
  EmptyPacket[1] = *(_WORD *)a2;
  *((_DWORD *)EmptyPacket + 1) = *(_DWORD *)(a2 + 2);
  *((void *)EmptyPacket + 2) = a3;
  APSRTPJitterBufferSimEnqueuePacket(*(void *)(a1 + 16), EmptyPacket);
  return v9;
}

void APSSimulatedReceiverUpdateReadSampleRate(uint64_t a1, double a2)
{
  uint64_t v2 = *(NSObject **)(a1 + 72);
  v3[0] = MEMORY[0x1E4F143A8];
  v3[1] = 0x40000000;
  void v3[2] = __APSSimulatedReceiverUpdateReadSampleRate_block_invoke;
  v3[3] = &__block_descriptor_tmp_2172;
  _OWORD v3[4] = a1;
  *(double *)&v3[5] = a2;
  dispatch_async(v2, v3);
}

double __APSSimulatedReceiverUpdateReadSampleRate_block_invoke(uint64_t a1)
{
  double result = *(double *)(a1 + 40);
  *(double *)(*(void *)(a1 + 32) + 80) = result;
  return result;
}

uint64_t APSPSGDataSourceCreate(uint64_t a1, void *a2)
{
  if (a2)
  {
    if (APSPSGDataSourceGetClassID_sRegisterOnce != -1) {
      dispatch_once_f(&APSPSGDataSourceGetClassID_sRegisterOnce, &APSPSGDataSourceGetClassID_sClassID, (dispatch_function_t)psgDataSource_registerBaseClass);
    }
    uint64_t v3 = CMDerivedObjectCreate();
    if (v3)
    {
      uint64_t v7 = v3;
      APSLogErrorAt(v3);
    }
    else
    {
      uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
      *(_DWORD *)uint64_t DerivedStorage = -1;
      dispatch_queue_t v5 = dispatch_queue_create("com.apple.airplay.APSPSGDataSource.queue", 0);
      *(void *)(DerivedStorage + 32) = v5;
      if (v5
        && (dispatch_queue_t v6 = dispatch_queue_create("com.apple.airplay.APSPSGDataSource.notificationQueue", 0),
            (*(void *)(DerivedStorage + 8) = v6) != 0))
      {
        if (gLogCategory_APSPSGDataSource <= 50
          && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v7 = 0;
        *a2 = 0;
      }
      else
      {
        APSLogErrorAt(0);
        return 4294960568;
      }
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

uint64_t dataSource_Stop()
{
  uint64_t DerivedStorage = (int *)CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage != -1)
  {
    notify_cancel(*DerivedStorage);
    *uint64_t DerivedStorage = -1;
  }
  return 0;
}

uint64_t dataSource_Start(uint64_t a1)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = *(NSObject **)(DerivedStorage + 32);
  handler[0] = MEMORY[0x1E4F143A8];
  handler[1] = 3221225472;
  handler[2] = __dataSource_Start_block_invoke;
  handler[3] = &__block_descriptor_40_e8_v12__0i8l;
  handler[4] = a1;
  notify_register_dispatch("com.apple.airplay.prefsChanged", (int *)DerivedStorage, v3, handler);
  unsigned int v4 = *(NSObject **)(DerivedStorage + 32);
  v6[0] = MEMORY[0x1E4F143A8];
  v6[1] = 3221225472;
  _OWORD v6[2] = __dataSource_Start_block_invoke_2;
  void v6[3] = &__block_descriptor_40_e5_v8__0l;
  _OWORD v6[4] = a1;
  dispatch_sync(v4, v6);
  return 0;
}

void dataSource_updateDevicePSGInfos(uint64_t a1, int a2)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  v22[0] = 0;
  v22[1] = v22;
  v22[2] = 0x2020000000;
  char v23 = 0;
  uint64_t v18 = 0;
  int v19 = &v18;
  uint64_t v20 = 0x2020000000;
  uint64_t v21 = 0;
  uint64_t v14 = 0;
  unsigned int v15 = &v14;
  uint64_t v16 = 0x2020000000;
  uint64_t v17 = 0;
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (Mutable)
  {
    dispatch_queue_t v6 = APSSettingsCopyKeys(0);
    if (v6)
    {
      CFArrayRef v7 = v6;
      CFMutableDictionaryRef v8 = CFDictionaryCreateMutable(v4, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (v8)
      {
        CFArrayGetCount(v7);
        CFArrayApplyBlock();
        CFDictionaryApplyBlock();
        if (!FigCFEqual())
        {
          if (gLogCategory_APSPSGDataSource <= 50
            && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          unsigned int v9 = *(const void **)(DerivedStorage + 24);
          uint64_t v10 = v19[3];
          if (v10) {
            CFRetain((CFTypeRef)v19[3]);
          }
          *(void *)(DerivedStorage + 24) = v10;
          if (v9) {
            CFRelease(v9);
          }
        }
        if (!FigCFEqual())
        {
          if (gLogCategory_APSPSGDataSource <= 50
            && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          long long v11 = *(const void **)(DerivedStorage + 16);
          CFRetain(Mutable);
          *(void *)(DerivedStorage + 16) = Mutable;
          if (v11) {
            CFRelease(v11);
          }
          if (a2)
          {
            CMNotificationCenterGetDefaultLocalCenter();
            FigDispatchAsyncPostNotification();
          }
        }
      }
      else
      {
        APSLogErrorAt(0);
      }
      CFRelease(v7);
    }
    else
    {
      CFMutableDictionaryRef v8 = 0;
    }
    CFRelease(Mutable);
  }
  else
  {
    APSLogErrorAt(0);
    CFMutableDictionaryRef v8 = 0;
  }
  double v12 = (const void *)v15[3];
  if (v12) {
    CFRelease(v12);
  }
  if (v8) {
    CFRelease(v8);
  }
  unsigned int v13 = (const void *)v19[3];
  if (v13) {
    CFRelease(v13);
  }
  _Block_object_dispose(&v14, 8);
  _Block_object_dispose(&v18, 8);
  _Block_object_dispose(v22, 8);
}

void sub_1D0C06A14(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20,uint64_t a21,uint64_t a22,uint64_t a23,uint64_t a24,uint64_t a25,uint64_t a26,char a27)
{
  _Block_object_dispose(&a27, 8);
  _Block_object_dispose((const void *)(v27 - 160), 8);
  _Block_object_dispose((const void *)(v27 - 128), 8);
  _Unwind_Resume(a1);
}

void __dataSource_updateDevicePSGInfos_block_invoke(uint64_t a1, CFStringRef theString)
{
  if (!CFStringHasPrefix(theString, @"PSGDataSource::PSGInfo::")) {
    return;
  }
  CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFIndex Length = CFStringGetLength(theString);
  CFMutableStringRef MutableCopy = CFStringCreateMutableCopy(v4, Length, theString);
  if (!MutableCopy)
  {
    APSLogErrorAt(0);
    return;
  }
  CFArrayRef v7 = MutableCopy;
  v22.unsigned int length = CFStringGetLength(@"PSGDataSource::PSGInfo::");
  v22.locatiouint64_t n = 0;
  CFStringReplace(v7, v22, &stru_1F26EE2F0);
  CFDictionaryRef v8 = (const __CFDictionary *)APSSettingsCopyValueEx(theString, 0, 0);
  if (!v8)
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSPSGDataSource <= 90
      && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v20 = v7;
    goto LABEL_36;
  }
  CFDictionaryRef v9 = v8;
  CFDictionaryRef v10 = CFDictionaryCreateMutableCopy(v4, 0, v8);
  long long v11 = v10;
  if (!v10) {
    goto LABEL_30;
  }
  if (!*(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24))
  {
    CFStringRef Value = (const __CFString *)CFDictionaryGetValue(v10, @"PGLeaderUUID");
    if (Value)
    {
      CFStringRef v13 = Value;
      CFIndex v14 = CFStringGetLength(Value);
      *(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = CFStringCreateMutableCopy(v4, v14, v13);
      if (!*(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24))
      {
LABEL_30:
        APSLogErrorAt(0);
        goto LABEL_31;
      }
    }
    else
    {
      if (CFDictionaryGetInt64())
      {
        CFIndex v15 = CFStringGetLength(v7);
        *(void *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = CFStringCreateMutableCopy(v4, v15, v7);
        uint64_t v16 = *(const void **)(*(void *)(*(void *)(a1 + 32) + 8) + 24);
        if (!v16) {
          goto LABEL_30;
        }
      }
      else
      {
        uint64_t v16 = *(const void **)(*(void *)(*(void *)(a1 + 32) + 8) + 24);
        if (!v16) {
          goto LABEL_14;
        }
      }
      CFDictionarySetValue(v11, @"PGLeaderUUID", v16);
      *(unsigned char *)(*(void *)(*(void *)(a1 + 40) + 8) + 24) = 1;
    }
  }
LABEL_14:
  if (!CFDictionaryContainsKey(v11, @"IsLocalDevice"))
  {
    CFDictionarySetValue(v11, @"IsLocalDevice", (const void *)*MEMORY[0x1E4F1CFC8]);
    *(unsigned char *)(*(void *)(*(void *)(a1 + 40) + 8) + 24) = 1;
  }
  CFDictionaryGetValue(v11, @"PGUUID");
  CFDictionaryGetInt64();
  CFDictionarySetInt64();
  CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 72), v7, v11);
  if (CFDictionaryGetInt64())
  {
    *(void *)(*(void *)(*(void *)(a1 + 48) + 8) + 24) = CFDictionaryCreateMutableCopy(v4, 0, v9);
    if (!*(void *)(*(void *)(*(void *)(a1 + 48) + 8) + 24)) {
      goto LABEL_30;
    }
  }
  if (!*(unsigned char *)(*(void *)(*(void *)(a1 + 40) + 8) + 24))
  {
LABEL_31:
    CFStringRef v18 = 0;
    goto LABEL_32;
  }
  CFStringRef v17 = (const __CFString *)CFStringCreateF();
  CFStringRef v18 = v17;
  if (v17)
  {
    if (CFEqual(v17, @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v19 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v19 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(v18, v11, v19);
  }
  else
  {
    APSLogErrorAt(0);
  }
LABEL_32:
  CFRelease(v7);
  CFRelease(v9);
  if (v11) {
    CFRelease(v11);
  }
  if (v18)
  {
    uint64_t v20 = (__CFString *)v18;
LABEL_36:
    CFRelease(v20);
  }
}

uint64_t __dataSource_updateDevicePSGInfos_block_invoke_2(int a1, int a2, CFDictionaryRef theDict)
{
  CFDictionaryGetValue(theDict, @"PGUUID");

  return FigCFDictionarySetValueFromKeyInDict();
}

uint64_t dataSource_SetProperty(uint64_t a1, uint64_t a2, uint64_t a3)
{
  uint64_t v11 = 0;
  double v12 = &v11;
  uint64_t v13 = 0x2020000000;
  int v14 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2 && a3)
  {
    CFArrayRef v7 = *(NSObject **)(DerivedStorage + 32);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 3221225472;
    block[2] = __dataSource_SetProperty_block_invoke;
    block[3] = &unk_1E6898F50;
    block[4] = &v11;
    void block[5] = a2;
    void block[6] = a1;
    block[7] = a3;
    void block[8] = DerivedStorage;
    dispatch_sync(v7, block);
    uint64_t v8 = *((unsigned int *)v12 + 6);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294960591;
    *((_DWORD *)v12 + 6) = -6705;
  }
  _Block_object_dispose(&v11, 8);
  return v8;
}

void sub_1D0C07008(_Unwind_Exception *a1)
{
  _Block_object_dispose((const void *)(v1 - 64), 8);
  _Unwind_Resume(a1);
}

uint64_t dataSource_SetDevicePSGInfoInternal(uint64_t a1, const void *a2)
{
  unsigned int v22 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v3 = FigCFDictionaryCopyArrayOfKeys();
  if (!v3)
  {
    APSLogErrorAt(0);
    return 0;
  }
  CFArrayRef v4 = (const __CFArray *)v3;
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  dispatch_queue_t v5 = APSSettingsCopyKeys(0);
  if (!v5)
  {
LABEL_47:
    CFStringRef v13 = 0;
LABEL_51:
    if (gLogCategory_APSPSGDataSource <= 50
      && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
    {
      goto LABEL_53;
    }
    goto LABEL_57;
  }
  for (CFIndex i = 0; i < CFArrayGetCount(v5); ++i)
  {
    CFStringGetTypeID();
    TypedCFDictionaryRef ValueAtIndex = (const __CFString *)CFArrayGetTypedValueAtIndex();
    if (CFStringHasPrefix(TypedValueAtIndex, @"PSGDataSource::PSGInfo::"))
    {
      if (CFEqual(TypedValueAtIndex, @"wirelessdisplay_enable_timestamps_diagnostic")) {
        CFStringRef v8 = @"com.apple.coremedia";
      }
      else {
        CFStringRef v8 = @"com.apple.airplay";
      }
      CFPreferencesSetAppValue(TypedValueAtIndex, 0, v8);
      unsigned int v22 = 0;
    }
  }
  CFIndex v9 = 0;
  CFAllocatorRef v10 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  while (1)
  {
    if (v9 >= CFArrayGetCount(v4))
    {
      CFStringRef v19 = *(const void **)(DerivedStorage + 16);
      if (a2) {
        CFRetain(a2);
      }
      *(void *)(DerivedStorage + 16) = a2;
      if (v19) {
        CFRelease(v19);
      }
      goto LABEL_47;
    }
    CFStringGetTypeID();
    uint64_t v11 = (const void *)CFArrayGetTypedValueAtIndex();
    CFDictionaryRef Value = (const __CFDictionary *)CFDictionaryGetValue((CFDictionaryRef)a2, v11);
    CFStringRef v13 = (const __CFString *)CFStringCreateF();
    if (v11) {
      break;
    }
    CFDictionaryRef v14 = *(const __CFDictionary **)(DerivedStorage + 16);
    if (v14 && CFDictionaryContainsKey(v14, v13))
    {
      if (CFEqual(v13, @"wirelessdisplay_enable_timestamps_diagnostic")) {
        CFStringRef v15 = @"com.apple.coremedia";
      }
      else {
        CFStringRef v15 = @"com.apple.airplay";
      }
      CFPreferencesSetAppValue(v13, 0, v15);
      CFMutableDictionaryRef v16 = 0;
      unsigned int v22 = 0;
      if (gLogCategory_APSPSGDataSource > 50) {
        goto LABEL_35;
      }
      if (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()) {
        LogPrintF();
      }
    }
    CFMutableDictionaryRef v16 = 0;
    if (v13) {
      goto LABEL_36;
    }
LABEL_37:
    if (v16) {
      CFRelease(v16);
    }
    ++v9;
  }
  if (!CFDictionaryGetValue(Value, @"PGUUID")
    || !CFDictionaryGetValue(Value, @"PGName")
    || !CFDictionaryGetValue(Value, @"PGType")
    || !CFDictionaryGetValue(Value, @"PGMemberID"))
  {
    APSLogErrorAt(0);
    goto LABEL_51;
  }
  if (gLogCategory_APSPSGDataSource <= 50
    && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFMutableDictionaryRef MutableCopy = CFDictionaryCreateMutableCopy(v10, 0, Value);
  if (MutableCopy)
  {
    CFMutableDictionaryRef v16 = MutableCopy;
    if (CFEqual(v13, @"wirelessdisplay_enable_timestamps_diagnostic")) {
      CFStringRef v18 = @"com.apple.coremedia";
    }
    else {
      CFStringRef v18 = @"com.apple.airplay";
    }
    CFPreferencesSetAppValue(v13, v16, v18);
    unsigned int v22 = 0;
LABEL_35:
    if (!v13) {
      goto LABEL_37;
    }
LABEL_36:
    CFRelease(v13);
    goto LABEL_37;
  }
  APSLogErrorAt(0);
  unsigned int v22 = -6728;
  if (gLogCategory_APSPSGDataSource > 90
    || gLogCategory_APSPSGDataSource == -1 && !_LogCategory_Initialize())
  {
    goto LABEL_57;
  }
LABEL_53:
  LogPrintF();
LABEL_57:
  CFPreferencesAppSynchronize(@"com.apple.airplay");
  CFPreferencesAppSynchronize(@"com.apple.coremedia");
  notify_post("com.apple.airplay.prefsChanged");
  if (v13) {
    CFRelease(v13);
  }
  if (v5) {
    CFRelease(v5);
  }
  CFRelease(v4);
  return v22;
}

uint64_t dataSource_CopyProperty(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  uint64_t v11 = 0;
  double v12 = &v11;
  uint64_t v13 = 0x2020000000;
  int v14 = 0;
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2 && a4)
  {
    CFArrayRef v7 = *(NSObject **)(DerivedStorage + 32);
    v10[0] = MEMORY[0x1E4F143A8];
    v10[1] = 3221225472;
    _OWORD v10[2] = __dataSource_CopyProperty_block_invoke;
    v10[3] = &unk_1E6898F28;
    v10[6] = a4;
    v10[7] = DerivedStorage;
    v10[4] = &v11;
    v10[5] = a2;
    dispatch_sync(v7, v10);
    uint64_t v8 = *((unsigned int *)v12 + 6);
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v8 = 4294960591;
    *((_DWORD *)v12 + 6) = -6705;
  }
  _Block_object_dispose(&v11, 8);
  return v8;
}

void sub_1D0C07730(_Unwind_Exception *a1)
{
  _Block_object_dispose((const void *)(v1 - 48), 8);
  _Unwind_Resume(a1);
}

uint64_t dataSource_CopyDebugDescription()
{
  return CFStringCreateF();
}

void dataSource_Finalize()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  dataSource_Stop();
  uint64_t v1 = *(NSObject **)(DerivedStorage + 32);
  if (v1)
  {
    dispatch_release(v1);
    *(void *)(DerivedStorage + 32) = 0;
  }
  uint64_t v2 = *(NSObject **)(DerivedStorage + 8);
  if (v2)
  {
    dispatch_release(v2);
    *(void *)(DerivedStorage + 8) = 0;
  }
}

uint64_t APSPSGDataSourceSetDevicePSGInfo(uint64_t a1, uint64_t a2)
{
  uint64_t v8 = 0;
  CFIndex v9 = &v8;
  uint64_t v10 = 0x2020000000;
  int v11 = 0;
  CFArrayRef v4 = *(NSObject **)(CMBaseObjectGetDerivedStorage() + 32);
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 3221225472;
  block[2] = __APSPSGDataSourceSetDevicePSGInfo_block_invoke;
  block[3] = &unk_1E6898EF0;
  block[4] = &v8;
  void block[5] = a1;
  void block[6] = a2;
  dispatch_sync(v4, block);
  uint64_t v5 = *((unsigned int *)v9 + 6);
  _Block_object_dispose(&v8, 8);
  return v5;
}

void sub_1D0C0790C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, ...)
{
  va_start(va, a9);
  _Block_object_dispose(va, 8);
  _Unwind_Resume(a1);
}

uint64_t __APSPSGDataSourceSetDevicePSGInfo_block_invoke(uint64_t a1)
{
  uint64_t result = dataSource_SetDevicePSGInfoInternal(*(void *)(a1 + 40), *(const void **)(a1 + 48));
  *(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24) = result;
  return result;
}

const void *APSPSGDataSourceCopyDevicePSGInfo(uint64_t a1, uint64_t a2)
{
  int v8 = 0;
  if (a2 && (uint64_t v2 = CFStringCreateF()) != 0)
  {
    CFStringRef v3 = (const __CFString *)v2;
    CFPreferencesAppSynchronize(@"com.apple.airplay");
    CFPreferencesAppSynchronize(@"com.apple.coremedia");
    CFTypeID TypeID = CFDictionaryGetTypeID();
    uint64_t v5 = APSSettingsCopyValueEx(v3, TypeID, &v8);
    dispatch_queue_t v6 = v5;
    if (v8)
    {
      if (!v5)
      {
        APSLogErrorAt(0);
        int v8 = -6727;
      }
    }
    else if (gLogCategory_APSPSGDataSource <= 90 {
           && (gLogCategory_APSPSGDataSource != -1 || _LogCategory_Initialize()))
    }
    {
      LogPrintF();
    }
    CFRelease(v3);
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return v6;
}

uint64_t APSPSGDataSourceGetShared(void *a1)
{
  if (APSPSGDataSourceGetShared_once != -1) {
    dispatch_once(&APSPSGDataSourceGetShared_once, &__block_literal_global_2203);
  }
  *a1 = APSPSGDataSourceGetShared_psgDataSource;
  return APSPSGDataSourceGetShared_err;
}

uint64_t __APSPSGDataSourceGetShared_block_invoke()
{
  uint64_t result = APSPSGDataSourceCreate(*MEMORY[0x1E4F1CF80], &APSPSGDataSourceGetShared_psgDataSource);
  APSPSGDataSourceGetShared_err = result;
  if (!result)
  {
    uint64_t v1 = APSPSGDataSourceGetShared_psgDataSource;
    uint64_t v2 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v2) {
      uint64_t v3 = v2;
    }
    else {
      uint64_t v3 = 0;
    }
    CFArrayRef v4 = *(uint64_t (**)(uint64_t))(v3 + 8);
    if (v4)
    {
      uint64_t result = v4(v1);
      APSPSGDataSourceGetShared_err = result;
      if (!result) {
        return result;
      }
    }
    else
    {
      uint64_t result = 4294954514;
      APSPSGDataSourceGetShared_err = -12782;
    }
  }

  return APSLogErrorAt(result);
}

uint64_t APSCFArrayGetEmpty()
{
  if (APSCFArrayGetEmpty_sAPSCFArrayEmptyOnce != -1) {
    dispatch_once(&APSCFArrayGetEmpty_sAPSCFArrayEmptyOnce, &__block_literal_global_2207);
  }
  return APSCFArrayGetEmpty_sAPSCFArrayEmpty;
}

CFArrayRef __APSCFArrayGetEmpty_block_invoke()
{
  CFArrayRef result = CFArrayCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, 0, MEMORY[0x1E4F1D510]);
  APSCFArrayGetEmpty_sAPSCFArrayEmpty = (uint64_t)result;
  return result;
}

uint64_t APSCFArraySetUInt64AtIndex(__CFArray *a1, CFIndex a2)
{
  if (a1)
  {
    uint64_t Int64 = (const void *)CFNumberCreateInt64();
    if (Int64)
    {
      uint64_t v5 = Int64;
      CFArraySetValueAtIndex(a1, a2, Int64);
      CFRelease(v5);
      return 0;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSCFArrayGetUInt64AtIndex(const __CFArray *a1, CFIndex a2, uint64_t *a3)
{
  if (a1)
  {
    CFArrayGetValueAtIndex(a1, a2);
    uint64_t v4 = CFGetInt64();
    uint64_t result = 0;
    *a3 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return result;
}

void APSCFArrayReverse(const __CFArray *a1)
{
  CFIndex Count = CFArrayGetCount(a1);
  CFIndex v3 = CFArrayGetCount(a1);
  if (v3 >= 0) {
    uint64_t v4 = v3;
  }
  else {
    uint64_t v4 = v3 + 1;
  }
  if (v3 >= 2)
  {
    CFIndex v5 = 0;
    uint64_t v6 = v4 >> 1;
    CFIndex v7 = Count - 1;
    do
      CFArrayExchangeValuesAtIndices(a1, v5++, v7--);
    while (v6 != v5);
  }
}

CFStringRef APSCreateNewUUIDString()
{
  CFAllocatorRef v0 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFUUIDRef v1 = CFUUIDCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80]);
  CFStringRef v2 = CFUUIDCreateString(v0, v1);
  if (v1) {
    CFRelease(v1);
  }
  return v2;
}

uint64_t APSCFStringParseUInt32s(const __CFString *a1, uint64_t (*a2)(uint64_t, uint64_t), uint64_t a3)
{
  CFCharacterSetRef Predefined = CFCharacterSetGetPredefined(kCFCharacterSetDecimalDigit);
  CFCharacterSetRef theSet = CFCharacterSetGetPredefined(kCFCharacterSetWhitespace);
  long long v38 = 0u;
  long long v39 = 0u;
  long long v36 = 0u;
  long long v37 = 0u;
  long long v34 = 0u;
  long long v35 = 0u;
  *(_OWORD *)UInt8 buffer = 0u;
  long long v33 = 0u;
  if (!a1) {
    return 0;
  }
  CFIndex Length = CFStringGetLength(a1);
  if (Length < 1) {
    return 0;
  }
  CFIndex v6 = Length;
  CFStringRef theString = a1;
  uint64_t v43 = 0;
  CFIndex v44 = Length;
  CharactersPtr = CFStringGetCharactersPtr(a1);
  CStringPtr = 0;
  int v41 = CharactersPtr;
  if (!CharactersPtr) {
    CStringPtr = CFStringGetCStringPtr(a1, 0x600u);
  }
  uint64_t v9 = 0;
  int v10 = 0;
  uint64_t v11 = 0;
  int64_t v12 = 0;
  int64_t v45 = 0;
  int64_t v46 = 0;
  uint64_t v13 = 64;
  unsigned int v42 = CStringPtr;
  do
  {
    if ((unint64_t)v12 >= 4) {
      uint64_t v14 = 4;
    }
    else {
      uint64_t v14 = v12;
    }
    CFIndex v15 = v44;
    if (v44 <= v12)
    {
      UniChar v16 = 0;
    }
    else if (v41)
    {
      UniChar v16 = v41[v12 + v43];
    }
    else if (v42)
    {
      UniChar v16 = v42[v43 + v12];
    }
    else
    {
      int64_t v21 = v45;
      if (v46 <= v12 || v45 > v12)
      {
        uint64_t v23 = v14 + v9;
        uint64_t v24 = v13 - v14;
        int64_t v25 = v12 - v14;
        CFIndex v26 = v25 + 64;
        if (v25 + 64 >= v44) {
          CFIndex v26 = v44;
        }
        int64_t v45 = v25;
        int64_t v46 = v26;
        if (v44 >= v24) {
          CFIndex v15 = v24;
        }
        v47.unsigned int length = v15 + v23;
        v47.locatiouint64_t n = v25 + v43;
        CFStringGetCharacters(theString, v47, buffer);
        int64_t v21 = v45;
      }
      UniChar v16 = buffer[v12 - v21];
    }
    int IsCharacterMember = CFCharacterSetIsCharacterMember(Predefined, v16);
    if (IsCharacterMember)
    {
      if (10 * v11 + v16 - 48 < v11)
      {
        APSLogErrorAt(0);
        return 4294960553;
      }
      int v10 = 1;
      uint64_t v11 = 10 * v11 + v16 - 48;
    }
    else
    {
      if (v10) {
        uint64_t v18 = 0;
      }
      else {
        uint64_t v18 = v11;
      }
      if (v10 && a2)
      {
        uint64_t v19 = a2(v11, a3);
        if (v19)
        {
          uint64_t v27 = v19;
LABEL_46:
          APSLogErrorAt(v19);
          return v27;
        }
        uint64_t v18 = 0;
      }
      uint64_t v20 = CFCharacterSetIsCharacterMember(theSet, v16);
      if (!v20)
      {
        APSLogErrorAt(v20);
        return 4294960579;
      }
      int v10 = 0;
      uint64_t v11 = v18;
    }
    ++v12;
    --v9;
    ++v13;
  }
  while (v6 != v12);
  uint64_t v27 = 0;
  if (a2)
  {
    if (IsCharacterMember)
    {
      uint64_t v19 = a2(v11, a3);
      uint64_t v27 = v19;
      if (v19) {
        goto LABEL_46;
      }
    }
  }
  return v27;
}

uint64_t APSCFStringCountUInt32s(const __CFString *a1, void *a2)
{
  uint64_t v6 = 0;
  uint64_t v3 = APSCFStringParseUInt32s(a1, (uint64_t (*)(uint64_t, uint64_t))apsCFUtils_stringCountUInt32sCallback, (uint64_t)&v6);
  uint64_t v4 = v3;
  if (v3)
  {
    APSLogErrorAt(v3);
  }
  else if (a2)
  {
    *a2 = v6;
  }
  return v4;
}

uint64_t apsCFUtils_stringCountUInt32sCallback(uint64_t a1, void *a2)
{
  return 0;
}

BOOL APSCFDictionaryPairIsKeyPresentAndEqual()
{
  CFDictionaryRef Value = (const void *)FigCFDictionaryGetValue();
  CFUUIDRef v1 = (const void *)FigCFDictionaryGetValue();
  BOOL result = 0;
  if (Value)
  {
    if (v1) {
      return CFEqual(Value, v1) != 0;
    }
  }
  return result;
}

uint64_t APSCFDataCreateWithBase64String(uint64_t a1)
{
  if (a1)
  {
    id v2 = objc_alloc(MEMORY[0x1E4F1C9B8]);
    return [v2 initWithBase64EncodedString:a1 options:0];
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSCFDictionaryGetBooleanIfPresent(uint64_t a1, uint64_t a2, BOOL *a3)
{
  uint64_t Int64 = CFDictionaryGetInt64();
  if (a3) {
    *a3 = Int64 != 0;
  }
  return 1;
}

uint64_t APSIntrospectorAddCommand(const void *a1, pthread_mutex_t *a2, pthread_mutex_t *a3, const void *a4)
{
  if (APSIntrospectorInit_once != -1) {
    dispatch_once_f(&APSIntrospectorInit_once, 0, (dispatch_function_t)introsp_init);
  }
  uint64_t result = gIntrospector;
  if (gIntrospector)
  {
    if (a1 && a3 && a4)
    {
      return introsp_addCommand(result, a1, a2, a3, a4, 0);
    }
    else
    {
      return APSLogErrorAt(0);
    }
  }
  return result;
}

uint64_t introsp_addCommand(uint64_t a1, const void *a2, pthread_mutex_t *a3, pthread_mutex_t *a4, const void *a5, char a6)
{
  if (a2 && a4)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
    CFDictionaryRef Value = (pthread_mutex_t **)CFDictionaryGetValue(*(CFDictionaryRef *)a1, a2);
    if (Value)
    {
      uint64_t v13 = Value;
      uint64_t result = pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
      if (*v13 != a4)
      {
        if (gLogCategory_APSIntrospector <= 90)
        {
          if (gLogCategory_APSIntrospector != -1) {
            return LogPrintF();
          }
          uint64_t result = _LogCategory_Initialize();
          if (result) {
            return LogPrintF();
          }
        }
        return result;
      }
      pthread_mutex_lock(v13[3]);
      v13[1] = a3;
      CFStringRef v17 = v13[3];
    }
    else
    {
      CFIndex v15 = malloc_type_calloc(1uLL, 0x28uLL, 0x10E0040A81CF768uLL);
      void *v15 = a4;
      v15[1] = a3;
      if (a5) {
        CFTypeRef v16 = CFRetain(a5);
      }
      else {
        CFTypeRef v16 = 0;
      }
      v15[2] = v16;
      void v15[3] = FigReentrantMutexCreate();
      *((unsigned char *)v15 + 32) = a6;
      CFDictionaryAddValue(*(CFMutableDictionaryRef *)a1, a2, v15);
      CFStringRef v17 = *(pthread_mutex_t **)(a1 + 8);
    }
    return pthread_mutex_unlock(v17);
  }

  return APSLogErrorAt(0);
}

void introsp_init()
{
  if (!IsAppleInternalBuild()) {
    return;
  }
  gIntrospector = (uint64_t)malloc_type_calloc(1uLL, 0x30uLL, 0x1030040FB85C623uLL);
  *(void *)gIntrospector = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], 0);
  uint64_t v0 = FigSimpleMutexCreate();
  uint64_t v1 = gIntrospector;
  *(void *)(gIntrospector + 8) = v0;
  *(_DWORD *)(v1 + 40) = -1;
  *(_WORD *)(v1 + 44) = 0;
  *(void *)&v18.sa_leuint64_t n = 0;
  *(void *)&v18.sa_data[6] = 0;
  int v20 = 0;
  uint64_t v19 = 0;
  int v17 = 1;
  int v2 = socket(2, 1, 6);
  if (v2 < 0)
  {
    if (*__error())
    {
      uint64_t v3 = *__error();
      if (!v3) {
        goto LABEL_5;
      }
    }
    else
    {
      uint64_t v3 = 4294960596;
    }
    uint64_t v7 = v3;
    goto LABEL_28;
  }
LABEL_5:
  setsockopt(v2, 0xFFFF, 4130, &v17, 4u);
  int v17 = 1;
  if (!setsockopt(v2, 0xFFFF, 4, &v17, 4u)) {
    goto LABEL_8;
  }
  if (!*__error())
  {
    uint64_t v4 = 4294960596;
    goto LABEL_23;
  }
  uint64_t v4 = *__error();
  if (v4)
  {
LABEL_23:
    uint64_t v7 = v4;
    goto LABEL_28;
  }
LABEL_8:
  int v5 = 0;
  *(void *)&v18.sa_data[6] = 0;
  *(_WORD *)&v18.sa_leuint64_t n = 528;
  *(_DWORD *)&v18.sa_data[2] = 16777343;
  while (1)
  {
    *(_WORD *)v18.sa_data = bswap32(v5 + 6060) >> 16;
    if (!bind(v2, &v18, 0x10u)) {
      break;
    }
    if (*__error())
    {
      uint64_t v6 = *__error();
      if (!v6) {
        break;
      }
    }
    else
    {
      uint64_t v6 = 4294960596;
    }
    if (++v5 == 10)
    {
      uint64_t v7 = v6;
      goto LABEL_28;
    }
  }
  if (!listen(v2, 5)) {
    goto LABEL_19;
  }
  if (*__error())
  {
    uint64_t v8 = *__error();
    if (!v8)
    {
LABEL_19:
      *(_DWORD *)(v1 + 40) = v2;
      global_queue = dispatch_get_global_queue(0, 0);
      block[0] = MEMORY[0x1E4F143A8];
      block[1] = 0x40000000;
      block[2] = __introsp_savePort_block_invoke;
      block[3] = &__block_descriptor_tmp_18_2214;
      int v22 = v5 + 6060;
      dispatch_async(global_queue, block);
      introsp_addCommand(v1, @"echo", 0, (pthread_mutex_t *)introsp_cmdEcho, @"output arguments in single quotes", 0);
      introsp_addCommand(v1, @"exit", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, @"quit (same as 'quit')", 1);
      introsp_addCommand(v1, @"fignote", 0, (pthread_mutex_t *)introsp_cmdFigNote, @"change or show fignote log variables", 0);
      introsp_addCommand(v1, @"help", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdHelp, @"list available commands and their brief descriptions", 0);
      introsp_addCommand(v1, @"logging", 0, (pthread_mutex_t *)introsp_cmdLogging, @"modify or show current log settings", 0);
      introsp_addCommand(v1, @"progname", 0, (pthread_mutex_t *)introsp_cmdProgName, @"show the program name", 0);
      introsp_addCommand(v1, @"prompt", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdPrompt, @"turn the prompt on/off", 0);
      introsp_addCommand(v1, @"quit", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, @"quit (same as 'exit')", 1);
      introsp_addCommand(v1, @"GET", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"HEAD", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"POST", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"PUT", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"DELETE", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"CONNECT", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"OPTIONS", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"TRACE", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      introsp_addCommand(v1, @"PATCH", (pthread_mutex_t *)v1, (pthread_mutex_t *)introsp_cmdQuit, 0, 1);
      int v10 = dispatch_queue_create("com.apple.airplay.introspector", 0);
      *(void *)(v1 + 24) = v10;
      uint64_t v11 = dispatch_source_create(MEMORY[0x1E4F14478], *(int *)(v1 + 40), 0, v10);
      *(void *)(v1 + 32) = v11;
      dispatch_set_context(v11, (void *)v1);
      dispatch_source_set_event_handler_f(*(dispatch_source_t *)(v1 + 32), (dispatch_function_t)introsp_serverHandleConnection);
      dispatch_resume(*(dispatch_object_t *)(v1 + 32));
      if (gLogCategory_APSIntrospector <= 50
        && (gLogCategory_APSIntrospector != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      return;
    }
  }
  else
  {
    uint64_t v8 = 4294960596;
  }
  uint64_t v7 = v8;
LABEL_28:
  APSLogErrorAt(v7);
  if (gLogCategory_APSIntrospector <= 90
    && (gLogCategory_APSIntrospector != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v12 = gIntrospector;
  if (gIntrospector)
  {
    uint64_t v13 = *(NSObject **)(gIntrospector + 32);
    if (v13)
    {
      dispatch_source_cancel(*(dispatch_source_t *)(gIntrospector + 32));
      dispatch_release(v13);
      uint64_t v12 = gIntrospector;
      *(void *)(gIntrospector + 32) = 0;
    }
    uint64_t v14 = *(NSObject **)(v12 + 24);
    if (v14)
    {
      dispatch_release(v14);
      uint64_t v12 = gIntrospector;
      *(void *)(gIntrospector + 24) = 0;
    }
    if (*(void *)v12)
    {
      CFRelease(*(CFTypeRef *)v12);
      uint64_t v12 = gIntrospector;
    }
    if (*(void *)(v12 + 8))
    {
      FigSimpleMutexDestroy();
      uint64_t v12 = gIntrospector;
    }
    free(*(void **)(v12 + 16));
    int v15 = *(_DWORD *)(v12 + 40);
    if (v15 < 0)
    {
      CFTypeRef v16 = (void *)gIntrospector;
    }
    else
    {
      if (close(v15) && *__error()) {
        __error();
      }
      CFTypeRef v16 = (void *)gIntrospector;
      *(_DWORD *)(gIntrospector + 40) = -1;
    }
    free(v16);
    gIntrospector = 0;
  }
  if ((v2 & 0x80000000) == 0 && close(v2) && *__error()) {
    __error();
  }
}

void __introsp_savePort_block_invoke(uint64_t a1)
{
  name = 0;
  out_tokeuint64_t n = 0;
  getprogname();
  ASPrintF();
  uint64_t v2 = notify_register_check(0, &out_token);
  if (v2)
  {
    APSLogErrorAt(v2);
  }
  else
  {
    notify_set_state(out_token, *(int *)(a1 + 32));
    notify_post(name);
  }
  free(name);
}

uint64_t introsp_serverHandleConnection(uint64_t a1)
{
  uint64_t v1 = a1;
  uint64_t v54 = *MEMORY[0x1E4F143B8];
  int v2 = accept(*(_DWORD *)(a1 + 40), 0, 0);
  if (v2 < 0)
  {
    uint64_t result = (uint64_t)__error();
    if (!*(_DWORD *)result || (uint64_t result = (uint64_t)__error(), *(_DWORD *)result))
    {
      if (gLogCategory_APSIntrospector <= 90)
      {
        if (gLogCategory_APSIntrospector != -1) {
          return LogPrintF();
        }
        uint64_t result = _LogCategory_Initialize();
        if (result) {
          return LogPrintF();
        }
      }
      return result;
    }
  }
  int v52 = 1;
  setsockopt(v2, 0xFFFF, 4130, &v52, 4u);
  uint64_t v3 = malloc_type_malloc(0x800uLL, 0xFF5FC5D5uLL);
  int v49 = malloc_type_malloc(0x800uLL, 0xB9486711uLL);
  int v51 = (const char **)malloc_type_malloc(0x208uLL, 0x10040436913F5uLL);
  uint64_t v4 = (char *)malloc_type_calloc(1uLL, 0x28uLL, 0x1010040787528ABuLL);
  int v5 = malloc_type_malloc(0x1000uLL, 0xB94E825EuLL);
  *((void *)v4 + 1) = v5;
  *(void *)uint64_t v4 = v5;
  *((_OWORD *)v4 + 1) = xmmword_1D0C1F0E0;
  *((_DWORD *)v4 + 8) = v2;
  v4[36] = 0;
  uint64_t v6 = fdopen(v2, "w");
  unsigned int v50 = v6;
  if (!v6)
  {
    APSLogErrorAt(0);
    goto LABEL_101;
  }
  setlinebuf(v6);
  if (!*(void *)(v1 + 16))
  {
    APSGetDeviceNameCString(v53, 64);
    getprogname();
    ASPrintF();
  }
  uint64_t v7 = (const __CFAllocator **)MEMORY[0x1E4F1CF80];
  *(_WORD *)(v1 + 44) = 0;
  alloCC_SHA512_CTX c = *v7;
  uint64_t v8 = MEMORY[0x1E4F14390];
  int64_t v46 = v3;
  uint64_t v47 = v1;
  while (1)
  {
    uint64_t v10 = 0;
    uint64_t v11 = v3;
    while (1)
    {
      ssize_t v12 = *((void *)v4 + 3);
      uint64_t v13 = (unsigned char **)(v4 + 8);
      if (v12 <= 0) {
        break;
      }
LABEL_15:
      uint64_t v14 = *v13;
      *((void *)v4 + 3) = v12 - 1;
      *((void *)v4 + 1) = v14 + 1;
      LOBYTE(v14) = *v14;
      *v11++ = (_BYTE)v14;
      if (v14 == 10) {
        goto LABEL_20;
      }
LABEL_16:
      if (++v10 == 2047)
      {
LABEL_20:
        unsigned char *v11 = 0;
        goto LABEL_21;
      }
    }
    do
    {
      ssize_t v12 = read(*((_DWORD *)v4 + 8), *(void **)v4, *((void *)v4 + 2));
      *((void *)v4 + 3) = v12;
      if ((v12 & 0x8000000000000000) == 0) {
        goto LABEL_14;
      }
    }
    while (*__error() == 4);
    ssize_t v12 = *((void *)v4 + 3);
    if ((v12 & 0x8000000000000000) == 0)
    {
LABEL_14:
      uint64_t v13 = (unsigned char **)v4;
      if (v12) {
        goto LABEL_15;
      }
      int v15 = -1;
      goto LABEL_97;
    }
    APSLogErrorAt(0);
    int v15 = *__error();
    if (!v15)
    {
      *v11++ = 0;
      goto LABEL_16;
    }
LABEL_97:
    unsigned char *v11 = 0;
    int v2 = -1;
    if (!v10 || v15 != -1) {
      goto LABEL_101;
    }
LABEL_21:
    uint64_t v16 = 0;
    int v17 = 0;
    sockaddr v18 = v3;
LABEL_22:
    if (v16 == 64) {
      goto LABEL_72;
    }
    unsigned __int8 v19 = *v18;
    if (*v18) {
      break;
    }
LABEL_67:
    long long v36 = v50;
    long long v35 = v51;
    if (v16) {
      goto LABEL_73;
    }
LABEL_94:
    if (*(unsigned char *)(v1 + 44))
    {
      uint64_t v9 = "\n";
      if (!*(unsigned char *)(v1 + 45)) {
        uint64_t v9 = "";
      }
      fprintf(v36, "%s%s", *(const char **)(v1 + 16), v9);
      fflush(v36);
    }
  }
  while (1)
  {
    if ((v19 & 0x80) == 0)
    {
      if ((*(_DWORD *)(v8 + 4 * (char)v19 + 60) & 0x4000) == 0) {
        break;
      }
      goto LABEL_28;
    }
    if (!__maskrune((char)v19, 0x4000uLL)) {
      break;
    }
LABEL_28:
    int v20 = *++v18;
    unsigned __int8 v19 = v20;
    if (!v20) {
      goto LABEL_67;
    }
  }
  if (!*v18 || *v18 == 35) {
    goto LABEL_67;
  }
  int64_t v21 = v3;
  unsigned __int8 v22 = 0;
  uint64_t v23 = v17;
  uint64_t v24 = v49;
  v51[v16] = &v49[v17];
  if (v17 <= 2046) {
    int v25 = 2046;
  }
  else {
    int v25 = v17;
  }
  int v26 = v25 + 1;
  while (2)
  {
    while (2)
    {
      uint64_t v27 = v18;
      int v29 = *v18++;
      int v28 = v29;
      unsigned int v30 = (char)v29;
      if (v29 > 38)
      {
        if (v28 != 39)
        {
          if (v28 != 92) {
            goto LABEL_57;
          }
          int v31 = *v18;
          if (*v18)
          {
            BOOL v32 = v22 == 0;
            if (v31 == 92) {
              BOOL v32 = 1;
            }
            int v33 = v31 == v22 || v32;
            long long v34 = v27 + 2;
            if (v33)
            {
              sockaddr v18 = v34;
              LOBYTE(v30) = v31;
            }
            else
            {
              LOBYTE(v30) = 92;
            }
          }
          else
          {
            LOBYTE(v30) = 92;
          }
          goto LABEL_64;
        }
LABEL_41:
        if (!v22 || v30 == v22)
        {
          if (v22) {
            unsigned __int8 v22 = 0;
          }
          else {
            unsigned __int8 v22 = v30;
          }
          continue;
        }
        sockaddr v18 = v27 + 1;
        goto LABEL_64;
      }
      break;
    }
    if (v28 == 34) {
      goto LABEL_41;
    }
    if (v28)
    {
LABEL_57:
      if ((v30 & 0x80000000) != 0)
      {
        if (!__maskrune(v30, 0x4000uLL)) {
          goto LABEL_62;
        }
      }
      else if ((*(_DWORD *)(v8 + 4 * v30 + 60) & 0x4000) == 0)
      {
        goto LABEL_62;
      }
      if (!v22)
      {
        int v17 = v23 + 1;
        v49[(int)v23] = 0;
        ++v16;
        uint64_t v3 = v21;
        uint64_t v1 = v47;
        if (v30) {
          goto LABEL_22;
        }
        goto LABEL_67;
      }
LABEL_62:
      uint64_t v24 = v49;
LABEL_64:
      v24[v23++] = v30;
      if (v26 == v23)
      {
        CFIndex v44 = "line is too long";
LABEL_70:
        long long v36 = v50;
        fprintf(v50, "Parse error: %s\n", v44);
        uint64_t v3 = v21;
        uint64_t v1 = v47;
        goto LABEL_94;
      }
      continue;
    }
    break;
  }
  v24[(int)v23] = 0;
  CFIndex v44 = "unmatched quote";
  if (v22) {
    goto LABEL_70;
  }
  uint64_t v16 = (v16 + 1);
  uint64_t v3 = v21;
  uint64_t v1 = v47;
LABEL_72:
  long long v36 = v50;
  long long v35 = v51;
LABEL_73:
  CFStringRef v37 = CFStringCreateWithCString(alloc, *v35, 0x8000100u);
  if (!v37)
  {
    fprintf(v36, "%s: command string could not be created\n");
    goto LABEL_87;
  }
  CFStringRef v38 = v37;
  pthread_mutex_lock(*(pthread_mutex_t **)(v1 + 8));
  CFDictionaryRef Value = (pthread_mutex_t **)CFDictionaryGetValue(*(CFDictionaryRef *)v1, v38);
  pthread_mutex_unlock(*(pthread_mutex_t **)(v1 + 8));
  CFRelease(v38);
  if (!Value)
  {
    fprintf(v36, "%s: no such command found, use 'help' to list available commands\n");
LABEL_87:
    if (*(unsigned char *)(v1 + 44)) {
      goto LABEL_94;
    }
    goto LABEL_100;
  }
  if ((int)*MEMORY[0x1E4F149F8] >= 2)
  {
    *MEMORY[0x1E4F149F8] = 1;
    *MEMORY[0x1E4F14A08] = 1;
  }
  v35[(int)v16] = 0;
  if (gLogCategory_APSIntrospector <= 30
    && (gLogCategory_APSIntrospector != -1 || _LogCategory_Initialize()))
  {
    CFMutableDictionaryRef Mutable = CFStringCreateMutable(alloc, 0);
    if ((int)v16 >= 1)
    {
      uint64_t v41 = v16;
      unsigned int v42 = v51;
      do
      {
        uint64_t v43 = (uint64_t)*v42++;
        CFStringAppendFormat(Mutable, 0, @"'%s' ", v43);
        --v41;
      }
      while (v41);
    }
    if (gLogCategory_APSIntrospector <= 30
      && (gLogCategory_APSIntrospector != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CFRelease(Mutable);
    long long v36 = v50;
    long long v35 = v51;
    uint64_t v3 = v46;
  }
  pthread_mutex_lock(Value[3]);
  ((void (*)(pthread_mutex_t *, FILE *, uint64_t, const char **))*Value)(Value[1], v36, v16, v35);
  pthread_mutex_unlock(Value[3]);
  if (!*((unsigned char *)Value + 32)) {
    goto LABEL_94;
  }
LABEL_100:
  int v2 = -1;
LABEL_101:
  free(*(void **)v4);
  if (v4[36]) {
    close(*((_DWORD *)v4 + 8));
  }
  free(v4);
  free(v3);
  free(v49);
  free(v51);
  uint64_t result = (uint64_t)v50;
  if (v50) {
    uint64_t result = fclose(v50);
  }
  if ((v2 & 0x80000000) == 0)
  {
    uint64_t result = close(v2);
    if (result)
    {
      uint64_t result = (uint64_t)__error();
      if (*(_DWORD *)result) {
        return (uint64_t)__error();
      }
    }
  }
  return result;
}

uint64_t introsp_cmdPrompt(uint64_t result, uint64_t a2, int a3, uint64_t a4)
{
  *(_WORD *)(result + 44) = 1;
  if (a3 >= 2)
  {
    uint64_t v4 = result;
    int v5 = *(const char **)(a4 + 8);
    uint64_t result = strcmp(v5, "line");
    if (result)
    {
      uint64_t result = strcmp(v5, "off");
      if (!result) {
        *(unsigned char *)(v4 + 44) = 0;
      }
    }
    else
    {
      *(unsigned char *)(v4 + 45) = 1;
    }
  }
  return result;
}

uint64_t introsp_cmdProgName()
{
  return FPrintF();
}

void introsp_cmdLogging(uint64_t a1, uint64_t a2, int a3)
{
  if (a3 < 2)
  {
    if (LogShow())
    {
      FPrintF();
    }
    else
    {
      FPrintF();
      free(0);
    }
  }
  else
  {
    uint64_t v3 = 8 * a3;
    uint64_t v4 = 8;
    do
    {
      if (LogControl()) {
        FPrintF();
      }
      v4 += 8;
    }
    while (v3 != v4);
  }
}

void introsp_cmdHelp(uint64_t a1, uint64_t a2, int a3, uint64_t a4)
{
  uint64_t v17 = 0;
  sockaddr v18 = &v17;
  uint64_t v19 = 0x2000000000;
  uint64_t v20 = 0;
  int v7 = a3 - 1;
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
  if (v7)
  {
    int64_t v8 = v7;
    uint64_t v9 = malloc_type_malloc(16 * v7, 0x600405BB7FD7CuLL);
    void v18[3] = 0;
    if (a3 >= 2)
    {
      uint64_t v10 = 0;
      CFAllocatorRef v11 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
      do
      {
        CFStringRef v12 = CFStringCreateWithCString(v11, *(const char **)(a4 + 8 * v10 + 8), 0x8000100u);
        v9[2 * v18[3]] = v12;
        CFDictionaryRef Value = CFDictionaryGetValue(*(CFDictionaryRef *)a1, (const void *)v9[2 * v18[3]]);
        if (Value) {
          uint64_t v14 = Value[2];
        }
        else {
          uint64_t v14 = 0;
        }
        v9[2 * v18[3] + 1] = v14;
        uint64_t v10 = v18[3] + 1;
        void v18[3] = v10;
      }
      while (v10 < v8);
    }
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
  }
  else
  {
    CFIndex Count = CFDictionaryGetCount(*(CFDictionaryRef *)a1);
    uint64_t v9 = malloc_type_malloc(16 * Count, 0x600405BB7FD7CuLL);
    CFDictionaryApplyBlock();
    int64_t v8 = v18[3];
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
    qsort(v9, v8, 0x10uLL, (int (__cdecl *)(const void *, const void *))compareDescriptions);
  }
  void v18[3] = 0;
  if (v8 >= 1)
  {
    do
    {
      FPrintF();
      CFRelease((CFTypeRef)v9[2 * v18[3]]);
      uint64_t v16 = v18[3] + 1;
      void v18[3] = v16;
    }
    while (v16 < v8);
  }
  free(v9);
  _Block_object_dispose(&v17, 8);
}

CFTypeRef __introsp_cmdHelp_block_invoke(CFTypeRef result, CFTypeRef cf, uint64_t a3)
{
  if (*(void *)(a3 + 16))
  {
    uint64_t v4 = (uint64_t)result;
    uint64_t result = CFRetain(cf);
    *(void *)(*(void *)(v4 + 40) + 16 * *(void *)(*(void *)(*(void *)(v4 + 32) + 8) + 24)) = result;
    *(void *)(*(void *)(v4 + 40) + 16 * (*(void *)(*(void *)(*(void *)(v4 + 32) + 8) + 24))++ + 8) = *(void *)(a3 + 16);
  }
  return result;
}

CFComparisonResult compareDescriptions(CFStringRef *a1, CFStringRef *a2)
{
  return CFStringCompare(*a1, *a2, 0);
}

void introsp_cmdFigNote(uint64_t a1, uint64_t a2, int a3, const char **a4)
{
  if (a3 < 3)
  {
LABEL_25:
    FPrintF();
    return;
  }
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFStringRef v7 = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a4[2], 0x8000100u);
  int64_t v8 = a4[1];
  if (!strcmp(v8, "change"))
  {
    if (a3 == 5)
    {
      CFStringRef v10 = CFStringCreateWithCString(v6, a4[3], 0x8000100u);
      TextToInt32();
      int Value = FigNote_ChangeValue();
      goto LABEL_18;
    }
  }
  else
  {
    if (strcmp(v8, "show")) {
      goto LABEL_4;
    }
    if (a3 == 3)
    {
      int Value = FigNote_CopyKeys();
      if (!Value)
      {
        CFIndex Count = CFArrayGetCount(0);
        if (Count >= 1)
        {
          CFIndex v13 = Count;
          for (CFIndex i = 0; i != v13; ++i)
          {
            CFArrayGetValueAtIndex(0, i);
            FPrintF();
          }
        }
        CFRelease(0);
      }
      CFStringRef v10 = 0;
      goto LABEL_18;
    }
    if (a3 == 4)
    {
      CFStringRef v10 = CFStringCreateWithCString(v6, a4[3], 0x8000100u);
      int Value = FigNote_GetValue();
      if (!Value) {
        FPrintF();
      }
LABEL_18:
      char v11 = 1;
      if (!v7) {
        goto LABEL_20;
      }
      goto LABEL_19;
    }
  }
LABEL_4:
  int Value = 0;
  CFStringRef v10 = 0;
  char v11 = 0;
  if (v7) {
LABEL_19:
  }
    CFRelease(v7);
LABEL_20:
  if (v10) {
    CFRelease(v10);
  }
  if (Value) {
    FPrintF();
  }
  if ((v11 & 1) == 0) {
    goto LABEL_25;
  }
}

uint64_t introsp_cmdQuit(uint64_t result)
{
  if (result)
  {
    if (*(unsigned char *)(result + 44)) {
      return FPrintF();
    }
  }
  return result;
}

uint64_t introsp_cmdEcho(uint64_t a1, uint64_t a2, int a3, uint64_t a4)
{
  if (a3 >= 2)
  {
    uint64_t v4 = a3 - 1;
    uint64_t v5 = a4 + 8;
    do
    {
      v5 += 8;
      FPrintF();
      --v4;
    }
    while (v4);
  }

  return FPrintF();
}

void APSIntrospectorSetCommandContext(const void *a1, pthread_mutex_t *a2)
{
  if (APSIntrospectorInit_once != -1) {
    dispatch_once_f(&APSIntrospectorInit_once, 0, (dispatch_function_t)introsp_init);
  }
  uint64_t v4 = gIntrospector;
  if (gIntrospector)
  {
    if (a1)
    {
      pthread_mutex_lock(*(pthread_mutex_t **)(gIntrospector + 8));
      int Value = (pthread_mutex_t **)CFDictionaryGetValue(*(CFDictionaryRef *)v4, a1);
      pthread_mutex_unlock(*(pthread_mutex_t **)(v4 + 8));
      if (Value)
      {
        pthread_mutex_lock(Value[3]);
        Value[1] = a2;
        CFAllocatorRef v6 = Value[3];
        pthread_mutex_unlock(v6);
      }
      else if (gLogCategory_APSIntrospector <= 90 {
             && (gLogCategory_APSIntrospector != -1 || _LogCategory_Initialize()))
      }
      {
        LogPrintF();
      }
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
}

void APSIntrospectorCollectionShow(NSObject **a1, uint64_t a2, int a3, uint64_t a4)
{
  if (a3 < 2)
  {
    CFAllocatorRef v6 = *a1;
    v8[0] = MEMORY[0x1E4F143A8];
    v8[1] = 0x40000000;
    _OWORD v8[2] = __APSIntrospectorCollectionShow_block_invoke_2;
    void v8[3] = &__block_descriptor_tmp_12_2334;
    v8[4] = a1;
    v8[5] = a2;
    CFStringRef v7 = v8;
  }
  else
  {
    if (strcmp(*(const char **)(a4 + 8), "count"))
    {
      FPrintF();
      return;
    }
    CFAllocatorRef v6 = *a1;
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 0x40000000;
    block[2] = __APSIntrospectorCollectionShow_block_invoke;
    block[3] = &__block_descriptor_tmp_2332;
    void block[4] = a1;
    void block[5] = a2;
    CFStringRef v7 = block;
  }
  dispatch_sync(v6, v7);
}

uint64_t __APSIntrospectorCollectionShow_block_invoke(uint64_t a1)
{
  return FPrintF();
}

void __APSIntrospectorCollectionShow_block_invoke_2()
{
  v0[0] = 0;
  v0[1] = v0;
  v0[2] = 0x2000000000;
  int v1 = 1;
  CFSetApplyBlock();
  _Block_object_dispose(v0, 8);
}

uint64_t __APSIntrospectorCollectionShow_block_invoke_3(uint64_t a1)
{
  uint64_t result = FPrintF();
  ++*(_DWORD *)(*(void *)(*(void *)(a1 + 32) + 8) + 24);
  return result;
}

void APSIntrospectorInit()
{
  if (APSIntrospectorInit_once != -1) {
    dispatch_once_f(&APSIntrospectorInit_once, 0, (dispatch_function_t)introsp_init);
  }
}

uint64_t APSCMNotificationCenterPostNotificationAsync(const void *a1, const void *a2, const void *a3, const void *a4, int a5, NSObject *a6, dispatch_qos_class_t qos_class)
{
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 0x40000000;
  block[2] = __APSCMNotificationCenterPostNotificationAsync_block_invoke;
  block[3] = &__block_descriptor_tmp_2342;
  void block[4] = a1;
  void block[5] = a2;
  void block[6] = a3;
  void block[7] = a4;
  int v16 = a5;
  dispatch_block_t v12 = dispatch_block_create_with_qos_class(DISPATCH_BLOCK_ENFORCE_QOS_CLASS, qos_class, 0, block);
  if (!v12) {
    return 4294960568;
  }
  CFIndex v13 = v12;
  if (a1) {
    CFRetain(a1);
  }
  if (a2) {
    CFRetain(a2);
  }
  if (a3) {
    CFRetain(a3);
  }
  if (a4) {
    CFRetain(a4);
  }
  dispatch_async(a6, v13);
  _Block_release(v13);
  return 0;
}

void __APSCMNotificationCenterPostNotificationAsync_block_invoke(void *a1)
{
  CMNotificationCenterPostNotification();
  int v2 = (const void *)a1[4];
  if (v2) {
    CFRelease(v2);
  }
  uint64_t v3 = (const void *)a1[5];
  if (v3) {
    CFRelease(v3);
  }
  uint64_t v4 = (const void *)a1[6];
  if (v4) {
    CFRelease(v4);
  }
  uint64_t v5 = (const void *)a1[7];
  if (v5)
  {
    CFRelease(v5);
  }
}

uint64_t APSHTTPParseByteRangeRequest(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t *a4, uint64_t *a5)
{
  *a4 = 0;
  *a5 = -1;
  uint64_t result = HTTPParseByteRangeRequest();
  if (!result)
  {
    uint64_t v9 = *a4;
    uint64_t v10 = *a5;
    if (*a4 < 0)
    {
      if (v10 != -1) {
        return 4294960586;
      }
      *a4 = v9 + a3;
    }
    else if ((v10 & 0x8000000000000000) == 0 && v10 <= a3)
    {
      goto LABEL_9;
    }
    *a5 = a3;
    uint64_t v9 = *a4;
    uint64_t v10 = a3;
    if (*a4 < 0)
    {
LABEL_13:
      if (gLogCategory_AirPlayHTTPUtilities <= 50
        && (gLogCategory_AirPlayHTTPUtilities != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      return 4294960586;
    }
LABEL_9:
    if (v10 <= a3 && v9 < v10) {
      return 0;
    }
    goto LABEL_13;
  }
  return result;
}

uint64_t APSHTTPOpenLocalFile(const __CFString *a1, int *a2, off_t *a3)
{
  uint64_t v13 = *MEMORY[0x1E4F143B8];
  bzero(buffer, 0x401uLL);
  memset(&v11, 0, sizeof(v11));
  int CString = CFStringGetCString(a1, buffer, 1025, 0x8000100u);
  int v7 = -1;
  uint64_t v8 = 4294960585;
  if (!CString || !buffer[0]) {
    goto LABEL_21;
  }
  int v7 = open(buffer, 0);
  if ((v7 & 0x80000000) == 0)
  {
LABEL_6:
    if (fcntl(v7, 48, 1) && *__error()) {
      __error();
    }
    if (fcntl(v7, 45, 1) && *__error()) {
      __error();
    }
    if (!fstat(v7, &v11))
    {
      uint64_t v8 = 0;
      if (a2) {
        goto LABEL_22;
      }
      goto LABEL_26;
    }
    if (*__error())
    {
      uint64_t v8 = *__error();
      if (v7 < 0) {
        goto LABEL_21;
      }
    }
    else
    {
      uint64_t v8 = 4294960596;
      if (v7 < 0) {
        goto LABEL_21;
      }
    }
    if (v8)
    {
      close(v7);
      int v7 = -1;
    }
LABEL_21:
    if (a2) {
      goto LABEL_22;
    }
LABEL_26:
    close(v7);
    if (!a3) {
      return v8;
    }
    goto LABEL_23;
  }
  if (*__error())
  {
    uint64_t v8 = *__error();
    if (v8) {
      goto LABEL_21;
    }
    goto LABEL_6;
  }
  uint64_t v8 = 4294960596;
  if (!a2) {
    goto LABEL_26;
  }
LABEL_22:
  *a2 = v7;
  if (a3)
  {
LABEL_23:
    tv_seCC_SHA512_CTX c = v11.st_mtimespec.tv_sec;
    *a3 = v11.st_size;
    a3[1] = tv_sec;
  }
  return v8;
}

uint64_t APSCryptorCBCCreate(uint64_t a1, const __CFData *a2, const __CFData *a3, void *a4)
{
  if (!a2)
  {
    uint64_t v8 = 4294895585;
    APSLogErrorAt(0);
    return v8;
  }
  if (!a3)
  {
    uint64_t v8 = 4294895585;
    uint64_t v7 = 0;
LABEL_19:
    APSLogErrorAt(v7);
    return v8;
  }
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  uint64_t v7 = CMDerivedObjectCreate();
  if (v7)
  {
    uint64_t v8 = v7;
    goto LABEL_19;
  }
  CMBaseObjectGetDerivedStorage();
  CFDataGetBytePtr(a2);
  CFDataGetBytePtr(a3);
  uint64_t v7 = AES_CBCFrame_Init();
  if (v7)
  {
    uint64_t v8 = v7;
    goto LABEL_19;
  }
  CFDataGetBytePtr(a2);
  CFDataGetBytePtr(a3);
  uint64_t v7 = AES_CBCFrame_Init();
  if (v7)
  {
    uint64_t v8 = v7;
    goto LABEL_19;
  }
  if (gLogCategory_APSCryptorCBC <= 30 && (gLogCategory_APSCryptorCBC != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  uint64_t v8 = 0;
  *a4 = 0;
  return v8;
}

uint64_t cbcCryptor_DecryptMessage(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, unint64_t a5, uint64_t a6, unint64_t a7, unint64_t *a8)
{
  CMBaseObjectGetDerivedStorage();
  if (a7 < a5)
  {
    APSLogErrorAt(0);
    return 4294895585;
  }
  else
  {
    uint64_t v11 = AES_CBCFrame_Update();
    if (v11)
    {
      uint64_t v12 = v11;
      APSLogErrorAt(v11);
    }
    else
    {
      uint64_t v12 = 0;
      if (a8) {
        *a8 = a5;
      }
    }
  }
  return v12;
}

uint64_t cbcCryptor_EncryptMessage(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, unint64_t a5, uint64_t a6, unint64_t a7)
{
  CMBaseObjectGetDerivedStorage();
  if (a7 < a5)
  {
    APSLogErrorAt(0);
    return 4294895585;
  }
  else
  {
    uint64_t v9 = AES_CBCFrame_Update();
    uint64_t v10 = v9;
    if (v9) {
      APSLogErrorAt(v9);
    }
  }
  return v10;
}

uint64_t cbcCryptor_GetEncryptionOverheadLength()
{
  return 0;
}

__CFString *cbcCryptor_CopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSCryptorCBC %p>", a1);
  return Mutable;
}

uint64_t cbcCryptor_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSCryptorCBC <= 30 && (gLogCategory_APSCryptorCBC != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  AES_CBCFrame_Final();

  return AES_CBCFrame_Final();
}

uint64_t APSWiFiTransactionGetTypeID()
{
  if (gAPSWiFiTransactionInitOnce != -1) {
    dispatch_once_f(&gAPSWiFiTransactionInitOnce, 0, (dispatch_function_t)_APSWiFiTransactionGetTypeID);
  }
  return gAPSWiFiTransactionTypeID;
}

uint64_t _APSWiFiTransactionGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSWiFiTransactionCFTypeID TypeID = result;
  return result;
}

void _APSWiFiTransactionFinalize(uint64_t a1)
{
  if (*(unsigned char *)(a1 + 40))
  {
    uint64_t v2 = *(void *)(a1 + 16);
    int8x16_t v7 = *(int8x16_t *)(a1 + 48);
    uint64_t v3 = (void *)[MEMORY[0x1E4FB6FE0] shared];
    v8[0] = MEMORY[0x1E4F143A8];
    v8[1] = 3221225472;
    _OWORD v8[2] = ___APSWiFiTransactionFinalize_block_invoke;
    void v8[3] = &__block_descriptor_64_e8_v16__0q8l;
    int8x16_t v9 = vextq_s8(v7, v7, 8uLL);
    uint64_t v10 = v2;
    uint64_t v11 = a1;
    [v3 endTransaction:v2 completionHandler:v8];
  }
  uint64_t v4 = *(NSObject **)(a1 + 32);
  block[0] = MEMORY[0x1E4F143A8];
  block[1] = 3221225472;
  block[2] = ___APSWiFiTransactionPostTransactionReleasedEvent_block_invoke;
  block[3] = &__block_descriptor_40_e5_v8__0l;
  void block[4] = a1;
  dispatch_sync(v4, block);
  uint64_t v5 = *(NSObject **)(a1 + 32);
  if (v5)
  {
    dispatch_release(v5);
    *(void *)(a1 + 32) = 0;
  }
  CFAllocatorRef v6 = *(const void **)(a1 + 24);
  if (v6)
  {
    _Block_release(v6);
    *(void *)(a1 + 24) = 0;
  }
}

uint64_t APSWiFiTransactionCreate(unsigned int a1, uint64_t a2, uint64_t a3, CFTypeRef *a4)
{
  uint64_t v22 = *MEMORY[0x1E4F143B8];
  long long v20 = 0u;
  long long v21 = 0u;
  *(_OWORD *)label = 0u;
  long long v19 = 0u;
  if (a4)
  {
    if (gAPSWiFiTransactionInitOnce != -1) {
      dispatch_once_f(&gAPSWiFiTransactionInitOnce, 0, (dispatch_function_t)_APSWiFiTransactionGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v9 = Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      *(void *)(Instance + 48) = a2;
      *(void *)(Instance + 56) = a3;
      uint64_t v16 = Instance;
      SNPrintF();
      dispatch_queue_t v10 = dispatch_queue_create(label, 0);
      *(void *)(v9 + 32) = v10;
      if (v10)
      {
        if (a1 >= 4)
        {
          int v14 = **(_DWORD **)(v9 + 56);
          if (v14 <= 90 && (v14 != -1 || _LogCategory_Initialize())) {
            LogPrintF();
          }
          uint64_t v13 = 4294960591;
        }
        else
        {
          *(void *)(v9 + 16) = qword_1D0C1F798[a1];
          CFRetain((CFTypeRef)v9);
          uint64_t v11 = objc_msgSend(MEMORY[0x1E4FB6FE0], "shared", v16);
          uint64_t v12 = *(void *)(v9 + 16);
          v17[0] = MEMORY[0x1E4F143A8];
          v17[1] = 3221225472;
          v17[2] = __APSWiFiTransactionCreate_block_invoke;
          v17[3] = &__block_descriptor_40_e8_v16__0q8l;
          v17[4] = v9;
          [v11 beginTransaction:v12 completionHandler:v17];
          uint64_t v13 = 0;
          *a4 = CFRetain((CFTypeRef)v9);
        }
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v13 = 4294960568;
      }
      CFRelease((CFTypeRef)v9);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v13;
}

void __APSWiFiTransactionCreate_block_invoke(uint64_t a1, uint64_t a2)
{
  if (a2) {
    int v4 = 90;
  }
  else {
    int v4 = 50;
  }
  uint64_t v5 = *(void *)(a1 + 32);
  int v6 = **(_DWORD **)(v5 + 56);
  if (v4 >= v6)
  {
    if (v6 != -1 || (v7 = _LogCategory_Initialize(), uint64_t v5 = *(void *)(a1 + 32), v7))
    {
      LogPrintF();
      uint64_t v5 = *(void *)(a1 + 32);
    }
  }
  *(unsigned char *)(v5 + 40) = a2 == 0;

  CFRelease((CFTypeRef)v5);
}

void APSWiFiTransactionSetReleaseHandler(uint64_t a1, uint64_t a2)
{
  uint64_t v2 = *(NSObject **)(a1 + 32);
  v3[0] = MEMORY[0x1E4F143A8];
  v3[1] = 3221225472;
  void v3[2] = __APSWiFiTransactionSetReleaseHandler_block_invoke;
  v3[3] = &unk_1E6899118;
  _OWORD v3[4] = a2;
  v3[5] = a1;
  dispatch_sync(v2, v3);
}

void __APSWiFiTransactionSetReleaseHandler_block_invoke(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 32);
  if (v2) {
    uint64_t v3 = _Block_copy(v2);
  }
  else {
    uint64_t v3 = 0;
  }
  uint64_t v4 = *(void *)(a1 + 40);
  uint64_t v5 = *(const void **)(v4 + 24);
  if (v5)
  {
    _Block_release(v5);
    uint64_t v4 = *(void *)(a1 + 40);
  }
  *(void *)(v4 + 24) = v3;
}

CFAllocatorRef APSCreateSecureMemAllocator()
{
  CFAllocatorContext v1 = *(CFAllocatorContext *)byte_1F26EBA90;
  return CFAllocatorCreate(0, &v1);
}

void keyHolder_secureMemDeallocateCallBack(unsigned char *a1)
{
  if (a1)
  {
    CFAllocatorContext v1 = (uint64_t *)(a1 - 16);
    if (*((void *)a1 - 1) == 0xFECA00EEFFC0ADBALL)
    {
      for (uint64_t i = *v1; i; --i)
        *a1++ = 0;
      free(v1);
    }
    else if (gLogCategory_APSKeyHolderCommon <= 90 {
           && (gLogCategory_APSKeyHolderCommon != -1 || _LogCategory_Initialize()))
    }
    {
      LogPrintF();
    }
  }
}

void *keyHolder_secureMemAllocateCallBack(uint64_t a1)
{
  uint64_t v2 = malloc_type_calloc(1uLL, a1 + 16, 0x6050AD5AuLL);
  if (v2)
  {
    *uint64_t v2 = a1;
    v2[1] = 0xFECA00EEFFC0ADBALL;
    return v2 + 2;
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSKeyHolderGetClassID()
{
  if (APSKeyHolderGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSKeyHolderGetClassID_sRegisterOnce, &APSKeyHolderGetClassID_sClassID, (dispatch_function_t)keyHolder_registerBaseClass);
  }
  return APSKeyHolderGetClassID_sClassID;
}

uint64_t keyHolder_registerBaseClass(uint64_t a1)
{
  uint64_t ClassID = CMBaseGetClassID();

  return MEMORY[0x1F40DC658](&keyHolder_registerBaseClass_sClassDesc, ClassID, 1, a1);
}

CFStringRef keyHolder_copyFormattingDesc(uint64_t a1)
{
  return CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"[APSKeyHolder %p]", a1);
}

uint64_t APSKeyHolderGetTypeID()
{
  if (APSKeyHolderGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSKeyHolderGetClassID_sRegisterOnce, &APSKeyHolderGetClassID_sClassID, (dispatch_function_t)keyHolder_registerBaseClass);
  }
  uint64_t v0 = APSKeyHolderGetClassID_sClassID;

  return MEMORY[0x1F40DB8F8](v0);
}

uint64_t APSContiguousAllocatorGetTypeID()
{
  if (gAPSContiguousAllocatorInitOnce != -1) {
    dispatch_once_f(&gAPSContiguousAllocatorInitOnce, 0, (dispatch_function_t)_APSContiguousAllocatorGetTypeID);
  }
  return gAPSContiguousAllocatorTypeID;
}

uint64_t _APSContiguousAllocatorGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSContiguousAllocatorCFTypeID TypeID = result;
  return result;
}

void _APSContiguousAllocatorFinalize(uint64_t a1)
{
  CFAllocatorContext v1 = *(void **)(a1 + 24);
  if (v1)
  {
    malloc_zone_free(*(malloc_zone_t **)(a1 + 16), v1);
    *(void *)(a1 + 24) = 0;
  }
}

uint64_t APSContiguousAllocatorCreate(size_t a1, malloc_zone_t *a2, int a3, unsigned int a4, uint64_t *a5)
{
  if (gAPSContiguousAllocatorInitOnce != -1) {
    dispatch_once_f(&gAPSContiguousAllocatorInitOnce, 0, (dispatch_function_t)_APSContiguousAllocatorGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  uint64_t v11 = Instance;
  uint64_t v12 = 4294895215;
  *(void *)(Instance + 96) = 0;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  if (a1 < 5)
  {
LABEL_22:
    APSLogErrorAt(0);
    CFRelease((CFTypeRef)v11);
    return v12;
  }
  if (!a2) {
    a2 = malloc_default_zone();
  }
  *(void *)(v11 + 16) = a2;
  *(_DWORD *)(v11 + 72) = a3;
  *(void *)(v11 + 88) = a1;
  *(void *)(v11 + 56) = a1;
  *(void *)(v11 + 64) = a4;
  if (a4) {
    uint64_t v13 = (char *)malloc_type_zone_memalign(a2, a4, a1, 0xE06AD371uLL);
  }
  else {
    uint64_t v13 = (char *)malloc_type_zone_calloc(a2, 1uLL, a1, 0x24EDA8AAuLL);
  }
  *(void *)(v11 + 24) = v13;
  if (!v13)
  {
    uint64_t v12 = 4294895216;
    goto LABEL_22;
  }
  if (*(void *)(v11 + 64))
  {
    bzero(v13, a1);
    uint64_t v13 = *(char **)(v11 + 24);
  }
  *(void *)(v11 + 32) = &v13[*(void *)(v11 + 56)];
  *(void *)(v11 + 40) = v13;
  *(void *)(v11 + 48) = v13;
  if (gLogCategory_APSContiguousAllocator <= 50
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v12 = 0;
  *a5 = v11;
  return v12;
}

uint64_t APSContiguousAllocatorAcquireBlock(uint64_t a1, unsigned int a2, void *a3)
{
  if (!a1)
  {
    uint64_t v11 = 4294895215;
LABEL_40:
    APSLogErrorAt(0);
LABEL_30:
    if (gLogCategory_APSContiguousAllocator <= 20
      && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return v11;
  }
  if (*(_DWORD *)(a1 + 72) > a2)
  {
    uint64_t v11 = 4294895215;
    goto LABEL_40;
  }
  unint64_t v3 = *(void *)(a1 + 64);
  if (v3 && a2 % v3)
  {
    uint64_t v11 = 4294895215;
    goto LABEL_40;
  }
  if (a2 >= 0xFFFFFFFC)
  {
    uint64_t v11 = 4294895215;
    goto LABEL_40;
  }
  if (!a3)
  {
    uint64_t v11 = 4294895215;
    goto LABEL_40;
  }
  uint64_t v4 = a2 + 4;
  int v6 = *(unsigned int **)(a1 + 40);
  uint64_t v5 = *(unsigned int **)(a1 + 48);
  if (v5 <= v6 && *(void *)(a1 + 80))
  {
    if (v5 >= v6)
    {
      if (v5 != v6 || *(void *)(a1 + 88) == *(void *)(a1 + 96)) {
        goto LABEL_23;
      }
      goto LABEL_41;
    }
    if (v4 > (int)v6 - (int)v5) {
      goto LABEL_23;
    }
  }
  else
  {
    uint64_t v7 = *(void *)(a1 + 32) - (void)v5;
    if (v4 > v7)
    {
      uint64_t v5 = *(unsigned int **)(a1 + 24);
      if (v4 > (int)v6 - (int)v5)
      {
LABEL_23:
        uint64_t v11 = 4294895212;
        if (gLogCategory_APSContiguousAllocator > 20) {
          return v11;
        }
        if (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()) {
          LogPrintF();
        }
        goto LABEL_30;
      }
      *(void *)(a1 + 96) = v7;
    }
  }
  *uint64_t v5 = a2;
  *(void *)(a1 + 48) = (char *)v5 + v4;
  uint64_t v8 = *(void *)(a1 + 80);
  *(void *)(a1 + 80) = v8 + v4;
  unint64_t v9 = *(void *)(a1 + 56);
  if (v8 + v4 > v9 || (uint64_t v10 = *(void *)(a1 + 88), *(void *)(a1 + 88) = v10 - v4, v10 - v4 < 0) || v10 + v8 != v9)
  {
LABEL_41:
    APSLogErrorAt(0);
    uint64_t v11 = 4294895214;
    goto LABEL_30;
  }
  *a3 = v5 + 1;
  if (gLogCategory_APSContiguousAllocator <= 10
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return 0;
}

uint64_t APSContiguousAllocatorGetFirstAcquiredBlock(uint64_t a1, void *a2)
{
  uint64_t v2 = 4294895213;
  if (a1)
  {
    if (a2)
    {
      uint64_t v2 = 0;
      if (*(void *)(a1 + 80)) {
        *a2 = *(void *)(a1 + 40) + 4;
      }
      else {
        *a2 = 0;
      }
      return v2;
    }
    uint64_t v2 = 4294895215;
  }
  APSLogErrorAt(0);
  if (gLogCategory_APSContiguousAllocator <= 90
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v2;
}

uint64_t APSContiguousAllocatorRelinquishBlock(void *a1, unint64_t a2, unsigned int a3, _DWORD *a4)
{
  uint64_t v8 = 4294895215;
  if (!a1 || !a3 || !a2 || a1[5] + 4 != a2 || a1[3] > a2 || a1[4] <= a2) {
    goto LABEL_37;
  }
  int v9 = *(_DWORD *)(a2 - 4);
  if (gLogCategory_APSContiguousAllocator <= 10
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (v9 == a3)
  {
    bzero((void *)(a1[5] + 4), a3);
    *(_DWORD *)(a2 - 4) = 0;
    unint64_t v10 = a1[4];
    uint64_t v11 = (_DWORD *)(a1[5] + a3 + 4);
    a1[5] = v11;
    if ((unint64_t)v11 >= v10
      || ((v10 - v11) & 0xFFFFFFFC) == 0
      || !*v11 && v11 != (_DWORD *)a1[6])
    {
      uint64_t v11 = (_DWORD *)a1[3];
      a1[5] = v11;
      a1[12] = 0;
    }
    if (a4
      && v11 + 1 != a4
      && gLogCategory_APSContiguousAllocator <= 90
      && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v12 = a1[10] - (a3 + 4);
    a1[10] = v12;
    uint64_t v8 = 4294895214;
    if ((v12 & 0x8000000000000000) == 0)
    {
      unint64_t v13 = a1[11] + a3 + 4;
      a1[11] = v13;
      unint64_t v14 = a1[7];
      if (v13 > v14 && gLogCategory_APSContiguousAllocator <= 90)
      {
        if (gLogCategory_APSContiguousAllocator != -1
          || (v15 = _LogCategory_Initialize(), unint64_t v13 = a1[11], v14 = a1[7], v15))
        {
          LogPrintF();
          unint64_t v13 = a1[11];
          unint64_t v14 = a1[7];
        }
      }
      if (v13 <= v14)
      {
        if (gLogCategory_APSContiguousAllocator <= 10)
        {
          if (gLogCategory_APSContiguousAllocator != -1
            || (int v16 = _LogCategory_Initialize(), v13 = a1[11], v14 = a1[7], v16))
          {
            LogPrintF();
            unint64_t v13 = a1[11];
            unint64_t v14 = a1[7];
          }
        }
        if (a1[10] + v13 == v14) {
          return 0;
        }
      }
    }
  }
LABEL_37:
  APSLogErrorAt(0);
  if (gLogCategory_APSContiguousAllocator <= 90
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v8;
}

uint64_t APSContiguousAllocatorRelinquishBlockFromAddress(void *a1, unint64_t a2, int a3)
{
  uint64_t v3 = 4294895214;
  if (!a1)
  {
    uint64_t v3 = 4294895215;
    goto LABEL_35;
  }
  if (!a3 || !a2 || (unint64_t v7 = a1[3], v7 > a2) || a1[4] <= a2)
  {
    uint64_t v3 = 4294895215;
    goto LABEL_35;
  }
  uint64_t v8 = (int *)(a2 - 4);
  if (a2 - 4 < v7)
  {
    uint64_t v3 = 4294895215;
    goto LABEL_35;
  }
  int v9 = *v8;
  if (gLogCategory_APSContiguousAllocator <= 30
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!v9) {
    return 0;
  }
  if (v9 != a3)
  {
    uint64_t v3 = 4294895215;
    goto LABEL_35;
  }
  unint64_t v11 = a1[5];
  unint64_t v10 = a1[6];
  if (v10 > v11)
  {
    if (v10 >= a1[4]) {
      goto LABEL_35;
    }
    unint64_t v12 = v10 - (void)v8;
    bzero((void *)(a2 - 4), v10 - (void)v8);
    unint64_t v13 = a1[11] + v12;
    a1[11] = v13;
    if (v13 > a1[7]) {
      goto LABEL_35;
    }
    goto LABEL_19;
  }
  if ((unint64_t)v8 < v10)
  {
    unint64_t v12 = v10 - (void)v8;
    bzero((void *)(a2 - 4), v10 - (void)v8);
    unint64_t v14 = a1[11] + v12;
    a1[11] = v14;
    if (v14 > a1[7]) {
      goto LABEL_35;
    }
LABEL_19:
    a1[10] -= v12;
LABEL_24:
    a1[6] = v8;
    if (gLogCategory_APSContiguousAllocator <= 30
      && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (a1[10] + a1[11] != a1[7]) {
      goto LABEL_35;
    }
    return 0;
  }
  if ((unint64_t)v8 >= v11)
  {
    int v15 = (void *)a1[3];
    unint64_t v16 = v10 - (void)v15;
    bzero(v15, v10 - (void)v15);
    unint64_t v17 = a1[11] + v16;
    a1[11] = v17;
    if (v17 <= a1[7])
    {
      a1[10] -= v16;
      size_t v18 = a1[4] - ((void)v8 + a1[12]);
      bzero((void *)(a2 - 4), v18);
      size_t v19 = a1[11] + v18;
      a1[11] = v19;
      if (v19 <= a1[7])
      {
        a1[10] -= v18;
        a1[12] = 0;
        goto LABEL_24;
      }
    }
  }
LABEL_35:
  APSLogErrorAt(0);
  if (gLogCategory_APSContiguousAllocator <= 90
    && (gLogCategory_APSContiguousAllocator != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v3;
}

uint64_t APSContiguousAllocatorGetTotalFreeBlockSize(uint64_t a1)
{
  if (a1) {
    return *(void *)(a1 + 88);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSContiguousAllocatorGetNextAvailableBlockSize(void *a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  unint64_t v2 = a1[5];
  unint64_t v1 = a1[6];
  if (v1 > v2 || !a1[10])
  {
    unint64_t v3 = a1[4] - v1;
    unint64_t v4 = v2 - a1[3];
    if (v4 > v3) {
      unint64_t v3 = v4;
    }
    goto LABEL_8;
  }
  if (v1 < v2)
  {
    unint64_t v3 = v2 - v1;
LABEL_8:
    BOOL v5 = v3 >= 4;
    unint64_t v6 = v3 - 4;
    if (!v5) {
      unint64_t v6 = 0;
    }
    goto LABEL_10;
  }
  unint64_t v6 = 0;
LABEL_10:
  if (v6 >= 0xFFFFFFFF) {
    return 0xFFFFFFFFLL;
  }
  else {
    return v6;
  }
}

void APSVolumeConvertDBToLinearGain(float a1)
{
  if (a1 > -30.0) {
    __exp10f(a1 / 20.0);
  }
}

float APSVolumeConvertLinearGainToDB(float a1)
{
  if (a1 <= 0.0) {
    return -144.0;
  }
  else {
    return log10f(a1) * 20.0;
  }
}

float APSVolumeConvertSliderValueToDB()
{
  TranslateValue();
  return v0;
}

float APSVolumeConvertDBToSliderValue()
{
  TranslateValue();
  return v0;
}

uint64_t APSVolumeConvertDBToClampedSliderValue()
{
  TranslateValue();
  *(float *)&double v0 = v0;
  if (*(float *)&v0 > 1.0 || (result = TranslateValue(), float v3 = v2, v3 >= 0.0))
  {
    uint64_t result = TranslateValue();
    *(float *)&double v4 = v4;
    if (*(float *)&v4 <= 1.0) {
      return TranslateValue();
    }
  }
  return result;
}

void APSVolumeConvertSliderValueToLinearGain()
{
  TranslateValue();
  float v1 = v0;
  if (v1 > -30.0) {
    __exp10f(v1 / 20.0);
  }
}

float APSVolumeConvertLinearGainToSliderValue(float a1)
{
  if (a1 > 0.0) {
    log10f(a1);
  }
  TranslateValue();
  return v1;
}

BOOL APSVolumeDBValuesAreNoticeablyDifferent(float a1, float a2)
{
  TranslateValue();
  *(float *)&double v4 = v4;
  float v5 = fabsf(*(float *)&v4 + 30.0);
  TranslateValue();
  *(float *)&double v6 = v6;
  float v7 = fabsf(*(float *)&v6 + 30.0);
  if (fabsf(a1 + 144.0) >= v5) {
    float v8 = a1;
  }
  else {
    float v8 = -30.0;
  }
  if (fabsf(a2 + 144.0) >= v5) {
    float v9 = a2;
  }
  else {
    float v9 = -30.0;
  }
  if (fabsf(v8 + 30.0) >= 0.00000011921)
  {
    float v10 = fabsf(v9 + 30.0);
    float v11 = fabsf(v8);
    if (fabsf(v9) >= 0.00000011921 && v11 >= 0.00000011921 && v10 >= 0.00000011921) {
      float v7 = v5;
    }
  }
  return vabds_f32(v8, v9) >= v7;
}

BOOL APSVolumeSliderValuesAreNoticeablyDifferent(float a1, float a2)
{
  TranslateValue();
  *(float *)&double v4 = v4;
  if (vabds_f32(a1, *(float *)&v4) < 0.0099999)
  {
    TranslateValue();
    a1 = v5;
  }
  TranslateValue();
  *(float *)&double v6 = v6;
  if (vabds_f32(a2, *(float *)&v6) < 0.0099999)
  {
    TranslateValue();
    a2 = v7;
  }
  TranslateValue();
  *(float *)&double v8 = v8;
  float v9 = vabds_f32(a1, *(float *)&v8);
  float v10 = 0.00000011921;
  if (v9 >= 0.00000011921)
  {
    TranslateValue();
    *(float *)&double v11 = v11;
    float v12 = vabds_f32(a2, *(float *)&v11);
    float v10 = 0.00000011921;
    if (v12 >= 0.00000011921)
    {
      TranslateValue();
      *(float *)&double v13 = v13;
      float v14 = vabds_f32(a1, *(float *)&v13);
      float v10 = 0.00000011921;
      if (v14 >= 0.00000011921)
      {
        TranslateValue();
        *(float *)&double v15 = v15;
        float v16 = vabds_f32(a2, *(float *)&v15);
        float v10 = 0.00000011921;
        if (v16 >= 0.00000011921) {
          float v10 = 0.0099999;
        }
      }
    }
  }
  return vabds_f32(a1, a2) >= v10;
}

BOOL APSVolumeLinearGainValuesAreNoticeablyDifferent(float a1, float a2)
{
  APSVolumeConvertSliderValueToLinearGain();
  return vabds_f32(a1, a2) >= fabsf(v4);
}

const char *APSGetVolumeFadeTypeName(int a1)
{
  double v1 = "Invalid";
  if (a1 == 2) {
    double v1 = "FadeOut";
  }
  if (a1 == 1) {
    return "FadeIn";
  }
  else {
    return v1;
  }
}

uint64_t APSVolumeControlTypeFromEx(uint64_t a1, int a2)
{
  uint64_t result = 0;
  switch((int)a1)
  {
    case 1:
    case 2:
      uint64_t result = a1;
      break;
    case 4:
      uint64_t result = 3;
      break;
    case 8:
      uint64_t result = 4;
      break;
    case 9:
      if (a2) {
        uint64_t result = 4;
      }
      else {
        uint64_t result = 1;
      }
      break;
    case 10:
      if (a2) {
        uint64_t result = 4;
      }
      else {
        uint64_t result = 2;
      }
      break;
    default:
      return result;
  }
  return result;
}

uint64_t APSVolumeControlTypeToEx(int a1)
{
  if ((a1 - 1) > 3) {
    return 0;
  }
  else {
    return dword_1D0C1F130[a1 - 1];
  }
}

const char *APSGetAPVolumeControlTypeName(unsigned int a1)
{
  if (a1 > 4) {
    return "Unknown";
  }
  else {
    return off_1E6899178[a1];
  }
}

const char *APSGetFigEndpointVolumeControlTypeName(unint64_t a1)
{
  if (a1 > 3) {
    return "Unknown";
  }
  else {
    return off_1E68991A0[a1];
  }
}

const char *APSGetAPMuteControlTypeName(int a1)
{
  if ((a1 - 1) > 3) {
    return "Unknown";
  }
  else {
    return off_1E68991C0[a1 - 1];
  }
}

uint64_t APSRotatingKeyMapperInitialize(uint64_t a1)
{
  if (*(unsigned char *)a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  else
  {
    uint64_t v2 = FigSimpleMutexCreate();
    *(void *)(a1 + 8) = v2;
    if (!v2) {
      goto LABEL_10;
    }
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    *(void *)(a1 + 16) = Mutable;
    if (!Mutable) {
      goto LABEL_10;
    }
    CFMutableDictionaryRef v4 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    *(void *)(a1 + 24) = v4;
    if (!v4) {
      goto LABEL_10;
    }
    CFMutableDictionaryRef v5 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    *(void *)(a1 + 32) = v5;
    if (v5
      && (CFMutableDictionaryRef v6 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]),
          (*(void *)(a1 + 40) = v6) != 0)
      && (CFMutableDictionaryRef v7 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]),
          (*(void *)(a1 + 48) = v7) != 0))
    {
      uint64_t result = 0;
      *(unsigned char *)a1 = 1;
    }
    else
    {
LABEL_10:
      APSLogErrorAt(0);
      APSRotatingKeyMapperClear(a1);
      return 4294960568;
    }
  }
  return result;
}

void APSRotatingKeyMapperClear(uint64_t a1)
{
  FigSimpleMutexDestroy();
  *(void *)(a1 + 8) = 0;
  uint64_t v2 = *(const void **)(a1 + 16);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 16) = 0;
  }
  float v3 = *(const void **)(a1 + 24);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 24) = 0;
  }
  CFMutableDictionaryRef v4 = *(const void **)(a1 + 32);
  if (v4)
  {
    CFRelease(v4);
    *(void *)(a1 + 32) = 0;
  }
  CFMutableDictionaryRef v5 = *(const void **)(a1 + 40);
  if (v5)
  {
    CFRelease(v5);
    *(void *)(a1 + 40) = 0;
  }
  CFMutableDictionaryRef v6 = *(const void **)(a1 + 48);
  if (v6)
  {
    CFRelease(v6);
    *(void *)(a1 + 48) = 0;
  }
  *(unsigned char *)a1 = 0;
}

unsigned char *APSRotatingKeyMapperIsInitialized(unsigned char *result)
{
  if (result) {
    return (unsigned char *)(*result != 0);
  }
  return result;
}

uint64_t APSRotatingKeyMapperSetDesiredKeyForID(uint64_t a1, const void *a2, const void *a3, const void **a4)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
  if (a3) {
    int v8 = CFDictionaryContainsKey(*(CFDictionaryRef *)(a1 + 32), a3);
  }
  else {
    int v8 = 0;
  }
  int Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 16), a2);
  float v10 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 40), a2);
  if (v10) {
    double v11 = v10;
  }
  else {
    double v11 = Value;
  }
  if (v11 != a3)
  {
    float v12 = v10;
    if (!a3 || !v11 || !CFEqual(a3, v11))
    {
      if (a3 && !v8)
      {
        if (v12) {
          CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 48), v12);
        }
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 40), a2, a3);
        double v13 = *(__CFDictionary **)(a1 + 48);
LABEL_22:
        CFDictionarySetValue(v13, a3, a2);
        goto LABEL_23;
      }
      if (v12)
      {
        CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 40), a2);
        CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 48), v12);
      }
      if (v8)
      {
        if (Value)
        {
          CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 32), Value);
          CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 24), a2);
        }
        CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 16), a2, a3);
        double v13 = *(__CFDictionary **)(a1 + 24);
        goto LABEL_22;
      }
    }
  }
LABEL_23:
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
  if (a4) {
    *a4 = APSRotatingKeyMapperCopyDataForID(a1, a2);
  }
  return 0;
}

const void *APSRotatingKeyMapperCopyDataForID(uint64_t a1, const void *a2)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
  int Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 16), a2);
  if (Value)
  {
    CFMutableDictionaryRef v5 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 32), Value);
    CFMutableDictionaryRef v6 = v5;
    if (v5) {
      CFRetain(v5);
    }
  }
  else
  {
    CFMutableDictionaryRef v6 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
  return v6;
}

uint64_t APSRotatingKeyMapperRemoveID(uint64_t a1, const void *a2)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
  int Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 16), a2);
  CFMutableDictionaryRef v5 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 40), a2);
  CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 16), a2);
  if (Value) {
    CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 24), Value);
  }
  if (v5)
  {
    CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 40), a2);
    CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 48), v5);
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
  return 0;
}

uint64_t APSRotatingKeyMapperSetDataForKey(uint64_t a1, const void *a2, const void *a3, void *a4)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 8));
  if (CFDictionaryContainsKey(*(CFDictionaryRef *)(a1 + 32), a2))
  {
    int Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 24), 0);
  }
  else
  {
    int Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 48), a2);
    if (Value)
    {
      float v9 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 16), Value);
      if (v9)
      {
        float v10 = v9;
        CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 32), v9);
        CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 24), v10);
      }
      CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 40), Value);
      CFDictionaryRemoveValue(*(CFMutableDictionaryRef *)(a1 + 48), a2);
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 16), Value, a2);
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 24), a2, Value);
    }
  }
  CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 32), a2, a3);
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 8));
  if (a4)
  {
    *a4 = Value;
    if (Value) {
      CFRetain(Value);
    }
  }
  return 0;
}

uint64_t APSRemoteConfigGetTypeID()
{
  if (gAPSRemoteConfigInitOnce != -1) {
    dispatch_once_f(&gAPSRemoteConfigInitOnce, 0, (dispatch_function_t)_APSRemoteConfigGetTypeID);
  }
  return gAPSRemoteConfigTypeID;
}

uint64_t _APSRemoteConfigGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRemoteConfigCFTypeID TypeID = result;
  return result;
}

void _APSRemoteConfigFinalize(uint64_t a1)
{
  if (gLogCategory_APSRemoteConfig <= 50
    && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v2 = *(NSObject **)(a1 + 56);
  if (v2)
  {
    dispatch_source_cancel(v2);
    if (*(unsigned char *)(a1 + 64))
    {
      dispatch_resume(*(dispatch_object_t *)(a1 + 56));
      *(unsigned char *)(a1 + 64) = 0;
    }
    dispatch_release(*(dispatch_object_t *)(a1 + 56));
    *(void *)(a1 + 56) = 0;
  }
  float v3 = *(NSObject **)(a1 + 48);
  if (v3)
  {
    dispatch_sync_f(v3, 0, (dispatch_function_t)remoteConfig_nop);
    CFMutableDictionaryRef v4 = *(NSObject **)(a1 + 48);
    if (v4)
    {
      dispatch_release(v4);
      *(void *)(a1 + 48) = 0;
    }
  }
  CFMutableDictionaryRef v5 = *(NSObject **)(a1 + 72);
  if (v5)
  {
    dispatch_release(v5);
    *(void *)(a1 + 72) = 0;
  }
  CFMutableDictionaryRef v6 = *(const void **)(a1 + 32);
  if (v6)
  {
    CFRelease(v6);
    *(void *)(a1 + 32) = 0;
  }
  CFMutableDictionaryRef v7 = *(const void **)(a1 + 40);
  if (v7)
  {
    CFRelease(v7);
    *(void *)(a1 + 40) = 0;
  }
  FigSimpleMutexDestroy();
  int v8 = *(const void **)(a1 + 16);
  if (v8)
  {
    CFRelease(v8);
    *(void *)(a1 + 16) = 0;
  }
}

CFTypeRef _APSRemoteConfigCreate(const __CFSet *a1, unsigned int a2)
{
  if (gAPSRemoteConfigInitOnce != -1) {
    dispatch_once_f(&gAPSRemoteConfigInitOnce, 0, (dispatch_function_t)_APSRemoteConfigGetTypeID);
  }
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (Instance)
  {
    uint64_t v5 = (uint64_t)Instance;
    Instance[3] = 0u;
    Instance[4] = 0u;
    Instance[1] = 0u;
    Instance[2] = 0u;
    CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFSetRef Copy = CFSetCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a1);
    *(void *)(v5 + 16) = Copy;
    if (!Copy) {
      goto LABEL_21;
    }
    uint64_t v8 = FigSimpleMutexCreate();
    *(void *)(v5 + 24) = v8;
    if (!v8) {
      goto LABEL_21;
    }
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(v6, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    *(void *)(v5 + 32) = Mutable;
    if (!Mutable) {
      goto LABEL_21;
    }
    float v10 = dispatch_queue_attr_make_with_qos_class(0, QOS_CLASS_BACKGROUND, 0);
    double v11 = dispatch_queue_create("APSRemoteConfig.update", v10);
    *(void *)(v5 + 48) = v11;
    if (!v11) {
      goto LABEL_21;
    }
    dispatch_source_t v12 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v11);
    *(void *)(v5 + 56) = v12;
    if (v12
      && (*(unsigned char *)(v5 + 64) = 1,
          dispatch_queue_t v13 = dispatch_queue_create("APSRemoteConfig.notification", 0),
          (*(void *)(v5 + 72) = v13) != 0))
    {
      remoteConfig_update(v5, 1);
      if (a2)
      {
        dispatch_set_context(*(dispatch_object_t *)(v5 + 56), (void *)v5);
        dispatch_source_set_event_handler_f(*(dispatch_source_t *)(v5 + 56), (dispatch_function_t)remoteConfig_updateTimerFire);
        float v14 = *(NSObject **)(v5 + 56);
        dispatch_time_t v15 = dispatch_time(0, 1000000000 * a2);
        dispatch_source_set_timer(v14, v15, 1000000000 * a2, 0x3B9ACA00uLL);
        if (*(unsigned char *)(v5 + 64))
        {
          *(unsigned char *)(v5 + 64) = 0;
          dispatch_resume(*(dispatch_object_t *)(v5 + 56));
        }
      }
      if (gLogCategory_APSRemoteConfig <= 50
        && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      CFTypeRef v16 = CFRetain((CFTypeRef)v5);
    }
    else
    {
LABEL_21:
      APSLogErrorAt(0);
      CFTypeRef v16 = 0;
    }
    CFRelease((CFTypeRef)v5);
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return v16;
}

void remoteConfig_update(uint64_t a1, int a2)
{
  CFTypeRef cf = 0;
  CFDictionaryRef theDict = 0;
  uint64_t context = a1;
  CFDictionaryRef Mutable = (const __CFDictionary *)FigRCLCreateConfiguration();
  if (Mutable) {
    goto LABEL_15;
  }
  CFDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  CFDictionaryRef theDict = Mutable;
  if (!Mutable) {
    goto LABEL_15;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 24));
  CFSetApplyFunction(*(CFSetRef *)(a1 + 16), (CFSetApplierFunction)remoteConfig_updateApplier, &context);
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 24));
  CFIndex Count = CFDictionaryGetCount(theDict);
  if (!a2 && Count >= 1)
  {
    if (gLogCategory_APSRemoteConfig <= 50
      && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    CMNotificationCenterGetDefaultLocalCenter();
    CFDictionaryRef Mutable = (const __CFDictionary *)FigDispatchAsyncPostNotification();
    if (Mutable) {
LABEL_15:
    }
      APSLogErrorAt((uint64_t)Mutable);
  }
  if (cf) {
    CFRelease(cf);
  }
  if (theDict) {
    CFRelease(theDict);
  }
}

void remoteConfig_updateTimerFire(uint64_t a1)
{
  if (gLogCategory_APSRemoteConfig <= 50
    && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }

  remoteConfig_update(a1, 0);
}

void remoteConfig_updateApplier(void *key, CFMutableDictionaryRef *a2)
{
  CFDictionaryRef v4 = (const __CFDictionary *)*((void *)*a2 + 5);
  if (v4)
  {
    int Value = CFDictionaryGetValue(v4, key);
    if (Value)
    {
      uint64_t v5 = (uint64_t)CFRetain(Value);
      goto LABEL_4;
    }
  }
  else if (a2[1])
  {
    uint64_t v5 = FigRCLCopyCFType();
LABEL_4:
    CFAllocatorRef v6 = (const void *)v5;
    goto LABEL_5;
  }
  CFAllocatorRef v6 = 0;
LABEL_5:
  CFMutableDictionaryRef v7 = CFDictionaryGetValue(*((CFDictionaryRef *)*a2 + 4), key);
  if (v7) {
    CFTypeRef v8 = CFRetain(v7);
  }
  else {
    CFTypeRef v8 = 0;
  }
  if (FigCFEqual())
  {
    CFMutableDictionaryRef Mutable = 0;
  }
  else
  {
    if (gLogCategory_APSRemoteConfig <= 50
      && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    float v9 = (__CFDictionary *)*((void *)*a2 + 4);
    if (v6) {
      CFDictionarySetValue(v9, key, v6);
    }
    else {
      CFDictionaryRemoveValue(v9, key);
    }
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 2, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (Mutable)
    {
      FigCFDictionarySetValue();
      FigCFDictionarySetValue();
      CFDictionaryAddValue(a2[2], key, Mutable);
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
  if (v6) {
    CFRelease(v6);
  }
  if (v8) {
    CFRelease(v8);
  }
  if (Mutable)
  {
    CFRelease(Mutable);
  }
}

uint64_t APSRemoteConfigGetShared()
{
  if (APSRemoteConfigGetShared_once != -1) {
    dispatch_once_f(&APSRemoteConfigGetShared_once, &APSRemoteConfigGetShared_config, (dispatch_function_t)remoteConfig_createShared);
  }
  return APSRemoteConfigGetShared_config;
}

void remoteConfig_createShared(CFTypeRef *a1)
{
  CFSetRef v2 = CFSetCreate((CFAllocatorRef)*MEMORY[0x1E4F1CF80], (const void **)kAPSRemoteConfigKeyList, 4, MEMORY[0x1E4F1D548]);
  if (v2)
  {
    CFSetRef v3 = v2;
    unsigned int IntWithOverrideAndDefault = APSSettingsGetIntWithOverrideAndDefault(@"remoteConfigUpdateIntervalSecs", 0, 3600);
    CFSetRef v5 = (const __CFSet *)_APSRemoteConfigCreate(v3, IntWithOverrideAndDefault);
    if (v5)
    {
      CFSetRef v6 = v5;
      *a1 = CFRetain(v5);
      CFRelease(v3);
      CFSetRef v7 = v6;
    }
    else
    {
      APSLogErrorAt(0);
      *a1 = 0;
      CFSetRef v7 = v3;
    }
    CFRelease(v7);
  }
  else
  {
    APSLogErrorAt(0);
    *a1 = 0;
  }
}

CFTypeRef APSRemoteConfigCopyValue(uint64_t a1, void *value)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  CFTypeRef v2 = value;
  if (!value)
  {
    APSLogErrorAt(0);
    return v2;
  }
  uint64_t v4 = CFSetContainsValue(*(CFSetRef *)(a1 + 16), value);
  if (!v4)
  {
    APSLogErrorAt(v4);
    if (gLogCategory_APSRemoteConfig <= 90
      && (gLogCategory_APSRemoteConfig != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    return 0;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 24));
  CFSetRef v5 = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 32), v2);
  if (v5) {
    CFTypeRef v2 = CFRetain(v5);
  }
  else {
    CFTypeRef v2 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 24));
  return v2;
}

uint64_t APSRemoteConfigGetBooleanIfPresent(uint64_t a1, void *a2, Boolean *a3)
{
  if (a1 && a2 && (CFBooleanRef v4 = (const __CFBoolean *)APSRemoteConfigCopyValue(a1, a2)) != 0)
  {
    CFBooleanRef v5 = v4;
    CFTypeID v6 = CFGetTypeID(v4);
    if (v6 == CFBooleanGetTypeID())
    {
      if (a3) {
        *a3 = CFBooleanGetValue(v5);
      }
      uint64_t v7 = 1;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v7 = 0;
    }
    CFRelease(v5);
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return v7;
}

uint64_t _APSRemoteConfigSetFakeRCLData(uint64_t a1, const __CFDictionary *a2)
{
  if (a1)
  {
    pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 24));
    CFBooleanRef v5 = *(const void **)(a1 + 40);
    if (v5)
    {
      CFRelease(v5);
      *(void *)(a1 + 40) = 0;
    }
    if (a2) {
      *(void *)(a1 + 40) = CFDictionaryCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a2);
    }
    CFTypeID v6 = *(pthread_mutex_t **)(a1 + 24);
    return pthread_mutex_unlock(v6);
  }
  else
  {
    return APSLogErrorAt(0);
  }
}

void _APSRemoteConfigUpdateNow(uint64_t a1)
{
  if (a1) {
    remoteConfig_update(a1, 0);
  }
  else {
    APSLogErrorAt(0);
  }
}

__CFData *APSFeaturesCreateMutable(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFDataCreateMutable(0, 0);
  CFSetRef v3 = Mutable;
  if (Mutable)
  {
    if (a1 >= 1) {
      CFDataSetLength(Mutable, (unint64_t)(a1 + 7) >> 3);
    }
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v3;
}

CFMutableDataRef APSFeaturesCreateMutableCopy(CFDataRef theData)
{
  return CFDataCreateMutableCopy(0, 0, theData);
}

uint64_t APSFeaturesCreateFromStringRepresentation(CFStringRef theString, int *a2)
{
  if (gLogCategory_APSFeatures <= 30 && (gLogCategory_APSFeatures != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  CFIndex v4 = CFStringGetLength(theString) + 1;
  CFBooleanRef v5 = (char *)malloc_type_malloc(v4, 0x16C71FD5uLL);
  if (v5)
  {
    if (CFStringGetCString(theString, v5, v4, 0x600u) == 1 && (strlen(v5), uint64_t v6 = Base64DecodeCopy(), v6))
    {
      int v8 = v6;
      APSLogErrorAt(v6);
    }
    else
    {
      APSLogErrorAt(0);
      int v8 = -6705;
    }
  }
  else
  {
    APSLogErrorAt(0);
    int v8 = -6728;
  }
  free(v5);
  free(0);
  if (a2) {
    *a2 = v8;
  }
  if (gLogCategory_APSFeatures <= 90 && (gLogCategory_APSFeatures != -1 || _LogCategory_Initialize())) {
    LogPrintF();
  }
  return 0;
}

__CFData *APSFeaturesCreateFromLegacyFlags(unint64_t a1)
{
  CFMutableDictionaryRef Mutable = APSFeaturesCreateMutable(0);
  CFSetRef v3 = Mutable;
  if (Mutable) {
    APSFeaturesSetLegacyFlags(Mutable, a1);
  }
  else {
    APSLogErrorAt(0);
  }
  return v3;
}

void APSFeaturesSetLegacyFlags(const __CFData *a1, unint64_t a2)
{
  uint64_t v8 = *MEMORY[0x1E4F143B8];
  uint64_t Length = CFDataGetLength(a1);
  for (uint64_t i = 0; i != 8; ++i)
  {
    v7[i] = a2;
    a2 >>= 8;
  }
  if (Length >= 8) {
    v6.unsigned int length = 8;
  }
  else {
    v6.unsigned int length = Length;
  }
  v6.locatiouint64_t n = 0;
  CFDataReplaceBytes(a1, v6, v7, 8);
}

const void *APSFeaturesCreateFromEndpointInfoFeatureRepresentations(const __CFString *a1, unint64_t a2, unsigned int *a3)
{
  unsigned int v6 = 0;
  if (a1)
  {
    CFIndex v4 = (const void *)APSFeaturesCreateFromStringRepresentation(a1, (int *)&v6);
    if (v6)
    {
      APSLogErrorAt(v6);
      if (v6)
      {
        if (v4)
        {
          CFRelease(v4);
          CFIndex v4 = 0;
          if (!a3) {
            return v4;
          }
          goto LABEL_9;
        }
      }
    }
  }
  else
  {
    CFIndex v4 = APSFeaturesCreateFromLegacyFlags(a2);
    if (!v4)
    {
      APSLogErrorAt(0);
      unsigned int v6 = -6728;
      if (!a3) {
        return v4;
      }
      goto LABEL_9;
    }
  }
  if (a3) {
LABEL_9:
  }
    *a3 = v6;
  return v4;
}

BOOL APSFeaturesIsEmpty(const __CFData *a1)
{
  if (!a1) {
    return 1;
  }
  CFIndex Length = CFDataGetLength(a1);
  BytePtr = CFDataGetBytePtr(a1);
  if (Length < 1) {
    return 1;
  }
  if (*BytePtr) {
    return 0;
  }
  uint64_t v5 = 1;
  while (Length != v5)
  {
    if (BytePtr[v5++])
    {
      CFIndex v7 = v5 - 1;
      return v7 >= Length;
    }
  }
  CFIndex v7 = Length;
  return v7 >= Length;
}

uint64_t APSFeaturesHasFeature(const __CFData *a1, uint64_t a2)
{
  if (a2 >= 0) {
    uint64_t v2 = a2;
  }
  else {
    uint64_t v2 = a2 + 7;
  }
  if (!a1)
  {
LABEL_8:
    APSLogErrorAt(0);
    return 0;
  }
  char v3 = a2;
  if (v2 >> 3 < CFDataGetLength(a1))
  {
    BytePtr = CFDataGetBytePtr(a1);
    if (BytePtr) {
      return (BytePtr[v2 >> 3] >> (v3 - (v2 & 0xF8))) & 1;
    }
    goto LABEL_8;
  }
  return 0;
}

uint64_t APSFeaturesHasAllFeatures(CFDataRef theData, const __CFData *a2)
{
  CFDataRef BytePtr = theData;
  if (theData)
  {
    CFIndex Length = CFDataGetLength(theData);
    CFDataRef BytePtr = (const __CFData *)CFDataGetBytePtr(BytePtr);
    if (!a2) {
      return 1;
    }
  }
  else
  {
    CFIndex Length = 0;
    if (!a2) {
      return 1;
    }
  }
  CFIndex v5 = CFDataGetLength(a2);
  unsigned int v6 = CFDataGetBytePtr(a2);
  if (v5 < 1) {
    return 1;
  }
  CFIndex v7 = 0;
  while (!v6[v7] || v7 < Length && (v6[v7] & ~*((unsigned __int8 *)BytePtr + v7)) == 0)
  {
    if (v5 == ++v7) {
      return 1;
    }
  }
  return 0;
}

UInt8 *APSFeaturesSetFeature(__CFData *a1, uint64_t a2)
{
  if (CFDataGetLength(a1) <= a2 / 8) {
    CFDataSetLength(a1, a2 / 8 + 1);
  }
  uint64_t result = CFDataGetMutableBytePtr(a1);
  result[a2 / 8] |= 1 << (a2 % 8);
  return result;
}

const UInt8 *APSFeaturesSetAllFeatures(__CFData *a1, CFDataRef theData)
{
  uint64_t Length = CFDataGetLength(theData);
  if (CFDataGetLength(a1) < Length) {
    CFDataSetLength(a1, Length);
  }
  MutableCFDataRef BytePtr = CFDataGetMutableBytePtr(a1);
  uint64_t result = CFDataGetBytePtr(theData);
  if (Length >= 1)
  {
    do
    {
      char v7 = *result++;
      *MutableBytePtr++ |= v7;
      --Length;
    }
    while (Length);
  }
  return result;
}

uint64_t APSFeaturesClearFeature(const __CFData *a1, uint64_t a2)
{
  uint64_t result = CFDataGetLength(a1);
  uint64_t v5 = a2 + 7;
  if (a2 >= 0) {
    uint64_t v5 = a2;
  }
  if (result > v5 >> 3)
  {
    uint64_t v6 = v5 >> 3;
    int v7 = a2 - 8 * (v5 >> 3);
    uint64_t result = (uint64_t)CFDataGetMutableBytePtr(a1);
    *(unsigned char *)(result + v6) &= ~(1 << v7);
  }
  return result;
}

const UInt8 *APSFeaturesClearAllFeatures(CFDataRef theData, const __CFData *a2)
{
  MutableCFDataRef BytePtr = theData;
  if (theData)
  {
    CFIndex Length = CFDataGetLength(theData);
    MutableCFDataRef BytePtr = (__CFData *)CFDataGetMutableBytePtr(MutableBytePtr);
    if (a2)
    {
LABEL_3:
      CFIndex v5 = CFDataGetLength(a2);
      uint64_t result = CFDataGetBytePtr(a2);
      goto LABEL_6;
    }
  }
  else
  {
    CFIndex Length = 0;
    if (a2) {
      goto LABEL_3;
    }
  }
  CFIndex v5 = 0;
  uint64_t result = 0;
LABEL_6:
  if (v5 >= Length) {
    uint64_t v7 = Length;
  }
  else {
    uint64_t v7 = v5;
  }
  if (v7 >= 1)
  {
    do
    {
      char v8 = *result++;
      *(unsigned char *)MutableBytePtr &= ~v8;
      MutableCFDataRef BytePtr = (__CFData *)((char *)MutableBytePtr + 1);
      --v7;
    }
    while (v7);
  }
  return result;
}

uint64_t APSFeaturesCopyStringRepresentation(const UInt8 *theData, void *a2)
{
  CFDataRef v3 = (const __CFData *)theData;
  if (theData)
  {
    CFIndex Length = CFDataGetLength((CFDataRef)theData);
    CMTime theData = CFDataGetBytePtr(v3);
  }
  else
  {
    CFIndex Length = 0;
  }
  do
  {
    CFIndex v5 = Length;
    if (Length-- < 1)
    {
      if (v3)
      {
        float v9 = (void *)CFRetain(&stru_1F26EE2F0);
        uint64_t v8 = 0;
        goto LABEL_11;
      }
      goto LABEL_13;
    }
  }
  while (!theData[v5 - 1]);
  if (!v3)
  {
LABEL_13:
    APSLogErrorAt(0);
    uint64_t v8 = 4294960591;
    goto LABEL_12;
  }
  uint64_t v7 = Base64EncodeCopyEx();
  uint64_t v8 = v7;
  if (!v7)
  {
    float v9 = (void *)CFStringCreateWithBytes(0, 0, 0, 0x600u, 0);
LABEL_11:
    *a2 = v9;
    goto LABEL_12;
  }
  APSLogErrorAt(v7);
LABEL_12:
  free(0);
  return v8;
}

unint64_t APSFeaturesGetLegacyFlags(unint64_t result, _DWORD *a2)
{
  if (!result) {
    goto LABEL_7;
  }
  CFDataRef v3 = (const __CFData *)result;
  CFIndex Length = CFDataGetLength((CFDataRef)result);
  CFDataRef BytePtr = CFDataGetBytePtr(v3);
  unint64_t v6 = Length - 1;
  if (Length >= 1)
  {
    uint64_t v7 = BytePtr;
    uint64_t v8 = 0;
    uint64_t result = 0;
    if (v6 >= 7) {
      unint64_t v6 = 7;
    }
    uint64_t v9 = 8 * v6 + 8;
    do
    {
      unsigned int v10 = *v7++;
      result |= (unint64_t)v10 << v8;
      v8 += 8;
    }
    while (v9 != v8);
LABEL_7:
    if (!a2) {
      return result;
    }
    goto LABEL_8;
  }
  uint64_t result = 0;
  if (!a2) {
    return result;
  }
LABEL_8:
  *a2 = 0;
  return result;
}

uint64_t APSPriorityDispatchSourceGetTypeID()
{
  if (gAPSPriorityDispatchSourceInitOnce != -1) {
    dispatch_once_f(&gAPSPriorityDispatchSourceInitOnce, 0, (dispatch_function_t)_APSPriorityDispatchSourceGetTypeID);
  }
  return gAPSPriorityDispatchSourceTypeID;
}

uint64_t _APSPriorityDispatchSourceGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSPriorityDispatchSourceCFTypeID TypeID = result;
  return result;
}

void _APSPriorityDispatchSourceFinalize(uint64_t a1)
{
  uint64_t v2 = *(void *)(a1 + 40);
  if (v2 && !*(unsigned char *)(a1 + 88)) {
    atomic_store(1u, (unsigned int *)(v2 + 56));
  }
  CFDataRef v3 = *(NSObject **)(a1 + 80);
  if (v3)
  {
    dispatch_source_cancel(v3);
    if (*(unsigned char *)(a1 + 89))
    {
      dispatch_resume(*(dispatch_object_t *)(a1 + 80));
      *(unsigned char *)(a1 + 89) = 0;
    }
    dispatch_release(*(dispatch_object_t *)(a1 + 80));
    *(void *)(a1 + 80) = 0;
  }
  CFIndex v4 = *(NSObject **)(a1 + 72);
  if (v4)
  {
    dispatch_release(v4);
    *(void *)(a1 + 72) = 0;
  }
  if (*(void *)(a1 + 56))
  {
    FigSimpleMutexDestroy();
    *(void *)(a1 + 56) = 0;
  }
  CFIndex v5 = *(const void **)(a1 + 40);
  if (v5) {
    CFRelease(v5);
  }
  unint64_t v6 = *(const void **)(a1 + 48);
  if (v6)
  {
    CFRelease(v6);
  }
}

uint64_t APSPriorityDispatchSourceCreate(uint64_t a1, uint64_t a2, uint64_t a3, NSObject *a4, unsigned int a5, const void *a6, long long *a7, CFTypeRef *a8)
{
  uint64_t v8 = 4294960591;
  if (a4 && a7 && a8 && *((void *)a7 + 1))
  {
    if (gAPSPriorityDispatchSourceInitOnce != -1) {
      dispatch_once_f(&gAPSPriorityDispatchSourceInitOnce, 0, (dispatch_function_t)_APSPriorityDispatchSourceGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v18 = Instance;
      *(void *)(Instance + 112) = 0;
      *(_OWORD *)(Instance + 80) = 0u;
      *(_OWORD *)(Instance + 96) = 0u;
      *(_OWORD *)(Instance + 48) = 0u;
      *(_OWORD *)(Instance + 64) = 0u;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      if (gAPSPriorityDispatchSourceSharedContextInitOnce != -1) {
        dispatch_once_f(&gAPSPriorityDispatchSourceSharedContextInitOnce, 0, (dispatch_function_t)_APSPriorityDispatchSourceSharedContextGetTypeID);
      }
      size_t v19 = (_OWORD *)_CFRuntimeCreateInstance();
      *(void *)(v18 + 40) = v19;
      if (!v19) {
        goto LABEL_19;
      }
      v19[2] = 0u;
      v19[3] = 0u;
      v19[1] = 0u;
      *(void *)(v18 + 16) = a1;
      *(void *)(v18 + 24) = a2;
      *(void *)(v18 + 32) = a3;
      CFTypeRef v20 = a6 ? CFRetain(a6) : 0;
      *(void *)(v18 + 48) = v20;
      dispatch_retain(a4);
      uint64_t v21 = *(void *)(v18 + 40);
      *(void *)(v21 + 16) = a4;
      long long v22 = *a7;
      *(void *)(v21 + 40) = *((void *)a7 + 2);
      *(_OWORD *)(v21 + 24) = v22;
      atomic_store(0, (unsigned int *)(*(void *)(v18 + 40) + 56));
      uint64_t v23 = FigSimpleMutexCreate();
      *(void *)(v18 + 56) = v23;
      if (v23)
      {
        *(_DWORD *)(v18 + 64) = a5;
        *(void *)(v18 + 72) = 0;
        *(void *)(v18 + 80) = 0;
        *(unsigned char *)(v18 + 89) = 1;
        *(void *)(v18 + 96) = -1;
        *(void *)(v18 + 104) = -1;
        *(void *)(v18 + 112) = -1;
        uint64_t v8 = priorityDispatchSource_setPriority(v18, a5, 1);
        if (!v8) {
          *a8 = CFRetain((CFTypeRef)v18);
        }
      }
      else
      {
LABEL_19:
        uint64_t v8 = 4294960568;
      }
      CFRelease((CFTypeRef)v18);
    }
    else
    {
      return 4294960568;
    }
  }
  return v8;
}

uint64_t priorityDispatchSource_setPriority(uint64_t a1, unsigned int a2, int a3)
{
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 56));
  if (*(unsigned char *)(a1 + 88))
  {
    uint64_t v19 = 4294960573;
    goto LABEL_39;
  }
  if (!a3 && *(_DWORD *)(a1 + 64) == a2)
  {
    uint64_t v19 = 0;
    goto LABEL_39;
  }
  uint64_t v6 = *(void *)(a1 + 48);
  if (v6)
  {
    Queue = APSPriorityDispatchQueuePoolGetQueue(v6, a2);
    if (Queue)
    {
      uint64_t v8 = Queue;
      dispatch_retain(Queue);
      goto LABEL_10;
    }
    uint64_t v19 = 4294960569;
LABEL_39:
    pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
    return v19;
  }
  if (a2 == 5)
  {
    dispatch_retain(*(dispatch_object_t *)(*(void *)(a1 + 40) + 16));
    uint64_t v8 = *(NSObject **)(*(void *)(a1 + 40) + 16);
  }
  else
  {
    uint64_t v8 = FigDispatchQueueCreateWithPriority();
    if (!v8)
    {
      uint64_t v19 = 4294960568;
      goto LABEL_39;
    }
  }
LABEL_10:
  uint64_t v9 = dispatch_source_create(*(dispatch_source_type_t *)(a1 + 16), *(void *)(a1 + 24), *(void *)(a1 + 32), v8);
  if (v9 && (int v10 = *(unsigned __int8 *)(a1 + 89), (v11 = malloc_type_malloc(0x10uLL, 0x20040A4A59CD2uLL)) != 0))
  {
    dispatch_source_t v12 = v11;
    void *v11 = v9;
    v11[1] = CFRetain(*(CFTypeRef *)(a1 + 40));
    dispatch_queue_t v13 = *(NSObject **)(a1 + 80);
    if (v13)
    {
      dispatch_source_cancel(v13);
      if (*(unsigned char *)(a1 + 89))
      {
        dispatch_resume(*(dispatch_object_t *)(a1 + 80));
        *(unsigned char *)(a1 + 89) = 0;
      }
      dispatch_release(*(dispatch_object_t *)(a1 + 80));
      *(void *)(a1 + 80) = 0;
    }
    float v14 = *(NSObject **)(a1 + 72);
    if (v14)
    {
      dispatch_release(v14);
      *(void *)(a1 + 72) = 0;
    }
    if (*(void *)(a1 + 16) == MEMORY[0x1E4F14490]) {
      dispatch_source_set_timer(v9, *(void *)(a1 + 96), *(void *)(a1 + 104), *(void *)(a1 + 112));
    }
    dispatch_set_context(v9, v12);
    BOOL v15 = *(void *)(a1 + 48) == 0;
    BOOL v16 = a2 == 5;
    if (v16 && v15) {
      unint64_t v17 = (void (__cdecl *)(void *))priorityDispatchSource_targetQueueEventHandler;
    }
    else {
      unint64_t v17 = (void (__cdecl *)(void *))priorityDispatchSource_sourceEventHandler;
    }
    if (v16 && v15) {
      uint64_t v18 = (void (__cdecl *)(void *))priorityDispatchSource_targetQueueCancelHandler;
    }
    else {
      uint64_t v18 = (void (__cdecl *)(void *))priorityDispatchSource_sourceCancelHandler;
    }
    dispatch_source_set_event_handler_f(v9, v17);
    dispatch_source_set_cancel_handler_f(v9, v18);
    *(_DWORD *)(a1 + 64) = a2;
    dispatch_retain(v8);
    *(void *)(a1 + 72) = v8;
    dispatch_retain(v9);
    *(void *)(a1 + 80) = v9;
    *(unsigned char *)(a1 + 89) = v10;
    if (!v10) {
      dispatch_resume(v9);
    }
    uint64_t v19 = 0;
  }
  else
  {
    uint64_t v19 = 4294960568;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
  if (v8) {
    dispatch_release(v8);
  }
  if (v9) {
    dispatch_release(v9);
  }
  return v19;
}

void priorityDispatchSource_sourceCancelHandler(CFTypeRef *a1)
{
  CFTypeRef v2 = CFRetain(a1[1]);
  dispatch_sync_f(*((dispatch_queue_t *)a1[1] + 2), a1, (dispatch_function_t)priorityDispatchSource_targetQueueCancelHandler);

  CFRelease(v2);
}

void priorityDispatchSource_targetQueueCancelHandler(void *a1)
{
  int v2 = 1;
  atomic_compare_exchange_strong_explicit((atomic_uint *volatile)(a1[1] + 56), (unsigned int *)&v2, 2u, memory_order_relaxed, memory_order_relaxed);
  CFDataRef v3 = (void *)a1[1];
  if (v2 == 1)
  {
    CFIndex v4 = (void (*)(void))v3[5];
    if (v4)
    {
      v4(v3[3]);
      CFDataRef v3 = (void *)a1[1];
    }
  }
  CFRelease(v3);

  free(a1);
}

void priorityDispatchSource_sourceEventHandler(void *context)
{
}

void *priorityDispatchSource_targetQueueEventHandler(void *result)
{
  uint64_t v1 = result[1];
  if (!*(_DWORD *)(v1 + 56))
  {
    int v2 = result;
    *(void *)(v1 + 48) = *result;
    uint64_t result = (void *)(*(uint64_t (**)(void))(v1 + 32))(*(void *)(v1 + 24));
    *(void *)(v2[1] + 48) = 0;
  }
  return result;
}

uint64_t _APSPriorityDispatchSourceSharedContextGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSPriorityDispatchSourceSharedContextCFTypeID TypeID = result;
  return result;
}

void _APSPriorityDispatchSourceSharedContextFinalize(uint64_t a1)
{
  int v2 = *(NSObject **)(a1 + 16);
  if (v2)
  {
    dispatch_release(v2);
    *(void *)(a1 + 16) = 0;
  }
}

uintptr_t APSPriorityDispatchSourceGetData(uint64_t a1)
{
  if (a1 && (uint64_t v1 = *(NSObject **)(*(void *)(a1 + 40) + 48)) != 0) {
    return dispatch_source_get_data(v1);
  }
  else {
    return 0;
  }
}

uint64_t APSPriorityDispatchSourceSetTimer(uint64_t a1, dispatch_time_t a2, uint64_t a3, uint64_t a4)
{
  if (!a1) {
    return 4294960591;
  }
  if (*(void *)(a1 + 16) != MEMORY[0x1E4F14490]) {
    return 4294960540;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 56));
  if (*(unsigned char *)(a1 + 88))
  {
    uint64_t v9 = 4294960573;
  }
  else
  {
    dispatch_time_t v8 = dispatch_time(a2, 0);
    *(void *)(a1 + 96) = v8;
    *(void *)(a1 + 104) = a3;
    *(void *)(a1 + 112) = a4;
    dispatch_source_set_timer(*(dispatch_source_t *)(a1 + 80), v8, a3, a4);
    uint64_t v9 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
  return v9;
}

uint64_t APSPriorityDispatchSourceSetPriority(uint64_t a1, unsigned int a2)
{
  if (a1) {
    return priorityDispatchSource_setPriority(a1, a2, 0);
  }
  else {
    return 4294960591;
  }
}

uint64_t APSPriorityDispatchSourceResume(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 56));
  if (*(unsigned char *)(a1 + 88))
  {
    uint64_t v2 = 4294960573;
  }
  else
  {
    if (*(unsigned char *)(a1 + 89))
    {
      *(unsigned char *)(a1 + 89) = 0;
      dispatch_resume(*(dispatch_object_t *)(a1 + 80));
    }
    uint64_t v2 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
  return v2;
}

uint64_t APSPriorityDispatchSourceSuspend(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 56));
  if (*(unsigned char *)(a1 + 88))
  {
    uint64_t v2 = 4294960573;
  }
  else
  {
    if (!*(unsigned char *)(a1 + 89))
    {
      *(unsigned char *)(a1 + 89) = 1;
      dispatch_suspend(*(dispatch_object_t *)(a1 + 80));
    }
    uint64_t v2 = 0;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
  return v2;
}

uint64_t APSPriorityDispatchSourceCancel(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 56));
  if (!*(unsigned char *)(a1 + 88))
  {
    atomic_store(1u, (unsigned int *)(*(void *)(a1 + 40) + 56));
    uint64_t v2 = *(NSObject **)(a1 + 80);
    if (v2)
    {
      dispatch_source_cancel(v2);
      if (*(unsigned char *)(a1 + 89))
      {
        dispatch_resume(*(dispatch_object_t *)(a1 + 80));
        *(unsigned char *)(a1 + 89) = 0;
      }
      dispatch_release(*(dispatch_object_t *)(a1 + 80));
      *(void *)(a1 + 80) = 0;
    }
    *(unsigned char *)(a1 + 88) = 1;
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 56));
  return 0;
}

uint64_t APSVersionUtilsGetShortVersionLength(uint64_t a1)
{
  if (!a1) {
    goto LABEL_9;
  }
  uint64_t v2 = 0;
  do
  {
    uint64_t v3 = v2;
    int v4 = *(char *)(a1 + v2++);
  }
  while ((v4 - 48) < 0xA);
  if (!v3) {
    goto LABEL_9;
  }
  if (v4 != 46) {
    goto LABEL_9;
  }
  uint64_t v5 = v2;
  do
  {
    uint64_t result = v5;
    int v7 = *(char *)(a1 + v5++);
  }
  while ((v7 - 48) < 0xA);
  if (result == v2) {
    goto LABEL_9;
  }
  if ((_BYTE)v7)
  {
    if (v7 != 46) {
      goto LABEL_9;
    }
    uint64_t v8 = v5;
    do
    {
      uint64_t result = v8;
      unsigned int v9 = *(char *)(a1 + v8++) - 48;
    }
    while (v9 < 0xA);
    if (result == v5)
    {
LABEL_9:
      APSLogErrorAt(0);
      if (gLogCategory_APSVersionUtils <= 90
        && (gLogCategory_APSVersionUtils != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      return 0;
    }
  }
  return result;
}

void APSGetFBOPropertyCMTime(uint64_t a1@<X0>, uint64_t a2@<X1>, int *a3@<X2>, CMTime *a4@<X8>)
{
  uint64_t v8 = MEMORY[0x1E4F1F9F8];
  *(_OWORD *)&a4->CMTimeValue value = *MEMORY[0x1E4F1F9F8];
  a4->CMTimeEpoch epoch = *(void *)(v8 + 16);
  CFTypeRef cf = 0;
  uint64_t v9 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v9) {
    uint64_t v10 = v9;
  }
  else {
    uint64_t v10 = 0;
  }
  double v11 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v10 + 48);
  if (v11)
  {
    int v12 = v11(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
    if (v12) {
      BOOL v13 = 1;
    }
    else {
      BOOL v13 = cf == 0;
    }
    if (!v13)
    {
      CFTypeID v14 = CFGetTypeID(cf);
      if (v14 == CFDictionaryGetTypeID()) {
        CMTimeMakeFromDictionary(a4, (CFDictionaryRef)cf);
      }
      int v12 = 0;
    }
    if (a3) {
      goto LABEL_13;
    }
  }
  else
  {
    int v12 = -12782;
    if (a3) {
LABEL_13:
    }
      *a3 = v12;
  }
  if (cf) {
    CFRelease(cf);
  }
}

uint64_t APSGetFBOPropertyCString(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, int *a5)
{
  CFTypeRef cf = 0;
  uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v8) {
    uint64_t v9 = v8;
  }
  else {
    uint64_t v9 = 0;
  }
  uint64_t v10 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v9 + 48);
  if (!v10)
  {
    uint64_t v13 = 0;
    int v11 = -12782;
    if (!a5) {
      goto LABEL_13;
    }
    goto LABEL_12;
  }
  int v11 = v10(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
  if (v11) {
    BOOL v12 = 1;
  }
  else {
    BOOL v12 = cf == 0;
  }
  if (!v12)
  {
    uint64_t v13 = CFGetCString();
    int v11 = 0;
    if (!a5) {
      goto LABEL_13;
    }
LABEL_12:
    *a5 = v11;
    goto LABEL_13;
  }
  uint64_t v13 = 0;
  if (a5) {
    goto LABEL_12;
  }
LABEL_13:
  if (cf) {
    CFRelease(cf);
  }
  return v13;
}

double APSGetFBOPropertyDouble(uint64_t a1, uint64_t a2, int *a3)
{
  CFTypeRef cf = 0;
  uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v6) {
    uint64_t v7 = v6;
  }
  else {
    uint64_t v7 = 0;
  }
  uint64_t v8 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v7 + 48);
  double v9 = 0.0;
  if (v8)
  {
    int v10 = v8(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
    if (v10) {
      BOOL v11 = 1;
    }
    else {
      BOOL v11 = cf == 0;
    }
    if (!v11)
    {
      CFGetDouble();
      double v9 = v12;
      int v10 = 0;
    }
    if (a3) {
      goto LABEL_11;
    }
  }
  else
  {
    int v10 = -12782;
    if (a3) {
LABEL_11:
    }
      *a3 = v10;
  }
  if (cf) {
    CFRelease(cf);
  }
  return v9;
}

uint64_t APSGetFBOPropertyInt64(uint64_t a1, uint64_t a2, int *a3)
{
  CFTypeRef cf = 0;
  uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v6) {
    uint64_t v7 = v6;
  }
  else {
    uint64_t v7 = 0;
  }
  uint64_t v8 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v7 + 48);
  if (!v8)
  {
    uint64_t v11 = 0;
    int v9 = -12782;
    if (!a3) {
      goto LABEL_13;
    }
    goto LABEL_12;
  }
  int v9 = v8(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
  if (v9) {
    BOOL v10 = 1;
  }
  else {
    BOOL v10 = cf == 0;
  }
  if (!v10)
  {
    uint64_t v11 = CFGetInt64();
    int v9 = 0;
    if (!a3) {
      goto LABEL_13;
    }
LABEL_12:
    *a3 = v9;
    goto LABEL_13;
  }
  uint64_t v11 = 0;
  if (a3) {
    goto LABEL_12;
  }
LABEL_13:
  if (cf) {
    CFRelease(cf);
  }
  return v11;
}

CFTypeRef APSIsFBOPropertyNonNull(uint64_t a1, uint64_t a2, int *a3)
{
  CFTypeRef cf = 0;
  uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v6) {
    uint64_t v7 = v6;
  }
  else {
    uint64_t v7 = 0;
  }
  uint64_t v8 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v7 + 48);
  if (!v8)
  {
    int v9 = -12782;
    if (!a3) {
      goto LABEL_9;
    }
    goto LABEL_8;
  }
  int v9 = v8(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
  if (a3) {
LABEL_8:
  }
    *a3 = v9;
LABEL_9:
  CFTypeRef result = cf;
  if (cf)
  {
    CFRelease(cf);
    return (CFTypeRef)(cf != 0);
  }
  return result;
}

BOOL APSIsFBOPropertyAvailable(uint64_t a1, uint64_t a2)
{
  CFTypeRef cf = 0;
  uint64_t v4 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v4) {
    uint64_t v5 = v4;
  }
  else {
    uint64_t v5 = 0;
  }
  uint64_t v6 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v5 + 48);
  if (v6)
  {
    int v7 = v6(a1, a2, *MEMORY[0x1E4F1CF80], &cf);
    if (cf) {
      CFRelease(cf);
    }
  }
  else
  {
    int v7 = -12782;
  }
  return v7 == 0;
}

BOOL APSIsFBOPropertyEqual(uint64_t a1, uint64_t a2, CFTypeRef a3, int *a4)
{
  CFTypeRef cf1 = 0;
  if (a1)
  {
    uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 8);
    if (v8) {
      uint64_t v9 = v8;
    }
    else {
      uint64_t v9 = 0;
    }
    BOOL v10 = *(uint64_t (**)(uint64_t, uint64_t, void, CFTypeRef *))(v9 + 48);
    if (v10)
    {
      int v11 = v10(a1, a2, *MEMORY[0x1E4F1CF80], &cf1);
      if (v11)
      {
        BOOL v12 = 0;
      }
      else
      {
        if (cf1 == a3)
        {
          BOOL v12 = 1;
        }
        else
        {
          BOOL v12 = 0;
          if (a3 && cf1) {
            BOOL v12 = CFEqual(cf1, a3) != 0;
          }
        }
        int v11 = 0;
      }
    }
    else
    {
      BOOL v12 = 0;
      int v11 = -12782;
    }
  }
  else
  {
    BOOL v12 = 0;
    int v11 = -6705;
  }
  if (a4) {
    *a4 = v11;
  }
  if (cf1) {
    CFRelease(cf1);
  }
  return v12;
}

uint64_t APSSetFBOPropertyCString(uint64_t a1, uint64_t a2, char *cStr, CFIndex numBytes)
{
  if (numBytes == -1) {
    CFStringRef v6 = CFStringCreateWithCString(0, cStr, 0x8000100u);
  }
  else {
    CFStringRef v6 = CFStringCreateWithBytes(0, (const UInt8 *)cStr, numBytes, 0x8000100u, 0);
  }
  CFStringRef v7 = v6;
  if (!v6) {
    return 4294960596;
  }
  uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v8) {
    uint64_t v9 = v8;
  }
  else {
    uint64_t v9 = 0;
  }
  BOOL v10 = *(uint64_t (**)(uint64_t, uint64_t, CFStringRef))(v9 + 56);
  if (v10) {
    uint64_t v11 = v10(a1, a2, v7);
  }
  else {
    uint64_t v11 = 4294954514;
  }
  CFRelease(v7);
  return v11;
}

uint64_t APSSetFBOPropertyData(uint64_t a1, uint64_t a2, UInt8 *bytes, CFIndex length)
{
  CFDataRef v6 = CFDataCreate(0, bytes, length);
  if (!v6) {
    return 4294960596;
  }
  CFDataRef v7 = v6;
  uint64_t v8 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v8) {
    uint64_t v9 = v8;
  }
  else {
    uint64_t v9 = 0;
  }
  BOOL v10 = *(uint64_t (**)(uint64_t, uint64_t, CFDataRef))(v9 + 56);
  if (v10) {
    uint64_t v11 = v10(a1, a2, v7);
  }
  else {
    uint64_t v11 = 4294954514;
  }
  CFRelease(v7);
  return v11;
}

uint64_t APSSetFBOPropertyDouble(uint64_t a1, uint64_t a2, double a3)
{
  double valuePtr = a3;
  CFNumberRef v5 = CFNumberCreate(0, kCFNumberDoubleType, &valuePtr);
  if (!v5) {
    return 4294960568;
  }
  CFNumberRef v6 = v5;
  uint64_t v7 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v7) {
    uint64_t v8 = v7;
  }
  else {
    uint64_t v8 = 0;
  }
  uint64_t v9 = *(uint64_t (**)(uint64_t, uint64_t, CFNumberRef))(v8 + 56);
  if (v9) {
    uint64_t v10 = v9(a1, a2, v6);
  }
  else {
    uint64_t v10 = 4294954514;
  }
  CFRelease(v6);
  return v10;
}

uint64_t APSSetFBOPropertyInt64(uint64_t a1, uint64_t a2)
{
  uint64_t Int64 = CFNumberCreateInt64();
  if (!Int64) {
    return 4294960568;
  }
  CFNumberRef v5 = (const void *)Int64;
  uint64_t v6 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v6) {
    uint64_t v7 = v6;
  }
  else {
    uint64_t v7 = 0;
  }
  uint64_t v8 = *(uint64_t (**)(uint64_t, uint64_t, const void *))(v7 + 56);
  if (v8) {
    uint64_t v9 = v8(a1, a2, v5);
  }
  else {
    uint64_t v9 = 4294954514;
  }
  CFRelease(v5);
  return v9;
}

uint64_t APSSetFBOPropertyDictionary(uint64_t a1, uint64_t a2, CFDictionaryRef theDict)
{
  if (!theDict) {
    return 4294960591;
  }
  CFDictionaryRef Copy = CFDictionaryCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], theDict);
  if (!Copy) {
    return 4294960568;
  }
  CFDictionaryRef v6 = Copy;
  uint64_t v7 = *(void *)(CMBaseObjectGetVTable() + 8);
  if (v7) {
    uint64_t v8 = v7;
  }
  else {
    uint64_t v8 = 0;
  }
  uint64_t v9 = *(uint64_t (**)(uint64_t, uint64_t, CFDictionaryRef))(v8 + 56);
  if (v9) {
    uint64_t v10 = v9(a1, a2, v6);
  }
  else {
    uint64_t v10 = 4294954514;
  }
  CFRelease(v6);
  return v10;
}

uint64_t APSRecycleBinGetTypeID()
{
  if (gAPSRecycleBinInitOnce != -1) {
    dispatch_once_f(&gAPSRecycleBinInitOnce, 0, (dispatch_function_t)_APSRecycleBinGetTypeID);
  }
  return gAPSRecycleBinTypeID;
}

uint64_t _APSRecycleBinGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSRecycleBinCFTypeID TypeID = result;
  return result;
}

void *_APSRecycleBinFinalize(void *a1)
{
  _X20 = 0;
  _X21 = 0;
  __asm { CASPA           X20, X21, X20, X21, [X8] }
  if (_X20)
  {
    do
    {
      uint64_t v9 = (void *)_X20[1];
      uint64_t v10 = (void (*)(void))a1[5];
      if (v10) {
        v10(*_X20);
      }
      free(_X20);
      _X20 = v9;
    }
    while (v9);
  }
  _X0 = 0;
  _X1 = 0;
  __asm { CASPA           X0, X1, X0, X1, [X8]; void * }
  if (result)
  {
    do
    {
      CFTypeID v14 = (void *)result[1];
      free(result);
      uint64_t result = v14;
    }
    while (v14);
  }
  BOOL v15 = (uint64_t (*)(uint64_t))a1[6];
  if (v15)
  {
    uint64_t v16 = a1[2];
    return (void *)v15(v16);
  }
  return result;
}

uint64_t APSRecycleBinCreate(long long *a1, uint64_t a2, CFTypeRef *a3)
{
  if (!a3) {
    return 4294960591;
  }
  if (gAPSRecycleBinInitOnce != -1) {
    dispatch_once_f(&gAPSRecycleBinInitOnce, 0, (dispatch_function_t)_APSRecycleBinGetTypeID);
  }
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (!Instance) {
    return 4294960568;
  }
  uint64_t v7 = Instance;
  Instance[1] = 0u;
  uint64_t v8 = Instance + 1;
  Instance[5] = 0u;
  Instance[6] = 0u;
  Instance[3] = 0u;
  Instance[4] = 0u;
  Instance[2] = 0u;
  uint64_t v9 = *((void *)Instance + 8);
  do
  {
    _X2 = 0;
    _X5 = *((void *)v8 + 7);
    __asm { CASPAL          X4, X5, X2, X3, [X9] }
    _ZF = _X4 == v9;
    uint64_t v9 = _X4;
  }
  while (!_ZF);
  uint64_t v17 = *((void *)v7 + 10);
  do
  {
    _X2 = 0;
    _X5 = *((void *)v7 + 11);
    __asm { CASPAL          X4, X5, X2, X3, [X9] }
    _ZF = _X4 == v17;
    uint64_t v17 = _X4;
  }
  while (!_ZF);
  atomic_store(0, (unint64_t *)v7 + 12);
  if (a1)
  {
    long long v21 = *a1;
    long long v22 = a1[1];
    *((void *)v8 + 4) = *((void *)a1 + 4);
    _OWORD *v8 = v21;
    v8[1] = v22;
  }
  if (a2)
  {
    if (*((void *)v7 + 3))
    {
      uint64_t v23 = 0;
      uint64_t v24 = 0;
      while (1)
      {
        int v25 = malloc_type_malloc(0x10uLL, 0xE0040CF218873uLL);
        if (!v25) {
          break;
        }
        _X22 = v25;
        uint64_t v27 = (*((uint64_t (**)(void, void *))v7 + 3))(*((void *)v7 + 2), v25);
        if (v27)
        {
          uint64_t v31 = v27;
          free(_X22);
          goto LABEL_25;
        }
        _X22[1] = v23;
        uint64_t v28 = *((void *)v7 + 8);
        do
        {
          _X3 = *((void *)v7 + 9);
          __asm { CASP            X2, X3, X22, X23, [X8] }
          _ZF = _X2 == v28;
          uint64_t v28 = _X2;
        }
        while (!_ZF);
        atomic_fetch_add_explicit((atomic_ullong *volatile)v7 + 12, 1uLL, memory_order_relaxed);
        ++v24;
        uint64_t v23 = _X22;
        if (v24 == a2)
        {
          __dmb(0xBu);
          goto LABEL_23;
        }
      }
      uint64_t v31 = 4294960568;
    }
    else
    {
      uint64_t v31 = 4294960561;
    }
  }
  else
  {
LABEL_23:
    uint64_t v31 = 0;
    *a3 = CFRetain(v7);
  }
LABEL_25:
  CFRelease(v7);
  return v31;
}

uint64_t APSRecycleBinTakeItem(uint64_t a1, void *a2)
{
  uint64_t v22 = 0;
  uint64_t v2 = 4294960591;
  if (a1 && a2)
  {
    _X4 = 0;
    _X5 = 0;
    __asm { CASP            X4, X5, X4, X5, [X8] }
    _X6 = _X4;
    while (_X6)
    {
      _X2 = _X6;
      __dmb(9u);
      _X8 = _X6[1];
      _X7 = 0;
      __asm { CASPA           X6, X7, X8, X9, [X10] }
      if (_X6 == _X2)
      {
        _X4 = 0;
        uint64_t v22 = *_X2;
        _X5 = 0;
        __asm { CASP            X4, X5, X4, X5, [X8] }
        do
        {
          _X2[1] = _X4;
          _X1 = 0;
          __asm { CASPL           X0, X1, X2, X3, [X8] }
          _ZF = _X0 == _X4;
          _X4 = _X0;
        }
        while (!_ZF);
LABEL_12:
        uint64_t v2 = 0;
        *a2 = v22;
        return v2;
      }
    }
    CFTypeRef v20 = *(uint64_t (**)(void, uint64_t *))(a1 + 24);
    if (v20)
    {
      uint64_t v2 = v20(*(void *)(a1 + 16), &v22);
      if (v2) {
        return v2;
      }
      goto LABEL_12;
    }
    return 4294960546;
  }
  return v2;
}

uint64_t APSRecycleBinAddItem(uint64_t a1, uint64_t a2)
{
  uint64_t result = 4294960591;
  if (a1)
  {
    uint64_t v4 = a2;
    if (a2)
    {
      _X0 = 0;
      _X1 = 0;
      __asm { CASP            X0, X1, X0, X1, [X8] }
      _X2 = _X0;
      while (_X2)
      {
        _X20 = _X2;
        __dmb(9u);
        _X4 = _X2[1];
        _X3 = 0;
        __asm { CASP            X2, X3, X4, X5, [X8] }
        if (_X2 == _X20) {
          goto LABEL_9;
        }
      }
      uint64_t v16 = (uint64_t *)malloc_type_malloc(0x10uLL, 0xE0040CF218873uLL);
      if (!v16) {
        return 4294960568;
      }
      _X20 = v16;
      atomic_fetch_add_explicit((atomic_ullong *volatile)(a1 + 96), 1uLL, memory_order_relaxed);
LABEL_9:
      uint64_t v17 = *(uint64_t (**)(uint64_t))(a1 + 32);
      if (v17) {
        uint64_t v4 = v17(v4);
      }
      _X0 = 0;
      *_X20 = v4;
      _X1 = 0;
      __asm { CASP            X0, X1, X0, X1, [X8] }
      do
      {
        _X20[1] = _X0;
        _X3 = 0;
        __asm { CASPL           X2, X3, X20, X21, [X8] }
        _ZF = _X2 == _X0;
        _X0 = _X2;
      }
      while (!_ZF);
      return 0;
    }
  }
  return result;
}

uint64_t APSEventRecorderGetTypeID()
{
  if (APSEventRecorderGetTypeID_once != -1) {
    dispatch_once_f(&APSEventRecorderGetTypeID_once, &APSEventRecorderGetTypeID_typeID, (dispatch_function_t)eventRecorder_registerCMClass);
  }
  return APSEventRecorderGetTypeID_typeID;
}

uint64_t eventRecorder_registerCMClass(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

uint64_t eventRecorder_finalize(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 24);
  if (v2)
  {
    CFRelease(v2);
    *(void *)(a1 + 24) = 0;
  }
  free(*(void **)(a1 + 112));
  uint64_t v3 = *(const void **)(a1 + 32);
  if (v3)
  {
    CFRelease(v3);
    *(void *)(a1 + 32) = 0;
  }

  return pthread_mutex_destroy((pthread_mutex_t *)(a1 + 40));
}

uint64_t APSEventRecorderCreate(int a1, const void *a2, unsigned int a3, int *a4, uint64_t a5, uint64_t *a6)
{
  if (!a3 || !a6)
  {
    APSLogErrorAt(0);
    return 4294895135;
  }
  if (APSEventRecorderGetTypeID_once != -1) {
    dispatch_once_f(&APSEventRecorderGetTypeID_once, &APSEventRecorderGetTypeID_typeID, (dispatch_function_t)eventRecorder_registerCMClass);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    uint64_t v19 = 4294895136;
    APSLogErrorAt(0);
    return v19;
  }
  uint64_t v13 = Instance;
  *(void *)(Instance + 112) = 0;
  *(_OWORD *)(Instance + 80) = 0u;
  *(_OWORD *)(Instance + 96) = 0u;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  uint64_t Mutable = pthread_mutex_init((pthread_mutex_t *)(Instance + 40), 0);
  if (Mutable)
  {
    uint64_t v19 = Mutable;
LABEL_28:
    APSLogErrorAt(Mutable);
    CFRelease((CFTypeRef)v13);
    return v19;
  }
  uint64_t v15 = a3;
  uint64_t Mutable = (uint64_t)malloc_type_calloc(a3, 0x10uLL, 0x1000040D9A13B51uLL);
  *(void *)(v13 + 112) = Mutable;
  if (!Mutable)
  {
    uint64_t v19 = 4294895136;
    goto LABEL_28;
  }
  uint64_t Mutable = (uint64_t)CFArrayCreateMutable(0, 0, MEMORY[0x1E4F1D510]);
  *(void *)(v13 + 32) = Mutable;
  if (!Mutable)
  {
    uint64_t v19 = 4294895136;
    goto LABEL_28;
  }
  *(_DWORD *)(v13 + 104) = a3;
  *(_DWORD *)(v13 + 16) = a1;
  if (a2) {
    CFTypeRef v16 = CFRetain(a2);
  }
  else {
    CFTypeRef v16 = 0;
  }
  *(void *)(v13 + 24) = v16;
  if (a4)
  {
    uint64_t v17 = (_DWORD *)(*(void *)(v13 + 112) + 8);
    do
    {
      int v18 = *a4++;
      _DWORD *v17 = v18;
      v17 += 4;
      --v15;
    }
    while (v15);
  }
  if (a5) {
    eventRecorder_addChildToParent(a5, (const void *)v13);
  }
  if (gLogCategory_APSEventRecorder <= 30
    && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v19 = 0;
  *a6 = v13;
  return v19;
}

uint64_t eventRecorder_addChildToParent(uint64_t a1, const void *a2)
{
  uint64_t result = 4294895135;
  if (a1)
  {
    if (a2)
    {
      pthread_mutex_lock((pthread_mutex_t *)(a1 + 40));
      CFArrayAppendValue(*(CFMutableArrayRef *)(a1 + 32), a2);
      pthread_mutex_unlock((pthread_mutex_t *)(a1 + 40));
      return 0;
    }
  }
  return result;
}

uint64_t APSEventRecorderGetType(uint64_t result)
{
  if (result) {
    return *(unsigned int *)(result + 16);
  }
  return result;
}

uint64_t APSEventRecorderCopyName(uint64_t result, void *a2)
{
  if (result)
  {
    if (a2)
    {
      uint64_t v3 = *(const void **)(result + 24);
      if (v3) {
        CFTypeRef v4 = CFRetain(v3);
      }
      else {
        CFTypeRef v4 = 0;
      }
      uint64_t result = 0;
      *a2 = v4;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294895135;
    }
  }
  return result;
}

uint64_t APSEventRecorderRecordEvent(uint64_t a1, int a2)
{
  double Current = CFAbsoluteTimeGetCurrent();

  return APSEventRecorderRecordEventWithFlagsAtTime(a1, a2, 0, Current);
}

uint64_t APSEventRecorderRecordEventWithFlags(uint64_t a1, int a2, char a3)
{
  double Current = CFAbsoluteTimeGetCurrent();

  return APSEventRecorderRecordEventWithFlagsAtTime(a1, a2, a3, Current);
}

double APSEventRecorderGetEventTime(uint64_t a1, int a2)
{
  double result = 0.0;
  if (a1 && (a2 & 0xFFFF000) == *(_DWORD *)(a1 + 16) && (a2 & 0xFFFu) < *(_DWORD *)(a1 + 104)) {
    return *(double *)(*(void *)(a1 + 112) + 16 * (a2 & 0xFFF));
  }
  return result;
}

CFTypeRef eventRecorder_copyChildEventRecorderOfTypeByDeepSearch(uint64_t a1, uint64_t a2)
{
  CFTypeRef v4 = (pthread_mutex_t *)(a1 + 40);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 40));
  CFArrayRef Copy = CFArrayCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], *(CFArrayRef *)(a1 + 32));
  pthread_mutex_unlock(v4);
  if (Copy)
  {
    CFIndex Count = CFArrayGetCount(Copy);
    if (gLogCategory_APSEventRecorder <= 10
      && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (Count >= 1)
    {
      CFIndex v7 = 0;
      while (1)
      {
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(Copy, v7);
        if (gLogCategory_APSEventRecorder <= 10
          && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
        {
          break;
        }
        if (ValueAtIndex) {
          goto LABEL_13;
        }
        int v9 = 0;
LABEL_14:
        if (v9 == a2) {
          CFTypeRef v10 = CFRetain(ValueAtIndex);
        }
        else {
          CFTypeRef v10 = (CFTypeRef)eventRecorder_copyChildEventRecorderOfTypeByDeepSearch(ValueAtIndex, a2);
        }
        CFTypeRef v11 = v10;
        if (v10) {
          goto LABEL_22;
        }
        if (Count == ++v7) {
          goto LABEL_21;
        }
      }
      LogPrintF();
LABEL_13:
      int v9 = ValueAtIndex[4];
      goto LABEL_14;
    }
LABEL_21:
    CFTypeRef v11 = 0;
LABEL_22:
    CFRelease(Copy);
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
  return v11;
}

uint64_t APSEventRecorderResetEvent(uint64_t result, int a2)
{
  if (result && (a2 & 0xFFFF000) == *(_DWORD *)(result + 16) && (a2 & 0xFFFu) < *(_DWORD *)(result + 104)) {
    *(void *)(*(void *)(result + 112) + 16 * (a2 & 0xFFF)) = 0;
  }
  return result;
}

uint64_t APSEventRecorderReset(uint64_t result)
{
  if (result)
  {
    uint64_t v1 = result;
    uint64_t v2 = *(unsigned int *)(result + 104);
    if (v2)
    {
      uint64_t v3 = *(void **)(result + 112);
      do
      {
        *uint64_t v3 = 0;
        v3 += 2;
        --v2;
      }
      while (v2);
    }
    pthread_mutex_lock((pthread_mutex_t *)(result + 40));
    CFArrayRemoveAllValues(*(CFMutableArrayRef *)(v1 + 32));
    return pthread_mutex_unlock((pthread_mutex_t *)(v1 + 40));
  }
  return result;
}

unint64_t APSEventRecorderGetTimeBetweenEventsInMilliSecond(uint64_t a1, int a2, uint64_t a3, int a4)
{
  uint64_t v4 = 0;
  if (a1 && a3)
  {
    double v5 = 0.0;
    double v6 = 0.0;
    if ((a2 & 0xFFFF000) == *(_DWORD *)(a1 + 16) && (a2 & 0xFFFu) < *(_DWORD *)(a1 + 104)) {
      double v6 = *(double *)(*(void *)(a1 + 112) + 16 * (a2 & 0xFFF));
    }
    if ((a4 & 0xFFFF000) == *(_DWORD *)(a3 + 16) && (a4 & 0xFFFu) < *(_DWORD *)(a3 + 104)) {
      double v5 = *(double *)(*(void *)(a3 + 112) + 16 * (a4 & 0xFFF));
    }
    if (v5 < v6)
    {
      APSLogErrorAt(0);
      return 0;
    }
    else
    {
      return (unint64_t)((v5 - v6) * 1000.0);
    }
  }
  return v4;
}

uint64_t APSEventRecorderGetTimeBetweenEventsInMilliSecondRecursive(const void *a1, int a2, const void *a3, int a4)
{
  uint64_t v5 = 0;
  APSEventRecorderGetTimeBetweenEventsInMilliSecondRecursiveEx(a1, a2, a3, a4, 0, &v5);
  return v5;
}

uint64_t APSEventRecorderGetTimeBetweenEventsInMilliSecondRecursiveEx(const void *a1, int a2, const void *a3, int a4, int a5, void *a6)
{
  uint64_t result = 0;
  uint64_t v14 = 0;
  if (a1)
  {
    if (a3)
    {
      double EventTimeRecursive = APSEventRecorderGetEventTimeRecursive(a1, a2, (int *)&v14 + 1);
      double v13 = APSEventRecorderGetEventTimeRecursive(a3, a4, (int *)&v14);
      if (a5 != 1 || (uint64_t result = 4294895134, !v14) && EventTimeRecursive != 0.0 && v13 != 0.0)
      {
        if (v13 < EventTimeRecursive)
        {
          APSLogErrorAt(0);
          return 4294895135;
        }
        else
        {
          uint64_t result = 0;
          *a6 = (unint64_t)((v13 - EventTimeRecursive) * 1000.0);
        }
      }
    }
  }
  return result;
}

unint64_t APSEventRecorderGetTimeBetweenCFAbsoluteTimeAndEventInMilliSecond(unint64_t result, int a2, double a3)
{
  if (result)
  {
    double v3 = 0.0;
    if ((a2 & 0xFFFF000) == *(_DWORD *)(result + 16) && (a2 & 0xFFFu) < *(_DWORD *)(result + 104)) {
      double v3 = *(double *)(*(void *)(result + 112) + 16 * (a2 & 0xFFF));
    }
    if (v3 < a3)
    {
      APSLogErrorAt(0);
      return 0;
    }
    else
    {
      return (unint64_t)((v3 - a3) * 1000.0);
    }
  }
  return result;
}

unint64_t APSEventRecorderGetTimeSinceEventInMilliSecond(uint64_t a1, int a2)
{
  double Current = CFAbsoluteTimeGetCurrent();
  if (!a1) {
    return 0;
  }
  double v5 = 0.0;
  if ((a2 & 0xFFFF000) == *(_DWORD *)(a1 + 16) && (a2 & 0xFFFu) < *(_DWORD *)(a1 + 104)) {
    double v5 = *(double *)(*(void *)(a1 + 112) + 16 * (a2 & 0xFFF));
  }
  return (unint64_t)((Current - v5) * 1000.0);
}

unint64_t APSEventRecorderGetTimeSinceEventInMilliSecondRecursive(const void *a1, int a2)
{
  double Current = CFAbsoluteTimeGetCurrent();
  if (a1) {
    return (unint64_t)((Current - APSEventRecorderGetEventTimeRecursive(a1, a2, 0)) * 1000.0);
  }
  else {
    return 0;
  }
}

uint64_t APSEventRecorderAddSignPostForEvent(uint64_t result, int a2, int a3)
{
  if (result)
  {
    uint64_t v3 = result;
    uint64_t result = 4294895134;
    if ((a2 & 0xFFFF000) == *(_DWORD *)(v3 + 16) && (a2 & 0xFFFu) < *(_DWORD *)(v3 + 104))
    {
      uint64_t result = 0;
      *(_DWORD *)(*(void *)(v3 + 112) + 16 * (a2 & 0xFFF) + 8) = a3;
    }
  }
  return result;
}

CFStringRef APSEventRecorderCreateStringWithEventRecorderTime(CFAbsoluteTime a1)
{
  CFAllocatorRef v2 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (eventRecorder_getSharedDateFormatter_once != -1) {
    dispatch_once_f(&eventRecorder_getSharedDateFormatter_once, &eventRecorder_getSharedDateFormatter_dateFormatter, (dispatch_function_t)eventRecorder_createSharedDateFormatter);
  }
  uint64_t v3 = (__CFDateFormatter *)eventRecorder_getSharedDateFormatter_dateFormatter;

  return CFDateFormatterCreateStringWithAbsoluteTime(v2, v3, a1);
}

void eventRecorder_createSharedDateFormatter(__CFDateFormatter **a1)
{
  CFLocaleRef v2 = CFLocaleCopyCurrent();
  uint64_t v3 = CFDateFormatterCreate(0, v2, kCFDateFormatterNoStyle, kCFDateFormatterNoStyle);
  CFDateFormatterSetFormat(v3, @"MMMM d, HH:mm:ss.SSS");
  if (v2) {
    CFRelease(v2);
  }
  *a1 = v3;
}

uint64_t APSEventRecorderCopyChildEventRecorderOfType(uint64_t a1, uint64_t a2, void *a3)
{
  uint64_t v3 = 4294895133;
  if (a3)
  {
    CFTypeRef v5 = eventRecorder_copyChildEventRecorderOfTypeByDeepSearch(a1, a2);
    if (v5)
    {
      uint64_t v3 = 0;
      *a3 = v5;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294895135;
  }
  return v3;
}

uint64_t APSEventRecorderRemoveChildEventRecorderFromParent(uint64_t a1, uint64_t a2)
{
  uint64_t result = 4294895135;
  if (a1)
  {
    if (a2)
    {
      pthread_mutex_lock((pthread_mutex_t *)(a1 + 40));
      FigCFArrayRemoveLastElementOfValue();
      pthread_mutex_unlock((pthread_mutex_t *)(a1 + 40));
      return 0;
    }
  }
  return result;
}

uint64_t eventRecorder_applyForEachMatchingChildEventRecorder(uint64_t a1)
{
  CFLocaleRef v2 = (pthread_mutex_t *)(a1 + 40);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 40));
  CFAllocatorRef v3 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFArrayRef Copy = CFArrayCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], *(CFArrayRef *)(a1 + 32));
  pthread_mutex_unlock(v2);
  if (Copy)
  {
    CFIndex Count = CFArrayGetCount(Copy);
    pthread_mutex_lock(v2);
    CFArrayRef v6 = CFArrayCreateCopy(v3, *(CFArrayRef *)(a1 + 32));
    pthread_mutex_unlock(v2);
    if (gLogCategory_APSEventRecorder <= 50
      && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    if (*(_DWORD *)(a1 + 104))
    {
      uint64_t v7 = 0;
      unint64_t v8 = 0;
      do
      {
        if (*(double *)(*(void *)(a1 + 112) + v7) != 0.0
          && gLogCategory_APSEventRecorder <= 50
          && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        ++v8;
        v7 += 16;
      }
      while (v8 < *(unsigned int *)(a1 + 104));
    }
    if (v6)
    {
      CFIndex v9 = CFArrayGetCount(v6);
      if (v9 >= 1)
      {
        CFIndex v10 = v9;
        for (CFIndex i = 0; i != v10; ++i)
        {
          CFArrayGetValueAtIndex(v6, i);
          if (gLogCategory_APSEventRecorder <= 50
            && (gLogCategory_APSEventRecorder != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
        }
      }
      CFRelease(v6);
    }
    else
    {
      APSLogErrorAt(0);
    }
    if (Count >= 1)
    {
      for (CFIndex j = 0; j != Count; ++j)
      {
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(Copy, j);
        eventRecorder_applyForEachMatchingChildEventRecorder(ValueAtIndex);
      }
    }
    CFRelease(Copy);
    return 4294895133;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294895136;
  }
}

uint64_t APSRTCReportingAgentGetTypeID()
{
  if (APSRTCReportingAgentGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSRTCReportingAgentGetTypeID_sInitOnce, &APSRTCReportingAgentGetTypeID_sTypeID, (dispatch_function_t)reportingAgent_getTypeID);
  }
  return APSRTCReportingAgentGetTypeID_sTypeID;
}

uint64_t reportingAgent_getTypeID(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

__CFString *reportingAgent_CopyDebugDescription(uint64_t a1)
{
  uint64_t Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFAllocatorRef v3 = Mutable;
  if (Mutable) {
    CFStringAppendFormat(Mutable, 0, @"<APSRTCReportingAgent %p>", a1);
  }
  else {
    APSLogErrorAt(0);
  }
  return v3;
}

void reportingAgent_Finalize(void *a1)
{
  if (gLogCategory_APSRTCReportingAgent <= 40
    && (gLogCategory_APSRTCReportingAgent != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFLocaleRef v2 = (const void *)a1[7];
  if (v2)
  {
    CFRelease(v2);
    a1[7] = 0;
  }
  CFAllocatorRef v3 = (const void *)a1[10];
  if (v3)
  {
    CFRelease(v3);
    a1[10] = 0;
  }
  uint64_t v4 = (const void *)a1[5];
  if (v4)
  {
    CFRelease(v4);
    a1[5] = 0;
  }
  CFTypeRef v5 = (const void *)a1[4];
  if (v5)
  {
    CFRelease(v5);
    a1[4] = 0;
  }
  CFArrayRef v6 = (const void *)a1[3];
  if (v6)
  {
    CFRelease(v6);
    a1[3] = 0;
  }
  uint64_t v7 = a1[2];
  if (v7)
  {
    dispatch_release(v7);
    a1[2] = 0;
  }
}

uint64_t APSRTCReportingAgentCreate(const void *a1, __CFString *a2, void *a3)
{
  uint64_t v3 = 72300;
  if (!a1 || !a3)
  {
    APSLogErrorAt(0);
    return 72303;
  }
  CFAllocatorRef v7 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (APSRTCReportingAgentGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSRTCReportingAgentGetTypeID_sInitOnce, &APSRTCReportingAgentGetTypeID_sTypeID, (dispatch_function_t)reportingAgent_getTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return v3;
  }
  CFIndex v9 = (void *)Instance;
  *(void *)(Instance + 80) = 0;
  *(_OWORD *)(Instance + 48) = 0u;
  *(_OWORD *)(Instance + 64) = 0u;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  dispatch_queue_t v10 = dispatch_queue_create("APSRTCReportingAgentQueue", 0);
  _OWORD v9[2] = v10;
  if (v10)
  {
    if (a2) {
      CFTypeRef v11 = a2;
    }
    else {
      CFTypeRef v11 = @"Default";
    }
    v9[5] = CFRetain(v11);
    long long v9[4] = CFRetain(a1);
    void v9[8] = mach_absolute_time();
    CFUUIDRef v12 = CFUUIDCreate(v7);
    if (v12)
    {
      CFUUIDRef v13 = v12;
      CFStringRef v14 = CFUUIDCreateString(v7, v12);
      void v9[3] = v14;
      if (v14)
      {
        uint64_t v3 = 0;
        *a3 = v9;
      }
      else
      {
        APSLogErrorAt(0);
        CFRelease(v9);
        uint64_t v3 = 4294960568;
      }
      CFUUIDRef v15 = v13;
      goto LABEL_14;
    }
    uint64_t v3 = 4294960568;
  }
  APSLogErrorAt(0);
  CFUUIDRef v15 = (const __CFUUID *)v9;
LABEL_14:
  CFRelease(v15);
  return v3;
}

void APSRTCReportingAgentSendMediaEvent(uint64_t a1, const __CFDictionary *cf, const void *a3, int a4)
{
  if (!a1 || !cf && !a4) {
    return;
  }
  if (cf && (CFTypeID v8 = CFGetTypeID(cf), v8 == CFDictionaryGetTypeID()))
  {
    CFStringRef Value = (const __CFString *)CFDictionaryGetValue(cf, @"title");
    if (!Value)
    {
      dispatch_queue_t v10 = (const void *)getkMRMediaRemoteNowPlayingInfoTitle();
      CFStringRef Value = (const __CFString *)CFDictionaryGetValue(cf, v10);
    }
    CFTypeRef v11 = (const void *)getkMRMediaRemoteNowPlayingInfoClientPropertiesData();
    CFUUIDRef v12 = CFDictionaryGetValue(cf, v11);
    if (v12)
    {
      uint64_t v13 = (uint64_t)v12;
      CFTypeID v14 = CFGetTypeID(v12);
      if (v14 == CFDataGetTypeID())
      {
        uint64_t v15 = softLinkMRNowPlayingClientCreateFromExternalRepresentation(v13);
        if (v15)
        {
          CFTypeRef v16 = (const void *)v15;
          uint64_t v17 = *(const void **)(a1 + 80);
          DisplayName = (const void *)softLinkMRNowPlayingClientGetDisplayName(v15);
          *(void *)(a1 + 80) = DisplayName;
          if (DisplayName) {
            CFRetain(DisplayName);
          }
          if (v17) {
            CFRelease(v17);
          }
          CFRelease(v16);
        }
      }
    }
    if (a4) {
      goto LABEL_20;
    }
  }
  else
  {
    CFStringRef Value = 0;
    if (a4) {
      goto LABEL_20;
    }
  }
  if (!Value) {
    return;
  }
LABEL_20:
  if (!a4)
  {
    CFStringRef v21 = *(const __CFString **)(a1 + 56);
    if (!v21 || CFEqual(Value, v21))
    {
      CFMutableDictionaryRef v20 = 0;
LABEL_32:
      if (!*(void *)(a1 + 64)) {
        *(void *)(a1 + 64) = mach_absolute_time();
      }
      uint64_t v24 = *(const void **)(a1 + 56);
      *(void *)(a1 + 56) = Value;
      if (Value) {
        CFRetain(Value);
      }
      if (v24) {
        CFRelease(v24);
      }
      if (v20) {
        CFRelease(v20);
      }
      return;
    }
  }
  CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (Mutable)
  {
    CFMutableDictionaryRef v20 = Mutable;
    if (gLogCategory_APSRTCReportingAgent <= 40
      && (gLogCategory_APSRTCReportingAgent != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    FigCFDictionarySetInt32();
    mach_absolute_time();
    UpTicksToSeconds();
    FigCFDictionarySetInt64();
    uint64_t v22 = *(const void **)(a1 + 80);
    if (v22) {
      CFDictionarySetValue(v20, @"clientDisplayName", v22);
    }
    CFDictionarySetValue(v20, @"rtcAgentID", *(const void **)(a1 + 24));
    CFDictionarySetValue(v20, @"sessionType", a3);
    CFRetain((CFTypeRef)a1);
    CFRetain(v20);
    uint64_t v23 = *(NSObject **)(a1 + 16);
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 3221225472;
    block[2] = __APSRTCReportingAgentSendMediaEvent_block_invoke;
    block[3] = &__block_descriptor_48_e5_v8__0l;
    void block[4] = a1;
    void block[5] = v20;
    dispatch_async(v23, block);
    ++*(_DWORD *)(a1 + 72);
    *(void *)(a1 + 64) = mach_absolute_time();
    goto LABEL_32;
  }

  APSLogErrorAt(0);
}

void __APSRTCReportingAgentSendMediaEvent_block_invoke(uint64_t a1)
{
  reportingAgent_SendReportToRTC(*(void *)(a1 + 32), 2, *(void *)(a1 + 40));
  CFLocaleRef v2 = *(const void **)(a1 + 40);
  if (v2) {
    CFRelease(v2);
  }
  uint64_t v3 = *(const void **)(a1 + 32);
  if (v3)
  {
    CFRelease(v3);
  }
}

void reportingAgent_SendReportToRTC(uint64_t a1, __int16 a2, uint64_t a3)
{
  CFTypeRef cf = 0;
  if (a1)
  {
    uint64_t v5 = APSRTCReportingCreateOrCopy(*(void *)(a1 + 32), *(void *)(a1 + 40), 0, &cf, 0);
    if (v5)
    {
      APSLogErrorAt(v5);
    }
    else
    {
      if (gLogCategory_APSRTCReportingAgent <= 40
        && (gLogCategory_APSRTCReportingAgent != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      APSRTCReportingSendMsg((uint64_t)cf, a2, 1, a3);
    }
    if (cf) {
      CFRelease(cf);
    }
  }
}

uint64_t initMRNowPlayingClientGetDisplayName(uint64_t a1)
{
  if (MediaRemoteLibrary_sOnce != -1) {
    dispatch_once(&MediaRemoteLibrary_sOnce, &__block_literal_global_2520);
  }
  CFLocaleRef v2 = (uint64_t (*)())dlsym((void *)MediaRemoteLibrary_sLib, "MRNowPlayingClientGetDisplayName");
  softLinkMRNowPlayingClientGetDisplayName = v2;

  return ((uint64_t (*)(uint64_t))v2)(a1);
}

void *__MediaRemoteLibrary_block_invoke()
{
  uint64_t result = dlopen("/System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote", 2);
  MediaRemoteLibrary_sLib = (uint64_t)result;
  return result;
}

uint64_t initMRNowPlayingClientCreateFromExternalRepresentation(uint64_t a1)
{
  if (MediaRemoteLibrary_sOnce != -1) {
    dispatch_once(&MediaRemoteLibrary_sOnce, &__block_literal_global_2520);
  }
  CFLocaleRef v2 = (uint64_t (*)())dlsym((void *)MediaRemoteLibrary_sLib, "MRNowPlayingClientCreateFromExternalRepresentation");
  softLinkMRNowPlayingClientCreateFromExternalRepresentatiouint64_t n = v2;

  return ((uint64_t (*)(uint64_t))v2)(a1);
}

uint64_t initValkMRMediaRemoteNowPlayingInfoClientPropertiesData()
{
  if (MediaRemoteLibrary_sOnce != -1) {
    dispatch_once(&MediaRemoteLibrary_sOnce, &__block_literal_global_2520);
  }
  double v0 = (uint64_t *)dlsym((void *)MediaRemoteLibrary_sLib, "kMRMediaRemoteNowPlayingInfoClientPropertiesData");
  if (v0)
  {
    uint64_t result = *v0;
    constantValkMRMediaRemoteNowPlayingInfoClientPropertiesData = result;
  }
  else
  {
    uint64_t result = constantValkMRMediaRemoteNowPlayingInfoClientPropertiesData;
  }
  getkMRMediaRemoteNowPlayingInfoClientPropertiesData = kMRMediaRemoteNowPlayingInfoClientPropertiesDataFunction;
  return result;
}

uint64_t kMRMediaRemoteNowPlayingInfoClientPropertiesDataFunction()
{
  return constantValkMRMediaRemoteNowPlayingInfoClientPropertiesData;
}

uint64_t initValkMRMediaRemoteNowPlayingInfoTitle()
{
  if (MediaRemoteLibrary_sOnce != -1) {
    dispatch_once(&MediaRemoteLibrary_sOnce, &__block_literal_global_2520);
  }
  double v0 = (uint64_t *)dlsym((void *)MediaRemoteLibrary_sLib, "kMRMediaRemoteNowPlayingInfoTitle");
  if (v0)
  {
    uint64_t result = *v0;
    constantValkMRMediaRemoteNowPlayingInfoTitle = result;
  }
  else
  {
    uint64_t result = constantValkMRMediaRemoteNowPlayingInfoTitle;
  }
  getkMRMediaRemoteNowPlayingInfoTitle = kMRMediaRemoteNowPlayingInfoTitleFunction;
  return result;
}

uint64_t kMRMediaRemoteNowPlayingInfoTitleFunction()
{
  return constantValkMRMediaRemoteNowPlayingInfoTitle;
}

void APSRTCReportingAgentSendEvent(uint64_t a1, __int16 a2, const __CFDictionary *a3)
{
  if (a1)
  {
    CFMutableDictionaryRef MutableCopy = (__CFDictionary *)FigCFDictionaryCreateMutableCopy();
    if (MutableCopy)
    {
      CFAllocatorRef v7 = MutableCopy;
      CFTypeID v8 = *(const void **)(a1 + 80);
      if (v8) {
        CFDictionarySetValue(MutableCopy, @"clientDisplayName", v8);
      }
      CFStringRef v9 = (const __CFString *)CFPreferencesCopyAppValue(@"rtcUserPrefValue1", @"com.apple.airplay");
      CFStringRef v10 = v9;
      if (v9 && CFStringGetLength(v9)) {
        CFDictionarySetValue(v7, @"rtcUserPrefValue1", v10);
      }
      CFDictionarySetValue(v7, @"rtcAgentID", *(const void **)(a1 + 24));
      CFStringRef Value = (const __CFString *)CFDictionaryGetValue(a3, @"sessionType");
      if (Value)
      {
        CFStringRef v12 = Value;
        if (CFEqual(Value, @"AudioBuffered")
          || CFEqual(v12, @"AudioRealTime"))
        {
          FigCFDictionarySetInt64();
        }
      }
      CFRetain((CFTypeRef)a1);
      CFRetain(v7);
      uint64_t v13 = *(NSObject **)(a1 + 16);
      block[0] = MEMORY[0x1E4F143A8];
      block[1] = 3221225472;
      block[2] = __APSRTCReportingAgentSendEvent_block_invoke;
      block[3] = &__block_descriptor_50_e5_v8__0l;
      __int16 v15 = a2;
      void block[4] = v7;
      void block[5] = a1;
      dispatch_async(v13, block);
      CFRelease(v7);
      if (v10) {
        CFRelease(v10);
      }
    }
    else
    {
      APSLogErrorAt(0);
    }
  }
}

void __APSRTCReportingAgentSendEvent_block_invoke(uint64_t a1)
{
  int v2 = *(unsigned __int16 *)(a1 + 48);
  if (v2 == 150 || v2 == 200)
  {
    FigCFDictionarySetInt32();
    uint64_t v3 = *(void *)(a1 + 40);
    ++*(_DWORD *)(v3 + 48);
    LOWORD(v2) = *(_WORD *)(a1 + 48);
  }
  else
  {
    uint64_t v3 = *(void *)(a1 + 40);
  }
  reportingAgent_SendReportToRTC(v3, v2, *(void *)(a1 + 32));
  uint64_t v4 = *(const void **)(a1 + 32);
  if (v4) {
    CFRelease(v4);
  }
  uint64_t v5 = *(const void **)(a1 + 40);
  if (v5)
  {
    CFRelease(v5);
  }
}

void APSRTCReportingAgentSendOfflineEvent(void *a1, CFDictionaryRef theDict)
{
  if (!a1) {
    return;
  }
  if (!theDict)
  {
LABEL_16:
    APSLogErrorAt(0);
    return;
  }
  CFDictionaryGetValue(theDict, @"_sender");
  if (FigCFEqual())
  {
    CFRetain(a1);
    CFRetain(theDict);
    uint64_t v4 = a1[2];
    block[0] = MEMORY[0x1E4F143A8];
    block[1] = 3221225472;
    block[2] = __APSRTCReportingAgentSendOfflineEvent_block_invoke;
    block[3] = &__block_descriptor_48_e5_v8__0l;
    void block[4] = theDict;
    void block[5] = a1;
    dispatch_async(v4, block);
    return;
  }
  unsigned __int16 Int64Ranged = CFDictionaryGetInt64Ranged();
  if (Int64Ranged - 7000 <= 0x63)
  {
    CFMutableDictionaryRef MutableCopy = (__CFDictionary *)FigCFDictionaryCreateMutableCopy();
    if (MutableCopy)
    {
      CFDictionaryRef v7 = MutableCopy;
      CFDictionarySetValue(MutableCopy, @"receiverSuppliedInfoSource", @"ThirdPartyTVFamily");
      APSRTCReportingAgentSendEvent((uint64_t)a1, Int64Ranged, v7);
      CFRelease(v7);
      return;
    }
    goto LABEL_16;
  }
  if (gLogCategory_APSRTCReportingAgent <= 60
    && (gLogCategory_APSRTCReportingAgent != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
}

void __APSRTCReportingAgentSendOfflineEvent_block_invoke(uint64_t a1)
{
  uint64_t v2 = FigReportingAgentOfflineAirPlayCreate();
  if (v2) {
    APSLogErrorAt(v2);
  }
  else {
    FigReportingAgentOfflineAirPlayIssueReportingEvent();
  }
  uint64_t v3 = *(const void **)(a1 + 32);
  if (v3) {
    CFRelease(v3);
  }
  uint64_t v4 = *(const void **)(a1 + 40);
  if (v4) {
    CFRelease(v4);
  }
}

uint64_t APSAllocatorGetDefaultAirPlayMallocZone()
{
  if (APSAllocatorGetDefaultAirPlayMallocZone_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZone_once, &__block_literal_global_2565);
  }
  return APSAllocatorGetDefaultAirPlayMallocZone_mallocZone;
}

void __APSAllocatorGetDefaultAirPlayMallocZone_block_invoke()
{
  zone = malloc_create_zone(0, 0);
  APSAllocatorGetDefaultAirPlayMallocZone_mallocZone = (uint64_t)zone;

  malloc_set_zone_name(zone, "AirPlay");
}

CFAllocatorRef APSAllocatorCreateMallocZoneCFAllocator(void *a1)
{
  context.versiouint64_t n = 0;
  context.info = a1;
  memset(&context.retain, 0, 24);
  context.allocate = (CFAllocatorAllocateCallBack)APSAllocatorMallocZoneCFAllocate;
  context.reallocate = (CFAllocatorReallocateCallBack)APSAllocatorMallocZoneCFReallocate;
  context.deallocate = (CFAllocatorDeallocateCallBack)APSAllocatorMallocZoneCFDeallocate;
  context.preferredSize = 0;
  return CFAllocatorCreate(0, &context);
}

void APSAllocatorMallocZoneCFDeallocate(void *ptr, malloc_zone_t *zone)
{
}

void *APSAllocatorMallocZoneCFReallocate(void *ptr, size_t size, int a3, malloc_zone_t *zone)
{
  return malloc_type_zone_realloc(zone, ptr, size, 0x72090E3uLL);
}

void *APSAllocatorMallocZoneCFAllocate(size_t size, int a2, malloc_zone_t *zone)
{
  return malloc_type_zone_malloc(zone, size, 0x8F1D0958uLL);
}

uint64_t APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator()
{
  if (APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_once, &__block_literal_global_4);
  }
  return APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_allocator;
}

CFAllocatorRef __APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_block_invoke()
{
  if (APSAllocatorGetDefaultAirPlayMallocZone_once != -1) {
    dispatch_once(&APSAllocatorGetDefaultAirPlayMallocZone_once, &__block_literal_global_2565);
  }
  context.versiouint64_t n = 0;
  context.info = (void *)APSAllocatorGetDefaultAirPlayMallocZone_mallocZone;
  memset(&context.retain, 0, 24);
  context.allocate = (CFAllocatorAllocateCallBack)APSAllocatorMallocZoneCFAllocate;
  context.reallocate = (CFAllocatorReallocateCallBack)APSAllocatorMallocZoneCFReallocate;
  context.deallocate = (CFAllocatorDeallocateCallBack)APSAllocatorMallocZoneCFDeallocate;
  context.preferredSize = 0;
  CFAllocatorRef result = CFAllocatorCreate(0, &context);
  APSAllocatorGetDefaultAirPlayMallocZoneCFAllocator_CFAllocatorRef allocator = (uint64_t)result;
  return result;
}

uint64_t APSLatencyOffsetStepperGetTypeID()
{
  if (APSLatencyOffsetStepperGetTypeID_once != -1) {
    dispatch_once(&APSLatencyOffsetStepperGetTypeID_once, &__block_literal_global_2575);
  }
  return APSLatencyOffsetStepperGetTypeID_typeID;
}

uint64_t __APSLatencyOffsetStepperGetTypeID_block_invoke()
{
  uint64_t result = _CFRuntimeRegisterClass();
  APSLatencyOffsetStepperGetTypeID_typeID = result;
  return result;
}

void latencyStepper_Finalize(uint64_t a1)
{
  uint64_t v2 = *(const void **)(a1 + 16);
  if (v2) {
    CFRelease(v2);
  }
  uint64_t v3 = *(NSObject **)(a1 + 48);
  if (v3)
  {
    if (!*(unsigned char *)(a1 + 56))
    {
      dispatch_resume(v3);
      uint64_t v3 = *(NSObject **)(a1 + 48);
    }
    dispatch_source_cancel(v3);
    uint64_t v4 = *(NSObject **)(a1 + 48);
    dispatch_release(v4);
  }
}

uint64_t APSLatencyOffsetStepperCreate(float a1, uint64_t a2, const void *a3, void *a4)
{
  if (gLogCategory_APSLatencyOffsetStepper <= 50
    && (gLogCategory_APSLatencyOffsetStepper != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (!a3 || a1 <= 0.0 || !a4)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (APSLatencyOffsetStepperGetTypeID_once != -1) {
    dispatch_once(&APSLatencyOffsetStepperGetTypeID_once, &__block_literal_global_2575);
  }
  uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
  if (!Instance)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  CFTypeID v8 = Instance;
  Instance[2] = 0u;
  Instance[3] = 0u;
  Instance[1] = 0u;
  *((void *)Instance + 2) = CFRetain(a3);
  *((float *)v8 + 6) = a1;
  SNPrintF();
  uint64_t v9 = FigDispatchQueueCreateWithPriority();
  if (!v9)
  {
    APSLogErrorAt(0);
    CFRelease(v8);
    return 4294960568;
  }
  CFStringRef v10 = v9;
  uint64_t v11 = FigCFWeakReferenceHolderCreateWithReferencedObject();
  if (!v11)
  {
    APSLogErrorAt(0);
    CFRelease(v8);
    dispatch_release(v10);
    return 4294960568;
  }
  CFStringRef v12 = (const void *)v11;
  dispatch_source_t v13 = dispatch_source_create(MEMORY[0x1E4F14490], 0, 0, v10);
  if (v13)
  {
    CFTypeID v14 = v13;
    __int16 v15 = (void *)CFRetain(v12);
    dispatch_set_context(v14, v15);
    dispatch_source_set_cancel_handler_f(v14, MEMORY[0x1E4F1C278]);
    dispatch_source_set_event_handler_f(v14, (dispatch_function_t)latencyStepper_relativeRatePeriodicUpdater);
    dispatch_source_set_timer(v14, 0, 0x3B9ACA00uLL, 0x2FAF080uLL);
    *((unsigned char *)v8 + 56) = 0;
    atomic_store(0x3FF0000000000000uLL, (unint64_t *)v8 + 5);
    *((void *)v8 + 6) = v14;
    if (gLogCategory_APSLatencyOffsetStepper <= 50
      && (gLogCategory_APSLatencyOffsetStepper != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v16 = 0;
    *a4 = v8;
  }
  else
  {
    APSLogErrorAt(0);
    CFRelease(v8);
    uint64_t v16 = 4294960568;
  }
  dispatch_release(v10);
  CFRelease(v12);
  return v16;
}

void latencyStepper_relativeRatePeriodicUpdater()
{
  uint64_t v0 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v0)
  {
    uint64_t v1 = v0;
    if (*(unsigned char *)(v0 + 56))
    {
      CMClockRef HostTimeClock = CMClockGetHostTimeClock();
      atomic_store(COERCE_UNSIGNED_INT64(CMSyncGetRelativeRate(HostTimeClock, *(CMClockOrTimebaseRef *)(v1 + 16))), (unint64_t *)(v1 + 40));
      unsigned int v3 = atomic_load((unsigned int *)(v1 + 32));
      float v4 = *(float *)&v3;
      float v5 = COERCE_FLOAT(atomic_load((unsigned int *)(v1 + 28)));
      if ((float)(v4 - v5) == 0.0)
      {
        dispatch_suspend(*(dispatch_object_t *)(v1 + 48));
        *(unsigned char *)(v1 + 56) = 0;
      }
    }
    CFRelease((CFTypeRef)v1);
  }
}

uint64_t APSLatencyOffsetStepperSetTargetLatencyOffset(uint64_t a1, float a2)
{
  if (gLogCategory_APSLatencyOffsetStepper <= 30
    && (gLogCategory_APSLatencyOffsetStepper != -1 || _LogCategory_Initialize()))
  {
    atomic_load((unsigned int *)(a1 + 28));
    LogPrintF();
  }
  float v4 = COERCE_FLOAT(atomic_exchange((atomic_uint *volatile)(a1 + 32), LODWORD(a2)));
  if (v4 != a2 && v4 == 0.0 && *(unsigned char *)(a1 + 56))
  {
    dispatch_resume(*(dispatch_object_t *)(a1 + 48));
    *(unsigned char *)(a1 + 56) = 1;
  }
  return 0;
}

uint64_t APSLatencyOffsetStepperStepForInterval(uint64_t a1, float a2)
{
  float v2 = COERCE_FLOAT(atomic_load((unsigned int *)(a1 + 32)));
  float v3 = COERCE_FLOAT(atomic_load((unsigned int *)(a1 + 28)));
  if (a2 <= 0.0)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    float v4 = v2 - v3;
    if ((float)(v2 - v3) != 0.0)
    {
      long long v12 = 0u;
      long long v13 = 0u;
      float v5 = *(float *)(a1 + 24) * a2;
      float v6 = fabsf(v4);
      if (v6 <= v5) {
        float v5 = v6;
      }
      if (v4 < 0.0) {
        float v5 = -v5;
      }
      float v7 = v5 + v3;
      double v8 = COERCE_DOUBLE(atomic_load((unint64_t *)(a1 + 40)));
      double v9 = v8 * v7;
      *(float *)&unsigned int v10 = v9;
      atomic_store(v10, (unsigned int *)(a1 + 28));
      *(void *)&long long v12 = a1;
      *((float *)&v12 + 2) = v2;
      *(float *)&long long v13 = v7;
      DWORD2(v13) = -(int)(v9 * ((double)(unint64_t)UpTicksPerSecond() / 1000.0));
      if (APSAsyncLoggerGetSharedLogger_onceToken != -1) {
        dispatch_once_f(&APSAsyncLoggerGetSharedLogger_onceToken, &APSAsyncLoggerGetSharedLogger_gLogger, (dispatch_function_t)asyncLogger_initOnce);
      }
      APSAsyncLoggerLogMessage(APSAsyncLoggerGetSharedLogger_gLogger, (uint64_t)latencyStepper_stepAsyncLogger, &v12);
    }
    return 0;
  }
}

uint64_t latencyStepper_stepAsyncLogger()
{
  if (gLogCategory_APSLatencyOffsetStepper <= 30)
  {
    if (gLogCategory_APSLatencyOffsetStepper != -1) {
      return LogPrintF();
    }
    uint64_t result = _LogCategory_Initialize();
    if (result) {
      return LogPrintF();
    }
  }
  return result;
}

double APSLatencyOffsetStepperGetOffsetSamples(uint64_t a1, double a2)
{
  float v2 = COERCE_FLOAT(atomic_load((unsigned int *)(a1 + 28)));
  return v2 * a2 / 1000.0;
}

uint64_t APSAPAPBBufEncode(const __CFAllocator *a1, OpaqueCMBlockBuffer *a2, uint64_t a3, uint64_t a4, unsigned int a5, uint64_t a6, uint64_t a7, uint64_t a8, CMBlockBufferRef *a9)
{
  size_t lengthAtOffsetOut = 0;
  CMTime dataPointerOut = 0;
  size_t totalLengthOut = 0;
  if (a3
    && ((v17 = *(void *)(CMBaseObjectGetVTable() + 16)) == 0 ? (uint64_t v18 = 0) : (uint64_t v18 = v17),
        (uint64_t v19 = *(uint64_t (**)(uint64_t))(v18 + 8)) != 0))
  {
    uint64_t v20 = v19(a3);
  }
  else
  {
    uint64_t v20 = 0;
  }
  uint64_t v31 = a2;
  size_t v32 = 0;
  v30[0] = a6;
  v30[1] = a7;
  uint64_t result = 4294960591;
  uint64_t v29 = a8;
  if (a2)
  {
    if (a8)
    {
      if (a9)
      {
        uint64_t result = CMBlockBufferGetDataPointer(a2, 0, &lengthAtOffsetOut, &totalLengthOut, &dataPointerOut);
        if (!result)
        {
          if (lengthAtOffsetOut == totalLengthOut)
          {
            long long v27 = *(_OWORD *)a4;
            uint64_t v28 = *(void *)(a4 + 16);
            uint64_t result = APSAPAPEncode(&v27, a5, (uint64_t (*)(uint64_t (*)(unint64_t, unint64_t, uint64_t, uint64_t), void *, uint64_t))_APSAPAPBBufEncodeExtensionItemsCallback, (uint64_t)v30, (uint64_t (*)(void, void *, uint64_t))_APSAPAPBBufEncodeMediaDataCallback, (uint64_t)&v29, (uint64_t (*)(unint64_t *, uint64_t, uint64_t))_APSAPAPBBufEncodeWriteCallback, (uint64_t)&v31);
            if (!result)
            {
              size_t v22 = v32;
              if (v32 < 0x10 || v32 > totalLengthOut)
              {
                return 4294960587;
              }
              else
              {
                if (!a3) {
                  return CMBlockBufferCreateWithBufferReference(a1, a2, 0, v22 + v20, 0, a9);
                }
                if (v32 + v20 > totalLengthOut)
                {
                  return 4294960545;
                }
                else
                {
                  uint64_t v23 = dataPointerOut;
                  uint64_t v24 = *(void *)(CMBaseObjectGetVTable() + 16);
                  if (v24) {
                    uint64_t v25 = v24;
                  }
                  else {
                    uint64_t v25 = 0;
                  }
                  int v26 = *(uint64_t (**)(uint64_t, char *, uint64_t, char *, size_t, char *, size_t, char *, uint64_t))(v25 + 16);
                  if (v26)
                  {
                    uint64_t result = v26(a3, v23, 12, v23 + 15, v22 - 15, v23 + 15, v22 - 15, &v23[v22], v20);
                    if (!result)
                    {
                      size_t v22 = v32;
                      return CMBlockBufferCreateWithBufferReference(a1, a2, 0, v22 + v20, 0, a9);
                    }
                  }
                  else
                  {
                    return 4294954514;
                  }
                }
              }
            }
          }
          else
          {
            return 4294960591;
          }
        }
      }
    }
  }
  return result;
}

uint64_t _APSAPAPBBufEncodeWriteCallback(const void *a1, size_t dataLength, uint64_t a3)
{
  if (!dataLength
    || !*(void *)a3
    || (uint64_t result = CMBlockBufferReplaceDataBytes(a1, *(CMBlockBufferRef *)a3, *(void *)(a3 + 8), dataLength),
        !result))
  {
    uint64_t result = 0;
    *(void *)(a3 + 8) += dataLength;
  }
  return result;
}

uint64_t _APSAPAPBBufEncodeMediaDataCallback(uint64_t (*a1)(char *, size_t, uint64_t), uint64_t a2, CMBlockBufferRef *a3)
{
  size_t DataLength = CMBlockBufferGetDataLength(*a3);
  double v9 = 0;
  size_t lengthAtOffsetOut = 0;
  size_t v7 = 0;
  if (DataLength)
  {
    while (1)
    {
      uint64_t result = CMBlockBufferGetDataPointer(*a3, v7, &lengthAtOffsetOut, 0, &v9);
      if (result) {
        break;
      }
      uint64_t result = a1(v9, lengthAtOffsetOut, a2);
      if (result) {
        break;
      }
      v7 += lengthAtOffsetOut;
      if (v7 >= DataLength) {
        goto LABEL_5;
      }
    }
  }
  else
  {
LABEL_5:
    if (v7 == DataLength) {
      return 0;
    }
    else {
      return 4294960587;
    }
  }
  return result;
}

uint64_t _APSAPAPBBufEncodeExtensionItemsCallback(uint64_t a1, uint64_t a2, void *a3)
{
  v4[0] = 0;
  v4[1] = a1;
  double v4[2] = a2;
  if (!*a3) {
    return 0;
  }
  LODWORD(result) = ((uint64_t (*)(void, void *, void))*a3)(_APSAPAPBBufEncodeExtensionItemCallback, v4, a3[1]);
  if (result) {
    return result;
  }
  else {
    return LODWORD(v4[0]);
  }
}

uint64_t _APSAPAPBBufEncodeExtensionItemCallback(uint64_t a1, CMBlockBufferRef theBuffer, unsigned int *a3)
{
  size_t totalLengthOut = 0;
  size_t lengthAtOffsetOut = 0;
  CMTime dataPointerOut = 0;
  uint64_t result = *a3;
  if (theBuffer && !result)
  {
    if (CMBlockBufferIsEmpty(theBuffer))
    {
      size_t v7 = 0;
      size_t v8 = 0;
      goto LABEL_5;
    }
    uint64_t result = CMBlockBufferGetDataPointer(theBuffer, 0, &lengthAtOffsetOut, &totalLengthOut, &dataPointerOut);
    *a3 = result;
    if (!result)
    {
      size_t v8 = lengthAtOffsetOut;
      if (lengthAtOffsetOut != totalLengthOut)
      {
        uint64_t result = 4294960591;
        goto LABEL_6;
      }
      size_t v7 = dataPointerOut;
LABEL_5:
      uint64_t result = (*((uint64_t (**)(uint64_t, size_t, char *, void))a3 + 1))(a1, v8, v7, *((void *)a3 + 2));
LABEL_6:
      *a3 = result;
    }
  }
  return result;
}

uint64_t APSAPAPBBufDecode(uint64_t a1, CMBlockBufferRef theBuffer, OpaqueCMBlockBuffer *a3, uint64_t a4, uint64_t a5, int *a6, uint64_t a7, uint64_t a8, CFTypeRef *a9)
{
  size_t totalLengthOut = 0;
  size_t lengthAtOffsetOut = 0;
  size_t v32 = 0;
  CMTime dataPointerOut = 0;
  unsigned int v30 = 0;
  size_t v31 = 0;
  v28[1] = 0;
  size_t v29 = 0;
  v27[0] = a1;
  v27[1] = a7;
  v27[2] = a8;
  v27[3] = v28;
  v28[0] = a3;
  uint64_t v24 = a1;
  CFTypeRef cf = 0;
  uint64_t DataPointer = 4294960591;
  int v26 = v28;
  if (!theBuffer) {
    goto LABEL_6;
  }
  if (!a3) {
    goto LABEL_6;
  }
  uint64_t DataPointer = CMBlockBufferGetDataPointer(theBuffer, 0, &lengthAtOffsetOut, &totalLengthOut, &dataPointerOut);
  if (DataPointer) {
    goto LABEL_6;
  }
  if (lengthAtOffsetOut != totalLengthOut) {
    goto LABEL_30;
  }
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a3, 0, &v32, &v31, &v30);
  if (DataPointer) {
    goto LABEL_6;
  }
  size_t v16 = v32;
  if (v32 != v31) {
    goto LABEL_30;
  }
  size_t v17 = totalLengthOut;
  if (v32 < totalLengthOut) {
    goto LABEL_30;
  }
  uint64_t v18 = dataPointerOut;
  uint64_t v19 = v30;
  if (dataPointerOut == v30)
  {
    uint64_t v19 = dataPointerOut;
    if (a4) {
      goto LABEL_17;
    }
    goto LABEL_25;
  }
  if (&dataPointerOut[totalLengthOut] > v30 && &v30[totalLengthOut] > dataPointerOut)
  {
LABEL_30:
    uint64_t DataPointer = 4294960591;
    goto LABEL_6;
  }
  if (a4)
  {
    uint64_t v20 = *(void *)dataPointerOut;
    *(void *)(v30 + 7) = *(void *)(dataPointerOut + 7);
    *(void *)uint64_t v19 = v20;
LABEL_17:
    uint64_t v21 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v21) {
      uint64_t v22 = v21;
    }
    else {
      uint64_t v22 = 0;
    }
    uint64_t v23 = *(uint64_t (**)(uint64_t, char *, uint64_t, char *, size_t, char *, size_t, size_t *))(v22 + 24);
    if (!v23)
    {
      uint64_t DataPointer = 4294954514;
      goto LABEL_6;
    }
    uint64_t DataPointer = v23(a4, v18, 12, v18 + 15, v17 - 15, v19 + 15, v16 - 15, &v29);
    if (DataPointer) {
      goto LABEL_6;
    }
    size_t v17 = v29 + 15;
    goto LABEL_25;
  }
  memcpy(v30, dataPointerOut, totalLengthOut);
  size_t v17 = totalLengthOut;
LABEL_25:
  size_t v29 = v17;
  uint64_t DataPointer = APSAPAPDecode(v17, (uint64_t (*)(void, unint64_t, uint64_t))_APSAPAPBBufDecodeReadCallback, (uint64_t)v28, a5, a6, (uint64_t (*)(unint64_t))_APSAPAPBBufDecodeExtensionItemCallback, (uint64_t)v27, (uint64_t (*)(unint64_t, uint64_t (*)(uint64_t, unint64_t, unsigned int *), uint64_t *, uint64_t))_APSAPAPBBufDecodeMediaDataCallback, (uint64_t)&v24);
  if (!DataPointer)
  {
    CFTypeRef v14 = cf;
    if (!cf) {
      return 4294960587;
    }
    if (!a9)
    {
      uint64_t DataPointer = 0;
      goto LABEL_7;
    }
    uint64_t DataPointer = 0;
    *a9 = CFRetain(cf);
  }
LABEL_6:
  CFTypeRef v14 = cf;
  if (cf) {
LABEL_7:
  }
    CFRelease(v14);
  return DataPointer;
}

uint64_t _APSAPAPBBufDecodeMediaDataCallback(size_t dataLength, int a2, int a3, CMBlockBufferRef *blockBufferOut)
{
  if (blockBufferOut[1]) {
    return 4294960587;
  }
  CFAllocatorRef v5 = *blockBufferOut;
  if (dataLength) {
    return CMBlockBufferCreateWithBufferReference(v5, *(CMBlockBufferRef *)blockBufferOut[2], *((void *)blockBufferOut[2] + 1), dataLength, 0, blockBufferOut + 1);
  }
  else {
    return CMBlockBufferCreateEmpty(v5, 0, 0, blockBufferOut + 1);
  }
}

uint64_t _APSAPAPBBufDecodeExtensionItemCallback(uint64_t a1, size_t dataLength, uint64_t a3, uint64_t a4, uint64_t a5)
{
  CMBlockBufferRef blockBufferOut = 0;
  if (!*(void *)(a5 + 8)) {
    return 0;
  }
  CFAllocatorRef v7 = *(const __CFAllocator **)a5;
  if (dataLength) {
    uint64_t v8 = CMBlockBufferCreateWithBufferReference(v7, **(CMBlockBufferRef **)(a5 + 24), *(void *)(*(void *)(a5 + 24) + 8), dataLength, 0, &blockBufferOut);
  }
  else {
    uint64_t v8 = CMBlockBufferCreateEmpty(v7, 0, 0, &blockBufferOut);
  }
  uint64_t v9 = v8;
  if (!v8) {
    uint64_t v9 = (*(uint64_t (**)(uint64_t, CMBlockBufferRef, void))(a5 + 8))(a1, blockBufferOut, *(void *)(a5 + 16));
  }
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  return v9;
}

uint64_t _APSAPAPBBufDecodeReadCallback(void *a1, size_t a2, uint64_t a3)
{
  size_t v6 = *(void *)(a3 + 8) + a2;
  if (v6 > CMBlockBufferGetDataLength(*(CMBlockBufferRef *)a3)) {
    return 4294960546;
  }
  if (!a1
    || (uint64_t result = CMBlockBufferCopyDataBytes(*(CMBlockBufferRef *)a3, *(void *)(a3 + 8), a2, a1), !result))
  {
    uint64_t result = 0;
    *(void *)(a3 + 8) += a2;
  }
  return result;
}

uint64_t APSAPAPBBufEncodeHeaderSeqNum(uint64_t a1, unsigned int a2)
{
  long long v9 = *MEMORY[0x1E4F1F9F8];
  uint64_t v10 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
  int v8 = 0;
  v7[0] = a1;
  v7[1] = 0;
  v6[0] = a1;
  v6[1] = 0;
  uint64_t result = APSAPAPDecodeHeader((uint64_t (*)(unint64_t *, uint64_t, uint64_t))_APSAPAPBBufDecodeReadCallback, (uint64_t)v7, (uint64_t)&v9, &v8);
  if (!result && v8 != a2)
  {
    long long v4 = v9;
    uint64_t v5 = v10;
    return APSAPAPEncodeHeader((uint64_t)&v4, a2, (uint64_t (*)(unint64_t *, uint64_t, uint64_t))_APSAPAPBBufEncodeWriteCallback, (uint64_t)v6);
  }
  return result;
}

uint64_t APSAPAPBBufDecodeHeader(uint64_t a1, uint64_t a2, int *a3)
{
  uint64_t v5 = a1;
  uint64_t v6 = 0;
  if (!a1) {
    return 4294960591;
  }
  LODWORD(result) = APSAPAPDecodeHeader((uint64_t (*)(unint64_t *, uint64_t, uint64_t))_APSAPAPBBufDecodeReadCallback, (uint64_t)&v5, a2, a3);
  if (v6 == 15) {
    unsigned int v4 = result;
  }
  else {
    unsigned int v4 = -6709;
  }
  if (result) {
    return result;
  }
  else {
    return v4;
  }
}

uint64_t APSAPAPBBufEncodeGetMinBackingSize(uint64_t a1, uint64_t (*a2)(void, uint64_t *, uint64_t), uint64_t a3, uint64_t a4, void *a5)
{
  uint64_t v9 = a1;
  if (a1)
  {
    uint64_t v10 = *(void *)(CMBaseObjectGetVTable() + 16);
    if (v10) {
      uint64_t v11 = v10;
    }
    else {
      uint64_t v11 = 0;
    }
    long long v12 = *(uint64_t (**)(uint64_t))(v11 + 8);
    if (v12) {
      uint64_t v9 = v12(v9);
    }
    else {
      uint64_t v9 = 0;
    }
  }
  if (!a5) {
    return 4294960591;
  }
  uint64_t v14 = 0;
  uint64_t v15 = 0;
  if (!a2) {
    return 4294960591;
  }
  uint64_t result = a2(_APSAPAPGetEncodeSizeExtensionItemCallback, &v14, a3);
  if (!result)
  {
    uint64_t result = v14;
    if (!v14) {
      *a5 = a4 + v9 + v15 + 16;
    }
  }
  return result;
}

uint64_t APSCMSampleBufferMergerGetTypeID()
{
  if (gAPSCMSampleBufferMergerInitOnce != -1) {
    dispatch_once_f(&gAPSCMSampleBufferMergerInitOnce, 0, (dispatch_function_t)_APSCMSampleBufferMergerGetTypeID);
  }
  return gAPSCMSampleBufferMergerTypeID;
}

uint64_t _APSCMSampleBufferMergerGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSCMSampleBufferMergerCFTypeID TypeID = result;
  return result;
}

void _APSCMSampleBufferMergerFinalize(void *a1)
{
  if (gLogCategory_APSCMSampleBufferMerger <= 30
    && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  float v2 = (const void *)a1[3];
  if (v2) {
    CFRelease(v2);
  }
  float v3 = (const void *)a1[2];
  if (v3) {
    CFRelease(v3);
  }
  unsigned int v4 = (const void *)a1[4];
  if (v4)
  {
    CFRelease(v4);
  }
}

uint64_t APSCMSampleBufferMergerCreate(char a1, CFTypeRef *a2)
{
  if (a2)
  {
    if (gAPSCMSampleBufferMergerInitOnce != -1) {
      dispatch_once_f(&gAPSCMSampleBufferMergerInitOnce, 0, (dispatch_function_t)_APSCMSampleBufferMergerGetTypeID);
    }
    uint64_t Instance = _CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v5 = Instance;
      *(_OWORD *)(Instance + 16) = 0u;
      *(_OWORD *)(Instance + 32) = 0u;
      CFMutableArrayRef Mutable = CFArrayCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D510]);
      *(void *)(v5 + 32) = Mutable;
      if (Mutable)
      {
        if (gLogCategory_APSCMSampleBufferMerger <= 30
          && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
        {
          LogPrintF();
        }
        uint64_t v7 = 0;
        *a2 = CFRetain((CFTypeRef)v5);
        *(unsigned char *)(v5 + 40) = a1;
      }
      else
      {
        APSLogErrorAt(0);
        uint64_t v7 = 4294960568;
      }
      CFRelease((CFTypeRef)v5);
    }
    else
    {
      APSLogErrorAt(0);
      return 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

CFIndex APSCMSampleBufferMergerGetCount(CFIndex result)
{
  if (result) {
    return CFArrayGetCount(*(CFArrayRef *)(result + 32));
  }
  return result;
}

uint64_t APSCMSampleBufferMergerFlush(uint64_t a1)
{
  if (a1)
  {
    if (gLogCategory_APSCMSampleBufferMerger <= 30
      && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    float v2 = *(const void **)(a1 + 24);
    if (v2)
    {
      CFRelease(v2);
      *(void *)(a1 + 24) = 0;
    }
    float v3 = *(const void **)(a1 + 16);
    if (v3)
    {
      CFRelease(v3);
      *(void *)(a1 + 16) = 0;
    }
    CFArrayRemoveAllValues(*(CFMutableArrayRef *)(a1 + 32));
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

uint64_t APSCMSampleBufferMergerTryMerge(uint64_t a1, opaqueCMSampleBuffer *a2)
{
  uint64_t v2 = 0;
  if (!a1 || !a2) {
    return v2;
  }
  CFArrayRef v5 = *(const __CFArray **)(a1 + 32);
  if (v5) {
    CFIndex Count = CFArrayGetCount(v5);
  }
  else {
    CFIndex Count = 0;
  }
  if (gLogCategory_APSCMSampleBufferMerger <= 30
    && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  if (Count)
  {
    CFDictionaryRef ValueAtIndex = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), Count - 1);
    if (sbufMerger_isSBufReTimed(ValueAtIndex))
    {
      if (gLogCategory_APSCMSampleBufferMerger > 50
        || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
      {
        return 0;
      }
    }
    else if (sbufMerger_isSBufReTimed(a2))
    {
      if (gLogCategory_APSCMSampleBufferMerger > 50
        || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
      {
        return 0;
      }
    }
    else if (CMSampleBufferGetNumSamples(ValueAtIndex) == 1)
    {
      if (CMSampleBufferGetNumSamples(a2) == 1)
      {
        CMSampleBufferGetPresentationTimeStamp(&lhs, ValueAtIndex);
        CMSampleBufferGetDuration(&rhs, ValueAtIndex);
        CMTimeAdd(&time1, &lhs, &rhs);
        CMSampleBufferGetPresentationTimeStamp(&time2, a2);
        if (CMTimeCompare(&time1, &time2))
        {
          if (gLogCategory_APSCMSampleBufferMerger > 50
            || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
          {
            return 0;
          }
        }
        else
        {
          FormatDescriptiouint64_t n = CMSampleBufferGetFormatDescription(ValueAtIndex);
          uint64_t v9 = CMSampleBufferGetFormatDescription(a2);
          if (CMFormatDescriptionEqual(FormatDescription, v9))
          {
            FigSampleBufferGetDecryptor();
            FigSampleBufferGetDecryptor();
            if (FigCFEqual())
            {
              CFAllocatorRef v10 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
              CFDictionaryRef v11 = CMCopyDictionaryOfAttachments((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a2, 0);
              if (!sbufMerger_areAttachmentsMergable(*(const __CFDictionary **)(a1 + 16), v11, *(unsigned __int8 *)(a1 + 40)))
              {
                if (gLogCategory_APSCMSampleBufferMerger <= 50
                  && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
                {
                  goto LABEL_67;
                }
                goto LABEL_68;
              }
              if (v11) {
                CFRelease(v11);
              }
              CFDictionaryRef v11 = CMCopyDictionaryOfAttachments(v10, a2, 1u);
              if (!sbufMerger_areAttachmentsMergable(*(const __CFDictionary **)(a1 + 24), v11, *(unsigned __int8 *)(a1 + 40)))
              {
                if (gLogCategory_APSCMSampleBufferMerger <= 50
                  && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
                {
                  goto LABEL_67;
                }
                goto LABEL_68;
              }
              CFStringRef v12 = (const __CFString *)*MEMORY[0x1E4F1F308];
              CFDictionaryRef v13 = (const __CFDictionary *)CMGetAttachment(a2, (CFStringRef)*MEMORY[0x1E4F1F308], 0);
              CMTimeMakeFromDictionary(&v21, v13);
              if (*(unsigned char *)(a1 + 40) && (v21.flags & 1) != 0)
              {
                CMSampleBufferGetDuration(&v20, ValueAtIndex);
                CFDictionaryRef v14 = (const __CFDictionary *)CMGetAttachment(ValueAtIndex, v12, 0);
                CMTimeMakeFromDictionary(&v19, v14);
                if (CMTimeCompare(&v20, &v19))
                {
                  if (gLogCategory_APSCMSampleBufferMerger <= 50
                    && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
                  {
                    goto LABEL_67;
                  }
                  goto LABEL_68;
                }
                CMSampleBufferGetOutputDuration(&v18, ValueAtIndex);
                CMTime v21 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
                if (CMTimeCompare(&v18, &v21))
                {
                  if (gLogCategory_APSCMSampleBufferMerger <= 50
                    && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
                  {
LABEL_67:
                    LogPrintF();
                  }
LABEL_68:
                  uint64_t v2 = 0;
                  if (!v11) {
                    return v2;
                  }
                  goto LABEL_35;
                }
              }
              goto LABEL_30;
            }
            if (gLogCategory_APSCMSampleBufferMerger > 50
              || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
            {
              return 0;
            }
          }
          else if (gLogCategory_APSCMSampleBufferMerger > 50 {
                 || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
          }
          {
            return 0;
          }
        }
      }
      else if (gLogCategory_APSCMSampleBufferMerger > 50 {
             || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
      }
      {
        return 0;
      }
    }
    else if (gLogCategory_APSCMSampleBufferMerger > 50 {
           || gLogCategory_APSCMSampleBufferMerger == -1 && !_LogCategory_Initialize())
    }
    {
      return 0;
    }
    LogPrintF();
    return 0;
  }
  CFAllocatorRef v15 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  *(void *)(a1 + 16) = CMCopyDictionaryOfAttachments((CFAllocatorRef)*MEMORY[0x1E4F1CF80], a2, 0);
  CFDictionaryRef v16 = CMCopyDictionaryOfAttachments(v15, a2, 1u);
  CFDictionaryRef v11 = 0;
  *(void *)(a1 + 24) = v16;
LABEL_30:
  if (gLogCategory_APSCMSampleBufferMerger <= 30
    && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  CFArrayAppendValue(*(CFMutableArrayRef *)(a1 + 32), a2);
  uint64_t v2 = 1;
  if (v11) {
LABEL_35:
  }
    CFRelease(v11);
  return v2;
}

BOOL sbufMerger_isSBufReTimed(void *a1)
{
  CFDictionaryRef v2 = (const __CFDictionary *)CMGetAttachment(a1, (CFStringRef)*MEMORY[0x1E4F1F308], 0);
  CMTime v8 = *(CMTime *)*(void *)&MEMORY[0x1E4F1F9F8];
  if (v2) {
    CMTimeMakeFromDictionary(&v8, v2);
  }
  else {
    CMTime v8 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
  }
  CMSampleBufferGetPresentationTimeStamp(&lhs, (CMSampleBufferRef)a1);
  CMTime rhs = v8;
  CMTimeAdd(&time1, &lhs, &rhs);
  CMSampleBufferGetOutputPresentationTimeStamp(&time2, (CMSampleBufferRef)a1);
  return CMTimeCompare(&time1, &time2) != 0;
}

BOOL sbufMerger_areAttachmentsMergable(const __CFDictionary *a1, const __CFDictionary *a2, int a3)
{
  uint64_t Count = FigCFDictionaryGetCount();
  uint64_t v7 = FigCFDictionaryGetCount();
  CMTime v8 = (const void **)MEMORY[0x1E4F329B0];
  if (a1) {
    Count -= CFDictionaryContainsKey(a1, (const void *)*MEMORY[0x1E4F329B0]) != 0;
  }
  if (a2) {
    v7 -= CFDictionaryContainsKey(a2, *v8) != 0;
  }
  if (!(Count | v7)) {
    return 1;
  }
  if (Count != v7) {
    return 0;
  }
  uint64_t v9 = Count + (char)-APSCFDictionaryPairIsKeyPresentAndEqual();
  uint64_t v10 = v9 + (char)-APSCFDictionaryPairIsKeyPresentAndEqual();
  uint64_t v11 = v10 + (char)-APSCFDictionaryPairIsKeyPresentAndEqual();
  uint64_t v12 = v11 + (char)-APSCFDictionaryPairIsKeyPresentAndEqual();
  if (a3)
  {
    CFDictionaryRef v13 = (const void *)*MEMORY[0x1E4F1F308];
    if (CFDictionaryContainsKey(a1, (const void *)*MEMORY[0x1E4F1F308])) {
      v12 -= CFDictionaryContainsKey(a2, v13) != 0;
    }
  }
  return v12 == 0;
}

uint64_t APSCMSampleBufferMergerCopyMergedSBuf(uint64_t a1, CFTypeRef *a2)
{
  CMSampleBufferRef sampleBufferOut = 0;
  CMBlockBufferRef blockBufferOut = 0;
  CMTime v49 = *(CMTime *)*(void *)&MEMORY[0x1E4F1FA48];
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    uint64_t v40 = 4294960591;
    goto LABEL_41;
  }
  CFIndex Count = CFArrayGetCount(*(CFArrayRef *)(a1 + 32));
  if (Count)
  {
    uint64_t v5 = Count;
    CFDictionaryRef ValueAtIndex = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), 0);
    uint64_t v7 = ValueAtIndex;
    if (v5 > 1)
    {
      CMTime v8 = (CMSampleTimingInfo *)malloc_type_calloc(v5, 0x48uLL, 0x1000040FF89C88EuLL);
      if (v8)
      {
        uint64_t v9 = v8;
        uint64_t v10 = (size_t *)malloc_type_calloc(v5, 8uLL, 0x100004000313F17uLL);
        if (v10)
        {
          uint64_t v11 = v10;
          CFAllocatorRef v12 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
          uint64_t v13 = CMBlockBufferCreateEmpty((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v5, 0, &blockBufferOut);
          if (v13)
          {
            uint64_t v40 = v13;
          }
          else
          {
            unsigned int v42 = a2;
            CFAllocatorRef v43 = v12;
            CFIndex v44 = v9;
            CFIndex v14 = 0;
            char v15 = 0;
            p_presentationTimeStamp = &v9->presentationTimeStamp;
            long long v45 = *MEMORY[0x1E4F1F9F8];
            CMTimeEpoch v17 = *(void *)(MEMORY[0x1E4F1F9F8] + 16);
            do
            {
              CMTime v18 = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), v14);
              DataBuffer = CMSampleBufferGetDataBuffer(v18);
              CMSampleBufferGetPresentationTimeStamp(&time, v18);
              long long v20 = *(_OWORD *)&time.value;
              p_presentationTimeStamp->CMTimeEpoch epoch = time.epoch;
              *(_OWORD *)&p_presentationTimeStamp->CMTimeValue value = v20;
              CMSampleBufferGetDuration(&time, v18);
              long long v21 = *(_OWORD *)&time.value;
              p_presentationTimeStamp[-1].CMTimeEpoch epoch = time.epoch;
              *(_OWORD *)&p_presentationTimeStamp[-1].CMTimeValue value = v21;
              *(_OWORD *)&p_presentationTimeStamp[1].CMTimeValue value = v45;
              p_presentationTimeStamp[1].CMTimeEpoch epoch = v17;
              if (DataBuffer)
              {
                if (!CMBlockBufferIsEmpty(DataBuffer))
                {
                  v11[v14] = CMBlockBufferGetDataLength(DataBuffer);
                  uint64_t appended = CMBlockBufferAppendBufferReference(blockBufferOut, DataBuffer, 0, 0, 0);
                  if (appended)
                  {
                    uint64_t v40 = appended;
                    APSLogErrorAt(appended);
                    CFDictionaryRef v39 = 0;
                    uint64_t v9 = (CMSampleTimingInfo *)v44;
                    goto LABEL_39;
                  }
                }
              }
              v15 |= CMSampleBufferGetSampleAttachmentsArray(v18, 0) != 0;
              ++v14;
              p_presentationTimeStamp += 3;
            }
            while (v5 != v14);
            uint64_t v23 = blockBufferOut;
            FormatDescriptiouint64_t n = CMSampleBufferGetFormatDescription(v7);
            uint64_t v9 = (CMSampleTimingInfo *)v44;
            uint64_t v13 = CMSampleBufferCreateReady(v43, v23, FormatDescription, v5, v5, v44, v5, v11, &sampleBufferOut);
            if (!v13)
            {
              FigSampleBufferGetDecryptor();
              FigSampleBufferSetDecryptor();
              CFDictionaryRef v25 = *(const __CFDictionary **)(a1 + 16);
              if (v25) {
                CMSetAttachments(sampleBufferOut, v25, 0);
              }
              CFDictionaryRef v26 = *(const __CFDictionary **)(a1 + 24);
              if (v26) {
                CMSetAttachments(sampleBufferOut, v26, 1u);
              }
              if (v15)
              {
                CFArrayRef SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray(sampleBufferOut, 1u);
                for (CFIndex i = 0; i != v5; ++i)
                {
                  size_t v29 = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), i);
                  CFArrayRef v30 = CMSampleBufferGetSampleAttachmentsArray(v29, 0);
                  if (v30)
                  {
                    CFArrayRef v31 = v30;
                    if (CFArrayGetCount(v30) >= 1)
                    {
                      CFArrayGetValueAtIndex(v31, 0);
                      CFArrayGetValueAtIndex(SampleAttachmentsArray, i);
                      FigCFDictionaryAddEntriesToDictionaryWithRecursion();
                    }
                  }
                }
              }
              if (*(unsigned char *)(a1 + 40))
              {
                CFDictionaryRef v32 = *(const __CFDictionary **)(a1 + 24);
                int v33 = (const void **)MEMORY[0x1E4F1F308];
                if (v32)
                {
                  CFStringRef v34 = (const __CFString *)*MEMORY[0x1E4F1F308];
                  if (CFDictionaryContainsKey(v32, (const void *)*MEMORY[0x1E4F1F308]))
                  {
                    CMAttachmentMode v35 = 1;
LABEL_31:
                    uint64_t v9 = (CMSampleTimingInfo *)v44;
                    CFStringRef v37 = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), v5 - 1);
                    CMSampleBufferGetOutputPresentationTimeStamp(&lhs, v37);
                    CFStringRef v38 = (opaqueCMSampleBuffer *)CFArrayGetValueAtIndex(*(CFArrayRef *)(a1 + 32), 0);
                    CMSampleBufferGetPresentationTimeStamp(&rhs, v38);
                    CMTimeSubtract(&v49, &lhs, &rhs);
                    CMTime time = v49;
                    CFDictionaryRef v39 = CMTimeCopyAsDictionary(&time, v43);
                    CMSetAttachment(sampleBufferOut, v34, v39, v35);
                    goto LABEL_34;
                  }
                }
                CFDictionaryRef v36 = *(const __CFDictionary **)(a1 + 16);
                if (v36)
                {
                  CFStringRef v34 = (const __CFString *)*v33;
                  if (CFDictionaryContainsKey(v36, *v33))
                  {
                    CMAttachmentMode v35 = 0;
                    goto LABEL_31;
                  }
                }
                CFDictionaryRef v39 = 0;
                uint64_t v9 = (CMSampleTimingInfo *)v44;
              }
              else
              {
                CFDictionaryRef v39 = 0;
              }
LABEL_34:
              if (gLogCategory_APSCMSampleBufferMerger <= 30
                && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
              {
                LogPrintF();
              }
              uint64_t v40 = 0;
              *unsigned int v42 = CFRetain(sampleBufferOut);
              goto LABEL_39;
            }
            uint64_t v40 = v13;
          }
          APSLogErrorAt(v13);
          CFDictionaryRef v39 = 0;
LABEL_39:
          free(v9);
          free(v11);
          if (v39) {
            CFRelease(v39);
          }
          goto LABEL_41;
        }
        APSLogErrorAt(0);
        free(v9);
      }
      else
      {
        APSLogErrorAt(0);
      }
      uint64_t v40 = 4294960568;
      goto LABEL_41;
    }
    *a2 = CFRetain(ValueAtIndex);
    if (gLogCategory_APSCMSampleBufferMerger <= 30
      && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v40 = 0;
  }
  else
  {
    APSLogErrorAt(0);
    if (gLogCategory_APSCMSampleBufferMerger <= 30
      && (gLogCategory_APSCMSampleBufferMerger != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v40 = 4294960578;
  }
LABEL_41:
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  if (sampleBufferOut) {
    CFRelease(sampleBufferOut);
  }
  return v40;
}

uint64_t APSAudioFormatDescriptionGetTypeID()
{
  if (APSAudioFormatDescriptionGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionGetTypeID_sInitOnce, &APSAudioFormatDescriptionGetTypeID_sTypeID, (dispatch_function_t)audioFormat_getTypeID);
  }
  return APSAudioFormatDescriptionGetTypeID_sTypeID;
}

uint64_t audioFormat_getTypeID(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

__CFString *audioFormat_CopyDebugDescription(uint64_t a1)
{
  CFMutableArrayRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  float v3 = Mutable;
  if (Mutable)
  {
    uint64_t v4 = *(void *)(a1 + 96);
    uint64_t v5 = "PCM/24000/16/1";
    switch(v4)
    {
      case 2:
        uint64_t v5 = "PCM/8000/16/1";
        break;
      case 3:
        uint64_t v5 = "PCM/8000/16/2";
        break;
      case 4:
        uint64_t v5 = "PCM/16000/16/1";
        break;
      case 5:
        uint64_t v5 = "PCM/16000/16/2";
        break;
      case 6:
        break;
      case 7:
        uint64_t v5 = "PCM/24000/16/2";
        break;
      case 8:
        uint64_t v5 = "PCM/32000/16/1";
        break;
      case 9:
        uint64_t v5 = "PCM/32000/16/2";
        break;
      case 10:
        uint64_t v5 = "PCM/44100/16/1";
        break;
      case 11:
        uint64_t v5 = "PCM/44100/16/2";
        break;
      case 12:
        uint64_t v5 = "PCM/44100/24/1";
        break;
      case 13:
        uint64_t v5 = "PCM/44100/24/2";
        break;
      case 14:
        uint64_t v5 = "PCM/48000/16/1";
        break;
      case 15:
        uint64_t v5 = "PCM/48000/16/2";
        break;
      case 16:
        uint64_t v5 = "PCM/48000/24/1";
        break;
      case 17:
        uint64_t v5 = "PCM/48000/24/2";
        break;
      case 18:
        uint64_t v5 = "ALAC/44100/16/2";
        break;
      case 19:
        uint64_t v5 = "ALAC/44100/24/2";
        break;
      case 20:
        uint64_t v5 = "ALAC/48000/16/2";
        break;
      case 21:
        uint64_t v5 = "ALAC/48000/24/2";
        break;
      case 22:
        uint64_t v5 = "AAC-LC/44100/2";
        break;
      case 23:
        uint64_t v5 = "AAC-LC/48000/2";
        break;
      case 24:
        uint64_t v5 = "AAC-ELD/44100/2";
        break;
      case 25:
        uint64_t v5 = "AAC-ELD/48000/2";
        break;
      case 26:
        uint64_t v5 = "AAC-ELD/16000/1";
        break;
      case 27:
        uint64_t v5 = "AAC-ELD/24000/1";
        break;
      case 28:
        uint64_t v5 = "OPUS/16000/1";
        break;
      case 29:
        uint64_t v5 = "OPUS/24000/1";
        break;
      case 30:
        uint64_t v5 = "OPUS/48000/1";
        break;
      case 31:
        uint64_t v5 = "AAC-ELD/44100/1";
        break;
      case 32:
        uint64_t v5 = "AAC-ELD/48000/1";
        break;
      case 38:
        uint64_t v5 = "PCM/48000/16/5.1.2";
        break;
      case 39:
        uint64_t v5 = "AAC_LC/48000/5.1";
        break;
      case 40:
        uint64_t v5 = "AAC_LC/48000/5.1.2";
        break;
      case 41:
        uint64_t v5 = "AAC_ELD/48000/5.1";
        break;
      case 42:
        uint64_t v5 = "AAC_ELD/48000/5.1.2";
        break;
      case 43:
        uint64_t v5 = "AAC-ELD/32000/1";
        break;
      case 44:
        uint64_t v5 = "PCM/48000/16/5.1";
        break;
      case 45:
        uint64_t v5 = "PCM/48000/32f/1";
        break;
      case 46:
        uint64_t v5 = "PCM/48000/32f/2";
        break;
      case 47:
        uint64_t v5 = "PCM/48000/32f/5.1";
        break;
      case 48:
        uint64_t v5 = "PCM/48000/32f/5.1.2";
        break;
      case 49:
        uint64_t v5 = "DDPLUS/48000/2";
        break;
      case 50:
        uint64_t v5 = "DDPLUS/48000/5.1";
        break;
      case 51:
        uint64_t v5 = "DDPLUS/48000/5.1.2";
        break;
      case 52:
        uint64_t v5 = "DDPLUS/48000/7.1.4";
        break;
      case 53:
        uint64_t v5 = "DDPLUS/48000/9.1.6";
        break;
      case 54:
        uint64_t v5 = "QAAC/48000/2";
        break;
      case 55:
        uint64_t v5 = "QAAC/48000/5.1";
        break;
      case 56:
        uint64_t v5 = "QAAC/48000/5.1.2";
        break;
      case 57:
        uint64_t v5 = "QAACHE/48000/2";
        break;
      case 58:
        uint64_t v5 = "QAACHE/48000/5.1";
        break;
      case 60:
        uint64_t v5 = "QAACHE/48000/5.1.2";
        break;
      case 69:
        uint64_t v5 = "PCM/48000/32f/7.1.4";
        break;
      case 78:
        uint64_t v5 = "PCM/48000/16/7.1";
        break;
      case 79:
        uint64_t v5 = "PCM/48000/32f/7.1";
        break;
      case 80:
        uint64_t v5 = "PCM/48000/16/5.1.4";
        break;
      case 81:
        uint64_t v5 = "PCM/48000/32f/5.1.4";
        break;
      case 82:
        uint64_t v5 = "PCM/48000/16/7.1.2";
        break;
      case 83:
        uint64_t v5 = "PCM/48000/32f/7.1.2";
        break;
      case 84:
        uint64_t v5 = "PCM/48000/16/7.1.4";
        break;
      case 85:
        uint64_t v5 = "ALAC/44100/20/2";
        break;
      case 86:
        uint64_t v5 = "ALAC/48000/20/2";
        break;
      case 90:
        uint64_t v5 = "AAC_LC/48000/7.1";
        break;
      default:
        switch(v4)
        {
          case '!':
            uint64_t v5 = "QC3/48000/5.1.2";
            break;
          case '""':
            uint64_t v5 = "QC3/48000/7.1.4";
            break;
          case '#':
            uint64_t v5 = "QC3/48000/9.1.6";
            break;
          case '$':
          case '%':
          case '&':
          case '\'':
          case '(':
          case ')':
          case '*':
          case '+':
          case ',':
          case '-':
          case '.':
          case '/':
          case '0':
          case '1':
          case '2':
          case '3':
          case '4':
          case '5':
          case '6':
          case '7':
          case '8':
          case '9':
          case ':':
          case ';':
          case '<':
          case 'E':
          case 'K':
LABEL_90:
            uint64_t v5 = "";
            if (v4 == 75) {
              uint64_t v5 = "MP3/48000/2";
            }
            break;
          case '=':
            uint64_t v5 = "QLAC/48000/24/2";
            break;
          case '>':
            uint64_t v5 = "QC3/48000/2";
            break;
          case '?':
            uint64_t v5 = "QC3/48000/5.1";
            break;
          case '@':
            uint64_t v5 = "APAC/48000/2";
            break;
          case 'A':
            uint64_t v5 = "APAC/48000/5.1";
            break;
          case 'B':
            uint64_t v5 = "APAC/48000/5.1.2";
            break;
          case 'C':
            uint64_t v5 = "APAC/48000/7.1";
            break;
          case 'D':
            uint64_t v5 = "APAC/48000/7.1.4";
            break;
          case 'F':
            uint64_t v5 = "QAAC/44100/2";
            break;
          case 'G':
            uint64_t v5 = "QAACHE/44100/2";
            break;
          case 'H':
            uint64_t v5 = "QAACHEV2/44100/2";
            break;
          case 'I':
            uint64_t v5 = "QLAC/44100/24/2";
            break;
          case 'J':
            uint64_t v5 = "MP3/44100/2";
            break;
          case 'L':
            uint64_t v5 = "APAC/48000/5.1.4";
            break;
          case 'M':
            uint64_t v5 = "APAC/48000/7.1.2";
            break;
          default:
            uint64_t v5 = "PAAC/44100/2";
            switch(v4)
            {
              case 'W':
                uint64_t v5 = "QAC3/48000/5.1";
                break;
              case 'X':
                uint64_t v5 = "QEC3/48000/7.1";
                break;
              case 'Y':
                goto LABEL_68;
              case '[':
                uint64_t v5 = "EAC3/48000/5.1";
                break;
              default:
                goto LABEL_90;
            }
            break;
        }
        break;
    }
LABEL_68:
    CFStringAppendFormat(Mutable, 0, @"<APSAudioFormatDescription %p> Index %llu:%s", a1, *(void *)(a1 + 96), v5);
  }
  else
  {
    APSLogErrorAt(0);
  }
  return v3;
}

BOOL audioFormat_Equal(void *a1, void *a2)
{
  if (a1)
  {
    CFTypeID v4 = CFGetTypeID(a1);
    if (APSAudioFormatDescriptionGetTypeID_sInitOnce != -1) {
      dispatch_once_f(&APSAudioFormatDescriptionGetTypeID_sInitOnce, &APSAudioFormatDescriptionGetTypeID_sTypeID, (dispatch_function_t)audioFormat_getTypeID);
    }
    if (v4 == APSAudioFormatDescriptionGetTypeID_sTypeID && a2)
    {
      CFTypeID v5 = CFGetTypeID(a2);
      if (APSAudioFormatDescriptionGetTypeID_sInitOnce != -1) {
        dispatch_once_f(&APSAudioFormatDescriptionGetTypeID_sInitOnce, &APSAudioFormatDescriptionGetTypeID_sTypeID, (dispatch_function_t)audioFormat_getTypeID);
      }
      if (v5 == APSAudioFormatDescriptionGetTypeID_sTypeID) {
        return a1[12] == a2[12];
      }
    }
  }
  APSLogErrorAt(0);
  return 0;
}

double audioFormat_Finalize(uint64_t a1)
{
  CFDictionaryRef v2 = *(const void **)(a1 + 104);
  if (v2) {
    CFRelease(v2);
  }
  if (gLogCategory_APSAudioFormatDescription <= 30
    && (gLogCategory_APSAudioFormatDescription != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  double result = 0.0;
  *(_OWORD *)(a1 + 80) = 0u;
  *(_OWORD *)(a1 + 96) = 0u;
  *(_OWORD *)(a1 + 48) = 0u;
  *(_OWORD *)(a1 + 64) = 0u;
  *(_OWORD *)(a1 + 16) = 0u;
  *(_OWORD *)(a1 + 32) = 0u;
  return result;
}

uint64_t APSAudioFormatDescriptionCreateWithAudioFormatIndex(uint64_t a1, uint64_t a2, uint64_t a3, void *a4)
{
  if (!a4)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  if (APSAudioFormatDescriptionGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionGetTypeID_sInitOnce, &APSAudioFormatDescriptionGetTypeID_sTypeID, (dispatch_function_t)audioFormat_getTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (Instance)
  {
    uint64_t v7 = (_DWORD *)Instance;
    *(_OWORD *)(Instance + 16) = 0u;
    *(_OWORD *)(Instance + 64) = 0u;
    *(_OWORD *)(Instance + 80) = 0u;
    *(_OWORD *)(Instance + 32) = 0u;
    *(_OWORD *)(Instance + 48) = 0u;
    *(void *)(Instance + 96) = a2;
    *(void *)(Instance + 104) = 0;
    uint64_t v8 = APAudioFormatIndexToASBD(a2, Instance + 16);
    if (v8)
    {
      uint64_t v10 = v8;
    }
    else
    {
      uint64_t v9 = a2 - 2;
      if ((unint64_t)(a2 - 2) >= 0x5A)
      {
        v7[22] = -65536;
        uint64_t v10 = 4294960561;
      }
      else
      {
        uint64_t v10 = dword_1D0C1F414[v9];
        int v11 = dword_1D0C1F57C[v9];
        v7[22] = v11;
        if (!v10)
        {
          v7[14] = v11;
          FigCFDictionaryGetBooleanIfPresent();
          if (FigCFDictionaryGetInt32IfPresent()) {
            UInt8 v7[8] = 0;
          }
          if (FigCFDictionaryGetInt32IfPresent()) {
            v7[9] = 0;
          }
          if (FigCFDictionaryGetInt32IfPresent()) {
            v7[10] = 0;
          }
          if (FigCFDictionaryGetInt32IfPresent()) {
            v7[12] = 0;
          }
          uint64_t v10 = 0;
          *a4 = v7;
          return v10;
        }
      }
      uint64_t v8 = v10;
    }
    APSLogErrorAt(v8);
    CFRelease(v7);
    return v10;
  }
  APSLogErrorAt(0);

  return FigSignalErrorAt();
}

uint64_t APSAudioFormatDescriptionCreateWithASBD(const __CFAllocator *a1, _DWORD *a2, int a3, CFTypeRef *a4)
{
  uint64_t v13 = 0;
  CFTypeRef cf = 0;
  if (!a4)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t v7 = ASBDToAPAudioFormatIndex((uint64_t)a2, a3, &v13);
  if (!v7)
  {
    CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (a2[4] && (uint64_t v9 = FigCFDictionarySetInt32(), v9))
    {
      uint64_t v11 = v9;
    }
    else if (a2[5] && (uint64_t v9 = FigCFDictionarySetInt32(), v9))
    {
      uint64_t v11 = v9;
    }
    else if (a2[6] && (uint64_t v9 = FigCFDictionarySetInt32(), v9))
    {
      uint64_t v11 = v9;
    }
    else
    {
      if (!a2[8] || (uint64_t v9 = FigCFDictionarySetInt32(), !v9))
      {
        uint64_t v10 = APSAudioFormatDescriptionCreateWithAudioFormatIndex((uint64_t)a1, v13, (uint64_t)Mutable, &cf);
        uint64_t v11 = v10;
        if (v10)
        {
          APSLogErrorAt(v10);
          if (cf) {
            CFRelease(cf);
          }
        }
        else
        {
          *a4 = cf;
          CFTypeRef cf = 0;
        }
        goto LABEL_13;
      }
      uint64_t v11 = v9;
    }
    APSLogErrorAt(v9);
LABEL_13:
    if (Mutable) {
      CFRelease(Mutable);
    }
    return v11;
  }
  uint64_t v11 = v7;
  APSLogErrorAt(v7);
  if (gLogCategory_APSAudioFormatDescription <= 50
    && (gLogCategory_APSAudioFormatDescription != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  return v11;
}

uint64_t APSAudioFormatDescriptionCreateWithFigEndpointStreamAudioFormatDescription(const __CFAllocator *a1, uint64_t a2, CFTypeRef *a3)
{
  if (a2 && a3)
  {
    uint64_t ASBD = FigEndpointStreamAudioFormatDescriptionGetASBD();
    int ChannelLayoutTag = FigEndpointStreamAudioFormatDescriptionGetChannelLayoutTag();
    long long v7 = *(_OWORD *)ASBD;
    long long v8 = *(_OWORD *)(ASBD + 16);
    uint64_t v13 = *(void *)(ASBD + 32);
    v12[0] = v7;
    v12[1] = v8;
    uint64_t v9 = APSAudioFormatDescriptionCreateWithASBD(a1, v12, ChannelLayoutTag, a3);
    uint64_t v10 = v9;
    if (v9) {
      APSLogErrorAt(v9);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v10;
}

uint64_t APSAudioFormatDescriptionCreateWithCMFormatDescription(const __CFAllocator *a1, CMAudioFormatDescriptionRef desc, void *a3)
{
  CFTypeRef v17 = 0;
  size_t sizeOut = 0;
  if (desc && a3)
  {
    RichestDecodableFormat = CMAudioFormatDescriptionGetRichestDecodableFormat(desc);
    if (!RichestDecodableFormat) {
      RichestDecodableFormat = (const AudioFormatListItem *)CMAudioFormatDescriptionGetStreamBasicDescription(desc);
    }
    ChannelLayout = CMAudioFormatDescriptionGetChannelLayout(desc, &sizeOut);
    if (ChannelLayout) {
      int mChannelLayoutTag = ChannelLayout->mChannelLayoutTag;
    }
    else {
      int mChannelLayoutTag = -65536;
    }
    long long v9 = *(_OWORD *)&RichestDecodableFormat->mASBD.mSampleRate;
    long long v10 = *(_OWORD *)&RichestDecodableFormat->mASBD.mBytesPerPacket;
    uint64_t v15 = *(void *)&RichestDecodableFormat->mASBD.mBitsPerChannel;
    v14[0] = v9;
    v14[1] = v10;
    uint64_t v11 = APSAudioFormatDescriptionCreateWithASBD(a1, v14, mChannelLayoutTag, &v17);
    uint64_t v12 = v11;
    if (v11)
    {
      APSLogErrorAt(v11);
      if (v17) {
        CFRelease(v17);
      }
    }
    else
    {
      *a3 = v17;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v12;
}

CFStringRef APSAudioFormatDescriptionCopyDebugString(uint64_t a1, CFStringRef *a2)
{
  if (a2 && a1)
  {
    uint64_t v4 = *(void *)(a1 + 96);
    CFTypeID v5 = "PCM/24000/16/1";
    switch(v4)
    {
      case 2:
        CFTypeID v5 = "PCM/8000/16/1";
        break;
      case 3:
        CFTypeID v5 = "PCM/8000/16/2";
        break;
      case 4:
        CFTypeID v5 = "PCM/16000/16/1";
        break;
      case 5:
        CFTypeID v5 = "PCM/16000/16/2";
        break;
      case 6:
        break;
      case 7:
        CFTypeID v5 = "PCM/24000/16/2";
        break;
      case 8:
        CFTypeID v5 = "PCM/32000/16/1";
        break;
      case 9:
        CFTypeID v5 = "PCM/32000/16/2";
        break;
      case 10:
        CFTypeID v5 = "PCM/44100/16/1";
        break;
      case 11:
        CFTypeID v5 = "PCM/44100/16/2";
        break;
      case 12:
        CFTypeID v5 = "PCM/44100/24/1";
        break;
      case 13:
        CFTypeID v5 = "PCM/44100/24/2";
        break;
      case 14:
        CFTypeID v5 = "PCM/48000/16/1";
        break;
      case 15:
        CFTypeID v5 = "PCM/48000/16/2";
        break;
      case 16:
        CFTypeID v5 = "PCM/48000/24/1";
        break;
      case 17:
        CFTypeID v5 = "PCM/48000/24/2";
        break;
      case 18:
        CFTypeID v5 = "ALAC/44100/16/2";
        break;
      case 19:
        CFTypeID v5 = "ALAC/44100/24/2";
        break;
      case 20:
        CFTypeID v5 = "ALAC/48000/16/2";
        break;
      case 21:
        CFTypeID v5 = "ALAC/48000/24/2";
        break;
      case 22:
        CFTypeID v5 = "AAC-LC/44100/2";
        break;
      case 23:
        CFTypeID v5 = "AAC-LC/48000/2";
        break;
      case 24:
        CFTypeID v5 = "AAC-ELD/44100/2";
        break;
      case 25:
        CFTypeID v5 = "AAC-ELD/48000/2";
        break;
      case 26:
        CFTypeID v5 = "AAC-ELD/16000/1";
        break;
      case 27:
        CFTypeID v5 = "AAC-ELD/24000/1";
        break;
      case 28:
        CFTypeID v5 = "OPUS/16000/1";
        break;
      case 29:
        CFTypeID v5 = "OPUS/24000/1";
        break;
      case 30:
        CFTypeID v5 = "OPUS/48000/1";
        break;
      case 31:
        CFTypeID v5 = "AAC-ELD/44100/1";
        break;
      case 32:
        CFTypeID v5 = "AAC-ELD/48000/1";
        break;
      case 38:
        CFTypeID v5 = "PCM/48000/16/5.1.2";
        break;
      case 39:
        CFTypeID v5 = "AAC_LC/48000/5.1";
        break;
      case 40:
        CFTypeID v5 = "AAC_LC/48000/5.1.2";
        break;
      case 41:
        CFTypeID v5 = "AAC_ELD/48000/5.1";
        break;
      case 42:
        CFTypeID v5 = "AAC_ELD/48000/5.1.2";
        break;
      case 43:
        CFTypeID v5 = "AAC-ELD/32000/1";
        break;
      case 44:
        CFTypeID v5 = "PCM/48000/16/5.1";
        break;
      case 45:
        CFTypeID v5 = "PCM/48000/32f/1";
        break;
      case 46:
        CFTypeID v5 = "PCM/48000/32f/2";
        break;
      case 47:
        CFTypeID v5 = "PCM/48000/32f/5.1";
        break;
      case 48:
        CFTypeID v5 = "PCM/48000/32f/5.1.2";
        break;
      case 49:
        CFTypeID v5 = "DDPLUS/48000/2";
        break;
      case 50:
        CFTypeID v5 = "DDPLUS/48000/5.1";
        break;
      case 51:
        CFTypeID v5 = "DDPLUS/48000/5.1.2";
        break;
      case 52:
        CFTypeID v5 = "DDPLUS/48000/7.1.4";
        break;
      case 53:
        CFTypeID v5 = "DDPLUS/48000/9.1.6";
        break;
      case 54:
        CFTypeID v5 = "QAAC/48000/2";
        break;
      case 55:
        CFTypeID v5 = "QAAC/48000/5.1";
        break;
      case 56:
        CFTypeID v5 = "QAAC/48000/5.1.2";
        break;
      case 57:
        CFTypeID v5 = "QAACHE/48000/2";
        break;
      case 58:
        CFTypeID v5 = "QAACHE/48000/5.1";
        break;
      case 60:
        CFTypeID v5 = "QAACHE/48000/5.1.2";
        break;
      case 69:
        CFTypeID v5 = "PCM/48000/32f/7.1.4";
        break;
      case 78:
        CFTypeID v5 = "PCM/48000/16/7.1";
        break;
      case 79:
        CFTypeID v5 = "PCM/48000/32f/7.1";
        break;
      case 80:
        CFTypeID v5 = "PCM/48000/16/5.1.4";
        break;
      case 81:
        CFTypeID v5 = "PCM/48000/32f/5.1.4";
        break;
      case 82:
        CFTypeID v5 = "PCM/48000/16/7.1.2";
        break;
      case 83:
        CFTypeID v5 = "PCM/48000/32f/7.1.2";
        break;
      case 84:
        CFTypeID v5 = "PCM/48000/16/7.1.4";
        break;
      case 85:
        CFTypeID v5 = "ALAC/44100/20/2";
        break;
      case 86:
        CFTypeID v5 = "ALAC/48000/20/2";
        break;
      case 90:
        CFTypeID v5 = "AAC_LC/48000/7.1";
        break;
      default:
        switch(v4)
        {
          case '!':
            CFTypeID v5 = "QC3/48000/5.1.2";
            break;
          case '""':
            CFTypeID v5 = "QC3/48000/7.1.4";
            break;
          case '#':
            CFTypeID v5 = "QC3/48000/9.1.6";
            break;
          case '$':
          case '%':
          case '&':
          case '\'':
          case '(':
          case ')':
          case '*':
          case '+':
          case ',':
          case '-':
          case '.':
          case '/':
          case '0':
          case '1':
          case '2':
          case '3':
          case '4':
          case '5':
          case '6':
          case '7':
          case '8':
          case '9':
          case ':':
          case ';':
          case '<':
          case 'E':
          case 'K':
LABEL_90:
            if (v4 == 75) {
              CFTypeID v5 = "MP3/48000/2";
            }
            else {
              CFTypeID v5 = "";
            }
            break;
          case '=':
            CFTypeID v5 = "QLAC/48000/24/2";
            break;
          case '>':
            CFTypeID v5 = "QC3/48000/2";
            break;
          case '?':
            CFTypeID v5 = "QC3/48000/5.1";
            break;
          case '@':
            CFTypeID v5 = "APAC/48000/2";
            break;
          case 'A':
            CFTypeID v5 = "APAC/48000/5.1";
            break;
          case 'B':
            CFTypeID v5 = "APAC/48000/5.1.2";
            break;
          case 'C':
            CFTypeID v5 = "APAC/48000/7.1";
            break;
          case 'D':
            CFTypeID v5 = "APAC/48000/7.1.4";
            break;
          case 'F':
            CFTypeID v5 = "QAAC/44100/2";
            break;
          case 'G':
            CFTypeID v5 = "QAACHE/44100/2";
            break;
          case 'H':
            CFTypeID v5 = "QAACHEV2/44100/2";
            break;
          case 'I':
            CFTypeID v5 = "QLAC/44100/24/2";
            break;
          case 'J':
            CFTypeID v5 = "MP3/44100/2";
            break;
          case 'L':
            CFTypeID v5 = "APAC/48000/5.1.4";
            break;
          case 'M':
            CFTypeID v5 = "APAC/48000/7.1.2";
            break;
          default:
            CFTypeID v5 = "PAAC/44100/2";
            switch(v4)
            {
              case 'W':
                CFTypeID v5 = "QAC3/48000/5.1";
                break;
              case 'X':
                CFTypeID v5 = "QEC3/48000/7.1";
                break;
              case 'Y':
                goto LABEL_69;
              case '[':
                CFTypeID v5 = "EAC3/48000/5.1";
                break;
              default:
                goto LABEL_90;
            }
            break;
        }
        break;
    }
LABEL_69:
    CFStringRef result = CFStringCreateWithCString((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v5, 0x8000100u);
    *a2 = result;
  }
  else
  {
    return (CFStringRef)APSLogErrorAt(0);
  }
  return result;
}

uint64_t APSAudioFormatDescriptionGetASBD(uint64_t a1)
{
  if (a1) {
    return a1 + 16;
  }
  APSLogErrorAt(a1);
  return 0;
}

uint64_t APSAudioFormatDescriptionGetAudioChannelLayout(uint64_t a1)
{
  if (a1) {
    return a1 + 56;
  }
  APSLogErrorAt(a1);
  return 0;
}

uint64_t APSAudioFormatDescriptionGetChannelLayoutTag(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 56);
  }
  APSLogErrorAt(0);
  return 4294901760;
}

uint64_t APSAudioFormatDescriptionGetAudioFormatIndex(uint64_t result)
{
  if (result) {
    return *(void *)(result + 96);
  }
  return result;
}

uint64_t APSAudioFormatDescriptionGetLegacyFormatMask(uint64_t a1)
{
  if (a1)
  {
    unint64_t v1 = *(void *)(a1 + 96);
    if (v1 >= 0x40) {
      return 0;
    }
    else {
      return 1 << v1;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

double APSAudioFormatDescriptionGetSampleRate(uint64_t a1)
{
  if (a1) {
    return *(double *)(a1 + 16);
  }
  APSLogErrorAt(0);
  return 0.0;
}

uint64_t APSAudioFormatDescriptionGetCompressionType(uint64_t a1)
{
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  uint64_t result = 0;
  unint64_t v3 = *(void *)(a1 + 96);
  uint64_t v4 = 1;
  if (v3 >= 0x40) {
    uint64_t v5 = 0;
  }
  else {
    uint64_t v5 = 1 << v3;
  }
  if (v5 <= 0x7FFFFFFFFFLL)
  {
    if (v5 >= 0x80000)
    {
      if (v5 > 0xFFFFFF)
      {
        if (v5 > 0x1FFFFFFFFLL)
        {
          if (v5 == 0x200000000 || v5 == 0x400000000) {
            return 1902207331;
          }
          uint64_t v7 = 0x800000000;
          goto LABEL_48;
        }
        if (v5 == 0x1000000 || v5 == 0x2000000) {
          return 8;
        }
        return result;
      }
      if (v5 < 0x200000)
      {
        if (v5 != 0x80000 && v5 != 0x100000) {
          return result;
        }
      }
      else if (v5 != 0x200000)
      {
        if (v5 == 0x400000 || v5 == 0x800000) {
          return 4;
        }
        return result;
      }
    }
    else
    {
      if (v5 <= 2047)
      {
        if (v5 <= 31)
        {
          if (v5 != 0x8000000000000000)
          {
            if (v5 != 8) {
              return result;
            }
            return v4;
          }
          return 1902207331;
        }
        if (v5 == 32 || v5 == 128 || v5 == 512) {
          return v4;
        }
        return result;
      }
      if (v5 < 0x8000)
      {
        if (v5 == 2048 || v5 == 0x2000) {
          return v4;
        }
        return result;
      }
      if (v5 == 0x8000 || v5 == 0x20000) {
        return v4;
      }
      if (v5 != 0x40000) {
        return result;
      }
    }
    return 2;
  }
  if (v5 > 0x7FFFFFFFFFFFFLL)
  {
    if (v5 > 0xFFFFFFFFFFFFFFLL)
    {
      if (v5 <= 0xFFFFFFFFFFFFFFFLL)
      {
        if (v5 != 0x100000000000000)
        {
          if (v5 != 0x200000000000000 && v5 != 0x400000000000000) {
            return result;
          }
          return 1902207848;
        }
        return 1902207331;
      }
      if (v5 == 0x1000000000000000) {
        return 1902207848;
      }
      if (v5 == 0x2000000000000000) {
        return 1902928227;
      }
      uint64_t v8 = 0x4000000000000000;
      goto LABEL_66;
    }
    if (v5 > 0x1FFFFFFFFFFFFFLL)
    {
      if (v5 != 0x20000000000000)
      {
        if (v5 == 0x40000000000000) {
          return 1902207331;
        }
        uint64_t v7 = 0x80000000000000;
LABEL_48:
        if (v5 != v7) {
          return result;
        }
        return 1902207331;
      }
      return 128;
    }
    if (v5 == 0x8000000000000) {
      return 128;
    }
    uint64_t v8 = 0x10000000000000;
LABEL_66:
    if (v5 != v8) {
      return result;
    }
    return 128;
  }
  if (v5 > 0x3FFFFFFFFFFFLL)
  {
    if (v5 > 0xFFFFFFFFFFFFLL)
    {
      if (v5 == 0x1000000000000) {
        return v4;
      }
      if (v5 == 0x2000000000000) {
        return 128;
      }
      uint64_t v8 = 0x4000000000000;
      goto LABEL_66;
    }
    if (v5 == 0x400000000000) {
      return v4;
    }
    uint64_t v6 = 0x800000000000;
LABEL_73:
    if (v5 != v6) {
      return result;
    }
    return v4;
  }
  if (v5 > 0x1FFFFFFFFFFLL)
  {
    if (v5 != 0x20000000000 && v5 != 0x40000000000)
    {
      uint64_t v6 = 0x200000000000;
      goto LABEL_73;
    }
    return 8;
  }
  if (v5 == 0x8000000000 || v5 == 0x10000000000) {
    return 4;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionGetFormatID(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 24);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionGetFramesPerPacket(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 36);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionGetChannelCount(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 44);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionGetBitsPerChannel(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 48);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionCopyFigEndpointStreamAudioFormatDescription(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if (a2 && a3)
  {
    uint64_t v3 = FigEndpointStreamAudioFormatDescriptionCreate();
    uint64_t v4 = v3;
    if (v3) {
      APSLogErrorAt(v3);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v4;
}

uint64_t APSAPACApplyIndependentDecodableDependancy(opaqueCMSampleBuffer *a1)
{
  CFTypeRef cf = 0;
  if (!a1)
  {
    APSLogErrorAt(0);
    return 0;
  }
  FormatDescriptiouint64_t n = CMSampleBufferGetFormatDescription(a1);
  if (!FormatDescription) {
    return 0;
  }
  uint64_t v3 = APSAudioFormatDescriptionCreateWithCMFormatDescription((const __CFAllocator *)*MEMORY[0x1E4F1CF80], FormatDescription, &cf);
  if (v3)
  {
    uint64_t v10 = v3;
    APSLogErrorAt(v3);
    SInt16 = 0;
    goto LABEL_19;
  }
  CFTypeRef v4 = cf;
  if (cf)
  {
    int v5 = *((_DWORD *)cf + 6);
    if (v5 != 1634754915 && v5 != 1902211171 && v5 != 1667330147)
    {
      SInt16 = 0;
      uint64_t v10 = 0;
LABEL_20:
      CFRelease(v4);
LABEL_21:
      if (SInt16) {
        CFRelease(SInt16);
      }
      return v10;
    }
    SInt16 = (const void *)FigCFNumberCreateSInt16();
    if (SInt16)
    {
      uint64_t v8 = (const void *)*MEMORY[0x1E4F1CFC8];
      CMSetAttachment(a1, (CFStringRef)*MEMORY[0x1E4F1F188], SInt16, 1u);
      CMSetAttachment(a1, (CFStringRef)*MEMORY[0x1E4F1F200], v8, 1u);
      if (gLogCategory_APSAPACSupport <= 10
        && (gLogCategory_APSAPACSupport != -1 || _LogCategory_Initialize()))
      {
        LogPrintF();
      }
      uint64_t v10 = 0;
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v10 = 4294954510;
    }
LABEL_19:
    CFTypeRef v4 = cf;
    if (!cf) {
      goto LABEL_21;
    }
    goto LABEL_20;
  }
  uint64_t result = APSLogErrorAt(0);
  __break(1u);
  return result;
}

uint64_t APSAudioFormatDescriptionListGetTypeID()
{
  if (APSAudioFormatDescriptionListGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionListGetTypeID_sInitOnce, &APSAudioFormatDescriptionListGetTypeID_sTypeID, (dispatch_function_t)audioFormatList_getTypeID);
  }
  return APSAudioFormatDescriptionListGetTypeID_sTypeID;
}

uint64_t audioFormatList_getTypeID(uint64_t *a1)
{
  uint64_t result = _CFRuntimeRegisterClass();
  *a1 = result;
  return result;
}

__CFString *audioFormatList_CopyDebugDescription(uint64_t a1)
{
  CFMutableDictionaryRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  uint64_t v3 = Mutable;
  if (Mutable) {
    CFStringAppendFormat(Mutable, 0, @"<APSAudioFormatDescriptionList %p> %@", a1, *(void *)(a1 + 16));
  }
  else {
    APSLogErrorAt(0);
  }
  return v3;
}

BOOL audioFormatList_Equal(const void *a1, const void *a2)
{
  CFArrayRef v15 = 0;
  CFArrayRef theArray = 0;
  if (!a1) {
    goto LABEL_20;
  }
  CFTypeID v4 = CFGetTypeID(a1);
  if (APSAudioFormatDescriptionListGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionListGetTypeID_sInitOnce, &APSAudioFormatDescriptionListGetTypeID_sTypeID, (dispatch_function_t)audioFormatList_getTypeID);
  }
  if (v4 != APSAudioFormatDescriptionListGetTypeID_sTypeID)
  {
LABEL_20:
    uint64_t v6 = 0;
LABEL_22:
    APSLogErrorAt(v6);
    goto LABEL_23;
  }
  if (!a2) {
    goto LABEL_21;
  }
  CFTypeID v5 = CFGetTypeID(a2);
  if (APSAudioFormatDescriptionListGetTypeID_sInitOnce != -1) {
    dispatch_once_f(&APSAudioFormatDescriptionListGetTypeID_sInitOnce, &APSAudioFormatDescriptionListGetTypeID_sTypeID, (dispatch_function_t)audioFormatList_getTypeID);
  }
  if (v5 != APSAudioFormatDescriptionListGetTypeID_sTypeID)
  {
LABEL_21:
    uint64_t v6 = 0;
    goto LABEL_22;
  }
  uint64_t v6 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray((uint64_t)a1, (uint64_t *)&theArray);
  if (v6) {
    goto LABEL_22;
  }
  uint64_t v6 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray((uint64_t)a2, (uint64_t *)&v15);
  if (v6) {
    goto LABEL_22;
  }
  CFIndex Count = CFArrayGetCount(theArray);
  if (Count == CFArrayGetCount(v15))
  {
    CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    CFMutableArrayRef MutableCopy = CFArrayCreateMutableCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, theArray);
    if (MutableCopy)
    {
      CFArrayRef v10 = MutableCopy;
      CFMutableArrayRef v11 = CFArrayCreateMutableCopy(v8, 0, v15);
      if (v11)
      {
        CFArrayRef v12 = v11;
        v17.unsigned int length = CFArrayGetCount(v10);
        v17.locatiouint64_t n = 0;
        CFArraySortValues(v10, v17, (CFComparatorFunction)audioFormatList_objComparatorX, 0);
        v18.unsigned int length = CFArrayGetCount(v12);
        v18.locatiouint64_t n = 0;
        CFArraySortValues(v12, v18, (CFComparatorFunction)audioFormatList_objComparatorX, 0);
        BOOL v13 = CFEqual(v10, v12) != 0;
        CFRelease(v10);
        CFRelease(v12);
        goto LABEL_15;
      }
      CFRelease(v10);
    }
  }
LABEL_23:
  BOOL v13 = 0;
LABEL_15:
  if (theArray) {
    CFRelease(theArray);
  }
  if (v15) {
    CFRelease(v15);
  }
  return v13;
}

uint64_t APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(uint64_t a1, uint64_t *a2)
{
  if (a1 && a2 && (uint64_t v3 = FigCFDictionaryCopyArrayOfValues()) != 0)
  {
    uint64_t v4 = v3;
    uint64_t result = 0;
    *a2 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return result;
}

uint64_t audioFormatList_objComparatorX(uint64_t a1, uint64_t a2)
{
  if (a1)
  {
    unint64_t v2 = *(void *)(a1 + 96);
    if (a2)
    {
LABEL_3:
      unint64_t v3 = *(void *)(a2 + 96);
      goto LABEL_4;
    }
  }
  else
  {
    unint64_t v2 = 0;
    if (a2) {
      goto LABEL_3;
    }
  }
  unint64_t v3 = 0;
LABEL_4:
  BOOL v4 = v2 > v3;
  if (v2 >= v3) {
    uint64_t v5 = 0;
  }
  else {
    uint64_t v5 = -1;
  }
  if (v4) {
    return 1;
  }
  else {
    return v5;
  }
}

void audioFormatList_Finalize(void *a1)
{
  if (gLogCategory_APSAudioFormatDescriptionList <= 30
    && (gLogCategory_APSAudioFormatDescriptionList != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  unint64_t v2 = (const void *)a1[2];
  if (v2)
  {
    CFRelease(v2);
    a1[2] = 0;
  }
  unint64_t v3 = (const void *)a1[3];
  if (v3)
  {
    CFRelease(v3);
    a1[3] = 0;
  }
  BOOL v4 = (const void *)a1[4];
  if (v4)
  {
    CFRelease(v4);
    a1[4] = 0;
  }
  uint64_t v5 = (const void *)a1[6];
  if (v5)
  {
    CFRelease(v5);
    a1[6] = 0;
  }
  uint64_t v6 = (const void *)a1[5];
  if (v6)
  {
    CFRelease(v6);
    a1[5] = 0;
  }
}

uint64_t APSAudioFormatDescriptionListCreate(const __CFAllocator *a1, void *a2)
{
  if (a2)
  {
    if (APSAudioFormatDescriptionListGetTypeID_sInitOnce != -1) {
      dispatch_once_f(&APSAudioFormatDescriptionListGetTypeID_sInitOnce, &APSAudioFormatDescriptionListGetTypeID_sTypeID, (dispatch_function_t)audioFormatList_getTypeID);
    }
    uint64_t Instance = (_OWORD *)_CFRuntimeCreateInstance();
    if (Instance)
    {
      uint64_t v5 = Instance;
      Instance[2] = 0u;
      Instance[3] = 0u;
      Instance[1] = 0u;
      CFMutableDictionaryRef Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      *((void *)v5 + 2) = Mutable;
      if (Mutable
        && (uint64_t v7 = (const CFDictionaryKeyCallBacks *)MEMORY[0x1E4F1D530],
            CFAllocatorRef v8 = (const CFDictionaryValueCallBacks *)MEMORY[0x1E4F1D540],
            *((void *)v5 + 6) = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]),
            CFMutableDictionaryRef v9 = CFDictionaryCreateMutable(a1, 0, v7, v8),
            (*((void *)v5 + 5) = v9) != 0))
      {
        uint64_t result = 0;
        *((_DWORD *)v5 + 14) = 0;
        *((_WORD *)v5 + 30) = 0;
        *((void *)v5 + 3) = 0;
        *((void *)v5 + 4) = 0;
        *a2 = v5;
      }
      else
      {
        APSLogErrorAt(0);
        CFRelease(v5);
        return 4294954510;
      }
    }
    else
    {
      APSLogErrorAt(0);
      return FigSignalErrorAt();
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return result;
}

void APSAudioFormatDescriptionListCopyDebugString(uint64_t a1, void *a2)
{
  CFTypeRef cf = 0;
  CFArrayRef theArray = 0;
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    goto LABEL_12;
  }
  uint64_t Mutable = (uint64_t)CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  uint64_t v5 = (const void *)Mutable;
  if (Mutable)
  {
    uint64_t Mutable = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a1, (uint64_t *)&theArray);
    if (!Mutable)
    {
      CFIndex Count = CFArrayGetCount(theArray);
      if (Count >= 1)
      {
        CFIndex v7 = Count;
        CFIndex v8 = 0;
        do
        {
          CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v8);
          APSAudioFormatDescriptionCopyDebugString((uint64_t)ValueAtIndex, (CFStringRef *)&cf);
          uint64_t Mutable = CFStringAppendF();
          if (Mutable) {
            goto LABEL_20;
          }
          if (cf)
          {
            CFRelease(cf);
            CFTypeRef cf = 0;
          }
        }
        while (v7 != ++v8);
      }
      *a2 = v5;
LABEL_12:
      uint64_t v5 = 0;
      goto LABEL_13;
    }
  }
LABEL_20:
  APSLogErrorAt(Mutable);
LABEL_13:
  if (theArray) {
    CFRelease(theArray);
  }
  if (cf) {
    CFRelease(cf);
  }
  if (v5) {
    CFRelease(v5);
  }
}

uint64_t APSAudioFormatDescriptionListCreateWithAudioFormatDescriptionArray(const __CFAllocator *a1, const __CFArray *a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  if (a3)
  {
    uint64_t v5 = APSAudioFormatDescriptionListCreate(a1, &cf);
    if (v5)
    {
      uint64_t v12 = v5;
LABEL_17:
      APSLogErrorAt(v5);
    }
    else
    {
      CFIndex v6 = 0;
      while (1)
      {
        if (a2) {
          CFIndex Count = CFArrayGetCount(a2);
        }
        else {
          CFIndex Count = 0;
        }
        if (v6 >= Count)
        {
          uint64_t v12 = 0;
          *a3 = cf;
          return v12;
        }
        CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(a2, v6);
        if (!ValueAtIndex) {
          break;
        }
        uint64_t v9 = (uint64_t)ValueAtIndex;
        CFTypeID v10 = CFGetTypeID(ValueAtIndex);
        if (APSAudioFormatDescriptionGetTypeID_sInitOnce != -1) {
          dispatch_once_f(&APSAudioFormatDescriptionGetTypeID_sInitOnce, &APSAudioFormatDescriptionGetTypeID_sTypeID, (dispatch_function_t)audioFormat_getTypeID);
        }
        if (v10 != APSAudioFormatDescriptionGetTypeID_sTypeID) {
          break;
        }
        uint64_t v5 = APSAudioFormatDescriptionListAddFormat((uint64_t)cf, v9);
        ++v6;
        if (v5)
        {
          uint64_t v12 = v5;
          goto LABEL_17;
        }
      }
      APSLogErrorAt(0);
      uint64_t v12 = 4294954516;
    }
    if (cf) {
      CFRelease(cf);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v12;
}

uint64_t APSAudioFormatDescriptionListAddFormat(uint64_t a1, uint64_t a2)
{
  CFStringRef key = 0;
  *(_DWORD *)UInt8 bytes = -65536;
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    Suint64_t Int32 = 0;
    CFStringRef v9 = 0;
    CFDataRef v10 = 0;
    uint64_t v18 = 4294954516;
    goto LABEL_45;
  }
  unsigned int v4 = *(_DWORD *)(a2 + 44);
  if (*(_DWORD *)(a1 + 56) > v4) {
    unsigned int v4 = *(_DWORD *)(a1 + 56);
  }
  *(_DWORD *)(a1 + 56) = v4;
  double v5 = *(double *)(a2 + 16);
  if (v5 == 44100.0)
  {
    *(unsigned char *)(a1 + 61) = 1;
  }
  else if (v5 == 48000.0)
  {
    *(unsigned char *)(a1 + 60) = 1;
  }
  CFIndex v6 = 0;
  int v7 = *(_DWORD *)(a2 + 56);
  *(_DWORD *)UInt8 bytes = v7;
  if (v7 <= 12582923)
  {
    if (v7 > 8126469)
    {
      if (v7 == 8126470)
      {
        CFIndex v6 = @"5_1";
      }
      else if (v7 == 8388616)
      {
        CFIndex v6 = @"7_1";
      }
    }
    else if (v7 == 6553601)
    {
      CFIndex v6 = @"Mono";
    }
    else if (v7 == 6619138)
    {
      CFIndex v6 = @"Stereo";
    }
  }
  else if (v7 <= 12713991)
  {
    if (v7 == 12582924)
    {
      CFIndex v6 = @"7_1_4";
    }
    else if (v7 == 12648464)
    {
      CFIndex v6 = @"9_1_6";
    }
  }
  else
  {
    switch(v7)
    {
      case 12713992:
        CFIndex v6 = @"5_1_2";
        break;
      case 12779530:
        CFIndex v6 = @"5_1_4";
        break;
      case 12845066:
        CFIndex v6 = @"7_1_2";
        break;
    }
  }
  CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFStringRef v9 = CFStringCreateWithFormat((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, @"ChannelLayoutTag:%@", v6);
  if (!v9)
  {
    APSLogErrorAt(0);
    Suint64_t Int32 = 0;
    CFDataRef v10 = 0;
LABEL_58:
    uint64_t v18 = 4294954510;
    goto LABEL_45;
  }
  CFDataRef v10 = CFDataCreate(v8, bytes, 4);
  if (!v10)
  {
    APSLogErrorAt(0);
    Suint64_t Int32 = 0;
    goto LABEL_58;
  }
  CFDictionaryAddValue(*(CFMutableDictionaryRef *)(a1 + 48), v9, v10);
  Suint64_t Int32 = (const void *)FigCFNumberCreateSInt32();
  if (!SInt32)
  {
    APSLogErrorAt(0);
    goto LABEL_58;
  }
  CFDictionaryAddValue(*(CFMutableDictionaryRef *)(a1 + 40), SInt32, (const void *)*MEMORY[0x1E4F1CFD0]);
  uint64_t v12 = audioFormatList_copyHashedKeyFromAudioFormatDescription(a2, (CFStringRef *)&key);
  if (!v12)
  {
    uint64_t v13 = *(void *)(a1 + 32);
    if (!v13)
    {
      *(void *)(a1 + 32) = CFRetain((CFTypeRef)a2);
      goto LABEL_44;
    }
    unsigned int v14 = *(_DWORD *)(a2 + 44);
    unsigned int v15 = *(_DWORD *)(v13 + 44);
    if (v14 <= v15)
    {
      if (v14 != v15) {
        goto LABEL_44;
      }
      if (v14 > 2)
      {
        int v16 = *(_DWORD *)(v13 + 56);
        FullRangeChannelCountFroint mChannelLayoutTag = APSAudioFormatGetFullRangeChannelCountFromChannelLayoutTag(*(_DWORD *)(a2 + 56));
        if (FullRangeChannelCountFromChannelLayoutTag <= APSAudioFormatGetFullRangeChannelCountFromChannelLayoutTag(v16)) {
          goto LABEL_44;
        }
        uint64_t v13 = *(void *)(a1 + 32);
        *(void *)(a1 + 32) = a2;
        CFRetain((CFTypeRef)a2);
        if (!v13) {
          goto LABEL_44;
        }
        goto LABEL_37;
      }
      if (*(double *)(a2 + 16) <= *(double *)(v13 + 16)) {
        goto LABEL_44;
      }
    }
    *(void *)(a1 + 32) = a2;
    CFRetain((CFTypeRef)a2);
LABEL_37:
    CFRelease((CFTypeRef)v13);
LABEL_44:
    CFDictionaryAddValue(*(CFMutableDictionaryRef *)(a1 + 16), key, (const void *)a2);
    uint64_t v18 = 0;
    goto LABEL_45;
  }
  uint64_t v18 = v12;
  APSLogErrorAt(v12);
LABEL_45:
  if (key) {
    CFRelease(key);
  }
  if (SInt32) {
    CFRelease(SInt32);
  }
  if (v9) {
    CFRelease(v9);
  }
  if (v10) {
    CFRelease(v10);
  }
  return v18;
}

uint64_t audioFormatList_copyHashedKeyFromAudioFormatDescription(uint64_t a1, CFStringRef *a2)
{
  if (a2)
  {
    if (a1)
    {
      uint64_t v3 = *(void *)(a1 + 96);
      CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
      double v5 = "PCM/24000/16/1";
      switch(v3)
      {
        case 2:
          double v5 = "PCM/8000/16/1";
          break;
        case 3:
          double v5 = "PCM/8000/16/2";
          break;
        case 4:
          double v5 = "PCM/16000/16/1";
          break;
        case 5:
          double v5 = "PCM/16000/16/2";
          break;
        case 6:
          break;
        case 7:
          double v5 = "PCM/24000/16/2";
          break;
        case 8:
          double v5 = "PCM/32000/16/1";
          break;
        case 9:
          double v5 = "PCM/32000/16/2";
          break;
        case 10:
          double v5 = "PCM/44100/16/1";
          break;
        case 11:
          double v5 = "PCM/44100/16/2";
          break;
        case 12:
          double v5 = "PCM/44100/24/1";
          break;
        case 13:
          double v5 = "PCM/44100/24/2";
          break;
        case 14:
          double v5 = "PCM/48000/16/1";
          break;
        case 15:
          double v5 = "PCM/48000/16/2";
          break;
        case 16:
          double v5 = "PCM/48000/24/1";
          break;
        case 17:
          double v5 = "PCM/48000/24/2";
          break;
        case 18:
          double v5 = "ALAC/44100/16/2";
          break;
        case 19:
          double v5 = "ALAC/44100/24/2";
          break;
        case 20:
          double v5 = "ALAC/48000/16/2";
          break;
        case 21:
          double v5 = "ALAC/48000/24/2";
          break;
        case 22:
          double v5 = "AAC-LC/44100/2";
          break;
        case 23:
          double v5 = "AAC-LC/48000/2";
          break;
        case 24:
          double v5 = "AAC-ELD/44100/2";
          break;
        case 25:
          double v5 = "AAC-ELD/48000/2";
          break;
        case 26:
          double v5 = "AAC-ELD/16000/1";
          break;
        case 27:
          double v5 = "AAC-ELD/24000/1";
          break;
        case 28:
          double v5 = "OPUS/16000/1";
          break;
        case 29:
          double v5 = "OPUS/24000/1";
          break;
        case 30:
          double v5 = "OPUS/48000/1";
          break;
        case 31:
          double v5 = "AAC-ELD/44100/1";
          break;
        case 32:
          double v5 = "AAC-ELD/48000/1";
          break;
        case 38:
          double v5 = "PCM/48000/16/5.1.2";
          break;
        case 39:
          double v5 = "AAC_LC/48000/5.1";
          break;
        case 40:
          double v5 = "AAC_LC/48000/5.1.2";
          break;
        case 41:
          double v5 = "AAC_ELD/48000/5.1";
          break;
        case 42:
          double v5 = "AAC_ELD/48000/5.1.2";
          break;
        case 43:
          double v5 = "AAC-ELD/32000/1";
          break;
        case 44:
          double v5 = "PCM/48000/16/5.1";
          break;
        case 45:
          double v5 = "PCM/48000/32f/1";
          break;
        case 46:
          double v5 = "PCM/48000/32f/2";
          break;
        case 47:
          double v5 = "PCM/48000/32f/5.1";
          break;
        case 48:
          double v5 = "PCM/48000/32f/5.1.2";
          break;
        case 49:
          double v5 = "DDPLUS/48000/2";
          break;
        case 50:
          double v5 = "DDPLUS/48000/5.1";
          break;
        case 51:
          double v5 = "DDPLUS/48000/5.1.2";
          break;
        case 52:
          double v5 = "DDPLUS/48000/7.1.4";
          break;
        case 53:
          double v5 = "DDPLUS/48000/9.1.6";
          break;
        case 54:
          double v5 = "QAAC/48000/2";
          break;
        case 55:
          double v5 = "QAAC/48000/5.1";
          break;
        case 56:
          double v5 = "QAAC/48000/5.1.2";
          break;
        case 57:
          double v5 = "QAACHE/48000/2";
          break;
        case 58:
          double v5 = "QAACHE/48000/5.1";
          break;
        case 60:
          double v5 = "QAACHE/48000/5.1.2";
          break;
        case 69:
          double v5 = "PCM/48000/32f/7.1.4";
          break;
        case 78:
          double v5 = "PCM/48000/16/7.1";
          break;
        case 79:
          double v5 = "PCM/48000/32f/7.1";
          break;
        case 80:
          double v5 = "PCM/48000/16/5.1.4";
          break;
        case 81:
          double v5 = "PCM/48000/32f/5.1.4";
          break;
        case 82:
          double v5 = "PCM/48000/16/7.1.2";
          break;
        case 83:
          double v5 = "PCM/48000/32f/7.1.2";
          break;
        case 84:
          double v5 = "PCM/48000/16/7.1.4";
          break;
        case 85:
          double v5 = "ALAC/44100/20/2";
          break;
        case 86:
          double v5 = "ALAC/48000/20/2";
          break;
        case 90:
          double v5 = "AAC_LC/48000/7.1";
          break;
        default:
          switch(v3)
          {
            case '!':
              double v5 = "QC3/48000/5.1.2";
              break;
            case '""':
              double v5 = "QC3/48000/7.1.4";
              break;
            case '#':
              double v5 = "QC3/48000/9.1.6";
              break;
            case '$':
            case '%':
            case '&':
            case '\'':
            case '(':
            case ')':
            case '*':
            case '+':
            case ',':
            case '-':
            case '.':
            case '/':
            case '0':
            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
            case '6':
            case '7':
            case '8':
            case '9':
            case ':':
            case ';':
            case '<':
            case 'E':
              goto LABEL_95;
            case '=':
              double v5 = "QLAC/48000/24/2";
              break;
            case '>':
              double v5 = "QC3/48000/2";
              break;
            case '?':
              double v5 = "QC3/48000/5.1";
              break;
            case '@':
              double v5 = "APAC/48000/2";
              break;
            case 'A':
              double v5 = "APAC/48000/5.1";
              break;
            case 'B':
              double v5 = "APAC/48000/5.1.2";
              break;
            case 'C':
              double v5 = "APAC/48000/7.1";
              break;
            case 'D':
              double v5 = "APAC/48000/7.1.4";
              break;
            case 'F':
              double v5 = "QAAC/44100/2";
              break;
            case 'G':
              double v5 = "QAACHE/44100/2";
              break;
            case 'H':
              double v5 = "QAACHEV2/44100/2";
              break;
            case 'I':
              double v5 = "QLAC/44100/24/2";
              break;
            case 'J':
              double v5 = "MP3/44100/2";
              break;
            case 'K':
              double v5 = "MP3/48000/2";
              uint64_t v3 = 75;
              break;
            case 'L':
              double v5 = "APAC/48000/5.1.4";
              break;
            case 'M':
              double v5 = "APAC/48000/7.1.2";
              break;
            default:
              double v5 = "PAAC/44100/2";
              switch(v3)
              {
                case 'W':
                  double v5 = "QAC3/48000/5.1";
                  break;
                case 'X':
                  double v5 = "QEC3/48000/7.1";
                  break;
                case 'Y':
                  goto LABEL_69;
                case '[':
                  double v5 = "EAC3/48000/5.1";
                  break;
                default:
                  goto LABEL_95;
              }
              break;
          }
          break;
      }
    }
    else
    {
      uint64_t v3 = 0;
      CFAllocatorRef v4 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
LABEL_95:
      double v5 = "";
    }
LABEL_69:
    CFStringRef v6 = CFStringCreateWithFormat(v4, 0, @"Index_%llu:%s", v3, v5);
    if (v6)
    {
      CFStringRef v7 = v6;
      uint64_t result = 0;
      *a2 = v7;
    }
    else
    {
      APSLogErrorAt(0);
      return 4294954510;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionListContainsFormat(uint64_t a1, uint64_t a2)
{
  uint64_t v2 = a1;
  CFStringRef key = 0;
  if (!a1)
  {
    APSLogErrorAt(0);
    return v2;
  }
  if (a2)
  {
    uint64_t v3 = audioFormatList_copyHashedKeyFromAudioFormatDescription(a2, (CFStringRef *)&key);
    if (!v3)
    {
      uint64_t v2 = CFDictionaryContainsKey(*(CFDictionaryRef *)(v2 + 16), key);
      goto LABEL_5;
    }
  }
  else
  {
    uint64_t v3 = 0;
  }
  APSLogErrorAt(v3);
  uint64_t v2 = 0;
LABEL_5:
  if (key) {
    CFRelease(key);
  }
  return v2;
}

uint64_t APSAudioFormatDescriptionListAddListToSource(uint64_t a1, uint64_t a2)
{
  if (!a1 || !a2)
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  uint64_t MutableCopy = FigCFDictionaryCreateMutableCopy();
  if (!MutableCopy)
  {
    APSLogErrorAt(0);
    return 4294954510;
  }
  double v5 = (const void *)MutableCopy;
  CFDictionaryMergeDictionary();
  CFStringRef v6 = *(const void **)(a1 + 16);
  *(void *)(a1 + 16) = v5;
  CFRetain(v5);
  if (v6) {
    CFRelease(v6);
  }
  uint64_t v7 = FigCFDictionaryCreateMutableCopy();
  if (!v7)
  {
    APSLogErrorAt(0);
    CFRelease(v5);
    return 4294954510;
  }
  CFAllocatorRef v8 = (const void *)v7;
  CFDictionaryMergeDictionary();
  CFStringRef v9 = *(const void **)(a1 + 40);
  *(void *)(a1 + 40) = v8;
  CFRetain(v8);
  if (v9) {
    CFRelease(v9);
  }
  unsigned int v10 = *(_DWORD *)(a1 + 56);
  if (v10 <= *(_DWORD *)(a2 + 56)) {
    unsigned int v10 = *(_DWORD *)(a2 + 56);
  }
  *(_DWORD *)(a1 + 56) = v10;
  if (*(unsigned char *)(a1 + 61) || *(unsigned char *)(a2 + 61)) {
    *(unsigned char *)(a1 + 61) = 1;
  }
  if (*(unsigned char *)(a1 + 60) || *(unsigned char *)(a2 + 60)) {
    *(unsigned char *)(a1 + 60) = 1;
  }
  CFRelease(v5);
  CFRelease(v8);
  return 0;
}

uint64_t APSAudioFormatDescriptionListSupports44kHz(uint64_t a1)
{
  if (a1) {
    return *(unsigned __int8 *)(a1 + 61);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionListSupports48kHz(uint64_t a1)
{
  if (a1) {
    return *(unsigned __int8 *)(a1 + 60);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionListCreateIntersectionList(uint64_t a1, uint64_t a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  if (a1)
  {
    if (a2 && a3)
    {
      APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &cf);
      if (cf)
      {
        CFArrayRef v5 = (const __CFArray *)FigCFDictionaryCopyArrayOfKeys();
        CFIndex v6 = 0;
        if (!v5) {
          goto LABEL_7;
        }
LABEL_6:
        for (CFIndex i = CFArrayGetCount(v5); ; CFIndex i = 0)
        {
          if (v6 >= i)
          {
            uint64_t v11 = 0;
            *a3 = cf;
            CFTypeRef cf = 0;
            goto LABEL_14;
          }
          CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(v5, v6);
          if (CFDictionaryContainsKey(*(CFDictionaryRef *)(a2 + 16), ValueAtIndex))
          {
            CFStringRef Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a2 + 16), ValueAtIndex);
            uint64_t v10 = APSAudioFormatDescriptionListAddFormat((uint64_t)cf, (uint64_t)Value);
            if (v10) {
              break;
            }
          }
          ++v6;
          if (v5) {
            goto LABEL_6;
          }
LABEL_7:
          ;
        }
        uint64_t v11 = v10;
        APSLogErrorAt(v10);
      }
      else
      {
        APSLogErrorAt(0);
        CFArrayRef v5 = 0;
        uint64_t v11 = 4294954510;
      }
    }
    else
    {
      APSLogErrorAt(0);
      CFArrayRef v5 = 0;
      uint64_t v11 = 4294954516;
    }
    if (cf) {
      CFRelease(cf);
    }
LABEL_14:
    if (v5) {
      CFRelease(v5);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v11;
}

uint64_t APSAudioFormatDescriptionListCreateRelativeComplementList(uint64_t a1, uint64_t a2, CFTypeRef *a3)
{
  CFTypeRef cf = 0;
  if (a1 && a2 && a3)
  {
    APSAudioFormatDescriptionListCreate((const __CFAllocator *)*MEMORY[0x1E4F1CF80], &cf);
    CFArrayRef v6 = (const __CFArray *)FigCFDictionaryCopyArrayOfKeys();
    CFIndex v7 = 0;
    if (!v6) {
      goto LABEL_6;
    }
LABEL_5:
    for (CFIndex i = CFArrayGetCount(v6); ; CFIndex i = 0)
    {
      if (v7 >= i)
      {
        uint64_t v12 = 0;
        *a3 = cf;
        CFTypeRef cf = 0;
        goto LABEL_13;
      }
      CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(v6, v7);
      if (!CFDictionaryContainsKey(*(CFDictionaryRef *)(a2 + 16), ValueAtIndex))
      {
        CFStringRef Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 16), ValueAtIndex);
        uint64_t v11 = APSAudioFormatDescriptionListAddFormat((uint64_t)cf, (uint64_t)Value);
        if (v11) {
          break;
        }
      }
      ++v7;
      if (v6) {
        goto LABEL_5;
      }
LABEL_6:
      ;
    }
    uint64_t v12 = v11;
    APSLogErrorAt(v11);
    if (cf) {
      CFRelease(cf);
    }
LABEL_13:
    if (v6) {
      CFRelease(v6);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return v12;
}

uint64_t APSAudioFormatDescriptionListCopyChannelLayoutTags(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    uint64_t v3 = *(const void **)(a1 + 48);
    if (v3) {
      CFTypeRef v4 = CFRetain(v3);
    }
    else {
      CFTypeRef v4 = 0;
    }
    uint64_t result = 0;
    *a2 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionListGetDefaultFormat(uint64_t a1)
{
  if (a1) {
    return *(void *)(a1 + 24);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionListSetDefaultFormat(uint64_t a1, CFTypeRef cf)
{
  if (a1 && cf)
  {
    uint64_t v2 = *(const void **)(a1 + 24);
    *(void *)(a1 + 24) = cf;
    CFRetain(cf);
    if (v2) {
      CFRelease(v2);
    }
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
}

uint64_t APSAudioFormatDescriptionListCopyRichestFormat(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    uint64_t v3 = *(const void **)(a1 + 32);
    if (v3) {
      CFTypeRef v4 = CFRetain(v3);
    }
    else {
      CFTypeRef v4 = 0;
    }
    uint64_t result = 0;
    *a2 = v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294954516;
  }
  return result;
}

uint64_t APSAudioFormatDescriptionListGetLegacyFormatMask(uint64_t a1)
{
  CFArrayRef theArray = 0;
  uint64_t v1 = APSAudioFormatDescriptionListCopyAudioFormatDescriptionsArray(a1, (uint64_t *)&theArray);
  if (v1)
  {
    APSLogErrorAt(v1);
    goto LABEL_12;
  }
  CFIndex Count = CFArrayGetCount(theArray);
  if (Count < 1)
  {
LABEL_12:
    uint64_t v5 = 0;
    goto LABEL_13;
  }
  CFIndex v3 = Count;
  CFIndex v4 = 0;
  uint64_t v5 = 0;
  do
  {
    CFDictionaryRef ValueAtIndex = CFArrayGetValueAtIndex(theArray, v4);
    if (ValueAtIndex)
    {
      unint64_t v7 = ValueAtIndex[12];
      if (v7 >= 0x40) {
        uint64_t v8 = 0;
      }
      else {
        uint64_t v8 = 1 << v7;
      }
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v8 = 0;
    }
    v5 |= v8;
    ++v4;
  }
  while (v3 != v4);
LABEL_13:
  if (theArray) {
    CFRelease(theArray);
  }
  return v5;
}

CFIndex APSAudioFormatDescriptionListGetFormatCount(uint64_t a1)
{
  if (a1)
  {
    CFDictionaryRef v1 = *(const __CFDictionary **)(a1 + 16);
    return CFDictionaryGetCount(v1);
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSAudioFormatDescriptionListGetMaxChannelCount(uint64_t a1)
{
  if (a1) {
    return *(unsigned int *)(a1 + 56);
  }
  APSLogErrorAt(0);
  return 0;
}

uint64_t APSAudioFormatDescriptionListSupportsFormatID(uint64_t a1)
{
  if (a1 && (Suint64_t Int32 = (const void *)FigCFNumberCreateSInt32()) != 0)
  {
    CFIndex v3 = SInt32;
    uint64_t v4 = CFDictionaryContainsKey(*(CFDictionaryRef *)(a1 + 40), SInt32);
    CFRelease(v3);
    return v4;
  }
  else
  {
    APSLogErrorAt(0);
    return 0;
  }
}

uint64_t APSTransportMessageGetRetransmitRequest(OpaqueCMBlockBuffer *a1, _WORD *a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    uint64_t v4 = CMBlockBufferCopyDataBytes(a1, 0, 4uLL, a2);
    uint64_t v5 = v4;
    if (v4)
    {
      APSLogErrorAt(v4);
    }
    else
    {
      *a2 = bswap32((unsigned __int16)*a2) >> 16;
      a2[1] = bswap32((unsigned __int16)a2[1]) >> 16;
    }
  }
  return v5;
}

uint64_t APSTransportMessageSetRetransmitResponseFutile(OpaqueCMBlockBuffer *a1, unsigned int a2)
{
  sourceuint64_t Bytes = 0;
  if (CMBlockBufferGetDataLength(a1) <= 3)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    LOWORD(sourceBytes) = __rev16(a2);
    uint64_t v4 = CMBlockBufferReplaceDataBytes(&sourceBytes, a1, 0, 4uLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageSetTimeAnnounce(OpaqueCMBlockBuffer *a1, int8x16_t *a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 0xF)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    int8x16_t v7 = vrev32q_s8(*a2);
    uint64_t v4 = CMBlockBufferReplaceDataBytes(&v7, a1, 0, 0x10uLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageSetPTPTimeAnnounce(OpaqueCMBlockBuffer *a1, uint64_t a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 0x17)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    sourceuint64_t Bytes = bswap32(*(_DWORD *)a2);
    unint64_t v8 = bswap64(*(void *)(a2 + 4));
    unsigned int v9 = bswap32(*(_DWORD *)(a2 + 12));
    unint64_t v10 = bswap64(*(void *)(a2 + 16));
    uint64_t v4 = CMBlockBufferReplaceDataBytes(&sourceBytes, a1, 0, 0x18uLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageCreateReferencingBBufWithAudioDataLength(const __CFAllocator *a1, OpaqueCMBlockBuffer *a2, uint64_t a3, CMBlockBufferRef *blockBufferOut)
{
  uint64_t v4 = CMBlockBufferCreateWithBufferReference(a1, a2, 0, a3 + 10, 0, blockBufferOut);
  uint64_t v5 = v4;
  if (v4) {
    APSLogErrorAt(v4);
  }
  return v5;
}

uint64_t APSTransportMessageCreateReferencingBBufAudioDataOnly(const __CFAllocator *a1, CMBlockBufferRef theBuffer, CMBlockBufferRef *a3)
{
  size_t DataLength = CMBlockBufferGetDataLength(theBuffer);
  uint64_t v7 = CMBlockBufferCreateWithBufferReference(a1, theBuffer, 0xAuLL, DataLength - 10, 0, a3);
  uint64_t v8 = v7;
  if (v7) {
    APSLogErrorAt(v7);
  }
  return v8;
}

uint64_t APSTransportMessageGetAudioDataPointer(OpaqueCMBlockBuffer *a1, char **dataPointerOut, size_t *a3)
{
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, 0xAuLL, a3, 0, dataPointerOut);
  uint64_t v4 = DataPointer;
  if (DataPointer) {
    APSLogErrorAt(DataPointer);
  }
  return v4;
}

uint64_t APSTransportMessageGetAudioDataSequenceNumber(OpaqueCMBlockBuffer *a1, _WORD *destination)
{
  uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 0, 2uLL, destination);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  else {
    *uint64_t destination = bswap32((unsigned __int16)*destination) >> 16;
  }
  return v4;
}

uint64_t APSTransportMessageSetAudioDataSequenceNumber(CMBlockBufferRef destinationBuffer, unsigned int a2)
{
  sourceuint64_t Bytes = __rev16(a2);
  uint64_t v2 = CMBlockBufferReplaceDataBytes(&sourceBytes, destinationBuffer, 0, 2uLL);
  uint64_t v3 = v2;
  if (v2) {
    APSLogErrorAt(v2);
  }
  return v3;
}

uint64_t APSTransportMessageGetAudioDataTimestamp(OpaqueCMBlockBuffer *a1, _DWORD *destination)
{
  uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 2uLL, 4uLL, destination);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  else {
    *uint64_t destination = bswap32(*destination);
  }
  return v4;
}

uint64_t APSTransportMessageGetAudioDataHeader(OpaqueCMBlockBuffer *a1, uint64_t a2)
{
  if (a2)
  {
    memset(v6, 0, 10);
    uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 0, 0xAuLL, v6);
    uint64_t v4 = v3;
    if (v3)
    {
      APSLogErrorAt(v3);
    }
    else
    {
      *(_WORD *)a2 = bswap32(v6[0].u16[0]) >> 16;
      *(int8x8_t *)(a2 + 2) = vrev32_s8(*(int8x8_t *)((char *)v6 + 2));
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

uint64_t APSTransportMessageSetAudioDataHeader(OpaqueCMBlockBuffer *a1, unsigned __int16 *a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 9)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    sourceuint64_t Bytes = bswap32(*a2) >> 16;
    int8x8_t v8 = vrev32_s8(*(int8x8_t *)(a2 + 1));
    uint64_t v4 = CMBlockBufferReplaceDataBytes(&sourceBytes, a1, 0, 0xAuLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageGetAudioAADPointer(OpaqueCMBlockBuffer *a1, char **dataPointerOut, void *a3)
{
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, 2uLL, 0, 0, dataPointerOut);
  uint64_t v5 = DataPointer;
  if (DataPointer) {
    APSLogErrorAt(DataPointer);
  }
  else {
    *a3 = 8;
  }
  return v5;
}

uint64_t APSTransportMessageBufferedCreateReferencingBBufWithAudioDataLength(const __CFAllocator *a1, OpaqueCMBlockBuffer *a2, uint64_t a3, CMBlockBufferRef *blockBufferOut)
{
  uint64_t v4 = CMBlockBufferCreateWithBufferReference(a1, a2, 0, a3 + 11, 0, blockBufferOut);
  uint64_t v5 = v4;
  if (v4) {
    APSLogErrorAt(v4);
  }
  return v5;
}

uint64_t APSTransportMessageBufferedCreateReferencingBBufAudioDataOnly(const __CFAllocator *a1, CMBlockBufferRef theBuffer, CMBlockBufferRef *a3)
{
  size_t DataLength = CMBlockBufferGetDataLength(theBuffer);
  uint64_t v7 = CMBlockBufferCreateWithBufferReference(a1, theBuffer, 0xAuLL, DataLength - 11, 0, a3);
  uint64_t v8 = v7;
  if (v7) {
    APSLogErrorAt(v7);
  }
  return v8;
}

uint64_t APSTransportMessageGetBufferedAudioDataPointer(OpaqueCMBlockBuffer *a1, char **dataPointerOut, size_t *a3)
{
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, 0xBuLL, a3, 0, dataPointerOut);
  uint64_t v4 = DataPointer;
  if (DataPointer) {
    APSLogErrorAt(DataPointer);
  }
  return v4;
}

uint64_t APSTransportMessageGetBufferedAudioDataExtendedSequenceNumber(OpaqueCMBlockBuffer *a1, unsigned int *a2)
{
  *a2 = 0;
  uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 0, 3uLL, (char *)a2 + 1);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  else {
    *a2 = bswap32(*a2);
  }
  return v4;
}

uint64_t APSTransportMessageSetBufferedAudioDataExtendedSequenceNumber(CMBlockBufferRef destinationBuffer, unsigned int a2)
{
  unsigned int v5 = bswap32(a2);
  uint64_t v2 = CMBlockBufferReplaceDataBytes((char *)&v5 + 1, destinationBuffer, 0, 3uLL);
  uint64_t v3 = v2;
  if (v2) {
    APSLogErrorAt(v2);
  }
  return v3;
}

uint64_t APSTransportMessageGetBufferedAudioDataTimestamp(OpaqueCMBlockBuffer *a1, _DWORD *destination)
{
  uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 3uLL, 4uLL, destination);
  uint64_t v4 = v3;
  if (v3) {
    APSLogErrorAt(v3);
  }
  else {
    *uint64_t destination = bswap32(*destination);
  }
  return v4;
}

uint64_t APSTransportMessageGetBufferedAudioDataFormatIndex(OpaqueCMBlockBuffer *a1, void *destination)
{
  uint64_t v2 = CMBlockBufferCopyDataBytes(a1, 7uLL, 1uLL, destination);
  uint64_t v3 = v2;
  if (v2) {
    APSLogErrorAt(v2);
  }
  return v3;
}

uint64_t APSTransportMessageGetBufferedAudioDataFlags(OpaqueCMBlockBuffer *a1, void *destination)
{
  uint64_t v2 = CMBlockBufferCopyDataBytes(a1, 8uLL, 1uLL, destination);
  uint64_t v3 = v2;
  if (v2) {
    APSLogErrorAt(v2);
  }
  return v3;
}

uint64_t APSTransportMessageGetBufferedAudioDataHeader(OpaqueCMBlockBuffer *a1, uint64_t a2)
{
  if (a2)
  {
    *(_DWORD *)((char *)v6 + 7) = 0;
    v6[0] = 0;
    uint64_t v3 = CMBlockBufferCopyDataBytes(a1, 0, 0xBuLL, v6);
    uint64_t v4 = v3;
    if (v3)
    {
      APSLogErrorAt(v3);
    }
    else
    {
      *(unsigned char *)a2 = BYTE2(v6[0]);
      *(unsigned char *)(a2 + 1) = BYTE1(v6[0]);
      *(unsigned char *)(a2 + 2) = v6[0];
      *(_DWORD *)(a2 + 3) = bswap32(*(unsigned int *)((char *)v6 + 3));
      *(_DWORD *)(a2 + 7) = *(_DWORD *)((char *)v6 + 7);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v4;
}

uint64_t APSTransportMessageSetBufferedAudioDataHeader(OpaqueCMBlockBuffer *a1, uint64_t a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 0xA)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    sourceBytes[0] = *(unsigned char *)(a2 + 2);
    sourceBytes[1] = *(unsigned char *)(a2 + 1);
    sourceBytes[2] = *(unsigned char *)a2;
    unsigned int v8 = bswap32(*(_DWORD *)(a2 + 3));
    int v9 = *(_DWORD *)(a2 + 7);
    uint64_t v4 = CMBlockBufferReplaceDataBytes(sourceBytes, a1, 0, 0xBuLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageGetBufferedAudioAADPointer(OpaqueCMBlockBuffer *a1, char **dataPointerOut, void *a3)
{
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, 3uLL, 0, 0, dataPointerOut);
  uint64_t v5 = DataPointer;
  if (DataPointer) {
    APSLogErrorAt(DataPointer);
  }
  else {
    *a3 = 8;
  }
  return v5;
}

uint64_t APSTransportMessageSetScreenDataHeader(OpaqueCMBlockBuffer *a1, const void *a2)
{
  if (CMBlockBufferGetDataLength(a1) <= 0x7A)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  else
  {
    uint64_t v4 = CMBlockBufferReplaceDataBytes(a2, a1, 0, 0x7BuLL);
    uint64_t v5 = v4;
    if (v4) {
      APSLogErrorAt(v4);
    }
  }
  return v5;
}

uint64_t APSTransportMessageSetScreenDataPayload(OpaqueCMBlockBuffer *a1, const __CFData *a2)
{
  if (a2 && CMBlockBufferGetDataLength(a1) > 0x7A)
  {
    CFDataRef BytePtr = CFDataGetBytePtr(a2);
    size_t Length = CFDataGetLength(a2);
    uint64_t v6 = CMBlockBufferReplaceDataBytes(BytePtr, a1, 0x7BuLL, Length);
    uint64_t v7 = v6;
    if (v6) {
      APSLogErrorAt(v6);
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

uint64_t APSAPAPExtensionConvertLoudnessInfoDictMediaKindToBBuf(const __CFDictionary *a1, void *a2)
{
  CFTypeRef cf = 0;
  if (!a2)
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  if (!CFDictionaryGetValue(a1, (const void *)*MEMORY[0x1E4F4EC68])) {
    goto LABEL_30;
  }
  if (!FigCFEqual())
  {
    if (FigCFEqual())
    {
      unint64_t v3 = 2;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 3;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 4;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 5;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 6;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 7;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 8;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 9;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 10;
      goto LABEL_31;
    }
    if (FigCFEqual())
    {
      unint64_t v3 = 11;
      goto LABEL_31;
    }
    if (gLogCategory_APSAPAPExtensionLoudnessInfoUtils <= 50
      && (gLogCategory_APSAPAPExtensionLoudnessInfoUtils != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
LABEL_30:
    unint64_t v3 = 0;
    goto LABEL_31;
  }
  unint64_t v3 = 1;
LABEL_31:
  BigUIntWithUuint64_t Int64 = APSCMBlockBufferCreateBigUIntWithUInt64((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v3, (CMBlockBufferRef *)&cf);
  uint64_t v4 = BigUIntWithUInt64;
  if (BigUIntWithUInt64)
  {
    APSLogErrorAt(BigUIntWithUInt64);
  }
  else
  {
    CFTypeRef v6 = cf;
    if (cf) {
      CFTypeRef v6 = CFRetain(cf);
    }
    *a2 = v6;
  }
  if (cf) {
    CFRelease(cf);
  }
  return v4;
}

uint64_t APSAPAPExtensionConvertLoudnessInfoDictLoudnessParametersToBBuf(const __CFDictionary *a1, void *a2)
{
  CMBlockBufferRef blockBufferOut = 0;
  if (a2)
  {
    uint64_t v4 = malloc_type_calloc(1uLL, 0xCuLL, 0x10000403E1C8BA9uLL);
    if (v4)
    {
      if (CFDictionaryGetValue(a1, (const void *)*MEMORY[0x1E4F4EC60]))
      {
        uint64_t Float32IfPresent = FigCFDictionaryGetFloat32IfPresent();
        if (Float32IfPresent
          && (*uint64_t v4 = bswap32(0), Float32IfPresent = FigCFDictionaryGetFloat32IfPresent(), Float32IfPresent)
          && (v4[1] = bswap32(0), uint64_t Float32IfPresent = FigCFDictionaryGetFloat32IfPresent(), Float32IfPresent))
        {
          double v4[2] = bswap32(0);
          uint64_t v6 = CMBlockBufferCreateWithMemoryBlock((CFAllocatorRef)*MEMORY[0x1E4F1CF80], v4, 0xCuLL, (CFAllocatorRef)*MEMORY[0x1E4F1CF90], 0, 0, 0xCuLL, 0, &blockBufferOut);
          if (blockBufferOut)
          {
            CFTypeRef v7 = CFRetain(blockBufferOut);
            CMBlockBufferRef v8 = blockBufferOut;
            *a2 = v7;
            if (v8) {
              CFRelease(v8);
            }
            uint64_t v4 = 0;
          }
          else
          {
            uint64_t v4 = 0;
            *a2 = 0;
          }
        }
        else
        {
          APSLogErrorAt(Float32IfPresent);
          uint64_t v6 = FigSignalErrorAt();
        }
      }
      else
      {
        uint64_t v6 = 4294960569;
      }
    }
    else
    {
      APSLogErrorAt(0);
      uint64_t v6 = 4294960568;
    }
  }
  else
  {
    APSLogErrorAt(0);
    uint64_t v4 = 0;
    uint64_t v6 = 4294960591;
  }
  free(v4);
  return v6;
}

uint64_t APSAPAPExtensionConvertMediaKindBBufAndMergeIntoLoudnessInfoDict(OpaqueCMBlockBuffer *a1, uint64_t a2, CFTypeRef *a3)
{
  unint64_t v9 = 0;
  if (a3)
  {
    BigUIntAsUuint64_t Int64 = APSCMBlockBufferGetBigUIntAsUInt64(a1, &v9);
    if (BigUIntAsUInt64)
    {
      uint64_t v7 = BigUIntAsUInt64;
      APSLogErrorAt(BigUIntAsUInt64);
    }
    else
    {
      switch((char)v9)
      {
        case 0:
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
        case 8:
        case 9:
        case 10:
        case 11:
          break;
        default:
          if (gLogCategory_APSAPAPExtensionLoudnessInfoUtils <= 50
            && (gLogCategory_APSAPAPExtensionLoudnessInfoUtils != -1 || _LogCategory_Initialize()))
          {
            LogPrintF();
          }
          break;
      }
      if (a2)
      {
        uint64_t MutableCopy = (const void *)FigCFDictionaryCreateMutableCopy();
        if (!MutableCopy) {
          goto LABEL_17;
        }
      }
      else
      {
        uint64_t MutableCopy = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
        if (!MutableCopy)
        {
LABEL_17:
          APSLogErrorAt(0);
          return 4294960568;
        }
      }
      FigCFDictionarySetValue();
      *a3 = CFRetain(MutableCopy);
      CFRelease(MutableCopy);
      return 0;
    }
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  return v7;
}

uint64_t APSAPAPExtensionConvertLoudnessParametersBBufAndMergeIntoLoudnessInfoDict(OpaqueCMBlockBuffer *a1, uint64_t a2, CFTypeRef *a3)
{
  CMTime dataPointerOut = 0;
  if (!a3 || (CMBlockBufferGetDataPointer(a1, 0, 0, 0, &dataPointerOut), CMBlockBufferGetDataLength(a1) != 12))
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
  CFAllocatorRef v6 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (a2)
  {
    uint64_t MutableCopy = FigCFDictionaryCreateMutableCopy();
    if (MutableCopy)
    {
      CMBlockBufferRef v8 = (const void *)MutableCopy;
      if (FigCFDictionaryGetValue())
      {
        uint64_t Mutable = FigCFDictionaryCreateMutableCopy();
        if (!Mutable) {
          goto LABEL_16;
        }
        goto LABEL_12;
      }
      uint64_t Mutable = (uint64_t)CFDictionaryCreateMutable(v6, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (Mutable)
      {
LABEL_12:
        uint64_t v12 = (const void *)Mutable;
        goto LABEL_13;
      }
LABEL_16:
      APSLogErrorAt(0);
      CFRelease(v8);
      return 4294960568;
    }
  }
  else
  {
    CFMutableDictionaryRef v10 = CFDictionaryCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (v10)
    {
      CMBlockBufferRef v8 = v10;
      CFMutableDictionaryRef v11 = CFDictionaryCreateMutable(v6, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
      if (v11)
      {
        uint64_t v12 = v11;
LABEL_13:
        FigCFDictionarySetFloat32();
        FigCFDictionarySetFloat32();
        FigCFDictionarySetFloat32();
        FigCFDictionarySetValue();
        *a3 = CFRetain(v8);
        CFRelease(v8);
        CFRelease(v12);
        return 0;
      }
      goto LABEL_16;
    }
  }
  APSLogErrorAt(0);
  return 4294960568;
}

uint64_t APSAPAPExtensionConvertLoudnessInfoDictSoundCheckInfoToBBuf(uint64_t a1, void *a2)
{
  *(_OWORD *)count = 0u;
  long long v23 = 0u;
  CMBlockBufferRef blockBufferOut = 0;
  if (!a2)
  {
    APSLogErrorAt(0);
    uint64_t v18 = 4294960591;
    goto LABEL_27;
  }
  CFDictionaryRef Value = (const __CFDictionary *)FigCFDictionaryGetValue();
  if (!Value)
  {
    uint64_t v18 = 4294960569;
    goto LABEL_27;
  }
  CFDictionaryRef v4 = Value;
  uint64_t v5 = (const void *)*MEMORY[0x1E4F4ECC8];
  if (!CFDictionaryContainsKey(Value, (const void *)*MEMORY[0x1E4F4ECC8])
    || (CFAllocatorRef v6 = (const void *)*MEMORY[0x1E4F4ECD0], !CFDictionaryContainsKey(v4, (const void *)*MEMORY[0x1E4F4ECD0]))
    || (uint64_t v7 = (const void *)*MEMORY[0x1E4F4ECD8], !CFDictionaryContainsKey(v4, (const void *)*MEMORY[0x1E4F4ECD8]))
    || (CMBlockBufferRef v8 = (const void *)*MEMORY[0x1E4F4ECE0], !CFDictionaryContainsKey(v4, (const void *)*MEMORY[0x1E4F4ECE0]))
    || (unint64_t v9 = (const void *)*MEMORY[0x1E4F4ECE8], !CFDictionaryContainsKey(v4, (const void *)*MEMORY[0x1E4F4ECE8])))
  {
    uint64_t v18 = 4294960579;
    goto LABEL_27;
  }
  CFStringRef v10 = (const __CFString *)CFDictionaryGetValue(v4, v5);
  uint64_t v11 = APSCFStringCountUInt32s(v10, &count[1]);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  count[0] = (size_t)malloc_type_calloc(count[1], 0x14uLL, 0x1000040A86A77D5uLL);
  if (!count[0])
  {
    APSLogErrorAt(0);
    uint64_t v18 = 4294960568;
    goto LABEL_27;
  }
  long long v23 = 0uLL;
  CFStringRef v12 = (const __CFString *)CFDictionaryGetValue(v4, v5);
  uint64_t v11 = APSCFStringParseUInt32s(v12, (uint64_t (*)(uint64_t, uint64_t))apsapapExtensionSoundCheckInfo_parseUInt32, (uint64_t)count);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  if (*((void *)&v23 + 1) != count[1]) {
    goto LABEL_46;
  }
  long long v23 = xmmword_1D0C1F0F0;
  CFStringRef v13 = (const __CFString *)CFDictionaryGetValue(v4, v6);
  uint64_t v11 = APSCFStringParseUInt32s(v13, (uint64_t (*)(uint64_t, uint64_t))apsapapExtensionSoundCheckInfo_parseUInt32, (uint64_t)count);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  if (*((void *)&v23 + 1) != count[1]) {
    goto LABEL_46;
  }
  long long v23 = xmmword_1D0C1F100;
  CFStringRef v14 = (const __CFString *)CFDictionaryGetValue(v4, v7);
  uint64_t v11 = APSCFStringParseUInt32s(v14, (uint64_t (*)(uint64_t, uint64_t))apsapapExtensionSoundCheckInfo_parseUInt32, (uint64_t)count);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  if (*((void *)&v23 + 1) != count[1]) {
    goto LABEL_46;
  }
  long long v23 = xmmword_1D0C1F110;
  CFStringRef v15 = (const __CFString *)CFDictionaryGetValue(v4, v8);
  uint64_t v11 = APSCFStringParseUInt32s(v15, (uint64_t (*)(uint64_t, uint64_t))apsapapExtensionSoundCheckInfo_parseUInt32, (uint64_t)count);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  if (*((void *)&v23 + 1) != count[1]) {
    goto LABEL_46;
  }
  long long v23 = xmmword_1D0C1F120;
  CFStringRef v16 = (const __CFString *)CFDictionaryGetValue(v4, v9);
  uint64_t v11 = APSCFStringParseUInt32s(v16, (uint64_t (*)(uint64_t, uint64_t))apsapapExtensionSoundCheckInfo_parseUInt32, (uint64_t)count);
  if (v11)
  {
    uint64_t v18 = v11;
    goto LABEL_48;
  }
  if (*((void *)&v23 + 1) != count[1])
  {
LABEL_46:
    APSLogErrorAt(0);
    uint64_t v18 = 4294960546;
    goto LABEL_27;
  }
  CFAllocatorRef v17 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  if (*((void *)&v23 + 1))
  {
    uint64_t v11 = CMBlockBufferCreateWithMemoryBlock(v17, (void *)count[0], 20 * *((void *)&v23 + 1), (CFAllocatorRef)*MEMORY[0x1E4F1CF90], 0, 0, 20 * *((void *)&v23 + 1), 0, &blockBufferOut);
    if (v11)
    {
      uint64_t v18 = v11;
LABEL_48:
      APSLogErrorAt(v11);
      goto LABEL_27;
    }
  }
  else
  {
    uint64_t v11 = CMBlockBufferCreateEmpty(v17, 0, 0, &blockBufferOut);
    if (v11)
    {
      uint64_t v18 = v11;
      goto LABEL_48;
    }
  }
  count[0] = 0;
  CMTime v19 = blockBufferOut;
  if (blockBufferOut) {
    CMTime v19 = (void *)CFRetain(blockBufferOut);
  }
  uint64_t v18 = 0;
  *a2 = v19;
LABEL_27:
  if (count[0]) {
    free((void *)count[0]);
  }
  if (blockBufferOut) {
    CFRelease(blockBufferOut);
  }
  return v18;
}

uint64_t apsapapExtensionSoundCheckInfo_parseUInt32(unsigned int a1, void *a2)
{
  unint64_t v2 = a2[3];
  if (v2 >= a2[1])
  {
    APSLogErrorAt(0);
    return 4294960545;
  }
  else
  {
    uint64_t result = 0;
    *(_DWORD *)(*a2 + 20 * v2 + a2[2]) = bswap32(a1);
    ++a2[3];
  }
  return result;
}

uint64_t APSAPAPExtensionConvertSoundCheckInfoBBufAndMergeIntoLoudnessInfoDict(OpaqueCMBlockBuffer *a1, CFIndex a2, CFTypeRef *a3)
{
  keys[5] = *(void **)MEMORY[0x1E4F143B8];
  size_t totalLengthOut = 0;
  CMTime dataPointerOut = 0;
  size_t lengthAtOffsetOut = 0;
  if (!a3) {
    goto LABEL_67;
  }
  if (CMBlockBufferIsEmpty(a1))
  {
    size_t v6 = 0;
    goto LABEL_7;
  }
  uint64_t DataPointer = CMBlockBufferGetDataPointer(a1, 0, &lengthAtOffsetOut, &totalLengthOut, &dataPointerOut);
  if (DataPointer)
  {
    uint64_t v23 = DataPointer;
    APSLogErrorAt(DataPointer);
    return v23;
  }
  if (totalLengthOut != lengthAtOffsetOut)
  {
LABEL_67:
    APSLogErrorAt(0);
    return 4294960591;
  }
  size_t v6 = totalLengthOut / 0x14;
  if (totalLengthOut % 0x14)
  {
    APSLogErrorAt(0);
    return 4294960553;
  }
LABEL_7:
  CFAllocatorRef v8 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
  CFMutableStringRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  if (!Mutable)
  {
    APSLogErrorAt(0);
    return 4294960568;
  }
  CFMutableStringRef v10 = Mutable;
  CFMutableStringRef v11 = CFStringCreateMutable(v8, 0);
  if (!v11)
  {
    APSLogErrorAt(0);
    CFRelease(v10);
    return 4294960568;
  }
  CFMutableStringRef v12 = v11;
  CFMutableStringRef v13 = CFStringCreateMutable(v8, 0);
  if (!v13)
  {
    APSLogErrorAt(0);
    CFMutableStringRef v14 = 0;
LABEL_55:
    CFMutableStringRef v15 = 0;
LABEL_57:
    CFDictionaryRef v21 = 0;
LABEL_59:
    uint64_t MutableCopy = 0;
LABEL_60:
    uint64_t v23 = 4294960568;
    goto LABEL_32;
  }
  CFMutableStringRef v14 = CFStringCreateMutable(v8, 0);
  if (!v14)
  {
    APSLogErrorAt(0);
    goto LABEL_55;
  }
  CFMutableStringRef v15 = CFStringCreateMutable(v8, 0);
  if (!v15)
  {
    APSLogErrorAt(0);
    goto LABEL_57;
  }
  CFDictionaryRef v25 = a3;
  CFIndex capacity = a2;
  if (!v6) {
    goto LABEL_26;
  }
  uint64_t v16 = CFStringAppendF();
  if (v16)
  {
    uint64_t v23 = v16;
LABEL_48:
    APSLogErrorAt(v16);
    CFDictionaryRef v21 = 0;
    uint64_t MutableCopy = 0;
    goto LABEL_32;
  }
  uint64_t v16 = CFStringAppendF();
  if (v16)
  {
    uint64_t v23 = v16;
    goto LABEL_48;
  }
  uint64_t v16 = CFStringAppendF();
  if (v16)
  {
    uint64_t v23 = v16;
    goto LABEL_48;
  }
  uint64_t v16 = CFStringAppendF();
  if (v16)
  {
    uint64_t v23 = v16;
    goto LABEL_48;
  }
  uint64_t v16 = CFStringAppendF();
  if (v16)
  {
    uint64_t v23 = v16;
    goto LABEL_48;
  }
  if (v6 >= 2)
  {
    size_t v17 = v6 - 1;
    uint64_t v18 = 39;
    while (1)
    {
      uint64_t v16 = CFStringAppendF();
      if (v16)
      {
        uint64_t v23 = v16;
        goto LABEL_48;
      }
      uint64_t v16 = CFStringAppendF();
      if (v16)
      {
        uint64_t v23 = v16;
        goto LABEL_48;
      }
      uint64_t v16 = CFStringAppendF();
      if (v16)
      {
        uint64_t v23 = v16;
        goto LABEL_48;
      }
      uint64_t v16 = CFStringAppendF();
      if (v16)
      {
        uint64_t v23 = v16;
        goto LABEL_48;
      }
      uint64_t v16 = CFStringAppendF();
      if (v16) {
        break;
      }
      v18 += 20;
      if (!--v17) {
        goto LABEL_26;
      }
    }
    uint64_t v23 = v16;
    goto LABEL_48;
  }
LABEL_26:
  CMTime v19 = (void *)*MEMORY[0x1E4F4ECD0];
  keys[0] = *(void **)MEMORY[0x1E4F4ECC8];
  keys[1] = v19;
  long long v20 = (void *)*MEMORY[0x1E4F4ECE0];
  keys[2] = *(void **)MEMORY[0x1E4F4ECD8];
  keys[3] = v20;
  keys[4] = *(void **)MEMORY[0x1E4F4ECE8];
  values[0] = v10;
  values[1] = v12;
  values[2] = v13;
  values[3] = v14;
  values[4] = v15;
  CFDictionaryRef v21 = CFDictionaryCreate(v8, (const void **)keys, (const void **)values, 5, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
  if (!v21)
  {
    APSLogErrorAt(0);
    goto LABEL_59;
  }
  if (capacity)
  {
    uint64_t MutableCopy = (const void *)FigCFDictionaryCreateMutableCopy();
    if (!MutableCopy) {
      goto LABEL_69;
    }
  }
  else
  {
    uint64_t MutableCopy = CFDictionaryCreateMutable(v8, 0, MEMORY[0x1E4F1D530], MEMORY[0x1E4F1D540]);
    if (!MutableCopy)
    {
LABEL_69:
      APSLogErrorAt(0);
      goto LABEL_60;
    }
  }
  FigCFDictionarySetValue();
  uint64_t v23 = 0;
  *CFDictionaryRef v25 = CFRetain(MutableCopy);
LABEL_32:
  CFRelease(v10);
  CFRelease(v12);
  if (v13) {
    CFRelease(v13);
  }
  if (v14) {
    CFRelease(v14);
  }
  if (v15) {
    CFRelease(v15);
  }
  if (v21) {
    CFRelease(v21);
  }
  if (MutableCopy) {
    CFRelease(MutableCopy);
  }
  return v23;
}

uint64_t APSAudioTransportTimeMakeWithRTPTime@<X0>(uint64_t result@<X0>, uint64_t a2@<X8>)
{
  *(void *)(a2 + 8) = 0;
  *(void *)(a2 + 16) = 0;
  *(_DWORD *)(a2 + 24) = 0;
  *(_DWORD *)a2 = 1;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}

__n128 APSAudioTransportTimeMakeWithMediaTime@<Q0>(__n128 *a1@<X0>, uint64_t a2@<X8>)
{
  if ((a1->n128_u32[3] & 0x1D) == 1 && !a1[1].n128_u64[0])
  {
    *(_DWORD *)a2 = 2;
    __n128 result = *a1;
    *(__n128 *)(a2 + 4) = *a1;
    *(void *)(a2 + 20) = a1[1].n128_u64[0];
  }
  else
  {
    *(void *)a2 = 0;
    *(void *)(a2 + 8) = 0;
    *(_DWORD *)(a2 + 24) = 0;
    *(void *)(a2 + 16) = 0;
  }
  return result;
}

BOOL APSAudioTransportTimeIsValid(uint64_t a1)
{
  if (*(_DWORD *)a1 != 2) {
    return *(_DWORD *)a1 == 1;
  }
  if ((*(_DWORD *)(a1 + 16) & 0x1D) == 1) {
    return *(void *)(a1 + 20) == 0;
  }
  return 0;
}

CFTypeRef APSAudioTransportTimeCopyDebugDesc(uint64_t a1)
{
  if (*(_DWORD *)a1 == 1) {
    return (CFTypeRef)CFStringCreateF();
  }
  if (*(_DWORD *)a1 == 2 && (*(_DWORD *)(a1 + 16) & 0x1D) == 1 && *(void *)(a1 + 20) == 0)
  {
    CMTime time = *(CMTime *)(a1 + 4);
    CMTimeGetSeconds(&time);
    return (CFTypeRef)CFStringCreateF();
  }

  return CFRetain(@"Invalid");
}

double APSAudioTransportTimeAdd@<D0>(int *a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X8>)
{
  *(void *)a3 = 0;
  *(void *)(a3 + 8) = 0;
  *(_DWORD *)(a3 + 24) = 0;
  *(void *)(a3 + 16) = 0;
  int v4 = *a1;
  if (*a1 == 1 || v4 == 2 && ((a1[4] & 0x1D) == 1 ? (BOOL v5 = *(void *)(a1 + 5) == 0) : (BOOL v5 = 0), v5))
  {
    if (*(_DWORD *)a2 == 2)
    {
      if ((*(_DWORD *)(a2 + 16) & 0x1D) == 1 && v4 == 2 && *(void *)(a2 + 20) == 0)
      {
        *(_DWORD *)CFMutableStringRef v13 = 2;
        CMTime lhs = *(CMTime *)(a1 + 1);
        CMTime v11 = *(CMTime *)(a2 + 4);
        CMTimeAdd((CMTime *)&v13[4], &lhs, &v11);
        *(_OWORD *)a3 = *(_OWORD *)v13;
        double result = *(double *)&v13[12];
        *(_OWORD *)(a3 + 12) = *(_OWORD *)&v13[12];
      }
    }
    else if (*(_DWORD *)a2 == 1 && v4 == 1)
    {
      *(void *)(a3 + 8) = 0;
      *(void *)(a3 + 16) = 0;
      *(_DWORD *)(a3 + 24) = 0;
      int v7 = *(_DWORD *)(a2 + 4) + a1[1];
      *(_DWORD *)a3 = 1;
      *(_DWORD *)(a3 + 4) = v7;
    }
  }
  return result;
}

double APSAudioTransportTimeSub@<D0>(int *a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X8>)
{
  *(void *)a3 = 0;
  *(void *)(a3 + 8) = 0;
  *(_DWORD *)(a3 + 24) = 0;
  *(void *)(a3 + 16) = 0;
  int v4 = *a1;
  if (*a1 == 1 || v4 == 2 && ((a1[4] & 0x1D) == 1 ? (BOOL v5 = *(void *)(a1 + 5) == 0) : (BOOL v5 = 0), v5))
  {
    if (*(_DWORD *)a2 == 2)
    {
      if ((*(_DWORD *)(a2 + 16) & 0x1D) == 1 && v4 == 2 && *(void *)(a2 + 20) == 0)
      {
        *(_DWORD *)CFMutableStringRef v13 = 2;
        CMTime lhs = *(CMTime *)(a1 + 1);
        CMTime v11 = *(CMTime *)(a2 + 4);
        CMTimeSubtract((CMTime *)&v13[4], &lhs, &v11);
        *(_OWORD *)a3 = *(_OWORD *)v13;
        double result = *(double *)&v13[12];
        *(_OWORD *)(a3 + 12) = *(_OWORD *)&v13[12];
      }
    }
    else if (*(_DWORD *)a2 == 1 && v4 == 1)
    {
      *(void *)(a3 + 8) = 0;
      *(void *)(a3 + 16) = 0;
      *(_DWORD *)(a3 + 24) = 0;
      int v7 = a1[1] - *(_DWORD *)(a2 + 4);
      *(_DWORD *)a3 = 1;
      *(_DWORD *)(a3 + 4) = v7;
    }
  }
  return result;
}

uint64_t APSAudioTransportTimeCompare(int *a1, int *a2)
{
  int v2 = *a1;
  if (*a1 == 2) {
    BOOL v3 = (a1[4] & 0x1D) == 1 && *(void *)(a1 + 5) == 0;
  }
  else {
    BOOL v3 = v2 == 1;
  }
  int v5 = *a2;
  if (*a2 == 1)
  {
    BOOL v7 = 1;
  }
  else
  {
    if (v5 != 2)
    {
      BOOL v7 = 0;
      return (v7 - v3);
    }
    BOOL v7 = (a2[4] & 0x1D) == 1 && *(void *)(a2 + 5) == 0;
  }
  if (!v3 || !v7) {
    return (v7 - v3);
  }
  uint64_t v8 = (v2 - v5);
  if (v2 == v5)
  {
    if (v2 == 2)
    {
      CMTime time1 = *(CMTime *)(a1 + 1);
      CMTime v10 = *(CMTime *)(a2 + 1);
      return CMTimeCompare(&time1, &v10);
    }
    else if (v2 == 1)
    {
      return (a1[1] - a2[1]);
    }
    else
    {
      return 0;
    }
  }
  return v8;
}

__n128 APSAudioTransportTimeMax@<Q0>(_OWORD *a1@<X0>, _OWORD *a2@<X1>, uint64_t a3@<X8>)
{
  *(_OWORD *)unint64_t v9 = *a1;
  *(_OWORD *)&void v9[3] = *(_OWORD *)((char *)a1 + 12);
  *(_OWORD *)uint64_t v8 = *a2;
  *(_OWORD *)&void v8[3] = *(_OWORD *)((char *)a2 + 12);
  if ((int)APSAudioTransportTimeCompare(v9, v8) >= 0) {
    size_t v6 = a1;
  }
  else {
    size_t v6 = a2;
  }
  *(_OWORD *)a3 = *v6;
  __n128 result = *(__n128 *)((char *)v6 + 12);
  *(__n128 *)(a3 + 12) = result;
  return result;
}

__n128 APSAudioTransportTimeMin@<Q0>(_OWORD *a1@<X0>, _OWORD *a2@<X1>, uint64_t a3@<X8>)
{
  *(_OWORD *)unint64_t v9 = *a1;
  *(_OWORD *)&void v9[3] = *(_OWORD *)((char *)a1 + 12);
  *(_OWORD *)uint64_t v8 = *a2;
  *(_OWORD *)&void v8[3] = *(_OWORD *)((char *)a2 + 12);
  if ((int)APSAudioTransportTimeCompare(v9, v8) >= 0) {
    size_t v6 = a2;
  }
  else {
    size_t v6 = a1;
  }
  *(_OWORD *)a3 = *v6;
  __n128 result = *(__n128 *)((char *)v6 + 12);
  *(__n128 *)(a3 + 12) = result;
  return result;
}

uint64_t APSAudioTransportTimeUtilsDecodeFromRequestResponseDictionary(CFDictionaryRef theDict, void *key, void *a3, const void *a4, uint64_t a5)
{
  unsigned int v17 = 0;
  if ((a3 == 0) != (a4 == 0))
  {
LABEL_14:
    APSLogErrorAt(0);
    int value = 0;
    uint64_t v14 = 0;
    CMTimeFlags flags = 0;
    int v13 = 0;
    unsigned int v17 = -6705;
    if (!a5) {
      return v17;
    }
    goto LABEL_19;
  }
  if (!theDict) {
    goto LABEL_17;
  }
  if (a3 && (CFDictionaryContainsKey(theDict, a3) || CFDictionaryContainsKey(theDict, a4)))
  {
    int64_t Int64 = CFDictionaryGetInt64();
    int32_t v10 = CFDictionaryGetInt64();
    CMTimeMake(&v16, Int64, v10);
    CMTimeFlags flags = v16.flags;
    if ((v16.flags & 0x1D) == 1 && !v16.epoch)
    {
      int value = v16.value;
      int v13 = 2;
      uint64_t v14 = *(CMTimeValue *)((char *)&v16.value + 4);
      if (!a5) {
        return v17;
      }
      goto LABEL_19;
    }
    goto LABEL_14;
  }
  if (key)
  {
    int value = CFDictionaryContainsKey(theDict, key);
    if (value)
    {
      int value = CFDictionaryGetInt64Ranged();
      CMTimeFlags flags = v17;
      uint64_t v14 = 0;
      int v13 = 1;
      if (!a5) {
        return v17;
      }
      goto LABEL_19;
    }
  }
  else
  {
LABEL_17:
    int value = 0;
  }
  uint64_t v14 = 0;
  CMTimeFlags flags = 0;
  int v13 = 0;
  if (a5)
  {
LABEL_19:
    *(_DWORD *)a5 = v13;
    *(_DWORD *)(a5 + 4) = value;
    *(void *)(a5 + 8) = v14;
    *(_DWORD *)(a5 + 16) = flags;
    *(void *)(a5 + 20) = 0;
  }
  return v17;
}

uint64_t APSAudioTransportTimeUtilsEncodeToRequestResponseDictionary(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  if ((a3 == 0) == (a4 == 0))
  {
    if (!a1) {
      return 0;
    }
    if (*(_DWORD *)a5 == 1)
    {
      if (a2) {
        goto LABEL_13;
      }
    }
    else
    {
      if (*(_DWORD *)a5 != 2) {
        return 0;
      }
      if ((*(_DWORD *)(a5 + 16) & 0x1D) != 1 || *(void *)(a5 + 20) != 0) {
        return 0;
      }
      if (a3)
      {
        CFDictionarySetInt64();
LABEL_13:
        CFDictionarySetInt64();
        return 0;
      }
    }
    APSLogErrorAt(0);
    return 4294960582;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960591;
  }
}

BOOL APSNANServiceTypeIsValid(int a1)
{
  return (a1 - 1) < 2;
}

__CFString *APSNANServiceTypeGetTXTString(int a1)
{
  CFDictionaryRef v1 = @"ll";
  if (a1 != 2) {
    CFDictionaryRef v1 = 0;
  }
  if (a1 == 1) {
    return @"ap";
  }
  else {
    return v1;
  }
}

uint64_t APSNANServiceTypeMakeWithTXTString(uint64_t result)
{
  uint64_t v2 = *MEMORY[0x1E4F143B8];
  memset(v1, 0, sizeof(v1));
  if (result)
  {
    __n128 result = CFStringGetCString((CFStringRef)result, (char *)v1, 256, 0x600u);
    if (result)
    {
      strlen((const char *)v1);
      return APSNANServiceTypeMakeWithString((uint64_t)v1);
    }
  }
  return result;
}

uint64_t APSNANServiceTypeMakeWithString(uint64_t result)
{
  if (result)
  {
    if (strncmpx()) {
      return 2 * (strncmpx() == 0);
    }
    else {
      return 1;
    }
  }
  return result;
}

BOOL APSNANServiceTypeIsKindOfType(int a1, int a2)
{
  BOOL v2 = a2 == 1;
  if (a1 != 1) {
    BOOL v2 = 0;
  }
  if (a1 == 2) {
    return (a2 - 1) < 2;
  }
  else {
    return v2;
  }
}

uint64_t APSCaulkMemoryResourceAllocatorCreate(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if (a1 && a3) {
    operator new();
  }
  APSLogErrorAt(0);
  return 4294960591;
}

void sub_1D0C1B1B4(void *a1)
{
}

uint64_t cmrAllocator_release(uint64_t result)
{
  if (atomic_fetch_add((atomic_ullong *volatile)result, 0xFFFFFFFFFFFFFFFFLL) == 1)
  {
    if (*(unsigned char *)(result + 16))
    {
      uint64_t v1 = *(void *)(result + 8);
      if (v1) {
        (*(void (**)(uint64_t))(*(void *)v1 + 8))(v1);
      }
    }
    JUMPOUT(0x1D25EEC90);
  }
  return result;
}

atomic_ullong *cmrAllocator_retain(atomic_ullong *result)
{
  return result;
}

void cmrAllocator_deallocate(char *a1, void **a2)
{
  uint64_t v2 = *((void *)a1 - 2);
  if ((*((void *)a1 - 1) & v2) != 0)
  {
    BOOL v3 = (void *)FatalErrorF();
    int v5 = v4;
    size_t v6 = __cxa_begin_catch(v3);
    if (v5 == 2)
    {
      (*(void (**)(void *))(*(void *)v6 + 16))(v6);
      uint64_t v7 = 4294960534;
    }
    else
    {
      uint64_t v7 = 4294960596;
    }
    APSSignalErrorAt(v7);
    __cxa_end_catch();
  }
  else
  {
    (*(void (**)(void *, char *, uint64_t, uint64_t))(*a2[1] + 24))(a2[1], a1 - 16, v2 + 16, 8);
  }
}

void *cmrAllocator_allocate(uint64_t a1, unint64_t a2, void **a3)
{
  int v4 = (void *)(*(uint64_t (**)(void *, uint64_t, uint64_t))(*a3[1] + 16))(a3[1], a1 + 16, 8);
  *int v4 = a1;
  v4[1] = ~a1;
  return v4 + 2;
}

void sub_1D0C1B3C0(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::bad_alloc a10)
{
  if (a2 == 3)
  {
    __cxa_get_exception_ptr(a1);
    a10.__vftable = (std::bad_alloc_vtbl *)(MEMORY[0x1E4FBA508] + 16);
    __cxa_begin_catch(a1);
    APSSignalErrorAt(4294960568);
    std::bad_alloc::~bad_alloc(&a10);
  }
  else
  {
    CFMutableStringRef v12 = __cxa_begin_catch(a1);
    if (a2 == 2)
    {
      (*(void (**)(void *))(*(void *)v12 + 16))(v12);
      uint64_t v13 = 4294960534;
    }
    else
    {
      uint64_t v13 = 4294960596;
    }
    APSSignalErrorAt(v13);
  }
  __cxa_end_catch();
  JUMPOUT(0x1D0C1B3B0);
}

uint64_t APSPriorityDispatchQueuePoolGetTypeID()
{
  if (gAPSPriorityDispatchQueuePoolInitOnce != -1) {
    dispatch_once_f(&gAPSPriorityDispatchQueuePoolInitOnce, 0, (dispatch_function_t)_APSPriorityDispatchQueuePoolGetTypeID);
  }
  return gAPSPriorityDispatchQueuePoolTypeID;
}

uint64_t _APSPriorityDispatchQueuePoolGetTypeID()
{
  uint64_t result = _CFRuntimeRegisterClass();
  gAPSPriorityDispatchQueuePoolCFTypeID TypeID = result;
  return result;
}

void _APSPriorityDispatchQueuePoolFinalize(uint64_t a1)
{
  free(*(void **)(a1 + 16));
  FigSimpleMutexDestroy();
  uint64_t v2 = *(const void **)(a1 + 40);
  if (v2)
  {
    CFRelease(v2);
  }
}

uint64_t APSPriorityDispatchQueuePoolCreate(uint64_t a1, int a2, CFTypeRef *a3)
{
  if (!a3) {
    return 4294960591;
  }
  if (gAPSPriorityDispatchQueuePoolInitOnce != -1) {
    dispatch_once_f(&gAPSPriorityDispatchQueuePoolInitOnce, 0, (dispatch_function_t)_APSPriorityDispatchQueuePoolGetTypeID);
  }
  uint64_t Instance = _CFRuntimeCreateInstance();
  if (!Instance) {
    return 4294960568;
  }
  uint64_t v7 = Instance;
  *(_OWORD *)(Instance + 16) = 0u;
  *(_OWORD *)(Instance + 32) = 0u;
  if (!a1 || (uint64_t v8 = CFStringCopyUTF8CString(), !v8))
  {
    *(_DWORD *)(v7 + 24) = a2;
    uint64_t v9 = FigSimpleMutexCreate();
    *(void *)(v7 + 32) = v9;
    if (!v9) {
      goto LABEL_12;
    }
    CFAllocatorRef v10 = (const __CFAllocator *)*MEMORY[0x1E4F1CF80];
    valueCallBacks.versiouint64_t n = 0;
    valueCallBacks.retaiuint64_t n = (CFDictionaryRetainCallBack)queuePool_dictionaryDispatchQueueRetain;
    valueCallBacks.copyDescriptiouint64_t n = 0;
    valueCallBacks.equal = 0;
    valueCallBacks.release = (CFDictionaryReleaseCallBack)queuePool_dictionaryDispatchQueueRelease;
    CFMutableDictionaryRef v11 = CFDictionaryCreateMutable(v10, 0, 0, &valueCallBacks);
    *(void *)(v7 + 40) = v11;
    if (v11)
    {
      uint64_t v8 = 0;
      *a3 = CFRetain((CFTypeRef)v7);
    }
    else
    {
LABEL_12:
      uint64_t v8 = 4294960568;
    }
  }
  CFRelease((CFTypeRef)v7);
  return v8;
}

void queuePool_dictionaryDispatchQueueRelease(int a1, dispatch_object_t object)
{
}

dispatch_object_t queuePool_dictionaryDispatchQueueRetain(int a1, dispatch_object_t object)
{
  return object;
}

NSObject *APSPriorityDispatchQueuePoolGetQueue(uint64_t a1, unsigned int a2)
{
  if (!a1) {
    return 0;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
  if (a2 == 5) {
    a2 = *(_DWORD *)(a1 + 24);
  }
  CFDictionaryRef Value = CFDictionaryGetValue(*(CFDictionaryRef *)(a1 + 40), (const void *)a2);
  if (!Value)
  {
    if (a2 == 5) {
      size_t v6 = dispatch_queue_create(*(const char **)(a1 + 16), 0);
    }
    else {
      size_t v6 = FigDispatchQueueCreateWithPriority();
    }
    CFDictionaryRef Value = v6;
    if (v6)
    {
      CFDictionarySetValue(*(CFMutableDictionaryRef *)(a1 + 40), (const void *)a2, v6);
      dispatch_release(Value);
    }
  }
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
  return Value;
}

uint64_t APSPriorityDispatchQueuePoolSyncFlush(uint64_t a1)
{
  if (!a1) {
    return 4294960591;
  }
  pthread_mutex_lock(*(pthread_mutex_t **)(a1 + 32));
  CFDictionaryRef Copy = CFDictionaryCreateCopy((CFAllocatorRef)*MEMORY[0x1E4F1CF80], *(CFDictionaryRef *)(a1 + 40));
  pthread_mutex_unlock(*(pthread_mutex_t **)(a1 + 32));
  if (!Copy) {
    return 4294960568;
  }
  CFDictionaryApplyFunction(Copy, (CFDictionaryApplierFunction)queuePool_dictionarySyncFlushApplier, 0);
  CFRelease(Copy);
  return 0;
}

void queuePool_dictionarySyncFlushApplier(int a1, dispatch_queue_t queue)
{
}

uint64_t APSCryptorChaCha20Poly1305Create(int a1, CFDataRef theData, char a3, void *a4)
{
  if (!theData)
  {
    uint64_t v9 = 4294895585;
LABEL_14:
    APSLogErrorAt(0);
    return v9;
  }
  if (CFDataGetLength(theData) <= 31)
  {
    uint64_t v9 = 4294895585;
    goto LABEL_14;
  }
  if (APSCryptorGetClassID_sRegisterOnce != -1) {
    dispatch_once_f(&APSCryptorGetClassID_sRegisterOnce, &APSCryptorGetClassID_sClassID, (dispatch_function_t)cryptor_registerBaseClass);
  }
  uint64_t v7 = CMDerivedObjectCreate();
  if (v7)
  {
    uint64_t v9 = v7;
    APSLogErrorAt(v7);
  }
  else
  {
    uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
    *(void *)(DerivedStorage + 264) = CFRetain(theData);
    *(unsigned char *)uint64_t DerivedStorage = a3;
    if (gLogCategory_APSCryptorChaCha20Poly1305 <= 30
      && (gLogCategory_APSCryptorChaCha20Poly1305 != -1 || _LogCategory_Initialize()))
    {
      LogPrintF();
    }
    uint64_t v9 = 0;
    *a4 = 0;
  }
  return v9;
}

uint64_t chachaCryptor_DecryptMessage(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, unint64_t a5, uint64_t a6, unint64_t a7, unint64_t *a8)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  uint64_t v14 = (unsigned char *)CMBaseObjectGetDerivedStorage();
  unint64_t v15 = 24;
  if (!*v14) {
    unint64_t v15 = 16;
  }
  if (!a2)
  {
    uint64_t v22 = 4294895585;
LABEL_20:
    APSLogErrorAt(0);
    return v22;
  }
  if (!a3)
  {
    uint64_t v22 = 4294895585;
    goto LABEL_20;
  }
  unint64_t v16 = a5 - v15;
  if (a5 < v15)
  {
    uint64_t v22 = 4294895585;
    goto LABEL_20;
  }
  if (v16 > a7)
  {
    uint64_t v22 = 4294895585;
    goto LABEL_20;
  }
  CFDataGetBytePtr(*(CFDataRef *)(DerivedStorage + 264));
  chacha20_poly1305_init_64x64();
  chacha20_poly1305_add_aad();
  uint64_t v17 = chacha20_poly1305_decrypt();
  if (chacha20_poly1305_verify() + v17 == v16)
  {
    uint64_t v18 = 0;
    *a8 = v16;
    uint64_t v19 = DerivedStorage + 272;
    do
    {
      if (++*(unsigned char *)(v19 + v18)) {
        BOOL v21 = 1;
      }
      else {
        BOOL v21 = v18 == 7;
      }
      ++v18;
    }
    while (!v21);
    return 0;
  }
  else
  {
    APSLogErrorAt(0);
    return 4294960534;
  }
}

uint64_t chachaCryptor_EncryptMessage(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, unint64_t a5, uint64_t a6, unint64_t a7, uint64_t a8, unint64_t a9)
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2 || !a3 || a7 < a5) {
    goto LABEL_16;
  }
  uint64_t v15 = DerivedStorage;
  unint64_t v16 = (unsigned char *)CMBaseObjectGetDerivedStorage();
  unint64_t v17 = 24;
  if (!*v16) {
    unint64_t v17 = 16;
  }
  if (v17 <= a9)
  {
    CFDataGetBytePtr(*(CFDataRef *)(v15 + 264));
    uint64_t v18 = (void *)(v15 + 272);
    chacha20_poly1305_init_64x64();
    chacha20_poly1305_add_aad();
    chacha20_poly1305_encrypt();
    chacha20_poly1305_final();
    if (*(unsigned char *)v15) {
      *(void *)(a8 + 16) = *v18;
    }
    uint64_t v19 = 0;
    do
    {
      if (++*((unsigned char *)v18 + v19)) {
        BOOL v21 = 1;
      }
      else {
        BOOL v21 = v19 == 7;
      }
      ++v19;
    }
    while (!v21);
    return 0;
  }
  else
  {
LABEL_16:
    APSLogErrorAt(0);
    return 4294895585;
  }
}

uint64_t chachaCryptor_GetEncryptionOverheadLength()
{
  if (*(unsigned char *)CMBaseObjectGetDerivedStorage()) {
    return 24;
  }
  else {
    return 16;
  }
}

__CFString *chachaCryptor_CopyDebugDescription(uint64_t a1)
{
  CFMutableStringRef Mutable = CFStringCreateMutable((CFAllocatorRef)*MEMORY[0x1E4F1CF80], 0);
  CFStringAppendFormat(Mutable, 0, @"<APSCryptorChaCha20Poly1305 %p>", a1);
  return Mutable;
}

void chachaCryptor_Finalize()
{
  uint64_t DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (gLogCategory_APSCryptorChaCha20Poly1305 <= 30
    && (gLogCategory_APSCryptorChaCha20Poly1305 != -1 || _LogCategory_Initialize()))
  {
    LogPrintF();
  }
  uint64_t v1 = *(const void **)(DerivedStorage + 264);
  if (v1)
  {
    CFRelease(v1);
    *(void *)(DerivedStorage + 264) = 0;
  }
  for (uint64_t i = 0; i != 256; ++i)
    *(unsigned char *)(DerivedStorage + 8 + i) = 0;
}

uint64_t AES_CBCFrame_Final()
{
  return MEMORY[0x1F4115CC0]();
}

uint64_t AES_CBCFrame_Init()
{
  return MEMORY[0x1F4115CC8]();
}

uint64_t AES_CBCFrame_Update()
{
  return MEMORY[0x1F4115CD0]();
}

uint64_t AES_CTR_Final()
{
  return MEMORY[0x1F4115CD8]();
}

uint64_t AES_CTR_Init()
{
  return MEMORY[0x1F4115CE0]();
}

uint64_t AES_CTR_Update()
{
  return MEMORY[0x1F4115CE8]();
}

uint64_t AES_GCM_Decrypt()
{
  return MEMORY[0x1F4115CF0]();
}

uint64_t AES_GCM_Encrypt()
{
  return MEMORY[0x1F4115CF8]();
}

uint64_t AES_GCM_Final()
{
  return MEMORY[0x1F4115D00]();
}

uint64_t AES_GCM_FinalizeMessage()
{
  return MEMORY[0x1F4115D08]();
}

uint64_t AES_GCM_InitEx()
{
  return MEMORY[0x1F4115D10]();
}

uint64_t AES_GCM_InitMessage()
{
  return MEMORY[0x1F4115D18]();
}

uint64_t AES_GCM_VerifyMessage()
{
  return MEMORY[0x1F4115D20]();
}

uint64_t ASPrintF()
{
  return MEMORY[0x1F4115D28]();
}

uint64_t AUCWirelessHDCPSessionManagerGetHDCPCapabilityOfDevice()
{
  return MEMORY[0x1F4113878]();
}

uint64_t AUCWirelessHDCPSessionManagerGetProtectionBitsOfDisplay()
{
  return MEMORY[0x1F4113880]();
}

OSStatus AudioConverterDispose(AudioConverterRef inAudioConverter)
{
  return MEMORY[0x1F410B4E0](inAudioConverter);
}

OSStatus AudioConverterFillComplexBuffer(AudioConverterRef inAudioConverter, AudioConverterComplexInputDataProc inInputDataProc, void *inInputDataProcUserData, UInt32 *ioOutputDataPacketSize, AudioBufferList *outOutputData, AudioStreamPacketDescription *outPacketDescription)
{
  return MEMORY[0x1F410B4E8](inAudioConverter, inInputDataProc, inInputDataProcUserData, ioOutputDataPacketSize, outOutputData, outPacketDescription);
}

OSStatus AudioConverterGetProperty(AudioConverterRef inAudioConverter, AudioConverterPropertyID inPropertyID, UInt32 *ioPropertyDataSize, void *outPropertyData)
{
  return MEMORY[0x1F410B4F8](inAudioConverter, *(void *)&inPropertyID, ioPropertyDataSize, outPropertyData);
}

OSStatus AudioConverterGetPropertyInfo(AudioConverterRef inAudioConverter, AudioConverterPropertyID inPropertyID, UInt32 *outSize, Boolean *outWritable)
{
  return MEMORY[0x1F410B500](inAudioConverter, *(void *)&inPropertyID, outSize, outWritable);
}

OSStatus AudioConverterNew(const AudioStreamBasicDescription *inSourceFormat, const AudioStreamBasicDescription *inDestinationFormat, AudioConverterRef *outAudioConverter)
{
  return MEMORY[0x1F410B508](inSourceFormat, inDestinationFormat, outAudioConverter);
}

OSStatus AudioConverterSetProperty(AudioConverterRef inAudioConverter, AudioConverterPropertyID inPropertyID, UInt32 inPropertyDataSize, const void *inPropertyData)
{
  return MEMORY[0x1F410B530](inAudioConverter, *(void *)&inPropertyID, *(void *)&inPropertyDataSize, inPropertyData);
}

OSStatus AudioServicesSetProperty(AudioServicesPropertyID inPropertyID, UInt32 inSpecifierSize, const void *inSpecifier, UInt32 inPropertyDataSize, const void *inPropertyData)
{
  return MEMORY[0x1F40D4E60](*(void *)&inPropertyID, *(void *)&inSpecifierSize, inSpecifier, *(void *)&inPropertyDataSize, inPropertyData);
}

uint64_t Base64DecodeCopy()
{
  return MEMORY[0x1F4115D58]();
}

uint64_t Base64EncodeCopyEx()
{
  return MEMORY[0x1F4115D60]();
}

int CC_SHA512_Final(unsigned __int8 *md, CC_SHA512_CTX *c)
{
  return MEMORY[0x1F40C97B8](md, c);
}

int CC_SHA512_Init(CC_SHA512_CTX *c)
{
  return MEMORY[0x1F40C97C0](c);
}

int CC_SHA512_Update(CC_SHA512_CTX *c, const void *data, CC_LONG len)
{
  return MEMORY[0x1F40C97C8](c, data, *(void *)&len);
}

CFAbsoluteTime CFAbsoluteTimeGetCurrent(void)
{
  MEMORY[0x1F40D70A8]();
  return result;
}

void *__cdecl CFAllocatorAllocate(CFAllocatorRef allocator, CFIndex size, CFOptionFlags hint)
{
  return (void *)MEMORY[0x1F40D70E8](allocator, size, hint);
}

CFAllocatorRef CFAllocatorCreate(CFAllocatorRef allocator, CFAllocatorContext *context)
{
  return (CFAllocatorRef)MEMORY[0x1F40D70F8](allocator, context);
}

void CFAllocatorDeallocate(CFAllocatorRef allocator, void *ptr)
{
}

CFIndex CFAllocatorGetPreferredSizeForSize(CFAllocatorRef allocator, CFIndex size, CFOptionFlags hint)
{
  return MEMORY[0x1F40D7118](allocator, size, hint);
}

void CFArrayAppendArray(CFMutableArrayRef theArray, CFArrayRef otherArray, CFRange otherRange)
{
}

uint64_t CFArrayAppendInt64()
{
  return MEMORY[0x1F4115E70]();
}

void CFArrayAppendValue(CFMutableArrayRef theArray, const void *value)
{
}

uint64_t CFArrayApplyBlock()
{
  return MEMORY[0x1F4115E78]();
}

CFArrayRef CFArrayCreate(CFAllocatorRef allocator, const void **values, CFIndex numValues, const CFArrayCallBacks *callBacks)
{
  return (CFArrayRef)MEMORY[0x1F40D7170](allocator, values, numValues, callBacks);
}

CFArrayRef CFArrayCreateCopy(CFAllocatorRef allocator, CFArrayRef theArray)
{
  return (CFArrayRef)MEMORY[0x1F40D7178](allocator, theArray);
}

CFMutableArrayRef CFArrayCreateMutable(CFAllocatorRef allocator, CFIndex capacity, const CFArrayCallBacks *callBacks)
{
  return (CFMutableArrayRef)MEMORY[0x1F40D7190](allocator, capacity, callBacks);
}

CFMutableArrayRef CFArrayCreateMutableCopy(CFAllocatorRef allocator, CFIndex capacity, CFArrayRef theArray)
{
  return (CFMutableArrayRef)MEMORY[0x1F40D7198](allocator, capacity, theArray);
}

void CFArrayExchangeValuesAtIndices(CFMutableArrayRef theArray, CFIndex idx1, CFIndex idx2)
{
}

CFIndex CFArrayGetCount(CFArrayRef theArray)
{
  return MEMORY[0x1F40D71B8](theArray);
}

CFTypeID CFArrayGetTypeID(void)
{
  return MEMORY[0x1F40D71D8]();
}

uint64_t CFArrayGetTypedValueAtIndex()
{
  return MEMORY[0x1F4115E88]();
}

const void *__cdecl CFArrayGetValueAtIndex(CFArrayRef theArray, CFIndex idx)
{
  return (const void *)MEMORY[0x1F40D71F0](theArray, idx);
}

void CFArrayInsertValueAtIndex(CFMutableArrayRef theArray, CFIndex idx, const void *value)
{
}

void CFArrayRemoveAllValues(CFMutableArrayRef theArray)
{
}

void CFArrayRemoveValueAtIndex(CFMutableArrayRef theArray, CFIndex idx)
{
}

void CFArrayReplaceValues(CFMutableArrayRef theArray, CFRange range, const void **newValues, CFIndex newCount)
{
}

void CFArraySetValueAtIndex(CFMutableArrayRef theArray, CFIndex idx, const void *value)
{
}

void CFArraySortValues(CFMutableArrayRef theArray, CFRange range, CFComparatorFunction comparator, void *context)
{
}

void CFBagAddValue(CFMutableBagRef theBag, const void *value)
{
}

Boolean CFBagContainsValue(CFBagRef theBag, const void *value)
{
  return MEMORY[0x1F40D72F8](theBag, value);
}

CFMutableBagRef CFBagCreateMutable(CFAllocatorRef allocator, CFIndex capacity, const CFBagCallBacks *callBacks)
{
  return (CFMutableBagRef)MEMORY[0x1F40D7308](allocator, capacity, callBacks);
}

void CFBagRemoveAllValues(CFMutableBagRef theBag)
{
}

void CFBagRemoveValue(CFMutableBagRef theBag, const void *value)
{
}

CFTypeID CFBooleanGetTypeID(void)
{
  return MEMORY[0x1F40D7420]();
}

Boolean CFBooleanGetValue(CFBooleanRef BOOLean)
{
  return MEMORY[0x1F40D7430](BOOLean);
}

CFStringRef CFBundleGetIdentifier(CFBundleRef bundle)
{
  return (CFStringRef)MEMORY[0x1F40D7568](bundle);
}

CFBundleRef CFBundleGetMainBundle(void)
{
  return (CFBundleRef)MEMORY[0x1F40D7598]();
}

CFCharacterSetRef CFCharacterSetGetPredefined(CFCharacterSetPredefinedSet theSetIdentifier)
{
  return (CFCharacterSetRef)MEMORY[0x1F40D7740](theSetIdentifier);
}

Boolean CFCharacterSetIsCharacterMember(CFCharacterSetRef theSet, UniChar theChar)
{
  return MEMORY[0x1F40D7770](theSet, theChar);
}

uint64_t CFCopyCString()
{
  return MEMORY[0x1F4115E90]();
}

uint64_t CFCreateWithPlistBytes()
{
  return MEMORY[0x1F4115EA0]();
}

void CFDataAppendBytes(CFMutableDataRef theData, const UInt8 *bytes, CFIndex length)
{
}

CFDataRef CFDataCreate(CFAllocatorRef allocator, const UInt8 *bytes, CFIndex length)
{
  return (CFDataRef)MEMORY[0x1F40D77E8](allocator, bytes, length);
}

CFMutableDataRef CFDataCreateMutable(CFAllocatorRef allocator, CFIndex capacity)
{
  return (CFMutableDataRef)MEMORY[0x1F40D7808](allocator, capacity);
}

CFMutableDataRef CFDataCreateMutableCopy(CFAllocatorRef allocator, CFIndex capacity, CFDataRef theData)
{
  return (CFMutableDataRef)MEMORY[0x1F40D7810](allocator, capacity, theData);
}

const UInt8 *__cdecl CFDataGetBytePtr(CFDataRef theData)
{
  return (const UInt8 *)MEMORY[0x1F40D7830](theData);
}

void CFDataGetBytes(CFDataRef theData, CFRange range, UInt8 *buffer)
{
}

CFIndex CFDataGetLength(CFDataRef theData)
{
  return MEMORY[0x1F40D7850](theData);
}

UInt8 *__cdecl CFDataGetMutableBytePtr(CFMutableDataRef theData)
{
  return (UInt8 *)MEMORY[0x1F40D7858](theData);
}

CFTypeID CFDataGetTypeID(void)
{
  return MEMORY[0x1F40D7860]();
}

void CFDataReplaceBytes(CFMutableDataRef theData, CFRange range, const UInt8 *newBytes, CFIndex newLength)
{
}

void CFDataSetLength(CFMutableDataRef theData, CFIndex length)
{
}

CFDateFormatterRef CFDateFormatterCreate(CFAllocatorRef allocator, CFLocaleRef locale, CFDateFormatterStyle dateStyle, CFDateFormatterStyle timeStyle)
{
  return (CFDateFormatterRef)MEMORY[0x1F40D78B0](allocator, locale, dateStyle, timeStyle);
}

CFStringRef CFDateFormatterCreateStringWithAbsoluteTime(CFAllocatorRef allocator, CFDateFormatterRef formatter, CFAbsoluteTime at)
{
  return (CFStringRef)MEMORY[0x1F40D78D8](allocator, formatter, at);
}

void CFDateFormatterSetFormat(CFDateFormatterRef formatter, CFStringRef formatString)
{
}

void CFDictionaryAddValue(CFMutableDictionaryRef theDict, const void *key, const void *value)
{
}

uint64_t CFDictionaryApplyBlock()
{
  return MEMORY[0x1F4115EA8]();
}

void CFDictionaryApplyFunction(CFDictionaryRef theDict, CFDictionaryApplierFunction applier, void *context)
{
}

Boolean CFDictionaryContainsKey(CFDictionaryRef theDict, const void *key)
{
  return MEMORY[0x1F40D7968](theDict, key);
}

uint64_t CFDictionaryCopyCString()
{
  return MEMORY[0x1F4115EB0]();
}

uint64_t CFDictionaryCopyKeys()
{
  return MEMORY[0x1F4115EB8]();
}

CFDictionaryRef CFDictionaryCreate(CFAllocatorRef allocator, const void **keys, const void **values, CFIndex numValues, const CFDictionaryKeyCallBacks *keyCallBacks, const CFDictionaryValueCallBacks *valueCallBacks)
{
  return (CFDictionaryRef)MEMORY[0x1F40D7978](allocator, keys, values, numValues, keyCallBacks, valueCallBacks);
}

CFDictionaryRef CFDictionaryCreateCopy(CFAllocatorRef allocator, CFDictionaryRef theDict)
{
  return (CFDictionaryRef)MEMORY[0x1F40D7990](allocator, theDict);
}

CFMutableDictionaryRef CFDictionaryCreateMutable(CFAllocatorRef allocator, CFIndex capacity, const CFDictionaryKeyCallBacks *keyCallBacks, const CFDictionaryValueCallBacks *valueCallBacks)
{
  return (CFMutableDictionaryRef)MEMORY[0x1F40D7998](allocator, capacity, keyCallBacks, valueCallBacks);
}

CFMutableDictionaryRef CFDictionaryCreateMutableCopy(CFAllocatorRef allocator, CFIndex capacity, CFDictionaryRef theDict)
{
  return (CFMutableDictionaryRef)MEMORY[0x1F40D79A8](allocator, capacity, theDict);
}

uint64_t CFDictionaryGetCString()
{
  return MEMORY[0x1F4115ED8]();
}

CFIndex CFDictionaryGetCount(CFDictionaryRef theDict)
{
  return MEMORY[0x1F40D79C0](theDict);
}

uint64_t CFDictionaryGetData()
{
  return MEMORY[0x1F4115EE0]();
}

uint64_t CFDictionaryGetDouble()
{
  return MEMORY[0x1F4115EF0]();
}

uint64_t CFDictionaryGetInt64()
{
  return MEMORY[0x1F4115F10]();
}

uint64_t CFDictionaryGetInt64Ranged()
{
  return MEMORY[0x1F4115F18]();
}

void CFDictionaryGetKeysAndValues(CFDictionaryRef theDict, const void **keys, const void **values)
{
}

CFTypeID CFDictionaryGetTypeID(void)
{
  return MEMORY[0x1F40D7A00]();
}

uint64_t CFDictionaryGetTypedValue()
{
  return MEMORY[0x1F4115F28]();
}

const void *__cdecl CFDictionaryGetValue(CFDictionaryRef theDict, const void *key)
{
  return (const void *)MEMORY[0x1F40D7A10](theDict, key);
}

Boolean CFDictionaryGetValueIfPresent(CFDictionaryRef theDict, const void *key, const void **value)
{
  return MEMORY[0x1F40D7A18](theDict, key, value);
}

uint64_t CFDictionaryMergeDictionary()
{
  return MEMORY[0x1F4115F38]();
}

void CFDictionaryRemoveAllValues(CFMutableDictionaryRef theDict)
{
}

void CFDictionaryRemoveValue(CFMutableDictionaryRef theDict, const void *key)
{
}

uint64_t CFDictionarySetCString()
{
  return MEMORY[0x1F4115F40]();
}

uint64_t CFDictionarySetData()
{
  return MEMORY[0x1F4115F48]();
}

uint64_t CFDictionarySetInt64()
{
  return MEMORY[0x1F4115F58]();
}

void CFDictionarySetValue(CFMutableDictionaryRef theDict, const void *key, const void *value)
{
}

Boolean CFEqual(CFTypeRef cf1, CFTypeRef cf2)
{
  return MEMORY[0x1F40D7A68](cf1, cf2);
}

CFAllocatorRef CFGetAllocator(CFTypeRef cf)
{
  return (CFAllocatorRef)MEMORY[0x1F40D7B60](cf);
}

uint64_t CFGetCString()
{
  return MEMORY[0x1F4115F68]();
}

uint64_t CFGetDouble()
{
  return MEMORY[0x1F4115F70]();
}

uint64_t CFGetInt64()
{
  return MEMORY[0x1F4115F80]();
}

uint64_t CFGetInt64Ranged()
{
  return MEMORY[0x1F4115F88]();
}

CFTypeID CFGetTypeID(CFTypeRef cf)
{
  return MEMORY[0x1F40D7B80](cf);
}

CFLocaleRef CFLocaleCopyCurrent(void)
{
  return (CFLocaleRef)MEMORY[0x1F40D7BB8]();
}

CFNotificationCenterRef CFNotificationCenterGetDarwinNotifyCenter(void)
{
  return (CFNotificationCenterRef)MEMORY[0x1F40D7D08]();
}

void CFNotificationCenterPostNotification(CFNotificationCenterRef center, CFNotificationName name, const void *object, CFDictionaryRef userInfo, Boolean deliverImmediately)
{
}

CFNumberRef CFNumberCreate(CFAllocatorRef allocator, CFNumberType theType, const void *valuePtr)
{
  return (CFNumberRef)MEMORY[0x1F40D7D80](allocator, theType, valuePtr);
}

uint64_t CFNumberCreateInt64()
{
  return MEMORY[0x1F4115F98]();
}

CFTypeID CFNumberGetTypeID(void)
{
  return MEMORY[0x1F40D7E10]();
}

Boolean CFNumberGetValue(CFNumberRef number, CFNumberType theType, void *valuePtr)
{
  return MEMORY[0x1F40D7E20](number, theType, valuePtr);
}

Boolean CFPreferencesAppSynchronize(CFStringRef applicationID)
{
  return MEMORY[0x1F40D7E90](applicationID);
}

CFPropertyListRef CFPreferencesCopyAppValue(CFStringRef key, CFStringRef applicationID)
{
  return (CFPropertyListRef)MEMORY[0x1F40D7EA0](key, applicationID);
}

CFArrayRef CFPreferencesCopyKeyList(CFStringRef applicationID, CFStringRef userName, CFStringRef hostName)
{
  return (CFArrayRef)MEMORY[0x1F40D7EB8](applicationID, userName, hostName);
}

Boolean CFPreferencesGetAppBooleanValue(CFStringRef key, CFStringRef applicationID, Boolean *keyExistsAndHasValidFormat)
{
  return MEMORY[0x1F40D7EE0](key, applicationID, keyExistsAndHasValidFormat);
}

void CFPreferencesSetAppValue(CFStringRef key, CFPropertyListRef value, CFStringRef applicationID)
{
}

uint64_t CFPropertyListCreateBytes()
{
  return MEMORY[0x1F4116038]();
}

uint64_t CFPropertyListCreateFormatted()
{
  return MEMORY[0x1F4116040]();
}

void CFRelease(CFTypeRef cf)
{
}

CFTypeRef CFRetain(CFTypeRef cf)
{
  return (CFTypeRef)MEMORY[0x1F40D8048](cf);
}

void CFSetAddValue(CFMutableSetRef theSet, const void *value)
{
}

uint64_t CFSetApplyBlock()
{
  return MEMORY[0x1F4116058]();
}

void CFSetApplyFunction(CFSetRef theSet, CFSetApplierFunction applier, void *context)
{
}

Boolean CFSetContainsValue(CFSetRef theSet, const void *value)
{
  return MEMORY[0x1F40D81F8](theSet, value);
}

CFSetRef CFSetCreate(CFAllocatorRef allocator, const void **values, CFIndex numValues, const CFSetCallBacks *callBacks)
{
  return (CFSetRef)MEMORY[0x1F40D8200](allocator, values, numValues, callBacks);
}

CFSetRef CFSetCreateCopy(CFAllocatorRef allocator, CFSetRef theSet)
{
  return (CFSetRef)MEMORY[0x1F40D8208](allocator, theSet);
}

CFMutableSetRef CFSetCreateMutable(CFAllocatorRef allocator, CFIndex capacity, const CFSetCallBacks *callBacks)
{
  return (CFMutableSetRef)MEMORY[0x1F40D8210](allocator, capacity, callBacks);
}

CFIndex CFSetGetCount(CFSetRef theSet)
{
  return MEMORY[0x1F40D8220](theSet);
}

void CFSetRemoveValue(CFMutableSetRef theSet, const void *value)
{
}

void CFSetSetValue(CFMutableSetRef theSet, const void *value)
{
}

void CFStringAppend(CFMutableStringRef theString, CFStringRef appendedString)
{
}

void CFStringAppendCString(CFMutableStringRef theString, const char *cStr, CFStringEncoding encoding)
{
}

uint64_t CFStringAppendF()
{
  return MEMORY[0x1F4116060]();
}

void CFStringAppendFormat(CFMutableStringRef theString, CFDictionaryRef formatOptions, CFStringRef format, ...)
{
}

CFComparisonResult CFStringCompare(CFStringRef theString1, CFStringRef theString2, CFStringCompareFlags compareOptions)
{
  return MEMORY[0x1F40D8388](theString1, theString2, compareOptions);
}

uint64_t CFStringCopyUTF8CString()
{
  return MEMORY[0x1F4116070]();
}

CFArrayRef CFStringCreateArrayBySeparatingStrings(CFAllocatorRef alloc, CFStringRef theString, CFStringRef separatorString)
{
  return (CFArrayRef)MEMORY[0x1F40D83D0](alloc, theString, separatorString);
}

CFStringRef CFStringCreateByCombiningStrings(CFAllocatorRef alloc, CFArrayRef theArray, CFStringRef separatorString)
{
  return (CFStringRef)MEMORY[0x1F40D83E0](alloc, theArray, separatorString);
}

uint64_t CFStringCreateF()
{
  return MEMORY[0x1F4116078]();
}

CFMutableStringRef CFStringCreateMutable(CFAllocatorRef alloc, CFIndex maxLength)
{
  return (CFMutableStringRef)MEMORY[0x1F40D8408](alloc, maxLength);
}

CFMutableStringRef CFStringCreateMutableCopy(CFAllocatorRef alloc, CFIndex maxLength, CFStringRef theString)
{
  return (CFMutableStringRef)MEMORY[0x1F40D8410](alloc, maxLength, theString);
}

CFStringRef CFStringCreateWithBytes(CFAllocatorRef alloc, const UInt8 *bytes, CFIndex numBytes, CFStringEncoding encoding, Boolean isExternalRepresentation)
{
  return (CFStringRef)MEMORY[0x1F40D8438](alloc, bytes, numBytes, *(void *)&encoding, isExternalRepresentation);
}

CFStringRef CFStringCreateWithBytesNoCopy(CFAllocatorRef alloc, const UInt8 *bytes, CFIndex numBytes, CFStringEncoding encoding, Boolean isExternalRepresentation, CFAllocatorRef contentsDeallocator)
{
  return (CFStringRef)MEMORY[0x1F40D8440](alloc, bytes, numBytes, *(void *)&encoding, isExternalRepresentation, contentsDeallocator);
}

CFStringRef CFStringCreateWithCString(CFAllocatorRef alloc, const char *cStr, CFStringEncoding encoding)
{
  return (CFStringRef)MEMORY[0x1F40D8448](alloc, cStr, *(void *)&encoding);
}

CFStringRef CFStringCreateWithFormat(CFAllocatorRef alloc, CFDictionaryRef formatOptions, CFStringRef format, ...)
{
  return (CFStringRef)MEMORY[0x1F40D8490](alloc, formatOptions, format);
}

CFIndex CFStringGetBytes(CFStringRef theString, CFRange range, CFStringEncoding encoding, UInt8 lossByte, Boolean isExternalRepresentation, UInt8 *buffer, CFIndex maxBufLen, CFIndex *usedBufLen)
{
  return MEMORY[0x1F40D8500](theString, range.location, range.length, *(void *)&encoding, lossByte, isExternalRepresentation, buffer, maxBufLen);
}

Boolean CFStringGetCString(CFStringRef theString, char *buffer, CFIndex bufferSize, CFStringEncoding encoding)
{
  return MEMORY[0x1F40D8510](theString, buffer, bufferSize, *(void *)&encoding);
}

const char *__cdecl CFStringGetCStringPtr(CFStringRef theString, CFStringEncoding encoding)
{
  return (const char *)MEMORY[0x1F40D8520](theString, *(void *)&encoding);
}

void CFStringGetCharacters(CFStringRef theString, CFRange range, UniChar *buffer)
{
}

const UniChar *__cdecl CFStringGetCharactersPtr(CFStringRef theString)
{
  return (const UniChar *)MEMORY[0x1F40D8540](theString);
}

SInt32 CFStringGetIntValue(CFStringRef str)
{
  return MEMORY[0x1F40D8568](str);
}

CFIndex CFStringGetLength(CFStringRef theString)
{
  return MEMORY[0x1F40D8578](theString);
}

uint64_t CFStringGetOrCopyCStringUTF8()
{
  return MEMORY[0x1F4116088]();
}

CFStringEncoding CFStringGetSystemEncoding(void)
{
  return MEMORY[0x1F40D85E0]();
}

CFTypeID CFStringGetTypeID(void)
{
  return MEMORY[0x1F40D85F0]();
}

Boolean CFStringHasPrefix(CFStringRef theString, CFStringRef prefix)
{
  return MEMORY[0x1F40D8600](theString, prefix);
}

Boolean CFStringHasSuffix(CFStringRef theString, CFStringRef suffix)
{
  return MEMORY[0x1F40D8608](theString, suffix);
}

void CFStringReplace(CFMutableStringRef theString, CFRange range, CFStringRef replacement)
{
}

CFUUIDRef CFUUIDCreate(CFAllocatorRef alloc)
{
  return (CFUUIDRef)MEMORY[0x1F40D8988](alloc);
}

CFUUIDRef CFUUIDCreateFromUUIDBytes(CFAllocatorRef alloc, CFUUIDBytes bytes)
{
  return (CFUUIDRef)MEMORY[0x1F40D89A0](alloc, *(void *)&bytes.byte0, *(void *)&bytes.byte8);
}

CFStringRef CFUUIDCreateString(CFAllocatorRef alloc, CFUUIDRef uuid)
{
  return (CFStringRef)MEMORY[0x1F40D89B0](alloc, uuid);
}

CFUUIDBytes CFUUIDGetUUIDBytes(CFUUIDRef uuid)
{
  uint64_t v1 = MEMORY[0x1F40D89E8](uuid);
  result.byte8 = v2;
  result.byte9 = BYTE1(v2);
  result.byte10 = BYTE2(v2);
  result.byte11 = BYTE3(v2);
  result.byte12 = BYTE4(v2);
  result.byte13 = BYTE5(v2);
  result.byte14 = BYTE6(v2);
  result.byte15 = HIBYTE(v2);
  result.byte0 = v1;
  result.byte1 = BYTE1(v1);
  result.byte2 = BYTE2(v1);
  result.byte3 = BYTE3(v1);
  result.byte4 = BYTE4(v1);
  result.byte5 = BYTE5(v1);
  result.byte6 = BYTE6(v1);
  result.byte7 = HIBYTE(v1);
  return result;
}

CFUserNotificationRef CFUserNotificationCreate(CFAllocatorRef allocator, CFTimeInterval timeout, CFOptionFlags flags, SInt32 *error, CFDictionaryRef dictionary)
{
  return (CFUserNotificationRef)MEMORY[0x1F40D8A28](allocator, flags, error, dictionary, timeout);
}

SInt32 CFUserNotificationReceiveResponse(CFUserNotificationRef userNotification, CFTimeInterval timeout, CFOptionFlags *responseFlags)
{
  return MEMORY[0x1F40D8A68](userNotification, responseFlags, timeout);
}

uint64_t CM8021ASClockAddIPv4PortAndGetIdentity()
{
  return MEMORY[0x1F40DB7D8]();
}

uint64_t CM8021ASClockAddIPv6PortAndGetIdentity()
{
  return MEMORY[0x1F40DB7E8]();
}

uint64_t CM8021ASClockCopyProperty()
{
  return MEMORY[0x1F40DB7F0]();
}

uint64_t CM8021ASClockCreate()
{
  return MEMORY[0x1F40DB7F8]();
}

uint64_t CM8021ASClockDisablePort()
{
  return MEMORY[0x1F40DB800]();
}

uint64_t CM8021ASClockEnablePort()
{
  return MEMORY[0x1F40DB808]();
}

uint64_t CM8021ASClockGetClockTimeForHostTime()
{
  return MEMORY[0x1F40DB810]();
}

uint64_t CM8021ASClockGetHostTimeForClockTime()
{
  return MEMORY[0x1F40DB818]();
}

uint64_t CM8021ASClockIsLocked()
{
  return MEMORY[0x1F40DB820]();
}

uint64_t CM8021ASClockOverridePortReceiveMatching()
{
  return MEMORY[0x1F40DB828]();
}

uint64_t CM8021ASClockRemoveIPv4Port()
{
  return MEMORY[0x1F40DB830]();
}

uint64_t CM8021ASClockRemoveIPv6Port()
{
  return MEMORY[0x1F40DB838]();
}

uint64_t CM8021ASClockSetAllPortRemoteSyncMessageIntervals()
{
  return MEMORY[0x1F40DB840]();
}

uint64_t CM8021ASClockSetPortRemoteSyncMessageIntervals()
{
  return MEMORY[0x1F40DB848]();
}

OSStatus CMAudioFormatDescriptionCreate(CFAllocatorRef allocator, const AudioStreamBasicDescription *asbd, size_t layoutSize, const AudioChannelLayout *layout, size_t magicCookieSize, const void *magicCookie, CFDictionaryRef extensions, CMAudioFormatDescriptionRef *formatDescriptionOut)
{
  return MEMORY[0x1F40DB880](allocator, asbd, layoutSize, layout, magicCookieSize, magicCookie, extensions, formatDescriptionOut);
}

const AudioChannelLayout *__cdecl CMAudioFormatDescriptionGetChannelLayout(CMAudioFormatDescriptionRef desc, size_t *sizeOut)
{
  return (const AudioChannelLayout *)MEMORY[0x1F40DB8A0](desc, sizeOut);
}

const AudioFormatListItem *__cdecl CMAudioFormatDescriptionGetFormatList(CMAudioFormatDescriptionRef desc, size_t *sizeOut)
{
  return (const AudioFormatListItem *)MEMORY[0x1F40DB8A8](desc, sizeOut);
}

const AudioFormatListItem *__cdecl CMAudioFormatDescriptionGetRichestDecodableFormat(CMAudioFormatDescriptionRef desc)
{
  return (const AudioFormatListItem *)MEMORY[0x1F40DB8C8](desc);
}

uint64_t CMAudioFormatDescriptionGetRichestDecodableFormatAndChannelLayout()
{
  return MEMORY[0x1F40DB8D0]();
}

const AudioStreamBasicDescription *__cdecl CMAudioFormatDescriptionGetStreamBasicDescription(CMAudioFormatDescriptionRef desc)
{
  return (const AudioStreamBasicDescription *)MEMORY[0x1F40DB8D8](desc);
}

OSStatus CMAudioSampleBufferCreateReadyWithPacketDescriptions(CFAllocatorRef allocator, CMBlockBufferRef dataBuffer, CMFormatDescriptionRef formatDescription, CMItemCount numSamples, CMTime *presentationTimeStamp, const AudioStreamPacketDescription *packetDescriptions, CMSampleBufferRef *sampleBufferOut)
{
  return MEMORY[0x1F40DB8E0](allocator, dataBuffer, formatDescription, numSamples, presentationTimeStamp, packetDescriptions, sampleBufferOut);
}

uint64_t CMBaseGetClassID()
{
  return MEMORY[0x1F40DB900]();
}

uint64_t CMBaseObjectGetDerivedStorage()
{
  return MEMORY[0x1F40DB910]();
}

uint64_t CMBaseObjectGetProtocolVTable()
{
  return MEMORY[0x1F40DB918]();
}

uint64_t CMBaseObjectGetVTable()
{
  return MEMORY[0x1F40DB920]();
}

OSStatus CMBlockBufferAppendBufferReference(CMBlockBufferRef theBuffer, CMBlockBufferRef targetBBuf, size_t offsetToData, size_t dataLength, CMBlockBufferFlags flags)
{
  return MEMORY[0x1F40DB950](theBuffer, targetBBuf, offsetToData, dataLength, *(void *)&flags);
}

OSStatus CMBlockBufferCopyDataBytes(CMBlockBufferRef theSourceBuffer, size_t offsetToData, size_t dataLength, void *destination)
{
  return MEMORY[0x1F40DB968](theSourceBuffer, offsetToData, dataLength, destination);
}

OSStatus CMBlockBufferCreateEmpty(CFAllocatorRef structureAllocator, uint32_t subBlockCapacity, CMBlockBufferFlags flags, CMBlockBufferRef *blockBufferOut)
{
  return MEMORY[0x1F40DB978](structureAllocator, *(void *)&subBlockCapacity, *(void *)&flags, blockBufferOut);
}

OSStatus CMBlockBufferCreateWithBufferReference(CFAllocatorRef structureAllocator, CMBlockBufferRef bufferReference, size_t offsetToData, size_t dataLength, CMBlockBufferFlags flags, CMBlockBufferRef *blockBufferOut)
{
  return MEMORY[0x1F40DB980](structureAllocator, bufferReference, offsetToData, dataLength, *(void *)&flags, blockBufferOut);
}

OSStatus CMBlockBufferCreateWithMemoryBlock(CFAllocatorRef structureAllocator, void *memoryBlock, size_t blockLength, CFAllocatorRef blockAllocator, const CMBlockBufferCustomBlockSource *customBlockSource, size_t offsetToData, size_t dataLength, CMBlockBufferFlags flags, CMBlockBufferRef *blockBufferOut)
{
  return MEMORY[0x1F40DB988](structureAllocator, memoryBlock, blockLength, blockAllocator, customBlockSource, offsetToData, dataLength, *(void *)&flags);
}

size_t CMBlockBufferGetDataLength(CMBlockBufferRef theBuffer)
{
  return MEMORY[0x1F40DB998](theBuffer);
}

OSStatus CMBlockBufferGetDataPointer(CMBlockBufferRef theBuffer, size_t offset, size_t *lengthAtOffsetOut, size_t *totalLengthOut, char **dataPointerOut)
{
  return MEMORY[0x1F40DB9A0](theBuffer, offset, lengthAtOffsetOut, totalLengthOut, dataPointerOut);
}

CFTypeID CMBlockBufferGetTypeID(void)
{
  return MEMORY[0x1F40DB9B0]();
}

Boolean CMBlockBufferIsEmpty(CMBlockBufferRef theBuffer)
{
  return MEMORY[0x1F40DB9B8](theBuffer);
}

Boolean CMBlockBufferIsRangeContiguous(CMBlockBufferRef theBuffer, size_t offset, size_t length)
{
  return MEMORY[0x1F40DB9C0](theBuffer, offset, length);
}

OSStatus CMBlockBufferReplaceDataBytes(const void *sourceBytes, CMBlockBufferRef destinationBuffer, size_t offsetIntoDestination, size_t dataLength)
{
  return MEMORY[0x1F40DB9C8](sourceBytes, destinationBuffer, offsetIntoDestination, dataLength);
}

OSStatus CMBufferQueueCallForEachBuffer(CMBufferQueueRef queue, OSStatus (__cdecl *callback)(CMBufferRef, void *), void *refcon)
{
  return MEMORY[0x1F40DB9D0](queue, callback, refcon);
}

CMBufferRef CMBufferQueueCopyHead(CMBufferQueueRef queue)
{
  return (CMBufferRef)MEMORY[0x1F40DB9E0](queue);
}

OSStatus CMBufferQueueCreate(CFAllocatorRef allocator, CMItemCount capacity, const CMBufferCallbacks *callbacks, CMBufferQueueRef *queueOut)
{
  return MEMORY[0x1F40DB9E8](allocator, capacity, callbacks, queueOut);
}

CMBufferRef CMBufferQueueDequeueAndRetain(CMBufferQueueRef queue)
{
  return (CMBufferRef)MEMORY[0x1F40DB9F8](queue);
}

OSStatus CMBufferQueueEnqueue(CMBufferQueueRef queue, CMBufferRef buf)
{
  return MEMORY[0x1F40DBA08](queue, buf);
}

const CMBufferCallbacks *CMBufferQueueGetCallbacksForUnsortedSampleBuffers(void)
{
  return (const CMBufferCallbacks *)MEMORY[0x1F40DBA20]();
}

CMTime *__cdecl CMBufferQueueGetDuration(CMTime *__return_ptr retstr, CMBufferQueueRef queue)
{
  return (CMTime *)MEMORY[0x1F40DBA28](retstr, queue);
}

CMTime *__cdecl CMBufferQueueGetEndPresentationTimeStamp(CMTime *__return_ptr retstr, CMBufferQueueRef queue)
{
  return (CMTime *)MEMORY[0x1F40DBA30](retstr, queue);
}

CMTime *__cdecl CMBufferQueueGetFirstPresentationTimeStamp(CMTime *__return_ptr retstr, CMBufferQueueRef queue)
{
  return (CMTime *)MEMORY[0x1F40DBA38](retstr, queue);
}

CMBufferRef CMBufferQueueGetHead(CMBufferQueueRef queue)
{
  return (CMBufferRef)MEMORY[0x1F40DBA40](queue);
}

CMTime *__cdecl CMBufferQueueGetMinPresentationTimeStamp(CMTime *__return_ptr retstr, CMBufferQueueRef queue)
{
  return (CMTime *)MEMORY[0x1F40DBA50](retstr, queue);
}

Boolean CMBufferQueueIsEmpty(CMBufferQueueRef queue)
{
  return MEMORY[0x1F40DBA90](queue);
}

OSStatus CMBufferQueueReset(CMBufferQueueRef queue)
{
  return MEMORY[0x1F40DBAA8](queue);
}

uint64_t CMClockConvertHostTimeToSystemUnits(CMTime *hostTime)
{
  return MEMORY[0x1F40DBB20](hostTime);
}

CMClockRef CMClockGetHostTimeClock(void)
{
  return (CMClockRef)MEMORY[0x1F40DBB30]();
}

CMTime *__cdecl CMClockGetTime(CMTime *__return_ptr retstr, CMClockRef clock)
{
  return (CMTime *)MEMORY[0x1F40DBB38](retstr, clock);
}

CMTime *__cdecl CMClockMakeHostTimeFromSystemUnits(CMTime *__return_ptr retstr, uint64_t hostTime)
{
  return (CMTime *)MEMORY[0x1F40DBB50](retstr, hostTime);
}

CFDictionaryRef CMCopyDictionaryOfAttachments(CFAllocatorRef allocator, CMAttachmentBearerRef target, CMAttachmentMode attachmentMode)
{
  return (CFDictionaryRef)MEMORY[0x1F40DBB70](allocator, target, *(void *)&attachmentMode);
}

uint64_t CMDerivedObjectCreate()
{
  return MEMORY[0x1F40DBB80]();
}

Boolean CMFormatDescriptionEqual(CMFormatDescriptionRef formatDescription, CMFormatDescriptionRef otherFormatDescription)
{
  return MEMORY[0x1F40DBBA8](formatDescription, otherFormatDescription);
}

FourCharCode CMFormatDescriptionGetMediaSubType(CMFormatDescriptionRef desc)
{
  return MEMORY[0x1F40DBBC8](desc);
}

CFTypeRef CMGetAttachment(CMAttachmentBearerRef target, CFStringRef key, CMAttachmentMode *attachmentModeOut)
{
  return (CFTypeRef)MEMORY[0x1F40DBBF0](target, key, attachmentModeOut);
}

uint64_t CMNotificationCenterGetDefaultLocalCenter()
{
  return MEMORY[0x1F40DBCB8]();
}

uint64_t CMNotificationCenterPostNotification()
{
  return MEMORY[0x1F40DBCC0]();
}

void CMPropagateAttachments(CMAttachmentBearerRef source, CMAttachmentBearerRef destination)
{
}

void CMRemoveAttachment(CMAttachmentBearerRef target, CFStringRef key)
{
}

OSStatus CMSampleBufferCreate(CFAllocatorRef allocator, CMBlockBufferRef dataBuffer, Boolean dataReady, CMSampleBufferMakeDataReadyCallback makeDataReadyCallback, void *makeDataReadyRefcon, CMFormatDescriptionRef formatDescription, CMItemCount numSamples, CMItemCount numSampleTimingEntries, const CMSampleTimingInfo *sampleTimingArray, CMItemCount numSampleSizeEntries, const size_t *sampleSizeArray, CMSampleBufferRef *sampleBufferOut)
{
  return MEMORY[0x1F40DBD30](allocator, dataBuffer, dataReady, makeDataReadyCallback, makeDataReadyRefcon, formatDescription, numSamples, numSampleTimingEntries);
}

OSStatus CMSampleBufferCreateCopy(CFAllocatorRef allocator, CMSampleBufferRef sbuf, CMSampleBufferRef *sampleBufferOut)
{
  return MEMORY[0x1F40DBD38](allocator, sbuf, sampleBufferOut);
}

OSStatus CMSampleBufferCreateCopyWithNewTiming(CFAllocatorRef allocator, CMSampleBufferRef originalSBuf, CMItemCount numSampleTimingEntries, const CMSampleTimingInfo *sampleTimingArray, CMSampleBufferRef *sampleBufferOut)
{
  return MEMORY[0x1F40DBD40](allocator, originalSBuf, numSampleTimingEntries, sampleTimingArray, sampleBufferOut);
}

OSStatus CMSampleBufferCreateReady(CFAllocatorRef allocator, CMBlockBufferRef dataBuffer, CMFormatDescriptionRef formatDescription, CMItemCount numSamples, CMItemCount numSampleTimingEntries, const CMSampleTimingInfo *sampleTimingArray, CMItemCount numSampleSizeEntries, const size_t *sampleSizeArray, CMSampleBufferRef *sampleBufferOut)
{
  return MEMORY[0x1F40DBD60](allocator, dataBuffer, formatDescription, numSamples, numSampleTimingEntries, sampleTimingArray, numSampleSizeEntries, sampleSizeArray);
}

CMBlockBufferRef CMSampleBufferGetDataBuffer(CMSampleBufferRef sbuf)
{
  return (CMBlockBufferRef)MEMORY[0x1F40DBDA0](sbuf);
}

CMTime *__cdecl CMSampleBufferGetDecodeTimeStamp(CMTime *__return_ptr retstr, CMSampleBufferRef sbuf)
{
  return (CMTime *)MEMORY[0x1F40DBDB0](retstr, sbuf);
}

CMTime *__cdecl CMSampleBufferGetDuration(CMTime *__return_ptr retstr, CMSampleBufferRef sbuf)
{
  return (CMTime *)MEMORY[0x1F40DBDB8](retstr, sbuf);
}

CMFormatDescriptionRef CMSampleBufferGetFormatDescription(CMSampleBufferRef sbuf)
{
  return (CMFormatDescriptionRef)MEMORY[0x1F40DBDC0](sbuf);
}

CMItemCount CMSampleBufferGetNumSamples(CMSampleBufferRef sbuf)
{
  return MEMORY[0x1F40DBDD0](sbuf);
}

CMTime *__cdecl CMSampleBufferGetOutputDuration(CMTime *__return_ptr retstr, CMSampleBufferRef sbuf)
{
  return (CMTime *)MEMORY[0x1F40DBDE0](retstr, sbuf);
}

CMTime *__cdecl CMSampleBufferGetOutputPresentationTimeStamp(CMTime *__return_ptr retstr, CMSampleBufferRef sbuf)
{
  return (CMTime *)MEMORY[0x1F40DBDE8](retstr, sbuf);
}

CMTime *__cdecl CMSampleBufferGetPresentationTimeStamp(CMTime *__return_ptr retstr, CMSampleBufferRef sbuf)
{
  return (CMTime *)MEMORY[0x1F40DBDF8](retstr, sbuf);
}

CFArrayRef CMSampleBufferGetSampleAttachmentsArray(CMSampleBufferRef sbuf, Boolean createIfNecessary)
{
  return (CFArrayRef)MEMORY[0x1F40DBE00](sbuf, createIfNecessary);
}

OSStatus CMSampleBufferSetOutputPresentationTimeStamp(CMSampleBufferRef sbuf, CMTime *outputPresentationTimeStamp)
{
  return MEMORY[0x1F40DBE98](sbuf, outputPresentationTimeStamp);
}

uint64_t CMSessionMgrSystemSoundActivateForPID()
{
  return MEMORY[0x1F412CA00]();
}

void CMSetAttachment(CMAttachmentBearerRef target, CFStringRef key, CFTypeRef value, CMAttachmentMode attachmentMode)
{
}

void CMSetAttachments(CMAttachmentBearerRef target, CFDictionaryRef theAttachments, CMAttachmentMode attachmentMode)
{
}

OSStatus CMSimpleQueueCreate(CFAllocatorRef allocator, int32_t capacity, CMSimpleQueueRef *queueOut)
{
  return MEMORY[0x1F40DBED0](allocator, *(void *)&capacity, queueOut);
}

const void *__cdecl CMSimpleQueueDequeue(CMSimpleQueueRef queue)
{
  return (const void *)MEMORY[0x1F40DBED8](queue);
}

OSStatus CMSimpleQueueEnqueue(CMSimpleQueueRef queue, const void *element)
{
  return MEMORY[0x1F40DBEE0](queue, element);
}

int32_t CMSimpleQueueGetCount(CMSimpleQueueRef queue)
{
  return MEMORY[0x1F40DBEF0](queue);
}

CMTime *__cdecl CMSyncConvertTime(CMTime *__return_ptr retstr, CMTime *time, CMClockOrTimebaseRef fromClockOrTimebase, CMClockOrTimebaseRef toClockOrTimebase)
{
  return (CMTime *)MEMORY[0x1F40DBF20](retstr, time, fromClockOrTimebase, toClockOrTimebase);
}

Float64 CMSyncGetRelativeRate(CMClockOrTimebaseRef ofClockOrTimebase, CMClockOrTimebaseRef relativeToClockOrTimebase)
{
  MEMORY[0x1F40DBF28](ofClockOrTimebase, relativeToClockOrTimebase);
  return result;
}

CMTime *__cdecl CMSyncGetTime(CMTime *__return_ptr retstr, CMClockOrTimebaseRef clockOrTimebase)
{
  return (CMTime *)MEMORY[0x1F40DBF38](retstr, clockOrTimebase);
}

CMTime *__cdecl CMTimeAdd(CMTime *__return_ptr retstr, CMTime *lhs, CMTime *rhs)
{
  return (CMTime *)MEMORY[0x1F40DC088](retstr, lhs, rhs);
}

int32_t CMTimeCompare(CMTime *time1, CMTime *time2)
{
  return MEMORY[0x1F40DC0C8](time1, time2);
}

CMTime *__cdecl CMTimeConvertScale(CMTime *__return_ptr retstr, CMTime *time, int32_t newTimescale, CMTimeRoundingMethod method)
{
  return (CMTime *)MEMORY[0x1F40DC0D0](retstr, time, *(void *)&newTimescale, *(void *)&method);
}

CFDictionaryRef CMTimeCopyAsDictionary(CMTime *time, CFAllocatorRef allocator)
{
  return (CFDictionaryRef)MEMORY[0x1F40DC0E0](time, allocator);
}

Float64 CMTimeGetSeconds(CMTime *time)
{
  MEMORY[0x1F40DC100](time);
  return result;
}

CMTime *__cdecl CMTimeMake(CMTime *__return_ptr retstr, int64_t value, int32_t timescale)
{
  return (CMTime *)MEMORY[0x1F40DC108](retstr, value, *(void *)&timescale);
}

CMTime *__cdecl CMTimeMakeFromDictionary(CMTime *__return_ptr retstr, CFDictionaryRef dictionaryRepresentation)
{
  return (CMTime *)MEMORY[0x1F40DC110](retstr, dictionaryRepresentation);
}

CMTime *__cdecl CMTimeMakeWithSeconds(CMTime *__return_ptr retstr, Float64 seconds, int32_t preferredTimescale)
{
  return (CMTime *)MEMORY[0x1F40DC120](retstr, *(void *)&preferredTimescale, seconds);
}

CMTime *__cdecl CMTimeMinimum(CMTime *__return_ptr retstr, CMTime *time1, CMTime *time2)
{
  return (CMTime *)MEMORY[0x1F40DC168](retstr, time1, time2);
}

CMTime *__cdecl CMTimeMultiplyByFloat64(CMTime *__return_ptr retstr, CMTime *time, Float64 multiplier)
{
  return (CMTime *)MEMORY[0x1F40DC178](retstr, time, multiplier);
}

Boolean CMTimeRangeContainsTime(CMTimeRange *range, CMTime *time)
{
  return MEMORY[0x1F40DC190](range, time);
}

CMTime *__cdecl CMTimeRangeGetEnd(CMTime *__return_ptr retstr, CMTimeRange *range)
{
  return (CMTime *)MEMORY[0x1F40DC1C0](retstr, range);
}

CMTimeRange *__cdecl CMTimeRangeMake(CMTimeRange *__return_ptr retstr, CMTime *start, CMTime *duration)
{
  return (CMTimeRange *)MEMORY[0x1F40DC1D8](retstr, start, duration);
}

CMTime *__cdecl CMTimeSubtract(CMTime *__return_ptr retstr, CMTime *lhs, CMTime *rhs)
{
  return (CMTime *)MEMORY[0x1F40DC1F0](retstr, lhs, rhs);
}

uint64_t CMTimeSyncClockCreateForSystemDomainClockIdentifier()
{
  return MEMORY[0x1F40DC1F8]();
}

OSStatus CMTimebaseAddTimerDispatchSource(CMTimebaseRef timebase, dispatch_source_t timerSource)
{
  return MEMORY[0x1F40DC208](timebase, timerSource);
}

Float64 CMTimebaseGetRate(CMTimebaseRef timebase)
{
  MEMORY[0x1F40DC258](timebase);
  return result;
}

CMTime *__cdecl CMTimebaseGetTime(CMTime *__return_ptr retstr, CMTimebaseRef timebase)
{
  return (CMTime *)MEMORY[0x1F40DC260](retstr, timebase);
}

uint64_t CMTimebaseGetTimeWithLogging()
{
  return MEMORY[0x1F40DC278]();
}

OSStatus CMTimebaseRemoveTimerDispatchSource(CMTimebaseRef timebase, dispatch_source_t timerSource)
{
  return MEMORY[0x1F40DC298](timebase, timerSource);
}

OSStatus CMTimebaseSetTimerDispatchSourceNextFireTime(CMTimebaseRef timebase, dispatch_source_t timerSource, CMTime *fireTime, uint32_t flags)
{
  return MEMORY[0x1F40DC2D8](timebase, timerSource, fireTime, *(void *)&flags);
}

OSStatus CMTimebaseSetTimerDispatchSourceToFireImmediately(CMTimebaseRef timebase, dispatch_source_t timerSource)
{
  return MEMORY[0x1F40DC2E0](timebase, timerSource);
}

OSStatus CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(CFAllocatorRef allocator, CMVideoFormatDescriptionRef videoFormatDescription, CFStringEncoding stringEncoding, CMImageDescriptionFlavor flavor, CMBlockBufferRef *blockBufferOut)
{
  return MEMORY[0x1F40DC2F0](allocator, videoFormatDescription, *(void *)&stringEncoding, flavor, blockBufferOut);
}

OSStatus CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(CFAllocatorRef allocator, CMBlockBufferRef imageDescriptionBlockBuffer, CFStringEncoding stringEncoding, CMImageDescriptionFlavor flavor, CMVideoFormatDescriptionRef *formatDescriptionOut)
{
  return MEMORY[0x1F40DC310](allocator, imageDescriptionBlockBuffer, *(void *)&stringEncoding, flavor, formatDescriptionOut);
}

uint64_t CreateUsableInterfaceList()
{
  return MEMORY[0x1F4116270]();
}

uint64_t DataToHexCStringEx()
{
  return MEMORY[0x1F4116328]();
}

uint64_t FPrintF()
{
  return MEMORY[0x1F4116358]();
}

uint64_t FVDUtilsHEVCEncoderSupports42010()
{
  return MEMORY[0x1F40ED130]();
}

uint64_t FatalErrorF()
{
  return MEMORY[0x1F4116368]();
}

uint64_t FigAudioSessionCreateUsingAuxiliaryAVAudioSession()
{
  return MEMORY[0x1F40ED308]();
}

uint64_t FigCFArrayAppendCMTime()
{
  return MEMORY[0x1F40DC7F0]();
}

uint64_t FigCFArrayAppendDouble()
{
  return MEMORY[0x1F40DC7F8]();
}

uint64_t FigCFArrayAppendFloat()
{
  return MEMORY[0x1F40DC800]();
}

uint64_t FigCFArrayAppendInt32()
{
  return MEMORY[0x1F40DC810]();
}

uint64_t FigCFArrayAppendInt64()
{
  return MEMORY[0x1F40DC818]();
}

uint64_t FigCFArrayApplyFunction()
{
  return MEMORY[0x1F40DC828]();
}

uint64_t FigCFArrayGetFloatAtIndex()
{
  return MEMORY[0x1F40DC8C0]();
}

uint64_t FigCFArrayGetInt32AtIndex()
{
  return MEMORY[0x1F40DC8D0]();
}

uint64_t FigCFArrayRemoveLastElementOfValue()
{
  return MEMORY[0x1F40DC900]();
}

uint64_t FigCFDictionaryAddEntriesToDictionaryWithRecursion()
{
  return MEMORY[0x1F40DC940]();
}

uint64_t FigCFDictionaryCopyArrayOfKeys()
{
  return MEMORY[0x1F40DC950]();
}

uint64_t FigCFDictionaryCopyArrayOfValues()
{
  return MEMORY[0x1F40DC958]();
}

uint64_t FigCFDictionaryCreateMutableCopy()
{
  return MEMORY[0x1F40DC970]();
}

uint64_t FigCFDictionaryGetBooleanIfPresent()
{
  return MEMORY[0x1F40DC988]();
}

uint64_t FigCFDictionaryGetBooleanValue()
{
  return MEMORY[0x1F40DC990]();
}

uint64_t FigCFDictionaryGetCMTimeIfPresent()
{
  return MEMORY[0x1F40DC9B8]();
}

uint64_t FigCFDictionaryGetCMTimeRangeIfPresent()
{
  return MEMORY[0x1F40DC9C0]();
}

uint64_t FigCFDictionaryGetCount()
{
  return MEMORY[0x1F40DC9C8]();
}

uint64_t FigCFDictionaryGetDoubleIfPresent()
{
  return MEMORY[0x1F40DC9E0]();
}

uint64_t FigCFDictionaryGetFloat32IfPresent()
{
  return MEMORY[0x1F40DC9E8]();
}

uint64_t FigCFDictionaryGetInt32IfPresent()
{
  return MEMORY[0x1F40DCA00]();
}

uint64_t FigCFDictionaryGetInt64IfPresent()
{
  return MEMORY[0x1F40DCA08]();
}

uint64_t FigCFDictionaryGetNumberValue()
{
  return MEMORY[0x1F40DCA18]();
}

uint64_t FigCFDictionaryGetStringValue()
{
  return MEMORY[0x1F40DCA28]();
}

uint64_t FigCFDictionaryGetValue()
{
  return MEMORY[0x1F40DCA38]();
}

uint64_t FigCFDictionaryGetValueIfPresent()
{
  return MEMORY[0x1F40DCA48]();
}

uint64_t FigCFDictionarySetDouble()
{
  return MEMORY[0x1F40DCA98]();
}

uint64_t FigCFDictionarySetFloat()
{
  return MEMORY[0x1F40DCAA0]();
}

uint64_t FigCFDictionarySetFloat32()
{
  return MEMORY[0x1F40DCAA8]();
}

uint64_t FigCFDictionarySetInt32()
{
  return MEMORY[0x1F40DCAC0]();
}

uint64_t FigCFDictionarySetInt64()
{
  return MEMORY[0x1F40DCAC8]();
}

uint64_t FigCFDictionarySetValue()
{
  return MEMORY[0x1F40DCAE8]();
}

uint64_t FigCFDictionarySetValueFromKeyInDict()
{
  return MEMORY[0x1F40DCAF0]();
}

uint64_t FigCFEqual()
{
  return MEMORY[0x1F40DCAF8]();
}

uint64_t FigCFNumberCreateFloat64()
{
  return MEMORY[0x1F40DCB20]();
}

uint64_t FigCFNumberCreateSInt16()
{
  return MEMORY[0x1F40DCB28]();
}

uint64_t FigCFNumberCreateSInt32()
{
  return MEMORY[0x1F40DCB30]();
}

uint64_t FigCFNumberCreateUInt32()
{
  return MEMORY[0x1F40DCB50]();
}

uint64_t FigCFNumberGetUInt16()
{
  return MEMORY[0x1F40DCB88]();
}

uint64_t FigCFNumberGetUInt32()
{
  return MEMORY[0x1F40DCB90]();
}

uint64_t FigCFNumberGetUInt64()
{
  return MEMORY[0x1F40DCB98]();
}

uint64_t FigCFStringFind()
{
  return MEMORY[0x1F40DCC18]();
}

uint64_t FigCFStringGetCStringPtrAndBufferToFree()
{
  return MEMORY[0x1F40DCC20]();
}

uint64_t FigCFWeakReferenceHolderCopyReferencedObject()
{
  return MEMORY[0x1F40DCCA0]();
}

uint64_t FigCFWeakReferenceHolderCreateWithReferencedObject()
{
  return MEMORY[0x1F40DCCA8]();
}

uint64_t FigCFWeakReferenceTableAddValueAndGetKey()
{
  return MEMORY[0x1F40DCCD0]();
}

uint64_t FigCFWeakReferenceTableCopyValue()
{
  return MEMORY[0x1F40DCCE8]();
}

uint64_t FigCFWeakReferenceTableCreate()
{
  return MEMORY[0x1F40DCCF8]();
}

uint64_t FigCreateBlockBufferCopyingMemoryBlock()
{
  return MEMORY[0x1F40DD000]();
}

uint64_t FigDispatchAsyncPostNotification()
{
  return MEMORY[0x1F40DD370]();
}

uint64_t FigDispatchQueueCreateWithPriority()
{
  return MEMORY[0x1F40DD3A8]();
}

uint64_t FigEndpointStreamAudioEngineSbufTracerDebugPrint()
{
  return MEMORY[0x1F40ED590]();
}

uint64_t FigEndpointStreamAudioFormatDescriptionCreate()
{
  return MEMORY[0x1F40DD550]();
}

uint64_t FigEndpointStreamAudioFormatDescriptionGetASBD()
{
  return MEMORY[0x1F40DD560]();
}

uint64_t FigEndpointStreamAudioFormatDescriptionGetChannelLayoutTag()
{
  return MEMORY[0x1F40DD568]();
}

uint64_t FigGetCFPreferenceNumberWithDefault()
{
  return MEMORY[0x1F40DD858]();
}

uint64_t FigGetTimeOfDayClock()
{
  return MEMORY[0x1F40DD8C0]();
}

uint64_t FigIsAirplaydEnabled()
{
  return MEMORY[0x1F40DDB28]();
}

uint64_t FigNote_ChangeValue()
{
  return MEMORY[0x1F40DDD58]();
}

uint64_t FigNote_CopyKeys()
{
  return MEMORY[0x1F40DDD60]();
}

uint64_t FigNote_GetValue()
{
  return MEMORY[0x1F40DDD68]();
}

uint64_t FigNotificationCenterAddWeakListener()
{
  return MEMORY[0x1F40DDD90]();
}

uint64_t FigNotificationCenterRemoveWeakListener()
{
  return MEMORY[0x1F40DDDB0]();
}

uint64_t FigRCLCopyCFType()
{
  return MEMORY[0x1F40EDAB0]();
}

uint64_t FigRCLCreateConfiguration()
{
  return MEMORY[0x1F40EDAB8]();
}

uint64_t FigReentrantMutexCreate()
{
  return MEMORY[0x1F40DDFA0]();
}

uint64_t FigReentrantMutexLock()
{
  return MEMORY[0x1F40DDFB0]();
}

uint64_t FigReentrantMutexUnlock()
{
  return MEMORY[0x1F40DDFC0]();
}

uint64_t FigReportingAgentOfflineAirPlayCreate()
{
  return MEMORY[0x1F40EDAD0]();
}

uint64_t FigReportingAgentOfflineAirPlayIssueReportingEvent()
{
  return MEMORY[0x1F40EDAD8]();
}

uint64_t FigSampleBufferAudioRendererCentralCreateWithOptions()
{
  return MEMORY[0x1F40EDAE8]();
}

uint64_t FigSampleBufferAudioRendererCreateRemoteWithOptions()
{
  return MEMORY[0x1F40EDAF0]();
}

uint64_t FigSampleBufferAudioRendererCreateWithOptions()
{
  return MEMORY[0x1F40EDB00]();
}

uint64_t FigSampleBufferGetDecryptor()
{
  return MEMORY[0x1F40DE210]();
}

uint64_t FigSampleBufferRenderSynchronizerCentralCreate()
{
  return MEMORY[0x1F40EDB50]();
}

uint64_t FigSampleBufferRenderSynchronizerCreateRemoteWithOptions()
{
  return MEMORY[0x1F40EDB58]();
}

uint64_t FigSampleBufferRenderSynchronizerCreateWithOptions()
{
  return MEMORY[0x1F40EDB60]();
}

uint64_t FigSampleBufferSetDecryptor()
{
  return MEMORY[0x1F40DE230]();
}

uint64_t FigServer_IsAirplayd()
{
  return MEMORY[0x1F40DE2D0]();
}

uint64_t FigSignalErrorAt()
{
  return MEMORY[0x1F40DE320]();
}

uint64_t FigSimpleMutexCheckIsLockedOnThisThread()
{
  return MEMORY[0x1F40DE330]();
}

uint64_t FigSimpleMutexCheckIsNotLockedOnThisThread()
{
  return MEMORY[0x1F40DE338]();
}

uint64_t FigSimpleMutexCreate()
{
  return MEMORY[0x1F40DE340]();
}

uint64_t FigSimpleMutexDestroy()
{
  return MEMORY[0x1F40DE348]();
}

uint64_t FigSimpleMutexLock()
{
  return MEMORY[0x1F40DE350]();
}

uint64_t FigSimpleMutexUnlock()
{
  return MEMORY[0x1F40DE360]();
}

uint64_t FigThreadCopyProperty()
{
  return MEMORY[0x1F40DE590]();
}

uint64_t FigThreadGetCurrent()
{
  return MEMORY[0x1F40DE5A0]();
}

uint64_t FigThreadGetMachThreadPriorityValue()
{
  return MEMORY[0x1F40DE5C0]();
}

uint64_t FigThreadRunOnce()
{
  return MEMORY[0x1F40DE5F0]();
}

uint64_t FigUserStackshotWithMessage()
{
  return MEMORY[0x1F40DE7D8]();
}

uint64_t FigUserTailspinWithMessage()
{
  return MEMORY[0x1F40DE7E0]();
}

uint64_t FigXPCMessageCopyCFDictionary()
{
  return MEMORY[0x1F40DE9C8]();
}

uint64_t FigXPCMessageCopyCFString()
{
  return MEMORY[0x1F40DE9E8]();
}

uint64_t FigXPCMessageSetCFDictionary()
{
  return MEMORY[0x1F40DEAD8]();
}

uint64_t FigXPCMessageSetCFString()
{
  return MEMORY[0x1F40DEAF8]();
}

uint64_t FigXPCRelease()
{
  return MEMORY[0x1F40DEB78]();
}

uint64_t FigXPCRetain()
{
  return MEMORY[0x1F40DEC08]();
}

uint64_t GestaltGetBoolean()
{
  return MEMORY[0x1F4116388]();
}

uint64_t GestaltGetDeviceClass()
{
  return MEMORY[0x1F41163A8]();
}

uint64_t GetDeviceModelString()
{
  return MEMORY[0x1F41163C0]();
}

uint64_t GetPrimaryMACAddress()
{
  return MEMORY[0x1F41163F0]();
}

uint64_t GetSystemBuildVersionString()
{
  return MEMORY[0x1F41163F8]();
}

uint64_t HTTPParseByteRangeRequest()
{
  return MEMORY[0x1F4116530]();
}

uint64_t HardwareAddressToCString()
{
  return MEMORY[0x1F4116578]();
}

uint64_t HexToData()
{
  return MEMORY[0x1F4116588]();
}

kern_return_t IOObjectRelease(io_object_t object)
{
  return MEMORY[0x1F40E8F60](*(void *)&object);
}

IOReturn IOPMAssertionCreateWithProperties(CFDictionaryRef AssertionProperties, IOPMAssertionID *AssertionID)
{
  return MEMORY[0x1F40E8F88](AssertionProperties, AssertionID);
}

IOReturn IOPMAssertionRelease(IOPMAssertionID AssertionID)
{
  return MEMORY[0x1F40E8FA8](*(void *)&AssertionID);
}

IOReturn IOPMAssertionSetProperty(IOPMAssertionID theAssertion, CFStringRef theProperty, CFTypeRef theValue)
{
  return MEMORY[0x1F40E8FB8](*(void *)&theAssertion, theProperty, theValue);
}

CFTypeRef IORegistryEntrySearchCFProperty(io_registry_entry_t entry, const io_name_t plane, CFStringRef key, CFAllocatorRef allocator, IOOptionBits options)
{
  return (CFTypeRef)MEMORY[0x1F40E9208](*(void *)&entry, plane, key, allocator, *(void *)&options);
}

uint64_t IOReportChannelGetChannelName()
{
  return MEMORY[0x1F417A738]();
}

uint64_t IOReportChannelGetSubGroup()
{
  return MEMORY[0x1F417A750]();
}

uint64_t IOReportCopyChannelsForDrivers()
{
  return MEMORY[0x1F417A770]();
}

uint64_t IOReportCreateSamples()
{
  return MEMORY[0x1F417A798]();
}

uint64_t IOReportCreateSubscription()
{
  return MEMORY[0x1F417A7A8]();
}

uint64_t IOReportIterate()
{
  return MEMORY[0x1F417A7D0]();
}

uint64_t IOReportSelectChannelsInGroup()
{
  return MEMORY[0x1F417A7F0]();
}

uint64_t IOReportSimpleGetIntegerValue()
{
  return MEMORY[0x1F417A7F8]();
}

io_service_t IOServiceGetMatchingService(mach_port_t mainPort, CFDictionaryRef matching)
{
  return MEMORY[0x1F40E9250](*(void *)&mainPort, matching);
}

CFMutableDictionaryRef IOServiceMatching(const char *name)
{
  return (CFMutableDictionaryRef)MEMORY[0x1F40E9268](name);
}

CFMutableDictionaryRef IOServiceNameMatching(const char *name)
{
  return (CFMutableDictionaryRef)MEMORY[0x1F40E9278](name);
}

uint64_t IsAppleInternalBuild()
{
  return MEMORY[0x1F41165A0]();
}

uint64_t IsAppleTV()
{
  return MEMORY[0x1F41165A8]();
}

uint64_t KeychainAddFormatted()
{
  return MEMORY[0x1F41165B0]();
}

uint64_t KeychainCopyMatchingFormatted()
{
  return MEMORY[0x1F41165B8]();
}

uint64_t KeychainDeleteFormatted()
{
  return MEMORY[0x1F41165C0]();
}

uint64_t KeychainUpdateFormatted()
{
  return MEMORY[0x1F41165C8]();
}

uint64_t LogCategoryCopyOSLogHandle()
{
  return MEMORY[0x1F41165D8]();
}

uint64_t LogControl()
{
  return MEMORY[0x1F4116610]();
}

uint64_t LogPrintF()
{
  return MEMORY[0x1F4116630]();
}

uint64_t LogShow()
{
  return MEMORY[0x1F4116660]();
}

uint64_t MGCopyAnswer()
{
  return MEMORY[0x1F417CDE0]();
}

uint64_t MGGetProductType()
{
  return MEMORY[0x1F417CE18]();
}

uint64_t MGGetSInt32Answer()
{
  return MEMORY[0x1F417CE28]();
}

uint64_t MGRegisterForUpdates()
{
  return MEMORY[0x1F417CE60]();
}

uint64_t MillisecondsToUpTicks()
{
  return MEMORY[0x1F41166B0]();
}

uint64_t MirroredRingBufferFree()
{
  return MEMORY[0x1F41166B8]();
}

uint64_t MirroredRingBufferInit()
{
  return MEMORY[0x1F41166C0]();
}

uint64_t NSErrorToOSStatus()
{
  return MEMORY[0x1F4116790]();
}

uint64_t NTPClockCreate()
{
  return MEMORY[0x1F41167E0]();
}

uint64_t NTPClockGetListenPort()
{
  return MEMORY[0x1F41167E8]();
}

uint64_t NTPClockGetSynchronizedNTPTime()
{
  return MEMORY[0x1F41167F0]();
}

uint64_t NTPClockGetSynchronizedNTPTimeNearUpTicks()
{
  return MEMORY[0x1F41167F8]();
}

uint64_t NTPClockGetUpTicksNearSynchronizedNTPTime()
{
  return MEMORY[0x1F4116800]();
}

uint64_t NTPClockSetEpoch()
{
  return MEMORY[0x1F4116808]();
}

uint64_t NTPClockSetListenPort()
{
  return MEMORY[0x1F4116810]();
}

uint64_t NTPClockSetP2P()
{
  return MEMORY[0x1F4116818]();
}

uint64_t NTPClockSetPeer()
{
  return MEMORY[0x1F4116820]();
}

uint64_t NTPClockSetQoSDisabled()
{
  return MEMORY[0x1F4116828]();
}

uint64_t NTPClockSetRTCP()
{
  return MEMORY[0x1F4116830]();
}

uint64_t NTPClockSetThreadName()
{
  return MEMORY[0x1F4116838]();
}

uint64_t NTPClockSetThreadPriority()
{
  return MEMORY[0x1F4116840]();
}

uint64_t NTPClockStartClient()
{
  return MEMORY[0x1F4116848]();
}

uint64_t NTPClockStartServer()
{
  return MEMORY[0x1F4116850]();
}

uint64_t NTPClockStop()
{
  return MEMORY[0x1F4116858]();
}

uint64_t NTPtoUpTicks()
{
  return MEMORY[0x1F4116860]();
}

uint64_t PairingSessionCopyIdentity()
{
  return MEMORY[0x1F41168F0]();
}

uint64_t PairingSessionCopyPeers()
{
  return MEMORY[0x1F4116908]();
}

uint64_t PairingSessionCreate()
{
  return MEMORY[0x1F4116918]();
}

uint64_t PairingSessionDeletePeer()
{
  return MEMORY[0x1F4116920]();
}

uint64_t PairingSessionSavePeer()
{
  return MEMORY[0x1F4116960]();
}

uint64_t PairingSessionSetFlags()
{
  return MEMORY[0x1F4116978]();
}

uint64_t PairingSessionSetKeychainInfo()
{
  return MEMORY[0x1F4116988]();
}

uint64_t RandomBytes()
{
  return MEMORY[0x1F4116A00]();
}

uint64_t ReleaseUsableInterfaceList()
{
  return MEMORY[0x1F4116A10]();
}

CFStringRef SCNetworkInterfaceGetInterfaceType(SCNetworkInterfaceRef interface)
{
  return (CFStringRef)MEMORY[0x1F4101EA0](interface);
}

uint64_t SNPrintF()
{
  return MEMORY[0x1F4116A18]();
}

uint64_t SRP6a_client_method()
{
  return MEMORY[0x1F410AAE8]();
}

uint64_t SRP6a_server_method()
{
  return MEMORY[0x1F410AAF0]();
}

uint64_t SRP_compute_key()
{
  return MEMORY[0x1F410AAF8]();
}

uint64_t SRP_free()
{
  return MEMORY[0x1F410AB00]();
}

uint64_t SRP_gen_pub()
{
  return MEMORY[0x1F410AB08]();
}

uint64_t SRP_new()
{
  return MEMORY[0x1F410AB10]();
}

uint64_t SRP_respond()
{
  return MEMORY[0x1F410AB18]();
}

uint64_t SRP_set_auth_password()
{
  return MEMORY[0x1F410AB20]();
}

uint64_t SRP_set_params()
{
  return MEMORY[0x1F410AB28]();
}

uint64_t SRP_set_username()
{
  return MEMORY[0x1F410AB30]();
}

uint64_t SRP_verify()
{
  return MEMORY[0x1F410AB38]();
}

uint64_t SecondsToUpTicks()
{
  return MEMORY[0x1F4116A30]();
}

uint64_t SecondsToUpTicksF()
{
  return MEMORY[0x1F4116A38]();
}

uint64_t SetCurrentThreadPriority()
{
  return MEMORY[0x1F4116A58]();
}

uint64_t SockAddrCompareAddr()
{
  return MEMORY[0x1F4116A68]();
}

uint64_t SockAddrCopy()
{
  return MEMORY[0x1F4116A78]();
}

uint64_t SockAddrGetPort()
{
  return MEMORY[0x1F4116A80]();
}

uint64_t SockAddrSetPort()
{
  return MEMORY[0x1F4116A90]();
}

uint64_t SockAddrToString()
{
  return MEMORY[0x1F4116AA0]();
}

uint64_t StringToSockAddr()
{
  return MEMORY[0x1F4116B18]();
}

uint64_t StringToUUID()
{
  return MEMORY[0x1F4116B20]();
}

int TXTRecordContainsKey(uint16_t txtLen, const void *txtRecord, const char *key)
{
  return MEMORY[0x1F40C9A20](txtLen, txtRecord, key);
}

void TXTRecordCreate(TXTRecordRef *txtRecord, uint16_t bufferLen, void *buffer)
{
}

void TXTRecordDeallocate(TXTRecordRef *txtRecord)
{
}

const void *__cdecl TXTRecordGetBytesPtr(const TXTRecordRef *txtRecord)
{
  return (const void *)MEMORY[0x1F40C9A38](txtRecord);
}

uint16_t TXTRecordGetCount(uint16_t txtLen, const void *txtRecord)
{
  return MEMORY[0x1F40C9A40](txtLen, txtRecord);
}

DNSServiceErrorType TXTRecordGetItemAtIndex(uint16_t txtLen, const void *txtRecord, uint16_t itemIndex, uint16_t keyBufLen, char *key, uint8_t *valueLen, const void **value)
{
  return MEMORY[0x1F40C9A48](txtLen, txtRecord, itemIndex, keyBufLen, key, valueLen, value);
}

uint16_t TXTRecordGetLength(const TXTRecordRef *txtRecord)
{
  return MEMORY[0x1F40C9A50](txtRecord);
}

const void *__cdecl TXTRecordGetValuePtr(uint16_t txtLen, const void *txtRecord, const char *key, uint8_t *valueLen)
{
  return (const void *)MEMORY[0x1F40C9A58](txtLen, txtRecord, key, valueLen);
}

DNSServiceErrorType TXTRecordRemoveValue(TXTRecordRef *txtRecord, const char *key)
{
  return MEMORY[0x1F40C9A60](txtRecord, key);
}

DNSServiceErrorType TXTRecordSetValue(TXTRecordRef *txtRecord, const char *key, uint8_t valueSize, const void *value)
{
  return MEMORY[0x1F40C9A68](txtRecord, key, valueSize, value);
}

uint64_t TextToHardwareAddress()
{
  return MEMORY[0x1F4116BA0]();
}

uint64_t TextToInt32()
{
  return MEMORY[0x1F4116BB8]();
}

uint64_t TranslateValue()
{
  return MEMORY[0x1F4116BC8]();
}

uint64_t UUIDtoCStringFlags()
{
  return MEMORY[0x1F4116BE0]();
}

uint64_t UpTicksPerSecond()
{
  return MEMORY[0x1F4116BE8]();
}

uint64_t UpTicksToMicroseconds()
{
  return MEMORY[0x1F4116BF0]();
}

uint64_t UpTicksToMilliseconds()
{
  return MEMORY[0x1F4116BF8]();
}

uint64_t UpTicksToNTP()
{
  return MEMORY[0x1F4116C00]();
}

uint64_t UpTicksToNanoseconds()
{
  return MEMORY[0x1F4116C08]();
}

uint64_t UpTicksToSeconds()
{
  return MEMORY[0x1F4116C10]();
}

uint64_t UpTicksToSecondsF()
{
  return MEMORY[0x1F4116C20]();
}

uint64_t WiFiManagerGetInt64()
{
  return MEMORY[0x1F4116C58]();
}

void *__cdecl _Block_copy(const void *aBlock)
{
  return (void *)MEMORY[0x1F40C9A70](aBlock);
}

void _Block_object_assign(void *a1, const void *a2, const int a3)
{
}

void _Block_object_dispose(const void *a1, const int a2)
{
}

void _Block_release(const void *aBlock)
{
}

uint64_t _CFRuntimeCreateInstance()
{
  return MEMORY[0x1F40D90D0]();
}

uint64_t _CFRuntimeRegisterClass()
{
  return MEMORY[0x1F40D90E8]();
}

uint64_t _LogCategory_Initialize()
{
  return MEMORY[0x1F4116C88]();
}

uint64_t _SCNetworkInterfaceCreateWithBSDName()
{
  return MEMORY[0x1F41020C8]();
}

uint64_t _SCNetworkInterfaceGetFamilySubType()
{
  return MEMORY[0x1F41020D0]();
}

uint64_t _SCNetworkInterfaceGetIOPath()
{
  return MEMORY[0x1F41020E8]();
}

uint64_t _SCNetworkInterfaceIsPhysicalEthernet()
{
  return MEMORY[0x1F41020F8]();
}

uint64_t _SCNetworkInterfaceIsThunderbolt()
{
  return MEMORY[0x1F4102100]();
}

void _Unwind_Resume(_Unwind_Exception *exception_object)
{
}

void caulk::concurrent::message::~message(caulk::concurrent::message *this)
{
}

uint64_t caulk::concurrent::messenger::drain(caulk::concurrent::messenger *this)
{
  return MEMORY[0x1F41778F0](this);
}

uint64_t caulk::concurrent::messenger::enqueue(caulk::concurrent::messenger *this, caulk::concurrent::message *a2)
{
  return MEMORY[0x1F41778F8](this, a2);
}

uint64_t caulk::concurrent::messenger::messenger()
{
  return MEMORY[0x1F4177908]();
}

void caulk::concurrent::messenger::~messenger(caulk::concurrent::messenger *this)
{
}

uint64_t caulk::init_realtime_safe_resource(caulk *this)
{
  return MEMORY[0x1F4177978](this);
}

uint64_t caulk::semaphore::timed_wait(caulk::semaphore *this, double a2)
{
  return MEMORY[0x1F4177B70](this, a2);
}

uint64_t caulk::semaphore::semaphore(caulk::semaphore *this)
{
  return MEMORY[0x1F4177B80](this);
}

void caulk::semaphore::~semaphore(caulk::semaphore *this)
{
}

void std::bad_alloc::~bad_alloc(std::bad_alloc *this)
{
}

void std::terminate(void)
{
}

void operator delete()
{
  while (1)
    ;
}

void operator new()
{
  while (1)
    ;
}

void *__cxa_begin_catch(void *a1)
{
  return (void *)MEMORY[0x1F417EF48](a1);
}

void __cxa_end_catch(void)
{
}

void *__cxa_get_exception_ptr(void *a1)
{
  return (void *)MEMORY[0x1F417EF70](a1);
}

int *__error(void)
{
  return (int *)MEMORY[0x1F40C9B88]();
}

float __exp10f(float a1)
{
  MEMORY[0x1F40C9B98](a1);
  return result;
}

int __maskrune(__darwin_ct_rune_t a1, unint64_t a2)
{
  return MEMORY[0x1F40C9C18](*(void *)&a1, a2);
}

uint64_t __memcpy_chk()
{
  return MEMORY[0x1F40C9C28]();
}

__darwin_ct_rune_t __toupper(__darwin_ct_rune_t a1)
{
  return MEMORY[0x1F40C9D00](*(void *)&a1);
}

uint64_t _os_feature_enabled_impl()
{
  return MEMORY[0x1F40C9FB0]();
}

void _os_signpost_emit_with_name_impl(void *dso, os_log_t log, os_signpost_type_t type, os_signpost_id_t spid, const char *name, const char *format, uint8_t *buf, uint32_t size)
{
}

int accept(int a1, sockaddr *a2, socklen_t *a3)
{
  return MEMORY[0x1F40CA200](*(void *)&a1, a2, a3);
}

uint32_t arc4random(void)
{
  return MEMORY[0x1F40CA3A8]();
}

void arc4random_buf(void *__buf, size_t __nbytes)
{
}

int bind(int a1, const sockaddr *a2, socklen_t a3)
{
  return MEMORY[0x1F40CA530](*(void *)&a1, a2, *(void *)&a3);
}

void bzero(void *a1, size_t a2)
{
}

uint64_t cccurve25519()
{
  return MEMORY[0x1F40CA7D0]();
}

uint64_t cccurve25519_make_pub()
{
  return MEMORY[0x1F40CA7E8]();
}

uint64_t cced25519_make_key_pair_compat()
{
  return MEMORY[0x1F4116C90]();
}

uint64_t cced25519_sign_compat()
{
  return MEMORY[0x1F4116C98]();
}

uint64_t cced25519_verify_compat()
{
  return MEMORY[0x1F4116CA0]();
}

uint64_t chacha20_poly1305_add_aad()
{
  return MEMORY[0x1F4116CC0]();
}

uint64_t chacha20_poly1305_decrypt()
{
  return MEMORY[0x1F4116CC8]();
}

uint64_t chacha20_poly1305_encrypt()
{
  return MEMORY[0x1F4116CE8]();
}

uint64_t chacha20_poly1305_final()
{
  return MEMORY[0x1F4116D00]();
}

uint64_t chacha20_poly1305_init_64x64()
{
  return MEMORY[0x1F4116D08]();
}

uint64_t chacha20_poly1305_verify()
{
  return MEMORY[0x1F4116D10]();
}

int close(int a1)
{
  return MEMORY[0x1F40CB3F8](*(void *)&a1);
}

uint64_t cstr_free()
{
  return MEMORY[0x1F410AB40]();
}

void dispatch_after(dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block)
{
}

void dispatch_after_f(dispatch_time_t when, dispatch_queue_t queue, void *context, dispatch_function_t work)
{
}

void dispatch_async(dispatch_queue_t queue, dispatch_block_t block)
{
}

void dispatch_async_f(dispatch_queue_t queue, void *context, dispatch_function_t work)
{
}

dispatch_block_t dispatch_block_create_with_qos_class(dispatch_block_flags_t flags, dispatch_qos_class_t qos_class, int relative_priority, dispatch_block_t block)
{
  return (dispatch_block_t)MEMORY[0x1F40CB9C8](flags, *(void *)&qos_class, *(void *)&relative_priority, block);
}

BOOL dispatch_data_apply(dispatch_data_t data, dispatch_data_applier_t applier)
{
  return MEMORY[0x1F40CBA00](data, applier);
}

dispatch_data_t dispatch_data_create(const void *buffer, size_t size, dispatch_queue_t queue, dispatch_block_t destructor)
{
  return (dispatch_data_t)MEMORY[0x1F40CBA10](buffer, size, queue, destructor);
}

dispatch_data_t dispatch_data_create_concat(dispatch_data_t data1, dispatch_data_t data2)
{
  return (dispatch_data_t)MEMORY[0x1F40CBA20](data1, data2);
}

dispatch_data_t dispatch_data_create_map(dispatch_data_t data, const void **buffer_ptr, size_t *size_ptr)
{
  return (dispatch_data_t)MEMORY[0x1F40CBA30](data, buffer_ptr, size_ptr);
}

size_t dispatch_data_get_size(dispatch_data_t data)
{
  return MEMORY[0x1F40CBA48](data);
}

dispatch_queue_global_t dispatch_get_global_queue(intptr_t identifier, uintptr_t flags)
{
  return (dispatch_queue_global_t)MEMORY[0x1F40CBA60](identifier, flags);
}

void dispatch_once(dispatch_once_t *predicate, dispatch_block_t block)
{
}

void dispatch_once_f(dispatch_once_t *predicate, void *context, dispatch_function_t function)
{
}

dispatch_queue_attr_t dispatch_queue_attr_make_with_qos_class(dispatch_queue_attr_t attr, dispatch_qos_class_t qos_class, int relative_priority)
{
  return (dispatch_queue_attr_t)MEMORY[0x1F40CBBB8](attr, *(void *)&qos_class, *(void *)&relative_priority);
}

dispatch_queue_t dispatch_queue_create(const char *label, dispatch_queue_attr_t attr)
{
  return (dispatch_queue_t)MEMORY[0x1F40CBBC0](label, attr);
}

void dispatch_release(dispatch_object_t object)
{
}

void dispatch_resume(dispatch_object_t object)
{
}

void dispatch_retain(dispatch_object_t object)
{
}

dispatch_semaphore_t dispatch_semaphore_create(intptr_t value)
{
  return (dispatch_semaphore_t)MEMORY[0x1F40CBC30](value);
}

intptr_t dispatch_semaphore_signal(dispatch_semaphore_t dsema)
{
  return MEMORY[0x1F40CBC40](dsema);
}

intptr_t dispatch_semaphore_wait(dispatch_semaphore_t dsema, dispatch_time_t timeout)
{
  return MEMORY[0x1F40CBC50](dsema, timeout);
}

void dispatch_set_context(dispatch_object_t object, void *context)
{
}

void dispatch_source_cancel(dispatch_source_t source)
{
}

dispatch_source_t dispatch_source_create(dispatch_source_type_t type, uintptr_t handle, uintptr_t mask, dispatch_queue_t queue)
{
  return (dispatch_source_t)MEMORY[0x1F40CBC98](type, handle, mask, queue);
}

uintptr_t dispatch_source_get_data(dispatch_source_t source)
{
  return MEMORY[0x1F40CBCA0](source);
}

void dispatch_source_set_cancel_handler_f(dispatch_source_t source, dispatch_function_t handler)
{
}

void dispatch_source_set_event_handler(dispatch_source_t source, dispatch_block_t handler)
{
}

void dispatch_source_set_event_handler_f(dispatch_source_t source, dispatch_function_t handler)
{
}

void dispatch_source_set_timer(dispatch_source_t source, dispatch_time_t start, uint64_t interval, uint64_t leeway)
{
}

void dispatch_suspend(dispatch_object_t object)
{
}

void dispatch_sync(dispatch_queue_t queue, dispatch_block_t block)
{
}

void dispatch_sync_f(dispatch_queue_t queue, void *context, dispatch_function_t work)
{
}

dispatch_time_t dispatch_time(dispatch_time_t when, int64_t delta)
{
  return MEMORY[0x1F40CBD30](when, delta);
}

void *__cdecl dlopen(const char *__path, int __mode)
{
  return (void *)MEMORY[0x1F40CBDB8](__path, *(void *)&__mode);
}

void *__cdecl dlsym(void *__handle, const char *__symbol)
{
  return (void *)MEMORY[0x1F40CBDC8](__handle, __symbol);
}

int fclose(FILE *a1)
{
  return MEMORY[0x1F40CC050](a1);
}

int fcntl(int a1, int a2, ...)
{
  return MEMORY[0x1F40CC058](*(void *)&a1, *(void *)&a2);
}

FILE *__cdecl fdopen(int a1, const char *a2)
{
  return (FILE *)MEMORY[0x1F40CC070](*(void *)&a1, a2);
}

int fflush(FILE *a1)
{
  return MEMORY[0x1F40CC0C8](a1);
}

int fprintf(FILE *a1, const char *a2, ...)
{
  return MEMORY[0x1F40CC1D8](a1, a2);
}

void free(void *a1)
{
}

void freeifaddrs(ifaddrs *a1)
{
}

int fstat(int a1, stat *a2)
{
  return MEMORY[0x1F40CC2B8](*(void *)&a1, a2);
}

int getifaddrs(ifaddrs **a1)
{
  return MEMORY[0x1F40CC410](a1);
}

int getloadavg(double a1[], int a2)
{
  return MEMORY[0x1F40CC430](a1, *(void *)&a2);
}

pid_t getpid(void)
{
  return MEMORY[0x1F40CC4A0]();
}

const char *getprogname(void)
{
  return (const char *)MEMORY[0x1F40CC4C0]();
}

uint64_t iceil2()
{
  return MEMORY[0x1F4116D20]();
}

char *__cdecl if_indextoname(unsigned int a1, char *a2)
{
  return (char *)MEMORY[0x1F40CC648](*(void *)&a1, a2);
}

unsigned int if_nametoindex(const char *a1)
{
  return MEMORY[0x1F40CC650](a1);
}

uint64_t ilog2_64()
{
  return MEMORY[0x1F4116D28]();
}

uint64_t in_audio_mx_server_process()
{
  return MEMORY[0x1F410BC98]();
}

uint64_t kdebug_trace()
{
  return MEMORY[0x1F40CC700]();
}

int listen(int a1, int a2)
{
  return MEMORY[0x1F40CC840](*(void *)&a1, *(void *)&a2);
}

float log10f(float a1)
{
  MEMORY[0x1F40CC888](a1);
  return result;
}

uint64_t mach_absolute_time(void)
{
  return MEMORY[0x1F40CC910]();
}

kern_return_t mach_vm_deallocate(vm_map_t target, mach_vm_address_t address, mach_vm_size_t size)
{
  return MEMORY[0x1F40CCA78](*(void *)&target, address, size);
}

kern_return_t mach_vm_remap(vm_map_t target_task, mach_vm_address_t *target_address, mach_vm_size_t size, mach_vm_offset_t mask, int flags, vm_map_t src_task, mach_vm_address_t src_address, BOOLean_t copy, vm_prot_t *cur_protection, vm_prot_t *max_protection, vm_inherit_t inheritance)
{
  return MEMORY[0x1F40CCAB8](*(void *)&target_task, target_address, size, mask, *(void *)&flags, *(void *)&src_task, src_address, *(void *)&copy);
}

malloc_zone_t *__cdecl malloc_create_zone(vm_size_t start_size, unsigned int flags)
{
  return (malloc_zone_t *)MEMORY[0x1F40CCB20](start_size, *(void *)&flags);
}

malloc_zone_t *malloc_default_zone(void)
{
  return (malloc_zone_t *)MEMORY[0x1F40CCB30]();
}

void malloc_set_zone_name(malloc_zone_t *zone, const char *name)
{
}

void *__cdecl malloc_type_calloc(size_t count, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCB90](count, size, type_id);
}

void *__cdecl malloc_type_malloc(size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCB98](size, type_id);
}

void *__cdecl malloc_type_realloc(void *ptr, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCBA8](ptr, size, type_id);
}

void *__cdecl malloc_type_zone_calloc(malloc_zone_t *zone, size_t count, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCBB8](zone, count, size, type_id);
}

void *__cdecl malloc_type_zone_malloc(malloc_zone_t *zone, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCBC0](zone, size, type_id);
}

void *__cdecl malloc_type_zone_memalign(malloc_zone_t *zone, size_t alignment, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCBD0](zone, alignment, size, type_id);
}

void *__cdecl malloc_type_zone_realloc(malloc_zone_t *zone, void *ptr, size_t size, malloc_type_id_t type_id)
{
  return (void *)MEMORY[0x1F40CCBD8](zone, ptr, size, type_id);
}

void malloc_zone_free(malloc_zone_t *zone, void *ptr)
{
}

void *__cdecl memchr(void *__s, int __c, size_t __n)
{
  return (void *)MEMORY[0x1F40CCCD8](__s, *(void *)&__c, __n);
}

void *__cdecl memcpy(void *__dst, const void *__src, size_t __n)
{
  return (void *)MEMORY[0x1F40CCCF0](__dst, __src, __n);
}

void *__cdecl memmove(void *__dst, const void *__src, size_t __len)
{
  return (void *)MEMORY[0x1F40CCD10](__dst, __src, __len);
}

void *__cdecl mmap(void *a1, size_t a2, int a3, int a4, int a5, off_t a6)
{
  return (void *)MEMORY[0x1F40CCE40](a1, a2, *(void *)&a3, *(void *)&a4, *(void *)&a5, a6);
}

int munmap(void *a1, size_t a2)
{
  return MEMORY[0x1F40CCE88](a1, a2);
}

uint32_t notify_cancel(int token)
{
  return MEMORY[0x1F40CD028](*(void *)&token);
}

uint32_t notify_post(const char *name)
{
  return MEMORY[0x1F40CD050](name);
}

uint32_t notify_register_check(const char *name, int *out_token)
{
  return MEMORY[0x1F40CD058](name, out_token);
}

uint32_t notify_register_dispatch(const char *name, int *out_token, dispatch_queue_t queue, notify_handler_t handler)
{
  return MEMORY[0x1F40CD060](name, out_token, queue, handler);
}

uint32_t notify_set_state(int token, uint64_t state64)
{
  return MEMORY[0x1F40CD088](*(void *)&token, state64);
}

id objc_alloc(Class a1)
{
  return (id)MEMORY[0x1F4181638](a1);
}

uint64_t objc_alloc_init()
{
  return MEMORY[0x1F4181648]();
}

id objc_autorelease(id a1)
{
  return (id)MEMORY[0x1F4181660](a1);
}

{
  MEMORY[0x1F4181668](context);
}

{
  return (void *)MEMORY[0x1F4181670]();
}

void objc_enumerationMutation(id obj)
{
}

Class objc_getClass(const char *name)
{
  return (Class)MEMORY[0x1F4181728](name);
}

uint64_t objc_opt_respondsToSelector()
{
  return MEMORY[0x1F41817C8]();
}

int open(const char *a1, int a2, ...)
{
  return MEMORY[0x1F40CD0E0](a1, *(void *)&a2);
}

void os_release(void *object)
{
}

BOOL os_signpost_enabled(os_log_t log)
{
  return MEMORY[0x1F40CD550](log);
}

int proc_name(int pid, void *buffer, uint32_t buffersize)
{
  return MEMORY[0x1F40CD888](*(void *)&pid, buffer, *(void *)&buffersize);
}

int pthread_create(pthread_t *a1, const pthread_attr_t *a2, void *(__cdecl *a3)(void *), void *a4)
{
  return MEMORY[0x1F40CD9B8](a1, a2, a3, a4);
}

int pthread_join(pthread_t a1, void **a2)
{
  return MEMORY[0x1F40CDA38](a1, a2);
}

int pthread_mutex_destroy(pthread_mutex_t *a1)
{
  return MEMORY[0x1F40CDA78](a1);
}

int pthread_mutex_init(pthread_mutex_t *a1, const pthread_mutexattr_t *a2)
{
  return MEMORY[0x1F40CDA80](a1, a2);
}

int pthread_mutex_lock(pthread_mutex_t *a1)
{
  return MEMORY[0x1F40CDA88](a1);
}

int pthread_mutex_unlock(pthread_mutex_t *a1)
{
  return MEMORY[0x1F40CDA98](a1);
}

int pthread_once(pthread_once_t *a1, void (*a2)(void))
{
  return MEMORY[0x1F40CDAC8](a1, a2);
}

void pthread_yield_np(void)
{
}

void qsort(void *__base, size_t __nel, size_t __width, int (__cdecl *__compar)(const void *, const void *))
{
}

ssize_t read(int a1, void *a2, size_t a3)
{
  return MEMORY[0x1F40CDC50](*(void *)&a1, a2, a3);
}

int setlinebuf(FILE *a1)
{
  return MEMORY[0x1F40CDF88](a1);
}

int setsockopt(int a1, int a2, int a3, const void *a4, socklen_t a5)
{
  return MEMORY[0x1F40CDFC0](*(void *)&a1, *(void *)&a2, *(void *)&a3, a4, *(void *)&a5);
}

int snprintf(char *__str, size_t __size, const char *__format, ...)
{
  return MEMORY[0x1F40CE080](__str, __size, __format);
}

int socket(int a1, int a2, int a3)
{
  return MEMORY[0x1F40CE090](*(void *)&a1, *(void *)&a2, *(void *)&a3);
}

int strcasecmp(const char *a1, const char *a2)
{
  return MEMORY[0x1F40CE138](a1, a2);
}

int strcmp(const char *__s1, const char *__s2)
{
  return MEMORY[0x1F40CE158](__s1, __s2);
}

char *__cdecl strdup(const char *__s1)
{
  return (char *)MEMORY[0x1F40CE178](__s1);
}

size_t strlcat(char *__dst, const char *__source, size_t __size)
{
  return MEMORY[0x1F40CE1A8](__dst, __source, __size);
}

size_t strlcpy(char *__dst, const char *__source, size_t __size)
{
  return MEMORY[0x1F40CE1B0](__dst, __source, __size);
}

size_t strlen(const char *__s)
{
  return MEMORY[0x1F40CE1C8](__s);
}

int strncmp(const char *__s1, const char *__s2, size_t __n)
{
  return MEMORY[0x1F40CE1F0](__s1, __s2, __n);
}

uint64_t strncmpx()
{
  return MEMORY[0x1F4116D60]();
}

char *__cdecl strndup(const char *__s1, size_t __n)
{
  return (char *)MEMORY[0x1F40CE200](__s1, __n);
}

unint64_t strtoul(const char *__str, char **__endptr, int __base)
{
  return MEMORY[0x1F40CE2E0](__str, __endptr, *(void *)&__base);
}

uint64_t sysconf(int a1)
{
  return MEMORY[0x1F40CE3B8](*(void *)&a1);
}

int sysctlbyname(const char *a1, void *a2, size_t *a3, void *a4, size_t a5)
{
  return MEMORY[0x1F40CE3D0](a1, a2, a3, a4, a5);
}

int usleep(useconds_t a1)
{
  return MEMORY[0x1F40CE608](*(void *)&a1);
}

void xpc_connection_cancel(xpc_connection_t connection)
{
}

xpc_connection_t xpc_connection_create_mach_service(const char *name, dispatch_queue_t targetq, uint64_t flags)
{
  return (xpc_connection_t)MEMORY[0x1F40CEBD0](name, targetq, flags);
}

pid_t xpc_connection_get_pid(xpc_connection_t connection)
{
  return MEMORY[0x1F40CEC20](connection);
}

uint64_t xpc_connection_has_entitlement()
{
  return MEMORY[0x1F4116D80]();
}

void xpc_connection_resume(xpc_connection_t connection)
{
}

void xpc_connection_send_message(xpc_connection_t connection, xpc_object_t message)
{
}

xpc_object_t xpc_connection_send_message_with_reply_sync(xpc_connection_t connection, xpc_object_t message)
{
  return (xpc_object_t)MEMORY[0x1F40CEC68](connection, message);
}

void xpc_connection_set_event_handler(xpc_connection_t connection, xpc_handler_t handler)
{
}

void xpc_connection_set_target_queue(xpc_connection_t connection, dispatch_queue_t targetq)
{
}

xpc_object_t xpc_dictionary_create(const char *const *keys, xpc_object_t *values, size_t count)
{
  return (xpc_object_t)MEMORY[0x1F40CEE20](keys, values, count);
}

xpc_object_t xpc_dictionary_create_reply(xpc_object_t original)
{
  return (xpc_object_t)MEMORY[0x1F40CEE40](original);
}

int64_t xpc_dictionary_get_int64(xpc_object_t xdict, const char *key)
{
  return MEMORY[0x1F40CEEC8](xdict, key);
}

xpc_connection_t xpc_dictionary_get_remote_connection(xpc_object_t xdict)
{
  return (xpc_connection_t)MEMORY[0x1F40CEEE0](xdict);
}

const char *__cdecl xpc_dictionary_get_string(xpc_object_t xdict, const char *key)
{
  return (const char *)MEMORY[0x1F40CEEF0](xdict, key);
}

void xpc_dictionary_set_int64(xpc_object_t xdict, const char *key, int64_t value)
{
}

xpc_type_t xpc_get_type(xpc_object_t object)
{
  return (xpc_type_t)MEMORY[0x1F40CF148](object);
}

void xpc_release(xpc_object_t object)
{
}

xpc_object_t xpc_retain(xpc_object_t object)
{
  return (xpc_object_t)MEMORY[0x1F40CF248](object);
}

xpc_object_t xpc_shmem_create(void *region, size_t length)
{
  return (xpc_object_t)MEMORY[0x1F40CF268](region, length);
}

size_t xpc_shmem_map(xpc_object_t xshmem, void **region)
{
  return MEMORY[0x1F40CF278](xshmem, region);
}